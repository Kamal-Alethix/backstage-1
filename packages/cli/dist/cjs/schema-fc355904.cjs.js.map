{"version":3,"file":"schema-fc355904.cjs.js","sources":["../../src/commands/config/schema.ts"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { OptionValues } from 'commander';\nimport { JSONSchema7 as JSONSchema } from 'json-schema';\nimport { stringify as stringifyYaml } from 'yaml';\nimport { loadCliConfig } from '../../lib/config';\nimport { JsonObject } from '@backstage/types';\nimport { mergeConfigSchemas } from '@backstage/config-loader';\n\nexport default async (opts: OptionValues) => {\n  const { schema } = await loadCliConfig({\n    args: [],\n    fromPackage: opts.package,\n    mockEnv: true,\n  });\n\n  const merged = mergeConfigSchemas(\n    (schema.serialize().schemas as JsonObject[]).map(\n      _ => _.value as JSONSchema,\n    ),\n  );\n\n  merged.title = 'Application Configuration Schema';\n  merged.description =\n    'This is the schema describing the structure of the app-config.yaml configuration file.';\n\n  if (opts.format === 'json') {\n    process.stdout.write(`${JSON.stringify(merged, null, 2)}\\n`);\n  } else {\n    process.stdout.write(`${stringifyYaml(merged)}\\n`);\n  }\n};\n"],"names":["loadCliConfig","mergeConfigSchemas","stringifyYaml"],"mappings":";;;;;;;;;;;;;;;;;;;AAGA,aAAe,OAAO,IAAI,KAAK;AAC/B,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAMA,oBAAa,CAAC;AACzC,IAAI,IAAI,EAAE,EAAE;AACZ,IAAI,WAAW,EAAE,IAAI,CAAC,OAAO;AAC7B,IAAI,OAAO,EAAE,IAAI;AACjB,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,MAAM,GAAGC,+BAAkB,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;AACpF,EAAE,MAAM,CAAC,KAAK,GAAG,kCAAkC,CAAC;AACpD,EAAE,MAAM,CAAC,WAAW,GAAG,wFAAwF,CAAC;AAChH,EAAE,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,EAAE;AAC9B,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAC5D,CAAC,CAAC,CAAC;AACH,GAAG,MAAM;AACT,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAEC,cAAa,CAAC,MAAM,CAAC,CAAC;AAClD,CAAC,CAAC,CAAC;AACH,GAAG;AACH,CAAC;;;;"}