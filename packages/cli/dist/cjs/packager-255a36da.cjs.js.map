{"version":3,"file":"packager-255a36da.cjs.js","sources":["../../src/lib/builder/plugins.ts","../../src/lib/builder/types.ts","../../src/lib/builder/config.ts","../../src/lib/builder/buildTypeDefinitionsWorker.ts","../../src/lib/builder/buildTypeDefinitions.ts","../../src/lib/builder/packager.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs-extra';\nimport {\n  dirname,\n  resolve as resolvePath,\n  relative as relativePath,\n} from 'path';\nimport { createFilter } from 'rollup-pluginutils';\nimport { Plugin, InputOptions, OutputChunk } from 'rollup';\n\ntype ForwardFileImportsOptions = {\n  include: Array<string | RegExp> | string | RegExp | null;\n  exclude?: Array<string | RegExp> | string | RegExp | null;\n};\n\n/**\n * This rollup plugin leaves all encountered asset imports as-is, but\n * copies the imported files into the output directory.\n *\n * For example `import ImageUrl from './my-image.png'` inside `src/MyComponent` will\n * cause `src/MyComponent/my-image.png` to be copied to the output directory at the\n * path `dist/MyComponent/my-image.png`. The import itself will stay, but be resolved,\n * resulting in something like `import ImageUrl from './MyComponent/my-image.png'`\n */\nexport function forwardFileImports(options: ForwardFileImportsOptions): Plugin {\n  const filter = createFilter(options.include, options.exclude);\n\n  // We collect the absolute paths to all files we want to bundle into the\n  // output dir here. Resolving to relative paths in the output dir happens later.\n  const exportedFiles = new Set<string>();\n\n  // We keep track of output directories that we've already copied files\n  // into, so that we don't duplicate that work\n  const generatedFor = new Set<string>();\n\n  return {\n    name: 'forward-file-imports',\n    async generateBundle(outputOptions, bundle, isWrite) {\n      if (!isWrite) {\n        return;\n      }\n\n      const dir = outputOptions.dir || dirname(outputOptions.file!);\n      if (generatedFor.has(dir)) {\n        return;\n      }\n\n      for (const output of Object.values(bundle)) {\n        if (output.type !== 'chunk') {\n          continue;\n        }\n        const chunk = output as OutputChunk;\n\n        // This'll be an absolute path pointing to the initial index file of the\n        // build, and we use it to find the location of the `src` dir\n        if (!chunk.facadeModuleId) {\n          continue;\n        }\n        generatedFor.add(dir);\n\n        // We're assuming that the index file is at the root of the source dir, and\n        // that all assets exist within that dir.\n        const srcRoot = dirname(chunk.facadeModuleId);\n\n        // Copy all the files we found into the dist dir\n        await Promise.all(\n          Array.from(exportedFiles).map(async exportedFile => {\n            const outputPath = relativePath(srcRoot, exportedFile);\n            const targetFile = resolvePath(dir, outputPath);\n\n            await fs.ensureDir(dirname(targetFile));\n            await fs.copyFile(exportedFile, targetFile);\n          }),\n        );\n        return;\n      }\n    },\n    options(inputOptions) {\n      const origExternal = inputOptions.external;\n\n      // We decorate any existing `external` option with our own way of determining\n      // if a module should be external. The can't use `resolveId`, since asset files\n      // aren't passed there, might be some better way to do this though.\n      const external: InputOptions['external'] = (id, importer, isResolved) => {\n        // Call to inner external option\n        if (\n          typeof origExternal === 'function' &&\n          origExternal(id, importer, isResolved)\n        ) {\n          return true;\n        }\n\n        if (Array.isArray(origExternal) && origExternal.includes(id)) {\n          return true;\n        }\n\n        // The piece that we're adding\n        if (!filter(id)) {\n          return false;\n        }\n\n        // Sanity check, dunno if this can happen\n        if (!importer) {\n          throw new Error(`Unknown importer of file module ${id}`);\n        }\n\n        // Resolve relative imports to the full file URL, for deduping and copying later\n        const fullId = isResolved ? id : resolvePath(dirname(importer), id);\n        exportedFiles.add(fullId);\n\n        // Treating this module as external from here, meaning rollup won't try to\n        // put it in the output bundle, but still keep track of the relative imports\n        // as needed in the output code.\n        return true;\n      };\n\n      return { ...inputOptions, external };\n    },\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum Output {\n  esm,\n  cjs,\n  types,\n}\n\nexport type BuildOptions = {\n  logPrefix?: string;\n  targetDir?: string;\n  outputs: Set<Output>;\n  minify?: boolean;\n  useApiExtractor?: boolean;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport chalk from 'chalk';\nimport fs from 'fs-extra';\nimport { relative as relativePath, resolve as resolvePath } from 'path';\nimport commonjs from '@rollup/plugin-commonjs';\nimport resolve from '@rollup/plugin-node-resolve';\nimport postcss from 'rollup-plugin-postcss';\nimport esbuild from 'rollup-plugin-esbuild';\nimport svgr from '@svgr/rollup';\nimport dts from 'rollup-plugin-dts';\nimport json from '@rollup/plugin-json';\nimport yaml from '@rollup/plugin-yaml';\nimport { RollupOptions, OutputOptions, RollupWarning } from 'rollup';\n\nimport { forwardFileImports } from './plugins';\nimport { BuildOptions, Output } from './types';\nimport { paths } from '../paths';\nimport { svgrTemplate } from '../svgrTemplate';\n\nfunction isFileImport(source: string) {\n  if (source.startsWith('.')) {\n    return true;\n  }\n  if (source.startsWith('/')) {\n    return true;\n  }\n  if (source.match(/[a-z]:/i)) {\n    return true;\n  }\n  return false;\n}\n\nexport async function makeRollupConfigs(\n  options: BuildOptions,\n): Promise<RollupOptions[]> {\n  const configs = new Array<RollupOptions>();\n  const targetDir = options.targetDir ?? paths.targetDir;\n  const onwarn = ({ code, message }: RollupWarning) => {\n    if (code === 'EMPTY_BUNDLE') {\n      return; // We don't care about this one\n    }\n    if (options.logPrefix) {\n      console.log(options.logPrefix + message);\n    } else {\n      console.log(message);\n    }\n  };\n\n  const distDir = resolvePath(targetDir, 'dist');\n\n  if (options.outputs.has(Output.cjs) || options.outputs.has(Output.esm)) {\n    const output = new Array<OutputOptions>();\n    const mainFields = ['module', 'main'];\n\n    if (options.outputs.has(Output.cjs)) {\n      output.push({\n        dir: distDir,\n        entryFileNames: 'index.cjs.js',\n        chunkFileNames: 'cjs/[name]-[hash].cjs.js',\n        format: 'commonjs',\n        sourcemap: true,\n      });\n    }\n    if (options.outputs.has(Output.esm)) {\n      output.push({\n        dir: distDir,\n        entryFileNames: 'index.esm.js',\n        chunkFileNames: 'esm/[name]-[hash].esm.js',\n        format: 'module',\n        sourcemap: true,\n      });\n      // Assume we're building for the browser if ESM output is included\n      mainFields.unshift('browser');\n    }\n\n    configs.push({\n      input: resolvePath(targetDir, 'src/index.ts'),\n      output,\n      onwarn,\n      preserveEntrySignatures: 'strict',\n      // All module imports are always marked as external\n      external: (source, importer, isResolved) =>\n        Boolean(importer && !isResolved && !isFileImport(source)),\n      plugins: [\n        resolve({ mainFields }),\n        commonjs({\n          include: /node_modules/,\n          exclude: [/\\/[^/]+\\.(?:stories|test)\\.[^/]+$/],\n        }),\n        postcss(),\n        forwardFileImports({\n          exclude: /\\.icon\\.svg$/,\n          include: [\n            /\\.svg$/,\n            /\\.png$/,\n            /\\.gif$/,\n            /\\.jpg$/,\n            /\\.jpeg$/,\n            /\\.eot$/,\n            /\\.woff$/,\n            /\\.woff2$/,\n            /\\.ttf$/,\n          ],\n        }),\n        json(),\n        yaml(),\n        svgr({\n          include: /\\.icon\\.svg$/,\n          template: svgrTemplate,\n        }),\n        esbuild({\n          target: 'es2019',\n          minify: options.minify,\n        }),\n      ],\n    });\n  }\n\n  if (options.outputs.has(Output.types) && !options.useApiExtractor) {\n    const typesInput = paths.resolveTargetRoot(\n      'dist-types',\n      relativePath(paths.targetRoot, targetDir),\n      'src/index.d.ts',\n    );\n\n    const declarationsExist = await fs.pathExists(typesInput);\n    if (!declarationsExist) {\n      const path = relativePath(targetDir, typesInput);\n      throw new Error(\n        `No declaration files found at ${path}, be sure to run ${chalk.bgRed.white(\n          'yarn tsc',\n        )} to generate .d.ts files before packaging`,\n      );\n    }\n\n    configs.push({\n      input: typesInput,\n      output: {\n        file: resolvePath(distDir, 'index.d.ts'),\n        format: 'es',\n      },\n      external: [\n        /\\.css$/,\n        /\\.scss$/,\n        /\\.sass$/,\n        /\\.svg$/,\n        /\\.eot$/,\n        /\\.woff$/,\n        /\\.woff2$/,\n        /\\.ttf$/,\n      ],\n      onwarn,\n      plugins: [dts()],\n    });\n  }\n\n  return configs;\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * NOTE: This is a worker thread function that is stringified and executed\n *       within a `worker_threads.Worker`. Everything in this function must\n *       be self-contained.\n *       Using TypeScript is fine as it is transpiled before being stringified.\n */\nexport async function buildTypeDefinitionsWorker(\n  workerData: any,\n  sendMessage: (message: any) => void,\n) {\n  try {\n    require('@microsoft/api-extractor');\n  } catch (error) {\n    throw new Error(\n      'Failed to resolve @microsoft/api-extractor, it must best installed ' +\n        'as a dependency of your project in order to use experimental type builds',\n    );\n  }\n\n  const { dirname } = require('path');\n  const { entryPoints, workerConfigs, typescriptCompilerFolder } = workerData;\n\n  const apiExtractor = require('@microsoft/api-extractor');\n  const { Extractor, ExtractorConfig, CompilerState } = apiExtractor;\n\n  /**\n   * All of this monkey patching below is because MUI has these bare package.json file as a method\n   * for making TypeScript accept imports like `@material-ui/core/Button`, and improve tree-shaking\n   * by declaring them side effect free.\n   *\n   * The package.json lookup logic in api-extractor really doesn't like that though, as it enforces\n   * that the 'name' field exists in all package.json files that it discovers. This below is just\n   * making sure that we ignore those file package.json files instead of crashing.\n   */\n  const {\n    PackageJsonLookup,\n    // eslint-disable-next-line import/no-extraneous-dependencies\n  } = require('@rushstack/node-core-library/lib/PackageJsonLookup');\n\n  const old = PackageJsonLookup.prototype.tryGetPackageJsonFilePathFor;\n  PackageJsonLookup.prototype.tryGetPackageJsonFilePathFor =\n    function tryGetPackageJsonFilePathForPatch(path: string) {\n      if (\n        path.includes('@material-ui') &&\n        !dirname(path).endsWith('@material-ui')\n      ) {\n        return undefined;\n      }\n      return old.call(this, path);\n    };\n\n  let compilerState;\n  for (const { extractorOptions, targetTypesDir } of workerConfigs) {\n    const extractorConfig = ExtractorConfig.prepare(extractorOptions);\n\n    if (!compilerState) {\n      compilerState = CompilerState.create(extractorConfig, {\n        additionalEntryPoints: entryPoints,\n      });\n    }\n\n    const extractorResult = Extractor.invoke(extractorConfig, {\n      compilerState,\n      localBuild: false,\n      typescriptCompilerFolder,\n      showVerboseMessages: false,\n      showDiagnostics: false,\n      messageCallback: (message: any) => {\n        message.handled = true;\n        sendMessage({ message, targetTypesDir });\n      },\n    });\n\n    if (!extractorResult.succeeded) {\n      throw new Error(\n        `Type definition build completed with ${extractorResult.errorCount} errors` +\n          ` and ${extractorResult.warningCount} warnings`,\n      );\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs-extra';\nimport chalk from 'chalk';\nimport { relative as relativePath, resolve as resolvePath } from 'path';\nimport { paths } from '../paths';\nimport { buildTypeDefinitionsWorker } from './buildTypeDefinitionsWorker';\nimport { runWorkerThreads } from '../parallel';\n\n// These message types are ignored since we want to avoid duplicating the logic of\n// handling them correctly, and we already have the API Reports warning about them.\nconst ignoredMessages = new Set(['tsdoc-undefined-tag', 'ae-forgotten-export']);\n\nexport async function buildTypeDefinitions(\n  targetDirs: string[] = [paths.targetDir],\n) {\n  const packageDirs = targetDirs.map(dir =>\n    relativePath(paths.targetRoot, dir),\n  );\n  const entryPoints = await Promise.all(\n    packageDirs.map(async dir => {\n      const entryPoint = paths.resolveTargetRoot(\n        'dist-types',\n        dir,\n        'src/index.d.ts',\n      );\n\n      const declarationsExist = await fs.pathExists(entryPoint);\n      if (!declarationsExist) {\n        throw new Error(\n          `No declaration files found at ${entryPoint}, be sure to run ${chalk.bgRed.white(\n            'yarn tsc',\n          )} to generate .d.ts files before packaging`,\n        );\n      }\n      return entryPoint;\n    }),\n  );\n\n  const workerConfigs = packageDirs.map(packageDir => {\n    const targetDir = paths.resolveTargetRoot(packageDir);\n    const targetTypesDir = paths.resolveTargetRoot('dist-types', packageDir);\n    const extractorOptions = {\n      configObject: {\n        mainEntryPointFilePath: resolvePath(targetTypesDir, 'src/index.d.ts'),\n        bundledPackages: [],\n\n        compiler: {\n          skipLibCheck: true,\n          tsconfigFilePath: paths.resolveTargetRoot('tsconfig.json'),\n        },\n\n        dtsRollup: {\n          enabled: true,\n          untrimmedFilePath: resolvePath(targetDir, 'dist/index.alpha.d.ts'),\n          betaTrimmedFilePath: resolvePath(targetDir, 'dist/index.beta.d.ts'),\n          publicTrimmedFilePath: resolvePath(targetDir, 'dist/index.d.ts'),\n        },\n\n        newlineKind: 'lf',\n\n        projectFolder: targetDir,\n      },\n      configObjectFullPath: targetDir,\n      packageJsonFullPath: resolvePath(targetDir, 'package.json'),\n    };\n    return { extractorOptions, targetTypesDir };\n  });\n\n  const typescriptDir = paths.resolveTargetRoot('node_modules/typescript');\n  const hasTypescript = await fs.pathExists(typescriptDir);\n  const typescriptCompilerFolder = hasTypescript ? typescriptDir : undefined;\n  await runWorkerThreads({\n    threadCount: 1,\n    workerData: {\n      entryPoints,\n      workerConfigs,\n      typescriptCompilerFolder,\n    },\n    worker: buildTypeDefinitionsWorker,\n    onMessage: ({\n      message,\n      targetTypesDir,\n    }: {\n      message: any;\n      targetTypesDir: string;\n    }) => {\n      if (ignoredMessages.has(message.messageId)) {\n        return;\n      }\n\n      let text = `${message.text} (${message.messageId})`;\n      if (message.sourceFilePath) {\n        text += ' at ';\n        text += relativePath(targetTypesDir, message.sourceFilePath);\n        if (message.sourceFileLine) {\n          text += `:${message.sourceFileLine}`;\n          if (message.sourceFileColumn) {\n            text += `:${message.sourceFileColumn}`;\n          }\n        }\n      }\n      if (message.logLevel === 'error') {\n        console.error(chalk.red(`Error: ${text}`));\n      } else if (\n        message.logLevel === 'warning' ||\n        message.category === 'Extractor'\n      ) {\n        console.warn(`Warning: ${text}`);\n      } else {\n        console.log(text);\n      }\n    },\n  });\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs-extra';\nimport { rollup, RollupOptions } from 'rollup';\nimport chalk from 'chalk';\nimport { relative as relativePath, resolve as resolvePath } from 'path';\nimport { paths } from '../paths';\nimport { makeRollupConfigs } from './config';\nimport { BuildOptions, Output } from './types';\nimport { buildTypeDefinitions } from './buildTypeDefinitions';\nimport { getRoleInfo } from '../role';\nimport { runParallelWorkers } from '../parallel';\n\nexport function formatErrorMessage(error: any) {\n  let msg = '';\n\n  if (error.code === 'PLUGIN_ERROR') {\n    if (error.plugin === 'esbuild') {\n      msg += `${error.message}`;\n      if (error.errors?.length) {\n        msg += `\\n\\n`;\n        for (const { text, location } of error.errors) {\n          const { line, column } = location;\n          const path = relativePath(paths.targetDir, error.id);\n          const loc = chalk.cyan(`${path}:${line}:${column}`);\n\n          if (text === 'Unexpected \"<\"' && error.id.endsWith('.js')) {\n            msg += `${loc}: ${text}, JavaScript files with JSX should use a .jsx extension`;\n          } else {\n            msg += `${loc}: ${text}`;\n          }\n        }\n      }\n    } else {\n      // Log which plugin is causing errors to make it easier to identity.\n      // If we see these in logs we likely want to provide some custom error\n      // output for those plugins too.\n      msg += `(plugin ${error.plugin}) ${error}\\n`;\n    }\n  } else {\n    // Generic rollup errors, log what's available\n    if (error.loc) {\n      const file = `${paths.resolveTarget((error.loc.file || error.id)!)}`;\n      const pos = `${error.loc.line}:${error.loc.column}`;\n      msg += `${file} [${pos}]\\n`;\n    } else if (error.id) {\n      msg += `${paths.resolveTarget(error.id)}\\n`;\n    }\n\n    msg += `${error}\\n`;\n\n    if (error.url) {\n      msg += `${chalk.cyan(error.url)}\\n`;\n    }\n\n    if (error.frame) {\n      msg += `${chalk.dim(error.frame)}\\n`;\n    }\n  }\n  return msg;\n}\n\nasync function rollupBuild(config: RollupOptions) {\n  try {\n    const bundle = await rollup(config);\n    if (config.output) {\n      for (const output of [config.output].flat()) {\n        await bundle.generate(output);\n        await bundle.write(output);\n      }\n    }\n  } catch (error) {\n    throw new Error(formatErrorMessage(error));\n  }\n}\n\nexport const buildPackage = async (options: BuildOptions) => {\n  try {\n    const { resolutions } = await fs.readJson(\n      paths.resolveTargetRoot('package.json'),\n    );\n    if (resolutions?.esbuild) {\n      console.warn(\n        chalk.red(\n          'Your root package.json contains a \"resolutions\" entry for \"esbuild\". This was ' +\n            'included in older @backstage/create-app templates in order to work around build ' +\n            'issues that have since been fixed. Please remove the entry and run `yarn install`',\n        ),\n      );\n    }\n  } catch {\n    /* Errors ignored, this is just a warning */\n  }\n\n  const rollupConfigs = await makeRollupConfigs(options);\n\n  await fs.remove(paths.resolveTarget('dist'));\n\n  const buildTasks = rollupConfigs.map(rollupBuild);\n\n  if (options.outputs.has(Output.types) && options.useApiExtractor) {\n    buildTasks.push(buildTypeDefinitions());\n  }\n\n  await Promise.all(buildTasks);\n};\n\nexport const buildPackages = async (options: BuildOptions[]) => {\n  if (options.some(opt => !opt.targetDir)) {\n    throw new Error('targetDir must be set for all build options');\n  }\n  const rollupConfigs = await Promise.all(options.map(makeRollupConfigs));\n\n  await Promise.all(\n    options.map(({ targetDir }) => fs.remove(resolvePath(targetDir!, 'dist'))),\n  );\n\n  const buildTasks = rollupConfigs.flat().map(opts => () => rollupBuild(opts));\n\n  const typeDefinitionTargetDirs = options\n    .filter(\n      ({ outputs, useApiExtractor }) =>\n        outputs.has(Output.types) && useApiExtractor,\n    )\n    .map(_ => _.targetDir!);\n\n  if (typeDefinitionTargetDirs.length > 0) {\n    // Make sure this one is started first\n    buildTasks.unshift(() => buildTypeDefinitions(typeDefinitionTargetDirs));\n  }\n\n  await runParallelWorkers({\n    items: buildTasks,\n    worker: async task => task(),\n  });\n};\n\nexport function getOutputsForRole(role: string): Set<Output> {\n  const outputs = new Set<Output>();\n\n  for (const output of getRoleInfo(role).output) {\n    if (output === 'cjs') {\n      outputs.add(Output.cjs);\n    }\n    if (output === 'esm') {\n      outputs.add(Output.esm);\n    }\n    if (output === 'types') {\n      outputs.add(Output.types);\n    }\n  }\n\n  return outputs;\n}\n"],"names":["createFilter","dirname","relativePath","resolvePath","fs","paths","resolve","commonjs","postcss","json","yaml","svgr","svgrTemplate","esbuild","path","chalk","dts","runWorkerThreads","rollup","runParallelWorkers","getRoleInfo"],"mappings":"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"}