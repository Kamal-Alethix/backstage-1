{"version":3,"file":"diff-d3552cdd.cjs.js","sources":["../../src/lib/diff/handlers.ts","../../src/lib/diff/prompts.ts","../../src/lib/diff/read.ts","../../src/commands/plugin/diff.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport chalk from 'chalk';\nimport { diffLines } from 'diff';\nimport { sep, posix } from 'path';\nimport { FileDiff, PromptFunc, FileHandler, WriteFileFunc } from './types';\n\nfunction sortObjectKeys(obj: Record<string, unknown>) {\n  const sortedKeys = Object.keys(obj).sort();\n  for (const key of sortedKeys) {\n    const value = obj[key];\n    delete obj[key];\n    obj[key] = value;\n  }\n}\n\nclass PackageJsonHandler {\n  static async handler(\n    { path, write, missing, targetContents, templateContents }: FileDiff,\n    prompt: PromptFunc,\n    variant?: string,\n  ) {\n    console.log('Checking package.json');\n\n    if (missing) {\n      throw new Error(`${path} doesn't exist`);\n    }\n\n    const pkg = JSON.parse(templateContents);\n    const targetPkg = JSON.parse(targetContents);\n\n    const handler = new PackageJsonHandler(\n      write,\n      prompt,\n      pkg,\n      targetPkg,\n      variant,\n    );\n    await handler.handle();\n  }\n\n  static async appHandler(file: FileDiff, prompt: PromptFunc) {\n    return PackageJsonHandler.handler(file, prompt, 'app');\n  }\n\n  constructor(\n    private readonly writeFunc: WriteFileFunc,\n    private readonly prompt: PromptFunc,\n    private readonly pkg: any,\n    private readonly targetPkg: any,\n    private readonly variant?: string,\n  ) {}\n\n  async handle() {\n    await this.syncField('main');\n    if (this.variant !== 'app') {\n      await this.syncField('main:src');\n    }\n    await this.syncField('types');\n    await this.syncFiles();\n    await this.syncScripts();\n    await this.syncPublishConfig();\n    await this.syncDependencies('dependencies');\n    await this.syncDependencies('peerDependencies', true);\n    await this.syncDependencies('devDependencies');\n    await this.syncReactDeps();\n  }\n\n  // Make sure a field inside package.json is in sync. This mutates the targetObj and writes package.json on change.\n  private async syncField(\n    fieldName: string,\n    obj: any = this.pkg,\n    targetObj: any = this.targetPkg,\n    prefix?: string,\n    sort?: boolean,\n    optional?: boolean,\n  ) {\n    const fullFieldName = chalk.cyan(\n      prefix ? `${prefix}[${fieldName}]` : fieldName,\n    );\n    const newValue = obj[fieldName];\n    const coloredNewValue = chalk.cyan(JSON.stringify(newValue));\n\n    if (fieldName in targetObj) {\n      const oldValue = targetObj[fieldName];\n      if (JSON.stringify(oldValue) === JSON.stringify(newValue)) {\n        return;\n      }\n\n      const coloredOldValue = chalk.cyan(JSON.stringify(oldValue));\n      const msg = `package.json has mismatched field, ${fullFieldName}, change from ${coloredOldValue} to ${coloredNewValue}?`;\n      if (await this.prompt(msg)) {\n        targetObj[fieldName] = newValue;\n        if (sort) {\n          sortObjectKeys(targetObj);\n        }\n        await this.write();\n      }\n    } else if (fieldName in obj && optional !== true) {\n      if (\n        await this.prompt(\n          `package.json is missing field ${fullFieldName}, set to ${coloredNewValue}?`,\n        )\n      ) {\n        targetObj[fieldName] = newValue;\n        if (sort) {\n          sortObjectKeys(targetObj);\n        }\n        await this.write();\n      }\n    }\n  }\n\n  private async syncFiles() {\n    const { configSchema } = this.targetPkg;\n    const hasSchemaFile = typeof configSchema === 'string';\n\n    if (!this.targetPkg.files) {\n      const expected = hasSchemaFile ? ['dist', configSchema] : ['dist'];\n      if (\n        await this.prompt(\n          `package.json is missing field \"files\", set to ${JSON.stringify(\n            expected,\n          )}?`,\n        )\n      ) {\n        this.targetPkg.files = expected;\n        await this.write();\n      }\n    } else {\n      const missing = [];\n      if (!this.targetPkg.files.includes('dist')) {\n        missing.push('dist');\n      }\n      if (hasSchemaFile && !this.targetPkg.files.includes(configSchema)) {\n        missing.push(configSchema);\n      }\n      if (missing.length) {\n        if (\n          await this.prompt(\n            `package.json is missing ${JSON.stringify(\n              missing,\n            )} in the \"files\" field, add?`,\n          )\n        ) {\n          this.targetPkg.files.push(...missing);\n          await this.write();\n        }\n      }\n    }\n  }\n\n  private async syncScripts() {\n    const pkgScripts = this.pkg.scripts;\n    const targetScripts = (this.targetPkg.scripts =\n      this.targetPkg.scripts || {});\n\n    if (!pkgScripts) {\n      return;\n    }\n\n    // Skip diffing package scripts that have been migrated to the new commands\n    const hasNewScript = Object.values(targetScripts).some(script =>\n      String(script).includes('backstage-cli package '),\n    );\n    if (hasNewScript) {\n      return;\n    }\n\n    for (const key of Object.keys(pkgScripts)) {\n      await this.syncField(key, pkgScripts, targetScripts, 'scripts');\n    }\n  }\n\n  private async syncPublishConfig() {\n    const pkgPublishConf = this.pkg.publishConfig;\n    const targetPublishConf = this.targetPkg.publishConfig;\n\n    // If template doesn't have a publish config we're done\n    if (!pkgPublishConf) {\n      return;\n    }\n\n    // Publish config can be removed the the target, skip in that case\n    if (!targetPublishConf) {\n      if (await this.prompt('Missing publishConfig, do you want to add it?')) {\n        this.targetPkg.publishConfig = pkgPublishConf;\n        await this.write();\n      }\n      return;\n    }\n\n    for (const key of Object.keys(pkgPublishConf)) {\n      // Don't want to mess with peoples internal setup\n      if (!['access', 'registry'].includes(key)) {\n        await this.syncField(\n          key,\n          pkgPublishConf,\n          targetPublishConf,\n          'publishConfig',\n        );\n      }\n    }\n  }\n\n  private async syncDependencies(fieldName: string, required: boolean = false) {\n    const pkgDeps = this.pkg[fieldName];\n    const targetDeps = (this.targetPkg[fieldName] =\n      this.targetPkg[fieldName] || {});\n\n    if (!pkgDeps && !required) {\n      return;\n    }\n\n    // Hardcoded removal of these during migration\n    await this.syncField('@backstage/core', {}, targetDeps, fieldName, true);\n    await this.syncField(\n      '@backstage/core-api',\n      {},\n      targetDeps,\n      fieldName,\n      true,\n    );\n\n    for (const key of Object.keys(pkgDeps)) {\n      if (this.variant === 'app' && key.startsWith('plugin-')) {\n        continue;\n      }\n\n      await this.syncField(\n        key,\n        pkgDeps,\n        targetDeps,\n        fieldName,\n        true,\n        !required,\n      );\n    }\n  }\n\n  private async syncReactDeps() {\n    const targetDeps = (this.targetPkg.dependencies =\n      this.targetPkg.dependencies || {});\n\n    // Remove these from from deps since they're now in peerDeps\n    await this.syncField('react', {}, targetDeps, 'dependencies');\n    await this.syncField('react-dom', {}, targetDeps, 'dependencies');\n  }\n\n  private async write() {\n    await this.writeFunc(`${JSON.stringify(this.targetPkg, null, 2)}\\n`);\n  }\n}\n\n// Make sure the file is an exact match of the template\nasync function exactMatchHandler(\n  { path, write, missing, targetContents, templateContents }: FileDiff,\n  prompt: PromptFunc,\n) {\n  console.log(`Checking ${path}`);\n  const coloredPath = chalk.cyan(path);\n\n  if (missing) {\n    if (await prompt(`Missing ${coloredPath}, do you want to add it?`)) {\n      await write(templateContents);\n    }\n    return;\n  }\n  if (targetContents === templateContents) {\n    return;\n  }\n\n  const diffs = diffLines(targetContents, templateContents);\n  for (const diff of diffs) {\n    if (diff.added) {\n      process.stdout.write(chalk.green(`+${diff.value}`));\n    } else if (diff.removed) {\n      process.stdout.write(chalk.red(`-${diff.value}`));\n    } else {\n      process.stdout.write(` ${diff.value}`);\n    }\n  }\n\n  if (\n    await prompt(\n      `Outdated ${coloredPath}, do you want to apply the above patch?`,\n    )\n  ) {\n    await write(templateContents);\n  }\n}\n\n// Adds the file if it is missing, but doesn't check existing files\nasync function existsHandler(\n  { path, write, missing, templateContents }: FileDiff,\n  prompt: PromptFunc,\n) {\n  console.log(`Making sure ${path} exists`);\n\n  const coloredPath = chalk.cyan(path);\n\n  if (missing) {\n    if (await prompt(`Missing ${coloredPath}, do you want to add it?`)) {\n      await write(templateContents);\n    }\n    return;\n  }\n}\n\nasync function skipHandler({ path }: FileDiff) {\n  console.log(`Skipping ${path}`);\n}\n\nexport const handlers = {\n  skip: skipHandler,\n  exists: existsHandler,\n  exactMatch: exactMatchHandler,\n  packageJson: PackageJsonHandler.handler,\n  appPackageJson: PackageJsonHandler.appHandler,\n};\n\nexport async function handleAllFiles(\n  fileHandlers: FileHandler[],\n  files: FileDiff[],\n  promptFunc: PromptFunc,\n) {\n  for (const file of files) {\n    const path = file.path.split(sep).join(posix.sep);\n    const fileHandler = fileHandlers.find(handler =>\n      handler.patterns.some(pattern =>\n        typeof pattern === 'string' ? pattern === path : pattern.test(path),\n      ),\n    );\n    if (fileHandler) {\n      await fileHandler.handler(file, promptFunc);\n    } else {\n      throw new Error(`No template file handler found for ${path}`);\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport chalk from 'chalk';\nimport inquirer from 'inquirer';\nimport { PromptFunc } from './types';\n\nexport const inquirerPromptFunc: PromptFunc = async msg => {\n  const { result } = await inquirer.prompt({\n    type: 'confirm',\n    name: 'result',\n    message: chalk.blue(msg),\n  });\n  return result;\n};\n\nexport const makeCheckPromptFunc = () => {\n  let failed = false;\n\n  const promptFunc: PromptFunc = async msg => {\n    failed = true;\n    console.log(chalk.red(`[Check Failed] ${msg}`));\n    return false;\n  };\n\n  const finalize = () => {\n    if (failed) {\n      throw new Error(\n        'Check failed, the plugin is not in sync with the latest template',\n      );\n    }\n  };\n\n  return [promptFunc, finalize] as const;\n};\n\nexport const yesPromptFunc: PromptFunc = async msg => {\n  console.log(`Accepting: \"${msg}\"`);\n  return true;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs-extra';\nimport {\n  dirname,\n  resolve as resolvePath,\n  relative as relativePath,\n} from 'path';\nimport handlebars from 'handlebars';\nimport recursiveReadDir from 'recursive-readdir';\nimport { paths } from '../paths';\nimport { FileDiff } from './types';\nimport { createPackageVersionProvider } from '../../lib/version';\n\nexport type TemplatedFile = {\n  path: string;\n  contents: string;\n};\n\nasync function readTemplateFile(\n  templateFile: string,\n  templateVars: any,\n): Promise<string> {\n  const contents = await fs.readFile(templateFile, 'utf8');\n\n  if (!templateFile.endsWith('.hbs')) {\n    return contents;\n  }\n  const packageVersionProvider = createPackageVersionProvider(undefined);\n\n  return handlebars.compile(contents)(templateVars, {\n    helpers: {\n      versionQuery(name: string, hint: string | unknown) {\n        return packageVersionProvider(\n          name,\n          typeof hint === 'string' ? hint : undefined,\n        );\n      },\n    },\n  });\n}\n\nasync function readTemplate(\n  templateDir: string,\n  templateVars: any,\n): Promise<TemplatedFile[]> {\n  const templateFilePaths = await recursiveReadDir(templateDir).catch(error => {\n    throw new Error(`Failed to read template directory: ${error.message}`);\n  });\n\n  const templatedFiles = new Array<TemplatedFile>();\n  for (const templateFile of templateFilePaths) {\n    const path = relativePath(templateDir, templateFile).replace(/\\.hbs$/, '');\n    const contents = await readTemplateFile(templateFile, templateVars);\n\n    templatedFiles.push({ path, contents });\n  }\n\n  return templatedFiles;\n}\n\nasync function diffTemplatedFiles(\n  targetDir: string,\n  templatedFiles: TemplatedFile[],\n): Promise<FileDiff[]> {\n  const fileDiffs = new Array<FileDiff>();\n  for (const { path, contents: templateContents } of templatedFiles) {\n    const targetPath = resolvePath(targetDir, path);\n    const targetExists = await fs.pathExists(targetPath);\n\n    const write = async (contents: string) => {\n      await fs.ensureDir(dirname(targetPath));\n      await fs.writeFile(targetPath, contents, 'utf8');\n    };\n\n    if (targetExists) {\n      const targetContents = await fs.readFile(targetPath, 'utf8');\n      fileDiffs.push({\n        path,\n        write,\n        missing: false,\n        targetContents,\n        templateContents,\n      });\n    } else {\n      fileDiffs.push({\n        path,\n        write,\n        missing: true,\n        targetContents: '',\n        templateContents,\n      });\n    }\n  }\n\n  return fileDiffs;\n}\n\n// Read all template files for a given template, along with all matching files in the target dir\nexport async function diffTemplateFiles(template: string, templateData: any) {\n  const templateDir = paths.resolveOwn('templates', template);\n\n  const templatedFiles = await readTemplate(templateDir, templateData);\n  const fileDiffs = await diffTemplatedFiles(paths.targetDir, templatedFiles);\n  return fileDiffs;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs-extra';\nimport { OptionValues } from 'commander';\nimport {\n  diffTemplateFiles,\n  handlers,\n  handleAllFiles,\n  inquirerPromptFunc,\n  makeCheckPromptFunc,\n  yesPromptFunc,\n} from '../../lib/diff';\nimport { paths } from '../../lib/paths';\n\nexport type PluginData = {\n  id: string;\n  name: string;\n  privatePackage: string;\n  pluginVersion: string;\n  npmRegistry: string;\n};\n\nconst fileHandlers = [\n  {\n    patterns: ['package.json'],\n    handler: handlers.packageJson,\n  },\n  {\n    // make sure files in 1st level of src/ and dev/ exist\n    patterns: ['.eslintrc.js'],\n    handler: handlers.exists,\n  },\n  {\n    patterns: ['README.md', 'tsconfig.json', /^src\\//, /^dev\\//],\n    handler: handlers.skip,\n  },\n];\n\nexport default async (opts: OptionValues) => {\n  let promptFunc = inquirerPromptFunc;\n  let finalize = () => {};\n\n  if (opts.check) {\n    [promptFunc, finalize] = makeCheckPromptFunc();\n  } else if (opts.yes) {\n    promptFunc = yesPromptFunc;\n  }\n\n  const data = await readPluginData();\n  const templateFiles = await diffTemplateFiles('default-plugin', data);\n  await handleAllFiles(fileHandlers, templateFiles, promptFunc);\n  finalize();\n};\n\n// Reads templating data from the existing plugin\nasync function readPluginData(): Promise<PluginData> {\n  let name: string;\n  let privatePackage: string;\n  let pluginVersion: string;\n  let npmRegistry: string;\n  try {\n    const pkg = require(paths.resolveTarget('package.json'));\n    name = pkg.name;\n    privatePackage = pkg.private;\n    pluginVersion = pkg.version;\n    const scope = name.split('/')[0];\n    if (`${scope}:registry` in pkg.publishConfig) {\n      const registryURL = pkg.publishConfig[`${scope}:registry`];\n      npmRegistry = `\"${scope}:registry\" : \"${registryURL}\"`;\n    } else npmRegistry = '';\n  } catch (error) {\n    throw new Error(`Failed to read target package, ${error}`);\n  }\n\n  const pluginTsContents = await fs.readFile(\n    paths.resolveTarget('src/plugin.ts'),\n    'utf8',\n  );\n  // TODO: replace with some proper parsing logic or plugin metadata file\n  const pluginIdMatch = pluginTsContents.match(/id: ['\"`](.+?)['\"`]/);\n  if (!pluginIdMatch) {\n    throw new Error(`Failed to parse plugin.ts, no plugin ID found`);\n  }\n\n  const id = pluginIdMatch[1];\n\n  return { id, name, privatePackage, pluginVersion, npmRegistry };\n}\n"],"names":["chalk","diffLines","path","sep","posix","inquirer","fs","createPackageVersionProvider","handlebars","recursiveReadDir","relativePath","resolvePath","dirname","paths"],"mappings":"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"}