{"version":3,"file":"info-7726f87a.cjs.js","sources":["../../src/commands/info.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { version as cliVersion } from '../../package.json';\nimport os from 'os';\nimport { runPlain } from '../lib/run';\nimport { paths } from '../lib/paths';\nimport { Lockfile } from '../lib/versioning';\n\nexport default async () => {\n  await new Promise(async () => {\n    const yarnVersion = await runPlain('yarn --version');\n    // eslint-disable-next-line no-restricted-syntax\n    const isLocal = require('fs').existsSync(paths.resolveOwn('./src'));\n\n    console.log(`OS:   ${os.type} ${os.release} - ${os.platform}/${os.arch}`);\n    console.log(`node: ${process.version}`);\n    console.log(`yarn: ${yarnVersion}`);\n    console.log(`cli:  ${cliVersion} (${isLocal ? 'local' : 'installed'})`);\n    console.log();\n    console.log('Dependencies:');\n    const lockfilePath = paths.resolveTargetRoot('yarn.lock');\n    const lockfile = await Lockfile.load(lockfilePath);\n\n    const deps = [...lockfile.keys()].filter(n => n.startsWith('@backstage/'));\n    const maxLength = Math.max(...deps.map(d => d.length));\n\n    for (const dep of deps) {\n      const versions = new Set(lockfile.get(dep)!.map(i => i.version));\n      console.log(`  ${dep.padEnd(maxLength)} ${[...versions].join(', ')}`);\n    }\n  });\n};\n"],"names":["runPlain","paths","os","cliVersion","Lockfile"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAKA,WAAe,YAAY;AAC3B,EAAE,MAAM,IAAI,OAAO,CAAC,YAAY;AAChC,IAAI,MAAM,WAAW,GAAG,MAAMA,YAAQ,CAAC,gBAAgB,CAAC,CAAC;AACzD,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,UAAU,CAACC,WAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;AACxE,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAEC,sBAAE,CAAC,IAAI,CAAC,CAAC,EAAEA,sBAAE,CAAC,OAAO,CAAC,GAAG,EAAEA,sBAAE,CAAC,QAAQ,CAAC,CAAC,EAAEA,sBAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9E,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAC5C,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;AACxC,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAEC,eAAU,CAAC,EAAE,EAAE,OAAO,GAAG,OAAO,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5E,IAAI,OAAO,CAAC,GAAG,EAAE,CAAC;AAClB,IAAI,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AACjC,IAAI,MAAM,YAAY,GAAGF,WAAK,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;AAC9D,IAAI,MAAM,QAAQ,GAAG,MAAMG,iBAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACvD,IAAI,MAAM,IAAI,GAAG,CAAC,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;AACjF,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;AAC7D,IAAI,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;AACxE,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5E,KAAK;AACL,GAAG,CAAC,CAAC;AACL,CAAC;;;;"}