{"version":3,"sources":["webpack://techdocs-cli-embedded-app/../catalog-client/src/types/api.ts","webpack://techdocs-cli-embedded-app/../catalog-client/src/CatalogClient.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/entity/constants.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/entity/policies/DefaultNamespaceEntityPolicy.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/CommonValidatorFunctions.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/ajv.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/entityEnvelopeSchemaValidator.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/entityKindSchemaValidator.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/entitySchemaValidator.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/KubernetesValidatorFunctions.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/validation/makeValidator.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/entity/policies/FieldFormatEntityPolicy.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/entity/policies/SchemaValidEntityPolicy.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/entity/ref.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/EntityPolicies.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/util.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/ApiEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/ComponentEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/DomainEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/GroupEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/LocationEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/relations.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/ResourceEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/SystemEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/kinds/UserEntityV1alpha1.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/location/annotation.ts","webpack://techdocs-cli-embedded-app/../catalog-model/src/location/helpers.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/AlertApi/AlertApiForwarder.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/AnalyticsApi/NoOpAnalyticsApi.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/AppThemeApi/AppThemeSelector.ts","webpack://techdocs-cli-embedded-app/../config/src/reader.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/DiscoveryApi/UrlPatternDiscovery.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/ErrorApi/ErrorAlerter.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/ErrorApi/ErrorApiForwarder.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/ErrorApi/UnhandledErrorForwarder.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/FeatureFlagsApi/LocalStorageFeatureFlags.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/FetchApi/createFetchApi.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/FetchApi/IdentityAuthInjectorFetchMiddleware.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/FetchApi/PluginProtocolResolverFetchMiddleware.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/FetchApi/FetchMiddlewares.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/OAuthRequestApi/OAuthPendingRequests.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/OAuthRequestApi/OAuthRequestManager.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/StorageApi/WebStorage.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/atlassian/AtlassianAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/bitbucket/BitbucketAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/github/GithubAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/gitlab/GitlabAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/google/GoogleAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/microsoft/MicrosoftAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/loginPopup.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/AuthConnector/DefaultAuthConnector.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/oauth2/OAuth2.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/okta/OktaAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/onelogin/OneLoginAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/saml/types.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/auth/saml/SamlAuth.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/system/ApiFactoryRegistry.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/system/ApiAggregator.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/system/ApiProvider.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/system/ApiResolver.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/extensions/traversal.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/plugins/collectors.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/collectors.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/types.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/RouteResolver.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/RoutingProvider.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/RouteTracker.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/validation.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/app/AppContext.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/implementations/IdentityApi/AppIdentityProxy.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/app/AppThemeProvider.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/apis/system/ApiRegistry.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/app/resolveRouteBindings.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/app/AppManager.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/app/createSpecializedApp.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/app/defaultConfigLoader.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/AuthSessionManager/common.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/AuthSessionManager/SessionStateTracker.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/AuthSessionManager/RefreshingAuthSessionManager.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/AuthSessionManager/StaticAuthSessionManager.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/lib/subjects.ts","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/FeatureFlagged.tsx","webpack://techdocs-cli-embedded-app/../core-app-api/src/routing/FlatRoutes.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/AlertDisplay/AlertDisplay.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Avatar/Avatar.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Link/Link.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Button/Button.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/CopyTextButton/CopyTextButton.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/CodeSnippet/CodeSnippet.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/CreateButton/CreateButton.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/types.ts","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/DefaultNode.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/constants.ts","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/Node.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/DefaultLabel.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/Edge.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/DependencyGraph/DependencyGraph.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/DismissableBanner/DismissableBanner.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/EmptyState/EmptyStateImage.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/EmptyState/EmptyState.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/EmptyState/MissingAnnotationEmptyState.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/WarningPanel/WarningPanel.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/ErrorPanel/ErrorPanel.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/ResponseErrorPanel/ResponseErrorPanel.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/FeatureDiscovery/lib/usePortal.ts","webpack://techdocs-cli-embedded-app/../core-components/src/components/FeatureDiscovery/lib/useShowCallout.ts","webpack://techdocs-cli-embedded-app/../core-components/src/components/FeatureDiscovery/FeatureCalloutCircular.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/HeaderIconLinkRow/IconLinkVertical.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/HeaderIconLinkRow/HeaderIconLinkRow.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/HorizontalScrollGrid/HorizontalScrollGrid.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Lifecycle/Lifecycle.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/LogViewer/LogViewer.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/MarkdownContent/MarkdownContent.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/OAuthRequestDialog/LoginRequestListItem.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/OAuthRequestDialog/OAuthRequestDialog.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/OverflowTooltip/OverflowTooltip.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Progress/Progress.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/BottomLink/BottomLink.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ErrorBoundary/ErrorBoundary.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/InfoCard/InfoCard.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/ProgressBars/Gauge.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/ProgressBars/GaugeCard.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/ProgressBars/LinearGauge.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Select/static/ClosedDropdown.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Select/static/OpenedDropdown.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Select/Select.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/SimpleStepper/SimpleStepper.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/SimpleStepper/SimpleStepperFooter.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/SimpleStepper/SimpleStepperStep.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Status/Status.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/StructuredMetadataTable/MetadataTable.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/StructuredMetadataTable/StructuredMetadataTable.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/hooks/useQueryParamState.ts","webpack://techdocs-cli-embedded-app/../core-components/src/hooks/useSupportConfig.ts","webpack://techdocs-cli-embedded-app/../core-components/src/icons/icons.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/SupportButton/SupportButton.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/config.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/localStorage.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/SidebarPinStateContext.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/Page.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/SidebarOpenStateContext.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/SidebarGroup.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/MobileSidebar.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/Bar.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/utils.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/SidebarSubmenuItem.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/SidebarSubmenu.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/icons/DoubleArrowLeft.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/icons/DoubleArrowRight.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/Items.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Sidebar/Intro.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Content/Content.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/HeaderTabs/HeaderTabs.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/TabbedLayout/RoutedTabs.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/TabbedLayout/TabbedLayout.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Table/SubvalueCell.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Table/Filters.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Table/Table.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Tabs/TabPanel.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Tabs/TabIcon.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Tabs/Tab.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Tabs/TabBar.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/Tabs/Tabs.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/components/TrendLine/TrendLine.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ContentHeader/ContentHeader.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ErrorPage/MicDrop.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ErrorPage/ErrorPage.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Breadcrumbs/Breadcrumbs.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Header/Header.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/HeaderLabel/HeaderLabel.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/HomepageTimer/HomepageTimer.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ItemCard/ItemCardHeader.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ItemCard/ItemCard.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ItemCard/ItemCardGrid.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Page/Page.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/Page/PageWithHeader.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ProxiedSignInPage/types.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ProxiedSignInPage/ProxiedSignInIdentity.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/ProxiedSignInPage/ProxiedSignInPage.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/styles.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/GuestUserIdentity.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/LegacyUserIdentity.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/UserIdentity.ts","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/commonProvider.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/guestProvider.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/customProvider.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/providers.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/SignInPage/SignInPage.tsx","webpack://techdocs-cli-embedded-app/../core-components/src/layout/TabbedCard/TabbedCard.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/analytics/AnalyticsContext.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/analytics/Tracker.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/analytics/useAnalytics.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/auth.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/AlertApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/AnalyticsApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/AppThemeApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/ConfigApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/DiscoveryApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/ErrorApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/FeatureFlagsApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/FetchApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/IdentityApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/OAuthRequestApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/definitions/StorageApi.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/system/ApiRef.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/system/helpers.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/apis/system/useApi.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/app/useApp.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/extensions/componentData.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/extensions/PluginErrorBoundary.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/extensions/extensions.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/extensions/useElementFilter.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/plugin/Plugin.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/routing/types.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/routing/RouteRef.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/routing/SubRouteRef.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/routing/ExternalRouteRef.ts","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/routing/useRouteRef.tsx","webpack://techdocs-cli-embedded-app/../core-plugin-api/src/routing/useRouteRefParams.ts","webpack://techdocs-cli-embedded-app/../errors/src/errors/assertion.ts","webpack://techdocs-cli-embedded-app/../errors/src/serialization/error.ts","webpack://techdocs-cli-embedded-app/../errors/src/errors/CustomErrorBase.ts","webpack://techdocs-cli-embedded-app/../errors/src/errors/common.ts","webpack://techdocs-cli-embedded-app/../errors/src/serialization/response.ts","webpack://techdocs-cli-embedded-app/../errors/src/errors/ResponseError.ts","webpack://techdocs-cli-embedded-app/../integration-react/src/api/ScmAuthApi.ts","webpack://techdocs-cli-embedded-app/../integration-react/src/api/ScmAuth.ts","webpack://techdocs-cli-embedded-app/../integration-react/src/api/ScmIntegrationsApi.ts","webpack://techdocs-cli-embedded-app/../integration-react/src/components/ScmIntegrationIcon/ScmIntegrationIcon.tsx","webpack://techdocs-cli-embedded-app/../integration/src/helpers.ts","webpack://techdocs-cli-embedded-app/../integration/src/awsS3/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/awsS3/AwsS3Integration.ts","webpack://techdocs-cli-embedded-app/../integration/src/azure/AzureUrl.ts","webpack://techdocs-cli-embedded-app/../integration/src/azure/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/azure/AzureIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/azure/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucket/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucket/BitbucketIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucket/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucketCloud/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucketCloud/BitbucketCloudIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucketCloud/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucketServer/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucketServer/BitbucketServerIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/bitbucketServer/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/gerrit/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/gerrit/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/gerrit/GerritIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/github/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/github/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/github/SingleInstanceGithubCredentialsProvider.ts","webpack://techdocs-cli-embedded-app/../integration/src/github/DefaultGithubCredentialsProvider.ts","webpack://techdocs-cli-embedded-app/../integration/src/github/GitHubIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/gitlab/config.ts","webpack://techdocs-cli-embedded-app/../integration/src/gitlab/core.ts","webpack://techdocs-cli-embedded-app/../integration/src/gitlab/GitLabIntegration.ts","webpack://techdocs-cli-embedded-app/../integration/src/ScmIntegrations.ts","webpack://techdocs-cli-embedded-app/../app-defaults/src/defaults/apis.ts","webpack://techdocs-cli-embedded-app/../app-defaults/src/defaults/components.tsx","webpack://techdocs-cli-embedded-app/../app-defaults/src/defaults/icons.tsx","webpack://techdocs-cli-embedded-app/../theme/src/pageTheme.ts","webpack://techdocs-cli-embedded-app/../theme/src/baseTheme.ts","webpack://techdocs-cli-embedded-app/../theme/src/themes.ts","webpack://techdocs-cli-embedded-app/../app-defaults/src/defaults/themes.tsx","webpack://techdocs-cli-embedded-app/../app-defaults/src/createApp.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/apis/StarredEntitiesApi/migration.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/apis/StarredEntitiesApi/DefaultStarredEntitiesApi.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogSearchResultListItem/CatalogSearchResultListItem.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-common/src/permissions.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityContextMenu/EntityContextMenu.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityLayout/EntityLayout.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityOrphanWarning/DeleteEntityDialog.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityOrphanWarning/EntityOrphanWarning.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityProcessingErrorsPanel/EntityProcessingErrorsPanel.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntitySwitch/EntitySwitch.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/FilteredEntityLayout/index.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/plugin.ts","webpack://techdocs-cli-embedded-app/./src/apis.ts","webpack://techdocs-cli-embedded-app/./src/config.ts","webpack://techdocs-cli-embedded-app/./src/components/Root/LogoFull.tsx","webpack://techdocs-cli-embedded-app/./src/components/Root/LogoIcon.tsx","webpack://techdocs-cli-embedded-app/./src/components/Root/Root.tsx","webpack://techdocs-cli-embedded-app/./src/components/TechDocsPage/TechDocsPage.tsx","webpack://techdocs-cli-embedded-app/./src/App.tsx","webpack://techdocs-cli-embedded-app/./src/index.tsx","webpack://techdocs-cli-embedded-app/../version-bridge/src/lib/globalObject.ts","webpack://techdocs-cli-embedded-app/../version-bridge/src/lib/VersionedContext.ts","webpack://techdocs-cli-embedded-app/../version-bridge/src/lib/VersionedValue.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/api.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/apis/StarredEntitiesApi/StarredEntitiesApi.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/apis/StarredEntitiesApi/MockStarredEntitiesApi.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/CatalogFilterLayout/CatalogFilterLayout.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntity.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/filters.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/getEntityRelations.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/getEntitySourceLocation.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/isOwnerOf.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityListProvider.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/routes.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityRefLink/humanize.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityRefLink/EntityRefLink.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityRefLink/EntityRefLinks.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/filters.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityTypeFilter.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useRelatedEntities.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useStarredEntities.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useStarredEntity.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityOwnership.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityPermission.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityKindPicker/EntityKindPicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityLifecyclePicker/EntityLifecyclePicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityOwnerPicker/EntityOwnerPicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntitySearchBar/EntitySearchBar.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTable/columns.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTable/presets.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTable/EntityTable.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTagPicker/EntityTagPicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTypePicker/EntityTypePicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/FavoriteEntity/FavoriteEntity.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/EntityKindIcon.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/AncestryPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/common.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/ColocatedPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/util.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/JsonPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/OverviewPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/YamlPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/InspectEntityDialog.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/UnregisterEntityDialog/useUnregisterEntityDialogState.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/UnregisterEntityDialog/UnregisterEntityDialog.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/UserListPicker/UserListPicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/testUtils/providers.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/AboutCard/AboutField.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/AboutCard/AboutContent.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/AboutCard/AboutCard.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogKindHeader/CatalogKindHeader.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogTable/columns.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogTable/CatalogTable.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/routes.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/types/api.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/permissions/util.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/permissions/createPermission.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/PermissionClient.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/apis/PermissionApi.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/apis/IdentityPermissionApi.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/hooks/usePermission.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/components/PermissionedRoute.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search-react/src/api.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search-react/src/components/HighlightedSearchResultText/HighlightedSearchResultText.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search-react/src/context/SearchContext.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/addons.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/api.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/context.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/types.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/component.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/hooks.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/EntityPageDocs.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/Router.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/api.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/client.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/helpers.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/DefaultTechDocsHome.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Grids/DocsCardGrid.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Grids/EntityListDocsGrid.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/DocsTable.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/EntityListDocsTable.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/actions.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/columns.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/TechDocsIndexPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/TechDocsPageWrapper.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/TechDocsPicker.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/plugin.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPage/TechDocsReaderPage.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsBuildLogs.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsNotFound.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsStateIndicator.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/html/hooks/links.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/html/hooks/iframes.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/html/transformer.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/variables.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/reset.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/layout.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/typeset.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/animations.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/extensions.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/rules.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/transformer.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addBaseUrl.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addGitFeedbackLink.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addSidebarToggle.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/rewriteDocLinks.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addLinkClickListener.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/copyToClipboard.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/removeMkdocsHeader.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/simplifyMkdocsFooter.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/onCssReady.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/scrollIntoAnchor.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/transformer.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageContent/dom.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageContent/TechDocsReaderPageContentAddons.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageContent/TechDocsReaderPageContent.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageHeader/TechDocsReaderPageHeader.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageSubheader/TechDocsReaderPageSubheader.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/useReaderState.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderProvider.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/routes.ts","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/search/components/TechDocsSearchResultListItem.tsx","webpack://techdocs-cli-embedded-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/search/components/TechDocsSearch.tsx"],"names":[],"mappings":"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","file":"static/main.bcb597fa.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This symbol can be used in place of a value when passed to filters in e.g.\n * {@link CatalogClient.getEntities}, to signify that you want to filter on the\n * presence of that key no matter what its value is.\n *\n * @public\n */\nexport const CATALOG_FILTER_EXISTS = Symbol.for(\n  // Random UUID to ensure no collisions\n  'CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111',\n);\n\n/**\n * The request type for {@link CatalogClient.getEntities}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  parseEntityRef,\n  stringifyEntityRef,\n  stringifyLocationRef,\n} from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\nimport {\n  CATALOG_FILTER_EXISTS,\n\n\n\n\n\n\n\n\n\n\n\n} from './types/api';\n\n\n\n/**\n * A frontend and backend compatible client for communicating with the Backstage\n * software catalog.\n *\n * @public\n */\nexport class CatalogClient  {\n    discoveryApi;\n    fetchApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntityAncestors}\n   */\n  async getEntityAncestors(\n    request,\n    options,\n  ) {\n    const { kind, namespace, name } = parseEntityRef(request.entityRef);\n    return await this.requestRequired(\n      'GET',\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace,\n      )}/${encodeURIComponent(name)}/ancestry`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getLocationById}\n   */\n  async getLocationById(\n    id,\n    options,\n  ) {\n    return await this.requestOptional(\n      'GET',\n      `/locations/${encodeURIComponent(id)}`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntities}\n   */\n  async getEntities(\n    request,\n    options,\n  ) {\n    const { filter = [], fields = [], offset, limit, after } = request ?? {};\n    const params = [];\n\n    // filter param can occur multiple times, for example\n    // /api/catalog/entities?filter=metadata.name=wayback-search,kind=component&filter=metadata.name=www-artist,kind=component'\n    // the \"outer array\" defined by `filter` occurrences corresponds to \"anyOf\" filters\n    // the \"inner array\" defined within a `filter` param corresponds to \"allOf\" filters\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === 'string') {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`,\n            );\n          }\n        }\n      }\n\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(',')}`);\n      }\n    }\n\n    if (fields.length) {\n      params.push(`fields=${fields.map(encodeURIComponent).join(',')}`);\n    }\n\n    if (offset !== undefined) {\n      params.push(`offset=${offset}`);\n    }\n    if (limit !== undefined) {\n      params.push(`limit=${limit}`);\n    }\n    if (after !== undefined) {\n      params.push(`after=${encodeURIComponent(after)}`);\n    }\n\n    const query = params.length ? `?${params.join('&')}` : '';\n    const entities = await this.requestRequired(\n      'GET',\n      `/entities${query}`,\n      options,\n    );\n\n    const refCompare = (a, b) => {\n      // in case field filtering is used, these fields might not be part of the response\n      if (\n        a.metadata?.name === undefined ||\n        a.kind === undefined ||\n        b.metadata?.name === undefined ||\n        b.kind === undefined\n      ) {\n        return 0;\n      }\n\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n\n    return { items: entities.sort(refCompare) };\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntityByRef}\n   */\n  async getEntityByRef(\n    entityRef,\n    options,\n  ) {\n    const { kind, namespace, name } = parseEntityRef(entityRef);\n    return this.requestOptional(\n      'GET',\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace,\n      )}/${encodeURIComponent(name)}`,\n      options,\n    );\n  }\n\n  // NOTE(freben): When we deprecate getEntityByName from the interface, we may\n  // still want to leave this implementation in place for quite some time\n  // longer, to minimize the risk for breakages. Suggested date for removal:\n  // August 2022\n  /**\n   * @deprecated Use getEntityByRef instead\n   */\n  async getEntityByName(\n    compoundName,\n    options,\n  ) {\n    const { kind, namespace = 'default', name } = compoundName;\n    return this.requestOptional(\n      'GET',\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace,\n      )}/${encodeURIComponent(name)}`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.refreshEntity}\n   */\n  async refreshEntity(entityRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl('catalog')}/refresh`,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(options?.token && { Authorization: `Bearer ${options?.token}` }),\n        },\n        method: 'POST',\n        body: JSON.stringify({ entityRef }),\n      },\n    );\n\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntityFacets}\n   */\n  async getEntityFacets(\n    request,\n    options,\n  ) {\n    const { filter = [], facets } = request;\n    const params = [];\n\n    // filter param can occur multiple times, for example\n    // /api/catalog/entities?filter=metadata.name=wayback-search,kind=component&filter=metadata.name=www-artist,kind=component'\n    // the \"outer array\" defined by `filter` occurrences corresponds to \"anyOf\" filters\n    // the \"inner array\" defined within a `filter` param corresponds to \"allOf\" filters\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === 'string') {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`,\n            );\n          }\n        }\n      }\n\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(',')}`);\n      }\n    }\n\n    for (const facet of facets) {\n      params.push(`facet=${encodeURIComponent(facet)}`);\n    }\n\n    const query = params.length ? `?${params.join('&')}` : '';\n    return await this.requestOptional('GET', `/entity-facets${query}`, options);\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.addLocation}\n   */\n  async addLocation(\n    { type = 'url', target, dryRun },\n    options,\n  ) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl('catalog')}/locations${\n        dryRun ? '?dryRun=true' : ''\n      }`,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(options?.token && { Authorization: `Bearer ${options?.token}` }),\n        },\n        method: 'POST',\n        body: JSON.stringify({ type, target }),\n      },\n    );\n\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n\n    const { location, entities, exists } = await response.json();\n\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n\n    return {\n      location,\n      entities,\n      exists,\n    };\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getLocationByRef}\n   */\n  async getLocationByRef(\n    locationRef,\n    options,\n  ) {\n    const all = await this.requestRequired(\n      'GET',\n      '/locations',\n      options,\n    );\n    return all\n      .map(r => r.data)\n      .find(l => locationRef === stringifyLocationRef(l));\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.removeLocationById}\n   */\n  async removeLocationById(\n    id,\n    options,\n  ) {\n    await this.requestIgnored(\n      'DELETE',\n      `/locations/${encodeURIComponent(id)}`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.removeEntityByUid}\n   */\n  async removeEntityByUid(\n    uid,\n    options,\n  ) {\n    await this.requestIgnored(\n      'DELETE',\n      `/entities/by-uid/${encodeURIComponent(uid)}`,\n      options,\n    );\n  }\n\n  //\n  // Private methods\n  //\n\n   async requestIgnored(\n    method,\n    path,\n    options,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('catalog')}${path}`;\n    const headers = options?.token\n      ? { Authorization: `Bearer ${options.token}` }\n      : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n\n   async requestRequired(\n    method,\n    path,\n    options,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('catalog')}${path}`;\n    const headers = options?.token\n      ? { Authorization: `Bearer ${options.token}` }\n      : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n\n   async requestOptional(\n    method,\n    path,\n    options,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('catalog')}${path}`;\n    const headers = options?.token\n      ? { Authorization: `Bearer ${options.token}` }\n      : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        return undefined;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The namespace that entities without an explicit namespace fall into.\n *\n * @public\n */\nexport const DEFAULT_NAMESPACE = 'default';\n\n/**\n * Annotation for linking to entity page from catalog pages.\n *\n * @public\n */\nexport const ANNOTATION_VIEW_URL = 'backstage.io/view-url';\n\n/**\n * Annotation for linking to entity edit page from catalog pages.\n *\n * @public\n */\nexport const ANNOTATION_EDIT_URL = 'backstage.io/edit-url';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport lodash from 'lodash';\n\nimport { DEFAULT_NAMESPACE } from '../constants';\n\n\n/**\n * Sets a default namespace if none was set.\n *\n * @public\n */\nexport class DefaultNamespaceEntityPolicy  {\n    namespace;\n\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    this.namespace = namespace;\n  }\n\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport lodash from 'lodash';\n\n/**\n * Contains various helper validation and normalization functions that can be\n * composed to form a Validator.\n *\n * @public\n */\nexport class CommonValidatorFunctions {\n  /**\n   * Checks that the value is on the form <suffix> or <prefix><separator><suffix>, and validates\n   * those parts separately.\n   *\n   * @param value - The value to check\n   * @param separator - The separator between parts\n   * @param isValidPrefix - Checks that the part before the separator is valid, if present\n   * @param isValidSuffix - Checks that the part after the separator (or the entire value if there is no separator) is valid\n   */\n  static isValidPrefixAndOrSuffix(\n    value,\n    separator,\n    isValidPrefix,\n    isValidSuffix,\n  ) {\n    if (typeof value !== 'string') {\n      return false;\n    }\n\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n\n    return false;\n  }\n\n  /**\n   * Checks that the value can be safely transferred as JSON.\n   *\n   * @param value - The value to check\n   */\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Checks that the value is a valid DNS subdomain name.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsSubdomain(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 253 &&\n      value.split('.').every(CommonValidatorFunctions.isValidDnsLabel)\n    );\n  }\n\n  /**\n   * Checks that the value is a valid DNS label.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsLabel(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-z0-9]+(\\-[a-z0-9]+)*$/.test(value)\n    );\n  }\n\n  /**\n   * Checks that the value is a valid tag.\n   *\n   * @deprecated This will be removed in a future release\n   * @param value - The value to check\n   */\n  static isValidTag(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value)\n    );\n  }\n\n  /**\n   * Checks that the value is a valid string URL.\n   *\n   * @param value - The value to check\n   */\n  static isValidUrl(value) {\n    if (typeof value !== 'string') {\n      return false;\n    }\n\n    try {\n      // eslint-disable-next-line no-new\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Checks that the value is a non empty string value.\n   *\n   * @deprecated use isNonEmptyString instead\n   * @param value - The value to check\n   */\n  static isValidString(value) {\n    return typeof value === 'string' && value?.trim()?.length >= 1;\n  }\n\n  /**\n   * Checks that the value is a string value that's not empty.\n   *\n   * @param value - The value to check\n   */\n  static isNonEmptyString(value) {\n    return typeof value === 'string' && value?.trim()?.length >= 1;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Ajv, { } from 'ajv';\nimport entitySchema from '../schema/Entity.schema.json';\nimport entityEnvelopeSchema from '../schema/EntityEnvelope.schema.json';\nimport entityMetaSchema from '../schema/EntityMeta.schema.json';\nimport commonSchema from '../schema/shared/common.schema.json';\n\n// A local cache of compiled schemas, to avoid duplicate work.\n// The keys are JSON stringified versions of the schema\nconst compiledSchemaCache = new Map();\n\n// The core schemas that others can depend on\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema,\n];\n\nexport function throwAjvError(\n  errors,\n) {\n  if (!errors?.length) {\n    throw new TypeError('Unknown error');\n  }\n\n  const error = errors[0];\n  throw new TypeError(\n    `${error.instancePath || '<root>'} ${error.message}${\n      error.params\n        ? ` - ${Object.entries(error.params)\n            .map(([key, val]) => `${key}: ${val}`)\n            .join(', ')}`\n        : ''\n    }`,\n  );\n}\n\n// Compiles the given schema, and makes sure to also grab any core dependencies\n// that it depends on\nexport function compileAjvSchema(\n  schema,\n  options = {},\n) {\n  const disableCache = options?.disableCache ?? false;\n  const cacheKey = disableCache ? '' : JSON.stringify(schema);\n\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true,\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, undefined, undefined, true);\n  }\n  const compiled = ajv.compile(schema);\n\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n\n  return compiled;\n}\n\n// Find refs in the given schema and recursively in all known schemas it\n// targets, collecting that list of schemas as we go\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== 'object') {\n    return [];\n  }\n\n  const seen = new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n\n  const selected = new Array();\n\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n\n        const match = refDependencyCandidates.find(c => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n\n  return selected;\n}\n\n// Naively step through the entire schema looking for \"$ref\": \"x\" pairs. The\n// resulting iterator may contain duplicates. Ignores fragments, i.e. for a ref\n// of \"a#b\", it will just yield \"a\".\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === 'object' && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === '$ref' && typeof value === 'string') {\n          yield value.split('#')[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport entityEnvelopeSchema from '../schema/EntityEnvelope.schema.json';\nimport { compileAjvSchema, throwAjvError } from './ajv';\n\n/**\n * Creates a validation function that takes some arbitrary data, and either\n * returns that data cast to an {@link EntityEnvelope} (or the given subtype)\n * if it matches that schema, or throws a {@link globals#TypeError} describing the\n * errors.\n *\n * @remarks\n *\n * Note that this validator is only meant for applying the base schema checks;\n * it does not take custom policies or additional processor based validation\n * into account.\n *\n * By default, the plain `EntityEnvelope` schema is used. If you pass in your\n * own, it may contain `$ref` references to the following, which are resolved\n * automatically for you:\n *\n * - {@link EntityEnvelope}\n * - {@link Entity}\n * - {@link EntityMeta}\n * - `common#<id>`\n *\n * See also {@link https://github.com/backstage/backstage/tree/master/packages/catalog-model/src/schema}\n *\n * @public\n *\n */\nexport function entityEnvelopeSchemaValidator\n\n(schema) {\n  const validate = compileAjvSchema(\n    schema ? (schema ) : entityEnvelopeSchema,\n  );\n\n  return data => {\n    const result = validate(data);\n    if (result === true) {\n      return data ;\n    }\n\n    throw throwAjvError(validate.errors);\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { compileAjvSchema, throwAjvError } from './ajv';\n\n/**\n * Creates a validation function that takes some arbitrary data, and either\n * returns that data cast to a `T` if it matches that schema, or `false` if the\n * schema apiVersion/kind didn't apply to that data, or throws a\n * {@link globals#TypeError} describing actual errors.\n *\n * @remarks\n *\n * This validator is highly specialized, in that it has special treatment of\n * the `kind` and `apiVersion` root keys. This only works if your schema has\n * their rule set to `\"enum\"`:\n *\n * ```\n * \"apiVersion\": {\n *    \"enum\": [\"backstage.io/v1alpha1\", \"backstage.io/v1beta1\"]\n * },\n * \"kind\": {\n *   \"enum\": [\"Group\"]\n * },\n * ```\n *\n * In the above example, the created validator will return `false` if and only\n * if the kind and/or apiVersion mismatch.\n *\n * Note that this validator is only meant for applying the base schema checks;\n * it does not take custom policies or additional processor based validation\n * into account.\n *\n * The given schema may contain `$ref` references to the following, which are\n * resolved automatically for you:\n *\n * - {@link Entity}\n *\n * - {@link EntityEnvelope}\n *\n * - {@link EntityMeta}\n *\n * - `common#<id>`\n * @see {@link https://github.com/backstage/backstage/tree/master/packages/catalog-model/src/schema}\n *\n * @public\n */\nexport function entityKindSchemaValidator(\n  schema,\n) {\n  const validate = compileAjvSchema(schema );\n\n  return data => {\n    const result = validate(data);\n    if (result === true) {\n      return data ;\n    }\n\n    // Only in the case where kind and/or apiVersion have enum mismatches AND\n    // have NO other errors, we call it a soft error.\n    const softCandidates = validate.errors?.filter(e =>\n      ['/kind', '/apiVersion'].includes(e.instancePath),\n    );\n    if (\n      softCandidates?.length &&\n      softCandidates.every(e => e.keyword === 'enum')\n    ) {\n      return false;\n    }\n\n    throw throwAjvError(validate.errors);\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport entitySchema from '../schema/Entity.schema.json';\nimport { compileAjvSchema, throwAjvError } from './ajv';\n\n/**\n * Creates a validation function that takes some arbitrary data, and either\n * returns that data cast to an {@link Entity} (or the given subtype) if it\n * matches that schema, or throws a {@link globals#TypeError} describing the errors.\n *\n * @remarks\n *\n * Note that this validator is only meant for applying the base schema checks;\n * it does not take custom policies or additional processor based validation\n * into account.\n *\n * By default, the plain {@link Entity} schema is used. If you pass in your own, it\n * may contain `$ref` references to the following, which are resolved\n * automatically for you:\n *\n * - {@link Entity}\n * - {@link EntityEnvelope}\n * - {@link EntityMeta}\n * - `common#<id>`\n *\n * @public\n * @see {@link https://github.com/backstage/backstage/tree/master/packages/catalog-model/src/schema}\n */\nexport function entitySchemaValidator(\n  schema,\n) {\n  const validate = compileAjvSchema(schema ? (schema ) : entitySchema);\n\n  return data => {\n    const result = validate(data);\n    if (result === true) {\n      return data ;\n    }\n\n    throw throwAjvError(validate.errors);\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonValidatorFunctions } from './CommonValidatorFunctions';\n\n/**\n * Contains validation functions that match the Kubernetes spec, usable to\n * build a catalog that is compatible with those rule sets.\n *\n * @public\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/names/\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/#syntax-and-character-set\n */\nexport class KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      n => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n),\n    );\n  }\n\n  static isValidKind(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-zA-Z][a-z0-9A-Z]*$/.test(value)\n    );\n  }\n\n  static isValidObjectName(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value)\n    );\n  }\n\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName,\n    );\n  }\n\n  static isValidLabelValue(value) {\n    return (\n      value === '' || KubernetesValidatorFunctions.isValidObjectName(value)\n    );\n  }\n\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName,\n    );\n  }\n\n  static isValidAnnotationValue(value) {\n    return typeof value === 'string';\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { KubernetesValidatorFunctions } from './KubernetesValidatorFunctions';\n\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    // NOTE(freben): This one is a bit of an oddball and doesn't fit well anywhere to delegate to, so it's just inlined for now.\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value)\n    );\n  },\n};\n\n/**\n * Creates a {@link Validators} object from `overrides`, with default values taken from {@link KubernetesValidatorFunctions}\n *\n * @public\n */\nexport function makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  CommonValidatorFunctions,\n  KubernetesValidatorFunctions,\n  makeValidator,\n\n} from '../../validation';\n\n\n/**\n * Ensures that the format of individual fields of the entity envelope\n * is valid.\n *\n * @remarks\n *\n * This does not take into account machine generated fields such as uid and etag.\n *\n * @public\n */\nexport class FieldFormatEntityPolicy  {\n    validators;\n\n  constructor(validators = makeValidator()) {\n    this.validators = validators;\n  }\n\n  async enforce(entity) {\n    function require(\n      field,\n      value,\n      validator,\n    ) {\n      if (value === undefined || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n\n      if (!isValid) {\n        let expectation;\n        switch (\n          validator.name \n\n\n        ) {\n          case 'isValidLabelValue':\n          case 'isValidObjectName':\n            expectation =\n              'a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total';\n            break;\n          case 'isValidLabelKey':\n          case 'isValidApiVersion':\n          case 'isValidAnnotationKey':\n            expectation = 'a valid prefix and/or suffix';\n            break;\n          case 'isValidNamespace':\n          case 'isValidDnsLabel':\n            expectation =\n              'a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total';\n            break;\n          case 'isValidTag':\n            expectation =\n              'a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total';\n            break;\n          case 'isValidAnnotationValue':\n            expectation = 'a string';\n            break;\n          case 'isValidKind':\n            expectation =\n              'a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total';\n            break;\n          case 'isValidUrl':\n            expectation = 'a string that is a valid url';\n            break;\n          case 'isValidString':\n          case 'isNonEmptyString':\n            expectation = 'a non empty string';\n            break;\n          default:\n            expectation = undefined;\n            break;\n        }\n\n        // ensure that if there are other/future validators, the error message defaults to a general \"is not valid, visit link\"\n        const message = expectation\n          ? ` expected ${expectation} but found \"${value}\".`\n          : '';\n\n        throw new Error(\n          `\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`,\n        );\n      }\n    }\n\n    function optional(\n      field,\n      value,\n      validator,\n    ) {\n      return value === undefined || require(field, value, validator);\n    }\n\n    require('apiVersion', entity.apiVersion, this.validators.isValidApiVersion);\n    require('kind', entity.kind, this.validators.isValidKind);\n\n    require('metadata.name', entity.metadata.name, this.validators\n      .isValidEntityName);\n    optional(\n      'metadata.namespace',\n      entity.metadata.namespace,\n      this.validators.isValidNamespace,\n    );\n\n    for (const [k, v] of Object.entries(entity.metadata.labels ?? [])) {\n      require(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n\n    for (const [k, v] of Object.entries(entity.metadata.annotations ?? [])) {\n      require(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n\n    const tags = entity.metadata.tags ?? [];\n\n    for (let i = 0; i < tags.length; ++i) {\n      require(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n\n    const links = entity.metadata.links ?? [];\n\n    for (let i = 0; i < links.length; ++i) {\n      require(`links.${i}.url`, links[i]\n        ?.url, CommonValidatorFunctions.isValidUrl);\n      optional(\n        `links.${i}.title`,\n        links[i]?.title,\n        CommonValidatorFunctions.isNonEmptyString,\n      );\n      optional(\n        `links.${i}.icon`,\n        links[i]?.icon,\n        KubernetesValidatorFunctions.isValidObjectName,\n      );\n    }\n\n    return entity;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Ajv, { } from 'ajv';\nimport entitySchema from '../../schema/Entity.schema.json';\nimport entityMetaSchema from '../../schema/EntityMeta.schema.json';\nimport commonSchema from '../../schema/shared/common.schema.json';\n\n\n\n/**\n * Ensures that the entity spec is valid according to a schema.\n *\n * @remarks\n *\n * This should be the first policy in the list, to ensure that other downstream\n * policies can work with a structure that is at least valid in therms of the\n * typescript type.\n *\n * @public\n */\nexport class SchemaValidEntityPolicy  {\n   validate;\n\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv\n        .addSchema([commonSchema, entityMetaSchema], undefined, undefined, true)\n        .compile(entitySchema);\n    }\n\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n\n    throw new Error(\n      `Malformed envelope, ${error.instancePath || '<root>'} ${error.message}`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_NAMESPACE } from './constants';\n\n\n\nfunction parseRefString(ref)\n\n\n\n {\n  let colonI = ref.indexOf(':');\n  const slashI = ref.indexOf('/');\n\n  // If the / is ahead of the :, treat the rest as the name\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n\n  const kind = colonI === -1 ? undefined : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? undefined : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n\n  if (kind === '' || namespace === '' || name === '') {\n    throw new TypeError(\n      `Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`,\n    );\n  }\n\n  return { kind, namespace, name };\n}\n\n/**\n * Extracts the kind, namespace and name that form the compound entity ref\n * triplet of the given entity.\n *\n * @public\n * @param entity - An entity\n * @returns The compound entity ref\n */\nexport function getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name,\n  };\n}\n\n/**\n * Parses an entity reference, either on string or compound form, and returns\n * a structure with a name, and optional kind and namespace.\n *\n * @remarks\n *\n * The context object can contain default values for the kind and namespace,\n * that will be used if the input reference did not specify any.\n *\n * @public\n * @param ref - The reference to parse\n * @param context - The context of defaults that the parsing happens within\n * @returns The compound form of the reference\n */\nexport function parseEntityRef(\n  ref,\n  context\n\n\n\n\n,\n) {\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n\n  const defaultKind = context?.defaultKind;\n  const defaultNamespace = context?.defaultNamespace || DEFAULT_NAMESPACE;\n\n  let kind;\n  let namespace;\n  let name;\n\n  if (typeof ref === 'string') {\n    const parsed = parseRefString(ref);\n    kind = parsed.kind ?? defaultKind;\n    namespace = parsed.namespace ?? defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = ref.kind ?? defaultKind;\n    namespace = ref.namespace ?? defaultNamespace;\n    name = ref.name;\n  }\n\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`,\n    );\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty namespace`,\n    );\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n\n  return { kind, namespace, name };\n}\n\n/**\n * Takes an entity or entity name/reference, and returns the string form of an\n * entity ref.\n *\n * @remarks\n *\n * This function creates a canonical and unique reference to the entity, converting\n * all parts of the name to lowercase and inserts the default namespace if needed.\n * It is typically not the best way to represent the entity reference to the user.\n *\n * @public\n * @param ref - The reference to serialize\n * @returns The same reference on either string or compound form\n */\nexport function stringifyEntityRef(\n  ref,\n) {\n  let kind;\n  let namespace;\n  let name;\n\n  if ('metadata' in ref) {\n    kind = ref.kind;\n    namespace = ref.metadata.namespace ?? DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = ref.namespace ?? DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n\n  return `${kind.toLocaleLowerCase('en-US')}:${namespace.toLocaleLowerCase(\n    'en-US',\n  )}/${name.toLocaleLowerCase('en-US')}`;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Helper that requires that all of a set of policies can be successfully\n// applied\nclass AllEntityPolicies  {\n  constructor(  policies) {;this.policies = policies;}\n\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(\n          `Policy ${policy.constructor.name} did not return a result`,\n        );\n      }\n      result = output;\n    }\n    return result;\n  }\n}\n\n// Helper that requires that at least one of a set of policies can be\n// successfully applied\nclass AnyEntityPolicy  {\n  constructor(  policies) {;this.policies = policies;}\n\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\n\n/**\n * Provides helpers for enforcing a set of {@link EntityPolicy} in an `and`/`or` expression.\n *\n * @public\n */\nexport const EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  },\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { entityKindSchemaValidator } from '../validation';\n\n\n// TODO(freben): Left here as a compatibility helper. It would be nicer to\n// just export the inner validator directly. However, all of the already\n// exported kind validators have the `KindValidator` signature which is\n// different. So let's postpone that change until a later time.\nexport function ajvCompiledJsonSchemaValidator(schema) {\n  const validator = entityKindSchemaValidator(schema);\n  return {\n    async check(data) {\n      return validator(data) === data;\n    },\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/API.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage API kind Entity. APIs describe the interfaces for Components to communicate.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link ApiEntityV1alpha1}.\n *\n * @public\n */\nexport const apiEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Component.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Component kind Entity. Represents a single, individual piece of software.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link ComponentEntityV1alpha1}.\n *\n * @public\n */\nexport const componentEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Domain.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage Domain kind Entity. Domains group Systems together.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link DomainEntityV1alpha1}.\n *\n * @public\n */\nexport const domainEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Group.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Group kind Entity.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link GroupEntityV1alpha1}.\n * @public\n */\nexport const groupEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Location.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Location kind Entity.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link LocationEntityV1alpha1}.\n *\n * @public\n */\nexport const locationEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\nNaming rules for relations in priority order:\n\n1. Use at most two words. One main verb and a specifier, e.g. \"ownerOf\"\n2. Reading out \"<source-kind> <type> <target-kind>\" should make sense in English.\n3. Maintain symmetry between pairs, e.g. \"ownedBy\" and \"ownerOf\" rather than \"owns\".\n*/\n\n/**\n * An ownership relation where the owner is usually an organizational\n * entity (user or group), and the other entity can be anything. Reversed\n * direction of {@link RELATION_OWNER_OF}.\n *\n * @public\n */\nexport const RELATION_OWNED_BY = 'ownedBy';\n\n/**\n * A relationship from an owner to the owned entity. Reversed direction of\n * {@link RELATION_OWNED_BY}.\n *\n * @public\n */\nexport const RELATION_OWNER_OF = 'ownerOf';\n\n/**\n * A relation with an API entity, typically from a component. Reversed direction of\n * {@link RELATION_API_CONSUMED_BY}.\n *\n * @public\n */\nexport const RELATION_CONSUMES_API = 'consumesApi';\n\n/**\n * A relation of an API being consumed, typically by a component. Reversed direction of\n * {@link RELATION_CONSUMES_API}.\n *\n * @public\n */\nexport const RELATION_API_CONSUMED_BY = 'apiConsumedBy';\n\n/**\n * A relation from an API provider entity (typically a component) to the API. Reversed direction of\n * {@link RELATION_API_PROVIDED_BY}.\n *\n * @public\n */\nexport const RELATION_PROVIDES_API = 'providesApi';\n\n/**\n * A relation from an API to its provider entity (typically a component). Reversed direction of\n * {@link RELATION_PROVIDES_API}.\n *\n * @public\n */\nexport const RELATION_API_PROVIDED_BY = 'apiProvidedBy';\n\n/**\n * A relation denoting a dependency on another entity. Reversed direction of\n * {@link RELATION_DEPENDENCY_OF}.\n *\n * @public\n */\nexport const RELATION_DEPENDS_ON = 'dependsOn';\n\n/**\n * A relation denoting a reverse dependency by another entity. Reversed direction of\n * {@link RELATION_DEPENDS_ON}.\n *\n * @public\n */\nexport const RELATION_DEPENDENCY_OF = 'dependencyOf';\n\n/**\n * A parent/child relation to build up a tree, used for example to describe\n * the organizational structure between groups. Reversed direction of\n * {@link RELATION_CHILD_OF}.\n *\n * @public\n */\nexport const RELATION_PARENT_OF = 'parentOf';\n\n/**\n * A relation from a child to a parent entity, used for example to describe\n * the organizational structure between groups. Reversed direction of\n * {@link RELATION_PARENT_OF}.\n *\n * @public\n */\nexport const RELATION_CHILD_OF = 'childOf';\n\n/**\n * A membership relation, typically for users in a group. Reversed direction of\n * {@link RELATION_HAS_MEMBER}.\n *\n * @public\n */\nexport const RELATION_MEMBER_OF = 'memberOf';\n\n/**\n * A relation from a group to its member, typcally a user in a group. Reversed direction of\n * {@link RELATION_MEMBER_OF}.\n *\n * @public\n */\nexport const RELATION_HAS_MEMBER = 'hasMember';\n\n/**\n * A part/whole relation, typically for components in a system and systems\n * in a domain. Reversed direction of {@link RELATION_HAS_PART}.\n *\n * @public\n */\nexport const RELATION_PART_OF = 'partOf';\n\n/**\n * A relation from a containing entity to a contained entity. Reversed direction of\n * {@link RELATION_PART_OF}.\n *\n * @public\n */\nexport const RELATION_HAS_PART = 'hasPart';\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Resource.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Resource kind Entity. Represents infrastructure required to operate Components.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link ResourceEntityV1alpha1}.\n *\n * @public\n */\nexport const resourceEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/System.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog System kind Entity. Systems group Comopnents, Resources and APIs together.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link SystemEntityV1alpha1}.\n *\n * @public\n */\nexport const systemEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/User.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog User kind Entity.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link UserEntityV1alpha1}.\n *\n * @public\n */\nexport const userEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Entity annotation containing the location from which the entity is sourced.\n *\n * @public\n */\nexport const ANNOTATION_LOCATION = 'backstage.io/managed-by-location';\n\n/**\n * Entity annotation containing the originally sourced location which ultimately\n * led to this entity being ingested.\n *\n * @public\n */\nexport const ANNOTATION_ORIGIN_LOCATION =\n  'backstage.io/managed-by-origin-location';\n\n/**\n * Entity annotation pointing to the source (e.g. source code repository root or\n * similar) for this entity.\n *\n * @public\n */\nexport const ANNOTATION_SOURCE_LOCATION = 'backstage.io/source-location';\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ANNOTATION_SOURCE_LOCATION } from '.';\nimport { stringifyEntityRef } from '../entity';\nimport { ANNOTATION_LOCATION } from './annotation';\n\n/**\n * Parses a string form location reference.\n *\n * @public\n * @param ref - A string-form location ref, e.g. `'url:https://host'`\n * @returns A location ref, e.g. `{ type: 'url', target: 'https://host' }`\n */\nexport function parseLocationRef(ref)\n\n\n {\n  if (typeof ref !== 'string') {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`,\n    );\n  }\n\n  const splitIndex = ref.indexOf(':');\n  if (splitIndex < 0) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`,\n    );\n  }\n\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n\n  if (!type || !target) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`,\n    );\n  }\n\n  if (type === 'http' || type === 'https') {\n    throw new TypeError(\n      `Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`,\n    );\n  }\n\n  return { type, target };\n}\n\n/**\n * Turns a location ref into its string form.\n *\n * @public\n * @param ref - A location ref, e.g. `{ type: 'url', target: 'https://host' }`\n * @returns A string-form location ref, e.g. `'url:https://host'`\n */\nexport function stringifyLocationRef(ref\n\n\n) {\n  const { type, target } = ref;\n\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n\n  return `${type}:${target}`;\n}\n\n/**\n * Returns the source code location of the Entity, to the extent that one exists.\n *\n * @remarks\n *\n * If the returned location type is of type 'url', the target should be readable at least\n * using the UrlReader from `@backstage/backend-common`. If it is not of type 'url', the caller\n * needs to have explicit handling of each location type or signal that it is not supported.\n *\n * @public\n */\nexport function getEntitySourceLocation(entity)\n\n\n {\n  const locationRef =\n    entity.metadata?.annotations?.[ANNOTATION_SOURCE_LOCATION] ??\n    entity.metadata?.annotations?.[ANNOTATION_LOCATION];\n\n  if (!locationRef) {\n    throw new Error(\n      `Entity '${stringifyEntityRef(entity)}' is missing location`,\n    );\n  }\n\n  return parseLocationRef(locationRef);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { PublishSubject } from '../../../lib/subjects';\n\n/**\n * Base implementation for the AlertApi that simply forwards alerts to consumers.\n *\n * @public\n */\nexport class AlertApiForwarder  {\n    subject = new PublishSubject();\n\n  post(alert) {\n    this.subject.next(alert);\n  }\n\n  alert$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Base implementation for the AnalyticsApi that does nothing.\n *\n * @public\n */\nexport class NoOpAnalyticsApi  {\n  captureEvent(_event) {}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { BehaviorSubject } from '../../../lib/subjects';\n\nconst STORAGE_KEY = 'theme';\n\n/**\n * Exposes the themes installed in the app, and permits switching the currently\n * active theme.\n *\n * @public\n */\nexport class AppThemeSelector  {\n  static createWithStorage(themes) {\n    const selector = new AppThemeSelector(themes);\n\n    if (!window.localStorage) {\n      return selector;\n    }\n\n    const initialThemeId =\n      window.localStorage.getItem(STORAGE_KEY) ?? undefined;\n\n    selector.setActiveThemeId(initialThemeId);\n\n    selector.activeThemeId$().subscribe(themeId => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY);\n      }\n    });\n\n    window.addEventListener('storage', event => {\n      if (event.key === STORAGE_KEY) {\n        const themeId = localStorage.getItem(STORAGE_KEY) ?? undefined;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n\n    return selector;\n  }\n\n   activeThemeId;\n    subject = new BehaviorSubject(undefined);\n\n  constructor(  themes) {;this.themes = themes;}\n\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n\n  activeThemeId$() {\n    return this.subject;\n  }\n\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\n// Update the same pattern in config-loader package if this is changed\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\n\nfunction isObject(value) {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nfunction typeOf(value) {\n  if (value === null) {\n    return 'null';\n  } else if (Array.isArray(value)) {\n    return 'array';\n  }\n  const type = typeof value;\n  if (type === 'number' && isNaN(value )) {\n    return 'nan';\n  }\n  if (type === 'string' && value === '') {\n    return 'empty-string';\n  }\n  return type;\n}\n\n// Separate out a couple of common error messages to reduce bundle size.\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  },\n};\n\n/**\n * An implementation of the `Config` interface that uses a plain JavaScript object\n * for the backing data, with the ability of linking multiple readers together.\n *\n * @public\n */\nexport class ConfigReader  {\n  /**\n   * A set of key paths that where removed from the config due to not being visible.\n   *\n   * This was added as a mutable private member to avoid changes to the public API.\n   * Its only purpose of this is to warn users of missing visibility when running\n   * the frontend in development mode.\n   */\n   filteredKeys;\n   notifiedFilteredKeys = new Set();\n\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(undefined);\n    }\n\n    // Merge together all configs into a single config with recursive fallback\n    // readers, giving the first config object in the array the lowest priority.\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${\n                description || ''\n              }`,\n            );\n          }\n        }\n\n        return reader;\n      },\n      undefined,\n    );\n  }\n\n  constructor(\n      data,\n      context = 'mock-config',\n      fallback,\n      prefix = '',\n  ) {;this.data = data;this.context = context;this.fallback = fallback;this.prefix = prefix;}\n\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    const value = this.readValue(key);\n    if (value !== undefined) {\n      return true;\n    }\n    return this.fallback?.has(key) ?? false;\n  }\n\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = this.fallback?.keys() ?? [];\n    return [...new Set([...localKeys, ...fallbackKeys])];\n  }\n\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key ?? '')));\n    }\n    return value ;\n  }\n\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = this.fallback?.getOptional(key);\n\n    if (value === undefined) {\n      if (process.env.NODE_ENV === 'development') {\n        if (fallbackValue === undefined && key) {\n          const fullKey = this.fullKey(key);\n          if (\n            this.filteredKeys?.includes(fullKey) &&\n            !this.notifiedFilteredKeys.has(fullKey)\n          ) {\n            this.notifiedFilteredKeys.add(fullKey);\n            // eslint-disable-next-line no-console\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. ` +\n                'See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.',\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === undefined) {\n      return value ;\n    }\n\n    // Avoid merging arrays and primitive values, since that's how merging works for other\n    // methods for reading config.\n    return mergeWith({}, { value: fallbackValue }, { value }, (into, from) =>\n      !isObject(from) || !isObject(into) ? from : undefined,\n    ).value ;\n  }\n\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    const value = this.readValue(key);\n    const fallbackConfig = this.fallback?.getOptionalConfig(key);\n\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== undefined) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), 'object'),\n      );\n    }\n    return fallbackConfig;\n  }\n\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    const configs = this.readConfigValue(key, values => {\n      if (!Array.isArray(values)) {\n        return { expected: 'object-array' };\n      }\n\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: 'object-array', value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n\n    if (!configs) {\n      if (process.env.NODE_ENV === 'development') {\n        const fullKey = this.fullKey(key);\n        if (\n          this.filteredKeys?.some(k => k.startsWith(fullKey)) &&\n          !this.notifiedFilteredKeys.has(key)\n        ) {\n          this.notifiedFilteredKeys.add(key);\n          // eslint-disable-next-line no-console\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. ` +\n              'See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.',\n          );\n        }\n      }\n      return undefined;\n    }\n\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      val =>\n        typeof val === 'number' ||\n        typeof val === 'string' || { expected: 'number' },\n    );\n    if (typeof value === 'number' || value === undefined) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, 'number'),\n      );\n    }\n    return number;\n  }\n\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    return this.readConfigValue(\n      key,\n      value => typeof value === 'boolean' || { expected: 'boolean' },\n    );\n  }\n\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      value =>\n        (typeof value === 'string' && value !== '') || { expected: 'string' },\n    );\n  }\n\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, values => {\n      if (!Array.isArray(values)) {\n        return { expected: 'string-array' };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== 'string' || value === '') {\n          return { expected: 'string-array', value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n\n   fullKey(key) {\n    return `${this.prefix}${this.prefix ? '.' : ''}${key}`;\n  }\n\n   copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key),\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n\n   readConfigValue(\n    key,\n    validate\n\n,\n  ) {\n    const value = this.readValue(key);\n\n    if (value === undefined) {\n      if (process.env.NODE_ENV === 'development') {\n        const fullKey = this.fullKey(key);\n        if (\n          this.filteredKeys?.includes(fullKey) &&\n          !this.notifiedFilteredKeys.has(fullKey)\n        ) {\n          this.notifiedFilteredKeys.add(fullKey);\n          // eslint-disable-next-line no-console\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. ` +\n              'See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.',\n          );\n        }\n      }\n\n      return this.fallback?.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected,\n        ),\n      );\n    }\n\n    return value ;\n  }\n\n   readValue(key) {\n    const parts = key ? key.split('.') : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n\n    if (this.data === undefined) {\n      return undefined;\n    }\n\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== undefined) {\n        const badKey = this.fullKey(parts.slice(0, index).join('.'));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), 'object'),\n        );\n      }\n    }\n\n    return value;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ERROR_PREFIX = 'Invalid discovery URL pattern,';\n\n/**\n * UrlPatternDiscovery is a lightweight DiscoveryApi implementation.\n * It uses a single template string to construct URLs for each plugin.\n *\n * @public\n */\nexport class UrlPatternDiscovery  {\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join('pluginId');\n\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith('/')) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n\n    return new UrlPatternDiscovery(parts);\n  }\n\n   constructor(  parts) {;this.parts = parts;}\n\n  async getBaseUrl(pluginId) {\n    return this.parts.join(pluginId);\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Decorates an ErrorApi by also forwarding error messages\n * to the alertApi with an 'error' severity.\n *\n * @public\n */\nexport class ErrorAlerter  {\n  constructor(\n      alertApi,\n      errorApi,\n  ) {;this.alertApi = alertApi;this.errorApi = errorApi;}\n\n  post(error, context) {\n    if (!context?.hidden) {\n      this.alertApi.post({ message: error.message, severity: 'error' });\n    }\n\n    return this.errorApi.post(error, context);\n  }\n\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { PublishSubject } from '../../../lib/subjects';\n\n/**\n * Base implementation for the ErrorApi that simply forwards errors to consumers.\n *\n * @public\n */\nexport class ErrorApiForwarder  {\n    subject = new PublishSubject\n\n\n();\n\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n\n  error$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Utility class that helps with error forwarding.\n *\n * @public\n */\nexport class UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      'unhandledrejection',\n      (e) => {\n        errorApi.post(e.reason , errorContext);\n      },\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureFlagState,\n\n\n\n} from '@backstage/core-plugin-api';\n\nexport function validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`,\n    );\n  }\n\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`,\n    );\n  }\n\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. ` +\n        'Examples: feature-flag-one, alpha, release-2020',\n    );\n  }\n}\n\n/**\n * A feature flags implementation that stores the flags in the browser's local\n * storage.\n *\n * @public\n */\nexport class LocalStorageFeatureFlags  {\n   registeredFeatureFlags = [];\n   flags;\n\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active,\n    );\n    window.localStorage.setItem(\n      'featureFlags',\n      JSON.stringify(Object.fromEntries(enabled)),\n    );\n  }\n\n   load() {\n    try {\n      const jsonStr = window.localStorage.getItem('featureFlags');\n      if (!jsonStr) {\n        return new Map();\n      }\n      const json = JSON.parse(jsonStr) ;\n      if (typeof json !== 'object' || json === null || Array.isArray(json)) {\n        return new Map();\n      }\n\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n\n      return new Map(entries);\n    } catch {\n      return new Map();\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Builds a fetch API, based on the builtin fetch wrapped by a set of optional\n * middleware implementations that add behaviors.\n *\n * @remarks\n *\n * The middleware are applied in reverse order, i.e. the last one will be\n * \"closest\" to the base implementation. Passing in `[M1, M2, M3]` effectively\n * leads to `M1(M2(M3(baseImplementation)))`.\n *\n * @public\n */\nexport function createFetchApi(options\n\n\n) {\n  let result = options.baseImplementation || global.fetch;\n\n  const middleware = [options.middleware ?? []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n\n  return {\n    fetch: result,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A fetch middleware, which injects a Backstage token header when the user is\n * signed in.\n */\nexport class IdentityAuthInjectorFetchMiddleware  {\n  static create(options\n\n\n\n\n\n\n\n\n) {\n    const matcher = buildMatcher(options);\n    const headerName = options.header?.name || 'authorization';\n    const headerValue = options.header?.value || (token => `Bearer ${token}`);\n\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue,\n    );\n  }\n\n  constructor(\n      identityApi,\n      allowUrl,\n      headerName,\n      headerValue,\n  ) {;this.identityApi = identityApi;this.allowUrl = allowUrl;this.headerName = headerName;this.headerValue = headerValue;}\n\n  apply(next) {\n    return async (input, init) => {\n      // Skip this middleware if the header already exists, or if the URL\n      // doesn't match any of the allowlist items, or if there was no token\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (\n        request.headers.get(this.headerName) ||\n        typeof token !== 'string' ||\n        !token ||\n        !this.allowUrl(request.url)\n      ) {\n        return next(input, init);\n      }\n\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\n\nfunction buildMatcher(options\n\n\n\n) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString('backend.baseUrl')]);\n  }\n  return () => false;\n}\n\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map(prefix => prefix.replace(/\\/$/, ''));\n  return url =>\n    trimmedPrefixes.some(\n      prefix => url === prefix || url.startsWith(`${prefix}/`),\n    );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction join(left, right) {\n  if (!right || right === '/') {\n    return left;\n  }\n\n  return `${left.replace(/\\/$/, '')}/${right.replace(/^\\//, '')}`;\n}\n\n/**\n * Handles translation from plugin://some-plugin-id/<path> to concrete http(s)\n * URLs.\n */\nexport class PluginProtocolResolverFetchMiddleware  {\n  constructor(  discoveryApi) {;this.discoveryApi = discoveryApi;}\n\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = 'plugin://';\n\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n\n      // Switch to a known protocol, since browser URL parsing misbehaves wildly\n      // on foreign protocols\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`,\n      );\n\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : ''}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(target, typeof input === 'string' ? init : input);\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { IdentityAuthInjectorFetchMiddleware } from './IdentityAuthInjectorFetchMiddleware';\nimport { PluginProtocolResolverFetchMiddleware } from './PluginProtocolResolverFetchMiddleware';\n\n\n/**\n * A collection of common middlewares for the FetchApi.\n *\n * @public\n */\nexport class FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options\n\n) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options\n\n\n\n\n\n\n\n\n) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n\n   constructor() {}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { BehaviorSubject } from '../../../lib/subjects';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function hasScopes(\n  searched,\n  searchFor,\n) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function joinScopes(\n  scopes,\n  ...moreScopess\n) {\n  const result = new Set(scopes);\n\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n\n  return result;\n}\n\n/**\n * The OAuthPendingRequests class is a utility for managing and observing\n * a stream of requests for oauth scopes for a single provider, and resolving\n * them correctly once requests are fulfilled.\n */\nexport class OAuthPendingRequests {\n   requests = [];\n   subject = new BehaviorSubject(\n    this.getCurrentPending(),\n  );\n\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n\n  resolve(scopes, result) {\n    this.requests = this.requests.filter(request => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n\n    this.subject.next(this.getCurrentPending());\n  }\n\n  reject(error) {\n    this.requests.forEach(request => request.reject(error));\n    this.requests = [];\n\n    this.subject.next(this.getCurrentPending());\n  }\n\n  pending() {\n    return this.subject;\n  }\n\n   getCurrentPending() {\n    const currentScopes =\n      this.requests.length === 0\n        ? undefined\n        : this.requests\n            .slice(1)\n            .reduce(\n              (acc, current) => joinScopes(acc, current.scopes),\n              this.requests[0].scopes,\n            );\n\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      },\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuthPendingRequests, } from './OAuthPendingRequests';\nimport { BehaviorSubject } from '../../../lib/subjects';\n\n/**\n * The OAuthRequestManager is an implementation of the OAuthRequestApi.\n *\n * The purpose of this class and the API is to read a stream of incoming requests\n * of OAuth access tokens from different providers with varying scope, and funnel\n * them all together into a single request for each OAuth provider.\n *\n * @public\n */\nexport class OAuthRequestManager  {\n    subject = new BehaviorSubject([]);\n   currentRequests = [];\n   handlerCount = 0;\n\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n\n    const index = this.handlerCount;\n    this.handlerCount++;\n\n    handler.pending().subscribe({\n      next: scopeRequest => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        // Convert from sparse array to array of present items only\n        this.subject.next(newRequests.filter(Boolean));\n      },\n    });\n\n    return scopes => {\n      return handler.request(scopes);\n    };\n  }\n\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n   makeAuthRequest(\n    request,\n    options,\n  ) {\n    const { scopes } = request;\n    if (!scopes) {\n      return undefined;\n    }\n\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error('Login failed, rejected by user');\n        error.name = 'RejectedError';\n        request.reject(error);\n      },\n    };\n  }\n\n  authRequest$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\n\nconst buckets = new Map();\n\n/**\n * An implementation of the storage API, that uses the browser's local storage.\n *\n * @public\n */\nexport class WebStorage  {\n  constructor(\n      namespace,\n      errorApi,\n  ) {;this.namespace = namespace;this.errorApi = errorApi;}\n\n  static create(options\n\n\n) {\n    return new WebStorage(options.namespace ?? '', options.errorApi);\n  }\n\n  get(key) {\n    return this.snapshot(key).value ;\n  }\n\n  snapshot(key) {\n    let value = undefined;\n    let presence = 'absent';\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === 'object' && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = 'present';\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`),\n      );\n    }\n    return { key, value, presence };\n  }\n\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n\n  observe$(key) {\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n\n   getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n\n   notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n\n   subscribers = new Set\n\n();\n\n    observable = new ObservableImpl\n\n(subscriber => {\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'atlassian',\n  title: 'Atlassian',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to Atlassian products.\n *\n * @public\n */\nexport default class AtlassianAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'bitbucket',\n  title: 'Bitbucket',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to Bitbucket products.\n *\n * @public\n */\nexport default class BitbucketAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['team'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'github',\n  title: 'GitHub',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to GitHub products.\n *\n * @public\n */\nexport default class GithubAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['read:user'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'gitlab',\n  title: 'GitLab',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to GitLab products.\n *\n * @public\n */\nexport default class GitlabAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['read_user'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'google',\n  title: 'Google',\n  icon: () => null,\n};\n\nconst SCOPE_PREFIX = 'https://www.googleapis.com/auth/';\n\n/**\n * Implements the OAuth flow to Google products.\n *\n * @public\n */\nexport default class GoogleAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      oauthRequestApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      defaultScopes = [\n        'openid',\n        `${SCOPE_PREFIX}userinfo.email`,\n        `${SCOPE_PREFIX}userinfo.profile`,\n      ],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (scope === 'openid') {\n            return scope;\n          }\n\n          if (scope === 'profile' || scope === 'email') {\n            return `${SCOPE_PREFIX}userinfo.${scope}`;\n          }\n\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'microsoft',\n  title: 'Microsoft',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to Microsoft products.\n *\n * @public\n */\nexport default class MicrosoftAuth {\n  static create(options) {\n    const {\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        'openid',\n        'offline_access',\n        'profile',\n        'email',\n        'User.Read',\n      ],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Options used to open a login popup.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Show a popup pointing to a URL that starts an auth flow. Implementing the receiving\n * end of the postMessage mechanism outlined in https://tools.ietf.org/html/draft-sakimura-oauth-wmrm-00\n *\n * The redirect handler of the flow should use postMessage to communicate back\n * to the app window. The message posted to the app must match the AuthResult type.\n *\n * The returned promise resolves to the response of the message that was posted from the auth popup.\n */\nexport function showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`,\n    );\n\n    let targetOrigin = '';\n\n    if (!popup || typeof popup.closed === 'undefined' || popup.closed) {\n      const error = new Error('Failed to open auth popup.');\n      error.name = 'PopupRejectedError';\n      reject(error);\n      return;\n    }\n\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n\n      if (data.type === 'config_info') {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n\n      if (data.type !== 'authorization_response') {\n        return;\n      }\n      const authResult = data ;\n\n      if ('error' in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        // TODO: proper error type\n        // error.extra = authResult.error.extra;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${\n          targetOrigin && targetOrigin !== window.location.origin\n            ? `Incorrect app origin, expected ${targetOrigin}`\n            : 'popup was closed'\n        }`;\n        const error = new Error(errMessage);\n        error.name = 'PopupClosedError';\n        reject(error);\n        done();\n      }\n    }, 100);\n\n    function done() {\n      window.removeEventListener('message', messageListener);\n      clearInterval(intervalId);\n    }\n\n    window.addEventListener('message', messageListener);\n  });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { showLoginPopup } from '../loginPopup';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(' ');\n}\n\n/**\n * DefaultAuthConnector is the default auth connector in Backstage. It talks to the\n * backend auth plugin through the standardized API, and requests user permission\n * via the OAuthRequestApi.\n */\nexport class DefaultAuthConnector\n\n{\n    discoveryApi;\n    environment;\n    provider;\n    joinScopesFunc;\n    authRequester;\n    sessionTransform;\n\n  constructor(options) {\n    const {\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = id => id,\n    } = options;\n\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: scopes => this.showPopup(scopes),\n    });\n\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n  }\n\n  async createSession(options) {\n    if (options.instantPopup) {\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n\n  async refreshSession() {\n    const res = await fetch(\n      await this.buildUrl('/refresh', { optional: true }),\n      {\n        headers: {\n          'x-requested-with': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n      },\n    ).catch(error => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`,\n      );\n      error.status = res.status;\n      throw error;\n    }\n\n    const authInfo = await res.json();\n\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n\n  async removeSession() {\n    const res = await fetch(await this.buildUrl('/logout'), {\n      method: 'POST',\n      headers: {\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      credentials: 'include',\n    }).catch(error => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n\n   async showPopup(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl('/start', {\n      scope,\n      origin: location.origin,\n    });\n\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730,\n    });\n\n    return await this.sessionTransform(payload);\n  }\n\n   async buildUrl(\n    path,\n    query,\n  ) {\n    const baseUrl = await this.discoveryApi.getBaseUrl('auth');\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment,\n    });\n\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n\n   buildQueryString(query\n\n) {\n    if (!query) {\n      return '';\n    }\n\n    const queryString = Object.entries(query)\n      .map(([key, value]) => {\n        if (typeof value === 'string') {\n          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        } else if (value) {\n          return encodeURIComponent(key);\n        }\n        return undefined;\n      })\n      .filter(Boolean)\n      .join('&');\n\n    if (!queryString) {\n      return '';\n    }\n    return `?${queryString}`;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DefaultAuthConnector } from '../../../../lib/AuthConnector';\nimport { RefreshingAuthSessionManager } from '../../../../lib/AuthSessionManager';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * OAuth2 create options.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'oauth2',\n  title: 'Your Identity Provider',\n  icon: () => null,\n};\n\n/**\n * Implements a generic OAuth2 flow for auth.\n *\n * @public\n */\nexport default class OAuth2\n  \n\n\n\n\n\n{\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = x => x,\n    } = options;\n\n    const connector = new DefaultAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi: oauthRequestApi,\n      sessionTransform(res) {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope,\n            ),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1000,\n            ),\n          },\n        };\n      },\n    });\n\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        const expiresInSec =\n          (session.providerInfo.expiresAt.getTime() - Date.now()) / 1000;\n        return expiresInSec < 60 * 5;\n      },\n    });\n\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n\n    sessionManager;\n    scopeTransform;\n\n   constructor(options\n\n\n) {\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n\n  async signIn() {\n    await this.getAccessToken();\n  }\n\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n\n  async getAccessToken(\n    scope,\n    options,\n  ) {\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes,\n    });\n    return session?.providerInfo.accessToken ?? '';\n  }\n\n  async getIdToken(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.providerInfo.idToken ?? '';\n  }\n\n  async getBackstageIdentity(\n    options = {},\n  ) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n\n   static normalizeScopes(\n    scopeTransform,\n    scopes,\n  ) {\n    if (!scopes) {\n      return new Set();\n    }\n\n    const scopeList = Array.isArray(scopes)\n      ? scopes\n      : scopes.split(/[\\s|,]/).filter(Boolean);\n\n    return new Set(scopeTransform(scopeList));\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'okta',\n  title: 'Okta',\n  icon: () => null,\n};\n\nconst OKTA_OIDC_SCOPES = new Set([\n  'openid',\n  'profile',\n  'email',\n  'phone',\n  'address',\n  'groups',\n  'offline_access',\n]);\n\nconst OKTA_SCOPE_PREFIX = 'okta.';\n\n/**\n * Implements the OAuth flow to Okta products.\n *\n * @public\n */\nexport default class OktaAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['openid', 'email', 'profile', 'offline_access'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n/**\n * OneLogin auth provider create options.\n * @public\n */\n\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'onelogin',\n  title: 'onelogin',\n  icon: () => null,\n};\n\nconst OIDC_SCOPES = new Set([\n  'openid',\n  'profile',\n  'email',\n  'phone',\n  'address',\n  'groups',\n  'offline_access',\n]);\n\nconst SCOPE_PREFIX = 'onelogin.';\n\n/**\n * Implements a OneLogin OAuth flow.\n *\n * @public\n */\nexport default class OneLoginAuth {\n  static create(\n    options,\n  ) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: ['openid', 'email', 'profile', 'offline_access'],\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { z } from 'zod';\n\n/** @internal */\n\n\n\n\n\n/** @internal */\nexport const samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional(),\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal('user'),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string()),\n    }),\n  }),\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { DirectAuthConnector } from '../../../../lib/AuthConnector';\nimport {\n  AuthSessionStore,\n  StaticAuthSessionManager,\n} from '../../../../lib/AuthSessionManager';\n\n\nimport { samlSessionSchema } from './types';\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'saml',\n  title: 'SAML',\n  icon: () => null,\n};\n\n/**\n * Implements a general SAML based auth flow.\n *\n * @public\n */\nexport default class SamlAuth\n  \n{\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n    } = options;\n\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n    });\n\n    const sessionManager = new StaticAuthSessionManager({\n      connector,\n    });\n\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema,\n    });\n\n    return new SamlAuth(authSessionStore);\n  }\n\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n\n   constructor(\n      sessionManager,\n  ) {;this.sessionManager = sessionManager;}\n\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  async getBackstageIdentity(\n    options = {},\n  ) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Scope type when registering API factories.\n * @public\n */\n\n\n\n // APIs that can't be overridden, e.g. config\n\nvar ScopePriority; (function (ScopePriority) {\n  ScopePriority[ScopePriority[\"default\"] = 10] = \"default\";\n  const app = 50; ScopePriority[ScopePriority[\"app\"] = app] = \"app\";\n  ScopePriority[ScopePriority[\"static\"] = 100] = \"static\";\n})(ScopePriority || (ScopePriority = {}));\n\n\n\n\n\n\n/**\n * ApiFactoryRegistry is an ApiFactoryHolder implementation that enables\n * registration of API Factories with different scope.\n *\n * Each scope has an assigned priority, where factories registered with\n * higher priority scopes override ones with lower priority.\n *\n * @public\n */\nexport class ApiFactoryRegistry  {\n    factories = new Map();\n\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(\n    scope,\n    factory,\n  ) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n\n  get(\n    api,\n  ) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return undefined;\n    }\n    return tuple.factory ;\n  }\n\n  getAllApis() {\n    const refs = new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An ApiHolder that queries multiple other holders from for\n * an Api implementation, returning the first one encountered..\n */\nexport class ApiAggregator  {\n    holders;\n\n  constructor(...holders) {\n    this.holders = holders;\n  }\n\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return undefined;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext, } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ApiAggregator } from './ApiAggregator';\nimport {\n  createVersionedValueMap,\n  createVersionedContext,\n} from '@backstage/version-bridge';\n\n/**\n * Prop types for the ApiProvider component.\n * @public\n */\n\n\n\n\n\nconst ApiContext = createVersionedContext('api-context');\n\n/**\n * Provides an {@link @backstage/core-plugin-api#ApiHolder} for consumption in\n * the React tree.\n *\n * @public\n */\nexport const ApiProvider = (props) => {\n  const { apis, children } = props;\n  const parentHolder = useContext(ApiContext)?.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n\n  return (\n    React.createElement(ApiContext.Provider, {\n      value: createVersionedValueMap({ 1: holder }),\n      children: children,}\n    )\n  );\n};\n\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node,\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Handles the actual on-demand instantiation and memoization of APIs out of\n * an {@link ApiFactoryHolder}.\n *\n * @public\n */\nexport class ApiResolver  {\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(\n    factories,\n    apis,\n  ) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = new Set();\n\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n\n    apis = new Map();\n\n  constructor(  factories) {;this.factories = factories;}\n\n  get(ref) {\n    return this.load(ref);\n  }\n\n   load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl ;\n    }\n\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return undefined;\n    }\n\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api ;\n  }\n\n   loadDeps(\n    dependent,\n    apis,\n    loading,\n  ) {\n    const impls = {} ;\n\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`,\n          );\n        }\n        impls[key] = api;\n      }\n    }\n\n    return impls;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValidElement, Children } from 'react';\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A function that allows you to traverse a tree of React elements using\n * varying methods to discover child nodes and collect data along the way.\n */\nexport function traverseElementTree(options\n\n\n\n) {\n  const collectors\n\n = {};\n\n  // Bootstrap all collectors, initializing the accumulators and providing the visitor function\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n\n  // Internal representation of an element in the tree that we're iterating over\n  \n\n\n\n\n\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: undefined,\n      contexts: {},\n    } ,\n  ];\n\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n\n    // While the parent and the element we pass on to collectors and discoverers\n    // have been validated and are known to be React elements, the child nodes\n    // emitted by the discoverers are not.\n    Children.forEach(node, element => {\n      if (!isValidElement(element)) {\n        return;\n      }\n\n      const nextContexts = {};\n\n      // Collectors populate their result data using the current node, and compute\n      // context for the next iteration\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name],\n          );\n        }\n      }\n\n      // Discoverers provide ways to continue the traversal from the current element\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts,\n          });\n        }\n      }\n    });\n  }\n\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator]),\n  ) ;\n}\n\nexport function createCollector(\n  accumulatorFactory,\n  visit,\n) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\n\nexport function childDiscoverer(element) {\n  return element.props?.children;\n}\n\nexport function routeElementDiscoverer(element) {\n  if (element.props?.path && element.props?.element) {\n    return element.props?.element;\n  }\n  return undefined;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getComponentData } from '@backstage/core-plugin-api';\nimport { createCollector } from '../extensions/traversal';\n\nexport const pluginCollector = createCollector(\n  () => new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(\n      node,\n      'core.plugin',\n    );\n    if (plugin) {\n      acc.add(plugin);\n    }\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  getComponentData,\n\n} from '@backstage/core-plugin-api';\nimport { isValidElement } from 'react';\n\nimport { createCollector } from '../extensions/traversal';\nimport { FeatureFlagged, } from './FeatureFlagged';\n\n// We always add a child that matches all subroutes but without any route refs. This makes\n// sure that we're always able to match each route no matter how deep the navigation goes.\n// The route resolver then takes care of selecting the most specific match in order to find\n// mount points that are as deep in the routing tree as possible.\nexport const MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: '/*',\n  element: 'match-all', // These elements aren't used, so we add in a bit of debug information\n  routeRefs: new Set(),\n};\n\n\n\n\n\n\n\n\n/**\n * This is the old V1 logic for collecting the routing model.\n * It is being replaced by a new collector because this collection\n * logic does not work well beyond react-router v6 beta.\n *\n * The breaking change is that react-router now requires route\n * elements to be `Route` components, and directly renders the\n * element prop rather than the `Route` itself. This means it is\n * no longer possible to create utility route components. In order\n * to fill this gap and in general simplify the route collection\n * logic, a new route collection logic is created.\n *\n * @internal\n */\nexport const routingV1Collector = createCollector(\n  () => ({\n    paths: new Map(),\n    parents: new Map(),\n    objects: new Array(),\n  }),\n  (acc, node, parent, ctx) => {\n    // Ignore the top-level element within element props, since it's already been collected.\n    if (parent?.props.element === node) {\n      return ctx;\n    }\n\n    let currentObj = ctx?.obj;\n    let currentParentRouteRef = ctx?.routeRef;\n    let sticky = ctx?.sticky;\n\n    const path = node.props?.path;\n    const parentChildren = currentObj?.children ?? acc.objects;\n    const caseSensitive = Boolean(node.props?.caseSensitive);\n\n    // The context path is used during mount point gathering to assign the same path\n    // to all discovered mount points\n    let currentCtxPath = ctx?.path;\n\n    // Start gathering mount points when we encounter a mount point gathering flag\n    if (getComponentData(node, 'core.gatherMountPoints')) {\n      if (!path) {\n        throw new Error('Mount point gatherer must have a path');\n      }\n      currentCtxPath = path;\n    }\n\n    // Route refs are discovered on the element itself, and on the top-level\n    // element within the element prop if it exists.\n    const element = node.props?.element;\n    let routeRef = getComponentData(node, 'core.mountPoint');\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, 'core.mountPoint');\n    }\n\n    if (routeRef) {\n      // First the path gathering\n\n      let routePath = path;\n      // If we're gathering mount points we use the context path as out path, unless\n      // the element has its own path, in which case we use that instead and stop gathering\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = undefined;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error('Mounted routable extension must have a path');\n      }\n      acc.paths.set(routeRef, routePath);\n\n      // Then the parent gathering\n\n      // \"sticky\" route ref is when we've encountered a mount point gatherer, and we want a\n      // mount points beneath it to have the same parent, regardless of internal structure\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n\n        // When we encounter a mount point with an explicit path, we stop gathering\n        // mount points within the children and remove the sticky state\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n\n      // Then construct the objects\n\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: 'mounted',\n          routeRefs: new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugin: getComponentData(\n            node.props.element,\n            'core.plugin',\n          ),\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj?.routeRefs.add(routeRef);\n      }\n    }\n\n    if (getComponentData(node, 'core.gatherMountPoints')) {\n      sticky = true;\n    }\n\n    const isGatherer = getComponentData(\n      node,\n      'core.gatherMountPoints',\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error('Mount point gatherer must have a path');\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: 'gathered',\n          routeRefs: new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugin: ctx?.obj?.plugin,\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky,\n    };\n  },\n);\n\nexport const featureFlagCollector = createCollector(\n  () => new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props ;\n      acc.add('with' in props ? props.with : props.without);\n    }\n  },\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n\n\n\n\nexport const routeRefType = getOrCreateGlobalSingleton(\n  'route-ref-type',\n  () => Symbol('route-ref-type'),\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function isRouteRef(\n  routeRef\n\n\n,\n) {\n  return routeRef[routeRefType] === 'absolute';\n}\n\nexport function isSubRouteRef(\n  routeRef\n\n\n,\n) {\n  return routeRef[routeRefType] === 'sub';\n}\n\nexport function isExternalRouteRef\n\n\n(\n  routeRef\n\n\n,\n) {\n  return routeRef[routeRefType] === 'external';\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { generatePath, matchRoutes } from 'react-router-dom';\nimport {\n\n\n\n\n  routeRefType,\n  isRouteRef,\n  isSubRouteRef,\n  isExternalRouteRef,\n} from './types';\n\n\n\n\n\n\n// Joins a list of paths together, avoiding trailing and duplicate slashes\nfunction joinPaths(...paths) {\n  const normalized = paths.join('/').replace(/\\/\\/+/g, '/');\n  if (normalized !== '/' && normalized.endsWith('/')) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\n/**\n * Resolves the absolute route ref that our target route ref is pointing pointing to, as well\n * as the relative target path.\n *\n * Returns an undefined target ref if one could not be fully resolved.\n */\nfunction resolveTargetRef(\n  anyRouteRef,\n  routePaths,\n  routeBindings,\n) {\n  // First we figure out which absolute route ref we're dealing with, an if there was an sub route path to append.\n  // For sub routes it will be the parent path, while for external routes it will be the bound route.\n  let targetRef;\n  let subRoutePath = '';\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [undefined, ''];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`,\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`,\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n\n  // Bail if no absolute path could be resolved\n  if (!targetRef) {\n    return [undefined, ''];\n  }\n\n  // Find the path that our target route is bound to\n  const resolvedPath = routePaths.get(targetRef);\n  if (!resolvedPath) {\n    return [undefined, ''];\n  }\n\n  // SubRouteRefs join the path from the parent route with its own path\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\n\n/**\n * Resolves the complete base path for navigating to the target RouteRef.\n */\nfunction resolveBasePath(\n  targetRef,\n  sourceLocation,\n  routePaths,\n  routeParents,\n  routeObjects,\n) {\n  // While traversing the app element tree we build up the routeObjects structure\n  // used here. It is the same kind of structure that react-router creates, with the\n  // addition that associated route refs are stored throughout the tree. This lets\n  // us look up all route refs that can be reached from our source location.\n  // Because of the similar route object structure, we can use `matchRoutes` from\n  // react-router to do the lookup of our current location.\n  const match = matchRoutes(routeObjects, sourceLocation) ?? [];\n\n  // While we search for a common routing root between our current location and\n  // the target route, we build a list of all route refs we find that we need\n  // to traverse to reach the target.\n  const refDiffList = Array();\n\n  let matchIndex = -1;\n  for (\n    let targetSearchRef = targetRef;\n    targetSearchRef;\n    targetSearchRef = routeParents.get(targetSearchRef)\n  ) {\n    // The match contains a list of all ancestral route refs present at our current location\n    // Starting at the desired target ref and traversing back through its parents, we search\n    // for a target ref that is present in the match for our current location. When a match\n    // is found it means we have found a common base to resolve the route from.\n    matchIndex = match.findIndex(m =>\n      (m.route ).routeRefs.has(targetSearchRef),\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n\n    // Every time we move a step up in the ancestry of the target ref, we add the current ref\n    // to the diff list, which ends up being the list of route refs to traverse form the common base\n    // in order to reach our target.\n    refDiffList.unshift(targetSearchRef);\n  }\n\n  // If our target route is present in the initial match we need to construct the final path\n  // from the parent of the matched route segment. That's to allow the caller of the route\n  // function to supply their own params.\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n\n  // This is the part of the route tree that the target and source locations have in common.\n  // We re-use the existing pathname directly along with all params.\n  const parentPath = matchIndex === -1 ? '' : match[matchIndex].pathname;\n\n  // This constructs the mid section of the path using paths resolved from all route refs\n  // we need to traverse to reach our target except for the very last one. None of these\n  // paths are allowed to require any parameters, as the caller would have no way of knowing\n  // what parameters those are.\n  const diffPath = joinPaths(\n    ...refDiffList.slice(0, -1).map(ref => {\n      const path = routePaths.get(ref);\n      if (!path) {\n        throw new Error(`No path for ${ref}`);\n      }\n      if (path.includes(':')) {\n        throw new Error(\n          `Cannot route to ${targetRef} with parent ${ref} as it has parameters`,\n        );\n      }\n      return path;\n    }),\n  );\n\n  return parentPath + diffPath;\n}\n\nexport class RouteResolver {\n  constructor(\n      routePaths,\n      routeParents,\n      routeObjects,\n      routeBindings\n\n\n,\n      appBasePath, // base path without a trailing slash\n  ) {;this.routePaths = routePaths;this.routeParents = routeParents;this.routeObjects = routeObjects;this.routeBindings = routeBindings;this.appBasePath = appBasePath;}\n\n  resolve(\n    anyRouteRef\n\n\n,\n    sourceLocation,\n  ) {\n    // First figure out what our target absolute ref is, as well as our target path.\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings,\n    );\n    if (!targetRef) {\n      return undefined;\n    }\n\n    // The location that we get passed in uses the full path, so start by trimming off\n    // the app base path prefix in case we're running the app on a sub-path.\n    let relativeSourceLocation;\n    if (typeof sourceLocation === 'string') {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname),\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n\n    // Next we figure out the base path, which is the combination of the common parent path\n    // between our current location and our target location, as well as the additional path\n    // that is the difference between the parent path and the base of our target location.\n    const basePath =\n      this.appBasePath +\n      resolveBasePath(\n        targetRef,\n        relativeSourceLocation,\n        this.routePaths,\n        this.routeParents,\n        this.routeObjects,\n      );\n\n    const routeFunc = (...[params]) => {\n      return basePath + generatePath(targetPath, params);\n    };\n    return routeFunc;\n  }\n\n   trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\n\n\n\n\nimport {\n  createVersionedValueMap,\n  createVersionedContext,\n} from '@backstage/version-bridge';\nimport { RouteResolver } from './RouteResolver';\n\n\nconst RoutingContext = createVersionedContext(\n  'routing-context',\n);\n\n\n\n\n\n\n\n\n\n\nexport const RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = '',\n  children,\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath,\n  );\n\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return (\n    React.createElement(RoutingContext.Provider, { value: versionedValue,}\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { matchRoutes, useLocation } from 'react-router-dom';\nimport {\n  useAnalytics,\n  AnalyticsContext,\n\n\n} from '@backstage/core-plugin-api';\n\n\n/**\n * Returns an extension context given the current pathname and a list of\n * Backstage route objects.\n */\nconst getExtensionContext = (\n  pathname,\n  routes,\n) => {\n  try {\n    // Find matching routes for the given path name.\n    const matches = matchRoutes(routes, { pathname }) \n\n;\n\n    // Of the matching routes, get the last (e.g. most specific) instance of\n    // the BackstageRouteObject.\n    const routeObject = matches\n      ?.filter(match => match?.route.routeRefs?.size > 0)\n      .pop()?.route;\n\n    // If there is no route object, then allow inheritance of default context.\n    if (!routeObject) {\n      return {};\n    }\n\n    // If there is a single route ref, return it.\n    // todo: get routeRef of rendered gathered mount point(?)\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n\n    return {\n      extension: 'App',\n      pluginId: routeObject.plugin?.getId() || 'root',\n      ...(routeRef ? { routeRef: (routeRef ).id } : {}),\n    };\n  } catch {\n    return {};\n  }\n};\n\n/**\n * Performs the actual event capture on render.\n */\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n}\n\n\n\n) => {\n  const analytics = useAnalytics();\n\n  useEffect(() => {\n    analytics.captureEvent('navigate', `${pathname}${search}${hash}`);\n  }, [analytics, pathname, search, hash]);\n\n  return null;\n};\n\n/**\n * Logs a \"navigate\" event with appropriate plugin-level analytics context\n * attributes each time the user navigates to a page.\n */\nexport const RouteTracker = ({\n  routeObjects,\n}\n\n) => {\n  const { pathname, search, hash } = useLocation();\n\n  return (\n    React.createElement(AnalyticsContext, { attributes: getExtensionContext(pathname, routeObjects),}\n      , React.createElement(TrackNavigation, { pathname: pathname, search: search, hash: hash,} )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Validates that there is no duplication of route parameter names\nexport function validateRouteParameters(\n  routePaths,\n  routeParents,\n) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(undefined);\n\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n\n    let currentRouteRef = route;\n\n    let fullPath = '';\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (!path) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = `${path}${fullPath}`;\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`,\n            );\n          }\n        }\n      }\n    }\n  }\n}\n\n// Validates that all non-optional external routes have been bound\nexport function validateRouteBindings(\n  routeBindings,\n  plugins,\n) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes,\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. ` +\n            'See https://backstage.io/link?bind-routes for details.',\n        );\n      }\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport {\n  createVersionedValueMap,\n  createVersionedContext,\n} from '@backstage/version-bridge';\n\n\nconst AppContext = createVersionedContext('app-context');\n\n\n\n\n\nexport const AppContextProvider = ({\n  appContext,\n  children,\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n\n  return React.createElement(AppContext.Provider, { value: versionedValue, children: children,} );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`,\n  );\n}\n\nfunction logDeprecation(thing) {\n  // eslint-disable-next-line no-console\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`,\n  );\n}\n\n// We use this for a period of backwards compatibility. It is a hidden\n// compatibility that will allow old plugins to continue working for a limited time.\n\n\n\n\n\n\n/**\n * Implementation of the connection between the App-wide IdentityApi\n * and sign-in page.\n */\nexport class AppIdentityProxy  {\n   target;\n   waitForTarget;\n   resolveTarget = () => {};\n\n  constructor() {\n    this.waitForTarget = new Promise(resolve => {\n      this.resolveTarget = resolve;\n    });\n  }\n\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi) {\n    this.target = identityApi;\n    this.resolveTarget(identityApi);\n  }\n\n  getUserId() {\n    if (!this.target) {\n      throw mkError('getUserId');\n    }\n    if (!this.target.getUserId) {\n      throw new Error('IdentityApi does not implement getUserId');\n    }\n    logDeprecation('getUserId');\n    return this.target.getUserId();\n  }\n\n  getProfile() {\n    if (!this.target) {\n      throw mkError('getProfile');\n    }\n    if (!this.target.getProfile) {\n      throw new Error('IdentityApi does not implement getProfile');\n    }\n    logDeprecation('getProfile');\n    return this.target.getProfile();\n  }\n\n  async getProfileInfo() {\n    return this.waitForTarget.then(target => target.getProfileInfo());\n  }\n\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(target =>\n      target.getBackstageIdentity(),\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. ` +\n          `It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`,\n      );\n    }\n\n    return identity;\n  }\n\n  async getCredentials() {\n    return this.waitForTarget.then(target => target.getCredentials());\n  }\n\n  async getIdToken() {\n    return this.waitForTarget.then(target => {\n      if (!target.getIdToken) {\n        throw new Error('IdentityApi does not implement getIdToken');\n      }\n      logDeprecation('getIdToken');\n      return target.getIdToken();\n    });\n  }\n\n  async signOut() {\n    await this.waitForTarget.then(target => target.signOut());\n    location.reload();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo, useEffect, useState, } from 'react';\nimport { useApi, appThemeApiRef, } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/lib/useObservable';\n\n// This tries to find the most accurate match, but also falls back to less\n// accurate results in order to avoid errors.\nfunction resolveTheme(\n  themeId,\n  shouldPreferDark,\n  themes,\n) {\n  if (themeId !== undefined) {\n    const selectedTheme = themes.find(theme => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n\n  if (shouldPreferDark) {\n    const darkTheme = themes.find(theme => theme.variant === 'dark');\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n\n  const lightTheme = themes.find(theme => theme.variant === 'light');\n  if (lightTheme) {\n    return lightTheme;\n  }\n\n  return themes[0];\n}\n\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia('(prefers-color-scheme: dark)'),\n    [],\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n\n  return shouldPreferDark;\n};\n\nexport function AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId(),\n  );\n\n  // Browser feature detection won't change over time, so ignore lint rule\n  const shouldPreferDark = Boolean(window.matchMedia)\n    ? useShouldPreferDarkTheme() // eslint-disable-line react-hooks/rules-of-hooks\n    : false;\n\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes(),\n  );\n  if (!appTheme) {\n    throw new Error('App has no themes');\n  }\n\n  return React.createElement(appTheme.Provider, { children: children,} );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @internal */\nclass ApiRegistryBuilder {\n   apis = [];\n\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n\n  build() {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\n\n/**\n * A registry for utility APIs.\n *\n * @internal\n */\nexport class ApiRegistry  {\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(new Map([[api.id, impl]]));\n  }\n\n  constructor(  apis) {;this.apis = apis;}\n\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n\n  get(api) {\n    return this.apis.get(api.id) ;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function resolveRouteBindings(bindRoutes) {\n  const result = new Map();\n\n  if (bindRoutes) {\n    const bind = (\n      externalRoutes,\n      targetRoutes,\n    ) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`,\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n\n  return result;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React, {\n\n  createContext,\n\n\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  ApiProvider,\n  AppThemeSelector,\n  ConfigReader,\n  LocalStorageFeatureFlags,\n} from '../apis';\nimport {\n  useApi,\n\n\n\n\n  appThemeApiRef,\n  configApiRef,\n\n\n  featureFlagsApiRef,\n\n  identityApiRef,\n\n} from '@backstage/core-plugin-api';\nimport { ApiFactoryRegistry, ApiResolver } from '../apis/system';\nimport {\n  childDiscoverer,\n  routeElementDiscoverer,\n  traverseElementTree,\n} from '../extensions/traversal';\nimport { pluginCollector } from '../plugins/collectors';\nimport {\n  featureFlagCollector,\n  routingV1Collector,\n} from '../routing/collectors';\nimport { RoutingProvider } from '../routing/RoutingProvider';\nimport { RouteTracker } from '../routing/RouteTracker';\nimport {\n  validateRouteParameters,\n  validateRouteBindings,\n} from '../routing/validation';\nimport { AppContextProvider } from './AppContext';\nimport { AppIdentityProxy } from '../apis/implementations/IdentityApi/AppIdentityProxy';\n\n\n\n\n\n\n\n\nimport { AppThemeProvider } from './AppThemeProvider';\nimport { defaultConfigLoader } from './defaultConfigLoader';\nimport { ApiRegistry } from '../apis/system/ApiRegistry';\nimport { resolveRouteBindings } from './resolveRouteBindings';\n\n\n\n\n\n\n\n\nconst InternalAppContext = createContext\n\n({ routeObjects: [] });\n\n/**\n * Get the app base path from the configured app baseUrl.\n *\n * The returned path does not have a trailing slash.\n */\nfunction getBasePath(configApi) {\n  let { pathname } = new URL(\n    configApi.getOptionalString('app.baseUrl') ?? '/',\n    'http://dummy.dev', // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, '');\n  return pathname;\n}\n\nfunction useConfigLoader(\n  configLoader,\n  components,\n  appThemeApi,\n) {\n  // Keeping this synchronous when a config loader isn't set simplifies tests a lot\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n\n  let noConfigNode = undefined;\n\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = React.createElement(Progress, null );\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = React.createElement(BootErrorPage, { step: \"load-config\", error: config.error,} );\n  }\n\n  const { ThemeProvider = AppThemeProvider } = components;\n\n  // Before the config is loaded we can't use a router, so exit early\n  if (noConfigNode) {\n    return {\n      node: (\n        React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi),}\n          , React.createElement(ThemeProvider, null, noConfigNode)\n        )\n      ),\n    };\n  }\n\n  const configReader = ConfigReader.fromConfigs(config.value ?? []);\n\n  return { api: configReader };\n}\n\nclass AppContextImpl  {\n  constructor(  app) {;this.app = app;}\n\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\n\nexport class AppManager  {\n   apiHolder;\n   configApi;\n\n    apis;\n    icons;\n    plugins;\n    components;\n    themes;\n    configLoader;\n    defaultApis;\n    bindRoutes;\n\n    appIdentityProxy = new AppIdentityProxy();\n    apiFactoryRegistry;\n\n  constructor(options) {\n    this.apis = options.apis ?? [];\n    this.icons = options.icons;\n    this.plugins = new Set((options.plugins ) ?? []);\n    this.components = options.components;\n    this.themes = options.themes ;\n    this.configLoader = options.configLoader ?? defaultConfigLoader;\n    this.defaultApis = options.defaultApis ?? [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n  }\n\n  getPlugins() {\n    return Array.from(this.plugins) ;\n  }\n\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n\n  getComponents() {\n    return this.components;\n  }\n\n  getProvider() {\n    const appContext = new AppContextImpl(this);\n\n    // We only validate routes once\n    let routesHaveBeenValidated = false;\n\n    const Provider = ({ children }) => {\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        [],\n      );\n\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: routingV1Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector,\n          },\n        });\n\n        // TODO(Rugvip): Restructure the public API so that we can get an immediate view of\n        //               the app, rather than having to wait for the provider to render.\n        //               For now we need to push the additional plugins we find during\n        //               collection and then make sure we initialize things afterwards.\n        result.collectedPlugins.forEach(plugin => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n\n        // Initialize APIs once all plugins are available\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes),\n        };\n      }, [children]);\n\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins ,\n        );\n      }\n\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi,\n      );\n\n      const hasConfigApi = 'api' in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig ;\n        this.configApi = api;\n      }\n\n      useEffect(() => {\n        if (hasConfigApi) {\n          const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n\n          for (const plugin of this.plugins.values()) {\n            if ('getFeatureFlags' in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId(),\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === 'feature-flag') {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId(),\n                  });\n                }\n              }\n            }\n          }\n\n          // Go through the featureFlags returned from the traversal and\n          // register those now the configApi has been loaded\n          for (const name of featureFlags) {\n            featureFlagsApi.registerFlag({ name, pluginId: '' });\n          }\n        }\n      }, [hasConfigApi, loadedConfig, featureFlags]);\n\n      if ('node' in loadedConfig) {\n        // Loading or error\n        return loadedConfig.node;\n      }\n\n      const { ThemeProvider = AppThemeProvider } = this.components;\n\n      return (\n        React.createElement(ApiProvider, { apis: this.getApiHolder(),}\n          , React.createElement(AppContextProvider, { appContext: appContext,}\n            , React.createElement(ThemeProvider, null\n              , React.createElement(RoutingProvider, {\n                routePaths: routing.paths,\n                routeParents: routing.parents,\n                routeObjects: routing.objects,\n                routeBindings: routeBindings,\n                basePath: getBasePath(loadedConfig.api),}\n              \n                , React.createElement(InternalAppContext.Provider, {\n                  value: { routeObjects: routing.objects },}\n                \n                  , children\n                )\n              )\n            )\n          )\n        )\n      );\n    };\n    return Provider;\n  }\n\n  getRouter() {\n    const { Router: RouterComponent, SignInPage: SignInPageComponent } =\n      this.components;\n\n    // This wraps the sign-in page and waits for sign-in to be completed before rendering the app\n    const SignInPageWrapper = ({\n      component: Component,\n      children,\n    }\n\n\n) => {\n      const [identityApi, setIdentityApi] = useState();\n\n      if (!identityApi) {\n        return React.createElement(Component, { onSignInSuccess: setIdentityApi,} );\n      }\n\n      this.appIdentityProxy.setTarget(identityApi);\n      return children;\n    };\n\n    const AppRouter = ({ children }) => {\n      const configApi = useApi(configApiRef);\n      const mountPath = `${getBasePath(configApi)}/*`;\n      const { routeObjects } = useContext(InternalAppContext);\n\n      // If the app hasn't configured a sign-in page, we just continue as guest.\n      if (!SignInPageComponent) {\n        this.appIdentityProxy.setTarget({\n          getUserId: () => 'guest',\n          getIdToken: async () => undefined,\n          getProfile: () => ({\n            email: 'guest@example.com',\n            displayName: 'Guest',\n          }),\n          getProfileInfo: async () => ({\n            email: 'guest@example.com',\n            displayName: 'Guest',\n          }),\n          getBackstageIdentity: async () => ({\n            type: 'user',\n            userEntityRef: 'user:default/guest',\n            ownershipEntityRefs: ['user:default/guest'],\n          }),\n          getCredentials: async () => ({}),\n          signOut: async () => {},\n        });\n\n        return (\n          React.createElement(RouterComponent, null\n            , React.createElement(RouteTracker, { routeObjects: routeObjects,} )\n            , React.createElement(Routes, null\n              , React.createElement(Route, { path: mountPath, element: React.createElement(React.Fragment, null, children),} )\n            )\n          )\n        );\n      }\n\n      return (\n        React.createElement(RouterComponent, null\n          , React.createElement(RouteTracker, { routeObjects: routeObjects,} )\n          , React.createElement(SignInPageWrapper, { component: SignInPageComponent,}\n            , React.createElement(Routes, null\n              , React.createElement(Route, { path: mountPath, element: React.createElement(React.Fragment, null, children),} )\n            )\n          )\n        )\n      );\n    };\n\n    return AppRouter;\n  }\n\n   getApiHolder() {\n    if (this.apiHolder) {\n      // Register additional plugins if they have been added.\n      // Routes paths, objects and others are already updated in the provider when children of it change\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register('default', factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis(),\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register('static', {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes),\n    });\n    this.apiFactoryRegistry.register('static', {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            'Tried to access config API before config was loaded',\n          );\n        }\n        return this.configApi;\n      },\n    });\n    this.apiFactoryRegistry.register('static', {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy,\n    });\n\n    // It's possible to replace the feature flag API, but since we must have at least\n    // one implementation we add it here directly instead of through the defaultApis.\n    this.apiFactoryRegistry.register('default', {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags(),\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register('default', factory);\n    }\n\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register('default', factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${\n              factory.api\n            }`,\n          );\n        }\n      }\n    }\n\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register('app', factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`,\n        );\n      }\n    }\n\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis(),\n    );\n\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n\n   verifyPlugins(plugins) {\n    const pluginIds = new Set();\n\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppManager } from './AppManager';\n\n\n/**\n * Creates a new Backstage App where the full set of options are required.\n *\n * @public\n * @param options - A set of options for creating the app\n * @returns\n * @remarks\n *\n * You will most likely want to use {@link @backstage/app-defaults#createApp},\n * however, this low-level API allows you to provide a full set of options,\n * including your own `components`, `icons`, `defaultApis`, and `themes`. This\n * is particularly useful if you are not using `@backstage/core-components` or\n * MUI, as it allows you to avoid those dependencies completely.\n */\nexport function createSpecializedApp(options) {\n  return new AppManager(options);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The default config loader, which expects that config is available at compile-time\n * in `process.env.APP_CONFIG`. APP_CONFIG should be an array of config objects as\n * returned by the config loader.\n *\n * It will also load runtime config from the __APP_INJECTED_RUNTIME_CONFIG__ string,\n * which can be rewritten at runtime to contain an additional JSON config object.\n * If runtime config is present, it will be placed first in the config array, overriding\n * other config values.\n *\n * @public\n */\nexport const defaultConfigLoader = async (\n  // This string may be replaced at runtime to provide additional config.\n  // It should be replaced by a JSON-serialized config object.\n  // It's a param so we can test it, but at runtime this will always fall back to default.\n  runtimeConfigJson = '__APP_INJECTED_RUNTIME_CONFIG__',\n) => {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error('No static configuration provided');\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error('Static configuration has invalid format');\n  }\n  const configs = appConfig.slice() ;\n\n  // Avoiding this string also being replaced at runtime\n  if (\n    runtimeConfigJson !==\n    '__app_injected_runtime_config__'.toLocaleUpperCase('en-US')\n  ) {\n    try {\n      const data = JSON.parse(runtimeConfigJson) ;\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: 'env' });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n\n  const windowAppConfig = (window ).__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: 'window',\n      data: windowAppConfig,\n    });\n  }\n  return configs;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function hasScopes(\n  searched,\n  searchFor,\n) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n\n\n\n\nexport class SessionScopeHelper {\n  constructor(  options) {;this.options = options;}\n\n  sessionExistsAndHasScope(\n    session,\n    scopes,\n  ) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === undefined) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes(sessionScopes, scopes);\n  }\n\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== undefined) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BehaviorSubject } from '../subjects';\nimport { SessionState } from '@backstage/core-plugin-api';\n\n\nexport class SessionStateTracker {\n    subject = new BehaviorSubject(\n    SessionState.SignedOut,\n  );\n\n   signedIn = false;\n\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut,\n      );\n    }\n  }\n\n  sessionState$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SessionScopeHelper, hasScopes } from './common';\nimport { SessionStateTracker } from './SessionStateTracker';\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * RefreshingAuthSessionManager manages an underlying session that has\n * and expiration time and needs to be refreshed periodically.\n */\nexport class RefreshingAuthSessionManager {\n    connector;\n    helper;\n    sessionScopesFunc;\n    sessionShouldRefreshFunc;\n    stateTracker = new SessionStateTracker();\n\n   refreshPromise;\n   currentSession;\n\n  constructor(options) {\n    const {\n      connector,\n      defaultScopes = new Set(),\n      sessionScopes,\n      sessionShouldRefresh,\n    } = options;\n\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n\n  async getSession(options) {\n    if (\n      this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)\n    ) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh();\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return undefined;\n        }\n        throw error;\n      }\n    }\n\n    // The user may still have a valid refresh token in their cookies. Attempt to\n    // initiate a fresh session through the backend using that refresh token.\n    //\n    // We skip this check if an instant login popup is requested, as we need to\n    // stay in a synchronous call stack from the user interaction. The downside\n    // is that that the user will sometimes be requested to log in even if they\n    // already had an existing session.\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh();\n        this.currentSession = newSession;\n        // The session might not have the scopes requested so go back and check again\n        return this.getSession(options);\n      } catch {\n        // If the refresh attempt fails we assume we don't have a session, so continue to create one.\n      }\n    }\n\n    // If we continue here we will show a popup, so exit if this is an optional session request.\n    if (options.optional) {\n      return undefined;\n    }\n\n    // We can call authRequester multiple times, the returned session will contain all requested scopes.\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes),\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n\n  async removeSession() {\n    this.currentSession = undefined;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n\n   async collapsedSessionRefresh() {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n\n    this.refreshPromise = this.connector.refreshSession();\n\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SessionScopeHelper } from './common';\nimport { SessionStateTracker } from './SessionStateTracker';\n\n\n\n\n\n\n\n\n\n\n/**\n * StaticAuthSessionManager manages an underlying session that does not expire.\n */\nexport class StaticAuthSessionManager {\n    connector;\n    helper;\n    stateTracker = new SessionStateTracker();\n\n   currentSession;\n\n  constructor(options) {\n    const { connector, defaultScopes = new Set(), sessionScopes } = options;\n\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n\n  async getSession(options) {\n    if (\n      this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)\n    ) {\n      return this.currentSession;\n    }\n\n    // If we continue here we will show a popup, so exit if this is an optional session request.\n    if (options.optional) {\n      return undefined;\n    }\n\n    // We can call authRequester multiple times, the returned session will contain all requested scopes.\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes),\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = undefined;\n    this.stateTracker.setIsSignedIn(false);\n  }\n\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\n\n// TODO(Rugvip): These are stopgap and probably incomplete implementations of subjects.\n// If we add a more complete Observables library they should be replaced.\n\n/**\n * A basic implementation of ReactiveX publish subjects.\n *\n * A subject is a convenient way to create an observable when you want\n * to fan out a single value to all subscribers.\n *\n * See http://reactivex.io/documentation/subject.html\n */\nexport class PublishSubject\n\n{\n   isClosed = false;\n   terminatingError;\n\n    observable = new ObservableImpl(subscriber => {\n    if (this.isClosed) {\n      if (this.terminatingError) {\n        subscriber.error(this.terminatingError);\n      } else {\n        subscriber.complete();\n      }\n      return () => {};\n    }\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n    subscribers = new Set\n\n();\n\n  [Symbol.observable]() {\n    return this;\n  }\n\n  get closed() {\n    return this.isClosed;\n  }\n\n  next(value) {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.subscribers.forEach(subscriber => subscriber.next(value));\n  }\n\n  error(error) {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach(subscriber => subscriber.error(error));\n  }\n\n  complete() {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.isClosed = true;\n    this.subscribers.forEach(subscriber => subscriber.complete());\n  }\n\n  \n\n\n\n\n\n  subscribe(\n    onNext,\n    onError,\n    onComplete,\n  ) {\n    const observer =\n      typeof onNext === 'function'\n        ? {\n            next: onNext,\n            error: onError,\n            complete: onComplete,\n          }\n        : onNext;\n\n    return this.observable.subscribe(observer);\n  }\n}\n\n/**\n * A basic implementation of ReactiveX behavior subjects.\n *\n * A subject is a convenient way to create an observable when you want\n * to fan out a single value to all subscribers.\n *\n * The BehaviorSubject will emit the most recently emitted value or error\n * whenever a new observer subscribes to the subject.\n *\n * See http://reactivex.io/documentation/subject.html\n */\n\nexport class BehaviorSubject\n\n{\n   isClosed;\n   currentValue;\n   terminatingError;\n    observable;\n\n  constructor(value) {\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = undefined;\n    this.observable = new ObservableImpl(subscriber => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {};\n      }\n\n      subscriber.next(this.currentValue);\n\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n\n    subscribers = new Set\n\n();\n\n  [Symbol.observable]() {\n    return this;\n  }\n\n  get closed() {\n    return this.isClosed;\n  }\n\n  next(value) {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.currentValue = value;\n    this.subscribers.forEach(subscriber => subscriber.next(value));\n  }\n\n  error(error) {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach(subscriber => subscriber.error(error));\n  }\n\n  complete() {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.isClosed = true;\n    this.subscribers.forEach(subscriber => subscriber.complete());\n  }\n\n  \n\n\n\n\n\n  subscribe(\n    onNext,\n    onError,\n    onComplete,\n  ) {\n    const observer =\n      typeof onNext === 'function'\n        ? {\n            next: onNext,\n            error: onError,\n            complete: onComplete,\n          }\n        : onNext;\n\n    return this.observable.subscribe(observer);\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  featureFlagsApiRef,\n  useApi,\n  attachComponentData,\n} from '@backstage/core-plugin-api';\nimport React, { } from 'react';\n\n/**\n * Props for the {@link FeatureFlagged} component.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Enables or disables rendering of its children based on the state of a given\n * feature flag.\n *\n * @public\n */\nexport const FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled =\n    'with' in props\n      ? featureFlagApi.isActive(props.with)\n      : !featureFlagApi.isActive(props.without);\n  return React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\n\nattachComponentData(FeatureFlagged, 'core.featureFlagged', true);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { useRoutes } from 'react-router-dom';\nimport { useApp, useElementFilter } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A wrapper around a set of routes.\n *\n * @remarks\n *\n * The root of the routing hierarchy in your app should use this component,\n * instead of the one from `react-router-dom`. This ensures that all of the\n * plugin route and utility API wiring happens under the hood.\n *\n * @public\n */\nexport const FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const routes = useElementFilter(props.children, elements =>\n    elements\n      .getElements()\n      .flatMap(child => {\n        let path = child.props.path;\n\n        // TODO(Rugvip): Work around plugins registering empty paths, remove once deprecated routes are gone\n        if (path === '') {\n          return [];\n        }\n        path = path?.replace(/\\/\\*$/, '') ?? '/';\n\n        return [\n          {\n            path,\n            element: child,\n            children: child.props.children\n              ? [\n                  // These are the children of each route, which we all add in under a catch-all\n                  // subroute in order to make them available to `useOutlet`\n                  {\n                    path: path === '/' ? '/' : '/*', // The root path must require an exact match\n                    element: child.props.children,\n                  },\n                ]\n              : undefined,\n          },\n        ];\n      })\n      // Routes are sorted to work around a bug where prefixes are unexpectedly matched\n      .sort((a, b) => b.path.localeCompare(a.path))\n      // We make sure all routes have '/*' appended, except '/'\n      .map(obj => {\n        obj.path = obj.path === '/' ? '/' : `${obj.path}/*`;\n        return obj;\n      }),\n  );\n\n  // TODO(Rugvip): Possibly add a way to skip this, like a noNotFoundPage prop\n  routes.push({\n    element: React.createElement(NotFoundErrorPage, null ),\n    path: '/*',\n  });\n\n  return useRoutes(routes);\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\nimport pluralize from 'pluralize';\n\n/**\n * Displays alerts from {@link @backstage/core-plugin-api#AlertApi}\n *\n * @public\n * @remarks\n *\n * Shown as SnackBar at the center top of the page by default. Configurable with props.\n */\n\n// TODO: improve on this and promote to a shared component for use by all apps.\n\n\n\n\n\n\n\n\n/** @public */\nexport function AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n\n  const { anchorOrigin = { vertical: 'top', horizontal: 'center' } } = props;\n\n  useEffect(() => {\n    const subscription = alertApi\n      .alert$()\n      .subscribe(message => setMessages(msgs => msgs.concat(message)));\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n\n  if (messages.length === 0) {\n    return null;\n  }\n\n  const [firstMessage] = messages;\n\n  const handleClose = () => {\n    setMessages(msgs => msgs.filter(msg => msg !== firstMessage));\n  };\n\n  return (\n    React.createElement(Snackbar, { open: true, anchorOrigin: anchorOrigin,}\n      , React.createElement(Alert, {\n        action: \n          React.createElement(IconButton, {\n            color: \"inherit\",\n            size: \"small\",\n            onClick: handleClose,\n            'data-testid': \"error-button-close\",}\n          \n            , React.createElement(CloseIcon, null )\n          )\n        ,\n        severity: firstMessage.severity,}\n      \n        , React.createElement('span', null\n          , firstMessage.message.toString()\n          , messages.length > 1 && (\n            React.createElement('em', null, ` (${messages.length - 1} older ${pluralize(\n              'message',\n              messages.length - 1,\n            )})`)\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { createStyles, makeStyles, } from '@material-ui/core/styles';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { extractInitials, stringToColor } from './utils';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      avatar: {\n        width: '4rem',\n        height: '4rem',\n        color: '#fff',\n        fontWeight: theme.typography.fontWeightBold,\n        letterSpacing: '1px',\n        textTransform: 'uppercase',\n      },\n    }),\n  { name: 'BackstageAvatar' },\n);\n\n/**\n * Properties for {@link Avatar}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n *  Component rendering an Avatar\n *\n * @public\n * @remarks\n *\n * Based on https://v4.mui.com/components/avatars/#avatar with some styling adjustment and two-letter initials\n */\nexport function Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles();\n  let styles = { ...customStyles };\n  // We only calculate the background color if there's not an avatar\n  // picture. If there is a picture, it might have a transparent\n  // background and we don't know whether the calculated background\n  // color will clash.\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || ''),\n      ...customStyles,\n    };\n  }\n  return (\n    React.createElement(MaterialAvatar, {\n      alt: displayName,\n      src: picture,\n      className: classes.avatar,\n      style: styles,}\n    \n      , displayName && extractInitials(displayName)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport classnames from 'classnames';\nimport MaterialLink, {\n\n} from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { } from 'react';\nimport {\n  Link as RouterLink,\n\n} from 'react-router-dom';\n\nconst useStyles = makeStyles(\n  {\n    visuallyHidden: {\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      overflow: 'hidden',\n      position: 'absolute',\n      whiteSpace: 'nowrap',\n      height: 1,\n      width: 1,\n    },\n    externalLink: {\n      position: 'relative',\n    },\n  },\n  { name: 'Link' },\n);\n\nexport const isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\n\n\n\n\n\n\n\n/**\n * Given a react node, try to retrieve its text content.\n */\nconst getNodeText = (node) => {\n  // If the node is an array of children, recurse and join.\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(' ').trim();\n  }\n\n  // If the node is a react element, recurse on its children.\n  if (typeof node === 'object' && node) {\n    return getNodeText((node )?.props?.children);\n  }\n\n  // Base case: the node is just text. Return it.\n  if (['string', 'number'].includes(typeof node)) {\n    return String(node);\n  }\n\n  // Base case: just return an empty string.\n  return '';\n};\n\n/**\n * Thin wrapper on top of material-ui's Link component, which...\n * - Makes the Link use react-router\n * - Captures Link clicks as analytics events.\n */\nexport const Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles();\n    const analytics = useAnalytics();\n    const to = String(props.to);\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n\n    const handleClick = (event) => {\n      onClick?.(event);\n      if (!noTrack) {\n        analytics.captureEvent('click', linkText, { attributes: { to } });\n      }\n    };\n\n    return external ? (\n      // External links\n      React.createElement(MaterialLink, {\n        ref: ref,\n        href: to,\n        onClick: handleClick,\n        ...(newWindow ? { target: '_blank', rel: 'noopener' } : {}),\n        ...props,\n        className: classnames(classes.externalLink, props.className),}\n      \n        , props.children\n        , React.createElement('span', { className: classes.visuallyHidden,}, \", Opens in a new window\"     )\n      )\n    ) : (\n      // Interact with React Router for internal links\n      React.createElement(MaterialLink, {\n        ref: ref,\n        component: RouterLink,\n        onClick: handleClick,\n        ...props,}\n      )\n    );\n  },\n) ;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport MaterialButton, {\n\n} from '@material-ui/core/Button';\nimport React from 'react';\nimport { Link, } from '../Link';\n\n/**\n * Properties for {@link Button}\n *\n * @public\n * @remarks\n *\n * See {@link https://v4.mui.com/api/button/#props | Material-UI Button Props} for all properties\n */\n\n\n\n/**\n * This wrapper is here to reset the color of the Link and make typescript happy.\n */\nconst LinkWrapper = React.forwardRef((props, ref) => (\n  React.createElement(Link, { ref: ref, ...props, color: \"initial\",} )\n));\n\n/**\n * Thin wrapper on top of material-ui's {@link https://v4.mui.com/components/buttons/ | Button} component\n *\n * @public\n * @remarks\n *\n * Makes the Button to utilise react-router\n */\nexport const Button = React.forwardRef((props, ref) => (\n  React.createElement(MaterialButton, { ref: ref, component: LinkWrapper, ...props,} )\n)) ;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport React, { useEffect, useState } from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\n\n/**\n * Properties for {@link CopyTextButton}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Copy text button with visual feedback\n *\n * @public\n * @remarks\n *\n * Visual feedback takes form of:\n *  - a hover color\n *  - click ripple\n *  - Tooltip shown when user has clicked\n *\n * @example\n *\n * `<CopyTextButton text=\"My text that I want to be copied to the clipboard\" />`\n */\nexport function CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1000,\n    tooltipText = 'Text copied to clipboard',\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  const handleCopyClick = e => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Tooltip, {\n        id: \"copy-test-tooltip\",\n        title: tooltipText,\n        placement: \"top\",\n        leaveDelay: tooltipDelay,\n        onClose: () => setOpen(false),\n        open: open,}\n      \n        , React.createElement(IconButton, { onClick: handleCopyClick,}\n          , React.createElement(CopyIcon, null )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\n\nimport { CopyTextButton } from '../CopyTextButton';\nimport { LightAsync } from 'react-syntax-highlighter';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\n\n/**\n * Properties for {@link CodeSnippet}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Thin wrapper on top of {@link https://react-syntax-highlighter.github.io/react-syntax-highlighter/ | react-syntax-highlighter}\n * providing consistent theming and copy code button\n *\n * @public\n */\nexport function CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false,\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === 'dark' ? dark : docco;\n  const highlightColor = theme.palette.type === 'dark' ? '#256bf3' : '#e6ffed';\n\n  return (\n    React.createElement('div', { style: { position: 'relative' },}\n      , React.createElement(LightAsync, {\n        customStyle: customStyle,\n        language: language,\n        style: mode,\n        showLineNumbers: showLineNumbers,\n        wrapLines: true,\n        lineNumberStyle: { color: theme.palette.textVerySubtle },\n        lineProps: (lineNumber) =>\n          highlightedNumbers?.includes(lineNumber)\n            ? {\n                style: {\n                  backgroundColor: highlightColor,\n                },\n              }\n            : {}\n        ,}\n      \n        , text\n      )\n      , showCopyCodeButton && (\n        React.createElement('div', { style: { position: 'absolute', top: 0, right: 0 },}\n          , React.createElement(CopyTextButton, { text: text,} )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React from 'react';\nimport { Link as RouterLink, } from 'react-router-dom';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\n\n/**\n * Properties for {@link CreateButton}\n *\n * @public\n */\n\n\n\n\n/**\n * Responsive Button giving consistent UX for creation of different things\n *\n * @public\n */\nexport function CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(theme =>\n    theme.breakpoints.down('xs'),\n  );\n\n  if (!to) {\n    return null;\n  }\n\n  return isXSScreen ? (\n    React.createElement(IconButton, {\n      component: RouterLink,\n      color: \"primary\",\n      title: title,\n      size: \"small\",\n      to: to,}\n    \n      , React.createElement(AddCircleOutline, null )\n    )\n  ) : (\n    React.createElement(Button, { component: RouterLink, variant: \"contained\", color: \"primary\", to: to,}\n      , title\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Edge of {@link DependencyGraph}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Graph direction\n *\n * @public\n */\nexport var Direction; (function (Direction) {\n  /**\n   * Top to Bottom\n   */\n  const TOP_BOTTOM = 'TB'; Direction[\"TOP_BOTTOM\"] = TOP_BOTTOM;\n  /**\n   * Bottom to Top\n   */\n  const BOTTOM_TOP = 'BT'; Direction[\"BOTTOM_TOP\"] = BOTTOM_TOP;\n  /**\n   * Left to Right\n   */\n  const LEFT_RIGHT = 'LR'; Direction[\"LEFT_RIGHT\"] = LEFT_RIGHT;\n  /**\n   * Right to Left\n   */\n  const RIGHT_LEFT = 'RL'; Direction[\"RIGHT_LEFT\"] = RIGHT_LEFT;\n})(Direction || (Direction = {}));\n\n/**\n * Node alignment\n *\n * @public\n */\nexport var Alignment; (function (Alignment) {\n  /**\n   * Up Left\n   */\n  const UP_LEFT = 'UL'; Alignment[\"UP_LEFT\"] = UP_LEFT;\n  /**\n   * Up Right\n   */\n  const UP_RIGHT = 'UR'; Alignment[\"UP_RIGHT\"] = UP_RIGHT;\n  /**\n   * Down Left\n   */\n  const DOWN_LEFT = 'DL'; Alignment[\"DOWN_LEFT\"] = DOWN_LEFT;\n  /**\n   * Down Right\n   */\n  const DOWN_RIGHT = 'DR'; Alignment[\"DOWN_RIGHT\"] = DOWN_RIGHT;\n})(Alignment || (Alignment = {}));\n\n/**\n * Algorithm used to rand nodes in graph\n */\nexport var Ranker; (function (Ranker) {\n  /**\n   * {@link https://en.wikipedia.org/wiki/Network_simplex_algorithm | Network Simplex} algorithm\n   */\n  const NETWORK_SIMPLEX = 'network-simplex'; Ranker[\"NETWORK_SIMPLEX\"] = NETWORK_SIMPLEX;\n  /**\n   * Tight Tree algorithm\n   */\n  const TIGHT_TREE = 'tight-tree'; Ranker[\"TIGHT_TREE\"] = TIGHT_TREE;\n  /**\n   * Longest path algorithm\n   *\n   * @remarks\n   *\n   * Simplest and fastest\n   */\n  const LONGEST_PATH = 'longest-path'; Ranker[\"LONGEST_PATH\"] = LONGEST_PATH;\n})(Ranker || (Ranker = {}));\n\n/**\n * Position of label in relation to the edge\n *\n * @public\n */\nexport var LabelPosition; (function (LabelPosition) {\n  const LEFT = 'l'; LabelPosition[\"LEFT\"] = LEFT;\n  const RIGHT = 'r'; LabelPosition[\"RIGHT\"] = RIGHT;\n  const CENTER = 'c'; LabelPosition[\"CENTER\"] = CENTER;\n})(LabelPosition || (LabelPosition = {}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light,\n    },\n    text: {\n      fill: theme.palette.primary.contrastText,\n    },\n  }),\n  { name: 'BackstageDependencyGraphDefaultNode' },\n);\n\n/** @public */\nexport function DefaultNode({ node: { id } }) {\n  const classes = useStyles();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  return (\n    React.createElement('g', null\n      , React.createElement('rect', {\n        className: classes.node,\n        width: paddedWidth,\n        height: paddedHeight,\n        rx: 10,}\n      )\n      , React.createElement('text', {\n        ref: idRef,\n        className: classes.text,\n        y: paddedHeight / 2,\n        x: paddedWidth / 2,\n        textAnchor: \"middle\",\n        alignmentBaseline: \"middle\",}\n      \n        , id\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ARROW_MARKER_ID = 'arrow-marker';\n\nexport const NODE_TEST_ID = 'node';\nexport const EDGE_TEST_ID = 'edge';\nexport const LABEL_TEST_ID = 'label';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { DefaultNode } from './DefaultNode';\n\nimport { NODE_TEST_ID } from './constants';\n\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n  }),\n  { name: 'BackstageDependencyGraphNode' },\n);\n\n\n\n\n\n\n\n\n\nconst renderDefault = (props) => React.createElement(DefaultNode, { ...props,} );\n\nexport function Node({\n  render = renderDefault,\n  setNode,\n  node,\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles();\n  const nodeRef = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    // set the node width to the actual rendered width to properly layout graph\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n\n  return (\n    React.createElement('g', {\n      ref: nodeRef,\n      'data-testid': NODE_TEST_ID,\n      className: classes.node,\n      transform: `translate(${x - width / 2},${y - height / 2})`,}\n    \n      , render({ node: nodeProps })\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\n\n\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast,\n    },\n  }),\n  { name: 'BackstageDependencyGraphDefaultLabel' },\n);\n\n/** @public */\nexport function DefaultLabel({ edge: { label } }) {\n  const classes = useStyles();\n  return (\n    React.createElement('text', { className: classes.text, textAnchor: \"middle\",}\n      , label\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\n\n\n\n\n\n\n\nimport { ARROW_MARKER_ID, EDGE_TEST_ID, LABEL_TEST_ID } from './constants';\nimport { DefaultLabel } from './DefaultLabel';\n\n\n/* Based on: https://github.com/dagrejs/dagre/wiki#configuring-the-layout  */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    path: {\n      strokeWidth: 2,\n      stroke: theme.palette.textSubtle,\n      fill: 'none',\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n  }),\n  { name: 'BackstageDependencyGraphEdge' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst renderDefault = (props) => (\n  React.createElement(DefaultLabel, { ...props,} )\n);\n\nconst createPath = d3Shape\n  .line()\n  .x(d => d.x)\n  .y(d => d.y)\n  .curve(d3Shape.curveMonotoneX);\n\nexport function Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles();\n\n  const labelRef = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    // set the label width to the actual rendered width to properly layout graph\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n\n  let path = '';\n\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y),\n    );\n    path = createPath(finitePoints) || '';\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , path && (\n        React.createElement('path', {\n          'data-testid': EDGE_TEST_ID,\n          className: classes.path,\n          markerEnd: `url(#${ARROW_MARKER_ID})`,\n          d: path,}\n        )\n      )\n      , labelProps.label ? (\n        React.createElement('g', {\n          ref: labelRef,\n          'data-testid': LABEL_TEST_ID,\n          className: classes.label,\n          transform: `translate(${x},${y})`,}\n        \n          , render({ edge: labelProps })\n        )\n      ) : null\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\n\nimport {\n\n\n  Direction,\n\n  Ranker,\n\n\n  LabelPosition,\n} from './types';\nimport { Node } from './Node';\nimport { Edge, } from './Edge';\nimport { ARROW_MARKER_ID } from './constants';\n\n/**\n * Properties of {@link DependencyGraph}\n *\n * @public\n * @remarks\n * <NodeData> and <EdgeData> are useful when rendering custom or edge labels\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst WORKSPACE_ID = 'workspace';\n\n/**\n * Graph component used to visualize relations between entities\n *\n * @public\n */\nexport function DependencyGraph(\n  props,\n) {\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = Ranker.NETWORK_SIMPLEX,\n    labelPosition = LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = 'enabled',\n    ...svgProps\n  } = props;\n  const theme = useTheme();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n\n  const graph = React.useRef(\n    new dagre.graphlib.Graph(),\n  );\n  const [graphWidth, setGraphWidth] = React.useState(\n    graph.current.graph()?.width || 0,\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    graph.current.graph()?.height || 0,\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n\n  const containerRef = React.useMemo(\n    () =>\n      debounce((node) => {\n        if (!node) {\n          return;\n        }\n        // Set up zooming + panning\n        const container = d3Selection.select(node);\n        const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n\n        function enableZoom() {\n          container.call(\n            d3Zoom\n              .zoom()\n              .scaleExtent([1, 10])\n              .on('zoom', event => {\n                event.transform.x = Math.min(\n                  0,\n                  Math.max(\n                    event.transform.x,\n                    maxWidth - maxWidth * event.transform.k,\n                  ),\n                );\n                event.transform.y = Math.min(\n                  0,\n                  Math.max(\n                    event.transform.y,\n                    maxHeight - maxHeight * event.transform.k,\n                  ),\n                );\n                workspace.attr('transform', event.transform);\n              }),\n          );\n        }\n\n        if (zoom === 'enabled') {\n          enableZoom();\n        } else if (zoom === 'enable-on-click') {\n          container.on('click', () => enableZoom());\n        }\n\n        const { width: newContainerWidth, height: newContainerHeight } =\n          node.getBoundingClientRect();\n        if (containerWidth !== newContainerWidth) {\n          setContainerWidth(newContainerWidth);\n        }\n        if (containerHeight !== newContainerHeight) {\n          setContainerHeight(newContainerHeight);\n        }\n      }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom],\n  );\n\n  const setNodesAndEdges = React.useCallback(() => {\n    // Cleaning up lingering nodes and edges\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n\n    currentGraphNodes.forEach(nodeId => {\n      const remainingNode = nodes.some(node => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n\n    currentGraphEdges.forEach(e => {\n      const remainingEdge = edges.some(\n        edge => edge.from === e.v && edge.to === e.w,\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n\n    // Adding/updating nodes and edges\n    nodes.forEach(node => {\n      const existingNode = graph.current\n        .nodes()\n        .find(nodeId => node.id === nodeId);\n\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n\n    edges.forEach(e => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks,\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n\n  const updateGraph = React.useMemo(\n    () =>\n      debounce(\n        () => {\n          dagre.layout(graph.current);\n          const { height, width } = graph.current.graph();\n          const newHeight = Math.max(0, height || 0);\n          const newWidth = Math.max(0, width || 0);\n          setGraphWidth(newWidth);\n          setGraphHeight(newHeight);\n\n          setGraphNodes(graph.current.nodes());\n          setGraphEdges(graph.current.edges());\n        },\n        250,\n        { leading: true },\n      ),\n    [],\n  );\n\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker,\n    });\n\n    setNodesAndEdges();\n    updateGraph();\n\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph,\n  ]);\n\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n\n  return (\n    React.createElement('svg', {\n      ref: containerRef,\n      ...svgProps,\n      width: \"100%\",\n      height: maxHeight,\n      viewBox: `0 0 ${maxWidth} ${maxHeight}`,}\n    \n      , React.createElement('defs', null\n        , React.createElement('marker', {\n          id: ARROW_MARKER_ID,\n          viewBox: \"0 0 24 24\"   ,\n          markerWidth: \"14\",\n          markerHeight: \"14\",\n          refX: \"16\",\n          refY: \"12\",\n          orient: \"auto\",\n          markerUnits: \"strokeWidth\",}\n        \n          , React.createElement('path', {\n            fill: theme.palette.textSubtle,\n            d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"        ,}\n          )\n        )\n        , defs\n      )\n      , React.createElement('g', { id: WORKSPACE_ID,}\n        , React.createElement('svg', {\n          width: graphWidth,\n          height: graphHeight,\n          y: maxHeight / 2 - graphHeight / 2,\n          x: maxWidth / 2 - graphWidth / 2,\n          viewBox: `0 0 ${graphWidth} ${graphHeight}`,}\n        \n          , graphEdges.map(e => {\n            const edge = graph.current.edge(e) ;\n            if (!edge) return null;\n            return (\n              React.createElement(Edge, {\n                key: `${e.v}-${e.w}`,\n                id: e,\n                setEdge: setEdge,\n                render: renderLabel,\n                edge: edge,}\n              )\n            );\n          })\n          , graphNodes.map((id) => {\n            const node = graph.current.node(id);\n            if (!node) return null;\n            return (\n              React.createElement(Node, {\n                key: id,\n                setNode: setNode,\n                render: renderNode,\n                node: node,}\n              )\n            );\n          })\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useApi, storageApiRef } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/lib/useObservable';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Close from '@material-ui/icons/Close';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0),\n      marginBottom: theme.spacing(0),\n      marginTop: theme.spacing(0),\n      display: 'flex',\n      flexFlow: 'row nowrap',\n    },\n    // showing on top\n    topPosition: {\n      position: 'relative',\n      marginBottom: theme.spacing(6),\n      marginTop: -theme.spacing(3),\n      zIndex: 'unset',\n    },\n    icon: {\n      fontSize: 20,\n    },\n    content: {\n      width: '100%',\n      maxWidth: 'inherit',\n      flexWrap: 'nowrap',\n    },\n    message: {\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.banner.text,\n      '& a': {\n        color: theme.palette.banner.link,\n      },\n    },\n    info: {\n      backgroundColor: theme.palette.banner.info,\n    },\n    error: {\n      backgroundColor: theme.palette.banner.error,\n    },\n    warning: {\n      backgroundColor:\n        theme.palette.banner.warning ?? theme.palette.banner.error,\n    },\n  }),\n  { name: 'BackstageDismissableBanner' },\n);\n\n\n\n\n\n\n\n\n/** @public */\nexport const DismissableBanner = (props) => {\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket('notifications');\n  const rawDismissedBanners =\n    notificationsStore.snapshot('dismissedBanners').value ?? [];\n\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners),\n  );\n\n  const observedItems = useObservable(\n    notificationsStore.observe$('dismissedBanners'),\n  );\n\n  useEffect(() => {\n    if (observedItems?.value) {\n      const currentValue = observedItems?.value ?? [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems?.value]);\n\n  const handleClick = () => {\n    notificationsStore.set('dismissedBanners', [...dismissedBanners, id]);\n  };\n\n  return (\n    React.createElement(Snackbar, {\n      anchorOrigin: \n        fixed\n          ? { vertical: 'bottom', horizontal: 'center' }\n          : { vertical: 'top', horizontal: 'center' }\n      ,\n      open: !dismissedBanners.has(id),\n      classes: {\n        root: classNames(classes.root, !fixed && classes.topPosition),\n      },}\n    \n      , React.createElement(SnackbarContent, {\n        classes: {\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message,\n        },\n        message: message,\n        action: [\n          React.createElement(IconButton, {\n            key: \"dismiss\",\n            title: \"Permanently dismiss this message\"   ,\n            color: \"inherit\",\n            onClick: handleClick,}\n          \n            , React.createElement(Close, { className: classes.icon,} )\n          ),\n        ],}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport missingAnnotation from './assets/missingAnnotation.svg';\nimport noInformation from './assets/noInformation.svg';\nimport createComponent from './assets/createComponent.svg';\nimport noBuild from './assets/noBuild.svg';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    generalImg: {\n      width: '95%',\n      zIndex: 2,\n      position: 'relative',\n      left: '50%',\n      top: '50%',\n      transform: 'translate(-50%, 15%)',\n    },\n  },\n  { name: 'BackstageEmptyStateImage' },\n);\n\n/** @public */\nexport const EmptyStateImage = ({ missing }) => {\n  const classes = useStyles();\n  switch (missing) {\n    case 'field':\n      return (\n        React.createElement('img', {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"  ,}\n        )\n      );\n    case 'info':\n      return (\n        React.createElement('img', {\n          src: noInformation,\n          alt: \"no Information\" ,\n          className: classes.generalImg,}\n        )\n      );\n    case 'content':\n      return (\n        React.createElement('img', {\n          src: createComponent,\n          alt: \"create Component\" ,\n          className: classes.generalImg,}\n        )\n      );\n    case 'data':\n      return (\n        React.createElement('img', { src: noBuild, alt: \"no Build\" , className: classes.generalImg,} )\n      );\n    default:\n      return null;\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { EmptyStateImage } from './EmptyStateImage';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0),\n    },\n    action: {\n      marginTop: theme.spacing(2),\n    },\n    imageContainer: {\n      position: 'relative',\n    },\n  }),\n  { name: 'BackstageEmptyState' },\n);\n\n\n\n\n\n\n\n\n/**\n * Various placeholder views for empty state pages\n *\n * @public\n *\n */\nexport function EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles();\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2,}\n    \n      , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n        , React.createElement(Grid, { container: true, direction: \"column\",}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(Typography, { variant: \"h5\",}, title)\n          )\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(Typography, { variant: \"body1\",}, description)\n          )\n          , React.createElement(Grid, { item: true, xs: true, className: classes.action,}\n            , action\n          )\n        )\n      )\n      , React.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer,}\n        , React.createElement(EmptyStateImage, { missing: missing,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Link } from '../Link';\nimport { EmptyState } from './EmptyState';\nimport { CodeSnippet } from '../CodeSnippet';\n\nconst COMPONENT_YAML = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background: theme.palette.type === 'dark' ? '#444' : '#fff',\n    },\n  }),\n  { name: 'BackstageMissingAnnotationEmptyState' },\n);\n\nexport function MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const url =\n    readMoreUrl ||\n    'https://backstage.io/docs/features/software-catalog/well-known-annotations';\n  const classes = useStyles();\n  const description = (\n    React.createElement(React.Fragment, null, \"The \"\n       , React.createElement('code', null, annotation), \" annotation is missing. You need to add the annotation to your component if you want to enable this tool.\"\n\n    )\n  );\n  return (\n    React.createElement(EmptyState, {\n      missing: \"field\",\n      title: \"Missing Annotation\" ,\n      description: description,\n      action: \n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, { variant: \"body1\",}, \"Add the annotation to your component YAML as shown in the highlighted example below:\"\n\n\n          )\n          , React.createElement('div', { className: classes.code,}\n            , React.createElement(CodeSnippet, {\n              text: COMPONENT_YAML.replace('ANNOTATION', annotation),\n              language: \"yaml\",\n              showLineNumbers: true,\n              highlightedNumbers: [6, 7],\n              customStyle: { background: 'inherit', fontSize: '115%' },}\n            )\n          )\n          , React.createElement(Button, { color: \"primary\", component: Link, to: url,}, \"Read more\"\n\n          )\n        )\n      ,}\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles, darken, lighten } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\n\nconst getWarningTextColor = (\n  severity,\n  theme,\n) => {\n  const getColor = theme.palette.type === 'light' ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\n\nconst getWarningBackgroundColor = (\n  severity,\n  theme,\n) => {\n  const getBackgroundColor = theme.palette.type === 'light' ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\n\nconst useErrorOutlineStyles = makeStyles(theme => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) =>\n      getWarningTextColor(\n        severity ,\n        theme,\n      ),\n  },\n}));\n\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return React.createElement(ErrorOutline, { classes: classes,} );\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return React.createElement(ExpandMoreIcon, { classes: classes,} );\n};\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    panel: {\n      backgroundColor: ({ severity }) =>\n        getWarningBackgroundColor(\n          severity ,\n          theme,\n        ),\n      color: ({ severity }) =>\n        getWarningTextColor(\n          severity ,\n          theme,\n        ),\n      verticalAlign: 'middle',\n    },\n    summary: {\n      display: 'flex',\n      flexDirection: 'row',\n    },\n    summaryText: {\n      color: ({ severity }) =>\n        getWarningTextColor(\n          severity ,\n          theme,\n        ),\n      fontWeight: 'bold',\n    },\n    message: {\n      width: '100%',\n      display: 'block',\n      color: ({ severity }) =>\n        getWarningTextColor(\n          severity ,\n          theme,\n        ),\n      backgroundColor: ({ severity }) =>\n        getWarningBackgroundColor(\n          severity ,\n          theme,\n        ),\n    },\n    details: {\n      width: '100%',\n      display: 'block',\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2.0),\n      fontFamily: 'sans-serif',\n    },\n  }),\n  { name: 'BackstageWarningPanel' },\n);\n\n\n\n\n\n\n\n\n\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase('en-US') + s.slice(1);\n};\n\n/**\n * WarningPanel. Show a user friendly error message to a user similar to\n * ErrorPanel except that the warning panel only shows the warning message to\n * the user.\n *\n * @param severity - Ability to change the severity of the alert. Default value\n *        \"warning\"\n * @param title - A title for the warning. If not supplied, \"Warning\" will be\n *        used.\n * @param message - Optional more detailed user-friendly message elaborating on\n *        the cause of the error.\n * @param children - Objects to provide context, such as a stack trace or detailed\n *        error reporting. Will be available inside an unfolded accordion.\n */\nexport function WarningPanel(props) {\n  const {\n    severity = 'warning',\n    title,\n    message,\n    children,\n    defaultExpanded,\n  } = props;\n  const classes = useStyles({ severity });\n\n  // If no severity or title provided, the heading will read simply \"Warning\"\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : '');\n\n  return (\n    React.createElement(Accordion, {\n      defaultExpanded: defaultExpanded ?? false,\n      className: classes.panel,\n      role: \"alert\",}\n    \n      , React.createElement(AccordionSummary, {\n        expandIcon: React.createElement(ExpandMoreIconStyled, { severity: severity,} ),\n        className: classes.summary,}\n      \n        , React.createElement(ErrorOutlineStyled, { severity: severity,} )\n        , React.createElement(Typography, { className: classes.summaryText, variant: \"subtitle1\",}\n          , subTitle\n        )\n      )\n      , (message || children) && (\n        React.createElement(AccordionDetails, null\n          , React.createElement(Grid, { container: true,}\n            , message && (\n              React.createElement(Grid, { item: true, xs: 12,}\n                , React.createElement(Typography, { className: classes.message, variant: \"body1\",}\n                  , message\n                )\n              )\n            )\n            , children && (\n              React.createElement(Grid, { item: true, xs: 12, className: classes.details,}\n                , children\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React, { } from 'react';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { WarningPanel } from '../WarningPanel';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageErrorPanel' },\n);\n\n\n\n\n\n\n\n\n\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(List, { dense: true,}\n      , React.createElement(ListItem, { alignItems: \"flex-start\",}\n        , React.createElement(ListItemText, {\n          classes: { secondary: classes.text },\n          primary: \"Error\",\n          secondary: error,}\n        )\n        , React.createElement(CopyTextButton, { text: error,} )\n      )\n\n      , React.createElement(ListItem, { alignItems: \"flex-start\",}\n        , React.createElement(ListItemText, {\n          classes: { secondary: classes.text },\n          primary: \"Message\",\n          secondary: message,}\n        )\n        , React.createElement(CopyTextButton, { text: message,} )\n      )\n\n      , stack && (\n        React.createElement(ListItem, { alignItems: \"flex-start\",}\n          , React.createElement(ListItemText, {\n            classes: { secondary: classes.text },\n            primary: \"Stack Trace\" ,\n            secondary: stack,}\n          )\n          , React.createElement(CopyTextButton, { text: stack,} )\n        )\n      )\n\n      , children\n    )\n  );\n};\n\n/** @public */\n\n\n\n\n\n\n/**\n * Renders a warning panel as the effect of an error.\n *\n * @public\n */\nexport function ErrorPanel(props) {\n  const { title, error, defaultExpanded, children } = props;\n  return (\n    React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: title ?? error.message,\n      defaultExpanded: defaultExpanded,}\n    \n      , React.createElement(ErrorList, {\n        error: error.name,\n        message: error.message,\n        stack: error.stack,\n        children: children,}\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React from 'react';\nimport { CodeSnippet } from '../CodeSnippet';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { ErrorPanel, } from '../ErrorPanel';\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageResponseErrorPanel' },\n);\n\n/**\n * Renders a warning panel as the effect of a failed server request.\n *\n * Has special treatment for ResponseError errors, to display rich\n * server-provided information about what happened.\n */\nexport function ResponseErrorPanel(props) {\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles();\n\n  if (error.name !== 'ResponseError') {\n    return (\n      React.createElement(ErrorPanel, {\n        title: title ?? error.message,\n        defaultExpanded: defaultExpanded,\n        error: error,}\n      )\n    );\n  }\n\n  const { body, cause } = error ;\n  const { request, response } = body;\n\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, '\\n');\n  const stackString = cause.stack?.replace(/\\\\n/g, '\\n');\n  const jsonString = JSON.stringify(body, undefined, 2);\n\n  return (\n    React.createElement(ErrorPanel, {\n      title: title ?? error.message,\n      defaultExpanded: defaultExpanded,\n      error: { name: errorString, message: messageString, stack: stackString },}\n    \n      , requestString && (\n        React.createElement(ListItem, { alignItems: \"flex-start\",}\n          , React.createElement(ListItemText, {\n            classes: { secondary: classes.text },\n            primary: \"Request\",\n            secondary: request ? `${requestString}` : undefined,}\n          )\n          , React.createElement(CopyTextButton, { text: requestString,} )\n        )\n      )\n      , React.createElement(React.Fragment, null\n        , React.createElement(Divider, { component: \"li\", className: classes.divider,} )\n        , React.createElement(ListItem, { alignItems: \"flex-start\",}\n          , React.createElement(ListItemText, {\n            classes: { secondary: classes.text },\n            primary: \"Full Error as JSON\"   ,}\n          )\n        )\n        , React.createElement(CodeSnippet, { language: \"json\", text: jsonString, showCopyCodeButton: true,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef, useEffect } from 'react';\n\n/**\n * Creates DOM element to be used as React root.\n */\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n */\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling,\n  );\n}\n\n/**\n * Hook to create a React Portal.\n *\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n *\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n *\n * @param id - The id of the target container, e.g 'modal' or 'spotlight'\n * @returns The DOM node to use as the Portal target.\n */\nexport function usePortal(id) {\n  const rootElemRef = useRef(null);\n\n  useEffect(\n    function setupElement() {\n      // Look for existing target dom element to append to\n      const existingParent = document.querySelector(`#${id}`);\n      // Parent is either a new root or the existing dom element\n      const parentElem = existingParent || createRootElement(id);\n\n      // If there is no existing DOM element, add a new one.\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n\n      // Add the detached element to the parent\n      parentElem.appendChild(rootElemRef.current);\n\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id],\n  );\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useState } from 'react';\n\nconst STATES_LOCAL_STORAGE_KEY = 'core.calloutSeen';\n\nfunction useCalloutStates()\n\n\n {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n\n  return { states, setState };\n}\n\nfunction useCalloutHasBeenSeen(featureId)\n\n\n {\n  const { states, setState } = useCalloutStates();\n\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n\n  return { seen: states[featureId] === true, markSeen };\n}\n\nexport function useShowCallout(featureId)\n\n\n {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, {\n\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport { usePortal } from './lib/usePortal';\nimport { useShowCallout } from './lib/useShowCallout';\n\n/** @public */\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    '@keyframes pulsateSlightly': {\n      '0%': { transform: 'scale(1.0)' },\n      '100%': { transform: 'scale(1.1)' },\n    },\n    '@keyframes pulsateAndFade': {\n      '0%': { transform: 'scale(1.0)', opacity: 0.9 },\n      '100%': { transform: 'scale(1.5)', opacity: 0 },\n    },\n    featureWrapper: {\n      position: 'relative',\n    },\n    backdrop: {\n      zIndex: 2000,\n      position: 'fixed',\n      overflow: 'hidden',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n    },\n    dot: {\n      position: 'absolute',\n      backgroundColor: 'transparent',\n      borderRadius: '100%',\n      border: '1px solid rgba(103, 146, 180, 0.98)',\n      boxShadow: '0px 0px 0px 20000px rgba(0, 0, 0, 0.5)',\n      zIndex: 2001,\n      transformOrigin: 'center center',\n      animation:\n        '$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite',\n    },\n    pulseCircle: {\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'transparent',\n      borderRadius: '100%',\n      border: '2px solid white',\n      zIndex: 2001,\n      transformOrigin: 'center center',\n      animation:\n        '$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite',\n    },\n    text: {\n      position: 'absolute',\n      color: 'white',\n      zIndex: 2003,\n    },\n  },\n  { name: 'BackstageFeatureCalloutCircular' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * One-time, round 'telescope' animation showing new feature.\n *\n * @public\n *\n */\nexport function FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal('core.callout');\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles();\n\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n\n      const borderWidth = 800;\n      const dotLeft =\n        wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth,\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('resize', update);\n    window.addEventListener('scroll', update);\n    return () => {\n      window.removeEventListener('resize', update);\n      window.removeEventListener('scroll', update);\n    };\n  }, [update]);\n\n  useLayoutEffect(update, [wrapperRef.current, update]);\n\n  if (!show) {\n    return React.createElement(React.Fragment, null, children);\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { className: classes.featureWrapper, ref: wrapperRef,}\n        , children\n      )\n      , createPortal(\n        React.createElement('div', { className: classes.backdrop,}\n          , React.createElement(ClickAwayListener, { onClickAway: hide,}\n            , React.createElement(React.Fragment, null\n              , React.createElement('div', {\n                className: classes.dot,\n                'data-testid': \"dot\",\n                style: {\n                  left: placement?.dotLeft,\n                  top: placement?.dotTop,\n                  width: placement?.dotSize,\n                  height: placement?.dotSize,\n                  borderWidth: placement?.borderWidth,\n                },\n                onClick: hide,\n                onKeyDown: hide,\n                role: \"button\",\n                tabIndex: 0,}\n              \n                , React.createElement('div', { className: classes.pulseCircle,} )\n              )\n              , React.createElement('div', {\n                className: classes.text,\n                'data-testid': \"text\",\n                style: {\n                  left: placement?.textLeft,\n                  top: placement?.textTop,\n                  width: placement?.textWidth,\n                },}\n              \n                , React.createElement(Typography, { variant: \"h2\", paragraph: true,}\n                  , title\n                )\n                , React.createElement(Typography, null, description)\n              )\n            )\n          )\n        ),\n        portalElement,\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport classnames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Link';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { Link as RouterLink } from '../Link';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useIconStyles = makeStyles(\n  theme => ({\n    link: {\n      display: 'grid',\n      justifyItems: 'center',\n      gridGap: 4,\n      textAlign: 'center',\n    },\n    disabled: {\n      color: 'gray',\n      cursor: 'default',\n    },\n    primary: {\n      color: theme.palette.primary.main,\n    },\n    secondary: {\n      color: theme.palette.secondary.main,\n    },\n    label: {\n      fontSize: '0.7rem',\n      textTransform: 'uppercase',\n      fontWeight: 600,\n      letterSpacing: 1.2,\n    },\n  }),\n  { name: 'BackstageIconLinkVertical' },\n);\n\n/** @public */\nexport function IconLinkVertical({\n  color = 'primary',\n  disabled = false,\n  href = '#',\n  icon = React.createElement(LinkIcon, null ),\n  label,\n  onClick,\n  title,\n}) {\n  const classes = useIconStyles();\n\n  if (disabled) {\n    return (\n      React.createElement(Link, {\n        title: title,\n        className: classnames(classes.link, classes.disabled),\n        underline: \"none\",}\n      \n        , icon\n        , React.createElement('span', { className: classes.label,}, label)\n      )\n    );\n  }\n\n  return (\n    React.createElement(Link, {\n      title: title,\n      className: classnames(classes.link, classes[color]),\n      to: href,\n      component: RouterLink,\n      onClick: onClick,}\n    \n      , icon\n      , React.createElement('span', { className: classes.label,}, label)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { IconLinkVertical, } from './IconLinkVertical';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: 'grid',\n      gridAutoFlow: 'column',\n      gridAutoColumns: 'min-content',\n      gridGap: theme.spacing(3),\n    },\n  }),\n  { name: 'BackstageHeaderIconLinkRow' },\n);\n\n\n\n\n\n/**\n * HTML nav tag with links mapped inside\n *\n * @public\n *\n */\nexport function HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles();\n  return (\n    React.createElement('nav', { className: classes.links,}\n      , links.map((link, index) => (\n        React.createElement(IconLinkVertical, { key: index + 1, ...link,} )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles, } from '@material-ui/core/styles';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport classNames from 'classnames';\nimport React, { } from 'react';\n\nconst generateGradientStops = (themeType) => {\n  // 97% corresponds to the theme.palette.background.default for the light theme\n  // 16% for the dark theme\n  const luminance = themeType === 'dark' ? '16%' : '97%';\n  // Generated with https://larsenwork.com/easing-gradients/\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\n\nconst fadeSize = 100;\nconst fadePadding = 10;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      position: 'relative',\n      display: 'flex',\n      flexFlow: 'row nowrap',\n      alignItems: 'center',\n    },\n    container: {\n      overflow: 'auto',\n      scrollbarWidth: 0 , // hide in FF\n      '&::-webkit-scrollbar': {\n        display: 'none', // hide in Chrome\n      },\n    },\n    fade: {\n      position: 'absolute',\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: 'opacity 300ms',\n      pointerEvents: 'none',\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type,\n      )})`,\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type,\n      )})`,\n    },\n    fadeHidden: {\n      opacity: 0,\n    },\n    button: {\n      position: 'absolute',\n    },\n    buttonLeft: {\n      left: -theme.spacing(2),\n    },\n    buttonRight: {\n      right: -theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageHorizontalScrollGrid' },\n);\n\n// Returns scroll distance from left and right\nfunction useScrollDistance(\n  ref,\n) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState\n\n([0, 0]);\n\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n\n    handleUpdate();\n\n    el.addEventListener('scroll', handleUpdate);\n    window.addEventListener('resize', handleUpdate);\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => {\n      el.removeEventListener('scroll', handleUpdate);\n      window.removeEventListener('resize', handleUpdate);\n    };\n  }, [ref]);\n\n  return [scrollLeft, scrollRight];\n}\n\n// Used to animate scrolling. Returns a single setScrollTarger function, when called with e.g. 200,\n// the element pointer to by the ref will be scrolled 200px forwards over time.\nfunction useSmoothScroll(\n  ref,\n  speed,\n  minDistance,\n) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n\n    const startTime = performance.now();\n    const id = requestAnimationFrame(frameTime => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = (Math.abs(scrollTarget) * frameDuration) / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n\n      ref.current.scrollBy({ left: scrollAmount });\n\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n\n  return setScrollTarget;\n}\n\n/**\n * Horizontal scrollable component with arrows to navigate\n *\n * @public\n *\n */\nexport function HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles(props);\n  const ref = React.useRef();\n\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n\n  return (\n    React.createElement('div', { ...otherProps, className: classes.root,}\n      , React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        wrap: \"nowrap\",\n        className: classes.container,\n        ref: ref ,}\n      \n        , children\n      )\n      , React.createElement('div', {\n        className: classNames(classes.fade, classes.fadeLeft, {\n          [classes.fadeHidden]: scrollLeft === 0,\n        }),}\n      )\n      , React.createElement('div', {\n        className: classNames(classes.fade, classes.fadeRight, {\n          [classes.fadeHidden]: scrollRight === 0,\n        }),}\n      )\n      , scrollLeft > 0 && (\n        React.createElement(IconButton, {\n          title: \"Scroll Left\" ,\n          onClick: () => handleScrollClick(false),\n          className: classNames(classes.button, classes.buttonLeft, {}),}\n        \n          , React.createElement(ChevronLeftIcon, null )\n        )\n      )\n      , scrollRight > 0 && (\n        React.createElement(IconButton, {\n          title: \"Scroll Right\" ,\n          onClick: () => handleScrollClick(true),\n          className: classNames(classes.button, classes.buttonRight, {}),}\n        \n          , React.createElement(ChevronRightIcon, null )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    alpha: {\n      color: '#ffffff',\n      fontFamily: 'serif',\n      fontWeight: 'normal',\n      fontStyle: 'italic',\n    },\n    beta: {\n      color: '#4d65cc',\n      fontFamily: 'serif',\n      fontWeight: 'normal',\n      fontStyle: 'italic',\n    },\n  },\n  { name: 'BackstageLifecycle' },\n);\n\nexport function Lifecycle(props) {\n  const classes = useStyles(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? (\n    React.createElement('span', {\n      className: classes[alpha ? 'alpha' : 'beta'],\n      style: { fontSize: '120%' },}\n    \n      , alpha ? React.createElement(React.Fragment, null, \"α\") : React.createElement(React.Fragment, null, \"β\")\n    )\n  ) : (\n    React.createElement('span', { className: classes[alpha ? 'alpha' : 'beta'],}\n      , alpha ? 'Alpha' : 'Beta'\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { lazy, Suspense } from 'react';\nimport { useApp } from '@backstage/core-plugin-api';\n\nconst RealLogViewer = lazy(() =>\n  import('./RealLogViewer').then(m => ({ default: m.RealLogViewer })),\n);\n\n/**\n * The properties for the LogViewer component.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A component that displays logs in a scrollable text area.\n *\n * The LogViewer has support for search and filtering, as well as displaying\n * text content with ANSI color escape codes.\n *\n * Since the LogViewer uses windowing to avoid rendering all contents at once, the\n * log is sized automatically to fill the available vertical space. This means\n * it may often be needed to wrap the LogViewer in a container that provides it\n * with a fixed amount of space.\n *\n * @public\n */\nexport function LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return (\n    React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n      , React.createElement(RealLogViewer, { ...props,} )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport ReactMarkdown, { } from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport React from 'react';\n\nimport { CodeSnippet } from '../CodeSnippet';\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    markdown: {\n      '& table': {\n        borderCollapse: 'collapse',\n        border: `1px solid ${theme.palette.border}`,\n      },\n      '& th, & td': {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1),\n      },\n      '& td': {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        verticalAlign: 'middle',\n        lineHeight: '1',\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0,\n      },\n      '& th': {\n        backgroundColor: theme.palette.background.paper,\n      },\n      '& tr': {\n        backgroundColor: theme.palette.background.paper,\n      },\n      '& tr:nth-child(odd)': {\n        backgroundColor: theme.palette.background.default,\n      },\n\n      '& a': {\n        color: theme.palette.link,\n      },\n      '& img': {\n        maxWidth: '100%',\n      },\n    },\n  }),\n  { name: 'BackstageMarkdownContent' },\n);\n\n\n\n\n\n\n\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, '');\n    const match = /language-(\\w+)/.exec(className || '');\n    return !inline && match ? (\n      React.createElement(CodeSnippet, { language: match[1], text: text,} )\n    ) : (\n      React.createElement('code', { className: className, ...props,}\n        , children\n      )\n    );\n  },\n};\n\n/**\n * MarkdownContent\n * --\n * Renders markdown with the default dialect [gfm - GitHub flavored Markdown](https://github.github.com/gfm/) to backstage theme styled HTML.\n * If you just want to render to plain [CommonMark](https://commonmark.org/), set the dialect to `'common-mark'`\n */\nexport function MarkdownContent(props) {\n  const { content, dialect = 'gfm', linkTarget } = props;\n  const classes = useStyles();\n  return (\n    React.createElement(ReactMarkdown, {\n      remarkPlugins: dialect === 'gfm' ? [gfm] : [],\n      className: classes.markdown,\n      children: content,\n      components: components,\n      linkTarget: linkTarget,}\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport React, { useState } from 'react';\nimport { isError } from '@backstage/errors';\n\n\n\n\nconst useItemStyles = makeStyles(\n  theme => ({\n    root: {\n      paddingLeft: theme.spacing(3),\n    },\n  }),\n  { name: 'BackstageLoginRequestListItem' },\n);\n\n\n\n\n\n\n\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : 'An unspecified error occurred');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const IconComponent = request.provider.icon;\n\n  return (\n    React.createElement(ListItem, { disabled: busy, classes: { root: classes.root },}\n      , React.createElement(ListItemAvatar, null\n        , React.createElement(IconComponent, { fontSize: \"large\",} )\n      )\n      , React.createElement(ListItemText, {\n        primary: request.provider.title,\n        secondary: error && React.createElement(Typography, { color: \"error\",}, error),}\n      )\n      , React.createElement(Button, { color: \"primary\", variant: \"contained\", onClick: handleContinue,}, \"Log in\"\n\n      )\n    )\n  );\n};\n\nexport default LoginRequestListItem;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport Button from '@material-ui/core/Button';\nimport React, { useMemo, useState } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\nimport LoginRequestListItem from './LoginRequestListItem';\nimport { useApi, oauthRequestApiRef } from '@backstage/core-plugin-api';\nimport Typography from '@material-ui/core/Typography';\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    dialog: {\n      paddingTop: theme.spacing(1),\n    },\n    title: {\n      minWidth: 0,\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize,\n    },\n    contentList: {\n      padding: 0,\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0),\n    },\n  }),\n  { name: 'OAuthRequestDialog' },\n);\n\nexport function OAuthRequestDialog(_props) {\n  const classes = useStyles();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    [],\n  );\n\n  const handleRejectAll = () => {\n    requests.forEach(request => request.reject());\n  };\n\n  return (\n    React.createElement(Dialog, {\n      open: Boolean(requests.length),\n      fullWidth: true,\n      maxWidth: \"xs\",\n      classes: { paper: classes.dialog },\n      'aria-labelledby': \"oauth-req-dialog-title\",}\n    \n      , React.createElement('main', null\n        , React.createElement(DialogTitle, {\n          classes: { root: classes.title },\n          id: \"oauth-req-dialog-title\",}\n        \n          , React.createElement(Typography, { className: classes.titleHeading, variant: \"h1\",}, \"Login Required\"\n\n          )\n        )\n\n        , React.createElement(DialogContent, { dividers: true, classes: { root: classes.contentList },}\n          , React.createElement(List, null\n            , requests.map(request => (\n              React.createElement(LoginRequestListItem, {\n                key: request.provider.title,\n                request: request,\n                busy: busy,\n                setBusy: setBusy,}\n              )\n            ))\n          )\n        )\n      )\n\n      , React.createElement(DialogActions, { classes: { root: classes.actionButtons },}\n        , React.createElement(Button, { onClick: handleRejectAll,}, \"Reject All\" )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip, { } from '@material-ui/core/Tooltip';\nimport React, { useState } from 'react';\nimport TextTruncate, { } from 'react-text-truncate';\nimport { useIsMounted } from '@react-hookz/web';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      overflow: 'visible !important',\n    },\n  },\n  { name: 'BackstageOverflowTooltip' },\n);\n\nexport function OverflowTooltip(props) {\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles();\n\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n\n  return (\n    React.createElement(Tooltip, {\n      title: props.title ?? (props.text || ''),\n      placement: props.placement,\n      disableHoverListener: !hover,}\n    \n      , React.createElement(TextTruncate, {\n        text: props.text,\n        line: props.line,\n        onToggled: handleToggled,\n        containerClassName: classes.container,}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect, } from 'react';\nimport LinearProgress, {\n\n} from '@material-ui/core/LinearProgress';\n\nexport function Progress(props) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const handle = setTimeout(() => setIsVisible(true), 250);\n    return () => clearTimeout(handle);\n  }, []);\n\n  return isVisible ? (\n    React.createElement(LinearProgress, { ...props, 'data-testid': \"progress\",} )\n  ) : (\n    React.createElement('div', { style: { display: 'none' },} )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport { Link } from '../../components/Link';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      maxWidth: 'fit-content',\n      padding: theme.spacing(2, 2, 2, 2.5),\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle,\n    },\n    arrow: {\n      color: theme.palette.textSubtle,\n    },\n  }),\n  { name: 'BackstageBottomLink' },\n);\n\n/** @public */\n\n\n\n\n\n\n/**\n * Footer with link used in  {@link InfoCard } and {@link TabbedCard}\n *\n * @public\n *\n */\nexport function BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', null\n      , React.createElement(Divider, null )\n      , React.createElement(Link, { to: link, onClick: onClick, underline: \"none\",}\n        , React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root,}\n          , React.createElement(Box, { className: classes.boxTitle, fontWeight: \"fontWeightBold\", m: 1,}\n            , React.createElement(Typography, null\n              , React.createElement('strong', null, title)\n            )\n          )\n          , React.createElement(ArrowIcon, { className: classes.arrow,} )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Component, } from 'react';\nimport { Button } from '../../components/Button';\nimport { ErrorPanel } from '../../components/ErrorPanel';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === 'string') {\n    return React.createElement(React.Fragment, null, \"Please contact \"  , slackChannel, \" for help.\"  );\n  } else if (!slackChannel.href) {\n    return React.createElement(React.Fragment, null, \"Please contact \"  , slackChannel.name, \" for help.\"  );\n  }\n\n  return (\n    React.createElement(Button, { to: slackChannel.href, variant: \"contained\",}\n      , slackChannel.name\n    )\n  );\n};\n\n/** @public */\nexport const ErrorBoundary\n\n\n = class ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: undefined,\n      errorInfo: undefined,\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // eslint-disable-next-line no-console\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n\n    if (!error) {\n      return children;\n    }\n\n    return (\n      React.createElement(ErrorPanel, { title: \"Something Went Wrong\"  , error: error,}\n        , React.createElement(SlackLink, { slackChannel: slackChannel,} )\n      )\n    );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader, { } from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { } from 'react';\nimport { BottomLink, } from '../BottomLink';\nimport { ErrorBoundary, } from '../ErrorBoundary';\n\n/** @public */\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    noPadding: {\n      padding: 0,\n      '&:last-child': {\n        paddingBottom: 0,\n      },\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5),\n    },\n    headerTitle: {\n      fontWeight: 700,\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1),\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: 'flex',\n    },\n  }),\n  { name: 'BackstageInfoCard' },\n);\n\n/** @public */\n\n\nconst CardActionsTopRight = withStyles(\n  theme => ({\n    root: {\n      display: 'inline-block',\n      padding: theme.spacing(8, 8, 0, 0),\n      float: 'right',\n    },\n  }),\n  { name: 'BackstageInfoCardCardActionsTopRight' },\n)(CardActions);\n\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    fullHeight: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n    },\n    gridItem: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100% - 10px)', // for pages without content header\n      marginBottom: '10px',\n    },\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1,\n    },\n    gridItem: {\n      flex: 1,\n    },\n  },\n};\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Material-ui card with header , content and actions footer\n *\n * @public\n *\n */\nexport function InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps,\n  } = props;\n  const classes = useStyles();\n  /**\n   * If variant is specified, we build up styles for that particular variant for both\n   * the Card and the CardContent (since these need to be synced)\n   */\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach(name => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name ],\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[\n          name \n        ],\n      };\n    });\n  }\n\n  const cardSubTitle = () => {\n    return (\n      React.createElement('div', { className: classes.headerSubheader,}\n        , subheader && React.createElement('div', { className: classes.subheader,}, subheader)\n        , icon\n      )\n    );\n  };\n\n  const errProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    React.createElement(Card, { style: calculatedStyle, className: className,}\n      , React.createElement(ErrorBoundary, { ...errProps,}\n        , title && (\n          React.createElement(CardHeader, {\n            classes: {\n              root: classes.header,\n              title: classes.headerTitle,\n              subheader: classes.headerSubheader,\n              avatar: classes.headerAvatar,\n              action: classes.headerAction,\n              content: classes.headerContent,\n            },\n            title: title,\n            subheader: cardSubTitle(),\n            action: action,\n            style: { ...headerStyle },\n            titleTypographyProps: titleTypographyProps,\n            ...headerProps,}\n          )\n        )\n        , actionsTopRight && (\n          React.createElement(CardActionsTopRight, null, actionsTopRight)\n        )\n        , divider && React.createElement(Divider, null )\n        , React.createElement(CardContent, {\n          className: classNames(cardClassName, {\n            [classes.noPadding]: noPadding,\n          }),\n          style: calculatedCardStyle,}\n        \n          , children\n        )\n        , actions && (\n          React.createElement(CardActions, { className: actionsClassName,}, actions)\n        )\n        , deepLink && React.createElement(BottomLink, { ...deepLink,} )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Circle } from 'rc-progress';\nimport React, { useEffect, useState } from 'react';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      position: 'relative',\n      lineHeight: 0,\n    },\n    overlay: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -60%)',\n      fontSize: 45,\n      fontWeight: 'bold',\n      color: theme.palette.textContrast,\n    },\n    description: {\n      fontSize: '100%',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n      position: 'absolute',\n      wordBreak: 'break-all',\n      display: 'inline-block',\n    },\n    circle: {\n      width: '80%',\n      transform: 'translate(10%, 0)',\n    },\n    colorUnknown: {},\n  }),\n  { name: 'BackstageGauge' },\n);\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: '%',\n  max: 100,\n};\n\nexport const getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max,\n}) => {\n  if (isNaN(value)) {\n    return '#ddd';\n  }\n\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n\n  return palette.status.ok;\n};\n\n/**\n * Circular Progress Bar\n *\n * @public\n *\n */\n\nexport function Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props,\n  };\n\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n\n  const [isHovering, setIsHovering] = useState(false);\n\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener('mouseenter', handleMouseOver);\n      node.addEventListener('mouseleave', handleMouseOut);\n\n      return () => {\n        node.removeEventListener('mouseenter', handleMouseOver);\n        node.removeEventListener('mouseleave', handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n\n  return (\n    React.createElement('div', { ref: setHoverRef, className: classes.root,}\n      , React.createElement(Circle, {\n        strokeLinecap: \"butt\",\n        percent: asPercentage,\n        strokeWidth: 12,\n        trailWidth: 12,\n        strokeColor: getColor({ palette, value: asActual, inverse, max }),\n        className: classes.circle,}\n      )\n      , description && isHovering ? (\n        React.createElement('div', { className: classes.description,}, description)\n      ) : (\n        React.createElement('div', { className: classes.overlay,}\n          , isNaN(value) ? 'N/A' : `${asActual}${unit}`\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { } from 'react';\n\nimport { InfoCard, } from '../../layout/InfoCard';\nimport { Gauge, } from './Gauge';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    root: {\n      height: '100%',\n      width: 250,\n    },\n  },\n  { name: 'BackstageGaugeCard' },\n);\n\n/**\n * {@link Gauge} with header, subheader and footer\n *\n * @public\n *\n */\nexport function GaugeCard(props) {\n  const classes = useStyles(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor,\n  } = props;\n\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress,\n  };\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(InfoCard, {\n        title: title,\n        subheader: subheader,\n        deepLink: deepLink,\n        variant: variant,\n        icon: icon,}\n      \n        , React.createElement(Gauge, { ...gaugeProps,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Line } from 'rc-progress';\n\nimport { getProgressColor, } from './Gauge';\n\n\n\n\n\n\n\n\n\nexport function LinearGauge(props) {\n  const { value, getColor = getProgressColor } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100,\n  });\n  return (\n    React.createElement(Tooltip, { title: `${percent}%`,}\n      , React.createElement('span', null\n        , React.createElement(Line, {\n          percent: percent,\n          strokeWidth: 4,\n          trailWidth: 4,\n          strokeColor: strokeColor,}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  () =>\n    createStyles({\n      icon: {\n        position: 'absolute',\n        right: '4px',\n        pointerEvents: 'none',\n      },\n    }),\n  { name: 'BackstageClosedDropdown' },\n);\n\nconst ClosedDropdown = () => {\n  const classes = useStyles();\n  return (\n    React.createElement(SvgIcon, {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",}\n    \n      , React.createElement('path', {\n        d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\"       ,\n        fill: \"#616161\",}\n      )\n    )\n  );\n};\n\nexport default ClosedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n\n\nconst useStyles = makeStyles(\n  () =>\n    createStyles({\n      icon: {\n        position: 'absolute',\n        right: '4px',\n        pointerEvents: 'none',\n      },\n    }),\n  { name: 'BackstageOpenedDropdown' },\n);\n\nconst OpenedDropdown = () => {\n  const classes = useStyles();\n  return (\n    React.createElement(SvgIcon, {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",}\n    \n      , React.createElement('path', {\n        d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\"       ,\n        fill: \"#616161\",}\n      )\n    )\n  );\n};\n\nexport default OpenedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport {\n  createStyles,\n  makeStyles,\n\n  withStyles,\n} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useEffect, useState } from 'react';\nimport ClosedDropdown from './static/ClosedDropdown';\nimport OpenedDropdown from './static/OpenedDropdown';\n\n/** @public */\n\n\nconst BootstrapInput = withStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        'label + &': {\n          marginTop: theme.spacing(3),\n        },\n      },\n      input: {\n        borderRadius: 4,\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        border: '1px solid #ced4da',\n        fontSize: 16,\n        padding: '10px 26px 10px 12px',\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\n        fontFamily: 'Helvetica Neue',\n        '&:focus': {\n          background: theme.palette.background.paper,\n          borderRadius: 4,\n        },\n      },\n    }),\n  { name: 'BackstageSelectInputBase' },\n)(InputBase);\n\n/** @public */\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      formControl: {\n        margin: `${theme.spacing(1)} 0px`,\n        maxWidth: 300,\n      },\n      label: {\n        transform: 'initial',\n        fontWeight: 'bold',\n        fontSize: 14,\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        '&.Mui-focused': {\n          color: theme.palette.text.primary,\n        },\n      },\n      formLabel: {\n        transform: 'initial',\n        fontWeight: 'bold',\n        fontSize: 14,\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        '&.Mui-focused': {\n          color: theme.palette.text.primary,\n        },\n      },\n      chips: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      chip: {\n        margin: 2,\n      },\n      checkbox: {},\n\n      root: {\n        display: 'flex',\n        flexDirection: 'column',\n      },\n    }),\n  { name: 'BackstageSelect' },\n);\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport function SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n  } = props;\n  const classes = useStyles();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : ''),\n  );\n  const [isOpen, setOpen] = useState(false);\n\n  useEffect(() => {\n    setValue(multiple ? [] : '');\n  }, [triggerReset, multiple]);\n\n  useEffect(() => {\n    if (selected !== undefined) {\n      setValue(selected);\n    }\n  }, [selected]);\n\n  const handleChange = (event) => {\n    setValue(event.target.value );\n    onChange(event.target.value );\n  };\n\n  const handleClick = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen(previous => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  const handleDelete = (selectedValue) => () => {\n    const newValue = (value ).filter(chip => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(ClickAwayListener, { onClickAway: handleClickAway,}\n        , React.createElement(FormControl, { className: classes.formControl,}\n          , React.createElement(InputLabel, { className: classes.formLabel,}, label)\n          , React.createElement(Select, {\n            'aria-label': label,\n            value: value,\n            native: native,\n            disabled: disabled,\n            'data-testid': \"select\",\n            displayEmpty: true,\n            multiple: multiple,\n            onChange: handleChange,\n            onClick: handleClick,\n            open: isOpen,\n            input: React.createElement(BootstrapInput, null ),\n            label: label,\n            tabIndex: 0,\n            renderValue: s =>\n              multiple && (value ).length !== 0 ? (\n                React.createElement('div', { className: classes.chips,}\n                  , (s ).map(selectedValue => (\n                    React.createElement(Chip, {\n                      key: items.find(el => el.value === selectedValue)?.value,\n                      label: \n                        items.find(el => el.value === selectedValue)?.label\n                      ,\n                      clickable: true,\n                      onDelete: handleDelete(selectedValue),\n                      className: classes.chip,}\n                    )\n                  ))\n                )\n              ) : (\n                React.createElement(Typography, null\n                  , (value ).length === 0\n                    ? placeholder || ''\n                    : items.find(el => el.value === s)?.label\n                )\n              )\n            ,\n            IconComponent: () =>\n              !isOpen ? React.createElement(ClosedDropdown, null ) : React.createElement(OpenedDropdown, null )\n            ,\n            MenuProps: {\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left',\n              },\n              transformOrigin: {\n                vertical: 'top',\n                horizontal: 'left',\n              },\n              getContentAnchorEl: null,\n            },}\n          \n            , placeholder && !multiple && (\n              React.createElement(MenuItem, { value: [],}, placeholder)\n            )\n            , native\n              ? items &&\n                items.map(item => (\n                  React.createElement('option', { value: item.value, key: item.value,}\n                    , item.label\n                  )\n                ))\n              : items &&\n                items.map(item => (\n                  React.createElement(MenuItem, { key: item.value, value: item.value,}\n                    , multiple && (\n                      React.createElement(Checkbox, {\n                        color: \"primary\",\n                        checked: (value ).includes(item.value) || false,\n                        className: classes.checkbox,}\n                      )\n                    )\n                    , item.label\n                  )\n                ))\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Children,\n  isValidElement,\n  useState,\n  useEffect,\n\n} from 'react';\nimport MuiStepper from '@material-ui/core/Stepper';\n\n\n\n\n\n\n\n\n\n\nconst noop = () => {};\nexport const VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop,\n});\n\n\n\n\n\n\n\nexport function SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n\n  const steps = [];\n  let endStep;\n  Children.forEach(children, child => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(VerticalStepperContext.Provider, {\n        value: {\n          stepIndex,\n          setStepIndex,\n          stepHistory,\n          setStepHistory,\n          onStepChange,\n          stepperLength: Children.count(children),\n        },}\n      \n        , React.createElement(MuiStepper, {\n          activeStep: stepIndex,\n          orientation: \"vertical\",\n          elevation: elevated ? 2 : 0,}\n        \n          , steps\n        )\n      )\n      , stepIndex >= Children.count(children) - 1 && endStep\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext, } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport { VerticalStepperContext } from './SimpleStepper';\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      marginTop: theme.spacing(3),\n      '& button': {\n        marginRight: theme.spacing(1),\n      },\n    },\n  }),\n  { name: 'BackstageSimpleStepperFooter' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const RestartBtn = ({ text, handleClick }) => (\n  React.createElement(Button, { onClick: handleClick,}, text || 'Reset')\n);\n\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex,\n}) => (\n  React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: disabled,\n    'data-testid': `nextButton-${stepIndex}`,\n    onClick: handleClick,}\n  \n    , text || (last ? 'Finish' : 'Next')\n  )\n);\n\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => (\n  React.createElement(Button, {\n    onClick: handleClick,\n    'data-testid': `backButton-${stepIndex}`,\n    disabled: disabled,}\n  \n    , text || 'Back'\n  )\n);\n\n\n\n\n\n\nexport const SimpleStepperFooter = ({\n  actions = {},\n  children,\n}) => {\n  const classes = useStyles();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange,\n  } = useContext(VerticalStepperContext);\n\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n\n    setStepIndex(newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = actions.nextStep\n      ? actions.nextStep(stepIndex, stepperLength - 1)\n      : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , [undefined, true].includes(actions.showBack) && stepIndex !== 0 && (\n        React.createElement(BackBtn, {\n          text: actions.backText,\n          handleClick: handleBack,\n          disabled: stepIndex === 0,\n          stepIndex: stepIndex,}\n        )\n      )\n      , [undefined, true].includes(actions.showNext) && (\n        React.createElement(NextBtn, {\n          text: actions.nextText,\n          handleClick: handleNext,\n          disabled: \n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canNext && !actions.canNext())\n          ,\n          stepIndex: stepIndex,}\n        )\n      )\n      , actions.showRestart && stepIndex !== 0 && (\n        React.createElement(RestartBtn, {\n          text: actions.restartText,\n          handleClick: handleRestart,\n          stepIndex: stepIndex,}\n        )\n      )\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Typography from '@material-ui/core/Typography';\nimport { SimpleStepperFooter } from './SimpleStepperFooter';\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    end: {\n      padding: theme.spacing(3),\n    },\n  }),\n  { name: 'SimpleStepperStep' },\n);\n\nexport function SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles();\n\n  // The end step is not a part of the stepper\n  // It simply is the final screen with an option to have buttons such as reset or back\n  return end ? (\n    React.createElement('div', { className: classes.end,}\n      , React.createElement(Typography, { variant: \"h6\",}, title)\n      , children\n      , React.createElement(SimpleStepperFooter, { actions: { ...(actions || {}), showNext: false },} )\n    )\n  ) : (\n    React.createElement(MuiStep, { ...muiProps,}\n      , React.createElement(StepLabel, null\n        , React.createElement(Typography, { variant: \"h6\",}, title)\n      )\n      , React.createElement(StepContent, null\n        , children\n        , React.createElement(SimpleStepperFooter, { actions: actions,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport classNames from 'classnames';\nimport React, { } from 'react';\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    status: {\n      fontWeight: 500,\n      '&::before': {\n        width: '0.7em',\n        height: '0.7em',\n        display: 'inline-block',\n        marginRight: 8,\n        borderRadius: '50%',\n        content: '\"\"',\n      },\n    },\n    ok: {\n      '&::before': {\n        backgroundColor: theme.palette.status.ok,\n      },\n    },\n    warning: {\n      '&::before': {\n        backgroundColor: theme.palette.status.warning,\n      },\n    },\n    error: {\n      '&::before': {\n        backgroundColor: theme.palette.status.error,\n      },\n    },\n    pending: {\n      '&::before': {\n        backgroundColor: theme.palette.status.pending,\n      },\n    },\n    running: {\n      '&::before': {\n        backgroundColor: theme.palette.status.running,\n      },\n    },\n    aborted: {\n      '&::before': {\n        backgroundColor: theme.palette.status.aborted,\n      },\n    },\n  }),\n  { name: 'BackstageStatus' },\n);\n\nexport function StatusOK(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.ok),\n      'aria-label': \"Status ok\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusWarning(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.warning),\n      'aria-label': \"Status warning\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusError(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.error),\n      'aria-label': \"Status error\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusPending(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.pending),\n      'aria-label': \"Status pending\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusRunning(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.running),\n      'aria-label': \"Status running\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusAborted(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.aborted),\n      'aria-label': \"Status aborted\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  withStyles,\n  createStyles,\n\n\n} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\n\n\nconst tableTitleCellStyles = (theme) =>\n  createStyles({\n    root: {\n      fontWeight: 'bolder',\n      whiteSpace: 'nowrap',\n      paddingRight: theme.spacing(4),\n      border: '0',\n      verticalAlign: 'top',\n    },\n  });\n\n\n\nconst tableContentCellStyles = {\n  root: {\n    border: '0',\n    verticalAlign: 'top',\n  },\n};\n\n\n\nconst listStyles = (theme) =>\n  createStyles({\n    root: {\n      listStyle: 'none',\n      margin: theme.spacing(0, 0, -1, 0),\n      padding: '0',\n    },\n  });\n\n\n\nconst listItemStyles = (theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(0, 0, 1, 0),\n    },\n    random: {},\n  });\n\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: 'BackstageMetadataTableTitleCell',\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: 'BackstageMetadataTableCell',\n})(TableCell);\n\nexport const MetadataTable = ({\n  dense,\n  children,\n}\n\n\n) => (\n  React.createElement(Table, { size: dense ? 'small' : 'medium',}\n    , React.createElement(TableBody, null, children)\n  )\n);\n\nexport const MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}\n\n\n) => (\n  React.createElement(TableRow, null\n    , title && React.createElement(TitleCell, null, title)\n    , React.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest,}\n      , children\n    )\n  )\n);\n\n\n\n\n\nexport const MetadataList = withStyles(listStyles, {\n  name: 'BackstageMetadataTableList',\n})(({ classes, children }) => (\n  React.createElement('ul', { className: classes.root,}, children)\n));\n\nexport const MetadataListItem = withStyles(listItemStyles, {\n  name: 'BackstageMetadataTableListItem',\n})(({ classes, children }) => (\n  React.createElement('li', { className: classes.root,}, children)\n));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Fragment, } from 'react';\nimport {\n  withStyles,\n  createStyles,\n\n\n} from '@material-ui/core/styles';\nimport startCase from 'lodash/startCase';\n\nimport {\n  MetadataTable,\n  MetadataTableItem,\n  MetadataList,\n  MetadataListItem,\n} from './MetadataTable';\n\n\n\nconst listStyle = createStyles({\n  root: {\n    margin: '0 0',\n    listStyleType: 'none',\n  },\n});\n\n\n\nconst nestedListStyle = (theme) =>\n  createStyles({\n    root: {\n      ...listStyle.root,\n      paddingLeft: theme.spacing(1),\n    },\n  });\n\n\n\n\n// Sub Components\nconst StyledList = withStyles(listStyle, {\n  name: 'BackstageStructuredMetadataTableList',\n})(({ classes, children }) => (\n  React.createElement(MetadataList, { classes: classes,}, children)\n));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: 'BackstageStructuredMetadataTableNestedList',\n})(({ classes, children }) => (\n  React.createElement(MetadataList, { classes: classes,}, children)\n));\n\nfunction renderList(list, nested) {\n  const values = list.map((item, index) => (\n    React.createElement(MetadataListItem, { key: index,}, toValue(item))\n  ));\n  return nested ? (\n    React.createElement(StyledNestedList, null, values)\n  ) : (\n    React.createElement(StyledList, null, values)\n  );\n}\n\nfunction renderMap(\n  map,\n  nested,\n  options,\n) {\n  const values = Object.keys(map).map(key => {\n    const value = toValue(map[key], true);\n    const fmtKey =\n      options && options.titleFormat\n        ? options.titleFormat(key)\n        : startCase(key);\n    return (\n      React.createElement(MetadataListItem, { key: key,}\n        , `${fmtKey}: `\n        , value\n      )\n    );\n  });\n\n  return nested ? (\n    React.createElement(StyledNestedList, null, values)\n  ) : (\n    React.createElement(StyledList, null, values)\n  );\n}\n\nfunction toValue(\n  value,\n  options,\n  nested,\n) {\n  if (React.isValidElement(value)) {\n    return React.createElement(Fragment, null, value);\n  }\n\n  if (typeof value === 'object' && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n\n  if (typeof value === 'boolean') {\n    return React.createElement(Fragment, null, value ? '✅' : '❌');\n  }\n\n  return React.createElement(Fragment, null, value);\n}\nconst ItemValue = ({ value, options }) => (\n  React.createElement(Fragment, null, toValue(value, options))\n);\n\nconst TableItem = ({\n  title,\n  value,\n  options,\n}\n\n\n\n) => {\n  return (\n    React.createElement(MetadataTableItem, {\n      title: \n        options && options.titleFormat\n          ? options.titleFormat(title)\n          : startCase(title)\n      ,}\n    \n      , React.createElement(ItemValue, { value: value, options: options,} )\n    )\n  );\n};\n\nfunction mapToItems(info, options) {\n  return Object.keys(info).map(key => (\n    React.createElement(TableItem, { key: key, title: key, value: info[key], options: options,} )\n  ));\n}\n\n\n\n\n\n\n\nexport function StructuredMetadataTable(props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return React.createElement(MetadataTable, { dense: dense,}, metadataItems);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEqual } from 'lodash';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { useDebouncedEffect } from '@react-hookz/web';\n\nfunction stringify(queryParams) {\n  // Even though these setting don't look nice (e.g. escaped brackets), we should keep\n  // them this way. The current syntax handles all cases, including variable types with\n  // arrays or strings.\n  return qs.stringify(queryParams, {\n    strictNullHandling: true,\n  });\n}\n\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true,\n  });\n}\n\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n\n  return queryParams[stateName];\n}\n\nfunction joinQueryString(\n  queryString,\n  stateName,\n  state,\n) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state,\n  };\n  return stringify(queryParams);\n}\n\n\n\nexport function useQueryParamState(\n  stateName,\n  /** @deprecated Don't configure a custom debouceTime */\n  debounceTime = 250,\n) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName),\n  );\n\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n\n    setQueryParamState(oldState =>\n      isEqual(newState, oldState) ? oldState : newState,\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState,\n      );\n\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime,\n  );\n\n  return [queryParamState, setQueryParamState];\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApiHolder, configApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: 'https://github.com/backstage/backstage/issues',\n  items: [\n    {\n      title: 'Support Not Configured',\n      icon: 'warning',\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: 'Add `app.support` config key',\n          url: 'https://github.com/backstage/backstage/blob/master/app-config.yaml',\n        },\n      ],\n    },\n  ],\n};\n\nexport function useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config?.getOptionalConfig('app.support');\n\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n\n  return {\n    url: supportConfig.getString('url'),\n    items: supportConfig.getConfigArray('items').flatMap(itemConf => ({\n      title: itemConf.getString('title'),\n      icon: itemConf.getOptionalString('icon'),\n      links: (itemConf.getOptionalConfigArray('links') ?? []).flatMap(\n        linkConf => ({\n          url: linkConf.getString('url'),\n          title: linkConf.getString('title'),\n        }),\n      ),\n    })),\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApp } from '@backstage/core-plugin-api';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport React, { } from 'react';\n\n\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? React.createElement(Icon, { ...props,} ) : React.createElement(MuiBrokenImageIcon, { ...props,} );\n}\n\n// Should match the list of overridable system icon keys in @backstage/core-app-api\n/**\n * Broken Image Icon\n *\n * @public\n *\n */\nexport function BrokenImageIcon(props) {\n  return useSystemIcon('brokenImage', props);\n}\n/** @public */\nexport function CatalogIcon(props) {\n  return useSystemIcon('catalog', props);\n}\n/** @public */\nexport function ChatIcon(props) {\n  return useSystemIcon('chat', props);\n}\n/** @public */\nexport function DashboardIcon(props) {\n  return useSystemIcon('dashboard', props);\n}\n/** @public */\nexport function DocsIcon(props) {\n  return useSystemIcon('docs', props);\n}\n/** @public */\nexport function EmailIcon(props) {\n  return useSystemIcon('email', props);\n}\n/** @public */\nexport function GitHubIcon(props) {\n  return useSystemIcon('github', props);\n}\n/** @public */\nexport function GroupIcon(props) {\n  return useSystemIcon('group', props);\n}\n/** @public */\nexport function HelpIcon(props) {\n  return useSystemIcon('help', props);\n}\n/** @public */\nexport function UserIcon(props) {\n  return useSystemIcon('user', props);\n}\n/** @public */\nexport function WarningIcon(props) {\n  return useSystemIcon('warning', props);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApp } from '@backstage/core-plugin-api';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useState } from 'react';\nimport { useSupportConfig } from '../../hooks';\nimport { HelpIcon } from '../../icons';\nimport { Link } from '../Link';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400,\n    },\n  },\n  { name: 'BackstageSupportButton' },\n);\n\nconst SupportIcon = ({ icon }) => {\n  const app = useApp();\n  const Icon = icon ? app.getSystemIcon(icon) ?? HelpIcon : HelpIcon;\n  return React.createElement(Icon, null );\n};\n\nconst SupportLink = ({ link }) => (\n  React.createElement(Link, { to: link.url,}, link.title ?? link.url)\n);\n\nconst SupportListItem = ({ item }) => {\n  return (\n    React.createElement(ListItem, null\n      , React.createElement(ListItemIcon, null\n        , React.createElement(SupportIcon, { icon: item.icon,} )\n      )\n      , React.createElement(ListItemText, {\n        primary: item.title,\n        secondary: item.links?.reduce(\n          (prev, link, idx) => [\n            ...prev,\n            idx > 0 && React.createElement('br', { key: idx,} ),\n            React.createElement(SupportLink, { link: link, key: link.url,} ),\n          ],\n          [],\n        ),}\n      )\n    )\n  );\n};\n\nexport function SupportButton(props) {\n  const { title, children } = props;\n  const { items } = useSupportConfig();\n\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles();\n  const isSmallScreen = useMediaQuery(theme =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const onClickHandler = event => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Box, { display: \"flex\", ml: 1,}\n        , isSmallScreen ? (\n          React.createElement(IconButton, {\n            color: \"primary\",\n            size: \"small\",\n            onClick: onClickHandler,\n            'data-testid': \"support-button\",}\n          \n            , React.createElement(HelpIcon, null )\n          )\n        ) : (\n          React.createElement(Button, {\n            'data-testid': \"support-button\",\n            'aria-label': \"support\",\n            color: \"primary\",\n            onClick: onClickHandler,\n            startIcon: React.createElement(HelpIcon, null ),}\n          , \"Support\"\n\n          )\n        )\n      )\n      , React.createElement(Popover, {\n        'data-testid': \"support-button-popover\",\n        open: popoverOpen,\n        anchorEl: anchorEl,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'right',\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'right',\n        },\n        onClose: popoverCloseHandler,}\n      \n        , React.createElement(List, { className: classes.popoverList,}\n          , title && (\n            React.createElement(ListItem, { alignItems: \"flex-start\",}\n              , React.createElement(Typography, { variant: \"subtitle1\",}, title)\n            )\n          )\n          , React.Children.map(children, (child, i) => (\n            React.createElement(ListItem, { alignItems: \"flex-start\", key: `child-${i}`,}\n              , child\n            )\n          ))\n          , items &&\n            items.map((item, i) => (\n              React.createElement(SupportListItem, { item: item, key: `item-${i}`,} )\n            ))\n        )\n        , React.createElement(DialogActions, null\n          , React.createElement(Button, { color: \"primary\", onClick: popoverCloseHandler,}, \"Close\"\n\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, } from 'react';\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\n\n/** @public **/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56,\n};\n\nexport const makeSidebarConfig = (\n  customSidebarConfig,\n) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter:\n    sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2,\n});\n\n/** @internal **/\n\n\n\n\n\n\nexport const submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200,\n};\n\nexport const makeSidebarSubmenuConfig = (\n  customSubmenuConfig,\n) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig,\n});\n\nexport const SIDEBAR_INTRO_LOCAL_STORAGE =\n  '@backstage/core/sidebar-intro-dismissed';\n\n\n\n\n\n\nexport const SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig,\n});\n\n\n\n\n\n\nexport const SidebarItemWithSubmenuContext =\n  createContext({\n    isHoveredOn: false,\n    setIsHoveredOn: () => {},\n  });\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar LocalStorageKeys; (function (LocalStorageKeys) {\n  const SIDEBAR_PIN_STATE = 'sidebarPinState'; LocalStorageKeys[\"SIDEBAR_PIN_STATE\"] = SIDEBAR_PIN_STATE;\n})(LocalStorageKeys || (LocalStorageKeys = {}));\n\nexport const LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(LocalStorageKeys.SIDEBAR_PIN_STATE) ||\n          'true',\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      LocalStorageKeys.SIDEBAR_PIN_STATE,\n      JSON.stringify(state),\n    );\n  },\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, { createContext, useContext } from 'react';\n\n/**\n * Type of `SidebarPinStateContext`\n *\n * @public @deprecated\n * Use `SidebarPinState` instead.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {},\n  isMobile: false,\n};\n\n/**\n * Contains the state on how the `Sidebar` is rendered\n *\n * @public @deprecated\n * Use `<SidebarPinStateContextProvider>` + `useSidebarPinState()` instead.\n */\nexport const LegacySidebarPinStateContext =\n  createContext(defaultSidebarPinStateContext);\n\nconst VersionedSidebarPinStateContext = createVersionedContext\n\n('sidebar-pin-state-context');\n\n/**\n * Provides state for how the `Sidebar` is rendered\n *\n * @public\n */\nexport const SidebarPinStateProvider = ({\n  children,\n  value,\n}\n\n\n) => (\n  React.createElement(LegacySidebarPinStateContext.Provider, { value: value,}\n    , React.createElement(VersionedSidebarPinStateContext.Provider, {\n      value: createVersionedValueMap({ 1: value }),}\n    \n      , children\n    )\n  )\n);\n\n/**\n * Hook to read and update sidebar pin state, which controls whether or not the\n * sidebar is pinned open.\n *\n * @public\n */\nexport const useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n\n  // Invoked from outside a SidebarPinStateProvider: check for the legacy\n  // context's value, but otherwise return the default.\n  if (versionedPinStateContext === undefined) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return pinStateContext;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { SidebarConfigContext, } from './config';\n\nimport { LocalStorage } from './localStorage';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { SidebarPinStateProvider } from './SidebarPinStateContext';\n\n\n\nconst useStyles = makeStyles\n\n\n(\n  theme => ({\n    root: {\n      width: '100%',\n      transition: 'padding-left 0.1s ease-out',\n      isolation: 'isolate',\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: props =>\n          props.isPinned\n            ? props.sidebarConfig.drawerWidthOpen\n            : props.sidebarConfig.drawerWidthClosed,\n      },\n      [theme.breakpoints.down('xs')]: {\n        paddingBottom: props => props.sidebarConfig.mobileSidebarHeight,\n      },\n    },\n    content: {\n      zIndex: 0,\n      isolation: 'isolate',\n      '&:focus': {\n        outline: 0,\n      },\n    },\n  }),\n  { name: 'BackstageSidebarPage' },\n);\n\n/**\n * Props for SidebarPage\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\nconst PageContext = createContext({\n  content: {\n    contentRef: undefined,\n  },\n});\nexport function SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(() =>\n    LocalStorage.getSidebarPinState(),\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n\n  const contentRef = useRef(null);\n\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef,\n      },\n    }),\n    [contentRef],\n  );\n\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n\n  const isMobile = useMediaQuery(\n    theme => theme.breakpoints.down('xs'),\n    { noSsr: true },\n  );\n\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n\n  const classes = useStyles({ isPinned, sidebarConfig });\n\n  return (\n    React.createElement(SidebarPinStateProvider, {\n      value: {\n        isPinned,\n        toggleSidebarPinState,\n        isMobile,\n      },}\n    \n      , React.createElement(PageContext.Provider, { value: pageContext,}\n        , React.createElement('div', { className: classes.root,}, props.children)\n      )\n    )\n  );\n}\n\n/**\n * This hook provides a react ref to the main content.\n * Allows to set an element as the main content and focus on that component.\n *\n * *Note: If `contentRef` is not set `focusContent` is noop. `Content` component sets this ref automatically*\n *\n * @public\n * @example\n * Focus current content\n * ```tsx\n *  const { focusContent} = useContent();\n * ...\n *  <Button onClick={focusContent}>\n *     focus main content\n *  </Button>\n * ```\n * @example\n * Set the reference to an Html element\n * ```\n *  const { contentRef } = useContent();\n * ...\n *  <article ref={contentRef} tabIndex={-1}>Main Content</article>\n * ```\n */\nexport function useContent() {\n  const { content } = useContext(PageContext);\n\n  const focusContent = useCallback(() => {\n    content?.contentRef?.current?.focus();\n  }, [content]);\n\n  return { focusContent, contentRef: content?.contentRef };\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext, useContext } from 'react';\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\n\n/**\n * Types for the `SidebarContext`\n *\n * @public @deprecated\n * Use `SidebarOpenState` instead.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {},\n};\n\n/**\n * Context whether the `Sidebar` is open\n *\n * @public @deprecated\n * Use `<SidebarOpenStateProvider>` + `useSidebarOpenState()` instead.\n */\nexport const LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext,\n);\n\nconst VersionedSidebarContext = createVersionedContext\n\n('sidebar-open-state-context');\n\n/**\n * Provides context for reading and updating sidebar state.\n *\n * @public\n */\nexport const SidebarOpenStateProvider = ({\n  children,\n  value,\n}\n\n\n) => (\n  React.createElement(LegacySidebarContext.Provider, { value: value,}\n    , React.createElement(VersionedSidebarContext.Provider, {\n      value: createVersionedValueMap({ 1: value }),}\n    \n      , children\n    )\n  )\n);\n\n/**\n * Hook to read and update the sidebar's open state, which controls whether or\n * not the sidebar is open and full-width, or closed and only displaying icons.\n *\n * @public\n */\nexport const useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n\n  // Invoked from outside a SidebarOpenStateProvider: check for the legacy\n  // context's value, but otherwise return the default.\n  if (versionedOpenStateContext === undefined) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return openStateContext;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport BottomNavigationAction, {\n\n} from '@material-ui/core/BottomNavigationAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useSidebarPinState } from '.';\nimport { Link } from '../../components';\nimport { SidebarConfigContext, } from './config';\nimport { MobileSidebarContext } from './MobileSidebar';\n\n/**\n * Props for the `SidebarGroup`\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color,\n    },\n\n    selected: props => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: '-1px',\n    }),\n\n    label: {\n      display: 'none',\n    },\n  }),\n);\n\n/**\n * Returns a MUI `BottomNavigationAction`, which is aware of the current location & the selected item in the `BottomNavigation`,\n * such that it will highlight a `MobileSidebarGroup` either on location change or if the selected item changes.\n *\n * @param props `to`: pathname of link; `value`: index of the selected item\n * @internal\n */\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } =\n    useContext(MobileSidebarContext);\n\n  const onChange = (_, value) => {\n    if (value === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value);\n    }\n  };\n\n  const selected =\n    (value === selectedMenuItemIndex && selectedMenuItemIndex >= 0) ||\n    (!(value === selectedMenuItemIndex) &&\n      !(selectedMenuItemIndex >= 0) &&\n      to === location.pathname);\n\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    React.createElement(BottomNavigationAction, {\n      label: label,\n      icon: icon,\n      component: Link ,\n      to: (to ? to : location.pathname) ,\n      onChange: onChange,\n      value: value,\n      selected: selected,\n      classes: classes,}\n    )\n  );\n};\n\n/**\n * Groups items of the `Sidebar` together.\n *\n * On bigger screens, this won't have any effect at the moment.\n * On small screens, it will add an action to the bottom navigation - either triggering an overlay menu or acting as a link\n *\n * @public\n */\nexport const SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    React.createElement(MobileSidebarGroup, { to: to, label: label, icon: icon, value: value,} )\n  ) : (\n    React.createElement(React.Fragment, null, children)\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\n\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Box from '@material-ui/core/Box';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { orderBy } from 'lodash';\nimport React, { createContext, useEffect, useState, useContext } from 'react';\nimport { useLocation } from 'react-router';\nimport { SidebarOpenStateProvider } from './SidebarOpenStateContext';\nimport { SidebarGroup } from './SidebarGroup';\nimport { SidebarConfigContext, } from './config';\n\n/**\n * Type of `MobileSidebarContext`\n *\n * @internal\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      position: 'fixed',\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: '1px solid #383838',\n    },\n\n    overlay: props => ({\n      background: theme.palette.navigation.background,\n      width: '100%',\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: '0 1 auto',\n      overflow: 'auto',\n    }),\n\n    overlayHeader: {\n      display: 'flex',\n      color: theme.palette.bursts.fontColor,\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: theme.spacing(2, 3),\n    },\n\n    overlayHeaderClose: {\n      color: theme.palette.bursts.fontColor,\n    },\n\n    marginMobileSidebar: props => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n    }),\n  }),\n);\n\nconst sortSidebarGroupsForPriority = (children) =>\n  orderBy(\n    children,\n    ({ props: { priority } }) => (Number.isInteger(priority) ? priority : -1),\n    'desc',\n  );\n\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\n\nconst OverlayMenu = ({\n  children,\n  label = 'Menu',\n  open,\n  onClose,\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n\n  return (\n    React.createElement(Drawer, {\n      anchor: \"bottom\",\n      open: open,\n      onClose: onClose,\n      ModalProps: {\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } },\n      },\n      classes: {\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay,\n      },}\n    \n      , React.createElement(Box, { className: classes.overlayHeader,}\n        , React.createElement(Typography, { variant: \"h3\",}, label)\n        , React.createElement(IconButton, {\n          onClick: onClose,\n          classes: { root: classes.overlayHeaderClose },}\n        \n          , React.createElement(CloseIcon, null )\n        )\n      )\n      , React.createElement(Box, { component: \"nav\",}, children)\n    )\n  );\n};\n\n/**\n * Context on which `SidebarGroup` is currently selected\n *\n * @internal\n */\nexport const MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {},\n});\n\n/**\n * A navigation component for mobile screens, which sticks to the bottom.\n *\n * It alternates the normal sidebar by grouping the `SidebarItems` based on provided `SidebarGroup`s\n * either rendering them as a link or an overlay menu.\n * If no `SidebarGroup`s are provided the sidebar content is wrapped in an default overlay menu.\n *\n * @public\n */\nexport const MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] =\n    useState(-1);\n\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n\n  // Filter children for SidebarGroups\n  //\n  // Directly comparing child.type with SidebarSubmenu will not work with in\n  // combination with react-hot-loader\n  //\n  // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n  let sidebarGroups = useElementFilter(children, elements =>\n    elements.getElements().filter(child => child.type === sidebarGroupType),\n  );\n\n  if (!children) {\n    // If Sidebar has no children the MobileSidebar won't be rendered\n    return null;\n  } else if (!sidebarGroups.length) {\n    // If Sidebar has no SidebarGroup as a children a default\n    // SidebarGroup with the complete Sidebar content will be created\n    sidebarGroups.push(\n      React.createElement(SidebarGroup, { key: \"default_menu\", icon: React.createElement(MenuIcon, null ),}\n        , children\n      ),\n    );\n  } else {\n    // Sort SidebarGroups for the given Priority\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n\n  const shouldShowGroupChildren =\n    selectedMenuItemIndex >= 0 &&\n    !sidebarGroups[selectedMenuItemIndex].props.to;\n\n  return (\n    React.createElement(SidebarOpenStateProvider, { value: { isOpen: true, setOpen: () => {} },}\n      , React.createElement(MobileSidebarContext.Provider, {\n        value: { selectedMenuItemIndex, setSelectedMenuItemIndex },}\n      \n        , React.createElement(OverlayMenu, {\n          label: \n            sidebarGroups[selectedMenuItemIndex] &&\n            (sidebarGroups[selectedMenuItemIndex].props.label )\n          ,\n          open: shouldShowGroupChildren,\n          onClose: () => setSelectedMenuItemIndex(-1),}\n        \n          , sidebarGroups[selectedMenuItemIndex] &&\n            (sidebarGroups[selectedMenuItemIndex].props\n              .children )\n        )\n        , React.createElement(BottomNavigation, {\n          className: classes.root,\n          'data-testid': \"mobile-sidebar-root\",\n          component: \"nav\",}\n        \n          , sidebarGroups\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\n\nimport React, { useState, useContext, useRef } from 'react';\nimport Button from '@material-ui/core/Button';\n\nimport {\n  makeSidebarConfig,\n  makeSidebarSubmenuConfig,\n\n  SidebarConfigContext,\n\n\n\n} from './config';\n\nimport { useContent } from './Page';\nimport { SidebarOpenStateProvider } from './SidebarOpenStateContext';\nimport { useSidebarPinState } from './SidebarPinStateContext';\nimport { MobileSidebar } from './MobileSidebar';\n\n/** @public */\n\nconst useStyles = makeStyles(\n  theme => ({\n    drawer: props => ({\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      position: 'fixed',\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: 'hidden',\n      msOverflowStyle: 'none',\n      scrollbarWidth: 'none',\n      width: props.sidebarConfig.drawerWidthClosed,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest,\n      }),\n      '& > *': {\n        flexShrink: 0,\n      },\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    }),\n    drawerOpen: props => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter,\n      }),\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: 'absolute',\n      zIndex: 1000,\n      transform: 'translateY(-200%)',\n      '&:focus': {\n        transform: 'translateY(5px)',\n      },\n    },\n  }),\n  { name: 'BackstageSidebar' },\n);\n\nvar State; (function (State) {\n  const Closed = 0; State[State[\"Closed\"] = Closed] = \"Closed\";\n  const Idle = Closed + 1; State[State[\"Idle\"] = Idle] = \"Idle\";\n  const Open = Idle + 1; State[State[\"Open\"] = Open] = \"Open\";\n})(State || (State = {}));\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Places the Sidebar & wraps the children providing context weather the `Sidebar` is open or not.\n *\n * Handles & delays hover events for expanding the `Sidebar`\n *\n * @param props `disableExpandOnHover` disables the default hover behaviour;\n * `openDelayMs` & `closeDelayMs` set delay until sidebar will open/close on hover\n * @returns\n * @internal\n */\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children,\n  } = props;\n\n  const classes = useStyles({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    theme => theme.breakpoints.down('md'),\n    { noSsr: true },\n  );\n  const [state, setState] = useState(State.Closed);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state !== State.Open && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Open);\n      }, openDelayMs);\n\n      setState(State.Idle);\n    }\n  };\n\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state === State.Idle) {\n      setState(State.Closed);\n    } else if (state === State.Open) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Closed);\n      }, closeDelayMs);\n    }\n  };\n\n  const isOpen = (state === State.Open && !isSmallScreen) || isPinned;\n\n  /**\n   * Close/Open Sidebar directily without delays. Also toggles `SidebarPinState` to avoid hidden content behind Sidebar.\n   */\n  const setOpen = (open) => {\n    if (open) {\n      setState(State.Open);\n      toggleSidebarPinState();\n    } else {\n      setState(State.Closed);\n      toggleSidebarPinState();\n    }\n  };\n\n  return (\n    React.createElement('nav', { style: {}, 'aria-label': \"sidebar nav\" ,}\n      , React.createElement(A11ySkipSidebar, null )\n      , React.createElement(SidebarOpenStateProvider, { value: { isOpen, setOpen },}\n        , React.createElement('div', {\n          className: classes.root,\n          'data-testid': \"sidebar-root\",\n          onMouseEnter: disableExpandOnHover ? () => {} : handleOpen,\n          onFocus: disableExpandOnHover ? () => {} : handleOpen,\n          onMouseLeave: disableExpandOnHover ? () => {} : handleClose,\n          onBlur: disableExpandOnHover ? () => {} : handleClose,}\n        \n          , React.createElement('div', {\n            className: classnames(classes.drawer, {\n              [classes.drawerOpen]: isOpen,\n            }),}\n          \n            , children\n          )\n        )\n      )\n    )\n  );\n};\n\n/**\n * Passing children into the desktop or mobile sidebar depending on the context\n *\n * @public\n */\nexport const Sidebar = (props) => {\n  const sidebarConfig = makeSidebarConfig(\n    props.sidebarOptions ?? {},\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    props.submenuOptions ?? {},\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    React.createElement(MobileSidebar, null, children)\n  ) : (\n    React.createElement(SidebarConfigContext.Provider, { value: { sidebarConfig, submenuConfig },}\n      , React.createElement(DesktopSidebar, {\n        openDelayMs: openDelayMs,\n        closeDelayMs: closeDelayMs,\n        disableExpandOnHover: disableExpandOnHover,}\n      \n        , children\n      )\n    )\n  );\n};\n\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles({ sidebarConfig });\n\n  if (!contentRef?.current) {\n    return null;\n  }\n  return (\n    React.createElement(Button, {\n      onClick: focusContent,\n      variant: \"contained\",\n      className: classnames(classes.visuallyHidden),}\n    , \"Skip to content\"\n\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { isEqual, isMatch } from 'lodash';\nimport qs from 'qs';\n\nexport function isLocationMatch(currentLocation, toLocation) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search,\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n\n  const matching =\n    isEqual(toLocation.pathname, currentLocation.pathname) &&\n    isMatch(currentQueryParameters, toQueryParameters);\n\n  return matching;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext, useState } from 'react';\nimport { resolvePath, useLocation, useResolvedPath } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '../../components/Link';\n\nimport classnames from 'classnames';\n\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport { SidebarItemWithSubmenuContext } from './config';\nimport { isLocationMatch } from './utils';\n\nconst useStyles = makeStyles(\n  theme => ({\n    item: {\n      height: 48,\n      width: '100%',\n      '&:hover': {\n        background: '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.navigation.color,\n      padding: 20,\n      cursor: 'pointer',\n      position: 'relative',\n      background: 'none',\n      border: 'none',\n    },\n    itemContainer: {\n      width: '100%',\n    },\n    selected: {\n      background: '#6f6f6f',\n      color: '#FFF',\n    },\n    label: {\n      margin: 14,\n      marginLeft: 7,\n      fontSize: 14,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n    dropdownArrow: {\n      position: 'absolute',\n      right: 21,\n    },\n    dropdown: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'end',\n    },\n    dropdownItem: {\n      width: '100%',\n      padding: '10px 0 10px 0',\n      '&:hover': {\n        background: '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n    },\n    textContent: {\n      color: theme.palette.navigation.color,\n      paddingLeft: theme.spacing(4),\n      paddingRight: theme.spacing(1),\n      fontSize: '14px',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n  }),\n  { name: 'BackstageSidebarSubmenuItem' },\n);\n\n/**\n * Clickable item displayed when submenu item is clicked.\n * title: Text content of item\n * to: Path to navigate to when item is clicked\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Item used inside a submenu within the sidebar.\n *\n * @public\n */\nexport const SidebarSubmenuItem = (props) => {\n  const { title, to, icon: Icon, dropdownItems } = props;\n  const classes = useStyles();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath(to ?? '');\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation);\n\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== undefined) {\n    dropdownItems.some(item => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath);\n      return isActive;\n    });\n    return (\n      React.createElement('div', { className: classes.itemContainer,}\n        , React.createElement(Tooltip, { title: title, enterDelay: 500, enterNextDelay: 500,}\n          , React.createElement('button', {\n            onClick: handleClickDropdown,\n            onTouchStart: e => e.stopPropagation(),\n            className: classnames(\n              classes.item,\n              isActive ? classes.selected : undefined,\n            ),}\n          \n            , Icon && React.createElement(Icon, { fontSize: \"small\",} )\n            , React.createElement(Typography, { variant: \"subtitle1\", className: classes.label,}\n              , title\n            )\n            , showDropDown ? (\n              React.createElement(ArrowDropUpIcon, { className: classes.dropdownArrow,} )\n            ) : (\n              React.createElement(ArrowDropDownIcon, { className: classes.dropdownArrow,} )\n            )\n          )\n        )\n        , dropdownItems && showDropDown && (\n          React.createElement('div', { className: classes.dropdown,}\n            , dropdownItems.map((object, key) => (\n              React.createElement(Tooltip, {\n                key: key,\n                title: object.title,\n                enterDelay: 500,\n                enterNextDelay: 500,}\n              \n                , React.createElement(Link, {\n                  to: object.to,\n                  underline: \"none\",\n                  className: classes.dropdownItem,\n                  onClick: closeSubmenu,\n                  onTouchStart: e => e.stopPropagation(),}\n                \n                  , React.createElement(Typography, { className: classes.textContent,}\n                    , object.title\n                  )\n                )\n              )\n            ))\n          )\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement('div', { className: classes.itemContainer,}\n      , React.createElement(Tooltip, { title: title, enterDelay: 500, enterNextDelay: 500,}\n        , React.createElement(Link, {\n          to: to,\n          underline: \"none\",\n          className: classnames(\n            classes.item,\n            isActive ? classes.selected : undefined,\n          ),\n          onClick: closeSubmenu,\n          onTouchStart: e => e.stopPropagation(),}\n        \n          , Icon && React.createElement(Icon, { fontSize: \"small\",} )\n          , React.createElement(Typography, { variant: \"subtitle1\", className: classes.label,}\n            , title\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport classnames from 'classnames';\nimport React, { useContext, useEffect, useState } from 'react';\nimport {\n  SidebarItemWithSubmenuContext,\n  SidebarConfigContext,\n\n} from './config';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n\nconst useStyles = makeStyles\n\n\n(\n  theme => ({\n    root: {\n      zIndex: 1000,\n      position: 'relative',\n      overflow: 'visible',\n      width: theme.spacing(7) + 1,\n    },\n    drawer: props => ({\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      position: 'fixed',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: props.left,\n        transition: theme.transitions.create('margin-left', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest,\n        }),\n      },\n      top: 0,\n      bottom: 0,\n      padding: 0,\n      background: theme.palette.navigation.submenu?.background ?? '#404040',\n      overflowX: 'hidden',\n      msOverflowStyle: 'none',\n      scrollbarWidth: 'none',\n      cursor: 'default',\n      width: props.submenuConfig.drawerWidthClosed,\n      transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n      '& > *': {\n        flexShrink: 0,\n      },\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    }),\n    drawerOpen: props => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        position: 'relative',\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0,\n      },\n    }),\n    title: {\n      fontSize: 24,\n      fontWeight: 500,\n      color: '#FFF',\n      padding: 20,\n      [theme.breakpoints.down('xs')]: {\n        display: 'none',\n      },\n    },\n  }),\n  { name: 'BackstageSidebarSubmenu' },\n);\n\n/**\n * Holds a title for text Header of a sidebar submenu and children\n * components to be rendered inside SidebarSubmenu\n *\n * @public\n */\n\n\n\n\n\n/**\n * Used inside SidebarItem to display an expandable Submenu\n *\n * @public\n */\nexport const SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen\n    ? sidebarConfig.drawerWidthOpen\n    : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles({ left, submenuConfig });\n\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n\n  return (\n    React.createElement('div', {\n      className: classnames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen,\n      }),}\n    \n      , React.createElement(Typography, { variant: \"h5\", className: classes.title,}\n        , props.title\n      )\n      , props.children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    display: 'flex',\n    position: 'relative',\n    width: '100%',\n  },\n  arrow1: {\n    right: '6px',\n    position: 'absolute',\n  },\n});\n\nconst DoubleArrowLeft = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.iconContainer,}\n      , React.createElement('div', { className: classes.arrow1,}\n        , React.createElement(ArrowBackIosIcon, { style: { fontSize: '12px' },} )\n      )\n      , React.createElement('div', null\n        , React.createElement(ArrowBackIosIcon, { style: { fontSize: '12px' },} )\n      )\n    )\n  );\n};\n\nexport default DoubleArrowLeft;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    display: 'flex',\n    position: 'relative',\n    width: '100%',\n  },\n  arrow1: {\n    right: '6px',\n    position: 'absolute',\n  },\n});\n\nconst DoubleArrowRight = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.iconContainer,}\n      , React.createElement('div', { className: classes.arrow1,}\n        , React.createElement(ArrowForwardIosIcon, { style: { fontSize: '12px' },} )\n      )\n      , React.createElement('div', null\n        , React.createElement(ArrowForwardIosIcon, { style: { fontSize: '12px' },} )\n      )\n    )\n  );\n};\n\nexport default DoubleArrowRight;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\n\nimport { makeStyles, styled, } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\n\n\n\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowDropUp from '@material-ui/icons/ArrowDropUp';\nimport ArrowDropDown from '@material-ui/icons/ArrowDropDown';\nimport classnames from 'classnames';\nimport React, {\n\n\n  forwardRef,\n\n\n  useContext,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Link,\n\n  resolvePath,\n  useLocation,\n  useResolvedPath,\n} from 'react-router-dom';\nimport {\n  SidebarConfigContext,\n  SidebarItemWithSubmenuContext,\n\n} from './config';\nimport {\n\n\n  SidebarSubmenu,\n} from '.';\nimport DoubleArrowLeft from './icons/DoubleArrowLeft';\nimport DoubleArrowRight from './icons/DoubleArrowRight';\nimport { isLocationMatch } from './utils';\n\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst makeSidebarStyles = (sidebarConfig) =>\n  makeStyles(\n    theme => ({\n      root: {\n        color: theme.palette.navigation.color,\n        display: 'flex',\n        flexFlow: 'row nowrap',\n        alignItems: 'center',\n        height: 48,\n        cursor: 'pointer',\n      },\n      buttonItem: {\n        background: 'none',\n        border: 'none',\n        width: '100%',\n        margin: 0,\n        padding: 0,\n        textAlign: 'inherit',\n        font: 'inherit',\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: 'center',\n      },\n      open: {\n        [theme.breakpoints.up('sm')]: {\n          width: sidebarConfig.drawerWidthOpen,\n        },\n      },\n      highlightable: {\n        '&:hover': {\n          background:\n            theme.palette.navigation.navItem?.hoverBackground ?? '#404040',\n        },\n      },\n      highlighted: {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground ?? '#404040',\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: 'bold',\n        whiteSpace: 'nowrap',\n        lineHeight: 'auto',\n        flex: '3 1 auto',\n        width: '110px',\n        overflow: 'hidden',\n        'text-overflow': 'ellipsis',\n      },\n      iconContainer: {\n        boxSizing: 'border-box',\n        height: '100%',\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      searchRoot: {\n        marginBottom: 12,\n      },\n      searchField: {\n        color: '#b5b5b5',\n        fontWeight: 'bold',\n        fontSize: theme.typography.fontSize,\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2),\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth,\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: 'center',\n        marginRight: theme.spacing(1),\n      },\n      closedItemIcon: {\n        width: '100%',\n        justifyContent: 'center',\n      },\n      submenuArrow: {\n        display: 'flex',\n      },\n      expandButton: {\n        background: 'none',\n        border: 'none',\n        color: theme.palette.navigation.color,\n        width: '100%',\n        cursor: 'pointer',\n        position: 'relative',\n        height: 48,\n      },\n      arrows: {\n        position: 'absolute',\n        right: 10,\n      },\n      selected: {\n        '&$root': {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor,\n        },\n        '&$closed': {\n          width: sidebarConfig.drawerWidthClosed,\n        },\n        '& $closedItemIcon': {\n          paddingRight: sidebarConfig.selectedIndicatorWidth,\n        },\n        '& $iconContainer': {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth,\n        },\n      },\n    }),\n    { name: 'BackstageSidebarItem' },\n  );\n\n// This is a workaround for this issue https://github.com/mui/material-ui/issues/15511\n// The styling of the `selected` elements doesn't work as expected when using a prop callback.\n// Don't use this pattern unless needed\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig],\n  );\n  return useStyles();\n}\n\n/**\n * Evaluates the routes of the SubmenuItems & nested DropdownItems.\n * The reeveluation is only triggered, if the `locationPathname` changes, as `useElementFilter` uses memorization.\n *\n * @param submenu SidebarSubmenu component\n * @param location Location\n * @returns boolean\n */\nconst useLocationMatch = (\n  submenu,\n  location,\n) =>\n  useElementFilter(\n    submenu.props.children,\n    elements => {\n      let active = false;\n      elements\n        .getElements()\n        .forEach(\n          ({\n            props: { to, dropdownItems },\n          }\n\n) => {\n            if (!active) {\n              if (dropdownItems?.length) {\n                dropdownItems.forEach(\n                  ({ to: _to }) =>\n                    (active =\n                      active || isLocationMatch(location, resolvePath(_to))),\n                );\n                return;\n              }\n              if (to) {\n                active = isLocationMatch(location, resolvePath(to));\n              }\n            }\n          },\n        );\n      return active;\n    },\n    [location.pathname],\n  );\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isButtonItem(\n  props,\n) {\n  return (props ).to === undefined;\n}\n\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\n\n// TODO(Rugvip): Remove this once NavLink is updated in react-router-dom.\n//               This is needed because react-router doesn't handle the path comparison\n//               properly yet, matching for example /foobar with /foo.\nexport const WorkaroundNavLink = React.forwardRef\n\n\n(function WorkaroundNavLinkWithRef(\n  {\n    to,\n    end,\n    style,\n    className,\n    activeStyle,\n    caseSensitive,\n    activeClassName = 'active',\n    'aria-current': ariaCurrentProp = 'page',\n    ...rest\n  },\n  ref,\n) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath(to);\n\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase('en-US');\n    toPathname = toPathname.toLocaleLowerCase('en-US');\n  }\n\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    // This is the behavior that is different from the original NavLink\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n\n  const ariaCurrent = isActive ? ariaCurrentProp : undefined;\n\n  return (\n    React.createElement(Link, {\n      ...rest,\n      to: to,\n      ref: ref,\n      'aria-current': ariaCurrent,\n      style: { ...style, ...(isActive ? activeStyle : undefined) },\n      className: classnames([\n        className,\n        isActive ? activeClassName : undefined,\n      ]),}\n    )\n  );\n});\n\n/**\n * Common component used by SidebarItem & SidebarItemWithSubmenu\n */\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  // XXX (@koroeskohr): unsure this is optimal. But I just really didn't want to have the item component\n  // depend on the current location, and at least have it being optionally forced to selected.\n  // Still waiting on a Q answered to fine tune the implementation\n  const { isOpen } = useSidebarOpenState();\n\n  const divStyle =\n    !isOpen && hasSubmenu ? { display: 'flex', marginLeft: '24px' } : {};\n\n  const displayItemIcon = (\n    React.createElement('div', { style: divStyle,}\n      , React.createElement(Icon, { fontSize: \"small\",} )\n      , !isOpen && hasSubmenu ? React.createElement(ArrowRightIcon, null ) : React.createElement(React.Fragment, null)\n    )\n  );\n\n  const itemIcon = (\n    React.createElement(Badge, {\n      color: \"secondary\",\n      variant: \"dot\",\n      overlap: \"circular\",\n      invisible: !hasNotifications,\n      className: classnames({ [classes.closedItemIcon]: !isOpen }),}\n    \n      , displayItemIcon\n    )\n  );\n\n  const openContent = (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { 'data-testid': \"login-button\", className: classes.iconContainer,}\n        , itemIcon\n      )\n      , text && (\n        React.createElement(Typography, { variant: \"subtitle2\", className: classes.label,}\n          , text\n        )\n      )\n      , React.createElement('div', { className: classes.secondaryAction,}, children)\n    )\n  );\n\n  const content = isOpen ? openContent : itemIcon;\n\n  const childProps = {\n    onClick,\n    className: classnames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight },\n    ),\n  };\n\n  if (isButtonItem(props)) {\n    return (\n      React.createElement('button', { 'aria-label': text, ...childProps, ref: ref,}\n        , content\n      )\n    );\n  }\n\n  return (\n    React.createElement(WorkaroundNavLink, {\n      ...childProps,\n      activeClassName: classes.selected,\n      to: props.to ? props.to : '',\n      ref: ref,\n      'aria-label': text ? text : props.to,\n      ...navLinkProps,}\n    \n      , content\n    )\n  );\n});\n\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}\n\n) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery((theme) =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? (\n        React.createElement(ArrowDropUp, { fontSize: \"small\", className: classes.submenuArrow,} )\n      ) : (\n        React.createElement(ArrowDropDown, { fontSize: \"small\", className: classes.submenuArrow,} )\n      );\n    }\n    return (\n      !isHoveredOn && (\n        React.createElement(ArrowRightIcon, { fontSize: \"small\", className: classes.submenuArrow,} )\n      )\n    );\n  };\n\n  return (\n    React.createElement(SidebarItemWithSubmenuContext.Provider, {\n      value: {\n        isHoveredOn,\n        setIsHoveredOn,\n      },}\n    \n      , React.createElement('div', {\n        'data-testid': \"item-with-submenu\",\n        onMouseLeave: handleMouseLeave,\n        onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n        onMouseEnter: handleMouseEnter,\n        className: classnames(isHoveredOn && classes.highlighted),}\n      \n        , React.createElement(SidebarItemBase, {\n          hasSubmenu: true,\n          className: isActive ? classes.selected : '',\n          ...props,}\n        \n          , arrowIcon()\n        )\n        , isHoveredOn && children\n      )\n    )\n  );\n};\n\n/**\n * Creates a `SidebarItem`\n *\n * If children contain a `SidebarSubmenu` component the `SidebarItem` will have a expandable submenu\n */\nexport const SidebarItem = forwardRef((props, ref) => {\n  // Filter children for SidebarSubmenu components\n  const [submenu] = useElementFilter(props.children, elements =>\n    // Directly comparing child.type with SidebarSubmenu will not work with in\n    // combination with react-hot-loader\n    //\n    // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n    elements.getElements().filter(child => child.type === sidebarSubmenuType),\n  );\n\n  if (submenu) {\n    return (\n      React.createElement(SidebarItemWithSubmenu, { ...props,}\n        , submenu \n      )\n    );\n  }\n\n  return React.createElement(SidebarItemBase, { ...props, ref: ref,} );\n}) ;\n\n\n\n\n\n\n\nexport function SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState('');\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n\n  const search = () => {\n    props.onSearch(input);\n    setInput('');\n  };\n\n  const handleEnter = ev => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      search();\n    }\n  };\n\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n\n  const handleInputClick = (ev) => {\n    // Clicking into the search fields shouldn't navigate to the search page\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n\n  const handleItemClick = (ev) => {\n    // Clicking on the search icon while should execute a query with the current field content\n    search();\n    ev.preventDefault();\n  };\n\n  return (\n    React.createElement('div', { className: classes.searchRoot,}\n      , React.createElement(SidebarItem, {\n        icon: Icon,\n        to: props.to,\n        onClick: handleItemClick,\n        disableHighlight: true,}\n      \n        , React.createElement(TextField, {\n          placeholder: \"Search\",\n          value: input,\n          onClick: handleInputClick,\n          onChange: handleInput,\n          onKeyDown: handleEnter,\n          className: classes.searchContainer,\n          InputProps: {\n            disableUnderline: true,\n            className: classes.searchField,\n          },\n          inputProps: {\n            className: classes.searchFieldHTMLInput,\n          },}\n        )\n      )\n    )\n  );\n}\n\n\n\nexport const SidebarSpace = styled('div')(\n  {\n    flex: 1,\n  },\n  { name: 'BackstageSidebarSpace' },\n) ;\n\n\n\nexport const SidebarSpacer = styled('div')(\n  {\n    height: 8,\n  },\n  { name: 'BackstageSidebarSpacer' },\n) ;\n\n\n\nexport const SidebarDivider = styled('hr')(\n  {\n    height: 1,\n    width: '100%',\n    background: '#383838',\n    border: 'none',\n    margin: '12px 0px',\n  },\n  { name: 'BackstageSidebarDivider' },\n) ;\n\nconst styledScrollbar = (theme) => ({\n  overflowY: 'auto',\n  '&::-webkit-scrollbar': {\n    backgroundColor: theme.palette.background.default,\n    width: '5px',\n    borderRadius: '5px',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: '5px',\n  },\n});\n\nexport const SidebarScrollWrapper = styled('div')(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: '0 1 auto',\n    overflowX: 'hidden',\n    // 5px space to the right of the scrollbar\n    width: 'calc(100% - 5px)',\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: '48px',\n    overflowY: 'hidden',\n    '@media (hover: none)': scrollbarStyles,\n    '&:hover': scrollbarStyles,\n  };\n}) ;\n\n/**\n * A button which allows you to expand the sidebar when clicked.\n * Use optionally to replace sidebar's expand-on-hover feature with expand-on-click.\n *\n * If you are using this you might want to set the `disableExpandOnHover` of the `Sidebar` to `true`.\n *\n * @public\n */\nexport const SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    theme => theme.breakpoints.down('md'),\n    { noSsr: true },\n  );\n\n  if (isSmallScreen) {\n    return null;\n  }\n\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n\n  return (\n    React.createElement('button', {\n      onClick: handleClick,\n      className: classes.expandButton,\n      'aria-label': \"Expand Sidebar\" ,\n      'data-testid': \"sidebar-expand-button\",}\n    \n      , React.createElement('div', { className: classes.arrows,}\n        , isOpen ? React.createElement(DoubleArrowLeft, null ) : React.createElement(DoubleArrowRight, null )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Collapse from '@material-ui/core/Collapse';\nimport Link from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { useContext, useState } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport {\n  SidebarConfigContext,\n\n  SIDEBAR_INTRO_LOCAL_STORAGE,\n} from './config';\nimport { SidebarDivider } from './Items';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    introCard: props => ({\n      color: '#b5b5b5',\n      // XXX (@koroeskohr): should I be using a Mui theme variable?\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: 18,\n      marginBottom: 12,\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding,\n    }),\n    introDismiss: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      alignItems: 'center',\n      marginTop: 12,\n    },\n    introDismissLink: {\n      color: '#dddddd',\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: 4,\n      '&:hover': {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create('color', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest,\n        }),\n      },\n    },\n    introDismissText: {\n      fontSize: '0.7rem',\n      fontWeight: 'bold',\n      textTransform: 'uppercase',\n      letterSpacing: 1,\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: 12,\n    },\n  }),\n  { name: 'BackstageSidebarIntro' },\n);\n\n\n\n\n\n\n/**\n * Closable card with information from Navigation Sidebar\n *\n * @public\n *\n */\n\nexport function IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n\n  return (\n    React.createElement('div', { className: classes.introCard,}\n      , React.createElement(Typography, { variant: \"subtitle2\",}, text)\n      , React.createElement('div', { className: classes.introDismiss,}\n        , React.createElement(Link, {\n          component: \"button\",\n          onClick: handleClose,\n          underline: \"none\",\n          className: classes.introDismissLink,}\n        \n          , React.createElement(CloseIcon, { className: classes.introDismissIcon,} )\n          , React.createElement(Typography, { component: \"span\", className: classes.introDismissText,}, \"Dismiss\"\n\n          )\n        )\n      )\n    )\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return (\n    React.createElement(Collapse, { in: !collapsing, onExited: onDismiss,}\n      , React.createElement(IntroCard, { text: text, onClose: startDismissing,} )\n    )\n  );\n};\n\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (⭐) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText =\n  'And your recently viewed plugins will pop up here!';\n\nexport function SidebarIntro(_props) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false,\n  };\n  const [dismissedIntro, setDismissedIntro] =\n    useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } =\n    dismissedIntro ?? {};\n\n  const dismissStarred = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true,\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true,\n    }));\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , !starredItemsDismissed && (\n        React.createElement(React.Fragment, null\n          , React.createElement(SidebarIntroCard, {\n            text: starredIntroText,\n            onDismiss: dismissStarred,}\n          )\n          , React.createElement(SidebarDivider, null )\n        )\n      )\n      , !recentlyViewedItemsDismissed && (\n        React.createElement(SidebarIntroCard, {\n          text: recentlyViewedIntroText,\n          onDismiss: dismissRecentlyViewed,}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { } from 'react';\nimport { useContent } from '../Sidebar';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: 'pageContent',\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n    },\n    stretch: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n    },\n    noPadding: {\n      padding: 0,\n    },\n  }),\n  { name: 'BackstageContent' },\n);\n\n\n\n\n\n\n\n/**\n * The main content part inside a {@link Page}.\n *\n * @public\n *\n */\n\nexport function Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n\n  const { contentRef } = useContent();\n\n  const classes = useStyles();\n  return (\n    React.createElement('article', {\n      ref: contentRef,\n      tabIndex: -1,\n      ...restProps,\n      className: classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding,\n      }),}\n    \n      , children\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO(blam): Remove this implementation when the Tabs are ready\n// This is just a temporary solution to implementing tabs for now\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport TabUI, { } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport React, { useEffect, useState } from 'react';\n\n/** @public */\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    tabsWrapper: {\n      gridArea: 'pageSubheader',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0,\n    },\n    defaultTab: {\n      padding: theme.spacing(3, 3),\n      ...theme.typography.caption,\n      textTransform: 'uppercase',\n      fontWeight: 'bold',\n      color: theme.palette.text.secondary,\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n    tabRoot: {\n      '&:hover': {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary,\n      },\n    },\n  }),\n  { name: 'BackstageHeaderTabs' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Horizontal Tabs component\n *\n * @public\n *\n */\nexport function HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex ?? 0);\n  const styles = useStyles();\n\n  const handleChange = (_, index) => {\n    if (selectedIndex === undefined) {\n      setSelectedTab(index);\n    }\n    if (onChange) onChange(index);\n  };\n\n  useEffect(() => {\n    if (selectedIndex !== undefined) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n\n  return (\n    React.createElement('div', { className: styles.tabsWrapper,}\n      , React.createElement(Tabs, {\n        selectionFollowsFocus: true,\n        indicatorColor: \"primary\",\n        textColor: \"inherit\",\n        variant: \"scrollable\",\n        scrollButtons: \"auto\",\n        'aria-label': \"scrollable auto tabs example\"   ,\n        onChange: handleChange,\n        value: selectedTab,}\n      \n        , tabs.map((tab, index) => (\n          React.createElement(TabUI, {\n            ...tab.tabProps,\n            'data-testid': `header-tab-${index}`,\n            label: tab.label,\n            key: tab.id,\n            value: index,\n            className: styles.defaultTab,\n            classes: { selected: styles.selected, root: styles.tabRoot },}\n          )\n        ))\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useMemo } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { matchRoutes, useNavigate, useParams, useRoutes } from 'react-router';\nimport { Content } from '../../layout/Content';\nimport { HeaderTabs } from '../../layout/HeaderTabs';\n\n\nexport function useSelectedSubRoute(subRoutes)\n\n\n\n {\n  const params = useParams();\n\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children,\n  }));\n\n  // TODO: remove once react-router updated\n  const sortedRoutes = routes.sort((a, b) =>\n    // remove \"/*\" symbols from path end before comparing\n    b.path.replace(/\\/\\*$/, '').localeCompare(a.path.replace(/\\/\\*$/, '')),\n  );\n\n  const element = useRoutes(sortedRoutes) ?? subRoutes[0].children;\n\n  const [matchedRoute] = matchRoutes(sortedRoutes, `/${params['*']}`) ?? [];\n  const foundIndex = matchedRoute\n    ? subRoutes.findIndex(t => `${t.path}/*` === matchedRoute.route.path)\n    : 0;\n\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: subRoutes[foundIndex] ?? subRoutes[0],\n  };\n}\n\nexport function RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () =>\n      routes.map(t => ({\n        id: t.path,\n        label: t.title,\n        tabProps: t.tabProps,\n      })),\n    [routes],\n  );\n\n  const onTabChange = (tabIndex) =>\n    // Remove trailing /*\n    // And remove leading / for relative navigation\n    // Note! route resolves relative to the position in the React tree,\n    // not relative to current location\n    navigate(routes[tabIndex].path.replace(/\\/\\*$/, '').replace(/^\\//, ''));\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(HeaderTabs, {\n        tabs: headerTabs,\n        selectedIndex: index,\n        onChange: onTabChange,}\n      )\n      , React.createElement(Content, null\n        , React.createElement(Helmet, { title: route.title,} )\n        , element\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { attachComponentData } from '@backstage/core-plugin-api';\nimport React, {\n  Children,\n  Fragment,\n  isValidElement,\n\n\n} from 'react';\nimport { RoutedTabs } from './RoutedTabs';\n\n\n\n\n\n\n\n\n\nconst Route = () => null;\n\n// This causes all mount points that are discovered within this route to use the path of the route itself\nattachComponentData(Route, 'core.gatherMountPoints', true);\n\nexport function createSubRoutesFromChildren(\n  childrenProps,\n) {\n  // Directly comparing child.type with Route will not work with in\n  // combination with react-hot-loader in storybook\n  // https://github.com/gaearon/react-hot-loader/issues/304\n  const routeType = (\n    React.createElement(Route, { path: \"\", title: \"\",}\n      , React.createElement('div', null )\n    )\n  ).type;\n\n  return Children.toArray(childrenProps).flatMap(child => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n\n    if (child.type !== routeType) {\n      throw new Error('Child of TabbedLayout must be an TabbedLayout.Route');\n    }\n\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\n\n/**\n * TabbedLayout is a compound component, which allows you to define a layout for\n * pages using a sub-navigation mechanism.\n *\n * Consists of two parts: TabbedLayout and TabbedLayout.Route\n *\n * @example\n * ```jsx\n * <TabbedLayout>\n *   <TabbedLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </TabbedLayout.Route>\n * </TabbedLayout>\n * ```\n */\nexport function TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n\n  return React.createElement(RoutedTabs, { routes: routes,} );\n}\n\nTabbedLayout.Route = Route;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\nconst useSubvalueCellStyles = makeStyles(\n  theme => ({\n    value: {\n      marginBottom: '6px',\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: 'normal',\n    },\n  }),\n  { name: 'BackstageSubvalueCell' },\n);\n\n\n\n\n\n\nexport function SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { className: classes.value,}, value)\n      , React.createElement('div', { className: classes.subvalue,}, subvalue)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { Select } from '../Select';\n\n\n\n\nconst useFilterStyles = makeStyles(\n  theme => ({\n    root: {\n      height: '100%',\n      width: '315px',\n      display: 'flex',\n      flexDirection: 'column',\n      marginRight: theme.spacing(3),\n    },\n    value: {\n      fontWeight: 'bold',\n      fontSize: 18,\n    },\n    header: {\n      display: 'flex',\n      alignItems: 'center',\n      height: '60px',\n      justifyContent: 'space-between',\n      borderBottom: `1px solid ${theme.palette.grey[500]}`,\n    },\n    filters: {\n      display: 'flex',\n      flexDirection: 'column',\n      '& > *': {\n        marginTop: theme.spacing(2),\n      },\n    },\n  }),\n  { name: 'BackstageTableFilters' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const Filters = (props) => {\n  const classes = useFilterStyles();\n\n  const { onChangeFilters } = props;\n\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters,\n  });\n  const [reset, triggerReset] = useState(false);\n\n  // Trigger re-rendering\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset(el => !el);\n  };\n\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n\n  // As material table doesn't provide a way to add a column filter tab we will make our own filter logic\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement('div', { className: classes.header,}\n        , React.createElement('div', { className: classes.value,}, \"Filters\")\n        , React.createElement(Button, { color: \"primary\", onClick: handleClick,}, \"Clear all\"\n\n        )\n      )\n      , React.createElement('div', { className: classes.filters,}\n        , props.filters?.length &&\n          props.filters.map(filter => (\n            React.createElement(Select, {\n              triggerReset: reset,\n              key: filter.element.label,\n              ...(filter.element ),\n              selected: selectedFilters[filter.element.label],\n              onChange: el =>\n                setSelectedFilters({\n                  ...selectedFilters,\n                  [filter.element.label]: el ,\n                })\n              ,}\n            )\n          ))\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles, useTheme, withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n// Material-table is not using the standard icons available in in material-ui. https://github.com/mbrn/material-table/issues/51\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { isEqual, transform } from 'lodash';\nimport MTable, {\n\n\n\n  MTableBody,\n  MTableHeader,\n  MTableToolbar,\n\n} from '@material-table/core';\nimport React, {\n  forwardRef,\n\n\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\nimport { Filters, } from './Filters';\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => React.createElement(AddBox, { ...props, ref: ref,} )),\n  Check: forwardRef((props, ref) => React.createElement(Check, { ...props, ref: ref,} )),\n  Clear: forwardRef((props, ref) => React.createElement(Clear, { ...props, ref: ref,} )),\n  Delete: forwardRef((props, ref) => React.createElement(DeleteOutline, { ...props, ref: ref,} )),\n  DetailPanel: forwardRef((props, ref) => (\n    React.createElement(ChevronRight, { ...props, ref: ref,} )\n  )),\n  Edit: forwardRef((props, ref) => React.createElement(Edit, { ...props, ref: ref,} )),\n  Export: forwardRef((props, ref) => React.createElement(SaveAlt, { ...props, ref: ref,} )),\n  Filter: forwardRef((props, ref) => React.createElement(FilterList, { ...props, ref: ref,} )),\n  FirstPage: forwardRef((props, ref) => React.createElement(FirstPage, { ...props, ref: ref,} )),\n  LastPage: forwardRef((props, ref) => React.createElement(LastPage, { ...props, ref: ref,} )),\n  NextPage: forwardRef((props, ref) => React.createElement(ChevronRight, { ...props, ref: ref,} )),\n  PreviousPage: forwardRef((props, ref) => (\n    React.createElement(ChevronLeft, { ...props, ref: ref,} )\n  )),\n  ResetSearch: forwardRef((props, ref) => React.createElement(Clear, { ...props, ref: ref,} )),\n  Search: forwardRef((props, ref) => React.createElement(FilterList, { ...props, ref: ref,} )),\n  SortArrow: forwardRef((props, ref) => React.createElement(ArrowUpward, { ...props, ref: ref,} )),\n  ThirdStateCheck: forwardRef((props, ref) => React.createElement(Remove, { ...props, ref: ref,} )),\n  ViewColumn: forwardRef((props, ref) => React.createElement(ViewColumn, { ...props, ref: ref,} )),\n};\n\n// TODO: Material table might already have such a function internally that we can use?\nfunction extractValueByField(data, field) {\n  const path = field.split('.');\n  let value = data[path[0]];\n\n  for (let i = 1; i < path.length; ++i) {\n    if (value === undefined) {\n      return value;\n    }\n\n    const f = path[i];\n    value = value[f];\n  }\n\n  return value;\n}\n\n\n\nconst StyledMTableHeader = withStyles(\n  theme => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      color: (theme ).palette.textSubtle,\n      fontWeight: theme.typography.fontWeightBold,\n      position: 'static',\n      wordBreak: 'normal',\n    },\n  }),\n  { name: 'BackstageTableHeader' },\n)(MTableHeader);\n\n\n\nconst StyledMTableToolbar = withStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5),\n    },\n    title: {\n      '& > h6': {\n        fontWeight: 'bold',\n      },\n    },\n    searchField: {\n      paddingRight: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageTableToolbar' },\n)(MTableToolbar);\n\n/** @public */\n\n\nconst useFilterStyles = makeStyles(\n  () => ({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n    },\n    title: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      whiteSpace: 'nowrap',\n    },\n  }),\n  { name: 'BackstageTableFiltersContainer' },\n);\n\n\n\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: 'flex',\n      alignItems: 'start',\n    },\n  }),\n  { name: 'BackstageTable' },\n);\n\nfunction convertColumns(\n  columns,\n  theme,\n) {\n  return columns.map(column => {\n    const headerStyle = {};\n\n    let cellStyle = column.cellStyle || {};\n\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n\n      if (typeof cellStyle === 'object') {\n        (cellStyle ).fontWeight =\n          theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle \n\n\n\n;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n\n    return {\n      ...column,\n      headerStyle,\n      cellStyle,\n    };\n  });\n}\n\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\n\nconst defaultInitialState = {\n  search: '',\n  filtersOpen: false,\n  filters: {},\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function TableToolbar(toolbarProps\n\n\n\n\n\n\n) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters,\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch],\n  );\n\n  if (hasFilters) {\n    return (\n      React.createElement('div', { className: filtersClasses.root,}\n        , React.createElement('div', { className: filtersClasses.root,}\n          , React.createElement(IconButton, { onClick: toggleFilters, 'aria-label': \"filter list\" ,}\n            , React.createElement(FilterList, null )\n          )\n          , React.createElement(Typography, { className: filtersClasses.title,}, \"Filters (\"\n             , selectedFiltersLength, \")\"\n          )\n        )\n        , React.createElement(StyledMTableToolbar, {\n          ...toolbarProps,\n          ref: toolbarRef,\n          onSearchChanged: onSearchChanged,}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(StyledMTableToolbar, {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged: onSearchChanged,}\n    )\n  );\n}\n\nexport function Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n\n  const theme = useTheme();\n\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen,\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen(v => !v),\n    [setFiltersOpen],\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data );\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters,\n  );\n\n  const MTColumns = convertColumns(columns, theme);\n\n  const [search, setSearch] = useState(calculatedInitialState.search);\n\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters,\n        },\n        defaultInitialState,\n      );\n\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: 'uppercase',\n    },\n  };\n\n  const getFieldByTitle = useCallback(\n    (titleValue) =>\n      columns.find(el => el.title === titleValue)?.field,\n    [columns],\n  );\n\n  useEffect(() => {\n    if (typeof data === 'function') {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data );\n      return;\n    }\n\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = (data ).filter(\n        el =>\n          !!Object.entries(selectedFilters)\n            .filter(([, value]) => !!value.length)\n            .every(([key, filterValue]) => {\n              const fieldValue = extractValueByField(\n                el,\n                getFieldByTitle(key) ,\n              );\n\n              if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n                return fieldValue.some(v => filterValue.includes(v));\n              } else if (Array.isArray(fieldValue)) {\n                return fieldValue.includes(filterValue);\n              } else if (Array.isArray(filterValue)) {\n                return filterValue.includes(fieldValue);\n              }\n\n              return fieldValue === filterValue;\n            }),\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data );\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n\n  const constructFilters = (\n    filterConfig,\n    dataValue,\n  ) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = new Set();\n      const addValue = (value) => {\n        if (value !== undefined && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n\n      if (dataValue) {\n        dataValue.forEach(el => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field) ,\n          );\n\n          if (Array.isArray(value)) {\n            (value ).forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n\n      return distinctValues;\n    };\n\n    const constructSelect = (\n      filter,\n    ) => {\n      return {\n        placeholder: 'All results',\n        label: filter.column,\n        multiple: filter.type === 'multiple-select',\n        items: [...extractDistinctValues(filter.column)].sort().map(value => ({\n          label: value,\n          value,\n        })),\n      };\n    };\n\n    return filterConfig.map(filter => ({\n      type: filter.type,\n      element: constructSelect(filter),\n    }));\n  };\n\n  const hasFilters = !!filters?.length;\n  const Toolbar = useCallback(\n    toolbarProps => {\n      return (\n        React.createElement(TableToolbar, {\n          setSearch: setSearch,\n          hasFilters: hasFilters,\n          selectedFiltersLength: selectedFiltersLength,\n          toggleFilters: toggleFilters,\n          ...toolbarProps,}\n        )\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch],\n  );\n\n  const hasNoRows = typeof data !== 'function' && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    bodyProps => {\n      if (emptyContent && hasNoRows) {\n        return (\n          React.createElement('tbody', null\n            , React.createElement('tr', null\n              , React.createElement('td', { colSpan: columnCount,}, emptyContent)\n            )\n          )\n        );\n      }\n\n      return React.createElement(MTableBody, { ...bodyProps,} );\n    },\n    [hasNoRows, emptyContent, columnCount],\n  );\n\n  return (\n    React.createElement('div', { className: tableClasses.root,}\n      , filtersOpen && data && typeof data !== 'function' && filters?.length && (\n        React.createElement(Filters, {\n          filters: constructFilters(filters, data ),\n          selectedFilters: selectedFilters,\n          onChangeFilters: setSelectedFilters,}\n        )\n      )\n      , React.createElement(MTable, {\n        components: {\n          Header: StyledMTableHeader,\n          Toolbar,\n          Body,\n        },\n        options: { ...defaultOptions, ...options },\n        columns: MTColumns,\n        icons: tableIcons,\n        title: \n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"h5\", component: \"h2\",}\n              , title\n            )\n            , subtitle && (\n              React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}\n                , subtitle\n              )\n            )\n          )\n        ,\n        data: typeof data === 'function' ? data : tableData,\n        style: { width: '100%' },\n        localization: { toolbar: { searchPlaceholder: 'Filter' } },\n        ...restProps,}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport Box from '@material-ui/core/Box';\n\n\n\n\n\n\nexport const TabPanel = (props) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    React.createElement('div', {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      'aria-labelledby': `scrollable-auto-tab-${index}`,\n      ...other,}\n    \n      , value === index && React.createElement(Box, { p: 3,}, children)\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  () => ({\n    root: {\n      color: '#6E6E6E',\n      overflow: 'visible',\n      fontSize: '1.5rem',\n      textAlign: 'center',\n      borderRadius: '50%',\n      backgroundColor: '#E6E6E6',\n      marginLeft: props => (props.isNext ? 'auto' : '0'),\n      marginRight: props => (props.isNext ? '0' : '10px'),\n      '&:hover': {\n        backgroundColor: '#E6E6E6',\n        opacity: '1',\n      },\n    },\n  }),\n  { name: 'BackstageTabIcon' },\n);\n\nexport const StyledIcon = (props) => {\n  const classes = useStyles(props);\n  const { ariaLabel, onClick } = props;\n  return (\n    React.createElement(IconButton, {\n      onClick: onClick,\n      className: classes.root,\n      size: \"small\",\n      disableRipple: true,\n      disableFocusRipple: true,\n      'aria-label': ariaLabel,}\n    \n      , props.children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\n\n\n\n\n\n\n\n\n\n\nconst tabMarginLeft = (isFirstNav, isFirstIndex) => {\n  if (isFirstIndex) {\n    if (isFirstNav) {\n      return '20px';\n    }\n    return '0';\n  }\n  return '40px';\n};\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      textTransform: 'none',\n      height: '64px',\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.pxToRem(13),\n      color: theme.palette.textSubtle,\n      marginLeft: props =>\n        tabMarginLeft(\n          props.isFirstNav ,\n          props.isFirstIndex ,\n        ),\n      width: '130px',\n      minWidth: '130px',\n      '&:hover': {\n        outline: 'none',\n        backgroundColor: 'transparent',\n        color: theme.palette.textSubtle,\n      },\n    },\n  }),\n  { name: 'BackstageTab' },\n);\n\nexport const StyledTab = (props) => {\n  const classes = useStyles(props);\n  const { isFirstNav, isFirstIndex, ...rest } = props;\n  return React.createElement(Tab, { classes: classes, disableRipple: true, ...rest,} );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    indicator: {\n      display: 'flex',\n      justifyContent: 'center',\n      backgroundColor: theme.palette.tabbar.indicator,\n      height: '4px',\n    },\n    flexContainer: {\n      alignItems: 'center',\n    },\n    root: {\n      '&:last-child': {\n        marginLeft: 'auto',\n      },\n    },\n  }),\n  { name: 'BackstageTabBar' },\n);\n\nexport const StyledTabs = (props) => {\n  const classes = useStyles(props);\n  return (\n    React.createElement(Tabs, {\n      classes: classes,\n      ...props,\n      TabIndicatorProps: { children: React.createElement('span', null ) },}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport { chunkArray } from './utils';\nimport useWindowSize from 'react-use/lib/useWindowSize';\n\n/* Import Components */\n\nimport { TabPanel } from './TabPanel';\nimport { StyledIcon } from './TabIcon';\nimport { StyledTab } from './Tab';\nimport { StyledTabs } from './TabBar';\n\n/* Props Types */\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      flexGrow: 1,\n      width: '100%',\n    },\n    styledTabs: {\n      backgroundColor: theme.palette.background.paper,\n    },\n    appbar: {\n      boxShadow: 'none',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: '10px',\n      paddingRight: '10px',\n    },\n  }),\n  { name: 'BackstageTabs' },\n);\n\nexport function Tabs(props) {\n  const { tabs } = props;\n  const classes = useStyles();\n  const [value, setValue] = useState([0, 0]); // [selectedChunkedNavIndex, selectedIndex]\n  const [navIndex, setNavIndex] = useState(0);\n  const [numberOfChunkedElement, setNumberOfChunkedElement] = useState(0);\n  const [chunkedTabs, setChunkedTabs] = useState([[]]);\n  const wrapper = useRef() ;\n\n  const { width } = useWindowSize();\n\n  const handleChange = (_, newValue) => {\n    setValue([navIndex, newValue]);\n  };\n\n  const navigateToPrevChunk = () => {\n    setNavIndex(navIndex - 1);\n  };\n\n  const navigateToNextChunk = () => {\n    setNavIndex(navIndex + 1);\n  };\n\n  const hasNextNavIndex = () => navIndex + 1 < chunkedTabs.length;\n\n  useEffect(() => {\n    // Each time the window is resized we calculate how many tabs we can render given the window width\n    const padding = 20; // The AppBar padding\n\n    const numberOfTabIcons = navIndex === 0 ? 1 : 2;\n    const wrapperWidth =\n      wrapper.current.offsetWidth - padding - numberOfTabIcons * 30;\n    const flattenIndex = value[0] * numberOfChunkedElement + value[1];\n    const newChunkedElementSize = Math.floor(wrapperWidth / 170);\n\n    setNumberOfChunkedElement(newChunkedElementSize);\n    setChunkedTabs(chunkArray(tabs, newChunkedElementSize));\n    setValue([\n      Math.floor(flattenIndex / newChunkedElementSize),\n      flattenIndex % newChunkedElementSize,\n    ]);\n    // eslint-disable-next-line\n  }, [width, tabs]);\n\n  const currentIndex = navIndex === value[0] ? value[1] : false;\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(AppBar, { ref: wrapper, className: classes.appbar, position: \"static\",}\n        , React.createElement('div', null\n          , React.createElement(StyledTabs, {\n            value: currentIndex,\n            onChange: handleChange,\n            selectionFollowsFocus: true,}\n          \n            , navIndex !== 0 && (\n              React.createElement(StyledIcon, {\n                onClick: navigateToPrevChunk,\n                ariaLabel: \"navigate-before\",}\n              \n                , React.createElement(NavigateBeforeIcon, null )\n              )\n            )\n            , chunkedTabs[navIndex].map((tab, index) => (\n              React.createElement(StyledTab, {\n                value: index,\n                isFirstIndex: index === 0,\n                isFirstNav: navIndex === 0,\n                key: index,\n                icon: tab.icon || undefined,\n                label: tab.label || undefined,}\n              )\n            ))\n            , hasNextNavIndex() && (\n              React.createElement(StyledIcon, {\n                isNext: true,\n                onClick: navigateToNextChunk,\n                ariaLabel: \"navigate-next\",}\n              \n                , React.createElement(NavigateNextIcon, null )\n              )\n            )\n          )\n        )\n      )\n      , currentIndex !== false ? (\n        chunkedTabs[navIndex].map((tab, index) => (\n          React.createElement(TabPanel, { key: index, value: index, index: currentIndex,}\n            , tab.content\n          )\n        ))\n      ) : (\n        // Render if the selected tab index is outside the current rendered chunked array\n        React.createElement(TabPanel, {\n          key: \"panel_outside_chunked_array\",\n          value: value[1],\n          index: value[1],}\n        \n          , chunkedTabs[value[0]][value[1]].content\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Sparklines,\n  SparklinesLine,\n\n\n} from 'react-sparklines';\nimport { useTheme } from '@material-ui/core/styles';\n\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum) return undefined;\n  if (lastNum >= 0.9) return theme.palette.status.ok;\n  if (lastNum >= 0.5) return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\n\nexport function TrendLine(\n  props\n,\n) {\n  const theme = useTheme();\n\n  if (!props.data) return null;\n  return (\n    React.createElement(Sparklines, { width: 120, height: 30, min: 0, max: 1, ...props,}\n      , props.title && React.createElement('title', null, props.title)\n      , React.createElement(SparklinesLine, { color: props.color ?? color(props.data, theme),} )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * TODO favoriteable capability\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { } from 'react';\nimport { Helmet } from 'react-helmet';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = (props) =>\n  makeStyles(\n    theme => ({\n      container: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'flex-end',\n        alignItems: 'center',\n        marginBottom: theme.spacing(2),\n        textAlign: props.textAlign,\n      },\n      leftItemsBox: {\n        flex: '1 1 auto',\n        minWidth: 0,\n        overflow: 'visible',\n      },\n      rightItemsBox: {\n        flex: '0 1 auto',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        alignItems: 'center',\n        marginLeft: theme.spacing(1),\n        minWidth: 0,\n        overflow: 'visible',\n      },\n      description: {},\n      title: {\n        display: 'inline-flex',\n        marginBottom: 0,\n      },\n    }),\n    { name: 'BackstageContentHeader' },\n  );\n\n\n\n\n\n\nconst ContentHeaderTitle = ({\n  title = 'Unknown page',\n  className,\n}) => (\n  React.createElement(Typography, {\n    variant: \"h4\",\n    component: \"h2\",\n    className: className,\n    'data-testid': \"header-title\",}\n  \n    , title\n  )\n);\n\n\n\n\n\n\n\n\n/**\n *  A header at the top inside a {@link Content}.\n *\n * @public\n *\n */\n\nexport function ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = undefined,\n    children,\n    textAlign = 'left',\n  } = props;\n  const classes = useStyles({ textAlign })();\n\n  const renderedTitle = TitleComponent ? (\n    TitleComponent\n  ) : (\n    React.createElement(ContentHeaderTitle, { title: title, className: classes.title,} )\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Helmet, { title: title,} )\n      , React.createElement('div', { className: classes.container,}\n        , React.createElement('div', { className: classes.leftItemsBox,}\n          , renderedTitle\n          , description && (\n            React.createElement(Typography, { className: classes.description, variant: \"body2\",}\n              , description\n            )\n          )\n        )\n        , React.createElement('div', { className: classes.rightItemsBox,}, children)\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MicDropSvgUrl from './mic-drop.svg';\n\nconst useStyles = makeStyles(\n  theme => ({\n    micDrop: {\n      maxWidth: '60%',\n      position: 'absolute',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down('xs')]: {\n        maxWidth: '96%',\n        position: 'relative',\n        bottom: 'unset',\n        right: 'unset',\n        margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`,\n      },\n    },\n  }),\n  { name: 'BackstageErrorPageMicDrop' },\n);\n\n\n\nexport const MicDrop = () => {\n  const classes = useStyles();\n  return (\n    React.createElement('img', {\n      src: MicDropSvgUrl,\n      className: classes.micDrop,\n      alt: \"Girl dropping mic from her hands\"     ,}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { useNavigate } from 'react-router';\nimport { Link } from '../../components/Link';\nimport { useSupportConfig } from '../../hooks';\nimport { MicDrop } from './MicDrop';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down('xs')]: {\n        padding: theme.spacing(2),\n      },\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down('xs')]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: 32,\n      },\n    },\n    subtitle: {\n      color: theme.palette.textSubtle,\n    },\n  }),\n  { name: 'BackstageErrorPage' },\n);\n\n/**\n * Error page with status and description\n *\n * @public\n *\n */\nexport function ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n\n  return (\n    React.createElement(Grid, { container: true, spacing: 0, className: classes.container,}\n      , React.createElement(MicDrop, null )\n      , React.createElement(Grid, { item: true, xs: 12, sm: 8, md: 4,}\n        , React.createElement(Typography, {\n          'data-testid': \"error\",\n          variant: \"body1\",\n          className: classes.subtitle,}\n        , \"ERROR \"\n           , status, \": \" , statusMessage\n        )\n        , React.createElement(Typography, { variant: \"body1\", className: classes.subtitle,}\n          , additionalInfo\n        )\n        , React.createElement(Typography, { variant: \"h2\", className: classes.title,}, \"Looks like someone dropped the mic!\"\n\n        )\n        , React.createElement(Typography, { variant: \"h6\",}\n          , React.createElement(Link, { to: \"#\", 'data-testid': \"go-back-link\", onClick: () => navigate(-1),}, \"Go back\"\n\n          ), \"... or please\"\n            , ' '\n          , React.createElement(Link, { to: supportUrl || support.url,}, \"contact support\" ), \" if you think this is a bug.\"\n\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { Fragment } from 'react';\n\n\n\n\n\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      cursor: 'pointer',\n    },\n  },\n  { name: 'BackstageBreadcrumbsClickableText' },\n)(Typography);\n\n/** @public */\n\n\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      color: 'inherit',\n    },\n  },\n  { name: 'BackstageBreadcrumbsStyledBox' },\n)(Box);\n\n/**\n * Breadcrumbs component to show navigation hierarchical structure\n *\n * @public\n *\n */\nexport function Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null,\n  );\n\n  const childrenArray = React.Children.toArray(children);\n\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length\n    ? expandablePages.pop()\n    : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    React.createElement(Fragment, null\n      , React.createElement(MaterialBreadcrumbs, { 'aria-label': \"breadcrumb\", ...restProps,}\n        , childrenArray.length > 1 && React.createElement(StyledBox, { clone: true,}, firstPage)\n        , childrenArray.length > 2 && React.createElement(StyledBox, { clone: true,}, secondPage)\n        , hasHiddenBreadcrumbs && (\n          React.createElement(ClickableText, { onClick: handleClick,}, \"...\")\n        )\n        , React.createElement(Box, { style: { fontStyle: 'italic' },}, currentPage)\n      )\n      , React.createElement(Popover, {\n        open: open,\n        anchorEl: anchorEl,\n        onClose: handleClose,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'left',\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'left',\n        },}\n      \n        , React.createElement(List, null\n          , expandablePages.map((pageLink, index) => (\n            React.createElement(ListItem, { key: index, button: true,}\n              , React.createElement(StyledBox, { clone: true,}, pageLink)\n            )\n          ))\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport React, { } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Link } from '../../components/Link';\nimport { Breadcrumbs } from '../Breadcrumbs';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    header: {\n      gridArea: 'pageHeader',\n      padding: theme.spacing(3),\n      width: '100%',\n      boxShadow: theme.shadows[4],\n      position: 'relative',\n      zIndex: 100,\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      [theme.breakpoints.down('sm')]: {\n        flexWrap: 'wrap',\n      },\n    },\n    leftItemsBox: {\n      maxWidth: '100%',\n      flexGrow: 1,\n    },\n    rightItemsBox: {\n      width: 'auto',\n    },\n    title: {\n      color: theme.palette.bursts.fontColor,\n      wordBreak: 'break-word',\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0,\n    },\n    subtitle: {\n      color: theme.palette.bursts.fontColor,\n      opacity: 0.8,\n      display: 'inline-block', // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: '75ch',\n    },\n    type: {\n      textTransform: 'uppercase',\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.palette.bursts.fontColor,\n    },\n    breadcrumb: {\n      color: theme.palette.bursts.fontColor,\n    },\n    breadcrumbType: {\n      fontSize: 'inherit',\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3),\n    },\n    breadcrumbTitle: {\n      fontSize: 'inherit',\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageHeader' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle,\n}) => {\n  if (!type) {\n    return null;\n  }\n\n  if (!typeLink) {\n    return React.createElement(Typography, { className: classes.type,}, type);\n  }\n\n  return (\n    React.createElement(Breadcrumbs, { className: classes.breadcrumb,}\n      , React.createElement(Link, { to: typeLink,}, type)\n      , React.createElement(Typography, null, pageTitle)\n    )\n  );\n};\n\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const FinalTitle = (\n    React.createElement(Typography, { className: classes.title, variant: \"h1\",}\n      , pageTitle\n    )\n  );\n\n  if (!tooltip) {\n    return FinalTitle;\n  }\n\n  return (\n    React.createElement(Tooltip, { title: tooltip, placement: \"top-start\",}\n      , FinalTitle\n    )\n  );\n};\n\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n\n  if (typeof subtitle !== 'string') {\n    return React.createElement(React.Fragment, null, subtitle);\n  }\n\n  return (\n    React.createElement(Typography, {\n      className: classes.subtitle,\n      variant: \"subtitle2\",\n      component: \"span\",}\n    \n      , subtitle\n    )\n  );\n};\n/**\n * Backstage main header with abstract color background in multiple variants\n *\n * @public\n *\n */\nexport function Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink,\n  } = props;\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString('app.title') || 'Backstage';\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Helmet, { titleTemplate: titleTemplate, defaultTitle: defaultTitle,} )\n      , React.createElement('header', { style: style, className: classes.header,}\n        , React.createElement(Box, { className: classes.leftItemsBox,}\n          , React.createElement(TypeFragment, {\n            classes: classes,\n            type: type,\n            typeLink: typeLink,\n            pageTitle: pageTitle,}\n          )\n          , React.createElement(TitleFragment, {\n            classes: classes,\n            pageTitle: pageTitle,\n            tooltip: tooltip,}\n          )\n          , React.createElement(SubtitleFragment, { classes: classes, subtitle: subtitle,} )\n        )\n        , React.createElement(Grid, { container: true, className: classes.rightItemsBox, spacing: 4,}\n          , children\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { Link } from '../../components/Link';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      textAlign: 'left',\n    },\n    label: {\n      color: theme.palette.common.white,\n      fontWeight: 'bold',\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1,\n    },\n    value: {\n      color: 'rgba(255, 255, 255, 0.8)',\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1,\n    },\n  }),\n  { name: 'BackstageHeaderLabel' },\n);\n\n\n\n\n\n\nconst HeaderLabelContent = ({ value, className }) => (\n  React.createElement(Typography, { className: className,}, value)\n);\n\n\n\n\n\n\n\n/**\n * Additional label to main {@link Header}\n *\n * @public\n *\n */\nexport function HeaderLabel(props) {\n  const { label, value, url } = props;\n  const classes = useStyles();\n  const content = (\n    React.createElement(HeaderLabelContent, {\n      className: classes.value,\n      value: value || '<Unknown>',}\n    )\n  );\n  return (\n    React.createElement(Grid, { item: true,}\n      , React.createElement('span', { className: classes.root,}\n        , React.createElement(Typography, { className: classes.label,}, label)\n        , url ? React.createElement(Link, { to: url,}, content) : content\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { HeaderLabel } from '../HeaderLabel';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\nconst timeFormat = {\n  hour: '2-digit',\n  minute: '2-digit',\n};\n\n\n\n\n\n\nfunction getTimes(configApi) {\n  const d = new Date();\n  const lang = window.navigator.language;\n\n  const clocks = [];\n\n  if (!configApi.has('homepage.clocks')) {\n    return clocks;\n  }\n\n  const clockConfigs = configApi.getConfigArray('homepage.clocks');\n\n  for (const clock of clockConfigs) {\n    if (clock.has('label') && clock.has('timezone')) {\n      let label = clock.getString('label');\n\n      const options = {\n        timeZone: clock.getString('timezone'),\n        ...timeFormat,\n      };\n\n      try {\n        new Date().toLocaleString(lang, options);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `The timezone ${options.timeZone} is invalid. Defaulting to GMT`,\n        );\n        options.timeZone = 'GMT';\n        label = 'GMT';\n      }\n\n      const time = d.toLocaleTimeString(lang, options);\n      clocks.push({ time, label });\n    }\n  }\n  return clocks;\n}\n\n/**\n * Please use the HeaderWorldClock in the home plugin\n *\n * @public\n * @deprecated in favor of the HeaderWorldClock which is found in the to home plugin\n */\nexport function HomepageTimer(_props) {\n  const configApi = useApi(configApiRef);\n\n  const defaultTimes = [];\n  const [clocks, setTimes] = React.useState(defaultTimes);\n\n  React.useEffect(() => {\n    setTimes(getTimes(configApi));\n\n    const intervalId = setInterval(() => {\n      setTimes(getTimes(configApi));\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [configApi]);\n\n  if (clocks.length !== 0) {\n    return (\n      React.createElement(React.Fragment, null\n        , clocks.map(clock => (\n          React.createElement(HeaderLabel, {\n            label: clock.label,\n            value: clock.time,\n            key: clock.label,}\n          )\n        ))\n      )\n    );\n  }\n  return null;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createStyles, makeStyles, } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\n\n/** @public */\n\n\nconst styles = (theme) =>\n  createStyles({\n    root: {\n      color: theme.palette.common.white,\n      padding: theme.spacing(2, 2, 3),\n      backgroundImage: theme.palette.bursts.gradient.linear,\n      backgroundPosition: 0,\n      backgroundSize: 'inherit',\n    },\n  });\n\nconst useStyles = makeStyles(styles, { name: 'BackstageItemCardHeader' });\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A simple card header, rendering a default look for \"item cards\" - cards that\n * are arranged in a grid for users to select among several options.\n *\n * This component expects to be placed within a MUI <CardMedia>.\n *\n * Styles for the header can be overridden using the `classes` prop, e.g.:\n *\n * `<ItemCardHeader title=\"Hello\" classes={{ root: myClassName }} />`\n *\n * @public\n */\nexport function ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles(props);\n  return (\n    React.createElement('div', { className: classes.root,}\n      , subtitle && (\n        React.createElement(Typography, { variant: \"subtitle2\", component: \"h3\",}\n          , subtitle\n        )\n      )\n      , title && (\n        React.createElement(Typography, { variant: \"h6\", component: \"h4\",}\n          , title\n        )\n      )\n      , children\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Chip from '@material-ui/core/Chip';\nimport React, { } from 'react';\nimport { Button } from '../../components';\nimport { ItemCardHeader } from './ItemCardHeader';\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This card type has been deprecated. Instead use plain MUI Card and helpers\n * where appropriate.\n *\n * ```\n *   <Card>\n *     <CardMedia>\n *       <ItemCardHeader title=\"My Card\" subtitle=\"neat!\" />\n *     </CardMedia>\n *     <CardContent>\n *        Some text\n *     </CardContent>\n *     <CardActions>\n *       <Button color=\"primary\" to=\"https://backstage.io\">\n *         Get Started\n *       </Button>\n *     </CardActions>\n *   </Card>\n * ```\n *\n * @deprecated Use plain MUI `<Card>` and composable helpers instead.\n * @see https://material-ui.com/components/cards/\n */\nexport function ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } =\n    props;\n  return (\n    React.createElement(Card, null\n      , React.createElement(CardMedia, null\n        , React.createElement(ItemCardHeader, { title: title, subtitle: subtitle || type,} )\n      )\n      , React.createElement(CardContent, null\n        , tags?.length ? (\n          React.createElement(Box, null\n            , tags.map((tag, i) => (\n              React.createElement(Chip, { size: \"small\", label: tag, key: i,} )\n            ))\n          )\n        ) : null\n        , description\n      )\n      , React.createElement(CardActions, null\n        , !href && (\n          React.createElement(Button, { to: \"#\", onClick: onClick, color: \"primary\",}\n            , label\n          )\n        )\n        , href && (\n          React.createElement(Button, { to: href, color: \"primary\",}\n            , label\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createStyles,\n  makeStyles,\n\n\n} from '@material-ui/core/styles';\nimport React from 'react';\n\n/** @public */\n\n\nconst styles = (theme) =>\n  createStyles({\n    root: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fill, minmax(22em, 1fr))',\n      gridAutoRows: '1fr',\n      gridGap: theme.spacing(2),\n    },\n  });\n\nconst useStyles = makeStyles(styles, { name: 'BackstageItemCardGrid' });\n\n/** @public */\n\n\n\n\n\n\n\n/**\n * A default grid to use when arranging \"item cards\" - cards that let users\n * select among several options.\n *\n * The immediate children are expected to be MUI Card components.\n *\n * Styles for the grid can be overridden using the `classes` prop, e.g.:\n *\n * `<ItemCardGrid title=\"Hello\" classes={{ root: myClassName }} />`\n *\n * This can be useful for e.g. overriding gridTemplateColumns to adapt the\n * minimum size of the cells to fit the content better.\n *\n * @public\n */\nexport function ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return (\n    React.createElement('div', { className: classes.root, ...otherProps,}\n      , children\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport { useSidebarPinState } from '../Sidebar/SidebarPinStateContext';\n\n\n\nconst useStyles = makeStyles(\n  () => ({\n    root: ({ isMobile }) => ({\n      display: 'grid',\n      gridTemplateAreas:\n        \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: 'max-content auto 1fr',\n      gridTemplateColumns: 'auto 1fr auto',\n      height: isMobile ? '100%' : '100vh',\n      overflowY: 'auto',\n    }),\n  }),\n  { name: 'BackstagePage' },\n);\n\n\n\n\n\n\nexport function Page(props) {\n  const { themeId, children } = props;\n  const { isMobile } = useSidebarPinState();\n  const classes = useStyles({ isMobile });\n  return (\n    React.createElement(ThemeProvider, {\n      theme: (baseTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId }),\n      }),}\n    \n      , React.createElement('main', { className: classes.root,}, children)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\nimport { Header } from '../Header';\nimport { Page } from './Page';\n\n\n\n\n\nexport function PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return (\n    React.createElement(Page, { themeId: themeId,}\n      , React.createElement(Header, { ...restProps,} )\n      , children\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { z } from 'zod';\n\nexport const proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional(),\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal('user'),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string()),\n    }),\n  }),\n});\n\n/**\n * Generic session information for proxied sign-in providers, e.g. common\n * reverse authenticating proxy implementations.\n *\n * @public\n */\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\nimport { proxiedSessionSchema } from './types';\n\nexport const DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1000,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1000,\n} ;\n\n// When the token expires, with some margin\nexport function tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n\n  const [_header, rawPayload, _signature] = jwtToken.split('.');\n  const payload = JSON.parse(atob(rawPayload));\n  if (typeof payload.exp !== 'number') {\n    return fallback;\n  }\n\n  return new Date(payload.exp * 1000 - DEFAULTS.tokenExpiryMarginMillis);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An identity API that gets the user auth information solely based on a\n * provider's `/refresh` endpoint.\n */\nexport class ProxiedSignInIdentity  {\n    options;\n    abortController;\n   state;\n\n  constructor(options) {\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: 'empty' };\n  }\n\n  async start() {\n    // Try to make a first fetch, bubble up any errors to the caller\n    await this.getSessionAsync();\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n\n    return match[3];\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token,\n    };\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    this.abortController.abort();\n  }\n\n  getSessionSync() {\n    if (this.state.type === 'active') {\n      return this.state.session;\n    } else if (this.state.type === 'fetching' && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error('No session available. Try reloading your browser page.');\n  }\n\n  async getSessionAsync() {\n    if (this.state.type === 'fetching') {\n      return this.state.promise;\n    } else if (\n      this.state.type === 'active' &&\n      new Date() < this.state.expiresAt\n    ) {\n      return this.state.session;\n    }\n\n    const previous =\n      this.state.type === 'active' ? this.state.session : undefined;\n\n    const promise = this.fetchSession().then(\n      session => {\n        this.state = {\n          type: 'active',\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token),\n        };\n        return session;\n      },\n      error => {\n        this.state = {\n          type: 'failed',\n          error,\n        };\n        throw error;\n      },\n    );\n\n    this.state = {\n      type: 'fetching',\n      promise,\n      previous,\n    };\n\n    return promise;\n  }\n\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl('auth');\n\n    // Note that we do not use the fetchApi here, since this all happens before\n    // sign-in completes so there can be no automatic token injection and\n    // similar.\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: { 'x-requested-with': 'XMLHttpRequest' },\n        credentials: 'include',\n      },\n    );\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  discoveryApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport React from 'react';\nimport { useAsync, useMountEffect } from '@react-hookz/web';\nimport { ErrorPanel } from '../../components/ErrorPanel';\nimport { Progress } from '../../components/Progress';\nimport { ProxiedSignInIdentity } from './ProxiedSignInIdentity';\n\n/**\n * Props for {@link ProxiedSignInPage}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * A sign-in page that has no user interface of its own. Instead, it relies on\n * sign-in being performed by a reverse authenticating proxy that Backstage is\n * deployed behind, and leverages its session handling.\n *\n * @remarks\n *\n * This sign-in page is useful when you are using products such as Google\n * Identity-Aware Proxy or AWS Application Load Balancer or similar, to front\n * your Backstage installation. This sign-in page implementation will silently\n * and regularly punch through the proxy to the auth backend to refresh your\n * frontend session information, without requiring user interaction.\n *\n * @public\n */\nexport const ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n    });\n\n    await identity.start();\n\n    props.onSignInSuccess(identity);\n  });\n\n  useMountEffect(execute);\n\n  if (status === 'loading') {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return (\n      React.createElement(ErrorPanel, {\n        title: \"You do not appear to be signed in. Please try reloading the browser page.\"             ,\n        error: error,}\n      )\n    );\n  }\n\n  return null;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\n\n\n\nexport const useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: 'none',\n    },\n    item: {\n      display: 'flex',\n      flexDirection: 'column',\n      width: '100%',\n      maxWidth: '400px',\n      margin: 0,\n      padding: 0,\n    },\n  },\n  { name: 'BackstageSignInPage' },\n);\n\nexport const GridItem = ({ children }) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Grid, { component: \"li\", item: true, classes: classes,}\n      , children\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class GuestUserIdentity  {\n  getUserId() {\n    return 'guest';\n  }\n\n  async getIdToken() {\n    return undefined;\n  }\n\n  getProfile() {\n    return {\n      email: 'guest@example.com',\n      displayName: 'Guest',\n    };\n  }\n\n  async getProfileInfo() {\n    return {\n      email: 'guest@example.com',\n      displayName: 'Guest',\n    };\n  }\n\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: 'user',\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef],\n    };\n  }\n\n  async getCredentials() {\n    return {};\n  }\n\n  async signOut() {}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split('.');\n  return JSON.parse(atob(payload));\n}\n\n\n\n\n\n\n\n\n/** @internal */\nexport class LegacyUserIdentity  {\n   constructor(  result) {;this.result = result;}\n\n  getUserId() {\n    return this.result.userId;\n  }\n\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n\n  async getIdToken() {\n    return this.result.getIdToken?.();\n  }\n\n  getProfile() {\n    return this.result.profile;\n  }\n\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: 'user',\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef],\n      };\n    }\n\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: 'user',\n      userEntityRef: sub,\n      ownershipEntityRefs: ent ?? [],\n    };\n  }\n\n  async getCredentials() {\n    const token = await this.result.getIdToken?.();\n    return { token };\n  }\n\n  async signOut() {\n    return this.result.signOut?.();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { GuestUserIdentity } from './GuestUserIdentity';\nimport { LegacyUserIdentity } from './LegacyUserIdentity';\n\n// TODO(Rugvip): This and the other IdentityApi implementations still implement\n//               the old removed methods. This is to allow for backwards compatibility\n//               with old plugins that still consume this API. We will leave these in\n//               place as a hidden compatibility for a couple of months.\n//               The AppIdentityProxy warns in case any of these methods are called.\n\n/**\n * An implementation of the IdentityApi that is constructed using\n * various backstage user identity representations.\n *\n * @public\n */\nexport class UserIdentity  {\n   profilePromise;\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options\n\n\n\n\n\n\n\n\n\n\n) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n\n   constructor(\n      identity,\n      authApi\n\n,\n      profile,\n  ) {;this.identity = identity;this.authApi = authApi;this.profile = profile;}\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n\n    return match[3];\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        'The identity API does not implement synchronous profile fetching, use getProfileInfo() instead',\n      );\n    }\n    return this.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n\n    try {\n      this.profilePromise = this.authApi.getProfile() ;\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = undefined;\n      throw ex;\n    }\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { InfoCard } from '../InfoCard/InfoCard';\n\n\n\n\n\n\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\nimport { GridItem } from './styles';\nimport { ForwardedError } from '@backstage/errors';\nimport { UserIdentity } from './UserIdentity';\n\nconst Component = ({ config, onSignInSuccess }) => {\n  const { apiRef, title, message } = config ;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const handleLogin = async () => {\n    try {\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true,\n      });\n      if (!identityResponse) {\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`,\n        );\n      }\n\n      const profile = await authApi.getProfile();\n\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi,\n        }),\n      );\n    } catch (error) {\n      errorApi.post(new ForwardedError('Login failed', error));\n    }\n  };\n\n  return (\n    React.createElement(GridItem, null\n      , React.createElement(InfoCard, {\n        variant: \"fullHeight\",\n        title: title,\n        actions: \n          React.createElement(Button, { color: \"primary\", variant: \"outlined\", onClick: handleLogin,}, \"Sign In\"\n\n          )\n        ,}\n      \n        , React.createElement(Typography, { variant: \"body1\",}, message)\n      )\n    )\n  );\n};\n\nconst loader = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true,\n  });\n\n  if (!identityResponse) {\n    return undefined;\n  }\n\n  const profile = await authApi.getProfile();\n\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi,\n  });\n};\n\nexport const commonProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport { GridItem } from './styles';\n\nimport { GuestUserIdentity } from './GuestUserIdentity';\n\nconst Component = ({ onSignInSuccess }) => (\n  React.createElement(GridItem, null\n    , React.createElement(InfoCard, {\n      title: \"Guest\",\n      variant: \"fullHeight\",\n      actions: \n        React.createElement(Button, {\n          color: \"primary\",\n          variant: \"outlined\",\n          onClick: () => onSignInSuccess(new GuestUserIdentity()),}\n        , \"Enter\"\n\n        )\n      ,}\n    \n      , React.createElement(Typography, { variant: \"body1\",}, \"Enter as a Guest User.\"\n\n        , React.createElement('br', null ), \"You will not have a verified identity,\"\n\n        , React.createElement('br', null ), \"meaning some features might be unavailable.\"\n\n      )\n    )\n  )\n);\n\nconst loader = async () => {\n  return new GuestUserIdentity();\n};\n\nexport const guestProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useForm, } from 'react-hook-form';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\nimport { InfoCard } from '../InfoCard/InfoCard';\n\nimport { GridItem } from './styles';\nimport { UserIdentity } from './UserIdentity';\n\n// accept base64url format according to RFC7515 (https://tools.ietf.org/html/rfc7515#section-3)\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\n\n/** @public */\n\n\nconst useFormStyles = makeStyles(\n  theme => ({\n    form: {\n      display: 'flex',\n      flexFlow: 'column nowrap',\n    },\n    button: {\n      alignSelf: 'center',\n      marginTop: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageCustomProvider' },\n);\n\n\n\n\n\n\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest,\n  };\n};\n\nconst Component = ({ onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: 'onChange',\n  });\n\n  const { errors } = formState;\n\n  const handleResult = ({ userId }) => {\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        profile: {\n          email: `${userId}@example.com`,\n        },\n      }),\n    );\n  };\n\n  return (\n    React.createElement(GridItem, null\n      , React.createElement(InfoCard, { title: \"Custom User\" , variant: \"fullHeight\",}\n        , React.createElement(Typography, { variant: \"body1\",}, \"Enter your own User ID and credentials.\"\n\n          , React.createElement('br', null ), \"This selection will not be stored.\"\n\n        )\n\n        , React.createElement('form', { className: classes.form, onSubmit: handleSubmit(handleResult),}\n          , React.createElement(FormControl, null\n            , React.createElement(TextField, {\n              ...asInputRef(register('userId', { required: true })),\n              label: \"User ID\" ,\n              margin: \"normal\",\n              error: Boolean(errors.userId),}\n            )\n            , errors.userId && (\n              React.createElement(FormHelperText, { error: true,}, errors.userId.message)\n            )\n          )\n          , React.createElement(FormControl, null\n            , React.createElement(TextField, {\n              ...asInputRef(\n                register('idToken', {\n                  required: false,\n                  validate: token =>\n                    !token ||\n                    ID_TOKEN_REGEX.test(token) ||\n                    'Token is not a valid OpenID Connect JWT Token',\n                }),\n              ),\n              label: \"ID Token (optional)\"  ,\n              margin: \"normal\",\n              autoComplete: \"off\",\n              error: Boolean(errors.idToken),}\n            )\n            , errors.idToken && (\n              React.createElement(FormHelperText, { error: true,}, errors.idToken.message)\n            )\n          )\n          , React.createElement(Button, {\n            type: \"submit\",\n            color: \"primary\",\n            variant: \"outlined\",\n            className: classes.button,\n            disabled: !formState?.isDirty || !isEmpty(errors),}\n          , \"Continue\"\n\n          )\n        )\n      )\n    )\n  );\n};\n\n// Custom provider doesn't store credentials\nconst loader = async () => undefined;\n\nexport const customProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useLayoutEffect, useState, useMemo, useCallback } from 'react';\nimport {\n\n  useApi,\n  useApiHolder,\n  errorApiRef,\n\n} from '@backstage/core-plugin-api';\n\n\n\n\n\nimport { commonProvider } from './commonProvider';\nimport { guestProvider } from './guestProvider';\nimport { customProvider } from './customProvider';\nimport { IdentityApiSignOutProxy } from './IdentityApiSignOutProxy';\n\nconst PROVIDER_STORAGE_KEY = '@backstage/core:SignInPage:provider';\n\n\n\n\n\n\n\n\n\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider,\n};\n\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`,\n    );\n}\n\nexport function getSignInProviders(\n  identityProviders,\n) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === 'string') {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n\n        return acc;\n      }\n\n      const { id } = config ;\n      validateIDs(id, acc);\n\n      acc[id] = { components: signInProviders.common, id, config };\n\n      return acc;\n    },\n    {},\n  );\n\n  return providers;\n}\n\nexport const useSignInProviders = (\n  providers,\n  onSignInSuccess,\n) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n\n  // This decorates the result with sign out logic from this hook\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await identityApi.signOut?.();\n          },\n        }),\n      );\n    },\n    [onSignInSuccess],\n  );\n\n  // In this effect we check if the user has already selected an existing login\n  // provider, and in that case try to load an existing session for the provider.\n  useLayoutEffect(() => {\n    if (!loading) {\n      return undefined;\n    }\n\n    // We can't use storageApi here, as it might have a dependency on the IdentityApi\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY,\n    ) ;\n\n    // No provider selected, let the user pick one\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return undefined;\n    }\n\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return undefined;\n    }\n\n    let didCancel = false;\n\n    provider.components\n      .loader(apiHolder, provider.config?.apiRef)\n      .then(result => {\n        if (didCancel) {\n          return;\n        }\n        if (result) {\n          handleWrappedResult(result);\n        } else {\n          setLoading(false);\n        }\n      })\n      .catch(error => {\n        if (didCancel) {\n          return;\n        }\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        errorApi.post(error);\n        setLoading(false);\n      });\n\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult,\n  ]);\n\n  // This renders all available sign-in providers\n  const elements = useMemo(\n    () =>\n      Object.keys(providers).map(key => {\n        const provider = providers[key];\n\n        const { Component } = provider.components;\n\n        const handleSignInSuccess = (result) => {\n          localStorage.setItem(PROVIDER_STORAGE_KEY, provider.id);\n\n          handleWrappedResult(result);\n        };\n\n        return (\n          React.createElement(Component, {\n            key: provider.id,\n            config: provider.config,\n            onSignInSuccess: handleSignInSuccess,}\n          )\n        );\n      }),\n    [providers, handleWrappedResult],\n  );\n\n  return [loading, elements];\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  configApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { UserIdentity } from './UserIdentity';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useState } from 'react';\nimport { useMountEffect } from '@react-hookz/web';\nimport { Progress } from '../../components/Progress';\nimport { Content } from '../Content/Content';\nimport { ContentHeader } from '../ContentHeader/ContentHeader';\nimport { Header } from '../Header';\nimport { InfoCard } from '../InfoCard';\nimport { Page } from '../Page';\nimport { getSignInProviders, useSignInProviders } from './providers';\nimport { GridItem, useStyles } from './styles';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = 'left',\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess,\n  );\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, { title: configApi.getString('app.title'),} )\n      , React.createElement(Content, null\n        , title && React.createElement(ContentHeader, { title: title, textAlign: align,} )\n        , React.createElement(Grid, {\n          container: true,\n          justifyContent: align === 'center' ? align : 'flex-start',\n          spacing: 2,\n          component: \"ul\",\n          classes: classes,}\n        \n          , providerElements\n        )\n      )\n    )\n  );\n};\n\nexport const SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess,\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n\n  const [error, setError] = useState();\n\n  // The SignIn component takes some time to decide whether the user is logged-in or not.\n  // showLoginPage is used to prevent a glitch-like experience where the sign-in page is\n  // displayed for a split second when the user is already logged-in.\n  const [showLoginPage, setShowLoginPage] = useState(false);\n\n  \n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        // Do an initial check if any logged-in session exists\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true,\n        });\n      }\n\n      // If no session exists, show the sign-in page\n      if (!identityResponse && (showPopup || auto)) {\n        // Unless auto is set to true, this step should not happen.\n        // When user intentionally clicks the Sign In button, autoShowPopup is set to true\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true,\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`,\n          );\n        }\n      }\n\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile,\n        }),\n      );\n    } catch (err) {\n      // User closed the sign-in modal\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n\n  useMountEffect(() => login({ checkExisting: true }));\n\n  return showLoginPage ? (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, { title: configApi.getString('app.title'),} )\n      , React.createElement(Content, null\n        , React.createElement(Grid, {\n          container: true,\n          justifyContent: \"center\",\n          spacing: 2,\n          component: \"ul\",\n          classes: classes,}\n        \n          , React.createElement(GridItem, null\n            , React.createElement(InfoCard, {\n              variant: \"fullHeight\",\n              title: provider.title,\n              actions: \n                React.createElement(Button, {\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  onClick: () => {\n                    login({ showPopup: true });\n                  },}\n                , \"Sign In\"\n\n                )\n              ,}\n            \n              , React.createElement(Typography, { variant: \"body1\",}, provider.message)\n              , error && error.name !== 'PopupRejectedError' && (\n                React.createElement(Typography, { variant: \"body1\", color: \"error\",}\n                  , error.message\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  ) : (\n    React.createElement(Progress, null )\n  );\n};\n\nexport function SignInPage(props) {\n  if ('provider' in props) {\n    return React.createElement(SingleSignInPage, { ...props,} );\n  }\n\n  return React.createElement(MultiSignInPage, { ...props,} );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Tab, { } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport React, {\n\n\n\n  useState,\n} from 'react';\nimport { BottomLink, } from '../BottomLink';\nimport { ErrorBoundary, } from '../ErrorBoundary';\n\n\n\nconst useTabsStyles = makeStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3),\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageTabbedCard' },\n);\n\n/** @public */\n\n\nconst BoldHeader = withStyles(\n  theme => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: 'inline-block' },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) },\n  }),\n  { name: 'BackstageTabbedCardBoldHeader' },\n)(CardHeader);\n\n\n\n\n\n\n\n\n\n\n\n\nexport function TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange,\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n\n  const handleChange = onChange\n    ? onChange\n    : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, child => {\n      if (React.isValidElement(child) && child?.props.value === value) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  }\n\n  const errProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    React.createElement(Card, null\n      , React.createElement(ErrorBoundary, { ...errProps,}\n        , title && React.createElement(BoldHeader, { title: title,} )\n        , React.createElement(Tabs, {\n          selectionFollowsFocus: true,\n          classes: tabsClasses,\n          value: value || selectedIndex,\n          onChange: handleChange,}\n        \n          , children\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(CardContent, null, selectedTabContent)\n        , deepLink && React.createElement(BottomLink, { ...deepLink,} )\n      )\n    )\n  );\n}\n\n/** @public */\n\n\nconst useCardTabStyles = makeStyles(\n  theme => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: 'none',\n      '&:hover': {\n        opacity: 1,\n        backgroundColor: 'transparent',\n        color: theme.palette.text.primary,\n      },\n    },\n    selected: {\n      fontWeight: 'bold',\n    },\n  }),\n  { name: 'BackstageCardTab' },\n);\n\n\n\n\n\n/**\n * Card tab component used in {@link TabbedCard}\n *\n * @public\n *\n */\nexport function CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n\n  return React.createElement(Tab, { disableRipple: true, classes: classes, ...restProps,} );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, { useContext } from 'react';\n\n\nconst AnalyticsReactContext = createVersionedContext\n\n('analytics-context');\n\n/**\n * A \"private\" (to this package) hook that enables context inheritance and a\n * way to read Analytics Context values at event capture-time.\n *\n * @internal\n */\nexport const useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n\n  // Provide a default value if no value exists.\n  if (theContext === undefined) {\n    return {\n      routeRef: 'unknown',\n      pluginId: 'root',\n      extension: 'App',\n    };\n  }\n\n  // This should probably never happen, but check for it.\n  const theValue = theContext.atVersion(1);\n  if (theValue === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return theValue;\n};\n\n/**\n * Provides components in the child react tree an Analytics Context, ensuring\n * all analytics events captured within the context have relevant attributes.\n *\n * @remarks\n *\n * Analytics contexts are additive, meaning the context ultimately emitted with\n * an event is the combination of all contexts in the parent tree.\n *\n * @alpha\n */\nexport const AnalyticsContext = (options\n\n\n) => {\n  const { attributes, children } = options;\n\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes,\n  };\n\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return (\n    React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue,}\n      , children\n    )\n  );\n};\n\n/**\n * Returns an HOC wrapping the provided component in an Analytics context with\n * the given values.\n *\n * @param Component - Component to be wrapped with analytics context attributes\n * @param values - Analytics context key/value pairs.\n * @internal\n */\nexport function withAnalyticsContext(\n  Component,\n  values,\n) {\n  const ComponentWithAnalyticsContext = (props) => {\n    return (\n      React.createElement(AnalyticsContext, { attributes: values,}\n        , React.createElement(Component, { ...props,} )\n      )\n    );\n  };\n  ComponentWithAnalyticsContext.displayName = `WithAnalyticsContext(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n  return ComponentWithAnalyticsContext;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class Tracker  {\n  constructor(\n      analyticsApi,\n     context = {\n      routeRef: 'unknown',\n      pluginId: 'root',\n      extension: 'App',\n    },\n  ) {;this.analyticsApi = analyticsApi;this.context = context;}\n\n  setContext(context) {\n    this.context = context;\n  }\n\n  captureEvent(\n    action,\n    subject,\n    {\n      value,\n      attributes,\n    } = {},\n  ) {\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context: this.context,\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn('Error during analytics event capture. %o', e);\n    }\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useAnalyticsContext } from './AnalyticsContext';\nimport {\n  analyticsApiRef,\n\n\n  useApi,\n} from '../apis';\nimport { useRef } from 'react';\nimport { Tracker } from './Tracker';\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {} };\n  }\n}\n\n/**\n * Gets a pre-configured analytics tracker.\n *\n * @alpha\n */\nexport function useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  // Our goal is to make this API truly optional for any/all consuming code\n  // (including tests). This hook runs last to ensure hook order is, as much as\n  // possible, maintained.\n  const analyticsApi = useAnalyticsApi();\n\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n\n  const tracker = getTracker();\n  tracker.setContext(context);\n\n  return tracker;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n\n/**\n * This file contains declarations for common interfaces of auth-related APIs.\n * The declarations should be used to signal which type of authentication and\n * authorization methods each separate auth provider supports.\n *\n * For example, a Google OAuth provider that supports OAuth 2 and OpenID Connect,\n * would be declared as follows:\n *\n * const googleAuthApiRef = createApiRef<OAuthApi & OpenIDConnectApi>({ ... })\n */\n\n/**\n * Information about the auth provider.\n *\n * @remarks\n *\n * This information is used both to connect the correct auth provider in the backend, as\n * well as displaying the provider to the user.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Session state values passed to subscribers of the SessionApi.\n *\n * @public\n */\nexport var SessionState; (function (SessionState) {\n  /**\n   * User signed in.\n   */\n  const SignedIn = 'SignedIn'; SessionState[\"SignedIn\"] = SignedIn;\n  /**\n   * User not signed in.\n   */\n  const SignedOut = 'SignedOut'; SessionState[\"SignedOut\"] = SignedOut;\n})(SessionState || (SessionState = {}));\n\n/**\n * The SessionApi provides basic controls for any auth provider that is tied to a persistent session.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Provides authentication towards Google APIs and identities.\n *\n * @public\n * @remarks\n *\n * See {@link https://developers.google.com/identity/protocols/googlescopes} for a full list of supported scopes.\n *\n * Note that the ID token payload is only guaranteed to contain the user's numerical Google ID,\n * email and expiration information. Do not rely on any other fields, as they might not be present.\n */\nexport const googleAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.google',\n});\n\n/**\n * Provides authentication towards GitHub APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/}\n * for a full list of supported scopes.\n */\nexport const githubAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.github',\n});\n\n/**\n * Provides authentication towards Okta APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://developer.okta.com/docs/guides/implement-oauth-for-okta/scopes/}\n * for a full list of supported scopes.\n */\nexport const oktaAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.okta',\n});\n\n/**\n * Provides authentication towards GitLab APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html#limiting-scopes-of-a-personal-access-token}\n * for a full list of supported scopes.\n */\nexport const gitlabAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.gitlab',\n});\n\n/**\n * Provides authentication towards Microsoft APIs and identities.\n *\n * @public\n * @remarks\n *\n * For more info and a full list of supported scopes, see:\n * - {@link https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent}\n * - {@link https://docs.microsoft.com/en-us/graph/permissions-reference}\n */\nexport const microsoftAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.microsoft',\n});\n\n/**\n * Provides authentication towards OneLogin APIs.\n *\n * @public\n */\nexport const oneloginAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.onelogin',\n});\n\n/**\n * Provides authentication towards Bitbucket APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://support.atlassian.com/bitbucket-cloud/docs/use-oauth-on-bitbucket-cloud/}\n * for a full list of supported scopes.\n */\nexport const bitbucketAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.bitbucket',\n});\n\n/**\n * Provides authentication towards Atlassian APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://developer.atlassian.com/cloud/jira/platform/scopes-for-connect-and-oauth-2-3LO-apps/}\n * for a full list of supported scopes.\n */\nexport const atlassianAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.atlassian',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef, } from '../system';\n\n\n/**\n * Message handled by the {@link AlertApi}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link AlertApi}.\n *\n * @public\n */\nexport const alertApiRef = createApiRef({\n  id: 'core.alert',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Represents an event worth tracking in an analytics system that could inform\n * how users of a Backstage instance are using its features.\n *\n * @alpha\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * **EXPERIMENTAL**\n *\n * The {@link ApiRef} of {@link AnalyticsApi}.\n *\n * @alpha\n */\nexport const analyticsApiRef = createApiRef({\n  id: 'core.analytics',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Describes a theme provided by the app.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link AppThemeApi}.\n *\n * @public\n */\nexport const appThemeApiRef = createApiRef({\n  id: 'core.apptheme',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '../system';\n\n\n/**\n * The Config API is used to provide a mechanism to access the\n * runtime configuration of the system.\n *\n * @public\n */\n\n\n/**\n * The {@link ApiRef} of {@link ConfigApi}.\n *\n * @public\n */\nexport const configApiRef = createApiRef({\n  id: 'core.config',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '../system';\n\n/**\n * The discovery API is used to provide a mechanism for plugins to\n * discover the endpoint to use to talk to their backend counterpart.\n *\n * @remarks\n *\n * The purpose of the discovery API is to allow for many different deployment\n * setups and routing methods through a central configuration, instead\n * of letting each individual plugin manage that configuration.\n *\n * Implementations of the discovery API can be a simple as a URL pattern\n * using the pluginId, but could also have overrides for individual plugins,\n * or query a separate discovery service.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link DiscoveryApi}.\n *\n * @public\n */\nexport const discoveryApiRef = createApiRef({\n  id: 'core.discovery',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Mirrors the JavaScript Error class, for the purpose of\n * providing documentation and optional fields.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link ErrorApi}.\n *\n * @public\n */\nexport const errorApiRef = createApiRef({\n  id: 'core.error',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n/**\n * Feature flag descriptor.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Enum representing the state of a feature flag (inactive/active).\n *\n * @public\n */\nexport var FeatureFlagState; (function (FeatureFlagState) {\n  /**\n   * Feature flag inactive (disabled).\n   */\n  const None = 0; FeatureFlagState[FeatureFlagState[\"None\"] = None] = \"None\";\n  /**\n   * Feature flag active (enabled).\n   */\n  const Active = 1; FeatureFlagState[FeatureFlagState[\"Active\"] = Active] = \"Active\";\n})(FeatureFlagState || (FeatureFlagState = {}));\n\n/**\n * Options to use when saving feature flags.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link FeatureFlagsApi}.\n *\n * @public\n */\nexport const featureFlagsApiRef = createApiRef({\n  id: 'core.featureflags',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n/**\n * A wrapper for the fetch API, that has additional behaviors such as the\n * ability to automatically inject auth information where necessary.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link FetchApi}.\n *\n * @remarks\n *\n * This is a wrapper for the fetch API, that has additional behaviors such as\n * the ability to automatically inject auth information where necessary.\n *\n * @public\n */\nexport const fetchApiRef = createApiRef({\n  id: 'core.fetch',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '../system';\n\n\n/**\n * The Identity API used to identify and get information about the signed in user.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link IdentityApi}.\n *\n * @public\n */\nexport const identityApiRef = createApiRef({\n  id: 'core.identity',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Describes how to handle auth requests. Both how to show them to the user, and what to do when\n * the user accesses the auth request.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link OAuthRequestApi}.\n *\n * @public\n */\nexport const oauthRequestApiRef = createApiRef({\n  id: 'core.oauthrequest',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n/**\n * A snapshot in time of the current known value of a storage key.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link StorageApi}.\n *\n * @public\n */\nexport const storageApiRef = createApiRef({\n  id: 'core.storage',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * API reference configuration - holds an ID of the referenced API.\n *\n * @public\n */\n\n\n\n\nclass ApiRefImpl {\n  constructor(  config) {;this.config = config;\n    const valid = config.id\n      .split('.')\n      .flatMap(part => part.split('-'))\n      .every(part => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`,\n      );\n    }\n  }\n\n  get id() {\n    return this.config.id;\n  }\n\n  // Utility for getting type of an api, using `typeof apiRef.T`\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\n\n/**\n * Creates a reference to an API.\n *\n * @param config - The descriptor of the API to reference.\n * @returns An API reference.\n * @public\n */\nexport function createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Used to infer types for a standalone {@link ApiFactory} that isn't immediately passed\n * to another function.\n *\n * @remarks\n *\n * This function doesn't actually do anything, it's only used to infer types.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Used to infer types for a standalone {@link ApiFactory} that isn't immediately passed\n * to another function.\n *\n * @remarks\n *\n * Creates factory from {@link ApiRef} or returns the factory itself if provided.\n *\n * @param factory - Existing factory or {@link ApiRef}.\n * @param instance - The instance to be returned by the factory.\n * @public\n */\nexport function createApiFactory\n\n\n\n(\n  factory,\n  instance,\n) {\n  if ('id' in factory) {\n    return {\n      api: factory,\n      deps: {} ,\n      factory: () => instance,\n    };\n  }\n  return factory;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\nimport { useVersionedContext } from '@backstage/version-bridge';\n\n/**\n * React hook for retrieving {@link ApiHolder}, an API catalog.\n *\n * @public\n */\nexport function useApiHolder() {\n  const versionedHolder = useVersionedContext('api-context');\n  if (!versionedHolder) {\n    throw new Error('API context is not available');\n  }\n\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error('ApiContext v1 not available');\n  }\n  return apiHolder;\n}\n\n/**\n * React hook for retrieving APIs.\n *\n * @param apiRef - Reference of the API to use.\n * @public\n */\nexport function useApi(apiRef) {\n  const apiHolder = useApiHolder();\n\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\n\n/**\n * Wrapper for giving component an API context.\n *\n * @param apis - APIs for the context.\n * @public\n */\nexport function withApis(apis) {\n  return function withApisWrapper(\n    WrappedComponent,\n  ) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n\n      const impls = {} ;\n\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n\n      return React.createElement(WrappedComponent, { ...(props ), ...impls,} );\n    };\n    const displayName =\n      WrappedComponent.displayName || WrappedComponent.name || 'Component';\n\n    Hoc.displayName = `withApis(${displayName})`;\n\n    return Hoc;\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useVersionedContext } from '@backstage/version-bridge';\n\n\n/**\n * React hook providing {@link AppContext}.\n *\n * @public\n */\nexport const useApp = () => {\n  const versionedContext = useVersionedContext(\n    'app-context',\n  );\n  if (!versionedContext) {\n    throw new Error('App context is not available');\n  }\n\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error('AppContext v1 not available');\n  }\n  return appContext;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n\n\n\n\n// This method of storing the component data was deprecated in September 2021, it\n// will be removed in the future for the reasons described below.\nconst globalStore = getOrCreateGlobalSingleton(\n  'component-data-store',\n  () => new WeakMap(),\n);\n\n// This key is used to attach component data to the component type (function or class)\n// itself. This method is used because it has better compatibility component wrappers\n// like react-hot-loader, as opposed to the WeakMap method or using a symbol.\nconst componentDataKey = '__backstage_data';\n\n\n\n\n\n\n\n\n\n/**\n * Stores data related to a component in a global store.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#component-data}.\n *\n * @param component - The component to attach the data to.\n * @param type - The key under which the data will be stored.\n * @param data - Arbitrary value.\n * @public\n */\nexport function attachComponentData(\n  component,\n  type,\n  data,\n) {\n  const dataComponent = component ;\n\n  let container = dataComponent[componentDataKey] ?? globalStore.get(component);\n  if (!container) {\n    container = { map: new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container,\n    });\n    globalStore.set(component, container);\n  }\n\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`,\n    );\n  }\n\n  container.map.set(type, data);\n}\n\n/**\n * Retrieves data attached to a component.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#component-data}.\n *\n * @param node - React component to look up.\n * @param type - Key of the data to retrieve.\n * @returns Data stored using {@link attachComponentData}.\n * @public\n */\nexport function getComponentData(\n  node,\n  type,\n) {\n  if (!node) {\n    return undefined;\n  }\n\n  const component = (node ).type;\n  if (!component) {\n    return undefined;\n  }\n\n  const container = component[componentDataKey] ?? globalStore.get(component);\n  if (!container) {\n    return undefined;\n  }\n\n  return container.map.get(type) ;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\n\n\n\n\n\n\n\n\n\nexport class PluginErrorBoundary extends React.Component {\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  state = { error: undefined };\n\n  handleErrorReset = () => {\n    this.setState({ error: undefined });\n  };\n\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n\n    if (error) {\n      return (\n        React.createElement(ErrorBoundaryFallback, {\n          error: error,\n          resetError: this.handleErrorReset,\n          plugin: plugin,}\n        )\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { lazy, Suspense } from 'react';\nimport { AnalyticsContext } from '../analytics/AnalyticsContext';\nimport { useApp } from '../app';\nimport { useRouteRef } from '../routing';\nimport { attachComponentData } from './componentData';\n\nimport { PluginErrorBoundary } from './PluginErrorBoundary';\n\n/**\n * Lazy or synchronous retrieving of extension components.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Extension for components that can have its own URL route (top-level pages, tabs etc.).\n *\n * @remarks\n *\n * We do not use ComponentType as the return type, since it doesn't let us convey the children prop.\n * ComponentType inserts children as an optional prop whether the inner component accepts it or not,\n * making it impossible to make the usage of children type safe.\n *\n * See {@link https://backstage.io/docs/plugins/composability#extensions}.\n *\n * @public\n */\nexport function createRoutableExtension\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () =>\n        component().then(\n          InnerComponent => {\n            const RoutableExtensionWrapper = (props) => {\n              // Validate that the routing is wired up correctly in the App.tsx\n              try {\n                useRouteRef(mountPoint);\n              } catch (error) {\n                if (typeof error === 'object' && error !== null) {\n                  const { message } = error ;\n                  if (\n                    typeof message === 'string' &&\n                    message.startsWith('No path for ')\n                  ) {\n                    throw new Error(\n                      `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. ` +\n                        'Routable extension components may not be rendered by other components and must be ' +\n                        'directly available as an element within the App provider component.',\n                    );\n                  }\n                }\n                throw error;\n              }\n              return React.createElement(InnerComponent, { ...props,} );\n            };\n\n            const componentName =\n              name ||\n              (InnerComponent ).displayName ||\n              InnerComponent.name ||\n              'LazyComponent';\n\n            RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n\n            return RoutableExtensionWrapper ;\n          },\n          error => {\n            const RoutableExtensionWrapper = (_) => {\n              const app = useApp();\n              const { BootErrorPage } = app.getComponents();\n\n              return React.createElement(BootErrorPage, { step: \"load-chunk\", error: error,} );\n            };\n            return RoutableExtensionWrapper;\n          },\n        ),\n    },\n    data: {\n      'core.mountPoint': mountPoint,\n    },\n    name,\n  });\n}\n\n/**\n * Plain React component extension.\n *\n * @remarks\n *\n * We do not use ComponentType as the return type, since it doesn't let us convey the children prop.\n * ComponentType inserts children as an optional prop whether the inner component accepts it or not,\n * making it impossible to make the usage of children type safe.\n *\n * See {@link https://backstage.io/docs/plugins/composability#extensions}.\n *\n * @public\n */\nexport function createComponentExtension\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\n\n/**\n * Used by {@link createComponentExtension} and {@link createRoutableExtension}.\n *\n * @remarks\n *\n * We do not use ComponentType as the return type, since it doesn't let us convey the children prop.\n * ComponentType inserts children as an optional prop whether the inner component accepts it or not,\n * making it impossible to make the usage of children type safe.\n *\n * See {@link https://backstage.io/docs/plugins/composability#extensions}.\n *\n * @public\n */\nexport function createReactExtension\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  const { data = {}, name } = options;\n  if (!name) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'Declaring extensions without name is DEPRECATED. ' +\n        'Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.',\n    );\n  }\n\n  let Component;\n  if ('lazy' in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(() =>\n      lazyLoader().then(component => ({ default: component })),\n    ) ;\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName =\n    name ||\n    (Component ).displayName ||\n    Component.name ||\n    'Component';\n\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        // todo(iamEAP): Account for situations where this is attached via\n        // separate calls to attachComponentData().\n        const mountPoint = data?.['core.mountPoint'] \n\n;\n\n        return (\n          React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n            , React.createElement(PluginErrorBoundary, { app: app, plugin: plugin,}\n              , React.createElement(AnalyticsContext, {\n                attributes: {\n                  pluginId: plugin.getId(),\n                  ...(name && { extension: name }),\n                  ...(mountPoint && { routeRef: mountPoint.id }),\n                },}\n              \n                , React.createElement(Component, { ...props,} )\n              )\n            )\n          )\n        );\n      };\n\n      attachComponentData(Result, 'core.plugin', plugin);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Children,\n  Fragment,\n  isValidElement,\n\n\n  useMemo,\n} from 'react';\nimport { getComponentData } from './componentData';\nimport { useApi, featureFlagsApiRef } from '../apis';\n\nfunction selectChildren(\n  rootNode,\n  featureFlagsApi,\n  selector,\n  strictError,\n) {\n  return Children.toArray(rootNode).flatMap(node => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError,\n      );\n    }\n\n    if (getComponentData(node, 'core.featureFlagged')) {\n      const props = node.props ;\n      const isEnabled =\n        'with' in props\n          ? featureFlagsApi.isActive(props.with)\n          : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError,\n        );\n      }\n      return [];\n    }\n\n    if (selector === undefined || selector(node)) {\n      return [node];\n    }\n\n    if (strictError) {\n      throw new Error(strictError);\n    }\n\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError,\n    );\n  });\n}\n\n/**\n * A querying interface tailored to traversing a set of selected React elements\n * and extracting data.\n *\n * @remarks\n *\n * Methods prefixed with `selectBy` are used to narrow the set of selected elements.\n *\n * Methods prefixed with `find` return concrete data using a deep traversal of the set.\n *\n * Methods prefixed with `get` return concrete data using a shallow traversal of the set.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Collection  {\n  constructor(\n      node,\n      featureFlagsApi,\n  ) {;this.node = node;this.featureFlagsApi = featureFlagsApi;}\n\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      node => getComponentData(node, query.key) !== undefined,\n      query.withStrictError,\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      node => getComponentData(node, query.key) !== undefined,\n    );\n    return selection\n      .map(node => getComponentData(node, query.key))\n      .filter((data) => data !== undefined);\n  }\n\n  getElements()\n\n {\n    return selectChildren(this.node, this.featureFlagsApi) \n\n;\n  }\n}\n\n/**\n * useElementFilter is a utility that helps you narrow down and retrieve data\n * from a React element tree, typically operating on the `children` property\n * passed in to a component.\n *\n * @remarks\n *\n * A common use-case is to construct declarative APIs\n * where a React component defines its behavior based on its children, such as\n * the relationship between `Routes` and `Route` in `react-router`.\n *\n * The purpose of this hook is similar to `React.Children.map`, and it expands upon\n * it to also handle traversal of fragments and Backstage specific things like the\n * `FeatureFlagged` component.\n *\n * The return value of the hook is computed by the provided filter function, but\n * with added memoization based on the input `node`. If further memoization\n * dependencies are used in the filter function, they should be added to the\n * third `dependencies` argument, just like `useMemo`, `useEffect`, etc.\n *\n * @public\n */\nexport function useElementFilter(\n  node,\n  filterFn,\n  dependencies = [],\n) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @internal\n */\nexport class PluginImpl\n\n\n\n{\n  constructor(  config) {;this.config = config;}\n\n  getId() {\n    return this.config.id;\n  }\n\n  getApis() {\n    return this.config.apis ?? [];\n  }\n\n  getFeatureFlags() {\n    return this.config.featureFlags?.slice() ?? [];\n  }\n\n  get routes() {\n    return this.config.routes ?? ({} );\n  }\n\n  get externalRoutes() {\n    return this.config.externalRoutes ?? ({} );\n  }\n\n  provide(extension) {\n    return extension.expose(this);\n  }\n\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\n\n/**\n * Creates Backstage Plugin from config.\n *\n * @param config - Plugin configuration.\n * @public\n */\nexport function createPlugin\n\n\n(\n  config,\n) {\n  return new PluginImpl(config);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n/**\n * Catch-all type for route params.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This symbol is what we use at runtime to determine whether a given object\n * is a type of RouteRef or not. It doesn't work well in TypeScript though since\n * the `unique symbol` will refer to different values between package versions.\n * For that reason we use the marker $$routeRefType to represent the symbol at\n * compile-time instead of using the symbol directly.\n *\n * @internal\n */\nexport const routeRefType = getOrCreateGlobalSingleton(\n  'route-ref-type',\n  () => Symbol('route-ref-type'),\n);\n\n/**\n * Absolute route reference.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#routing-system}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  routeRefType,\n\n\n\n} from './types';\n\n/**\n * @internal\n */\nexport class RouteRefImpl\n\n{\n  // The marker is used for type checking while the symbol is used at runtime.\n  ;\n   [routeRefType] = 'absolute';\n\n  constructor(\n      id,\n     params,\n  ) {;this.id = id;this.params = params;}\n\n  get title() {\n    return this.id;\n  }\n\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n\n/**\n * Create a {@link RouteRef} from a route descriptor.\n *\n * @param config - Description of the route reference to be created.\n * @public\n */\nexport function createRouteRef\n\n\n\n\n\n\n\n(config\n\n\n\n\n) {\n  return new RouteRefImpl(\n    config.id,\n    (config.params ?? []) ,\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n\n\n  routeRefType,\n\n} from './types';\n\n// Should match the pattern in react-router\nconst PARAM_PATTERN = /^\\w+$/;\n\n/**\n * @internal\n */\nexport class SubRouteRefImpl\n\n{\n  // The marker is used for type checking while the symbol is used at runtime.\n  ;\n   [routeRefType] = 'sub';\n\n  constructor(\n      id,\n     path,\n     parent,\n     params,\n  ) {;this.id = id;this.path = path;this.parent = parent;this.params = params;}\n\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n\n/**\n * Used in {@link PathParams} type declaration.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Create a {@link SubRouteRef} from a route descriptor.\n *\n * @param config - Description of the route reference to be created.\n * @public\n */\nexport function createSubRouteRef\n\n\n(config\n\n\n\n) {\n  const { id, path, parent } = config;\n  \n\n  // Collect runtime parameters from the path, e.g. ['bar', 'baz'] from '/foo/:bar/:baz'\n  const pathParams = path\n    .split('/')\n    .filter(p => p.startsWith(':'))\n    .map(p => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n\n  if (parent.params.some(p => pathParams.includes(p ))) {\n    throw new Error(\n      'SubRouteRef may not have params that overlap with its parent',\n    );\n  }\n  if (!path.startsWith('/')) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith('/')) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n\n  // We ensure that the type of the return type is sane here\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params ,\n  ) ;\n\n  // But skip type checking of the return value itself, because the conditional\n  // type checking of the parent parameter overlap is tricky to express.\n  return subRouteRef ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  routeRefType,\n\n\n\n} from './types';\n\n/**\n * @internal\n */\nexport class ExternalRouteRefImpl\n\n\n\n{\n  // The marker is used for type checking while the symbol is used at runtime.\n  ;\n   [routeRefType] = 'external';\n\n  constructor(\n      id,\n     params,\n     optional,\n  ) {;this.id = id;this.params = params;this.optional = optional;}\n\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n\n/**\n * Creates a route descriptor, to be later bound to a concrete route by the app. Used to implement cross-plugin route references.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#routing-system}.\n *\n * @param options - Description of the route reference to be created.\n * @public\n */\nexport function createExternalRouteRef\n\n\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  return new ExternalRouteRefImpl(\n    options.id,\n    (options.params ?? []) ,\n    Boolean(options.optional) ,\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useVersionedContext } from '@backstage/version-bridge';\n\n\n\n\n\n\n\n\n/**\n * @internal\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * React hook for constructing URLs to routes.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#routing-system}\n *\n * @param routeRef - The ref to route that should be converted to URL.\n * @returns A function that will in turn return the concrete URL of the `routeRef`.\n * @public\n */\nexport function useRouteRef(\n  routeRef\n\n\n,\n) {\n  const sourceLocation = useLocation();\n  const versionedContext = useVersionedContext(\n    'routing-context',\n  );\n  if (!versionedContext) {\n    throw new Error('Routing context is not available');\n  }\n\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, sourceLocation),\n    [resolver, routeRef, sourceLocation],\n  );\n\n  if (!versionedContext) {\n    throw new Error('useRouteRef used outside of routing context');\n  }\n  if (!resolver) {\n    throw new Error('RoutingContext v1 not available');\n  }\n\n  const isOptional = 'optional' in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n\n  return routeFunc;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useParams } from 'react-router-dom';\n\n\n/**\n * React hook for retrieving dynamic params from the current URL.\n * @param _routeRef - Ref of the current route.\n * @public\n */\nexport function useRouteRefParams(\n  _routeRef,\n) {\n  return useParams() ;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * An object that is shaped like an `Error`.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * Checks whether an unknown value is an {@link ErrorLike} object, which guarantees that it's\n * an object that has at least two string properties: a non-empty `name` and `message`.\n *\n * @public\n * @param value - an unknown value\n * @returns true if the value is an {@link ErrorLike} object, false otherwise\n */\nexport function isError(value) {\n  if (typeof value !== 'object' || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value ;\n  if (typeof maybe.name !== 'string' || maybe.name === '') {\n    return false;\n  }\n  if (typeof maybe.message !== 'string') {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Asserts that an unknown value is an {@link ErrorLike} object, which guarantees that it's\n * an object that has at least two string properties: a non-empty `name` and `message`.\n *\n * If the value is not an {@link ErrorLike} object, an error is thrown.\n *\n * @public\n * @param value - an unknown value\n */\nexport function assertError(value) {\n  if (typeof value !== 'object' || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value ;\n  if (typeof maybe.name !== 'string' || maybe.name === '') {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== 'string') {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`,\n    );\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  deserializeError as deserializeErrorInternal,\n  serializeError as serializeErrorInternal,\n} from 'serialize-error';\nimport { isError } from '../errors';\n\n/**\n * The serialized form of an Error.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Serializes an error object to a JSON friendly form.\n *\n * @public\n * @param error - The error.\n * @param options - Optional serialization options.\n */\nexport function serializeError(\n  error,\n  options\n\n\n,\n) {\n  const serialized = serializeErrorInternal(error);\n  const result = {\n    name: 'Unknown',\n    message: '<no reason given>',\n    ...serialized,\n  };\n\n  if (!options?.includeStack) {\n    delete result.stack;\n  }\n\n  return result;\n}\n\n/**\n * Deserializes a serialized error object back to an Error.\n *\n * @public\n */\nexport function deserializeError(\n  data,\n) {\n  const result = deserializeErrorInternal(data) ;\n  if (!data.stack) {\n    result.stack = undefined;\n  }\n  return result;\n}\n\n/**\n * Stringifies an error, including its name and message where available.\n *\n * @param error - The error.\n * @public\n */\nexport function stringifyError(error) {\n  if (isError(error)) {\n    // Prefer error.toString, but if it's not implemented we use a nicer fallback\n    const str = String(error);\n    return str !== '[object Object]' ? str : `${error.name}: ${error.message}`;\n  }\n\n  return `unknown error '${error}'`;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyError } from '../serialization';\nimport { isError } from './assertion';\n\n/**\n * A base class that custom Error classes can inherit from.\n *\n * @public\n * @example\n *```ts\n * class MyCustomError extends CustomErrorBase {}\n *\n * const e = new MyCustomError('Some message', cause);\n * // e.name === 'MyCustomError'\n * // e.message === 'Some message'\n * // e.cause === cause\n * // e.stack is set if the runtime supports it\n * ```\n */\nexport class CustomErrorBase extends Error {\n  /**\n   * An inner error that caused this error to be thrown, if any.\n   */\n   cause;\n\n  constructor(message, cause) {\n    let fullMessage = message;\n    if (cause !== undefined) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n\n    super(fullMessage);\n\n    Error.captureStackTrace?.(this, this.constructor);\n\n    this.name = this.constructor.name;\n    this.cause = isError(cause) ? cause : undefined;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isError } from './assertion';\nimport { CustomErrorBase } from './CustomErrorBase';\n\n/*\n * A set of common business logic errors.\n *\n * A backend error handler middleware would understand these and translate them\n * to well formed HTTP responses.\n *\n * While these are intentionally analogous to HTTP errors, they are not\n * intended to be thrown by the request handling layer. In those places, please\n * use e.g. the http-errors library.\n */\n\n/**\n * The given inputs are malformed and cannot be processed.\n *\n * @public\n */\nexport class InputError extends CustomErrorBase {}\n\n/**\n * The request requires authentication, which was not properly supplied.\n *\n * @public\n */\nexport class AuthenticationError extends CustomErrorBase {}\n\n/**\n * The authenticated caller is not allowed to perform this request.\n *\n * @public\n */\nexport class NotAllowedError extends CustomErrorBase {}\n\n/**\n * The requested resource could not be found.\n *\n * Note that this error usually is used to indicate that an entity with a given\n * ID does not exist, rather than signalling that an entire route is missing.\n *\n * @public\n */\nexport class NotFoundError extends CustomErrorBase {}\n\n/**\n * The request could not complete due to a conflict in the current state of the\n * resource.\n *\n * @public\n */\nexport class ConflictError extends CustomErrorBase {}\n\n/**\n * The requested resource has not changed since last request.\n *\n * @public\n */\nexport class NotModifiedError extends CustomErrorBase {}\n\n/**\n * An error that forwards an underlying cause with additional context in the message.\n *\n * The `name` property of the error will be inherited from the `cause` if\n * possible, and will otherwise be set to `'Error'`.\n *\n * @public\n */\nexport class ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n\n    this.name = isError(cause) ? cause.name : 'Error';\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A standard shape of JSON data returned as the body of backend errors.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Attempts to construct an ErrorResponseBody out of a failed server request.\n * Assumes that the response has already been checked to be not ok. This\n * function consumes the body of the response, and assumes that it hasn't\n * been consumed before.\n *\n * The code is forgiving, and constructs a useful synthetic body as best it can\n * if the response body wasn't on the expected form.\n *\n * @public\n * @param response - The response of a failed request\n */\nexport async function parseErrorResponseBody(\n  response,\n) {\n  try {\n    const text = await response.text();\n    if (text) {\n      if (\n        response.headers.get('content-type')?.startsWith('application/json')\n      ) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n          // ignore\n        }\n      }\n\n      return {\n        error: {\n          name: 'Error',\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`,\n        },\n        response: {\n          statusCode: response.status,\n        },\n      };\n    }\n  } catch {\n    // ignore\n  }\n\n  return {\n    error: {\n      name: 'Error',\n      message: `Request failed with status ${response.status} ${response.statusText}`,\n    },\n    response: {\n      statusCode: response.status,\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deserializeError } from '../serialization';\nimport {\n\n  parseErrorResponseBody,\n} from '../serialization/response';\n\n/**\n * An error thrown as the result of a failed server request.\n *\n * The server is expected to respond on the ErrorResponseBody format.\n *\n * @public\n */\nexport class ResponseError extends Error {\n  /**\n   * The actual response, as seen by the client.\n   *\n   * Note that the body of this response is always consumed. Its parsed form is\n   * in the `body` field.\n   */\n   response;\n\n  /**\n   * The parsed JSON error body, as sent by the server.\n   */\n   body;\n\n  /**\n   * The Error cause, as seen by the remote server. This is parsed out of the\n   * JSON error body.\n   *\n   * This error always has the plain Error constructor, however all\n   * serializable enumerable fields on the remote error including its name are\n   * preserved. Therefore, if you want to check the error type, use its name\n   * property rather than checking typeof or its constructor or prototype.\n   */\n   cause;\n\n  /**\n   * Constructs a ResponseError based on a failed response.\n   *\n   * Assumes that the response has already been checked to be not ok. This\n   * function consumes the body of the response, and assumes that it hasn't\n   * been consumed before.\n   */\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause,\n    });\n  }\n\n   constructor(props\n\n\n\n\n) {\n    super(props.message);\n    this.name = 'ResponseError';\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  createApiRef,\n\n} from '@backstage/core-plugin-api';\n\n/**\n * The options that control a {@link ScmAuthApi.getCredentials} call.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The ApiRef for the ScmAuthApi.\n *\n * @public\n */\nexport const scmAuthApiRef = createApiRef({\n  id: 'core.scmauth',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  bitbucketAuthApiRef,\n  createApiFactory,\n  githubAuthApiRef,\n  gitlabAuthApiRef,\n  microsoftAuthApiRef,\n\n} from '@backstage/core-plugin-api';\nimport {\n\n  scmAuthApiRef,\n\n\n} from './ScmAuthApi';\n\n\n\n\n\n\n\n\n\n\n\nclass ScmAuthMux  {\n  #providers;\n\n  constructor(providers) {\n    this.#providers = providers;\n  }\n\n  async getCredentials(\n    options,\n  ) {\n    const url = new URL(options.url);\n    const provider = this.#providers.find(p => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(\n        `No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`,\n      );\n    }\n\n    return provider.getCredentials(options);\n  }\n}\n\n/**\n * An implementation of the ScmAuthApi that merges together OAuthApi instances\n * to form a single instance that can handles authentication for multiple providers.\n *\n * @public\n *\n * @example\n * ```\n * // Supports authentication towards both public GitHub and GHE:\n * createApiFactory({\n *   api: scmAuthApiRef,\n *   deps: {\n *     gheAuthApi: gheAuthApiRef,\n *     githubAuthApi: githubAuthApiRef,\n *   },\n *   factory: ({ githubAuthApi, gheAuthApi }) =>\n *     ScmAuth.merge(\n *       ScmAuth.forGithub(githubAuthApi),\n *       ScmAuth.forGithub(gheAuthApi, {\n *         host: 'ghe.example.com',\n *       }),\n *     )\n * })\n * ```\n */\nexport class ScmAuth  {\n  /**\n   * Creates an API factory that enables auth for each of the default SCM providers.\n   */\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef,\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) =>\n        ScmAuth.merge(\n          ScmAuth.forGithub(github),\n          ScmAuth.forGitlab(gitlab),\n          ScmAuth.forAzure(azure),\n          ScmAuth.forBitbucket(bitbucket),\n        ),\n    });\n  }\n\n  /**\n   * Creates a general purpose ScmAuth instance with a custom scope mapping.\n   */\n  static forAuthApi(\n    authApi,\n    options\n\n\n\n\n\n,\n  ) {\n    return new ScmAuth('generic', authApi, options.host, options.scopeMapping);\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitHub.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `github.com`.\n   *\n   * The default scopes are:\n   *\n   * `repo read:org read:user`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `gist`\n   */\n  static forGithub(\n    githubAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'github.com';\n    return new ScmAuth('github', githubAuthApi, host, {\n      default: ['repo', 'read:org', 'read:user'],\n      repoWrite: ['gist'],\n    });\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitLab.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `gitlab.com`.\n   *\n   * The default scopes are:\n   *\n   * `read_user read_api read_repository`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `write_repository api`\n   */\n  static forGitlab(\n    gitlabAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'gitlab.com';\n    return new ScmAuth('gitlab', gitlabAuthApi, host, {\n      default: ['read_user', 'read_api', 'read_repository'],\n      repoWrite: ['write_repository', 'api'],\n    });\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Azure.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `dev.azure.com`.\n   *\n   * The default scopes are:\n   *\n   * `vso.build vso.code vso.graph vso.project vso.profile`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `vso.code_manage`\n   */\n  static forAzure(\n    microsoftAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'dev.azure.com';\n    return new ScmAuth('azure', microsoftAuthApi, host, {\n      default: [\n        'vso.build',\n        'vso.code',\n        'vso.graph',\n        'vso.project',\n        'vso.profile',\n      ],\n      repoWrite: ['vso.code_manage'],\n    });\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Bitbucket.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `bitbucket.org`.\n   *\n   * The default scopes are:\n   *\n   * `account team pullrequest snippet issue`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `pullrequest:write snippet:write issue:write`\n   */\n  static forBitbucket(\n    bitbucketAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'bitbucket.org';\n    return new ScmAuth('bitbucket', bitbucketAuthApi, host, {\n      default: ['account', 'team', 'pullrequest', 'snippet', 'issue'],\n      repoWrite: ['pullrequest:write', 'snippet:write', 'issue:write'],\n    });\n  }\n\n  /**\n   * Merges together multiple ScmAuth instances into one that\n   * routes requests to the correct instance based on the URL.\n   */\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n\n  #api;\n  #host;\n  #scopeMapping;\n  #providerName;\n\n   constructor(\n    providerName,\n    api,\n    host,\n    scopeMapping,\n  ) {\n    this.#api = api;\n    this.#host = host;\n    this.#scopeMapping = scopeMapping;\n    this.#providerName = providerName;\n  }\n\n  /**\n   * Checks whether the implementation is able to provide authentication for the given URL.\n   */\n  isUrlSupported(url) {\n    return url.host === this.#host;\n  }\n\n   getAdditionalScopesForProvider(\n    additionalScopes,\n  ) {\n    if (!additionalScopes?.customScopes || this.#providerName === 'generic') {\n      return [];\n    }\n\n    return additionalScopes.customScopes?.[this.#providerName] ?? [];\n  }\n\n  /**\n   * Fetches credentials for the given resource.\n   */\n  async getCredentials(\n    options,\n  ) {\n    const { url, additionalScope, ...restOptions } = options;\n\n    const scopes = this.#scopeMapping.default.slice();\n    if (additionalScope?.repoWrite) {\n      scopes.push(...this.#scopeMapping.repoWrite);\n    }\n\n    const additionalScopes =\n      this.getAdditionalScopesForProvider(additionalScope);\n\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n\n    const uniqueScopes = [...new Set(scopes)];\n\n    const token = await this.#api.getAccessToken(uniqueScopes, restOptions);\n\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n\n  ScmIntegrations,\n} from '@backstage/integration';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * Factory class for creating {@link @backstage/integration#ScmIntegrationRegistry} instances.\n *\n * @public\n */\nexport class ScmIntegrationsApi {\n  /**\n   * Instantiates an {@link @backstage/integration#ScmIntegrationRegistry}.\n   *\n   * @param config - The root of the config hierarchy.\n   */\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\n\n/**\n * The API that holds all configured SCM integrations.\n *\n * @public\n */\nexport const scmIntegrationsApiRef =\n  createApiRef({\n    id: 'integration.scmintegrations',\n  });\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\nimport { useApp } from '@backstage/core-plugin-api';\n\n/**\n * Props for {@link ScmIntegrationIcon}.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * An icon that represents a certain SCM integration.\n *\n * @public\n */\nexport const ScmIntegrationIcon = (props) => {\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? app.getSystemIcon(type) ?? DefaultIcon : DefaultIcon;\n  return React.createElement(Icon, null );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { trimEnd } from 'lodash';\n\n\n/** Checks whether the given argument is a valid URL hostname */\nexport function isValidHost(host) {\n  const check = new URL('http://example.com');\n  check.host = host;\n  return check.host === host;\n}\n\n/** Checks whether the given argument is a valid URL */\nexport function isValidUrl(url) {\n  try {\n    // eslint-disable-next-line no-new\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function basicIntegrations(\n  integrations,\n  getHost,\n) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === 'string' ? new URL(url) : url;\n        return integrations.find(i => getHost(i) === parsed.host);\n      } catch {\n        return undefined;\n      }\n    },\n    byHost(host) {\n      return integrations.find(i => getHost(i) === host);\n    },\n  };\n}\n\n/**\n * Default implementation of {@link ScmIntegration} `resolveUrl`, that only\n * works with URL pathname based providers.\n *\n * @public\n */\nexport function defaultScmResolveUrl(options\n\n\n\n) {\n  const { url, base, lineNumber } = options;\n\n  // If it is a fully qualified URL - then return it verbatim\n  try {\n    // eslint-disable-next-line no-new\n    new URL(url);\n    return url;\n  } catch {\n    // ignore intentionally\n  }\n\n  let updated;\n\n  if (url.startsWith('/')) {\n    // If it is an absolute path, move relative to the repo root\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(\n      updated.pathname.substring(0, updated.pathname.length - filepath.length),\n      '/',\n    );\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    // For relative URLs, just let the default URL constructor handle the\n    // resolving. Note that this essentially will treat the last segment of the\n    // base as a file - NOT a folder - unless the url ends in a slash.\n    updated = new URL(url, base);\n  }\n\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst AMAZON_AWS_HOST = 'amazonaws.com';\n\n/**\n * The configuration parameters for a single AWS S3 provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Aws S3 integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\n\nexport function readAwsS3IntegrationConfig(\n  config,\n) {\n  const endpoint = config.getOptionalString('endpoint');\n  const s3ForcePathStyle =\n    config.getOptionalBoolean('s3ForcePathStyle') ?? false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(\n        `invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`,\n      );\n    }\n    if (pathname !== '/') {\n      throw new Error(\n        `invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`,\n      );\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n\n  const accessKeyId = config.getOptionalString('accessKeyId');\n  const secretAccessKey = config.getOptionalString('secretAccessKey');\n  const roleArn = config.getOptionalString('roleArn');\n  const externalId = config.getOptionalString('externalId');\n\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId,\n  };\n}\n\n/**\n * Reads a set of AWS S3 integration configs, and inserts some defaults for\n * public Amazon AWS if not specified.\n *\n * @param configs - The config objects of the integrations\n * @public\n */\nexport function readAwsS3IntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readAwsS3IntegrationConfig);\n\n  // If no explicit amazonaws.com integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST,\n    });\n  }\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport { readAwsS3IntegrationConfigs } from './config';\n\n/**\n * Integrates with AWS S3 or compatible solutions.\n *\n * @public\n */\nexport class AwsS3Integration  {\n  static factory = ({ config }) => {\n    const configs = readAwsS3IntegrationConfigs(\n      config.getOptionalConfigArray('integrations.awsS3') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new AwsS3Integration(c)),\n      i => i.config.host,\n    );\n  };\n\n  get type() {\n    return 'awsS3';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n\n  resolveEditUrl(url) {\n    // TODO: Implement edit URL for awsS3\n    return url;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst VERSION_PREFIX_GIT_BRANCH = 'GB';\n\nexport class AzureUrl {\n  /**\n   * Parses an azure URL as copied from the browser address bar.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  static fromRepoUrl(repoUrl) {\n    const url = new URL(repoUrl);\n\n    let owner;\n    let project;\n    let repo;\n\n    const parts = url.pathname.split('/').map(part => decodeURIComponent(part));\n    if (parts[2] === '_git') {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === '_git') {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    } else if (parts[4] === '_git') {\n      owner = `${parts[1]}/${parts[2]}`;\n      project = parts[3];\n      repo = parts[5];\n    }\n\n    if (!owner || !project || !repo) {\n      throw new Error('Azure URL must point to a git repository');\n    }\n\n    const path = url.searchParams.get('path') ?? undefined;\n\n    let ref;\n    const version = url.searchParams.get('version');\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== 'GB') {\n        throw new Error('Azure URL version must point to a git branch');\n      }\n      ref = version.slice(2);\n    }\n\n    return new AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n\n  #origin;\n  #owner;\n  #project;\n  #repo;\n  #path;\n  #ref;\n\n   constructor(\n    origin,\n    owner,\n    project,\n    repo,\n    path,\n    ref,\n  ) {\n    this.#origin = origin;\n    this.#owner = owner;\n    this.#project = project;\n    this.#repo = repo;\n    this.#path = path;\n    this.#ref = ref;\n  }\n\n  #baseUrl = (...parts) => {\n    const url = new URL(this.#origin);\n    url.pathname = parts.map(part => encodeURIComponent(part)).join('/');\n    return url;\n  };\n\n  /**\n   * Returns a repo URL that can be used to navigate to the resource in azure.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  toRepoUrl() {\n    let url;\n    if (this.#project === this.#repo) {\n      url = this.#baseUrl(this.#owner, '_git', this.#repo);\n    } else {\n      url = this.#baseUrl(this.#owner, this.#project, '_git', this.#repo);\n    }\n\n    if (this.#path) {\n      url.searchParams.set('path', this.#path);\n    }\n    if (this.#ref) {\n      url.searchParams.set('version', VERSION_PREFIX_GIT_BRANCH + this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the file download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a file.\n   */\n  toFileUrl() {\n    if (!this.#path) {\n      throw new Error(\n        'Azure URL must point to a specific path to be able to download a file',\n      );\n    }\n\n    const url = this.#baseUrl(\n      this.#owner,\n      this.#project,\n      '_apis',\n      'git',\n      'repositories',\n      this.#repo,\n      'items',\n    );\n    url.searchParams.set('api-version', '6.0');\n    url.searchParams.set('path', this.#path);\n\n    if (this.#ref) {\n      url.searchParams.set('version', this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the archive download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a repo.\n   */\n  toArchiveUrl() {\n    const url = this.#baseUrl(\n      this.#owner,\n      this.#project,\n      '_apis',\n      'git',\n      'repositories',\n      this.#repo,\n      'items',\n    );\n    url.searchParams.set('recursionLevel', 'full');\n    url.searchParams.set('download', 'true');\n    url.searchParams.set('api-version', '6.0');\n\n    if (this.#path) {\n      url.searchParams.set('scopePath', this.#path);\n    }\n    if (this.#ref) {\n      url.searchParams.set('version', this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the API url for fetching commits from a branch for this azure resource.\n   *\n   * Throws an error if the URL does not point to a commit.\n   */\n  toCommitsUrl() {\n    const url = this.#baseUrl(\n      this.#owner,\n      this.#project,\n      '_apis',\n      'git',\n      'repositories',\n      this.#repo,\n      'commits',\n    );\n    url.searchParams.set('api-version', '6.0');\n\n    if (this.#ref) {\n      url.searchParams.set('searchCriteria.itemVersion.version', this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the name of the owner, a user or an organization.\n   */\n  getOwner() {\n    return this.#owner;\n  }\n\n  /**\n   * Returns the name of the project.\n   */\n  getProject() {\n    return this.#project;\n  }\n\n  /**\n   * Returns the name of the repo.\n   */\n  getRepo() {\n    return this.#repo;\n  }\n\n  /**\n   * Returns the file path within the repo if the URL contains one.\n   */\n  getPath() {\n    return this.#path;\n  }\n\n  /**\n   * Returns the git ref in the repo if the URL contains one.\n   */\n  getRef() {\n    return this.#ref;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { isValidHost } from '../helpers';\n\nconst AZURE_HOST = 'dev.azure.com';\n\n/**\n * The configuration parameters for a single Azure provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Azure integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readAzureIntegrationConfig(\n  config,\n) {\n  const host = config.getOptionalString('host') ?? AZURE_HOST;\n  const token = config.getOptionalString('token');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Azure integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  return { host, token };\n}\n\n/**\n * Reads a set of Azure integration configs, and inserts some defaults for\n * public Azure if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readAzureIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readAzureIntegrationConfig);\n\n  // If no explicit dev.azure.com integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, isValidUrl } from '../helpers';\n\nimport { AzureUrl } from './AzureUrl';\nimport { readAzureIntegrationConfigs } from './config';\n\n/**\n * Microsoft Azure based integration.\n *\n * @public\n */\nexport class AzureIntegration  {\n  static factory = ({ config }) => {\n    const configs = readAzureIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.azure') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new AzureIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'azure';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  /*\n   * Azure repo URLs on the form with a `path` query param are treated specially.\n   *\n   * Example base URL: https://dev.azure.com/organization/project/_git/repository?path=%2Fcatalog-info.yaml\n   */\n  resolveUrl(options\n\n\n\n) {\n    const { url, base } = options;\n\n    // If we can parse the url, it is absolute - then return it verbatim\n    if (isValidUrl(url)) {\n      return url;\n    }\n\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n\n      // We lean on the URL path resolution logic to resolve the path param\n      const mockBaseUrl = new URL(`https://a.com${azureUrl.getPath() ?? ''}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set('path', updatedPath);\n\n      if (options.lineNumber) {\n        newUrl.searchParams.set('line', String(options.lineNumber));\n        newUrl.searchParams.set('lineEnd', String(options.lineNumber + 1));\n        newUrl.searchParams.set('lineStartColumn', '1');\n        newUrl.searchParams.set('lineEndColumn', '1');\n      }\n\n      return newUrl.toString();\n    } catch {\n      // If not an actual file path within a repo, treat the URL as raw\n      return new URL(url, base).toString();\n    }\n  }\n\n  resolveEditUrl(url) {\n    // TODO: Implement edit URL for Azure, fallback to view url as I don't know\n    // how azure works.\n    return url;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AzureUrl } from './AzureUrl';\n\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * - from: `https://dev.azure.com/{organization}/{project}/_git/reponame?path={path}&version=GB{commitOrBranch}&_a=contents`\n * - to:   `https://dev.azure.com/{organization}/{project}/_apis/git/repositories/reponame/items?path={path}&version={commitOrBranch}`\n *\n * @param url - A URL pointing to a file\n * @public\n */\nexport function getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @public\n */\nexport function getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\n\n/**\n * Given a URL, return the API URL to fetch commits on the branch.\n *\n * @param url - A URL pointing to a repository or a sub-path\n * @public\n */\nexport function getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getAzureRequestOptions(\n  config,\n  additionalHeaders,\n) {\n  const headers = additionalHeaders\n    ? { ...additionalHeaders }\n    : {};\n\n  if (config.token) {\n    const buffer = Buffer.from(`:${config.token}`, 'utf8');\n    headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  }\n\n  return { headers };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost } from '../helpers';\n\nconst BITBUCKET_HOST = 'bitbucket.org';\nconst BITBUCKET_API_BASE_URL = 'https://api.bitbucket.org/2.0';\n\n/**\n * The configuration parameters for a single Bitbucket API provider.\n *\n * @public\n * @deprecated bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Bitbucket integration config.\n *\n * @param config - The config object of a single integration\n * @public\n * @deprecated bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function readBitbucketIntegrationConfig(\n  config,\n) {\n  const host = config.getOptionalString('host') ?? BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  const token = config.getOptionalString('token');\n  const username = config.getOptionalString('username');\n  const appPassword = config.getOptionalString('appPassword');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword,\n  };\n}\n\n/**\n * Reads a set of Bitbucket integration configs, and inserts some defaults for\n * public Bitbucket if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n * @deprecated bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function readBitbucketIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readBitbucketIntegrationConfig);\n\n  // If no explicit bitbucket.org integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL,\n    });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readBitbucketIntegrationConfigs,\n} from './config';\n\n/**\n * A Bitbucket based integration.\n *\n * @public\n * @deprecated replaced by the integrations bitbucketCloud and bitbucketServer.\n */\nexport class BitbucketIntegration  {\n  static factory = ({\n    config,\n  }) => {\n    const configs = readBitbucketIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.bitbucket') ?? [\n        // if integrations.bitbucket was not used assume the use was migrated to the new configs\n        // and backport for the deprecated integration to be usable for other parts of the system\n        // until these got migrated\n        ...(config.getOptionalConfigArray('integrations.bitbucketCloud') ?? []),\n        ...(config.getOptionalConfigArray('integrations.bitbucketServer') ??\n          []),\n      ],\n    );\n    return basicIntegrations(\n      configs.map(c => new BitbucketIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'bitbucket';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n\n    const url = new URL(resolved);\n\n    if (this.integrationConfig.host === 'bitbucket.org') {\n      // Bitbucket Cloud uses the syntax #lines-{start}[:{end}][,...]\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      // Bitbucket Server uses the syntax #{start}[-{end}][,...]\n      url.hash = `${options.lineNumber}`;\n    }\n\n    return url.toString();\n  }\n\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n\n    editUrl.searchParams.set('mode', 'edit');\n    // TODO: Not sure what spa=0 does, at least bitbucket.org doesn't support it\n    // but this is taken over from the initial implementation.\n    editUrl.searchParams.set('spa', '0');\n    editUrl.searchParams.set('at', urlData.ref);\n    return editUrl.toString();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fetch from 'cross-fetch';\nimport parseGitUrl from 'git-url-parse';\n\n\n/**\n * Given a URL pointing to a path on a provider, returns the default branch.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport async function getBitbucketDefaultBranch(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n\n  const isHosted = resource === 'bitbucket.org';\n  // Bitbucket Server https://docs.atlassian.com/bitbucket-server/rest/7.9.0/bitbucket-rest.html#idp184\n  let branchUrl = isHosted\n    ? `${config.apiBaseUrl}/repositories/${project}/${repoName}`\n    : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n\n  if (response.status === 404 && !isHosted) {\n    // First try the new format, and then if it gets specifically a 404 it should try the old format\n    // (to support old  Atlassian Bitbucket v5.11.1 format )\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. ` +\n        `Response ${response.status} ${response.json()}`,\n    );\n  }\n  return defaultBranch;\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport async function getBitbucketDownloadUrl(\n  url,\n  config,\n) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath,\n  } = parseGitUrl(url);\n\n  const isHosted = resource === 'bitbucket.org';\n\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  // path will limit the downloaded content\n  // /docs will only download the docs folder and everything below it\n  // /docs/index.md will download the docs folder and everything below it\n  const path = filepath ? `&path=${encodeURIComponent(filepath)}` : '';\n  const archiveUrl = isHosted\n    ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`\n    : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n\n  return archiveUrl;\n}\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://bitbucket.org/orgname/reponame/src/master/file.yaml\n * to:   https://api.bitbucket.org/2.0/repositories/orgname/reponame/src/master/file.yaml\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function getBitbucketFileFetchUrl(\n  url,\n  config,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (\n      !owner ||\n      !name ||\n      (filepathtype !== 'browse' &&\n        filepathtype !== 'raw' &&\n        filepathtype !== 'src')\n    ) {\n      throw new Error('Invalid Bitbucket URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n\n    if (config.host === 'bitbucket.org') {\n      if (!ref) {\n        throw new Error('Invalid Bitbucket URL or file path');\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function getBitbucketRequestOptions(\n  config,\n) {\n  const headers = {};\n\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      'utf8',\n    );\n    headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  }\n\n  return {\n    headers,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst BITBUCKET_CLOUD_HOST = 'bitbucket.org';\nconst BITBUCKET_CLOUD_API_BASE_URL = 'https://api.bitbucket.org/2.0';\n\n/**\n * The configuration parameters for a single Bitbucket Cloud API provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Bitbucket Cloud integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readBitbucketCloudIntegrationConfig(\n  config,\n) {\n  const host = BITBUCKET_CLOUD_HOST;\n  const apiBaseUrl = BITBUCKET_CLOUD_API_BASE_URL;\n  // If config is provided, we assume authenticated access is desired\n  // (as the anonymous one is provided by default).\n  const username = config.getString('username');\n  const appPassword = config.getString('appPassword');\n\n  return {\n    host,\n    apiBaseUrl,\n    username,\n    appPassword,\n  };\n}\n\n/**\n * Reads a set of Bitbucket Cloud integration configs,\n * and inserts one for public Bitbucket Cloud if none specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readBitbucketCloudIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readBitbucketCloudIntegrationConfig);\n\n  // If no explicit bitbucket.org integration was added,\n  // put one in the list as a convenience\n  if (result.length === 0) {\n    result.push({\n      host: BITBUCKET_CLOUD_HOST,\n      apiBaseUrl: BITBUCKET_CLOUD_API_BASE_URL,\n    });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readBitbucketCloudIntegrationConfigs,\n} from './config';\n\n/**\n * A Bitbucket Cloud based integration.\n *\n * @public\n */\nexport class BitbucketCloudIntegration  {\n  static factory = ({\n    config,\n  }) => {\n    const configs = readBitbucketCloudIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.bitbucketCloud') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new BitbucketCloudIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(\n      integrationConfig,\n  ) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'bitbucketCloud';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n\n    // Bitbucket Cloud line numbers use the syntax #lines-42, rather than #L42\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n\n      url.hash = `lines-${options.lineNumber}`;\n      return url.toString();\n    }\n\n    return resolved;\n  }\n\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n\n    editUrl.searchParams.set('mode', 'edit');\n    editUrl.searchParams.set('at', urlData.ref);\n    return editUrl.toString();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fetch from 'cross-fetch';\nimport parseGitUrl from 'git-url-parse';\n\n\n/**\n * Given a URL pointing to a path on a provider, returns the default branch.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketCloudDefaultBranch(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n\n  const branchUrl = `${config.apiBaseUrl}/repositories/${project}/${repoName}`;\n  const response = await fetch(\n    branchUrl,\n    getBitbucketCloudRequestOptions(config),\n  );\n\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n\n  const repoInfo = await response.json();\n  const defaultBranch = repoInfo.mainbranch.name;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. ` +\n        `Response ${response.status} ${response.json()}`,\n    );\n  }\n  return defaultBranch;\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketCloudDownloadUrl(\n  url,\n  config,\n) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n  } = parseGitUrl(url);\n\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketCloudDefaultBranch(url, config);\n  }\n  return `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`;\n}\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://bitbucket.org/orgname/reponame/src/master/file.yaml\n * to:   https://api.bitbucket.org/2.0/repositories/orgname/reponame/src/master/file.yaml\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketCloudFileFetchUrl(\n  url,\n  config,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || (filepathtype !== 'src' && filepathtype !== 'raw')) {\n      throw new Error('Invalid Bitbucket Cloud URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n\n    if (!ref) {\n      throw new Error('Invalid Bitbucket Cloud URL or file path');\n    }\n    return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketCloudRequestOptions(\n  config,\n) {\n  const headers = {};\n\n  if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      'utf8',\n    );\n    headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  }\n\n  return {\n    headers,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost } from '../helpers';\n\n/**\n * The configuration parameters for a single Bitbucket Server API provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Bitbucket Server integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readBitbucketServerIntegrationConfig(\n  config,\n) {\n  const host = config.getString('host');\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  const token = config.getOptionalString('token');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket Server integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n\n  return {\n    host,\n    apiBaseUrl,\n    token,\n  };\n}\n\n/**\n * Reads a set of Bitbucket Server integration configs.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readBitbucketServerIntegrationConfigs(\n  configs,\n) {\n  // Read all the explicit integrations\n  // No default integration will be added\n  return configs.map(readBitbucketServerIntegrationConfig);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readBitbucketServerIntegrationConfigs,\n} from './config';\n\n/**\n * A Bitbucket Server based integration.\n *\n * @public\n */\nexport class BitbucketServerIntegration  {\n  static factory = ({\n    config,\n  }) => {\n    const configs = readBitbucketServerIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.bitbucketServer') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new BitbucketServerIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(\n      integrationConfig,\n  ) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'bitbucketServer';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n\n    // Bitbucket Server line numbers use the syntax #example.txt-42, rather than #L42\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n\n      const filename = url.pathname.split('/').slice(-1)[0];\n      url.hash = `${filename}-${options.lineNumber}`;\n      return url.toString();\n    }\n\n    return resolved;\n  }\n\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n\n    editUrl.searchParams.set('mode', 'edit');\n    // TODO: Not sure what spa=0 does, at least bitbucket.org doesn't support it\n    // but this is taken over from the initial implementation.\n    editUrl.searchParams.set('spa', '0');\n    editUrl.searchParams.set('at', urlData.ref);\n    return editUrl.toString();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fetch from 'cross-fetch';\nimport parseGitUrl from 'git-url-parse';\n\n\n/**\n * Given a URL pointing to a path on a provider, returns the default branch.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketServerDefaultBranch(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n\n  // Bitbucket Server https://docs.atlassian.com/bitbucket-server/rest/7.9.0/bitbucket-rest.html#idp184\n  let branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n\n  let response = await fetch(\n    branchUrl,\n    getBitbucketServerRequestOptions(config),\n  );\n\n  if (response.status === 404) {\n    // First try the new format, and then if it gets specifically a 404 it should try the old format\n    // (to support old  Atlassian Bitbucket Server v5.11.1 format )\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketServerRequestOptions(config));\n  }\n\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n\n  const { displayId } = await response.json();\n  const defaultBranch = displayId;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. ` +\n        `Response ${response.status} ${response.json()}`,\n    );\n  }\n  return defaultBranch;\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketServerDownloadUrl(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project, ref, filepath } = parseGitUrl(url);\n\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketServerDefaultBranch(url, config);\n  }\n  // path will limit the downloaded content\n  // /docs will only download the docs folder and everything below it\n  // /docs/index.md will download the docs folder and everything below it\n  const path = filepath ? `&path=${encodeURIComponent(filepath)}` : '';\n  return `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n}\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://bitbucket.company.com/projectname/reponame/src/main/file.yaml\n * to:   https://bitbucket.company.com/rest/api/1.0/project/projectname/reponame/raw/file.yaml?at=main\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketServerFileFetchUrl(\n  url,\n  config,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (\n      !owner ||\n      !name ||\n      (filepathtype !== 'browse' &&\n        filepathtype !== 'raw' &&\n        filepathtype !== 'src')\n    ) {\n      throw new Error('Invalid Bitbucket Server URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketServerRequestOptions(\n  config,\n) {\n  const headers = {};\n\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  }\n\n  return {\n    headers,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost, isValidUrl } from '../helpers';\n\n/**\n * The configuration parameters for a single Gerrit API provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Gerrit integration config.\n *\n * @param config - The config object of a single integration\n *\n * @public\n */\nexport function readGerritIntegrationConfig(\n  config,\n) {\n  const host = config.getString('host');\n  let baseUrl = config.getOptionalString('baseUrl');\n  let cloneUrl = config.getOptionalString('cloneUrl');\n  let gitilesBaseUrl = config.getOptionalString('gitilesBaseUrl');\n  const username = config.getOptionalString('username');\n  const password = config.getOptionalString('password');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${host}' is not a valid host`,\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`,\n    );\n  } else if (cloneUrl && !isValidUrl(cloneUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${cloneUrl}' is not a valid cloneUrl`,\n    );\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`,\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, '/');\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, '/');\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  if (cloneUrl) {\n    cloneUrl = trimEnd(cloneUrl, '/');\n  } else {\n    cloneUrl = baseUrl;\n  }\n\n  return {\n    host,\n    baseUrl,\n    cloneUrl,\n    gitilesBaseUrl,\n    username,\n    password,\n  };\n}\n\n/**\n * Reads a set of Gerrit integration configs.\n *\n * @param configs - All of the integration config objects\n *\n * @public\n */\nexport function readGerritIntegrationConfigs(\n  configs,\n) {\n  return configs.map(readGerritIntegrationConfig);\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { trimStart } from 'lodash';\n\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\n\n/**\n * Parse a Gitiles URL and return branch, file path and project.\n *\n * @remarks\n *\n * Gerrit only handles code reviews so it does not have a native way to browse\n * or showing the content of gits. Image if Github only had the \"pull requests\"\n * tab.\n *\n * Any source code browsing is instead handled by optional services outside\n * Gerrit. The url format chosen for the Gerrit url reader is the one used by\n * the Gitiles project. Gerrit will work perfectly with Backstage without\n * having Gitiles installed but there are some places in the Backstage GUI\n * with links to the url used by the url reader. These will not work unless\n * the urls point to an actual Gitiles installation.\n *\n * Gitiles url:\n * https://g.com/optional_path/\\{project\\}/+/refs/heads/\\{branch\\}/\\{filePath\\}\n *\n *\n * @param url - An URL pointing to a file stored in git.\n * @public\n */\n\nexport function parseGerritGitilesUrl(\n  config,\n  url,\n) {\n  const urlPath = url.replace(config.gitilesBaseUrl, '');\n  const parts = urlPath.split('/').filter(p => !!p);\n\n  const projectEndIndex = parts.indexOf('+');\n\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join('/'), '/');\n\n  const branchIndex = parts.indexOf('heads');\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join('/');\n\n  return {\n    branch,\n    filePath: filePath === '' ? '/' : filePath,\n    project,\n  };\n}\n\n/**\n * Build a Gerrit Gitiles url that targets a specific path.\n *\n * @param config - A Gerrit provider config.\n * @param project - The name of the git project\n * @param branch - The branch we will target.\n * @param filePath - The absolute file path.\n * @public\n */\nexport function builldGerritGitilesUrl(\n  config,\n  project,\n  branch,\n  filePath,\n) {\n  return `${\n    config.gitilesBaseUrl\n  }/${project}/+/refs/heads/${branch}/${trimStart(filePath, '/')}`;\n}\n\n/**\n * Return the authentication prefix.\n *\n * @remarks\n *\n * To authenticate with a password the API url must be prefixed with \"/a/\".\n * If no password is set anonymous access (without the prefix) will\n * be used.\n *\n * @param config - A Gerrit provider config.\n * @public\n */\nexport function getAuthenticationPrefix(\n  config,\n) {\n  return config.password ? '/a/' : '/';\n}\n\n/**\n * Return the url to get branch info from the Gerrit API.\n *\n * @param config - A Gerrit provider config.\n * @param url - An url pointing to a file in git.\n * @public\n */\nexport function getGerritBranchApiUrl(\n  config,\n  url,\n) {\n  const { branch, project } = parseGerritGitilesUrl(config, url);\n\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config,\n  )}projects/${encodeURIComponent(project)}/branches/${branch}`;\n}\n\n/**\n * Return the url to clone the repo that is referenced by the url.\n *\n * @param url - An url pointing to a file in git.\n * @public\n */\nexport function getGerritCloneRepoUrl(\n  config,\n  url,\n) {\n  const { project } = parseGerritGitilesUrl(config, url);\n\n  return `${config.cloneUrl}${getAuthenticationPrefix(config)}${project}`;\n}\n\n/**\n * Return the url to fetch the contents of a file using the Gerrit API.\n *\n * @param config - A Gerrit provider config.\n * @param url - An url pointing to a file in git.\n * @public\n */\nexport function getGerritFileContentsApiUrl(\n  config,\n  url,\n) {\n  const { branch, filePath, project } = parseGerritGitilesUrl(config, url);\n\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config,\n  )}projects/${encodeURIComponent(\n    project,\n  )}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\n\n/**\n * Return the url to query available projects using the Gerrit API.\n *\n * @param config - A Gerrit provider config.\n * @public\n */\nexport function getGerritProjectsApiUrl(config) {\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/`;\n}\n\n/**\n * Return request headers for a Gerrit provider.\n *\n * @param config - A Gerrit provider config\n * @public\n */\nexport function getGerritRequestOptions(config)\n\n {\n  const headers = {};\n\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, 'utf8');\n  headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  return {\n    headers,\n  };\n}\n\n/**\n * Parse the json response from Gerrit and strip the magic prefix.\n *\n * @remarks\n *\n * To prevent against XSSI attacks the JSON response body from Gerrit starts\n * with a magic prefix that must be stripped before it can be fed to a JSON\n * parser.\n *\n * @param response - An API response.\n * @public\n */\nexport async function parseGerritJsonResponse(\n  response,\n) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(\n        `Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`,\n      );\n    }\n  }\n  throw new Error(\n    `Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`,\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations } from '../helpers';\n\nimport {\n\n  readGerritIntegrationConfigs,\n} from './config';\nimport { parseGerritGitilesUrl, builldGerritGitilesUrl } from './core';\n\n/**\n * A Gerrit based integration.\n *\n * @public\n */\nexport class GerritIntegration  {\n  static factory = ({ config }) => {\n    const configs = readGerritIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.gerrit') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new GerritIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'gerrit';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url.startsWith('/')) {\n      const { branch, project } = parseGerritGitilesUrl(this.config, base);\n      return builldGerritGitilesUrl(this.config, project, branch, url);\n    }\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n\n  resolveEditUrl(url) {\n    // Not applicable for gerrit.\n    return url;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost } from '../helpers';\n\nconst GITHUB_HOST = 'github.com';\nconst GITHUB_API_BASE_URL = 'https://api.github.com';\nconst GITHUB_RAW_BASE_URL = 'https://raw.githubusercontent.com';\n\n/**\n * The configuration parameters for a single GitHub integration.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single GitHub integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readGitHubIntegrationConfig(\n  config,\n) {\n  const host = config.getOptionalString('host') ?? GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  let rawBaseUrl = config.getOptionalString('rawBaseUrl');\n  const token = config.getOptionalString('token');\n  const apps = config.getOptionalConfigArray('apps')?.map(c => ({\n    appId: c.getNumber('appId'),\n    clientId: c.getString('clientId'),\n    clientSecret: c.getString('clientSecret'),\n    webhookSecret: c.getString('webhookSecret'),\n    privateKey: c.getString('privateKey'),\n    allowedInstallationOwners: c.getOptionalStringArray(\n      'allowedInstallationOwners',\n    ),\n  }));\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitHub integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, '/');\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\n\n/**\n * Reads a set of GitHub integration configs, and inserts some defaults for\n * public GitHub if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readGitHubIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readGitHubIntegrationConfig);\n\n  // If no explicit github.com integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL,\n    });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\n\n\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://github.com/a/b/blob/branchname/path/to/c.yaml\n * to:   https://api.github.com/repos/a/b/contents/path/to/c.yaml?ref=branchname\n * or:   https://raw.githubusercontent.com/a/b/branchname/c.yaml\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport function getGitHubFileFetchUrl(\n  url,\n  config,\n  credentials,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (\n      !owner ||\n      !name ||\n      !ref ||\n      // GitHub is automatically redirecting tree urls to blob urls so it's\n      // fine to pass a tree url.\n      (filepathtype !== 'blob' &&\n        filepathtype !== 'raw' &&\n        filepathtype !== 'tree')\n    ) {\n      throw new Error('Invalid GitHub URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n    if (chooseEndpoint(config, credentials) === 'api') {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @deprecated This function is no longer used internally\n * @param config - The relevant provider config\n * @public\n */\nexport function getGitHubRequestOptions(\n  config,\n  credentials,\n) {\n  const headers = {};\n\n  if (chooseEndpoint(config, credentials) === 'api') {\n    headers.Accept = 'application/vnd.github.v3.raw';\n  }\n\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n\n  return { headers };\n}\n\nexport function chooseEndpoint(\n  config,\n  credentials,\n) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return 'api';\n  }\n  return 'raw';\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\n\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit, } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\n\n\n\n\n\n\n\n\n\n\nclass Cache {\n    tokenCache = new Map\n\n\n();\n\n  async getOrCreateToken(\n    key,\n    supplier,\n  ) {\n    const item = this.tokenCache.get(key);\n    if (item && this.isNotExpired(item.expiresAt)) {\n      return { accessToken: item.token };\n    }\n\n    const result = await supplier();\n    this.tokenCache.set(key, result);\n    return { accessToken: result.token };\n  }\n\n  // consider timestamps older than 50 minutes to be expired.\n   isNotExpired = (date) =>\n    date.diff(DateTime.local(), 'minutes').minutes > 50;\n}\n\n/**\n * This accept header is required when calling App APIs in GitHub Enterprise.\n * It has no effect on calls to github.com and can probably be removed entirely\n * once GitHub Apps is out of preview.\n */\nconst HEADERS = {\n  Accept: 'application/vnd.github.machine-man-preview+json',\n};\n\n/**\n * GithubAppManager issues and caches tokens for a specific GitHub App.\n */\nclass GithubAppManager {\n    appClient;\n    baseUrl;\n    baseAuthConfig;\n    cache = new Cache();\n    allowedInstallationOwners; // undefined allows all installations\n\n  constructor(config, baseUrl) {\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, '\\n'),\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig,\n    });\n  }\n\n  async getInstallationCredentials(\n    owner,\n    repo,\n  ) {\n    const { installationId, suspended } = await this.getInstallationData(owner);\n    if (this.allowedInstallationOwners) {\n      if (!this.allowedInstallationOwners?.includes(owner)) {\n        return { accessToken: undefined }; // An empty token allows anonymous access to public repos\n      }\n    }\n    if (suspended) {\n      throw new Error(`The GitHub application for ${owner} is suspended`);\n    }\n\n    const cacheKey = repo ? `${owner}/${repo}` : owner;\n\n    // Go and grab an access token for the app scoped to a repository if provided, if not use the organisation installation.\n    return this.cache.getOrCreateToken(cacheKey, async () => {\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS,\n      });\n      if (repo && result.data.repository_selection === 'selected') {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token,\n        });\n        const repos = await installationClient.paginate(\n          installationClient.apps.listReposAccessibleToInstallation,\n        );\n        const hasRepo = repos.some(repository => {\n          return repository.name === repo;\n        });\n        if (!hasRepo) {\n          throw new Error(\n            `The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`,\n          );\n        }\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at),\n      };\n    });\n  }\n\n  getInstallations()\n\n {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n\n   async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find(\n      inst =>\n        inst.account?.login?.toLocaleLowerCase('en-US') ===\n        owner.toLocaleLowerCase('en-US'),\n    );\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by),\n      };\n    }\n    const notFoundError = new Error(\n      `No app installation found for ${owner} in ${this.baseAuthConfig.appId}`,\n    );\n    notFoundError.name = 'NotFoundError';\n    throw notFoundError;\n  }\n}\n\n/**\n * Corresponds to a Github installation which internally could hold several GitHub Apps.\n *\n * @public\n */\nexport class GithubAppCredentialsMux {\n    apps;\n\n  constructor(config) {\n    this.apps =\n      config.apps?.map(ac => new GithubAppManager(ac, config.apiBaseUrl)) ?? [];\n  }\n\n  async getAllInstallations()\n\n {\n    if (!this.apps.length) {\n      return [];\n    }\n\n    const installs = await Promise.all(\n      this.apps.map(app => app.getInstallations()),\n    );\n\n    return installs.flat();\n  }\n\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return undefined;\n    }\n\n    const results = await Promise.all(\n      this.apps.map(app =>\n        app.getInstallationCredentials(owner, repo).then(\n          credentials => ({ credentials, error: undefined }),\n          error => ({ credentials: undefined, error }),\n        ),\n      ),\n    );\n\n    const result = results.find(resultItem => resultItem.credentials);\n    if (result) {\n      return result.credentials.accessToken;\n    }\n\n    const errors = results.map(r => r.error);\n    const notNotFoundError = errors.find(err => err.name !== 'NotFoundError');\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n\n    return undefined;\n  }\n}\n\n/**\n * Handles the creation and caching of credentials for GitHub integrations.\n *\n * @public\n * @remarks\n *\n * TODO: Possibly move this to a backend only package so that it's not used in the frontend by mistake\n */\nexport class SingleInstanceGithubCredentialsProvider\n  \n{\n  static create\n\n = config => {\n    return new SingleInstanceGithubCredentialsProvider(\n      new GithubAppCredentialsMux(config),\n      config.token,\n    );\n  };\n\n   constructor(\n      githubAppCredentialsMux,\n      token,\n  ) {;this.githubAppCredentialsMux = githubAppCredentialsMux;this.token = token;}\n\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'github.com/backstage/foobar'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : undefined;\n\n    let type = 'app';\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = 'token';\n      token = this.token;\n    }\n\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : undefined,\n      token,\n      type,\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SingleInstanceGithubCredentialsProvider } from './SingleInstanceGithubCredentialsProvider';\n\n/**\n * Handles the creation and caching of credentials for GitHub integrations.\n *\n * @public\n * @remarks\n *\n * TODO: Possibly move this to a backend only package so that it's not used in the frontend by mistake\n */\nexport class DefaultGithubCredentialsProvider\n  \n{\n  static fromIntegrations(integrations) {\n    const credentialsProviders =\n      new Map();\n\n    integrations.github.list().forEach(integration => {\n      const credentialsProvider =\n        SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n\n   constructor(\n      providers,\n  ) {;this.providers = providers;}\n\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage/foobar'\n   * })\n   *\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n\n    if (!provider) {\n      throw new Error(\n        `There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`,\n      );\n    }\n\n    return provider.getCredentials(opts);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readGitHubIntegrationConfigs,\n} from './config';\n\n/**\n * A GitHub based integration.\n *\n * @public\n */\nexport class GitHubIntegration  {\n  static factory = ({ config }) => {\n    const configs = readGitHubIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.github') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new GitHubIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'github';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    // GitHub uses blob URLs for files and tree urls for directory listings. But\n    // there is a redirect from tree to blob for files, so we can always return\n    // tree urls here.\n    return replaceGitHubUrlType(defaultScmResolveUrl(options), 'tree');\n  }\n\n  resolveEditUrl(url) {\n    return replaceGitHubUrlType(url, 'edit');\n  }\n}\n\n/**\n * Takes a GitHub URL and replaces the type part (blob, tree etc).\n *\n * @param url - The original URL\n * @param type - The desired type, e.g. \"blob\"\n * @public\n */\nexport function replaceGitHubUrlType(\n  url,\n  type,\n) {\n  return url.replace(\n    /\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//,\n    (_, host, owner, repo) => {\n      return `//${host}/${owner}/${repo}/${type}/`;\n    },\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost, isValidUrl } from '../helpers';\n\nconst GITLAB_HOST = 'gitlab.com';\nconst GITLAB_API_BASE_URL = 'https://gitlab.com/api/v4';\n\n/**\n * The configuration parameters for a single GitLab integration.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single GitLab integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readGitLabIntegrationConfig(\n  config,\n) {\n  const host = config.getString('host');\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  const token = config.getOptionalString('token');\n  let baseUrl = config.getOptionalString('baseUrl');\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, '/');\n  } else {\n    baseUrl = `https://${host}`;\n  }\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${host}' is not a valid host`,\n    );\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`,\n    );\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`,\n    );\n  }\n\n  return { host, token, apiBaseUrl, baseUrl };\n}\n\n/**\n * Reads a set of GitLab integration configs, and inserts some defaults for\n * public GitLab if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readGitLabIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readGitLabIntegrationConfig);\n\n  // As a convenience we always make sure there's at least an unauthenticated\n  // reader for public gitlab repos.\n  if (!result.some(c => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`,\n    });\n  }\n\n  return result;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport fetch from 'cross-fetch';\nimport { InputError } from '@backstage/errors';\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://gitlab.example.com/a/b/blob/master/c.yaml\n * to:   https://gitlab.example.com/a/b/raw/master/c.yaml\n * -or-\n * from: https://gitlab.com/groupA/teams/teamA/subgroupA/repoA/-/blob/branch/filepath\n * to:   https://gitlab.com/api/v4/projects/projectId/repository/files/filepath?ref=branch\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport async function getGitLabFileFetchUrl(\n  url,\n  config,\n) {\n  // TODO(Rugvip): From the old GitlabReaderProcessor; used\n  // the existence of /-/blob/ to switch the logic. Don't know if this\n  // makes sense and it might require some more work.\n  if (url.includes('/-/blob/')) {\n    const projectID = await getProjectId(url, config);\n    return buildProjectUrl(url, projectID).toString();\n  }\n  return buildRawUrl(url).toString();\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getGitLabRequestOptions(config)\n\n {\n  const { token = '' } = config;\n  return {\n    headers: {\n      'PRIVATE-TOKEN': token,\n    },\n  };\n}\n\n// Converts\n// from: https://gitlab.example.com/groupA/teams/repoA/blob/master/c.yaml\n// to:   https://gitlab.example.com/groupA/teams/repoA/raw/master/c.yaml\nexport function buildRawUrl(target) {\n  try {\n    const url = new URL(target);\n\n    const splitPath = url.pathname.split('/').filter(Boolean);\n\n    // Check blob existence\n    const blobIndex = splitPath.indexOf('blob', 2);\n    if (blobIndex < 2 || blobIndex === splitPath.length - 1) {\n      throw new InputError('Wrong GitLab URL');\n    }\n\n    // Take repo path\n    const repoPath = splitPath.slice(0, blobIndex);\n    const restOfPath = splitPath.slice(blobIndex + 1);\n\n    if (!restOfPath.join('/').match(/\\.(yaml|yml)$/)) {\n      throw new InputError('Wrong GitLab URL');\n    }\n\n    // Replace 'blob' with 'raw'\n    url.pathname = [...repoPath, 'raw', ...restOfPath].join('/');\n\n    return url;\n  } catch (e) {\n    throw new InputError(`Incorrect url: ${target}, ${e}`);\n  }\n}\n\n// Converts\n// from: https://gitlab.com/groupA/teams/teamA/subgroupA/repoA/-/blob/branch/filepath\n// to:   https://gitlab.com/api/v4/projects/projectId/repository/files/filepath?ref=branch\nexport function buildProjectUrl(target, projectID) {\n  try {\n    const url = new URL(target);\n\n    const branchAndFilePath = url.pathname.split('/-/blob/')[1];\n    const [branch, ...filePath] = branchAndFilePath.split('/');\n\n    url.pathname = [\n      '/api/v4/projects',\n      projectID,\n      'repository/files',\n      encodeURIComponent(decodeURIComponent(filePath.join('/'))),\n      'raw',\n    ].join('/');\n    url.search = `?ref=${branch}`;\n\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\n\n// Convert\n// from: https://gitlab.com/groupA/teams/teamA/subgroupA/repoA/-/blob/branch/filepath\n// to:   The project ID that corresponds to the URL\nexport async function getProjectId(\n  target,\n  config,\n) {\n  const url = new URL(target);\n\n  if (!url.pathname.includes('/-/blob/')) {\n    throw new Error('Please provide full path to yaml file from GitLab');\n  }\n\n  try {\n    const repo = url.pathname.split('/-/blob/')[0];\n\n    // Convert\n    // to: https://gitlab.com/api/v4/projects/groupA%2Fteams%2FsubgroupA%2FteamA%2Frepo\n    const repoIDLookup = new URL(\n      `${url.origin}/api/v4/projects/${encodeURIComponent(\n        repo.replace(/^\\//, ''),\n      )}`,\n    );\n    const response = await fetch(\n      repoIDLookup.toString(),\n      getGitLabRequestOptions(config),\n    );\n    const data = await response.json();\n\n    if (!response.ok) {\n      throw new Error(\n        `GitLab Error '${data.error}', ${data.error_description}`,\n      );\n    }\n\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readGitLabIntegrationConfigs,\n} from './config';\n\n/**\n * A GitLab based integration.\n *\n * @public\n */\nexport class GitLabIntegration  {\n  static factory = ({ config }) => {\n    const configs = readGitLabIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.gitlab') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new GitLabIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'gitlab';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    return defaultScmResolveUrl(options);\n  }\n\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, 'edit');\n  }\n}\n\n/**\n * Takes a GitLab URL and replaces the type part (blob, tree etc).\n *\n * @param url - The original URL\n * @param type - The desired type, e.g. 'blob', 'tree', 'edit'\n * @public\n */\nexport function replaceGitLabUrlType(\n  url,\n  type,\n) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { AwsS3Integration } from './awsS3/AwsS3Integration';\nimport { AzureIntegration } from './azure/AzureIntegration';\nimport { BitbucketCloudIntegration } from './bitbucketCloud/BitbucketCloudIntegration';\nimport { BitbucketIntegration } from './bitbucket/BitbucketIntegration';\nimport { BitbucketServerIntegration } from './bitbucketServer/BitbucketServerIntegration';\nimport { GerritIntegration } from './gerrit/GerritIntegration';\nimport { GitHubIntegration } from './github/GitHubIntegration';\nimport { GitLabIntegration } from './gitlab/GitLabIntegration';\nimport { defaultScmResolveUrl } from './helpers';\n\n\n\n/**\n * The set of supported integrations.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Exposes the set of supported integrations.\n *\n * @public\n */\nexport class ScmIntegrations  {\n    byType;\n\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      bitbucketCloud: BitbucketCloudIntegration.factory({ config }),\n      bitbucketServer: BitbucketServerIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GitHubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config }),\n    });\n  }\n\n  constructor(integrationsByType) {\n    this.byType = integrationsByType;\n  }\n\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n\n  get azure() {\n    return this.byType.azure;\n  }\n\n  /**\n   * @deprecated in favor of `bitbucketCloud()` and `bitbucketServer()`\n   */\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n\n  get bitbucketCloud() {\n    return this.byType.bitbucketCloud;\n  }\n\n  get bitbucketServer() {\n    return this.byType.bitbucketServer;\n  }\n\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n\n  get github() {\n    return this.byType.github;\n  }\n\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n\n  list() {\n    return Object.values(this.byType).flatMap(\n      i => i.list() ,\n    );\n  }\n\n  byUrl(url) {\n    return Object.values(this.byType)\n      .map(i => i.byUrl(url))\n      .find(Boolean);\n  }\n\n  byHost(host) {\n    return Object.values(this.byType)\n      .map(i => i.byHost(host))\n      .find(Boolean);\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n\n    return integration.resolveUrl(options);\n  }\n\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n\n    return integration.resolveEditUrl(url);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AlertApiForwarder,\n  NoOpAnalyticsApi,\n  ErrorApiForwarder,\n  ErrorAlerter,\n  GoogleAuth,\n  GithubAuth,\n  OktaAuth,\n  GitlabAuth,\n  MicrosoftAuth,\n  BitbucketAuth,\n  OAuthRequestManager,\n  WebStorage,\n  UrlPatternDiscovery,\n  OneLoginAuth,\n  UnhandledErrorForwarder,\n  AtlassianAuth,\n  createFetchApi,\n  FetchMiddlewares,\n} from '@backstage/core-app-api';\n\nimport {\n  createApiFactory,\n  alertApiRef,\n  analyticsApiRef,\n  errorApiRef,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n  oauthRequestApiRef,\n  googleAuthApiRef,\n  githubAuthApiRef,\n  oktaAuthApiRef,\n  gitlabAuthApiRef,\n  microsoftAuthApiRef,\n  storageApiRef,\n  configApiRef,\n  oneloginAuthApiRef,\n  bitbucketAuthApiRef,\n  atlassianAuthApiRef,\n} from '@backstage/core-plugin-api';\nimport {\n  permissionApiRef,\n  IdentityPermissionApi,\n} from '@backstage/plugin-permission-react';\n\nexport const apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) =>\n      UrlPatternDiscovery.compile(\n        `${configApi.getString('backend.baseUrl')}/api/{{ pluginId }}`,\n      ),\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder(),\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi(),\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    },\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi }),\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef,\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi,\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi,\n          }),\n        ],\n      });\n    },\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager(),\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GoogleAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      MicrosoftAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GithubAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        defaultScopes: ['read:user'],\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OktaAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GitlabAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OneLoginAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      BitbucketAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        defaultScopes: ['team'],\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      });\n    },\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef,\n    },\n    factory: ({ config, discovery, identity }) =>\n      IdentityPermissionApi.create({ config, discovery, identity }),\n  }),\n];\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport Button from '@material-ui/core/Button';\nimport { ErrorPanel, Progress, ErrorPage } from '@backstage/core-components';\nimport {\n  MemoryRouter,\n  useInRouterContext,\n  BrowserRouter,\n} from 'react-router-dom';\n\n\n\n\n\n\nexport function OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return React.createElement(React.Fragment, null, children);\n  }\n  return React.createElement(MemoryRouter, null, children);\n}\n\nconst DefaultNotFoundPage = () => (\n  React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\"  ,} )\n);\n\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = '';\n  if (step === 'load-config') {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === 'load-chunk') {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  // TODO: figure out a nicer way to handle routing on the error page, when it can be done.\n  return (\n    React.createElement(OptionallyWrapInRouter, null\n      , React.createElement(ErrorPage, { status: \"501\", statusMessage: message,} )\n    )\n  );\n};\n\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin,\n}) => {\n  return (\n    React.createElement(ErrorPanel, {\n      title: `Error in ${plugin?.getId()}`,\n      defaultExpanded: true,\n      error: error,}\n    \n      , React.createElement(Button, { variant: \"outlined\", onClick: resetError,}, \"Retry\"\n\n      )\n    )\n  );\n};\n\n/**\n * Creates a set of default components to pass along to {@link @backstage/core-app-api#createSpecializedApp}.\n *\n * @public\n */\nexport const components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback,\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\n\nexport const icons = {\n  brokenImage: MuiBrokenImageIcon ,\n  // To be confirmed: see https://github.com/backstage/backstage/issues/4970\n  catalog: MuiMenuBookIcon ,\n  scaffolder: MuiCreateNewFolderIcon ,\n  techdocs: MuiSubjectIcon ,\n  search: MuiSearchIcon ,\n  chat: MuiChatIcon ,\n  dashboard: MuiDashboardIcon ,\n  docs: MuiDocsIcon ,\n  email: MuiEmailIcon ,\n  github: MuiGitHubIcon ,\n  group: MuiPeopleIcon ,\n  help: MuiHelpIcon ,\n  'kind:api': MuiExtensionIcon ,\n  'kind:component': MuiMemoryIcon ,\n  'kind:domain': MuiApartmentIcon ,\n  'kind:group': MuiPeopleIcon ,\n  'kind:location': MuiLocationOnIcon ,\n  'kind:system': MuiCategoryIcon ,\n  'kind:user': MuiPersonIcon ,\n  user: MuiPersonIcon ,\n  warning: MuiWarningIcon ,\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The default predefined burst shapes.\n *\n * @public\n * @remarks\n *\n * How to add a shape:\n *\n * 1. Get the svg shape from figma, should be ~1400 wide, ~400 high\n *    and only the white-to-transparent mask, no colors.\n * 2. Run it through https://jakearchibald.github.io/svgomg/\n * 3. Run that through https://github.com/tigt/mini-svg-data-uri\n *    with something like https://npm.runkit.com/mini-svg-data-uri\n * 4. Wrap the output in `url(\"\")`\n * 5. Give it a name and paste it into the `shapes` object below.\n */\nexport const shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n};\n\n/**\n * The color range variants that are used in e.g. colorful bursts.\n *\n * @public\n */\nexport const colorVariants = {\n  darkGrey: ['#171717', '#383838'],\n  marineBlue: ['#006D8F', '#0049A1'],\n  veryBlue: ['#0027AF', '#270094'],\n  rubyRed: ['#98002B', '#8D1134'],\n  toastyOrange: ['#BE2200', '#A41D00'],\n  purpleSky: ['#8912CA', '#3E00EA'],\n  eveningSea: ['#00FFF2', '#035355'],\n  teal: ['#005B4B'],\n  pinkSea: ['#C8077A', '#C2297D'],\n};\n\n/**\n * Utility to not have to write colors and shapes twice.\n *\n * @public\n * @remarks\n *\n * As the background shapes and colors are decorative, we place them onto the\n * page as a css background-image instead of an html element of its own.\n */\nexport function genPageTheme(colors, shape) {\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(', ')})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n\n  return { colors, shape, backgroundImage };\n}\n\n/**\n * All of the builtin page themes.\n *\n * @public\n */\nexport const pageTheme = {\n  home: genPageTheme(colorVariants.teal, shapes.wave),\n  documentation: genPageTheme(colorVariants.pinkSea, shapes.wave2),\n  tool: genPageTheme(colorVariants.purpleSky, shapes.round),\n  service: genPageTheme(colorVariants.marineBlue, shapes.wave),\n  website: genPageTheme(colorVariants.veryBlue, shapes.wave),\n  library: genPageTheme(colorVariants.rubyRed, shapes.wave),\n  other: genPageTheme(colorVariants.darkGrey, shapes.wave),\n  app: genPageTheme(colorVariants.toastyOrange, shapes.wave),\n  apis: genPageTheme(colorVariants.teal, shapes.wave2),\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createTheme as createMuiTheme } from '@material-ui/core/styles';\nimport { darken, lighten } from '@material-ui/core/styles/colorManipulator';\n\n\n\n\n\n\nimport { pageTheme as defaultPageThemes } from './pageTheme';\n\nconst DEFAULT_FONT_FAMILY =\n  '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\n\n/**\n * A helper for creating theme options.\n *\n * @public\n */\nexport function createThemeOptions(\n  options,\n) {\n  const {\n    palette,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme,\n    pageTheme = defaultPageThemes,\n  } = options;\n\n  if (!pageTheme[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n\n  return {\n    palette,\n    props: {\n      MuiGrid: {\n        spacing: 2,\n      },\n      MuiSwitch: {\n        color: 'primary',\n      },\n    },\n    typography: {\n      fontFamily,\n      h5: {\n        fontWeight: 700,\n      },\n      h4: {\n        fontWeight: 700,\n        fontSize: 28,\n        marginBottom: 6,\n      },\n      h3: {\n        fontSize: 32,\n        fontWeight: 700,\n        marginBottom: 6,\n      },\n      h2: {\n        fontSize: 40,\n        fontWeight: 700,\n        marginBottom: 8,\n      },\n      h1: {\n        fontSize: 54,\n        fontWeight: 700,\n        marginBottom: 10,\n      },\n    },\n    page: pageTheme[defaultPageTheme],\n    getPageTheme: ({ themeId }) =>\n      pageTheme[themeId] ?? pageTheme[defaultPageTheme],\n  };\n}\n\n/**\n * A helper for creating theme overrides.\n *\n * @public\n */\nexport function createThemeOverrides(theme) {\n  return {\n    MuiCssBaseline: {\n      '@global': {\n        html: {\n          height: '100%',\n          fontFamily: theme.typography.fontFamily,\n        },\n        body: {\n          height: '100%',\n          fontFamily: theme.typography.fontFamily,\n          'overscroll-behavior-y': 'none',\n        },\n        a: {\n          color: 'inherit',\n          textDecoration: 'none',\n        },\n      },\n    },\n    MuiTableRow: {\n      // Alternating row backgrounds\n      root: {\n        '&:nth-of-type(odd)': {\n          backgroundColor: theme.palette.background.default,\n        },\n      },\n      // Use pointer for hoverable rows\n      hover: {\n        '&:hover': {\n          cursor: 'pointer',\n        },\n      },\n      // Alternating head backgrounds\n      head: {\n        '&:nth-of-type(odd)': {\n          backgroundColor: theme.palette.background.paper,\n        },\n      },\n    },\n    // Tables are more dense than default mui tables\n    MuiTableCell: {\n      root: {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        verticalAlign: 'middle',\n        lineHeight: '1',\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0,\n      },\n      sizeSmall: {\n        padding: theme.spacing(1.5, 2, 1.5, 2.5),\n      },\n      head: {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        color: 'rgb(179, 179, 179)',\n        fontWeight: 'normal',\n        lineHeight: '1',\n      },\n    },\n    MuiTabs: {\n      // Tabs are smaller than default mui tab rows\n      root: {\n        minHeight: 24,\n      },\n    },\n    MuiTab: {\n      // Tabs are smaller and have a hover background\n      root: {\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: 'initial',\n        letterSpacing: '0.07em',\n        '&:hover': {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95),\n        },\n        [theme.breakpoints.up('md')]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500,\n        },\n      },\n      textColorPrimary: {\n        color: theme.palette.link,\n      },\n    },\n    MuiTableSortLabel: {\n      // No color change on hover, just rely on the arrow showing up instead.\n      root: {\n        color: 'inherit',\n        '&:hover': {\n          color: 'inherit',\n        },\n        '&:focus': {\n          color: 'inherit',\n        },\n      },\n      // Bold font for highlighting selected column\n      active: {\n        fontWeight: 'bold',\n        color: 'inherit',\n      },\n    },\n    MuiListItemText: {\n      dense: {\n        // Default dense list items to adding ellipsis for really long str...\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n      },\n    },\n    MuiButton: {\n      text: {\n        // Text buttons have less padding by default, but we want to keep the original padding\n        padding: undefined,\n      },\n    },\n    MuiChip: {\n      root: {\n        backgroundColor: '#D9D9D9',\n        // By default there's no margin, but it's usually wanted, so we add some trailing margin\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        color: theme.palette.grey[900],\n      },\n      outlined: {\n        color: theme.palette.text.primary,\n      },\n      label: {\n        lineHeight: `${theme.spacing(2.5)}px`,\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: `${theme.spacing(1.75)}px`,\n      },\n      labelSmall: {\n        fontSize: `${theme.spacing(1.5)}px`,\n      },\n      deleteIcon: {\n        color: theme.palette.grey[500],\n        width: `${theme.spacing(3)}px`,\n        height: `${theme.spacing(3)}px`,\n        margin: `0 ${theme.spacing(0.75)}px 0 -${theme.spacing(0.75)}px`,\n      },\n      deleteIconSmall: {\n        width: `${theme.spacing(2)}px`,\n        height: `${theme.spacing(2)}px`,\n        margin: `0 ${theme.spacing(0.5)}px 0 -${theme.spacing(0.5)}px`,\n      },\n    },\n    MuiCard: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        display: 'flex',\n        flexDirection: 'column',\n      },\n    },\n    MuiCardHeader: {\n      root: {\n        // Reduce padding between header and content\n        paddingBottom: 0,\n      },\n    },\n    MuiCardContent: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        flexGrow: 1,\n        '&:last-child': {\n          paddingBottom: undefined,\n        },\n      },\n    },\n    MuiCardActions: {\n      root: {\n        // We default to putting the card actions at the end\n        justifyContent: 'flex-end',\n      },\n    },\n  };\n}\n\n/**\n * Creates a Backstage MUI theme using a palette. The theme is created with the\n * common Backstage options and component styles.\n *\n * @public\n */\nexport function createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createMuiTheme(themeOptions) ;\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createTheme } from './baseTheme';\nimport { pageTheme } from './pageTheme';\nimport { yellow } from '@material-ui/core/colors';\n\n/**\n * The default Backstage light theme.\n *\n * @public\n */\nexport const lightTheme = createTheme({\n  palette: {\n    type: 'light',\n    background: {\n      default: '#F8F8F8',\n    },\n    status: {\n      ok: '#1DB954',\n      warning: '#FF9800',\n      error: '#E22134',\n      running: '#2E77D0',\n      pending: '#FFED51',\n      aborted: '#757575',\n    },\n    bursts: {\n      fontColor: '#FEFEFE',\n      slackChannelText: '#ddd',\n      backgroundColor: {\n        default: '#7C3699',\n      },\n      gradient: {\n        linear: 'linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)',\n      },\n    },\n    primary: {\n      main: '#2E77D0',\n    },\n    banner: {\n      info: '#2E77D0',\n      error: '#E22134',\n      text: '#FFFFFF',\n      link: '#000000',\n      warning: '#FF9800',\n    },\n    border: '#E6E6E6',\n    textContrast: '#000000',\n    textVerySubtle: '#DDD',\n    textSubtle: '#6E6E6E',\n    highlight: '#FFFBCC',\n    errorBackground: '#FFEBEE',\n    warningBackground: '#F59B23',\n    infoBackground: '#ebf5ff',\n    errorText: '#CA001B',\n    infoText: '#004e8a',\n    warningText: '#000000',\n    linkHover: '#2196F3',\n    link: '#0A6EBE',\n    gold: yellow.A700,\n    navigation: {\n      background: '#171717',\n      indicator: '#9BF0E1',\n      color: '#b5b5b5',\n      selectedColor: '#FFF',\n      navItem: {\n        hoverBackground: '#404040',\n      },\n      submenu: {\n        background: '#404040',\n      },\n    },\n    pinSidebarButton: {\n      icon: '#181818',\n      background: '#BDBDBD',\n    },\n    tabbar: {\n      indicator: '#9BF0E1',\n    },\n  },\n  defaultPageTheme: 'home',\n  pageTheme,\n});\n\n/**\n * The default Backstage dark theme.\n *\n * @public\n */\nexport const darkTheme = createTheme({\n  palette: {\n    type: 'dark',\n    background: {\n      default: '#333333',\n    },\n    status: {\n      ok: '#71CF88',\n      warning: '#FFB84D',\n      error: '#F84C55',\n      running: '#3488E3',\n      pending: '#FEF071',\n      aborted: '#9E9E9E',\n    },\n    bursts: {\n      fontColor: '#FEFEFE',\n      slackChannelText: '#ddd',\n      backgroundColor: {\n        default: '#7C3699',\n      },\n      gradient: {\n        linear: 'linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)',\n      },\n    },\n    primary: {\n      main: '#9CC9FF',\n      dark: '#82BAFD',\n    },\n    secondary: {\n      main: '#FF88B2',\n    },\n    banner: {\n      info: '#2E77D0',\n      error: '#E22134',\n      text: '#FFFFFF',\n      link: '#000000',\n      warning: '#FF9800',\n    },\n    border: '#E6E6E6',\n    textContrast: '#FFFFFF',\n    textVerySubtle: '#727272',\n    textSubtle: '#CCCCCC',\n    highlight: '#FFFBCC',\n    errorBackground: '#FFEBEE',\n    warningBackground: '#F59B23',\n    infoBackground: '#ebf5ff',\n    errorText: '#CA001B',\n    infoText: '#004e8a',\n    warningText: '#000000',\n    linkHover: '#82BAFD',\n    link: '#9CC9FF',\n    gold: yellow.A700,\n    navigation: {\n      background: '#424242',\n      indicator: '#9BF0E1',\n      color: '#b5b5b5',\n      selectedColor: '#FFF',\n      navItem: {\n        hoverBackground: '#404040',\n      },\n      submenu: {\n        background: '#404040',\n      },\n    },\n    pinSidebarButton: {\n      icon: '#404040',\n      background: '#BDBDBD',\n    },\n    tabbar: {\n      indicator: '#9BF0E1',\n    },\n  },\n  defaultPageTheme: 'home',\n  pageTheme,\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { darkTheme, lightTheme } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\n\nexport const themes = [\n  {\n    id: 'light',\n    title: 'Light Theme',\n    variant: 'light',\n    icon: React.createElement(LightIcon, null ),\n    Provider: ({ children }) => (\n      React.createElement(ThemeProvider, { theme: lightTheme,}\n        , React.createElement(CssBaseline, null, children)\n      )\n    ),\n  },\n  {\n    id: 'dark',\n    title: 'Dark Theme',\n    variant: 'dark',\n    icon: React.createElement(DarkIcon, null ),\n    Provider: ({ children }) => (\n      React.createElement(ThemeProvider, { theme: darkTheme,}\n        , React.createElement(CssBaseline, null, children)\n      )\n    ),\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { apis, components, icons, themes } from './defaults';\n\n\n\n\n\nimport {\n\n\n\n  createSpecializedApp,\n} from '@backstage/core-app-api';\n\n/**\n * Creates a new Backstage App using a default set of components, icons and themes unless\n * they are explicitly provided.\n *\n * @public\n */\nexport function createApp(\n  options,\n) {\n  return createSpecializedApp({\n    ...options,\n    apis: options?.apis ?? [],\n    bindRoutes: options?.bindRoutes,\n    components: {\n      ...components,\n      ...options?.components,\n    },\n    configLoader: options?.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options?.icons,\n    },\n    plugins: (options?.plugins ) ?? [],\n    themes: options?.themes ?? themes,\n  });\n}\n\n/**\n * The set of app options that {@link createApp} will provide defaults for\n * if they are not passed in explicitly.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nimport { isArray, isString } from 'lodash';\n\n/**\n * Migrate the starred entities from the old format (entity:<kind>:<namespace>:<name>) from the\n * old storage location (/settings/starredEntities) to entity references in the new location\n * (/starredEntities/entityRefs).\n *\n * This will only be executed once since the old location is cleared.\n *\n * @param storageApi - the StorageApi to migrate\n */\nexport async function performMigrationToTheNewBucket({\n  storageApi,\n}\n\n) {\n  const source = storageApi.forBucket('settings');\n  const target = storageApi.forBucket('starredEntities');\n\n  const oldStarredEntities = source.snapshot('starredEntities').value;\n\n  if (!isArray(oldStarredEntities)) {\n    // nothing to do\n    return;\n  }\n  const targetEntities = new Set(\n    target.snapshot('entityRefs').value ?? [],\n  );\n\n  oldStarredEntities\n    .filter(isString)\n    // extract the old format 'entity:<kind>:<namespace>:<name>'\n    .map(old => old.split(':'))\n    // check if the format is valid\n    .filter(split => split.length === 4 && split[0] === 'entity')\n    // convert to entity references\n    .map(([_, kind, namespace, name]) =>\n      stringifyEntityRef({ kind, namespace, name }),\n    )\n    .forEach(e => targetEntities.add(e));\n\n  await target.set('entityRefs', Array.from(targetEntities));\n\n  await source.remove('starredEntities');\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\nimport { performMigrationToTheNewBucket } from './migration';\n\n/**\n * Default implementation of the StarredEntitiesApi that is backed by the StorageApi.\n *\n * @public\n */\nexport class DefaultStarredEntitiesApi  {\n    settingsStore;\n   starredEntities;\n\n  constructor(opts) {\n    // no need to await. The updated content will be caught by the observe$\n    performMigrationToTheNewBucket(opts).then();\n\n    this.settingsStore = opts.storageApi.forBucket('starredEntities');\n\n    this.starredEntities = new Set(\n      this.settingsStore.snapshot('entityRefs').value ?? [],\n    );\n\n    this.settingsStore.observe$('entityRefs').subscribe({\n      next: next => {\n        this.starredEntities = new Set(next.value ?? []);\n        this.notifyChanges();\n      },\n    });\n  }\n\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n\n    await this.settingsStore.set(\n      'entityRefs',\n      Array.from(this.starredEntities),\n    );\n  }\n\n  starredEntitie$() {\n    return this.observable;\n  }\n\n    subscribers = new Set\n\n();\n\n    observable = new ObservableImpl(subscriber => {\n    // forward the the latest value\n    subscriber.next(new Set(this.starredEntities));\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n   notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Box,\n  Chip,\n  Divider,\n  ListItem,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { Link } from '@backstage/core-components';\n\n\n\n\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: 'wrap',\n  },\n  itemText: {\n    width: '100%',\n    wordBreak: 'break-all',\n    marginBottom: '1rem',\n  },\n});\n\n/**\n * Props for {@link CatalogSearchResultListItem}.\n *\n * @public\n */\n\n\n\n\n\n/** @public */\nexport function CatalogSearchResultListItem(\n  props,\n) {\n  const result = props.result ;\n\n  const classes = useStyles();\n  return (\n    React.createElement(Link, { to: result.location,}\n      , React.createElement(ListItem, { alignItems: \"flex-start\", className: classes.flexContainer,}\n        , React.createElement(ListItemText, {\n          className: classes.itemText,\n          primaryTypographyProps: { variant: 'h6' },\n          primary: \n            props.highlight?.fields.title ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: props.highlight.fields.title,\n                preTag: props.highlight.preTag,\n                postTag: props.highlight.postTag,}\n              )\n            ) : (\n              result.title\n            )\n          ,\n          secondary: \n            props.highlight?.fields.text ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: props.highlight.fields.text,\n                preTag: props.highlight.preTag,\n                postTag: props.highlight.postTag,}\n              )\n            ) : (\n              result.text\n            )\n          ,}\n        )\n        , React.createElement(Box, null\n          , result.kind && React.createElement(Chip, { label: `Kind: ${result.kind}`, size: \"small\",} )\n          , result.lifecycle && (\n            React.createElement(Chip, { label: `Lifecycle: ${result.lifecycle}`, size: \"small\",} )\n          )\n        )\n      )\n      , React.createElement(Divider, { component: \"li\",} )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPermission,\n\n} from '@backstage/plugin-permission-common';\n\n/**\n * Permission resource type which corresponds to catalog entities.\n *\n * {@link https://backstage.io/docs/features/software-catalog/software-catalog-overview}\n * @alpha\n */\nexport const RESOURCE_TYPE_CATALOG_ENTITY = 'catalog-entity';\n\n/**\n * Convenience type for catalog entity\n * {@link @backstage/plugin-permission-common#ResourcePermission}s.\n * @alpha\n */\n\n\n\n\n/**\n * This permission is used to authorize actions that involve reading one or more\n * entities from the catalog.\n *\n * If this permission is not authorized, it will appear that the entity does not\n * exist in the catalog — both in the frontend and in API responses.\n * @alpha\n */\nexport const catalogEntityReadPermission = createPermission({\n  name: 'catalog.entity.read',\n  attributes: {\n    action: 'read',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n\n/**\n * This permission is used to authorize actions that involve creating a new\n * catalog entity. This includes registering an existing component into the\n * catalog.\n * @alpha\n */\nexport const catalogEntityCreatePermission = createPermission({\n  name: 'catalog.entity.create',\n  attributes: {\n    action: 'create',\n  },\n});\n\n/**\n * This permission is used to designate actions that involve removing one or\n * more entities from the catalog.\n * @alpha\n */\nexport const catalogEntityDeletePermission = createPermission({\n  name: 'catalog.entity.delete',\n  attributes: {\n    action: 'delete',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n\n/**\n * This permission is used to designate refreshing one or more entities from the\n * catalog.\n * @alpha\n */\nexport const catalogEntityRefreshPermission = createPermission({\n  name: 'catalog.entity.refresh',\n  attributes: {\n    action: 'update',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n\n/**\n * This permission is used to designate actions that involve reading one or more\n * locations from the catalog.\n *\n * If this permission is not authorized, it will appear that the location does\n * not exist in the catalog — both in the frontend and in API responses.\n * @alpha\n */\nexport const catalogLocationReadPermission = createPermission({\n  name: 'catalog.location.read',\n  attributes: {\n    action: 'read',\n  },\n});\n\n/**\n * This permission is used to designate actions that involve creating catalog\n * locations.\n * @alpha\n */\nexport const catalogLocationCreatePermission = createPermission({\n  name: 'catalog.location.create',\n  attributes: {\n    action: 'create',\n  },\n});\n\n/**\n * This permission is used to designate actions that involve deleting locations\n * from the catalog.\n * @alpha\n */\nexport const catalogLocationDeletePermission = createPermission({\n  name: 'catalog.location.delete',\n  attributes: {\n    action: 'delete',\n  },\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Divider,\n  IconButton,\n  ListItemIcon,\n  ListItemText,\n  MenuItem,\n  MenuList,\n  Popover,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport React, { useState } from 'react';\n\nimport { useEntityPermission } from '@backstage/plugin-catalog-react';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common';\n\n// TODO(freben): It should probably instead be the case that Header sets the theme text color to white inside itself unconditionally instead\nconst useStyles = makeStyles({\n  button: {\n    color: 'white',\n  },\n});\n\n// NOTE(freben): Intentionally not exported at this point, since it's part of\n// the unstable extra context menu items concept below\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function EntityContextMenu(props) {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity,\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles();\n  const unregisterPermission = useEntityPermission(\n    catalogEntityDeletePermission,\n  );\n\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const onClose = () => {\n    setAnchorEl(undefined);\n  };\n\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map(item => (\n      React.createElement(MenuItem, {\n        key: item.title,\n        onClick: () => {\n          onClose();\n          item.onClick();\n        },}\n      \n        , React.createElement(ListItemIcon, null\n          , React.createElement(item.Icon, { fontSize: \"small\",} )\n        )\n        , React.createElement(ListItemText, { primary: item.title,} )\n      )\n    )),\n    React.createElement(Divider, { key: \"the divider is here!\"   ,} ),\n  ];\n\n  const disableUnregister =\n    (!unregisterPermission.allowed ||\n      UNSTABLE_contextMenuOptions?.disableUnregister) ??\n    false;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(IconButton, {\n        'aria-label': \"more\",\n        'aria-controls': \"long-menu\",\n        'aria-haspopup': \"true\",\n        'aria-expanded': !!anchorEl,\n        role: \"button\",\n        onClick: onOpen,\n        'data-testid': \"menu-button\",\n        className: classes.button,\n        id: \"long-menu\",}\n      \n        , React.createElement(MoreVert, null )\n      )\n      , React.createElement(Popover, {\n        open: Boolean(anchorEl),\n        onClose: onClose,\n        anchorEl: anchorEl,\n        anchorOrigin: { vertical: 'bottom', horizontal: 'right' },\n        transformOrigin: { vertical: 'top', horizontal: 'right' },\n        'aria-labelledby': \"long-menu\",}\n      \n        , React.createElement(MenuList, null\n          , extraItems\n          , React.createElement(MenuItem, {\n            onClick: () => {\n              onClose();\n              onUnregisterEntity();\n            },\n            disabled: disableUnregister,}\n          \n            , React.createElement(ListItemIcon, null\n              , React.createElement(CancelIcon, { fontSize: \"small\",} )\n            )\n            , React.createElement(ListItemText, { primary: \"Unregister entity\" ,} )\n          )\n          , React.createElement(MenuItem, {\n            onClick: () => {\n              onClose();\n              onInspectEntity();\n            },}\n          \n            , React.createElement(ListItemIcon, null\n              , React.createElement(BugReportIcon, { fontSize: \"small\",} )\n            )\n            , React.createElement(ListItemText, { primary: \"Inspect entity\" ,} )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  DEFAULT_NAMESPACE,\n  RELATION_OWNED_BY,\n} from '@backstage/catalog-model';\nimport {\n  Content,\n  Header,\n  HeaderLabel,\n  Link,\n  Page,\n  Progress,\n  RoutedTabs,\n  WarningPanel,\n} from '@backstage/core-components';\nimport {\n  attachComponentData,\n\n  useElementFilter,\n  useRouteRefParams,\n} from '@backstage/core-plugin-api';\nimport {\n  EntityRefLinks,\n  entityRouteRef,\n  FavoriteEntity,\n  getEntityRelations,\n  InspectEntityDialog,\n  UnregisterEntityDialog,\n  useAsyncEntity,\n} from '@backstage/plugin-catalog-react';\nimport { Box, } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { EntityContextMenu } from '../EntityContextMenu/EntityContextMenu';\n\n/** @public */\n\n\n\n\n\n\n\n\nconst dataKey = 'plugin.catalog.entityLayoutRoute';\n\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, 'core.gatherMountPoints', true); // This causes all mount points that are discovered within this route to use the path of the route itself\n\nfunction EntityLayoutTitle(props\n\n\n) {\n  const { entity, title } = props;\n  return (\n    React.createElement(Box, { display: \"inline-flex\", alignItems: \"center\", height: \"1em\", maxWidth: \"100%\",}\n      , React.createElement(Box, {\n        component: \"span\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",}\n      \n        , title\n      )\n      , entity && React.createElement(FavoriteEntity, { entity: entity,} )\n    )\n  );\n}\n\nfunction headerProps(\n  paramKind,\n  paramNamespace,\n  paramName,\n  entity,\n) {\n  const kind = paramKind ?? entity?.kind ?? '';\n  const namespace = paramNamespace ?? entity?.metadata.namespace ?? '';\n  const name =\n    entity?.metadata.title ?? paramName ?? entity?.metadata.name ?? '';\n  return {\n    headerTitle: `${name}${\n      namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : ''\n    }`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase('en-US');\n      if (entity && entity.spec && 'type' in entity.spec) {\n        t += ' — ';\n        t += (entity.spec ).type.toLocaleLowerCase('en-US');\n      }\n      return t;\n    })(),\n  };\n}\n\nfunction EntityLabels(props) {\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return (\n    React.createElement(React.Fragment, null\n      , ownedByRelations.length > 0 && (\n        React.createElement(HeaderLabel, {\n          label: \"Owner\",\n          value: \n            React.createElement(EntityRefLinks, {\n              entityRefs: ownedByRelations,\n              defaultKind: \"Group\",\n              color: \"inherit\",}\n            )\n          ,}\n        )\n      )\n      , entity.spec?.lifecycle && (\n        React.createElement(HeaderLabel, { label: \"Lifecycle\", value: entity.spec.lifecycle,} )\n      )\n    )\n  );\n}\n\n// NOTE(freben): Intentionally not exported at this point, since it's part of\n// the unstable extra context menu items concept below\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * EntityLayout is a compound component, which allows you to define a layout for\n * entities using a sub-navigation mechanism.\n *\n * Consists of two parts: EntityLayout and EntityLayout.Route\n *\n * @example\n * ```jsx\n * <EntityLayout>\n *   <EntityLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </EntityLayout.Route>\n * </EntityLayout>\n * ```\n *\n * @public\n */\nexport const EntityLayout = (props) => {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children,\n    NotFoundComponent,\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(\n    children,\n    elements =>\n      elements\n        .selectByComponentData({\n          key: dataKey,\n          withStrictError:\n            'Child of EntityLayout must be an EntityLayout.Route',\n        })\n        .getElements() // all nodes, element data, maintain structure or not?\n        .flatMap(({ props: elementProps }) => {\n          if (!entity) {\n            return [];\n          } else if (elementProps.if && !elementProps.if(entity)) {\n            return [];\n          }\n\n          return [\n            {\n              path: elementProps.path,\n              title: elementProps.title,\n              children: elementProps.children,\n              tabProps: elementProps.tabProps,\n            },\n          ];\n        }),\n    [entity],\n  );\n\n  const { headerTitle, headerType } = headerProps(\n    kind,\n    namespace,\n    name,\n    entity,\n  );\n\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate('/');\n  };\n\n  // Make sure to close the dialog if the user clicks links in it that navigate\n  // to another entity.\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.pathname]);\n\n  return (\n    React.createElement(Page, { themeId: entity?.spec?.type?.toString() ?? 'home',}\n      , React.createElement(Header, {\n        title: React.createElement(EntityLayoutTitle, { title: headerTitle, entity: entity,} ),\n        pageTitleOverride: headerTitle,\n        type: headerType,}\n      \n        , entity && (\n          React.createElement(React.Fragment, null\n            , React.createElement(EntityLabels, { entity: entity,} )\n            , React.createElement(EntityContextMenu, {\n              UNSTABLE_extraContextMenuItems: UNSTABLE_extraContextMenuItems,\n              UNSTABLE_contextMenuOptions: UNSTABLE_contextMenuOptions,\n              onUnregisterEntity: () => setConfirmationDialogOpen(true),\n              onInspectEntity: () => setInspectionDialogOpen(true),}\n            )\n          )\n        )\n      )\n\n      , loading && React.createElement(Progress, null )\n\n      , entity && React.createElement(RoutedTabs, { routes: routes,} )\n\n      , error && (\n        React.createElement(Content, null\n          , React.createElement(Alert, { severity: \"error\",}, error.toString())\n        )\n      )\n\n      , !loading && !error && !entity && (\n        React.createElement(Content, null\n          , NotFoundComponent ? (\n            NotFoundComponent\n          ) : (\n            React.createElement(WarningPanel, { title: \"Entity not found\"  ,}, \"There is no \"\n                 , kind, \" with the requested\"   , ' '\n              , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/references\",}, \"kind, namespace, and name\"\n\n              ), \".\"\n\n            )\n          )\n        )\n      )\n\n      , React.createElement(UnregisterEntityDialog, {\n        open: confirmationDialogOpen,\n        entity: entity,\n        onConfirm: cleanUpAfterRemoval,\n        onClose: () => setConfirmationDialogOpen(false),}\n      )\n      , React.createElement(InspectEntityDialog, {\n        open: inspectionDialogOpen,\n        entity: entity,\n        onClose: () => setInspectionDialogOpen(false),}\n      )\n    )\n  );\n};\n\nEntityLayout.Route = Route;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { Button, Dialog, DialogActions, DialogTitle } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\nimport { assertError } from '@backstage/errors';\n\n\n\n\n\n\n\n\nexport function DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    React.createElement(Dialog, { open: open, onClose: onClose,}\n      , React.createElement(DialogTitle, { id: \"responsive-dialog-title\",}, \"Are you sure you want to delete this entity?\"\n\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          disabled: busy,\n          onClick: onDelete,}\n        , \"Delete\"\n\n        )\n        , React.createElement(Button, { onClick: onClose, color: \"primary\",}, \"Cancel\"\n\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport { DeleteEntityDialog } from './DeleteEntityDialog';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { rootRouteRef } from '../../routes';\n\n/**\n * Returns true if the given entity has the orphan annotation given by the\n * catalog.\n *\n * @public\n */\nexport function isOrphan(entity) {\n  return entity?.metadata?.annotations?.['backstage.io/orphan'] === 'true';\n}\n\n/**\n * Displays a warning alert if the entity is marked as orphan with the ability\n * to delete said entity.\n *\n * @public\n */\nexport function EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Alert, { severity: \"warning\", onClick: () => setConfirmationDialogOpen(true),}, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"\n\n\n      )\n      , React.createElement(DeleteEntityDialog, {\n        open: confirmationDialogOpen,\n        entity: entity,\n        onConfirm: cleanUpAfterRemoval,\n        onClose: () => setConfirmationDialogOpen(false),}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  stringifyEntityRef,\n\n} from '@backstage/catalog-model';\nimport {\n  catalogApiRef,\n  EntityRefLink,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport { Box } from '@material-ui/core';\nimport React from 'react';\nimport { ResponseErrorPanel } from '@backstage/core-components';\nimport {\n\n  ENTITY_STATUS_CATALOG_PROCESSING_TYPE,\n} from '@backstage/catalog-client';\nimport { useApi, } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\n\nconst errorFilter = (i) =>\n  i.error &&\n  i.level === 'error' &&\n  i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\n\n\n\n\n\n\n\n\nasync function getOwnAndAncestorsErrors(\n  entityRef,\n  catalogApi,\n) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items\n    .map(item => {\n      const statuses = (item.entity ).status?.items ?? [];\n      const errors = statuses\n        .filter(errorFilter)\n        .map(e => e.error)\n        .filter((e) => Boolean(e));\n      return { errors: errors, entity: item.entity };\n    })\n    .filter(item => item.errors.length > 0);\n  return { items };\n}\n\n/**\n * Returns true if the given entity has any processing errors on it.\n *\n * @public\n */\nexport async function hasCatalogProcessingErrors(\n  entity,\n  context,\n) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n\n  const errors = await getOwnAndAncestorsErrors(\n    stringifyEntityRef(entity),\n    catalogApi,\n  );\n  return errors.items.length > 0;\n}\n\n/**\n * Displays a list of errors from the ancestors of the current entity.\n *\n * @public\n */\nexport function EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n\n  if (error) {\n    return (\n      React.createElement(Box, { mb: 1,}\n        , React.createElement(ResponseErrorPanel, { error: error,} )\n      )\n    );\n  }\n\n  if (loading || !value) {\n    return null;\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , value.items.map((ancestorError, index) => (\n        React.createElement(Box, { key: index, mb: 1,}\n          , stringifyEntityRef(entity) !==\n            stringifyEntityRef(ancestorError.entity) && (\n            React.createElement(Box, { p: 1,}, \"The error below originates from\"\n                  , ' '\n              , React.createElement(EntityRefLink, { entityRef: ancestorError.entity,} )\n            )\n          )\n          , ancestorError.errors.map((e, i) => (\n            React.createElement(ResponseErrorPanel, { key: i, error: e,} )\n          ))\n        )\n      ))\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useAsyncEntity } from '@backstage/plugin-catalog-react';\nimport React, { } from 'react';\nimport {\n  attachComponentData,\n  useApiHolder,\n  useElementFilter,\n\n} from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\nconst ENTITY_SWITCH_KEY = 'core.backstage.entitySwitch';\n\n/** @public */\n\n\n\n\n\n\n\n\nconst EntitySwitchCaseComponent = (_props) => null;\n\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport const EntitySwitch = (props) => {\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(\n    props.children,\n    collection =>\n      collection\n        .selectByComponentData({\n          key: ENTITY_SWITCH_KEY,\n          withStrictError: 'Child of EntitySwitch is not an EntitySwitch.Case',\n        })\n        .getElements()\n        .flatMap((element) => {\n          // Nothing is rendered while loading\n          if (loading) {\n            return [];\n          }\n\n          const { if: condition, children: elementsChildren } =\n            element.props ;\n\n          // If the entity is missing or there is an error, render the default page\n          if (!entity) {\n            return [\n              {\n                if: condition === undefined,\n                children: elementsChildren,\n              },\n            ];\n          }\n          return [\n            {\n              if: condition?.(entity, { apis }) ?? true,\n              children: elementsChildren,\n            },\n          ];\n        }),\n    [apis, entity, loading],\n  );\n  const hasAsyncCases = results.some(\n    r => typeof r.if === 'object' && 'then' in r.if,\n  );\n\n  if (hasAsyncCases) {\n    return React.createElement(AsyncEntitySwitch, { results: results,} );\n  }\n\n  return results.find(r => r.if)?.children ?? null;\n};\n\nfunction AsyncEntitySwitch({ results }) {\n  const { loading, value } = useAsync(async () => {\n    const promises = results.map(\n      async ({ if: condition, children: output }) => {\n        try {\n          if (await condition) {\n            return output;\n          }\n        } catch {\n          /* ignored */\n        }\n\n        return null;\n      },\n    );\n    return (await Promise.all(promises)).find(Boolean) ?? null;\n  }, [results]);\n\n  if (loading || !value) {\n    return null;\n  }\n\n  return value;\n}\n\nEntitySwitch.Case = EntitySwitchCaseComponent;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CatalogFilterLayout } from '@backstage/plugin-catalog-react';\n\n/**\n * @public\n * @deprecated Use `CatalogFilterLayout` from `@backstage/plugin-catalog-react` instead.\n */\nexport const FilteredEntityLayout = CatalogFilterLayout \n\n;\n\n/**\n * @public\n * @deprecated Use `CatalogFilterLayout.Filters` from `@backstage/plugin-catalog-react` instead.\n */\nexport const FilterContainer = CatalogFilterLayout.Filters;\n\n/**\n * @public\n * @deprecated Use `CatalogFilterLayout.Content` from `@backstage/plugin-catalog-react` instead.\n */\nexport const EntityListContainer = CatalogFilterLayout.Content;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CatalogClient } from '@backstage/catalog-client';\n\nimport {\n  catalogApiRef,\n  entityRouteRef,\n  starredEntitiesApiRef,\n} from '@backstage/plugin-catalog-react';\nimport { createComponentRouteRef, viewTechDocRouteRef } from './routes';\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  fetchApiRef,\n  storageApiRef,\n} from '@backstage/core-plugin-api';\nimport { DefaultStarredEntitiesApi } from './apis';\n\n\n\n\n\n\n\n\n\n\nimport { rootRouteRef } from './routes';\n\n/** @public */\nexport const catalogPlugin = createPlugin({\n  id: 'catalog',\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ discoveryApi, fetchApi }) =>\n        new CatalogClient({ discoveryApi, fetchApi }),\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) =>\n        new DefaultStarredEntitiesApi({ storageApi }),\n    }),\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef,\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef,\n  },\n});\n\n/** @public */\nexport const CatalogIndexPage =\n  catalogPlugin.provide(\n    createRoutableExtension({\n      name: 'CatalogIndexPage',\n      component: () =>\n        import('./components/CatalogPage').then(m => m.CatalogPage),\n      mountPoint: rootRouteRef,\n    }),\n  );\n\n/** @public */\nexport const CatalogEntityPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: 'CatalogEntityPage',\n    component: () =>\n      import('./components/CatalogEntityPage').then(m => m.CatalogEntityPage),\n    mountPoint: entityRouteRef,\n  }),\n);\n\n/** @public */\nexport const EntityAboutCard =\n  catalogPlugin.provide(\n    createComponentExtension({\n      name: 'EntityAboutCard',\n      component: {\n        lazy: () => import('./components/AboutCard').then(m => m.AboutCard),\n      },\n    }),\n  );\n\n/** @public */\nexport const EntityLinksCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLinksCard',\n    component: {\n      lazy: () =>\n        import('./components/EntityLinksCard').then(m => m.EntityLinksCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityHasSystemsCard =\n  catalogPlugin.provide(\n    createComponentExtension({\n      name: 'EntityHasSystemsCard',\n      component: {\n        lazy: () =>\n          import('./components/HasSystemsCard').then(m => m.HasSystemsCard),\n      },\n    }),\n  );\n\n/** @public */\nexport const EntityHasComponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/HasComponentsCard').then(m => m.HasComponentsCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityHasSubcomponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasSubcomponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/HasSubcomponentsCard').then(\n          m => m.HasSubcomponentsCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityHasResourcesCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasResourcesCard',\n    component: {\n      lazy: () =>\n        import('./components/HasResourcesCard').then(m => m.HasResourcesCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityDependsOnComponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityDependsOnComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/DependsOnComponentsCard').then(\n          m => m.DependsOnComponentsCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityDependencyOfComponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityDependencyOfComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/DependencyOfComponentsCard').then(\n          m => m.DependencyOfComponentsCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityDependsOnResourcesCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityDependsOnResourcesCard',\n    component: {\n      lazy: () =>\n        import('./components/DependsOnResourcesCard').then(\n          m => m.DependsOnResourcesCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const RelatedEntitiesCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'RelatedEntitiesCard',\n    component: {\n      lazy: () =>\n        import('./components/RelatedEntitiesCard').then(\n          m => m.RelatedEntitiesCard,\n        ),\n    },\n  }),\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  scmIntegrationsApiRef,\n  ScmIntegrationsApi,\n} from '@backstage/integration-react';\nimport {\n\n  configApiRef,\n  createApiFactory,\n\n  discoveryApiRef,\n\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport {\n\n\n  techdocsApiRef,\n\n  techdocsStorageApiRef,\n} from '@backstage/plugin-techdocs-react';\n\n// TODO: Export type from plugin-techdocs and import this here\n// import { ParsedEntityId } from '@backstage/plugin-techdocs'\n\n/**\n * Note: Override TechDocs API to use local mkdocs server instead of techdocs-backend.\n */\n\nclass TechDocsDevStorageApi  {\n   configApi;\n   discoveryApi;\n   identityApi;\n\n  constructor({\n    configApi,\n    discoveryApi,\n    identityApi,\n  }\n\n\n\n) {\n    this.configApi = configApi;\n    this.discoveryApi = discoveryApi;\n    this.identityApi = identityApi;\n  }\n\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl('techdocs');\n  }\n\n  async getStorageUrl() {\n    return `${await this.discoveryApi.getBaseUrl('techdocs')}/static/docs`;\n  }\n\n  async getBuilder() {\n    return this.configApi.getString('techdocs.builder');\n  }\n\n  async getEntityDocs(_entityId, path) {\n    const apiOrigin = await this.getApiOrigin();\n    // Irrespective of the entity, use mkdocs server to find the file for the path.\n    const url = `${apiOrigin}/${path}`;\n\n    const request = await fetch(\n      `${url.endsWith('/') ? url : `${url}/`}index.html`,\n    );\n\n    if (request.status === 404) {\n      throw new Error('Page not found');\n    }\n\n    return request.text();\n  }\n\n  async syncEntityDocs(_) {\n    // this is just stub of this function as we don't need to check if docs are up to date,\n    // we always want to retrigger a new build\n    return 'cached';\n  }\n\n  // Used by transformer to modify the request to assets (CSS, Image) from inside the HTML.\n  async getBaseUrl(\n    oldBaseUrl,\n    _entityId,\n    path,\n  ) {\n    const apiOrigin = await this.getApiOrigin();\n    return new URL(oldBaseUrl, `${apiOrigin}/${path}`).toString();\n  }\n}\n\nclass TechDocsDevApi  {\n   configApi;\n   discoveryApi;\n   identityApi;\n\n  constructor({\n    configApi,\n    discoveryApi,\n    identityApi,\n  }\n\n\n\n) {\n    this.configApi = configApi;\n    this.discoveryApi = discoveryApi;\n    this.identityApi = identityApi;\n  }\n\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl('techdocs');\n  }\n\n  async getEntityMetadata(_entityId) {\n    return {\n      apiVersion: 'backstage.io/v1alpha1',\n      kind: 'Component',\n      metadata: {\n        name: 'local',\n      },\n      spec: {\n        owner: 'test',\n        lifecycle: 'experimental',\n      },\n    };\n  }\n\n  async getTechDocsMetadata(_entityId) {\n    return {\n      site_name: 'Live preview environment',\n      site_description: '',\n    };\n  }\n}\n\nexport const apis = [\n  createApiFactory({\n    api: techdocsStorageApiRef,\n    deps: {\n      configApi: configApiRef,\n      discoveryApi: discoveryApiRef,\n      identityApi: identityApiRef,\n    },\n    factory: ({ configApi, discoveryApi, identityApi }) =>\n      new TechDocsDevStorageApi({\n        configApi,\n        discoveryApi,\n        identityApi,\n      }),\n  }),\n  createApiFactory({\n    api: techdocsApiRef,\n    deps: {\n      configApi: configApiRef,\n      discoveryApi: discoveryApiRef,\n      identityApi: identityApiRef,\n    },\n    factory: ({ configApi, discoveryApi, identityApi }) =>\n      new TechDocsDevApi({\n        configApi,\n        discoveryApi,\n        identityApi,\n      }),\n  }),\n  createApiFactory({\n    api: scmIntegrationsApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => ScmIntegrationsApi.fromConfig(configApi),\n  }),\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { defaultConfigLoader } from '@backstage/core-app-api';\n\nconst PRODUCTION_CONFIG = {\n  backend: {\n    baseUrl: 'http://localhost:3000',\n  },\n  techdocs: {\n    builder: 'external',\n  },\n};\n\nconst DEVELOPMENT_CONFIG = {\n  backend: {\n    baseUrl: 'http://localhost:7007',\n  },\n  techdocs: {\n    builder: 'external',\n  },\n};\n\nasync function isProductionServe() {\n  const res = await fetch('/.detect');\n  if (!res.ok) {\n    return false;\n  }\n  const text = await res.text();\n  return text.trim() === 'techdocs-cli-server';\n}\n\nexport async function configLoader() {\n  const defaultConfigs = await defaultConfigLoader();\n  const isProduction = await isProductionServe();\n\n  return [\n    ...defaultConfigs,\n    {\n      context: 'detected',\n      data: isProduction ? PRODUCTION_CONFIG : DEVELOPMENT_CONFIG,\n    },\n  ];\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  svg: {\n    width: 'auto',\n    height: 30,\n  },\n  path: {\n    fill: '#7df3e1',\n  },\n});\nconst LogoFull = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('svg', {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2079.95 456.05\"   ,}\n    \n      , React.createElement('path', {\n        className: classes.path,\n        d: \"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z\",}\n      )\n    )\n  );\n};\n\nexport default LogoFull;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  svg: {\n    width: 'auto',\n    height: 28,\n  },\n  path: {\n    fill: '#7df3e1',\n  },\n});\n\nconst LogoIcon = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('svg', {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 337.46 428.5\"   ,}\n    \n      , React.createElement('path', {\n        className: classes.path,\n        d: \"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z\",}\n      )\n    )\n  );\n};\n\nexport default LogoIcon;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\nimport { Link, makeStyles } from '@material-ui/core';\nimport LibraryBooks from '@material-ui/icons/LibraryBooks';\nimport LogoFull from './LogoFull';\nimport LogoIcon from './LogoIcon';\n\nimport {\n  Sidebar,\n  SidebarItem,\n  SidebarPage,\n  sidebarConfig,\n  SidebarDivider,\n  useSidebarOpenState,\n} from '@backstage/core-components';\nimport { NavLink } from 'react-router-dom';\n\nconst useSidebarLogoStyles = makeStyles({\n  root: {\n    width: sidebarConfig.drawerWidthClosed,\n    height: 3 * sidebarConfig.logoHeight,\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    alignItems: 'center',\n    marginBottom: -14,\n  },\n  link: {\n    width: sidebarConfig.drawerWidthClosed,\n    marginLeft: 24,\n  },\n});\n\nconst SidebarLogo = () => {\n  const classes = useSidebarLogoStyles();\n  const { isOpen } = useSidebarOpenState();\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Link, {\n        component: NavLink,\n        to: \"/docs/default/component/local/\",\n        underline: \"none\",\n        className: classes.link,}\n      \n        , isOpen ? React.createElement(LogoFull, null ) : React.createElement(LogoIcon, null )\n      )\n    )\n  );\n};\n\nexport const Root = ({ children }) => (\n  React.createElement(SidebarPage, null\n    , React.createElement(Sidebar, null\n      , React.createElement(SidebarLogo, null )\n      , React.createElement(SidebarDivider, null )\n      /* Global nav, not org-specific */\n      , React.createElement(SidebarItem, {\n        icon: LibraryBooks,\n        to: \"/docs/default/component/local\",\n        text: \"Docs Preview\" ,}\n      )\n      /* End global nav */\n    )\n    , children\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core';\n\nimport { Box, Tooltip, IconButton } from '@material-ui/core';\nimport LightIcon from '@material-ui/icons/Brightness7';\nimport DarkIcon from '@material-ui/icons/Brightness4';\n\nimport { appThemeApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport {\n  TechDocsReaderPage,\n  TechDocsReaderPageHeader,\n  TechDocsReaderPageContent,\n} from '@backstage/plugin-techdocs';\n\nconst useStyles = makeStyles((theme) => ({\n  headerIcon: {\n    color: theme.palette.common.white,\n    width: '32px',\n    height: '32px',\n  },\n  content: {\n    backgroundColor: theme.palette.background.default,\n  },\n  contentToolbar: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    padding: 0,\n  },\n}));\n\nvar Themes; (function (Themes) {\n  const LIGHT = 'light'; Themes[\"LIGHT\"] = LIGHT;\n  const DARK = 'dark'; Themes[\"DARK\"] = DARK;\n})(Themes || (Themes = {}));\n\nexport const TechDocsThemeToggle = () => {\n  const appThemeApi = useApi(appThemeApiRef);\n  const classes = useStyles();\n  const [theme, setTheme] = useState(\n    (appThemeApi.getActiveThemeId() ) || Themes.LIGHT,\n  );\n\n  const themes = {\n    [Themes.LIGHT]: {\n      icon: DarkIcon,\n      title: 'Dark theme',\n    },\n    [Themes.DARK]: {\n      icon: LightIcon,\n      title: 'Light theme',\n    },\n  };\n\n  const { title, icon: Icon } = themes[theme];\n\n  const handleSetTheme = () => {\n    setTheme(prevTheme => {\n      const newTheme = prevTheme === Themes.LIGHT ? Themes.DARK : Themes.LIGHT;\n      appThemeApi.setActiveThemeId(newTheme);\n      return newTheme;\n    });\n  };\n\n  return (\n    React.createElement(Box, { display: \"flex\", alignItems: \"center\", mr: 2,}\n      , React.createElement(Tooltip, { title: title, arrow: true,}\n        , React.createElement(IconButton, { size: \"small\", onClick: handleSetTheme,}\n          , React.createElement(Icon, { className: classes.headerIcon,} )\n        )\n      )\n    )\n  );\n};\n\nconst DefaultTechDocsPage = () => {\n  return (\n    React.createElement(TechDocsReaderPage, null\n      , React.createElement(TechDocsReaderPageHeader, null )\n      , React.createElement(TechDocsReaderPageContent, { withSearch: false,} )\n    )\n  );\n};\n\nexport const techDocsPage = React.createElement(DefaultTechDocsPage, null );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Navigate, Route } from 'react-router';\n\nimport {\n  DefaultTechDocsHome,\n  TechDocsIndexPage,\n  TechDocsReaderPage,\n  techdocsPlugin,\n} from '@backstage/plugin-techdocs';\nimport {\n  createTechDocsAddonExtension,\n  TechDocsAddons,\n  TechDocsAddonLocations,\n} from '@backstage/plugin-techdocs-react';\nimport { createApp } from '@backstage/app-defaults';\nimport { FlatRoutes } from '@backstage/core-app-api';\nimport { CatalogEntityPage } from '@backstage/plugin-catalog';\n\nimport { apis } from './apis';\nimport * as plugins from './plugins';\nimport { configLoader } from './config';\nimport { Root } from './components/Root';\nimport { techDocsPage, TechDocsThemeToggle } from './components/TechDocsPage';\n\nconst app = createApp({\n  apis,\n  configLoader,\n  plugins: Object.values(plugins),\n});\n\nconst AppProvider = app.getProvider();\nconst AppRouter = app.getRouter();\n\nconst ThemeToggleAddon = techdocsPlugin.provide(\n  createTechDocsAddonExtension({\n    name: 'ThemeToggleAddon',\n    component: TechDocsThemeToggle,\n    location: TechDocsAddonLocations.Header,\n  }),\n);\n\nconst routes = (\n  React.createElement(FlatRoutes, null\n    , React.createElement(Navigate, { key: \"/\", to: \"/docs/default/component/local/\",} )\n    /* we need this route as TechDocs header links relies on it */\n    , React.createElement(Route, {\n      path: \"/catalog/:namespace/:kind/:name\",\n      element: React.createElement(CatalogEntityPage, null ),}\n    )\n    , React.createElement(Route, { path: \"/docs\", element: React.createElement(TechDocsIndexPage, null ),}\n      , React.createElement(DefaultTechDocsHome, null )\n    )\n    , React.createElement(Route, {\n      path: \"/docs/:namespace/:kind/:name/*\",\n      element: React.createElement(TechDocsReaderPage, null ),}\n    \n      , techDocsPage\n      , React.createElement(TechDocsAddons, null\n        , React.createElement(ThemeToggleAddon, null )\n      )\n    )\n  )\n);\n\nconst App = () => (\n  React.createElement(AppProvider, null\n    , React.createElement(AppRouter, null\n      , React.createElement(Root, null, routes)\n    )\n  )\n);\n\nexport default App;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport '@backstage/cli/asset-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(React.createElement(App, null ), document.getElementById('root'));\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nfunction getGlobalObject() {\n  if (typeof window !== 'undefined' && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== 'undefined' && self.Math === Math) {\n    return self;\n  }\n  // eslint-disable-next-line no-new-func\n  return Function('return this')();\n}\n\nconst globalObject = getGlobalObject();\n\nconst makeKey = (id) => `__@backstage/${id}__`;\n\n/**\n * Serializes access to a global singleton value, with the first caller creating the value.\n *\n * @public\n */\nexport function getOrCreateGlobalSingleton(\n  id,\n  supplier,\n) {\n  const key = makeKey(id);\n\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext, } from 'react';\nimport { getOrCreateGlobalSingleton } from './globalObject';\nimport { createVersionedValueMap, } from './VersionedValue';\n\n/**\n * Get the existing or create a new versioned React context that's\n * stored inside a global singleton.\n *\n * @param key - A key that uniquely identifies the context.\n * @public\n * @example\n *\n * ```ts\n * const MyContext = createVersionedContext<{ 1: string }>('my-context');\n *\n * const MyContextProvider = ({children}) => (\n *   <MyContext.Provider value={createVersionedValueMap({ 1: 'value-for-version-1' })}>\n *     {children}\n *   <MyContext.Provider>\n * )\n * ```\n */\nexport function createVersionedContext\n\n(key) {\n  return getOrCreateGlobalSingleton(key, () =>\n    createContext(undefined),\n  );\n}\n\n/**\n * A hook that simplifies the consumption of a versioned contexts that's\n * stored inside a global singleton.\n *\n * @param key - A key that uniquely identifies the context.\n * @public\n * @example\n *\n * ```ts\n * const versionedHolder = useVersionedContext<{ 1: string }>('my-context');\n *\n * if (!versionedHolder) {\n *   throw new Error('My context is not available!')\n * }\n *\n * const myValue = versionedHolder.atVersion(1);\n *\n * // ...\n * ```\n */\nexport function useVersionedContext\n\n(key) {\n  return useContext(createVersionedContext(key));\n}\n\n/**\n * Creates a helper for writing tests towards multiple different\n * combinations of versions provided from a context.\n *\n * @param key - A key that uniquely identifies the context.\n * @public\n * @example\n *\n * ```ts\n * const context = createVersionedContextForTesting('my-context');\n *\n * afterEach(() => {\n *   context.reset();\n * });\n *\n * it('should work when provided with version 1', () => {\n *   context.set({1: 'value-for-version-1'})\n *\n *   // ...\n * })\n * ```\n */\nexport function createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      (globalThis )[`__@backstage/${key}__`] = createContext(\n        createVersionedValueMap(versions),\n      );\n    },\n    reset() {\n      delete (globalThis )[`__@backstage/${key}__`];\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The versioned value interface is a container for a set of values that\n * can be looked up by version. It is intended to be used as a container\n * for values that can be versioned independently of package versions.\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * Creates a container for a map of versioned values that implements VersionedValue.\n *\n * @public\n */\nexport function createVersionedValueMap\n\n(versions) {\n  Object.freeze(versions);\n  return {\n    atVersion(version) {\n      return versions[version];\n    },\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * The API reference for the {@link @backstage/catalog-client#CatalogApi}.\n * @public\n */\nexport const catalogApiRef = createApiRef({\n  id: 'plugin.catalog.service',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n/**\n * An API to store starred entities\n *\n * @public\n */\nexport const starredEntitiesApiRef = createApiRef({\n  id: 'catalog-react.starred-entities',\n});\n\n/**\n * An API to store and retrieve starred entities\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\n\n\n/**\n * An in-memory mock implementation of the StarredEntitiesApi.\n *\n * @public\n */\nexport class MockStarredEntitiesApi  {\n    starredEntities = new Set();\n    subscribers = new Set\n\n();\n\n    observable = new ObservableImpl(subscriber => {\n    subscriber.next(new Set(this.starredEntities));\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  Drawer,\n  Grid,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\n\n\n/** @public */\nexport const Filters = (props) => {\n  const isMidSizeScreen = useMediaQuery(theme =>\n    theme.breakpoints.down('md'),\n  );\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n\n  return isMidSizeScreen ? (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, {\n        style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n        onClick: () => setFilterDrawerOpen(true),\n        startIcon: React.createElement(FilterListIcon, null ),}\n      , \"Filters\"\n\n      )\n      , React.createElement(Drawer, {\n        open: filterDrawerOpen,\n        onClose: () => setFilterDrawerOpen(false),\n        anchor: \"left\",\n        disableAutoFocus: true,\n        keepMounted: true,\n        variant: \"temporary\",}\n      \n        , React.createElement(Box, { m: 2,}\n          , React.createElement(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            style: { marginBottom: theme.spacing(1) },}\n          , \"Filters\"\n\n          )\n          , props.children\n        )\n      )\n    )\n  ) : (\n    React.createElement(Grid, { item: true, lg: 2,}\n      , props.children\n    )\n  );\n};\n\n/** @public */\nexport const Content = (props) => {\n  return (\n    React.createElement(Grid, { item: true, xs: 12, lg: 10,}\n      , props.children\n    )\n  );\n};\n\n/** @public */\nexport const CatalogFilterLayout = (props) => {\n  return (\n    React.createElement(Grid, { container: true, style: { position: 'relative' },}\n      , props.children\n    )\n  );\n};\n\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n  useVersionedContext,\n} from '@backstage/version-bridge';\nimport React, { } from 'react';\n\n/** @public */\n\n\n\n\n\n\n\n// This context has support for multiple concurrent versions of this package.\n// It is currently used in parallel with the old context in order to provide\n// a smooth transition, but will eventually be the only context we use.\nconst NewEntityContext = createVersionedContext(\n  'entity-context',\n);\n\n/**\n * Properties for the AsyncEntityProvider component.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Provides a loaded entity to be picked up by the `useEntity` hook.\n *\n * @public\n */\nexport const AsyncEntityProvider = ({\n  children,\n  entity,\n  loading,\n  error,\n  refresh,\n}) => {\n  const value = { entity, loading, error, refresh };\n  // We provide both the old and the new context, since\n  // consumers might be doing things like `useContext(EntityContext)`\n  return (\n    React.createElement(NewEntityContext.Provider, { value: createVersionedValueMap({ 1: value }),}\n      , children\n    )\n  );\n};\n\n/**\n * Properties for the EntityProvider component.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Provides an entity to be picked up by the `useEntity` hook.\n *\n * @public\n */\nexport const EntityProvider = (props) => (\n  React.createElement(AsyncEntityProvider, {\n    entity: props.entity,\n    loading: !Boolean(props.entity),\n    error: undefined,\n    refresh: undefined,\n    children: props.children,}\n  )\n);\n\n/**\n * Grab the current entity from the context, throws if the entity has not yet been loaded\n * or is not available.\n *\n * @public\n */\nexport function useEntity()\n\n {\n  const versionedHolder = useVersionedContext(\n    'entity-context',\n  );\n\n  if (!versionedHolder) {\n    throw new Error('Entity context is not available');\n  }\n\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error('EntityContext v1 not available');\n  }\n\n  if (!value.entity) {\n    throw new Error(\n      'useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.',\n    );\n  }\n\n  return { entity: value.entity  };\n}\n\n/**\n * Grab the current entity from the context, provides loading state and errors, and the ability to refresh.\n *\n * @public\n */\nexport function useAsyncEntity\n\n() {\n  const versionedHolder = useVersionedContext(\n    'entity-context',\n  );\n\n  if (!versionedHolder) {\n    throw new Error('Entity context is not available');\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error('EntityContext v1 not available');\n  }\n\n  const { entity, loading, error, refresh } = value;\n  return { entity: entity , loading, error, refresh };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function reduceCatalogFilters(\n  filters,\n) {\n  return filters.reduce((compoundFilter, filter) => {\n    return {\n      ...compoundFilter,\n      ...(filter.getCatalogFilters ? filter.getCatalogFilters() : {}),\n    };\n  }, {} );\n}\n\nexport function reduceEntityFilters(\n  filters,\n) {\n  return (entity) =>\n    filters.every(\n      filter => !filter.filterEntity || filter.filterEntity(entity),\n    );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  parseEntityRef,\n} from '@backstage/catalog-model';\n\n// TODO(freben): This should be returning entity refs instead\n/**\n * Get the related entity references.\n *\n * @public\n */\nexport function getEntityRelations(\n  entity,\n  relationType,\n  filter,\n) {\n  let entityNames =\n    entity?.relations\n      ?.filter(r => r.type === relationType)\n      .map(r => parseEntityRef(r.targetRef)) || [];\n\n  if (filter?.kind) {\n    entityNames = entityNames.filter(\n      e =>\n        e.kind.toLocaleLowerCase('en-US') ===\n        filter.kind.toLocaleLowerCase('en-US'),\n    );\n  }\n\n  return entityNames;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ANNOTATION_SOURCE_LOCATION,\n\n  parseLocationRef,\n} from '@backstage/catalog-model';\n\n\n/** @public */\n\n\n\n\n\n/** @public */\nexport function getEntitySourceLocation(\n  entity,\n  scmIntegrationsApi,\n) {\n  const sourceLocation =\n    entity.metadata.annotations?.[ANNOTATION_SOURCE_LOCATION];\n\n  if (!sourceLocation) {\n    return undefined;\n  }\n\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration?.type,\n    };\n  } catch {\n    return undefined;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  getCompoundEntityRef,\n  RELATION_MEMBER_OF,\n  RELATION_OWNED_BY,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { getEntityRelations } from './getEntityRelations';\n\n/**\n * Returns true if the `owner` argument is a direct owner on the `entity` argument.\n *\n * @alpha\n * @remarks\n *\n * Note that this ownership is not the same as using the claims in the auth-resolver, it only will take into account ownership as expressed by direct entity relations.\n * It doesn't know anything about the additional groups that a user might belong to which the claims contain.\n */\nexport function isOwnerOf(owner, entity) {\n  const possibleOwners = new Set(\n    [\n      ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: 'group' }),\n      ...(owner ? [getCompoundEntityRef(owner)] : []),\n    ].map(stringifyEntityRef),\n  );\n\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(\n    stringifyEntityRef,\n  );\n\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { compact, isEqual } from 'lodash';\nimport qs from 'qs';\nimport React, {\n  createContext,\n\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n} from 'react';\nimport { useLocation } from 'react-router';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport { catalogApiRef } from '../api';\n\n\n\n\n\n\n\n\n\n\nimport { reduceCatalogFilters, reduceEntityFilters } from '../utils';\nimport { useApi } from '@backstage/core-plugin-api';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates new context for entity listing and filtering.\n * @public\n */\nexport const EntityListContext = createContext\n\n(undefined);\n\n\n\n\n\n\n\n/**\n * Provides entities and filters for a catalog listing.\n * @public\n */\nexport const EntityListProvider = ({\n  children,\n}) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState(\n    {} ,\n  );\n\n  // We use react-router's useLocation hook so updates from external sources trigger an update to\n  // the queryParameters in outputState. Updates from this hook use replaceState below and won't\n  // trigger a useLocation change; this would instead come from an external source, such as a manual\n  // update of the URL or two catalog sidebar links with different catalog filters.\n  const location = useLocation();\n  const queryParameters = useMemo(\n    () =>\n      (qs.parse(location.search, {\n        ignoreQueryPrefix: true,\n      }).filters ?? {}) ,\n    [location],\n  );\n\n  const [outputState, setOutputState] = useState(\n    () => {\n      return {\n        appliedFilters: {} ,\n        entities: [],\n        backendEntities: [],\n      };\n    },\n  );\n\n  // The main async filter worker. Note that while it has a lot of dependencies\n  // in terms of its implementation, the triggering only happens (debounced)\n  // based on the requested filters changing.\n  const [{ loading, error }, refresh] = useAsyncFn(\n    async () => {\n      const compacted = compact(Object.values(requestedFilters));\n      const entityFilter = reduceEntityFilters(compacted);\n      const backendFilter = reduceCatalogFilters(compacted);\n      const previousBackendFilter = reduceCatalogFilters(\n        compact(Object.values(outputState.appliedFilters)),\n      );\n\n      const queryParams = Object.keys(requestedFilters).reduce(\n        (params, key) => {\n          const filter =\n            requestedFilters[key ];\n          if (filter?.toQueryValue) {\n            params[key] = filter.toQueryValue();\n          }\n          return params;\n        },\n        {} ,\n      );\n\n      // TODO(mtlewis): currently entities will never be requested unless\n      // there's at least one filter, we should allow an initial request\n      // to happen with no filters.\n      if (!isEqual(previousBackendFilter, backendFilter)) {\n        // TODO(timbonicus): should limit fields here, but would need filter\n        // fields + table columns\n        const response = await catalogApi.getEntities({\n          filter: backendFilter,\n        });\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: response.items,\n          entities: response.items.filter(entityFilter),\n        });\n      } else {\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: outputState.backendEntities,\n          entities: outputState.backendEntities.filter(entityFilter),\n        });\n      }\n\n      if (isMounted()) {\n        const oldParams = qs.parse(location.search, {\n          ignoreQueryPrefix: true,\n        });\n        const newParams = qs.stringify(\n          { ...oldParams, filters: queryParams },\n          { addQueryPrefix: true, arrayFormat: 'repeat' },\n        );\n        const newUrl = `${window.location.pathname}${newParams}`;\n        // We use direct history manipulation since useSearchParams and\n        // useNavigate in react-router-dom cause unnecessary extra rerenders.\n        // Also make sure to replace the state rather than pushing, since we\n        // don't want there to be back/forward slots for every single filter\n        // change.\n        window.history?.replaceState(null, document.title, newUrl);\n      }\n    },\n    [catalogApi, queryParameters, requestedFilters, outputState],\n    { loading: true },\n  );\n\n  // Slight debounce on the refresh, since (especially on page load) several\n  // filters will be calling this in rapid succession.\n  useDebounce(refresh, 10, [requestedFilters]);\n\n  const updateFilters = useCallback(\n    (\n      update\n\n,\n    ) => {\n      setRequestedFilters(prevFilters => {\n        const newFilters =\n          typeof update === 'function' ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    [],\n  );\n\n  const value = useMemo(\n    () => ({\n      filters: outputState.appliedFilters,\n      entities: outputState.entities,\n      backendEntities: outputState.backendEntities,\n      updateFilters,\n      queryParameters,\n      loading,\n      error,\n    }),\n    [outputState, updateFilters, queryParameters, loading, error],\n  );\n\n  return (\n    React.createElement(EntityListContext.Provider, { value: value,}\n      , children\n    )\n  );\n};\n\n/**\n * Hook for interacting with the entity list context provided by the {@link EntityListProvider}.\n * @public\n */\nexport function useEntityList\n\n() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error('useEntityList must be used within EntityListProvider');\n  return context;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_NAMESPACE } from '@backstage/catalog-model';\nimport { createRouteRef } from '@backstage/core-plugin-api';\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n/**\n * A stable route ref that points to the catalog page for an individual entity.\n *\n * This `RouteRef` can be imported and used directly, and does not need to be referenced\n * via an `ExternalRouteRef`.\n *\n * If you want to replace the `EntityPage` from `@backstage/catalog-plugin` in your app,\n * you need to use the `entityRouteRef` as the mount point instead of your own.\n * @public\n */\nexport const entityRouteRef = getOrCreateGlobalSingleton(\n  'catalog:entity-route-ref',\n  () =>\n    createRouteRef({\n      id: 'catalog:entity',\n      params: ['namespace', 'kind', 'name'],\n    }),\n);\n\n/**\n * Utility function to get suitable route params for entityRoute, given an\n * @public\n */\nexport function entityRouteParams(entity) {\n  return {\n    kind: entity.kind.toLocaleLowerCase('en-US'),\n    namespace:\n      entity.metadata.namespace?.toLocaleLowerCase('en-US') ??\n      DEFAULT_NAMESPACE,\n    name: entity.metadata.name,\n  } ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  DEFAULT_NAMESPACE,\n} from '@backstage/catalog-model';\n\n/** @public */\nexport function humanizeEntityRef(\n  entityRef,\n  opts,\n) {\n  const defaultKind = opts?.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n\n  if ('metadata' in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n\n  if (namespace === DEFAULT_NAMESPACE) {\n    namespace = undefined;\n  }\n\n  kind = kind.toLocaleLowerCase('en-US');\n  kind =\n    defaultKind && defaultKind.toLocaleLowerCase('en-US') === kind\n      ? undefined\n      : kind;\n  return `${kind ? `${kind}:` : ''}${namespace ? `${namespace}/` : ''}${name}`;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  DEFAULT_NAMESPACE,\n  parseEntityRef,\n} from '@backstage/catalog-model';\nimport React, { forwardRef } from 'react';\nimport { entityRouteRef } from '../../routes';\nimport { humanizeEntityRef } from './humanize';\nimport { Link, } from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { Tooltip } from '@material-ui/core';\n\n/**\n * Props for {@link EntityRefLink}.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * Shows a clickable link to an entity.\n *\n * @public\n */\nexport const EntityRefLink = forwardRef(\n  (props, ref) => {\n    const { entityRef, defaultKind, title, children, ...linkProps } = props;\n    const entityRoute = useRouteRef(entityRouteRef);\n\n    let kind;\n    let namespace;\n    let name;\n\n    if (typeof entityRef === 'string') {\n      const parsed = parseEntityRef(entityRef);\n      kind = parsed.kind;\n      namespace = parsed.namespace;\n      name = parsed.name;\n    } else if ('metadata' in entityRef) {\n      kind = entityRef.kind;\n      namespace = entityRef.metadata.namespace;\n      name = entityRef.metadata.name;\n    } else {\n      kind = entityRef.kind;\n      namespace = entityRef.namespace;\n      name = entityRef.name;\n    }\n\n    kind = kind.toLocaleLowerCase('en-US');\n    namespace = namespace?.toLocaleLowerCase('en-US') ?? DEFAULT_NAMESPACE;\n\n    const routeParams = { kind, namespace, name };\n    const formattedEntityRefTitle = humanizeEntityRef(\n      { kind, namespace, name },\n      { defaultKind },\n    );\n\n    const link = (\n      React.createElement(Link, { ...linkProps, ref: ref, to: entityRoute(routeParams),}\n        , children\n        , !children && (title ?? formattedEntityRefTitle)\n      )\n    );\n\n    return title ? (\n      React.createElement(Tooltip, { title: formattedEntityRefTitle,}, link)\n    ) : (\n      link\n    );\n  },\n) ;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React from 'react';\nimport { EntityRefLink } from './EntityRefLink';\n\n\n/**\n * Props for {@link EntityRefLink}.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Shows a list of clickable links to entities.\n *\n * @public\n */\nexport function EntityRefLinks(props) {\n  const { entityRefs, defaultKind, ...linkProps } = props;\n  return (\n    React.createElement(React.Fragment, null\n      , entityRefs.map((r, i) => (\n        React.createElement(React.Fragment, { key: i,}\n          , i > 0 && ', '\n          , React.createElement(EntityRefLink, {\n            ...linkProps,\n            entityRef: r,\n            defaultKind: defaultKind,}\n          )\n        )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { humanizeEntityRef } from './components/EntityRefLink';\n\nimport { getEntityRelations } from './utils';\n\n/**\n * Filter entities based on Kind.\n * @public\n */\nexport class EntityKindFilter  {\n  constructor( value) {;this.value = value;}\n\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n\n  toQueryValue() {\n    return this.value;\n  }\n}\n\n/**\n * Filters entities based on type\n * @public\n */\nexport class EntityTypeFilter  {\n  constructor( value) {;this.value = value;}\n\n  // Simplify `string | string[]` for consumers, always returns an array\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n\n  getCatalogFilters() {\n    return { 'spec.type': this.getTypes() };\n  }\n\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\n\n/**\n * Filters entities based on tag.\n * @public\n */\nexport class EntityTagFilter  {\n  constructor( values) {;this.values = values;}\n\n  filterEntity(entity) {\n    return this.values.every(v => (entity.metadata.tags ?? []).includes(v));\n  }\n\n  toQueryValue() {\n    return this.values;\n  }\n}\n\n/**\n * Filters entities where the text matches spec, title or tags.\n * @public\n */\nexport class EntityTextFilter  {\n  constructor( value) {;this.value = value;}\n\n  filterEntity(entity) {\n    const upperCaseValue = this.value.toLocaleUpperCase('en-US');\n\n    return (\n      entity.metadata.name\n        .toLocaleUpperCase('en-US')\n        .includes(upperCaseValue) ||\n      `${entity.metadata.title}`\n        .toLocaleUpperCase('en-US')\n        .includes(upperCaseValue) ||\n      entity.metadata.tags\n        ?.join('')\n        .toLocaleUpperCase('en-US')\n        .indexOf(upperCaseValue) !== -1\n    );\n  }\n}\n\n/**\n * Filter matching entities that are owned by group.\n * @public\n */\nexport class EntityOwnerFilter  {\n  constructor( values) {;this.values = values;}\n\n  filterEntity(entity) {\n    return this.values.some(v =>\n      getEntityRelations(entity, RELATION_OWNED_BY).some(\n        o => humanizeEntityRef(o, { defaultKind: 'group' }) === v,\n      ),\n    );\n  }\n\n  toQueryValue() {\n    return this.values;\n  }\n}\n\n/**\n * Filters entities on lifecycle.\n * @public\n */\nexport class EntityLifecycleFilter  {\n  constructor( values) {;this.values = values;}\n\n  filterEntity(entity) {\n    return this.values.some(v => entity.spec?.lifecycle === v);\n  }\n\n  toQueryValue() {\n    return this.values;\n  }\n}\n\n/**\n * Filters entities based on whatever the user has starred or owns them.\n * @public\n */\nexport class UserListFilter  {\n  constructor(\n     value,\n     isOwnedEntity,\n     isStarredEntity,\n  ) {;this.value = value;this.isOwnedEntity = isOwnedEntity;this.isStarredEntity = isStarredEntity;}\n\n  filterEntity(entity) {\n    switch (this.value) {\n      case 'owned':\n        return this.isOwnedEntity(entity);\n      case 'starred':\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n\n  toQueryValue() {\n    return this.value;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport isEqual from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '../api';\nimport { useEntityList } from './useEntityListProvider';\nimport { EntityTypeFilter } from '../filters';\n\n/**\n * A hook built on top of `useEntityList` for enabling selection of valid `spec.type` values\n * based on the selected EntityKindFilter.\n * @public\n */\nexport function useEntityTypeFilter()\n\n\n\n\n\n {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters,\n  } = useEntityList();\n\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean) ,\n    [typeParameter],\n  );\n\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length\n      ? flattenedQueryTypes\n      : typeFilter?.getTypes() ?? [],\n  );\n\n  // Set selected types on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter?.value, [kindFilter]);\n\n  // Load all valid spec.type values straight from the catalogApi, paying attention to only the\n  // kind filter for a complete list.\n  const {\n    error,\n    loading,\n    value: facets,\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi\n        .getEntityFacets({\n          filter: { kind },\n          facets: ['spec.type'],\n        })\n        .then(response => response.facets['spec.type'] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    // Delay processing hook until kind and facets load updates have settled to generate list of types;\n    // This prevents resetting the type filter due to saved type value from query params not matching the\n    // empty set of type values while values are still being loaded; also only run this hook on changes\n    // to facets\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n\n    // Sort by facet count descending, so the most common types appear on top\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, f => -f.count).map(f =>\n          f.value.toLocaleLowerCase('en-US'),\n        ),\n      ),\n    ];\n    setAvailableTypes(newTypes);\n\n    // Update type filter to only valid values when the list of available types has changed\n    const stillValidTypes = selectedTypes.filter(value =>\n      newTypes.includes(value),\n    );\n    if (!isEqual(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length\n        ? new EntityTypeFilter(selectedTypes)\n        : undefined,\n    });\n  }, [selectedTypes, updateFilters]);\n\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { chunk, groupBy } from 'lodash';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../api';\n\nconst BATCH_SIZE = 20;\n\n/** @public */\nexport function useRelatedEntities(\n  entity,\n  relationFilter,\n)\n\n\n\n {\n  const filterByTypeLower = relationFilter?.type?.toLocaleLowerCase('en-US');\n  const filterByKindLower = relationFilter?.kind?.toLocaleLowerCase('en-US');\n\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error,\n  } = useAsync(async () => {\n    const relations = entity.relations\n      ?.map(r => ({ type: r.type, target: parseEntityRef(r.targetRef) }))\n      .filter(\n        r =>\n          (!filterByTypeLower ||\n            r.type.toLocaleLowerCase('en-US') === filterByTypeLower) &&\n          (!filterByKindLower || r.target.kind === filterByKindLower),\n      );\n\n    if (!relations) {\n      return [];\n    }\n\n    // Group the relations by kind and namespace to reduce the size of the request query string.\n    // Without this grouping, the kind and namespace would need to be specified for each relation, e.g.\n    // `filter=kind=component,namespace=default,name=example1&filter=kind=component,namespace=default,name=example2`\n    // with grouping, we can generate a query a string like\n    // `filter=kind=component,namespace=default,name=example1,example2`\n    const relationsByKindAndNamespace = Object.values(\n      groupBy(relations, ({ target }) => {\n        return `${target.kind}:${target.namespace}`.toLocaleLowerCase('en-US');\n      }),\n    );\n\n    // Split the names within each group into batches to further reduce the query string length.\n    const batchedRelationsByKindAndNamespace\n\n\n\n = [];\n    for (const rs of relationsByKindAndNamespace) {\n      batchedRelationsByKindAndNamespace.push({\n        // All relations in a group have the same kind and namespace, so its arbitrary which we pick\n        kind: rs[0].target.kind,\n        namespace: rs[0].target.namespace,\n        nameBatches: chunk(\n          rs.map(r => r.target.name),\n          BATCH_SIZE,\n        ),\n      });\n    }\n\n    const results = await Promise.all(\n      batchedRelationsByKindAndNamespace.flatMap(rs => {\n        return rs.nameBatches.map(names => {\n          return catalogApi.getEntities({\n            filter: {\n              kind: rs.kind,\n              'metadata.namespace': rs.namespace,\n              'metadata.name': names,\n            },\n          });\n        });\n      }),\n    );\n\n    return results.flatMap(r => r.items);\n  }, [entity, filterByTypeLower, filterByKindLower]);\n\n  return {\n    entities,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useCallback } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\nimport { starredEntitiesApiRef } from '../apis';\n\nfunction getEntityRef(\n  entityOrRef,\n) {\n  return typeof entityOrRef === 'string'\n    ? entityOrRef\n    : stringifyEntityRef(entityOrRef);\n}\n\n/** @public */\nexport function useStarredEntities()\n\n\n\n\n\n\n\n {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n\n  const starredEntities = useObservable(\n    starredEntitiesApi.starredEntitie$(),\n    new Set(),\n  );\n\n  const isStarredEntity = useCallback(\n    (entityOrRef) =>\n      starredEntities.has(getEntityRef(entityOrRef)),\n    [starredEntities],\n  );\n\n  const toggleStarredEntity = useCallback(\n    (entityOrRef) =>\n      starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [starredEntitiesApi],\n  );\n\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useCallback, useEffect, useState } from 'react';\nimport { starredEntitiesApiRef } from '../apis';\n\nfunction getEntityRef(\n  entityOrRef,\n) {\n  return typeof entityOrRef === 'string'\n    ? entityOrRef\n    : stringifyEntityRef(entityOrRef);\n}\n\n/** @public */\nexport function useStarredEntity(\n  entityOrRef,\n)\n\n\n {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      },\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n\n  const toggleStarredEntity = useCallback(\n    () => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [entityOrRef, starredEntitiesApi],\n  );\n\n  return {\n    toggleStarredEntity,\n    isStarredEntity,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_OWNED_BY,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { getEntityRelations } from '../utils/getEntityRelations';\n\n/**\n * Returns a function that checks whether the currently signed-in user is an\n * owner of a given entity. When the hook is initially mounted, the loading\n * flag will be true and the results returned from the function will always be\n * false.\n *\n * @public\n *\n * @returns a function that checks if the signed in user owns an entity\n */\nexport function useEntityOwnership()\n\n\n {\n  const identityApi = useApi(identityApiRef);\n\n  // Trigger load only on mount\n  const { loading, value: refs } = useAsync(async () => {\n    const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n    return ownershipEntityRefs;\n  }, []);\n\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs ?? []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(\n        stringifyEntityRef,\n      );\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n\n  return useMemo(() => ({ loading, isOwnedEntity }), [loading, isOwnedEntity]);\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { useAsyncEntity } from './useEntity';\n\n/**\n * A thin wrapper around the\n * {@link @backstage/plugin-permission-react#usePermission} hook which uses the\n * current entity in context to make an authorization request for the given\n * {@link @backstage/plugin-catalog-common#CatalogEntityPermission}.\n *\n * Note: this hook blocks the permission request until the entity has loaded in\n * context. If you have the entityRef and need concurrent requests, use the\n * `usePermission` hook directly.\n * @alpha\n */\nexport function useEntityPermission(\n  // TODO(joeporpeglia) Replace with `CatalogEntityPermission` when the issue described in\n  // https://github.com/backstage/backstage/pull/10128 is fixed.\n  permission,\n)\n\n\n\n {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError,\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError,\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : undefined,\n  });\n\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { useEntityList } from '../../hooks';\nimport { EntityKindFilter } from '../../filters';\n\n/**\n * Props for {@link EntityKindPicker}.\n *\n * @public\n */\n\n\n\n\n\n/** @public */\nexport const EntityKindPicker = (props) => {\n  const { initialFilter, hidden } = props;\n\n  const {\n    updateFilters,\n    queryParameters: { kind: kindParameter },\n  } = useEntityList();\n  const [selectedKind] = useState([kindParameter].flat()[0] ?? initialFilter);\n\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : undefined,\n    });\n  }, [selectedKind, updateFilters]);\n\n  if (hidden) return null;\n\n  // TODO(timbonicus): This should load available kinds from the catalog-backend, similar to\n  // EntityTypePicker.\n\n  return React.createElement(Alert, { severity: \"warning\",}, \"Kind filter not yet available\"    );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityLifecycleFilter } from '../../filters';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  {\n    input: {},\n  },\n  {\n    name: 'CatalogReactEntityLifecyclePicker',\n  },\n);\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/** @public */\nexport const EntityLifecyclePicker = () => {\n  const classes = useStyles();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { lifecycles: lifecyclesParameter },\n  } = useEntityList();\n\n  const queryParamLifecycles = useMemo(\n    () => [lifecyclesParameter].flat().filter(Boolean) ,\n    [lifecyclesParameter],\n  );\n\n  const [selectedLifecycles, setSelectedLifecycles] = useState(\n    queryParamLifecycles.length\n      ? queryParamLifecycles\n      : filters.lifecycles?.values ?? [],\n  );\n\n  // Set selected lifecycles on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamLifecycles.length) {\n      setSelectedLifecycles(queryParamLifecycles);\n    }\n  }, [queryParamLifecycles]);\n\n  useEffect(() => {\n    updateFilters({\n      lifecycles: selectedLifecycles.length\n        ? new EntityLifecycleFilter(selectedLifecycles)\n        : undefined,\n    });\n  }, [selectedLifecycles, updateFilters]);\n\n  const availableLifecycles = useMemo(\n    () =>\n      [\n        ...new Set(\n          backendEntities\n            .map((e) => e.spec?.lifecycle)\n            .filter(Boolean) ,\n        ),\n      ].sort(),\n    [backendEntities],\n  );\n\n  if (!availableLifecycles.length) return null;\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\", component: \"label\",}, \"Lifecycle\"\n\n        , React.createElement(Autocomplete, {\n          multiple: true,\n          options: availableLifecycles,\n          value: selectedLifecycles,\n          onChange: (_, value) =>\n            setSelectedLifecycles(value)\n          ,\n          renderOption: (option, { selected }) => (\n            React.createElement(FormControlLabel, {\n              control: \n                React.createElement(Checkbox, {\n                  icon: icon,\n                  checkedIcon: checkedIcon,\n                  checked: selected,}\n                )\n              ,\n              label: option,}\n            )\n          ),\n          size: \"small\",\n          popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"lifecycle-picker-expand\",} ),\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              className: classes.input,\n              variant: \"outlined\",}\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityOwnerFilter } from '../../filters';\nimport { getEntityRelations } from '../../utils';\nimport { humanizeEntityRef } from '../EntityRefLink';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  {\n    input: {},\n  },\n  {\n    name: 'CatalogReactEntityOwnerPicker',\n  },\n);\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/** @public */\nexport const EntityOwnerPicker = () => {\n  const classes = useStyles();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { owners: ownersParameter },\n  } = useEntityList();\n\n  const queryParamOwners = useMemo(\n    () => [ownersParameter].flat().filter(Boolean) ,\n    [ownersParameter],\n  );\n\n  const [selectedOwners, setSelectedOwners] = useState(\n    queryParamOwners.length ? queryParamOwners : filters.owners?.values ?? [],\n  );\n\n  // Set selected owners on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      setSelectedOwners(queryParamOwners);\n    }\n  }, [queryParamOwners]);\n\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length\n        ? new EntityOwnerFilter(selectedOwners)\n        : undefined,\n    });\n  }, [selectedOwners, updateFilters]);\n\n  const availableOwners = useMemo(\n    () =>\n      [\n        ...new Set(\n          backendEntities\n            .flatMap((e) =>\n              getEntityRelations(e, RELATION_OWNED_BY).map(o =>\n                humanizeEntityRef(o, { defaultKind: 'group' }),\n              ),\n            )\n            .filter(Boolean) ,\n        ),\n      ].sort(),\n    [backendEntities],\n  );\n\n  if (!availableOwners.length) return null;\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\", component: \"label\",}, \"Owner\"\n\n        , React.createElement(Autocomplete, {\n          multiple: true,\n          options: availableOwners,\n          value: selectedOwners,\n          onChange: (_, value) => setSelectedOwners(value),\n          renderOption: (option, { selected }) => (\n            React.createElement(FormControlLabel, {\n              control: \n                React.createElement(Checkbox, {\n                  icon: icon,\n                  checkedIcon: checkedIcon,\n                  checked: selected,}\n                )\n              ,\n              label: option,}\n            )\n          ),\n          size: \"small\",\n          popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"owner-picker-expand\",} ),\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              className: classes.input,\n              variant: \"outlined\",}\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FormControl,\n  IconButton,\n  Input,\n  InputAdornment,\n  makeStyles,\n  Toolbar,\n} from '@material-ui/core';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport React, { useState } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityTextFilter } from '../../filters';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  _theme => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0,\n    },\n    input: {},\n  }),\n  {\n    name: 'CatalogReactEntitySearchBar',\n  },\n);\n\n/**\n * Renders search bar for filtering the entity list.\n * @public\n */\nexport const EntitySearchBar = () => {\n  const classes = useStyles();\n\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState(filters.text?.value ?? '');\n\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : undefined,\n      });\n    },\n    250,\n    [search, updateFilters],\n  );\n\n  return (\n    React.createElement(Toolbar, { className: classes.searchToolbar,}\n      , React.createElement(FormControl, null\n        , React.createElement(Input, {\n          'aria-label': \"search\",\n          id: \"input-with-icon-adornment\",\n          className: classes.input,\n          placeholder: \"Search\",\n          autoComplete: \"off\",\n          onChange: event => setSearch(event.target.value),\n          value: search,\n          startAdornment: \n            React.createElement(InputAdornment, { position: \"start\",}\n              , React.createElement(Search, null )\n            )\n          ,\n          endAdornment: \n            React.createElement(InputAdornment, { position: \"end\",}\n              , React.createElement(IconButton, {\n                'aria-label': \"clear search\" ,\n                onClick: () => setSearch(''),\n                edge: \"end\",\n                disabled: search.length === 0,}\n              \n                , React.createElement(Clear, null )\n              )\n            )\n          ,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  RELATION_OWNED_BY,\n  RELATION_PART_OF,\n} from '@backstage/catalog-model';\nimport { OverflowTooltip, } from '@backstage/core-components';\nimport React from 'react';\nimport { getEntityRelations } from '../../utils';\nimport {\n  EntityRefLink,\n  EntityRefLinks,\n  humanizeEntityRef,\n} from '../EntityRefLink';\n\n/** @public */\nexport const columnFactories = Object.freeze({\n  createEntityRefColumn(options\n\n) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      return (\n        entity.metadata?.title ||\n        humanizeEntityRef(entity, {\n          defaultKind,\n        })\n      );\n    }\n\n    return {\n      title: 'Name',\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        // TODO: We could implement this more efficiently, like searching over\n        // each field that is displayed individually (kind, namespace, name).\n        // but that might confuse the user as it will behave different than a\n        // simple text search.\n        // Another alternative would be to cache the values. But writing them\n        // into the entity feels bad too.\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        // TODO: We could implement this more efficiently by comparing field by field.\n        // This has similar issues as above.\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: entity => (\n        React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind: defaultKind,\n          title: entity.metadata?.title,}\n        )\n      ),\n    };\n  },\n  createEntityRelationColumn({\n    title,\n    relation,\n    defaultKind,\n    filter: entityFilter,\n  }\n\n\n\n\n) {\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n\n    function formatContent(entity) {\n      return getRelations(entity)\n        .map(r => humanizeEntityRef(r, { defaultKind }))\n        .join(', ');\n    }\n\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: entity => {\n        return (\n          React.createElement(EntityRefLinks, {\n            entityRefs: getRelations(entity),\n            defaultKind: defaultKind,}\n          )\n        );\n      },\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: 'Owner',\n      relation: RELATION_OWNED_BY,\n      defaultKind: 'group',\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: 'Domain',\n      relation: RELATION_PART_OF,\n      defaultKind: 'domain',\n      filter: {\n        kind: 'domain',\n      },\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: 'System',\n      relation: RELATION_PART_OF,\n      defaultKind: 'system',\n      filter: {\n        kind: 'system',\n      },\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: 'Description',\n      field: 'metadata.description',\n      render: entity => (\n        React.createElement(OverflowTooltip, {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",\n          line: 2,}\n        )\n      ),\n      width: 'auto',\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: 'Lifecycle',\n      field: 'spec.lifecycle',\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: 'Type',\n      field: 'spec.type',\n    };\n  },\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { columnFactories } from './columns';\n\nexport const systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: 'system' }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn(),\n];\n\nexport const componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: 'component' }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn(),\n];\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles } from '@material-ui/core';\nimport React, { } from 'react';\nimport { columnFactories } from './columns';\nimport { componentEntityColumns, systemEntityColumns } from './presets';\nimport {\n\n  Table,\n\n} from '@backstage/core-components';\n\n/**\n * Props for {@link EntityTable}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    justifyContent: 'center',\n  },\n}));\n\n/**\n * A general entity table component, that can be used for composing more\n * specific entity tables.\n *\n * @public\n */\nexport const EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = 'gridItem',\n    columns,\n  } = props;\n\n  const classes = useStyles();\n  const tableStyle = {\n    minWidth: '0',\n    width: '100%',\n  };\n\n  if (variant === 'gridItem') {\n    tableStyle.height = 'calc(100% - 10px)';\n  }\n\n  return (\n    React.createElement(Table, {\n      columns: columns,\n      title: title,\n      style: tableStyle,\n      emptyContent: \n        emptyContent && React.createElement('div', { className: classes.empty,}, emptyContent)\n      ,\n      options: {\n        // TODO: Toolbar padding if off compared to other cards, should be: padding: 16px 24px;\n        search: false,\n        paging: false,\n        actionsColumnIndex: -1,\n        padding: 'dense',\n      },\n      data: entities,}\n    )\n  );\n};\n\nEntityTable.columns = columnFactories;\n\nEntityTable.systemEntityColumns = systemEntityColumns;\n\nEntityTable.componentEntityColumns = componentEntityColumns;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityTagFilter } from '../../filters';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../../api';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  {\n    input: {},\n  },\n  {\n    name: 'CatalogReactEntityTagPicker',\n  },\n);\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/** @public */\nexport const EntityTagPicker = () => {\n  const classes = useStyles();\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { tags: tagsParameter },\n  } = useEntityList();\n\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableTags } = useAsync(async () => {\n    const facet = 'metadata.tags';\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: filters.kind?.getCatalogFilters(),\n    });\n\n    return facets[facet].map(({ value }) => value);\n  }, [filters.kind]);\n\n  const queryParamTags = useMemo(\n    () => [tagsParameter].flat().filter(Boolean) ,\n    [tagsParameter],\n  );\n\n  const [selectedTags, setSelectedTags] = useState(\n    queryParamTags.length ? queryParamTags : filters.tags?.values ?? [],\n  );\n\n  // Set selected tags on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamTags.length) {\n      setSelectedTags(queryParamTags);\n    }\n  }, [queryParamTags]);\n\n  useEffect(() => {\n    updateFilters({\n      tags: selectedTags.length ? new EntityTagFilter(selectedTags) : undefined,\n    });\n  }, [selectedTags, updateFilters]);\n\n  if (!availableTags?.length) return null;\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\", component: \"label\",}, \"Tags\"\n\n        , React.createElement(Autocomplete, {\n          multiple: true,\n          options: availableTags,\n          value: selectedTags,\n          onChange: (_, value) => setSelectedTags(value),\n          renderOption: (option, { selected }) => (\n            React.createElement(FormControlLabel, {\n              control: \n                React.createElement(Checkbox, {\n                  icon: icon,\n                  checkedIcon: checkedIcon,\n                  checked: selected,}\n                )\n              ,\n              label: option,}\n            )\n          ),\n          size: \"small\",\n          popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"tag-picker-expand\",} ),\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              className: classes.input,\n              variant: \"outlined\",}\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { Box } from '@material-ui/core';\nimport { useEntityTypeFilter } from '../../hooks/useEntityTypeFilter';\n\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Select } from '@backstage/core-components';\n\n/**\n * Props for {@link EntityTypePicker}.\n *\n * @public\n */\n\n\n\n\n\n/** @public */\nexport const EntityTypePicker = (props) => {\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } =\n    useEntityTypeFilter();\n\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: 'error',\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n\n  if (availableTypes.length === 0 || error) return null;\n\n  const items = [\n    { value: 'all', label: 'All' },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: capitalize(type),\n    })),\n  ];\n\n  return hidden ? null : (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Select, {\n        label: \"Type\",\n        items: items,\n        selected: (items.length > 1 ? selectedTypes[0] : undefined) ?? 'all',\n        onChange: value =>\n          setSelectedTypes(value === 'all' ? [] : [String(value)])\n        ,}\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { IconButton, Tooltip, withStyles } from '@material-ui/core';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport React, { } from 'react';\nimport { useStarredEntity } from '../../hooks/useStarredEntity';\n\n/** @public */\n\n\n\n\nconst YellowStar = withStyles({\n  root: {\n    color: '#f3ba37',\n  },\n})(Star);\n\n/**\n * IconButton for showing if a current entity is starred and adding/removing it from the favorite entities\n * @param props - MaterialUI IconButton props extended by required `entity` prop\n * @public\n */\nexport const FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(\n    props.entity,\n  );\n  return (\n    React.createElement(IconButton, {\n      'aria-label': \"favorite\",\n      color: \"inherit\",\n      ...props,\n      onClick: () => toggleStarredEntity(),}\n    \n      , React.createElement(Tooltip, {\n        title: isStarredEntity ? 'Remove from favorites' : 'Add to favorites',}\n      \n        , isStarredEntity ? React.createElement(YellowStar, null ) : React.createElement(StarBorder, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { useApp } from '@backstage/core-plugin-api';\nimport WorkIcon from '@material-ui/icons/Work';\nimport React from 'react';\n\nconst DEFAULT_ICON = WorkIcon;\n\nfunction getKind(\n  kind,\n  entityRef,\n) {\n  if (kind) {\n    return kind.toLocaleLowerCase('en-US');\n  }\n\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase('en-US');\n    } catch {\n      return undefined;\n    }\n  }\n\n  return undefined;\n}\n\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\n\nexport function EntityKindIcon(props\n\n\n\n\n\n\n\n) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return React.createElement(Icon, { ...otherProps,} );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  DEFAULT_NAMESPACE,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  DependencyGraph,\n  DependencyGraphTypes,\n  Link,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { Box, DialogContentText, makeStyles } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useLayoutEffect, useRef, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../../../api';\nimport { humanizeEntityRef } from '../../EntityRefLink';\nimport { entityRouteRef } from '../../../routes';\nimport { EntityKindIcon } from './EntityKindIcon';\n\nconst useStyles = makeStyles(theme => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    '&.primary': {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light,\n    },\n    '&.secondary': {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light,\n    },\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    '&.primary': {\n      fill: theme.palette.primary.contrastText,\n    },\n    '&.secondary': {\n      fill: theme.palette.secondary.contrastText,\n    },\n    '&.focused': {\n      fontWeight: 'bold',\n    },\n  },\n  clickable: {\n    cursor: 'pointer',\n  },\n}));\n\n\n\nfunction useAncestry(root)\n\n\n\n\n {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n\n  return {\n    loading,\n    error,\n    nodes: value?.nodes || [],\n    edges: value?.edges || [],\n  };\n}\n\nfunction CustomNode({ node }) {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n\n  useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = iconSize + padding;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  const displayTitle =\n    node.metadata.title ||\n    (node.kind && node.metadata.name && node.metadata.namespace\n      ? humanizeEntityRef({\n          kind: node.kind,\n          name: node.metadata.name,\n          namespace: node.metadata.namespace || '',\n        })\n      : node.id);\n\n  const onClick = () => {\n    navigate(\n      entityRoute({\n        kind: node.kind,\n        namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n        name: node.metadata.name,\n      }),\n    );\n  };\n\n  return (\n    React.createElement('g', { onClick: onClick, className: classes.clickable,}\n      , React.createElement('rect', {\n        className: classNames(\n          classes.node,\n          node.root ? 'secondary' : 'primary',\n        ),\n        width: paddedWidth,\n        height: paddedHeight,\n        rx: 10,}\n      )\n      , React.createElement(EntityKindIcon, {\n        kind: node.kind,\n        y: padding,\n        x: padding,\n        width: iconSize,\n        height: iconSize,\n        className: classNames(\n          classes.text,\n          node.root ? 'secondary' : 'primary',\n        ),}\n      )\n      , React.createElement('text', {\n        ref: idRef,\n        className: classNames(\n          classes.text,\n          node.root ? 'secondary' : 'primary',\n        ),\n        y: paddedHeight / 2,\n        x: paddedIconWidth + (width + padding * 2) / 2,\n        textAnchor: \"middle\",\n        alignmentBaseline: \"middle\",}\n      \n        , displayTitle\n      )\n    )\n  );\n}\n\nexport function AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Ancestry\")\n      , React.createElement(DialogContentText, { gutterBottom: true,}, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\"\n\n                , ' '\n        , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\",}, \"processors emitted\"\n\n        ), ' ', \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"\n\n\n      )\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(DependencyGraph, {\n          nodes: nodes,\n          edges: edges,\n          renderNode: CustomNode,\n          direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n          zoom: \"enable-on-click\",}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Link } from '@backstage/core-components';\nimport {\n  Box,\n  Card,\n  CardContent,\n  ListItem,\n  ListItemIcon,\n  ListItemText as MuiListItemText,\n  ListSubheader as MuiListSubheader,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  marginTop: {\n    marginTop: theme.spacing(2),\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled,\n  },\n  monospace: {\n    fontFamily: 'monospace',\n  },\n}));\n\nexport function ListItemText(props\n\n\n) {\n  const classes = useStyles();\n  return (\n    React.createElement(MuiListItemText, {\n      ...props,\n      primaryTypographyProps: { className: classes.monospace },\n      secondaryTypographyProps: { className: classes.monospace },}\n    )\n  );\n}\n\nexport function ListSubheader(props) {\n  const classes = useStyles();\n  return (\n    React.createElement(MuiListSubheader, { className: classes.monospace,}\n      , props.children\n    )\n  );\n}\n\nexport function Container(props\n\n\n\n) {\n  return (\n    React.createElement(Box, { mt: 2,}\n      , React.createElement(Card, { variant: \"outlined\",}\n        , React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"h6\", gutterBottom: true,}\n            , props.title\n            , props.helpLink && React.createElement(HelpIcon, { to: props.helpLink,} )\n          )\n          , props.children\n        )\n      )\n    )\n  );\n}\n\n// Extracts a link from a value, if possible\nfunction findLink(value) {\n  if (value.match(/^url:https?:\\/\\//)) {\n    return value.slice('url:'.length);\n  }\n  if (value.match(/^https?:\\/\\//)) {\n    return value;\n  }\n  return undefined;\n}\n\nexport function KeyValueListItem(props\n\n\n) {\n  const [key, value] = props.entry;\n  const link = findLink(value);\n\n  return (\n    React.createElement(ListItem, null\n      , props.indent && React.createElement(ListItemIcon, null )\n      , React.createElement(ListItemText, {\n        primary: key,\n        secondary: link ? React.createElement(Link, { to: link,}, value) : value,}\n      )\n    )\n  );\n}\n\nexport function HelpIcon(props) {\n  const classes = useStyles();\n  return (\n    React.createElement(Link, { to: props.to, className: classes.helpIcon,}\n      , React.createElement(HelpOutlineIcon, { fontSize: \"inherit\",} )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  ANNOTATION_LOCATION,\n  ANNOTATION_ORIGIN_LOCATION,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  DialogContentText,\n  List,\n  ListItem,\n  ListItemIcon,\n  makeStyles,\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../../../api';\nimport { EntityRefLink } from '../../EntityRefLink';\nimport { KeyValueListItem, ListItemText } from './common';\nimport { EntityKindIcon } from './EntityKindIcon';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nfunction useColocated(entity)\n\n\n\n\n\n {\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = entity.metadata.annotations?.[ANNOTATION_LOCATION];\n  const origin = entity.metadata.annotations?.[ANNOTATION_ORIGIN_LOCATION];\n\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...(location\n          ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }]\n          : []),\n        ...(origin\n          ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }]\n          : []),\n      ],\n    });\n    return response.items;\n  }, [location, origin]);\n\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value?.filter(\n      colocated => stringifyEntityRef(colocated) !== currentEntityRef,\n    ),\n  };\n}\n\nfunction EntityList(props) {\n  return (\n    React.createElement(List, { dense: true,}\n      , props.header && React.createElement(KeyValueListItem, { key: \"header\", entry: props.header,} )\n      , props.entities.map(entity => (\n        React.createElement(ListItem, { key: stringifyEntityRef(entity),}\n          , React.createElement(ListItemIcon, null\n            , React.createElement(EntityKindIcon, { kind: entity.kind,} )\n          )\n          , React.createElement(ListItemText, { primary: React.createElement(EntityRefLink, { entityRef: entity,} ),} )\n        )\n      ))\n    )\n  );\n}\n\nfunction Contents(props) {\n  const { entity } = props;\n\n  const { loading, error, location, originLocation, colocatedEntities } =\n    useColocated(entity);\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  if (!location && !originLocation) {\n    return (\n      React.createElement(Alert, { severity: \"warning\",}, \"Entity had no location information.\"    )\n    );\n  } else if (!colocatedEntities?.length) {\n    return (\n      React.createElement(Alert, { severity: \"info\",}, \"There were no other entities on this location.\"\n\n      )\n    );\n  }\n\n  if (location === originLocation) {\n    return React.createElement(EntityList, { entities: colocatedEntities,} );\n  }\n\n  const atLocation = colocatedEntities.filter(\n    e => e.metadata.annotations?.[ANNOTATION_LOCATION] === location,\n  );\n  const atOrigin = colocatedEntities.filter(\n    e =>\n      e.metadata.annotations?.[ANNOTATION_ORIGIN_LOCATION] === originLocation,\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , atLocation.length > 0 && (\n        React.createElement(EntityList, {\n          entities: atLocation,\n          header: ['At the same location', location],}\n        )\n      )\n      , atOrigin.length > 0 && (\n        React.createElement(EntityList, {\n          entities: atOrigin,\n          header: ['At the same origin', originLocation],}\n        )\n      )\n    )\n  );\n}\n\nexport function ColocatedPage(props) {\n  const classes = useStyles();\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Colocated\")\n      , React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"\n\n\n\n      )\n      , React.createElement('div', { className: classes.root,}\n        , React.createElement(Contents, { entity: props.entity,} )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function sortKeys(data) {\n  // we could do something custom, but lexicographical sorting is actually a\n  // good choice at least for the default set of keys\n  return Object.fromEntries(\n    [...Object.entries(data)].sort((a, b) => (a[0] < b[0] ? -1 : 1)),\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { CodeSnippet } from '@backstage/core-components';\nimport { DialogContentText } from '@material-ui/core';\nimport React from 'react';\nimport { sortKeys } from './util';\n\nexport function JsonPage(props) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Entity as JSON\"  )\n      , React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"\n\n      )\n      , React.createElement(DialogContentText, null\n        , React.createElement('div', { style: { fontSize: '75%' }, 'data-testid': \"code-snippet\",}\n          , React.createElement(CodeSnippet, {\n            text: JSON.stringify(sortKeys(props.entity), undefined, 2),\n            language: \"json\",\n            showCopyCodeButton: true,}\n          )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  DialogContentText,\n  List,\n  ListItem,\n  ListItemIcon,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport React from 'react';\nimport { EntityRefLink } from '../../EntityRefLink';\nimport {\n  Container,\n  HelpIcon,\n  KeyValueListItem,\n  ListItemText,\n  ListSubheader,\n} from './common';\nimport { EntityKindIcon } from './EntityKindIcon';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nexport function OverviewPage(props) {\n  const classes = useStyles();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {},\n  } = props.entity;\n\n  const groupedRelations = groupBy(\n    sortBy(relations, r => r.targetRef),\n    'type',\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Overview\")\n      , React.createElement('div', { className: classes.root,}\n        , React.createElement(Container, { title: \"Identity\",}\n          , React.createElement(List, { dense: true,}\n            , React.createElement(ListItem, null\n              , React.createElement(ListItemText, { primary: \"apiVersion\", secondary: apiVersion,} )\n            )\n            , React.createElement(ListItem, null\n              , React.createElement(ListItemText, { primary: \"kind\", secondary: kind,} )\n            )\n            , spec?.type && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemText, { primary: \"spec.type\", secondary: spec.type,} )\n              )\n            )\n            , metadata.uid && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemText, { primary: \"uid\", secondary: metadata.uid,} )\n              )\n            )\n            , metadata.etag && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemText, { primary: \"etag\", secondary: metadata.etag,} )\n              )\n            )\n          )\n        )\n\n        , React.createElement(Container, { title: \"Metadata\",}\n          , !!Object.keys(metadata.annotations || {}).length && (\n            React.createElement(List, {\n              dense: true,\n              subheader: \n                React.createElement(ListSubheader, null, \"Annotations\"\n\n                  , React.createElement(HelpIcon, { to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\",} )\n                )\n              ,}\n            \n              , Object.entries(metadata.annotations).map(entry => (\n                React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry: entry,} )\n              ))\n            )\n          )\n          , !!Object.keys(metadata.labels || {}).length && (\n            React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"Labels\"),}\n              , Object.entries(metadata.labels).map(entry => (\n                React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry: entry,} )\n              ))\n            )\n          )\n          , !!metadata.tags?.length && (\n            React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"Tags\"),}\n              , metadata.tags.map((tag, index) => (\n                React.createElement(ListItem, { key: `${tag}-${index}`,}\n                  , React.createElement(ListItemIcon, null )\n                  , React.createElement(ListItemText, { primary: tag,} )\n                )\n              ))\n            )\n          )\n        )\n\n        , !!relations.length && (\n          React.createElement(Container, {\n            title: \"Relations\",\n            helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\",}\n          \n            , Object.entries(groupedRelations).map(\n              ([type, groupRelations], index) => (\n                React.createElement('div', { key: index,}\n                  , React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, type),}\n                    , groupRelations.map(group => (\n                      React.createElement(ListItem, { key: group.targetRef,}\n                        , React.createElement(ListItemIcon, null\n                          , React.createElement(EntityKindIcon, { entityRef: group.targetRef,} )\n                        )\n                        , React.createElement(ListItemText, {\n                          primary: \n                            React.createElement(EntityRefLink, { entityRef: group.targetRef,} )\n                          ,}\n                        )\n                      )\n                    ))\n                  )\n                )\n              ),\n            )\n          )\n        )\n\n        , !!status.items?.length && (\n          React.createElement(Container, {\n            title: \"Status\",\n            helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\",}\n          \n            , status.items.map((item, index) => (\n              React.createElement('div', { key: index,}\n                , React.createElement(Typography, null\n                  , item.level, \": \" , item.type\n                )\n                , React.createElement(Box, { ml: 2,}, item.message)\n              )\n            ))\n          )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { CodeSnippet } from '@backstage/core-components';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport React from 'react';\nimport YAML from 'yaml';\nimport { sortKeys } from './util';\n\nexport function YamlPage(props) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Entity as YAML\"  )\n      , React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on YAML form.\"\n\n      )\n      , React.createElement(DialogContentText, null\n        , React.createElement('div', { style: { fontSize: '75%' }, 'data-testid': \"code-snippet\",}\n          , React.createElement(CodeSnippet, {\n            text: YAML.stringify(sortKeys(props.entity)),\n            language: \"yaml\",\n            showCopyCodeButton: true,}\n          )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  Tab,\n  Tabs,\n} from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { AncestryPage } from './components/AncestryPage';\nimport { ColocatedPage } from './components/ColocatedPage';\nimport { JsonPage } from './components/JsonPage';\nimport { OverviewPage } from './components/OverviewPage';\nimport { YamlPage } from './components/YamlPage';\n\nconst useStyles = makeStyles(theme => ({\n  fullHeightDialog: {\n    height: 'calc(100% - 64px)',\n  },\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    width: '100%',\n    backgroundColor: theme.palette.background.paper,\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0,\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: 'auto',\n  },\n}));\n\nfunction TabPanel(props\n\n\n\n) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles();\n  return (\n    React.createElement('div', {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      'aria-labelledby': `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other,}\n    \n      , value === index && (\n        React.createElement(Box, { pl: 3, pr: 3,}\n          , children\n        )\n      )\n    )\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    'aria-controls': `vertical-tabpanel-${index}`,\n  };\n}\n\n/**\n * A dialog that lets users inspect the low level details of their entities.\n *\n * @public\n */\nexport function InspectEntityDialog(props\n\n\n\n) {\n  const classes = useStyles();\n  const [activeTab, setActiveTab] = React.useState(0);\n\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n\n  if (!props.entity) {\n    return null;\n  }\n\n  return (\n    React.createElement(Dialog, {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open: props.open,\n      onClose: props.onClose,\n      'aria-labelledby': \"entity-inspector-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog },}\n    \n      , React.createElement(DialogTitle, { id: \"entity-inspector-dialog-title\",}, \"Entity Inspector\"\n\n      )\n      , React.createElement(DialogContent, { dividers: true,}\n        , React.createElement('div', { className: classes.root,}\n          , React.createElement(Tabs, {\n            orientation: \"vertical\",\n            variant: \"scrollable\",\n            value: activeTab,\n            onChange: (_, newValue) => setActiveTab(newValue),\n            'aria-label': \"Inspector options\" ,\n            className: classes.tabs,}\n          \n            , React.createElement(Tab, { label: \"Overview\", ...a11yProps(0),} )\n            , React.createElement(Tab, { label: \"Ancestry\", ...a11yProps(1),} )\n            , React.createElement(Tab, { label: \"Colocated\", ...a11yProps(2),} )\n            , React.createElement(Tab, { label: \"Raw JSON\" , ...a11yProps(3),} )\n            , React.createElement(Tab, { label: \"Raw YAML\" , ...a11yProps(4),} )\n          )\n\n          , React.createElement(TabPanel, { value: activeTab, index: 0,}\n            , React.createElement(OverviewPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 1,}\n            , React.createElement(AncestryPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 2,}\n            , React.createElement(ColocatedPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 3,}\n            , React.createElement(JsonPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 4,}\n            , React.createElement(YamlPage, { entity: props.entity,} )\n          )\n        )\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, { onClick: props.onClose, color: \"primary\",}, \"Close\"\n\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  getCompoundEntityRef,\n  ANNOTATION_ORIGIN_LOCATION,\n} from '@backstage/catalog-model';\nimport { catalogApiRef } from '../../api';\nimport { useCallback } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useApi } from '@backstage/core-plugin-api';\n\n/**\n * Each distinct state that the dialog can be in at any given time.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Houses the main logic for unregistering entities and their locations.\n */\nexport function useUnregisterEntityDialogState(\n  entity,\n) {\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = entity.metadata.annotations?.[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === 'bootstrap:bootstrap';\n\n  // Load the prerequisite data: what entities that are colocated with us, and\n  // what location that spawned us\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi\n        .getEntities({\n          filter: { [locationAnnotationFilter]: locationRef },\n          fields: [\n            'kind',\n            'metadata.uid',\n            'metadata.name',\n            'metadata.namespace',\n          ],\n        })\n        .then(response => response.items);\n    }\n\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(\n      ([location, colocatedEntities]) => ({\n        location,\n        colocatedEntities,\n      }),\n    );\n  }, [catalogApi, entity]);\n\n  // Unregisters the underlying location which will remove all of the entities that are spawned from\n  // it. Can only ever be called when the prerequisites have finished loading successfully, and if\n  // there was a matching location.\n  const unregisterLocation = useCallback(\n    async function unregisterLocationFn() {\n      const { location } = prerequisites.value;\n      await catalogApi.removeLocationById(location.id);\n    },\n    [catalogApi, prerequisites],\n  );\n\n  // Just removes the entity, without affecting locations in any way.\n  const deleteEntity = useCallback(\n    async function deleteEntityFn() {\n      await catalogApi.removeEntityByUid(uid);\n    },\n    [catalogApi, uid],\n  );\n\n  // If this is a bootstrap location entity, don't even block on loading\n  // prerequisites. We know that all that we will do is to offer to remove the\n  // entity, and that doesn't require anything from the prerequisites.\n  if (isBootstrap) {\n    return { type: 'bootstrap', location: locationRef, deleteEntity };\n  }\n\n  // Return early if prerequisites still loading or failing\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: 'loading' };\n  } else if (error) {\n    return { type: 'error', error };\n  }\n\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: 'only-delete', deleteEntity };\n  }\n  return {\n    type: 'unregister',\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { EntityRefLink } from '../EntityRefLink';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Divider,\n  makeStyles,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { useCallback, useState } from 'react';\nimport { useUnregisterEntityDialogState } from './useUnregisterEntityDialogState';\n\nimport { alertApiRef, configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { assertError } from '@backstage/errors';\n\nconst useStyles = makeStyles({\n  advancedButton: {\n    fontSize: '0.7em',\n  },\n});\n\nconst Contents = ({\n  entity,\n  onConfirm,\n}\n\n\n) => {\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = configApi.getOptionalString('app.title') ?? 'Backstage';\n\n  const onUnregister = useCallback(\n    async function onUnregisterFn() {\n      if ('unregisterLocation' in state) {\n        setBusy(true);\n        try {\n          await state.unregisterLocation();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state],\n  );\n\n  const onDelete = useCallback(\n    async function onDeleteFn() {\n      if ('deleteEntity' in state) {\n        setBusy(true);\n        try {\n          await state.deleteEntity();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state],\n  );\n\n  if (state.type === 'loading') {\n    return React.createElement(Progress, null );\n  }\n\n  if (state.type === 'error') {\n    return React.createElement(ResponseErrorPanel, { error: state.error,} );\n  }\n\n  if (state.type === 'bootstrap') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(Alert, { severity: \"info\",}, \"You cannot unregister this entity, since it originates from a protected Backstage configuration (location \\\"\"\n\n              , state.location, \"\\\"). If you believe this is in error, please contact the \"\n                   , appTitle, ' ', \"integrator.\"\n\n        )\n\n        , React.createElement(Box, { marginTop: 2,}\n          , !showDelete && (\n            React.createElement(Button, {\n              variant: \"text\",\n              size: \"small\",\n              color: \"primary\",\n              className: classes.advancedButton,\n              onClick: () => setShowDelete(true),}\n            , \"Advanced Options\"\n\n            )\n          )\n\n          , showDelete && (\n            React.createElement(React.Fragment, null\n              , React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"\n\n\n\n\n\n              )\n              , React.createElement(Button, {\n                variant: \"contained\",\n                color: \"secondary\",\n                disabled: busy,\n                onClick: onDelete,}\n              , \"Delete Entity\"\n\n              )\n            )\n          )\n        )\n      )\n    );\n  }\n\n  if (state.type === 'only-delete') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"\n\n\n        )\n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          disabled: busy,\n          onClick: onDelete,}\n        , \"Delete Entity\"\n\n        )\n      )\n    );\n  }\n\n  if (state.type === 'unregister') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"\n\n        )\n        , React.createElement(DialogContentText, { component: \"ul\",}\n          , state.colocatedEntities.map(e => (\n            React.createElement('li', { key: `${e.kind}:${e.namespace}/${e.name}`,}\n              , React.createElement(EntityRefLink, { entityRef: e,} )\n            )\n          ))\n        )\n        , React.createElement(DialogContentText, null, \"Located at the following location:\"\n\n        )\n        , React.createElement(DialogContentText, { component: \"ul\",}\n          , React.createElement('li', null, state.location)\n        )\n        , React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \"\n                 , appTitle, \".\"\n        )\n        , React.createElement(Box, { marginTop: 2,}\n          , React.createElement(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            disabled: busy,\n            onClick: onUnregister,}\n          , \"Unregister Location\"\n\n          )\n          , !showDelete && (\n            React.createElement(Box, { component: \"span\", marginLeft: 2,}\n              , React.createElement(Button, {\n                variant: \"text\",\n                size: \"small\",\n                color: \"primary\",\n                className: classes.advancedButton,\n                onClick: () => setShowDelete(true),}\n              , \"Advanced Options\"\n\n              )\n            )\n          )\n        )\n\n        , showDelete && (\n          React.createElement(React.Fragment, null\n            , React.createElement(Box, { paddingTop: 4, paddingBottom: 4,}\n              , React.createElement(Divider, null )\n            )\n            , React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"\n\n\n\n\n\n            )\n            , React.createElement(Button, {\n              variant: \"contained\",\n              color: \"secondary\",\n              disabled: busy,\n              onClick: onDelete,}\n            , \"Delete Entity\"\n\n            )\n          )\n        )\n      )\n    );\n  }\n\n  return React.createElement(Alert, { severity: \"error\",}, \"Internal error: Unknown state\"   );\n};\n\n/** @public */\n\n\n\n\n\n\n\n/** @public */\nexport const UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return (\n    React.createElement(Dialog, { open: open, onClose: onClose,}\n      , React.createElement(DialogTitle, { id: \"responsive-dialog-title\",}, \"Are you sure you want to unregister this entity?\"\n\n      )\n      , React.createElement(DialogContent, null\n        , React.createElement(Contents, { entity: entity, onConfirm: onConfirm,} )\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, { onClick: onClose, color: \"primary\",}, \"Cancel\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  configApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport {\n  Card,\n  List,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  makeStyles,\n  MenuItem,\n\n  Typography,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport StarIcon from '@material-ui/icons/Star';\nimport { compact } from 'lodash';\nimport React, { Fragment, useEffect, useMemo, useState } from 'react';\nimport { UserListFilter } from '../../filters';\nimport {\n  useEntityList,\n  useStarredEntities,\n  useEntityOwnership,\n} from '../../hooks';\n\nimport { reduceEntityFilters } from '../../utils';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      backgroundColor: 'rgba(0, 0, 0, .11)',\n      boxShadow: 'none',\n      margin: theme.spacing(1, 0, 1, 0),\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: 'uppercase',\n      fontSize: 12,\n      fontWeight: 'bold',\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary,\n    },\n    menuItem: {\n      minHeight: theme.spacing(6),\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1),\n    },\n  }),\n  {\n    name: 'CatalogReactUserListPicker',\n  },\n);\n\n\n\n\n\n\n\n\n\n\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: 'Personal',\n      items: [\n        {\n          id: 'owned',\n          label: 'Owned',\n          icon: SettingsIcon,\n        },\n        {\n          id: 'starred',\n          label: 'Starred',\n          icon: StarIcon,\n        },\n      ],\n    },\n    {\n      name: orgName ?? 'Company',\n      items: [\n        {\n          id: 'all',\n          label: 'All',\n        },\n      ],\n    },\n  ];\n}\n\n/** @public */\n\n\n\n\n\n/** @public */\nexport const UserListPicker = (props) => {\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const orgName = configApi.getOptionalString('organization.name') ?? 'Company';\n  const {\n    filters,\n    updateFilters,\n    backendEntities,\n    queryParameters: { kind: kindParameter, user: userParameter },\n    loading: loadingBackendEntities,\n  } = useEntityList();\n\n  // Remove group items that aren't in availableFilters and exclude\n  // any now-empty groups.\n  const userAndGroupFilterIds = ['starred', 'all'];\n  const filterGroups = getFilterGroups(orgName)\n    .map(filterGroup => ({\n      ...filterGroup,\n      items: filterGroup.items.filter(({ id }) =>\n        // TODO: avoid hardcoding kinds here\n        ['group', 'user'].some(kind => kind === kindParameter)\n          ? userAndGroupFilterIds.includes(id)\n          : !availableFilters || availableFilters.includes(id),\n      ),\n    }))\n    .filter(({ items }) => !!items.length);\n\n  const { isStarredEntity } = useStarredEntities();\n  const { isOwnedEntity, loading: loadingEntityOwnership } =\n    useEntityOwnership();\n\n  const loading = loadingBackendEntities || loadingEntityOwnership;\n\n  // Static filters; used for generating counts of potentially unselected kinds\n  const ownedFilter = useMemo(\n    () => new UserListFilter('owned', isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity],\n  );\n  const starredFilter = useMemo(\n    () => new UserListFilter('starred', isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity],\n  );\n\n  const queryParamUserFilter = useMemo(\n    () => [userParameter].flat()[0],\n    [userParameter],\n  );\n\n  const [selectedUserFilter, setSelectedUserFilter] = useState(\n    queryParamUserFilter ?? initialFilter,\n  );\n\n  // To show proper counts for each section, apply all other frontend filters _except_ the user\n  // filter that's controlled by this picker.\n  const entitiesWithoutUserFilter = useMemo(\n    () =>\n      backendEntities.filter(\n        reduceEntityFilters(\n          compact(Object.values({ ...filters, user: undefined })),\n        ),\n      ),\n    [filters, backendEntities],\n  );\n\n  const filterCounts = useMemo(\n    () => ({\n      all: entitiesWithoutUserFilter.length,\n      starred: entitiesWithoutUserFilter.filter(entity =>\n        starredFilter.filterEntity(entity),\n      ).length,\n      owned: entitiesWithoutUserFilter.filter(entity =>\n        ownedFilter.filterEntity(entity),\n      ).length,\n    }),\n    [entitiesWithoutUserFilter, starredFilter, ownedFilter],\n  );\n\n  // Set selected user filter on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter );\n    }\n  }, [queryParamUserFilter]);\n\n  useEffect(() => {\n    if (\n      !loading &&\n      !!selectedUserFilter &&\n      selectedUserFilter !== 'all' &&\n      filterCounts[selectedUserFilter] === 0\n    ) {\n      setSelectedUserFilter('all');\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n\n  useEffect(() => {\n    updateFilters({\n      user: selectedUserFilter\n        ? new UserListFilter(\n            selectedUserFilter ,\n            isOwnedEntity,\n            isStarredEntity,\n          )\n        : undefined,\n    });\n  }, [selectedUserFilter, isOwnedEntity, isStarredEntity, updateFilters]);\n\n  return (\n    React.createElement(Card, { className: classes.root,}\n      , filterGroups.map(group => (\n        React.createElement(Fragment, { key: group.name,}\n          , React.createElement(Typography, {\n            variant: \"subtitle2\",\n            component: \"span\",\n            className: classes.title,}\n          \n            , group.name\n          )\n          , React.createElement(Card, { className: classes.groupWrapper,}\n            , React.createElement(List, { disablePadding: true, dense: true, role: \"menu\", 'aria-label': group.name,}\n              , group.items.map(item => (\n                React.createElement(MenuItem, {\n                  role: \"none presentation\" ,\n                  key: item.id,\n                  button: true,\n                  divider: true,\n                  onClick: () => setSelectedUserFilter(item.id),\n                  selected: item.id === filters.user?.value,\n                  className: classes.menuItem,\n                  disabled: filterCounts[item.id] === 0,\n                  'data-testid': `user-picker-${item.id}`,\n                  tabIndex: 0,\n                  ContainerProps: { role: 'menuitem' },}\n                \n                  , item.icon && (\n                    React.createElement(ListItemIcon, { className: classes.listIcon,}\n                      , React.createElement(item.icon, { fontSize: \"small\",} )\n                    )\n                  )\n                  , React.createElement(ListItemText, null\n                    , React.createElement(Typography, { variant: \"body1\",}, item.label, \" \" )\n                  )\n                  , React.createElement(ListItemSecondaryAction, null\n                    , filterCounts[item.id] ?? '-'\n                  )\n                )\n              ))\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useCallback,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n\n  EntityListContext,\n\n} from '../hooks/useEntityListProvider';\n\n/** @public */\nexport const MockEntityListContextProvider = ({\n  children,\n  value,\n}\n\n) => {\n  // Provides a default implementation that stores filter state, for testing components that\n  // reflect filter state.\n  const [filters, setFilters] = useState(\n    value?.filters ?? {},\n  );\n\n  const updateFilters = useCallback(\n    (\n      update\n\n\n\n,\n    ) => {\n      setFilters(prevFilters => {\n        const newFilters =\n          typeof update === 'function' ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    [],\n  );\n\n  // Memoize the default values since pickers have useEffect triggers on these; naively defaulting\n  // below with `?? <X>` breaks referential equality on subsequent updates.\n  const defaultValues = useMemo(\n    () => ({\n      entities: [],\n      backendEntities: [],\n      queryParameters: {},\n    }),\n    [],\n  );\n\n  const resolvedValue = useMemo(\n    () => ({\n      entities: value?.entities ?? defaultValues.entities,\n      backendEntities: value?.backendEntities ?? defaultValues.backendEntities,\n      updateFilters: value?.updateFilters ?? updateFilters,\n      filters,\n      loading: value?.loading ?? false,\n      queryParameters: value?.queryParameters ?? defaultValues.queryParameters,\n      error: value?.error,\n    }),\n    [value, defaultValues, filters, updateFilters],\n  );\n\n  return (\n    React.createElement(EntityListContext.Provider, { value: resolvedValue,}\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  value: {\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    lineHeight: '24px',\n    wordBreak: 'break-word',\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: 'uppercase',\n    fontSize: '10px',\n    fontWeight: 'bold',\n    letterSpacing: 0.5,\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n  },\n}));\n\n/**\n * Props for {@link AboutField}.\n *\n * @public\n */\n\n\n\n\n\n\n\n/** @public */\nexport function AboutField(props) {\n  const { label, value, gridSizes, children } = props;\n  const classes = useStyles();\n\n  const childElements = useElementFilter(children, c => c.getElements());\n\n  // Content is either children or a string prop `value`\n  const content =\n    childElements.length > 0 ? (\n      childElements\n    ) : (\n      React.createElement(Typography, { variant: \"body2\", className: classes.value,}\n        , value || `unknown`\n      )\n    );\n  return (\n    React.createElement(Grid, { item: true, ...gridSizes,}\n      , React.createElement(Typography, { variant: \"h2\", className: classes.label,}\n        , label\n      )\n      , content\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_OWNED_BY,\n  RELATION_PART_OF,\n} from '@backstage/catalog-model';\nimport {\n  EntityRefLinks,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { Chip, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { AboutField } from './AboutField';\n\nconst useStyles = makeStyles({\n  description: {\n    wordBreak: 'break-word',\n  },\n});\n\n/**\n * Props for {@link AboutContent}.\n *\n * @public\n */\n\n\n\n\n/** @public */\nexport function AboutContent(props) {\n  const { entity } = props;\n  const classes = useStyles();\n  const isSystem = entity.kind.toLocaleLowerCase('en-US') === 'system';\n  const isResource = entity.kind.toLocaleLowerCase('en-US') === 'resource';\n  const isComponent = entity.kind.toLocaleLowerCase('en-US') === 'component';\n  const isAPI = entity.kind.toLocaleLowerCase('en-US') === 'api';\n  const isTemplate = entity.kind.toLocaleLowerCase('en-US') === 'template';\n  const isLocation = entity.kind.toLocaleLowerCase('en-US') === 'location';\n  const isGroup = entity.kind.toLocaleLowerCase('en-US') === 'group';\n\n  const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: 'system',\n  });\n  const partOfComponentRelations = getEntityRelations(\n    entity,\n    RELATION_PART_OF,\n    {\n      kind: 'component',\n    },\n  );\n  const partOfDomainRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: 'domain',\n  });\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n\n  return (\n    React.createElement(Grid, { container: true,}\n      , React.createElement(AboutField, { label: \"Description\", gridSizes: { xs: 12 },}\n        , React.createElement(Typography, { variant: \"body2\", paragraph: true, className: classes.description,}\n          , entity?.metadata?.description || 'No description'\n        )\n      )\n      , React.createElement(AboutField, {\n        label: \"Owner\",\n        value: \"No Owner\" ,\n        gridSizes: { xs: 12, sm: 6, lg: 4 },}\n      \n        , ownedByRelations.length > 0 && (\n          React.createElement(EntityRefLinks, { entityRefs: ownedByRelations, defaultKind: \"group\",} )\n        )\n      )\n      , (isSystem || partOfDomainRelations.length > 0) && (\n        React.createElement(AboutField, {\n          label: \"Domain\",\n          value: \"No Domain\" ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        \n          , partOfDomainRelations.length > 0 && (\n            React.createElement(EntityRefLinks, {\n              entityRefs: partOfDomainRelations,\n              defaultKind: \"domain\",}\n            )\n          )\n        )\n      )\n      , (isAPI ||\n        isComponent ||\n        isResource ||\n        partOfSystemRelations.length > 0) && (\n        React.createElement(AboutField, {\n          label: \"System\",\n          value: \"No System\" ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        \n          , partOfSystemRelations.length > 0 && (\n            React.createElement(EntityRefLinks, {\n              entityRefs: partOfSystemRelations,\n              defaultKind: \"system\",}\n            )\n          )\n        )\n      )\n      , isComponent && partOfComponentRelations.length > 0 && (\n        React.createElement(AboutField, {\n          label: \"Parent Component\" ,\n          value: \"No Parent Component\"  ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        \n          , React.createElement(EntityRefLinks, {\n            entityRefs: partOfComponentRelations,\n            defaultKind: \"component\",}\n          )\n        )\n      )\n      , (isAPI ||\n        isComponent ||\n        isResource ||\n        isTemplate ||\n        isGroup ||\n        isLocation ||\n        typeof entity?.spec?.type === 'string') && (\n        React.createElement(AboutField, {\n          label: \"Type\",\n          value: entity?.spec?.type ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        )\n      )\n      , (isAPI ||\n        isComponent ||\n        typeof entity?.spec?.lifecycle === 'string') && (\n        React.createElement(AboutField, {\n          label: \"Lifecycle\",\n          value: entity?.spec?.lifecycle ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        )\n      )\n      , React.createElement(AboutField, {\n        label: \"Tags\",\n        value: \"No Tags\" ,\n        gridSizes: { xs: 12, sm: 6, lg: 4 },}\n      \n        , (entity?.metadata?.tags || []).map(t => (\n          React.createElement(Chip, { key: t, size: \"small\", label: t,} )\n        ))\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ANNOTATION_EDIT_URL,\n  ANNOTATION_LOCATION,\n  DEFAULT_NAMESPACE,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  HeaderIconLinkRow,\n\n\n  Link,\n} from '@backstage/core-components';\nimport { alertApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport {\n  ScmIntegrationIcon,\n  scmIntegrationsApiRef,\n} from '@backstage/integration-react';\nimport {\n  catalogApiRef,\n  getEntitySourceLocation,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  IconButton,\n  makeStyles,\n} from '@material-ui/core';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport DocsIcon from '@material-ui/icons/Description';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React, { useCallback } from 'react';\nimport { viewTechDocRouteRef } from '../../routes';\nimport { AboutContent } from './AboutContent';\n\nconst useStyles = makeStyles({\n  gridItemCard: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: 'calc(100% - 10px)', // for pages without content header\n    marginBottom: '10px',\n  },\n  fullHeightCard: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  gridItemCardContent: {\n    flex: 1,\n  },\n  fullHeightCardContent: {\n    flex: 1,\n  },\n});\n\n/**\n * Props for {@link EntityAboutCard}.\n *\n * @public\n */\n\n\n\n\n/**\n * Exported publicly via the EntityAboutCard\n */\nexport function AboutCard(props) {\n  const { variant } = props;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const viewTechdocLink = useRouteRef(viewTechDocRouteRef);\n\n  const entitySourceLocation = getEntitySourceLocation(\n    entity,\n    scmIntegrationsApi,\n  );\n  const entityMetadataEditUrl =\n    entity.metadata.annotations?.[ANNOTATION_EDIT_URL];\n\n  const viewInSource = {\n    label: 'View Source',\n    disabled: !entitySourceLocation,\n    icon: React.createElement(ScmIntegrationIcon, { type: entitySourceLocation?.integrationType,} ),\n    href: entitySourceLocation?.locationTargetUrl,\n  };\n  const viewInTechDocs = {\n    label: 'View TechDocs',\n    disabled:\n      !entity.metadata.annotations?.['backstage.io/techdocs-ref'] ||\n      !viewTechdocLink,\n    icon: React.createElement(DocsIcon, null ),\n    href:\n      viewTechdocLink &&\n      viewTechdocLink({\n        namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n        kind: entity.kind,\n        name: entity.metadata.name,\n      }),\n  };\n\n  let cardClass = '';\n  if (variant === 'gridItem') {\n    cardClass = classes.gridItemCard;\n  } else if (variant === 'fullHeight') {\n    cardClass = classes.fullHeightCard;\n  }\n\n  let cardContentClass = '';\n  if (variant === 'gridItem') {\n    cardContentClass = classes.gridItemCardContent;\n  } else if (variant === 'fullHeight') {\n    cardContentClass = classes.fullHeightCardContent;\n  }\n\n  const entityLocation = entity.metadata.annotations?.[ANNOTATION_LOCATION];\n  // Limiting the ability to manually refresh to the less expensive locations\n  const allowRefresh =\n    entityLocation?.startsWith('url:') || entityLocation?.startsWith('file:');\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(entity));\n    alertApi.post({ message: 'Refresh scheduled', severity: 'info' });\n  }, [catalogApi, alertApi, entity]);\n\n  return (\n    React.createElement(Card, { className: cardClass,}\n      , React.createElement(CardHeader, {\n        title: \"About\",\n        action: \n          React.createElement(React.Fragment, null\n            , allowRefresh && (\n              React.createElement(IconButton, {\n                'aria-label': \"Refresh\",\n                title: \"Schedule entity refresh\"  ,\n                onClick: refreshEntity,}\n              \n                , React.createElement(CachedIcon, null )\n              )\n            )\n            , React.createElement(IconButton, {\n              component: Link,\n              'aria-label': \"Edit\",\n              disabled: !entityMetadataEditUrl,\n              title: \"Edit Metadata\" ,\n              to: entityMetadataEditUrl ?? '#',}\n            \n              , React.createElement(EditIcon, null )\n            )\n          )\n        ,\n        subheader: React.createElement(HeaderIconLinkRow, { links: [viewInSource, viewInTechDocs],} ),}\n      )\n      , React.createElement(Divider, null )\n      , React.createElement(CardContent, { className: cardContentClass,}\n        , React.createElement(AboutContent, { entity: entity,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState, useMemo } from 'react';\nimport {\n  capitalize,\n  createStyles,\n  InputBase,\n  makeStyles,\n  MenuItem,\n  Select,\n\n} from '@material-ui/core';\nimport {\n  catalogApiRef,\n  EntityKindFilter,\n  useEntityList,\n} from '@backstage/plugin-catalog-react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useApi } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      ...theme.typography.h4,\n    },\n  }),\n);\n\n/**\n * Props for {@link CatalogKindHeader}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport function CatalogKindHeader(props) {\n  const { initialFilter = 'component', allowedKinds } = props;\n  const classes = useStyles();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: allKinds } = useAsync(async () => {\n    return await catalogApi\n      .getEntityFacets({ facets: ['kind'] })\n      .then(response => response.facets.kind?.map(f => f.value).sort() || []);\n  });\n  const {\n    updateFilters,\n    queryParameters: { kind: kindParameter },\n  } = useEntityList();\n\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0]?.toLocaleLowerCase('en-US'),\n    [kindParameter],\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    queryParamKind ?? initialFilter,\n  );\n\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : undefined,\n    });\n  }, [selectedKind, updateFilters]);\n\n  // Set selected Kind on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n\n  // Before allKinds is loaded, or when a kind is entered manually in the URL, selectedKind may not\n  // be present in allKinds. It should still be shown in the dropdown, but may not have the nice\n  // enforced casing from the catalog-backend. This makes a key/value record for the Select options,\n  // including selectedKind if it's unknown - but allows the selectedKind to get clobbered by the\n  // more proper catalog kind if it exists.\n  const availableKinds = [capitalize(selectedKind)].concat(\n    allKinds?.filter(k =>\n      allowedKinds\n        ? allowedKinds.some(\n            a => a.toLocaleLowerCase('en-US') === k.toLocaleLowerCase('en-US'),\n          )\n        : true,\n    ) ?? [],\n  );\n  const options = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase('en-US')] = kind;\n    return acc;\n  }, {} );\n\n  return (\n    React.createElement(Select, {\n      input: React.createElement(InputBase, { value: selectedKind,} ),\n      value: selectedKind,\n      onChange: e => setSelectedKind(e.target.value ),\n      classes: classes,}\n    \n      , Object.keys(options).map(kind => (\n        React.createElement(MenuItem, { value: kind, key: kind,}\n          , `${options[kind]}s`\n        )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport {\n  humanizeEntityRef,\n  EntityRefLink,\n  EntityRefLinks,\n} from '@backstage/plugin-catalog-react';\nimport { Chip } from '@material-ui/core';\n\nimport { OverflowTooltip, } from '@backstage/core-components';\n\n\n// The columnFactories symbol is not directly exported, but through the\n// CatalogTable.columns field.\n/** @public */\nexport const columnFactories = Object.freeze({\n  createNameColumn(options\n\n) {\n    function formatContent(entity) {\n      return (\n        entity.metadata?.title ||\n        humanizeEntityRef(entity, {\n          defaultKind: options?.defaultKind,\n        })\n      );\n    }\n\n    return {\n      title: 'Name',\n      field: 'resolved.name',\n      highlight: true,\n      customSort({ entity: entity1 }, { entity: entity2 }) {\n        // TODO: We could implement this more efficiently by comparing field by field.\n        // This has similar issues as above.\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: ({ entity }) => (\n        React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind: options?.defaultKind || 'Component',\n          title: entity.metadata?.title,}\n        )\n      ),\n    };\n  },\n  createSystemColumn() {\n    return {\n      title: 'System',\n      field: 'resolved.partOfSystemRelationTitle',\n      render: ({ resolved }) => (\n        React.createElement(EntityRefLinks, {\n          entityRefs: resolved.partOfSystemRelations,\n          defaultKind: \"system\",}\n        )\n      ),\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: 'Owner',\n      field: 'resolved.ownedByRelationsTitle',\n      render: ({ resolved }) => (\n        React.createElement(EntityRefLinks, {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\",}\n        )\n      ),\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: 'Type',\n      field: 'entity.spec.type',\n      hidden: true,\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: 'Lifecycle',\n      field: 'entity.spec.lifecycle',\n    };\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: 'Description',\n      field: 'entity.metadata.description',\n      render: ({ entity }) => (\n        React.createElement(OverflowTooltip, {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",}\n        )\n      ),\n      width: 'auto',\n    };\n  },\n  createTagsColumn() {\n    return {\n      title: 'Tags',\n      field: 'entity.metadata.tags',\n      cellStyle: {\n        padding: '0px 16px 0px 20px',\n      },\n      render: ({ entity }) => (\n        React.createElement(React.Fragment, null\n          , entity.metadata.tags &&\n            entity.metadata.tags.map(t => (\n              React.createElement(Chip, {\n                key: t,\n                label: t,\n                size: \"small\",\n                variant: \"outlined\",\n                style: { marginBottom: '0px' },}\n              )\n            ))\n        )\n      ),\n    };\n  },\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  ANNOTATION_EDIT_URL,\n  ANNOTATION_VIEW_URL,\n  RELATION_OWNED_BY,\n  RELATION_PART_OF,\n} from '@backstage/catalog-model';\nimport {\n  humanizeEntityRef,\n  getEntityRelations,\n  useEntityList,\n  useStarredEntities,\n} from '@backstage/plugin-catalog-react';\nimport Edit from '@material-ui/icons/Edit';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport { capitalize } from 'lodash';\nimport React, { useMemo } from 'react';\nimport { columnFactories } from './columns';\n\nimport {\n  CodeSnippet,\n  Table,\n\n\n  WarningPanel,\n} from '@backstage/core-components';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { withStyles } from '@material-ui/core/styles';\nimport Star from '@material-ui/icons/Star';\nimport { Typography } from '@material-ui/core';\n\n/**\n * Props for {@link CatalogTable}.\n *\n * @public\n */\n\n\n\n\n\n\nconst YellowStar = withStyles({\n  root: {\n    color: '#f3ba37',\n  },\n})(Star);\n\n/** @public */\nexport const CatalogTable = (props) => {\n  const { columns, actions, tableOptions } = props;\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const { loading, error, entities, filters } = useEntityList();\n\n  const defaultColumns = useMemo(() => {\n    return [\n      columnFactories.createNameColumn({ defaultKind: filters.kind?.value }),\n      ...createEntitySpecificColumns(),\n      columnFactories.createMetadataDescriptionColumn(),\n      columnFactories.createTagsColumn(),\n    ];\n\n    function createEntitySpecificColumns() {\n      switch (filters.kind?.value) {\n        case 'user':\n          return [];\n        case 'domain':\n        case 'system':\n          return [columnFactories.createOwnerColumn()];\n        case 'group':\n        case 'location':\n        case 'template':\n          return [columnFactories.createSpecTypeColumn()];\n        default:\n          return [\n            columnFactories.createSystemColumn(),\n            columnFactories.createOwnerColumn(),\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecLifecycleColumn(),\n          ];\n      }\n    }\n  }, [filters.kind?.value]);\n\n  const showTypeColumn = filters.type === undefined;\n  // TODO(timbonicus): remove the title from the CatalogTable once using EntitySearchBar\n  const titlePreamble = capitalize(filters.user?.value ?? 'all');\n\n  if (error) {\n    return (\n      React.createElement('div', null\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not fetch catalog entities.\"    ,}\n        \n          , React.createElement(CodeSnippet, { language: \"text\", text: error.toString(),} )\n        )\n      )\n    );\n  }\n\n  const defaultActions = [\n    ({ entity }) => {\n      const url = entity.metadata.annotations?.[ANNOTATION_VIEW_URL];\n      const title = 'View';\n\n      return {\n        icon: () => (\n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"srOnly\",}, title)\n            , React.createElement(OpenInNew, { fontSize: \"small\",} )\n          )\n        ),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url) return;\n          window.open(url, '_blank');\n        },\n      };\n    },\n    ({ entity }) => {\n      const url = entity.metadata.annotations?.[ANNOTATION_EDIT_URL];\n      const title = 'Edit';\n\n      return {\n        icon: () => (\n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"srOnly\",}, title)\n            , React.createElement(Edit, { fontSize: \"small\",} )\n          )\n        ),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url) return;\n          window.open(url, '_blank');\n        },\n      };\n    },\n    ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      const title = isStarred ? 'Remove from favorites' : 'Add to favorites';\n\n      return {\n        cellStyle: { paddingLeft: '1em' },\n        icon: () => (\n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"srOnly\",}, title)\n            , isStarred ? React.createElement(YellowStar, null ) : React.createElement(StarBorder, null )\n          )\n        ),\n        tooltip: title,\n        onClick: () => toggleStarredEntity(entity),\n      };\n    },\n  ];\n\n  const rows = entities.map(entity => {\n    const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n      kind: 'system',\n    });\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n\n    return {\n      entity,\n      resolved: {\n        name: humanizeEntityRef(entity, {\n          defaultKind: 'Component',\n        }),\n        ownedByRelationsTitle: ownedByRelations\n          .map(r => humanizeEntityRef(r, { defaultKind: 'group' }))\n          .join(', '),\n        ownedByRelations,\n        partOfSystemRelationTitle: partOfSystemRelations\n          .map(r =>\n            humanizeEntityRef(r, {\n              defaultKind: 'system',\n            }),\n          )\n          .join(', '),\n        partOfSystemRelations,\n      },\n    };\n  });\n\n  const typeColumn = (columns || defaultColumns).find(c => c.title === 'Type');\n  if (typeColumn) {\n    typeColumn.hidden = !showTypeColumn;\n  }\n  const showPagination = rows.length > 20;\n\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      columns: columns || defaultColumns,\n      options: {\n        paging: showPagination,\n        pageSize: 20,\n        actionsColumnIndex: -1,\n        loadingType: 'linear',\n        showEmptyDataSourceMessage: !loading,\n        padding: 'dense',\n        pageSizeOptions: [20, 50, 100],\n        ...tableOptions,\n      },\n      title: `${titlePreamble} (${entities.length})`,\n      data: rows,\n      actions: actions || defaultActions,}\n    )\n  );\n};\n\nCatalogTable.columns = columnFactories;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createExternalRouteRef,\n  createRouteRef,\n} from '@backstage/core-plugin-api';\n\nexport const createComponentRouteRef = createExternalRouteRef({\n  id: 'create-component',\n  optional: true,\n});\n\nexport const viewTechDocRouteRef = createExternalRouteRef({\n  id: 'view-techdoc',\n  optional: true,\n  params: ['namespace', 'kind', 'name'],\n});\n\nexport const rootRouteRef = createRouteRef({\n  id: 'catalog',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A request with a UUID identifier, so that batched responses can be matched up with the original\n * requests.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * The result of an authorization request.\n * @public\n */\nexport var AuthorizeResult; (function (AuthorizeResult) {\n  /**\n   * The authorization request is denied.\n   */\n  const DENY = 'DENY'; AuthorizeResult[\"DENY\"] = DENY;\n  /**\n   * The authorization request is allowed.\n   */\n  const ALLOW = 'ALLOW'; AuthorizeResult[\"ALLOW\"] = ALLOW;\n  /**\n   * The authorization request is allowed if the provided conditions are met.\n   */\n  const CONDITIONAL = 'CONDITIONAL'; AuthorizeResult[\"CONDITIONAL\"] = CONDITIONAL;\n})(AuthorizeResult || (AuthorizeResult = {}));\n\n/**\n * A definitive decision returned by the {@link @backstage/plugin-permission-node#PermissionPolicy}.\n *\n * @remarks\n *\n * This indicates that the policy unconditionally allows (or denies) the request.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Check if the two parameters are equivalent permissions.\n * @public\n */\nexport function isPermission(\n  permission,\n  comparedPermission,\n) {\n  return permission.name === comparedPermission.name;\n}\n\n/**\n * Check if a given permission is a {@link ResourcePermission}. When\n * `resourceType` is supplied as the second parameter, also checks if\n * the permission has the specified resource type.\n * @public\n */\nexport function isResourcePermission(\n  permission,\n  resourceType,\n) {\n  if (!('resourceType' in permission)) {\n    return false;\n  }\n\n  return !resourceType || permission.resourceType === resourceType;\n}\n\n/**\n * Check if a given permission is related to a create action.\n * @public\n */\nexport function isCreatePermission(permission) {\n  return permission.attributes.action === 'create';\n}\n\n/**\n * Check if a given permission is related to a read action.\n * @public\n */\nexport function isReadPermission(permission) {\n  return permission.attributes.action === 'read';\n}\n\n/**\n * Check if a given permission is related to an update action.\n * @public\n */\nexport function isUpdatePermission(permission) {\n  return permission.attributes.action === 'update';\n}\n\n/**\n * Check if a given permission is related to a delete action.\n * @public\n */\nexport function isDeletePermission(permission) {\n  return permission.attributes.action === 'delete';\n}\n\n/**\n * Convert {@link PermissionAuthorizer} to {@link PermissionEvaluator}.\n *\n * @public\n */\nexport function toPermissionEvaluator(\n  permissionAuthorizer,\n) {\n  return {\n    authorize: async (\n      requests,\n      options,\n    ) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n\n      return response ;\n    },\n    authorizeConditional(\n      requests,\n      options,\n    ) {\n      const parsedRequests =\n        requests ;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    },\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Utility function for creating a valid {@link ResourcePermission}, inferring\n * the appropriate type and resource type parameter.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createPermission({\n  name,\n  attributes,\n  resourceType,\n}\n\n\n\n) {\n  if (resourceType) {\n    return {\n      type: 'resource',\n      name,\n      attributes,\n      resourceType,\n    };\n  }\n\n  return {\n    type: 'basic',\n    name,\n    attributes,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\nimport {\n  AuthorizeResult,\n\n\n\n\n\n\n\n\n\n} from './types/api';\n\n\n\nconst permissionCriteriaSchema\n\n = z.lazy(() =>\n  z\n    .object({\n      rule: z.string(),\n      resourceType: z.string(),\n      params: z.array(z.unknown()),\n    })\n    .or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() }))\n    .or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() }))\n    .or(z.object({ not: permissionCriteriaSchema })),\n);\n\nconst authorizePermissionResponseSchema =\n  z.object({\n    result: z\n      .literal(AuthorizeResult.ALLOW)\n      .or(z.literal(AuthorizeResult.DENY)),\n  });\n\nconst queryPermissionResponseSchema =\n  z.union([\n    z.object({\n      result: z\n        .literal(AuthorizeResult.ALLOW)\n        .or(z.literal(AuthorizeResult.DENY)),\n    }),\n    z.object({\n      result: z.literal(AuthorizeResult.CONDITIONAL),\n      pluginId: z.string(),\n      resourceType: z.string(),\n      conditions: permissionCriteriaSchema,\n    }),\n  ]);\n\nconst responseSchema = (\n  itemSchema,\n  ids,\n) =>\n  z.object({\n    items: z\n      .array(\n        z.intersection(\n          z.object({\n            id: z.string(),\n          }),\n          itemSchema,\n        ),\n      )\n      .refine(\n        items =>\n          items.length === ids.size && items.every(({ id }) => ids.has(id)),\n        {\n          message: 'Items in response do not match request',\n        },\n      ),\n  });\n\n/**\n * An isomorphic client for requesting authorization for Backstage permissions.\n * @public\n */\nexport class PermissionClient  {\n    enabled;\n    discovery;\n\n  constructor(options) {\n    this.discovery = options.discovery;\n    this.enabled =\n      options.config.getOptionalBoolean('permission.enabled') ?? false;\n  }\n\n  /**\n   * {@inheritdoc PermissionEvaluator.authorize}\n   */\n  async authorize(\n    requests,\n    options,\n  ) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc PermissionEvaluator.authorizeConditional}\n   */\n  async authorizeConditional(\n    queries,\n    options,\n  ) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n\n   async makeRequest(\n    queries,\n    itemSchema,\n    options,\n  ) {\n    if (!this.enabled) {\n      return queries.map(_ => ({ result: AuthorizeResult.ALLOW  }));\n    }\n\n    const request = {\n      items: queries.map(query => ({\n        id: uuid.v4(),\n        ...query,\n      })),\n    };\n\n    const permissionApi = await this.discovery.getBaseUrl('permission');\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: 'POST',\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options?.token),\n        'content-type': 'application/json',\n      },\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    const responseBody = await response.json();\n\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id)),\n    ).parse(responseBody);\n\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {} );\n\n    return request.items.map(query => responsesById[query.id]);\n  }\n\n   getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * This API is used by various frontend utilities that allow developers to implement authorization within their frontend\n * plugins. A plugin developer will likely not have to interact with this API or its implementations directly, but\n * rather with the aforementioned utility components/hooks.\n * @public\n */\n\n\n\n\n\n\n/**\n * A Backstage ApiRef for the Permission API. See https://backstage.io/docs/api/utility-apis for more information on\n * Backstage ApiRefs.\n * @public\n */\nexport const permissionApiRef = createApiRef({\n  id: 'plugin.permission.api',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n\n\n  PermissionClient,\n} from '@backstage/plugin-permission-common';\n\n\n/**\n * The default implementation of the PermissionApi, which simply calls the authorize method of the given\n * {@link @backstage/plugin-permission-common#PermissionClient}.\n * @public\n */\nexport class IdentityPermissionApi  {\n   constructor(\n      permissionClient,\n      identityApi,\n  ) {;this.permissionClient = permissionClient;this.identityApi = identityApi;}\n\n  static create(options\n\n\n\n) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n\n  async authorize(\n    request,\n  ) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials(),\n    );\n    return response[0];\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { permissionApiRef } from '../apis';\nimport {\n  AuthorizeResult,\n  isResourcePermission,\n\n\n} from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\n/** @public */\n\n\n\n\n\n\n/**\n * React hook utility for authorization. Given either a non-resource\n * {@link @backstage/plugin-permission-common#Permission} or a\n * {@link @backstage/plugin-permission-common#ResourcePermission} and an\n * optional resourceRef, it will return whether or not access is allowed (for\n * the given resource, if resourceRef is provided). See\n * {@link @backstage/plugin-permission-common/PermissionClient#authorize} for\n * more details.\n *\n * The resourceRef field is optional to allow calling this hook with an\n * entity that might be loading asynchronously, but when resourceRef is not\n * supplied, the value of `allowed` will always be false.\n *\n * Note: This hook uses stale-while-revalidate to help avoid flicker in UI\n * elements that would be conditionally rendered based on the `allowed` result\n * of this hook.\n * @public\n */\nexport function usePermission(\n  input\n\n\n\n\n\n\n\n,\n) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    // We could make the resourceRef parameter required to avoid this check, but\n    // it would make using this hook difficult in situations where the entity\n    // must be asynchronously loaded, so instead we short-circuit to a deny when\n    // no resourceRef is supplied, on the assumption that the resourceRef is\n    // still loading outside the hook.\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === undefined) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Route } from 'react-router';\nimport { useApp } from '@backstage/core-plugin-api';\nimport { usePermission } from '../hooks';\nimport {\n  isResourcePermission,\n\n\n} from '@backstage/plugin-permission-common';\n\n/**\n * Returns a React Router Route which only renders the element when authorized. If unauthorized, the Route will render a\n * NotFoundErrorPage (see {@link @backstage/core-app-api#AppComponents}).\n *\n * @public\n */\nexport const PermissionedRoute = (\n  props\n\n\n\n\n\n\n\n\n\n\n,\n) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n\n  const permissionResult = usePermission(\n    isResourcePermission(permission)\n      ? { permission, resourceRef }\n      : { permission },\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n\n  let shownElement =\n    errorComponent === undefined ? React.createElement(NotFoundErrorPage, null ) : errorComponent;\n\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n\n  return React.createElement(Route, { ...otherProps, element: shownElement,} );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * @public\n */\nexport const searchApiRef = createApiRef({\n  id: 'plugin.search.queryservice',\n});\n\n/**\n * @public\n */\n\n\n\n\n/**\n * @public\n *\n * Search Api Mock that can be used in tests and storybooks\n */\nexport class MockSearchApi  {\n  constructor( mockedResults) {;this.mockedResults = mockedResults;}\n\n  query() {\n    return Promise.resolve(this.mockedResults || { results: [] });\n  }\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(\n  () => ({\n    highlight: {},\n  }),\n  { name: 'BackstageHighlightedSearchResultText' },\n);\n\n/**\n * @public\n */\n\n\n\n\n\n\n/**\n * @public\n */\nexport const HighlightedSearchResultText = ({\n  text,\n  preTag,\n  postTag,\n}) => {\n  const classes = useStyles();\n  const terms = useMemo(\n    () => text.split(new RegExp(`(${preTag}.+?${postTag})`)),\n    [postTag, preTag, text],\n  );\n  return (\n    React.createElement(React.Fragment, null\n      , terms.map((t, idx) =>\n        t.includes(preTag) ? (\n          React.createElement('mark', { className: classes.highlight, key: idx,}\n            , t.replace(new RegExp(`${preTag}|${postTag}`, 'g'), '')\n          )\n        ) : (\n          t\n        ),\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useApi, AnalyticsContext } from '@backstage/core-plugin-api';\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, {\n\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport useAsync, { } from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { searchApiRef } from '../api';\n\n/**\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SearchContext = createVersionedContext\n\n('search-context');\n\n/**\n * @public\n *\n * React hook which provides the search context\n */\nexport const useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error('useSearch must be used within a SearchContextProvider');\n  }\n\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error('No SearchContext v1 found');\n  }\n  return value;\n};\n\n/**\n * @public\n *\n * React hook which checks for an existing search context\n */\nexport const useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== undefined;\n};\n\n/**\n * The initial state of `SearchContextProvider`.\n *\n */\nconst searchInitialState = {\n  term: '',\n  pageCursor: undefined,\n  filters: {},\n  types: [],\n};\n\n/**\n * Props for {@link SearchContextProvider}\n *\n * @public\n */\n\n\n\n\n/**\n * @public\n *\n * Search context provider which gives you access to shared state between search components\n */\nexport const SearchContextProvider = (props) => {\n  const { initialState = searchInitialState, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const [pageCursor, setPageCursor] = useState(\n    initialState.pageCursor,\n  );\n  const [filters, setFilters] = useState(initialState.filters);\n  const [term, setTerm] = useState(initialState.term);\n  const [types, setTypes] = useState(initialState.types);\n\n  const prevTerm = usePrevious(term);\n\n  const result = useAsync(\n    () =>\n      searchApi.query({\n        term,\n        filters,\n        pageCursor,\n        types,\n      }),\n    [term, filters, types, pageCursor],\n  );\n\n  const hasNextPage =\n    !result.loading && !result.error && result.value?.nextPageCursor;\n  const hasPreviousPage =\n    !result.loading && !result.error && result.value?.previousPageCursor;\n  const fetchNextPage = useCallback(() => {\n    setPageCursor(result.value?.nextPageCursor);\n  }, [result.value?.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    setPageCursor(result.value?.previousPageCursor);\n  }, [result.value?.previousPageCursor]);\n\n  useEffect(() => {\n    // Any time a term is reset, we want to start from page 0.\n    if (term && prevTerm && term !== prevTerm) {\n      setPageCursor(undefined);\n    }\n  }, [term, prevTerm, initialState.pageCursor]);\n\n  const value = {\n    result,\n    filters,\n    setFilters,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : undefined,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : undefined,\n  };\n\n  const versionedValue = createVersionedValueMap({ 1: value });\n\n  return (\n    React.createElement(AnalyticsContext, { attributes: { searchTypes: types.sort().join(',') },}\n      , React.createElement(SearchContext.Provider, { value: versionedValue, children: children,} )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback } from 'react';\nimport { useOutlet } from 'react-router-dom';\n\nimport {\n  attachComponentData,\n  createReactExtension,\n\n\n  useElementFilter,\n} from '@backstage/core-plugin-api';\n\n\n\nexport const TECHDOCS_ADDONS_KEY = 'techdocs.addons.addon.v1';\n\n/**\n * Marks the <TechDocsAddons> registry component.\n * @public\n */\nexport const TECHDOCS_ADDONS_WRAPPER_KEY = 'techdocs.addons.wrapper.v1';\n\n/**\n * TechDocs Addon registry.\n * @public\n */\nexport const TechDocsAddons = () => null;\n\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\n\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase('en-US')}`;\n};\n\n/**\n * Create a TechDocs addon overload signature without props.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Create a TechDocs addon implementation.\n * @public\n */\nexport function createTechDocsAddonExtension(\n  options,\n) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => React.createElement(TechDocsAddon, { ...props,} ),\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true,\n    },\n  });\n}\n\nconst getTechDocsAddonByName = (\n  collection,\n  key,\n) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\n\nconst getAllTechDocsAddons = (collection) => {\n  return collection\n    .selectByComponentData({\n      key: TECHDOCS_ADDONS_WRAPPER_KEY,\n    })\n    .selectByComponentData({\n      key: TECHDOCS_ADDONS_KEY,\n    });\n};\n\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection\n    .selectByComponentData({\n      key: TECHDOCS_ADDONS_WRAPPER_KEY,\n    })\n    .findComponentData({\n      key: TECHDOCS_ADDONS_KEY,\n    });\n};\n\n/**\n * hook to use addons in components\n * @public\n */\nexport const useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n\n  const findAddonByData = useCallback(\n    (data) => {\n      if (!collection || !data) return null;\n      const nameKey = getDataKeyByName(data.name);\n      return getTechDocsAddonByName(collection, nameKey) ?? null;\n    },\n    [collection],\n  );\n\n  const renderComponentByName = useCallback(\n    (name) => {\n      const data = options.find(option => option.name === name);\n      return data ? findAddonByData(data) : null;\n    },\n    [options, findAddonByData],\n  );\n\n  const renderComponentsByLocation = useCallback(\n    (location) => {\n      const data = options.filter(option => option.location === location);\n      return data.length ? data.map(findAddonByData) : null;\n    },\n    [options, findAddonByData],\n  );\n\n  return { renderComponentByName, renderComponentsByLocation };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n/**\n * API to talk to techdocs-backend.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Utility API reference for the {@link TechDocsApi}.\n *\n * @public\n */\nexport const techdocsApiRef = createApiRef({\n  id: 'plugin.techdocs.service',\n});\n\n/**\n * The outcome of a docs sync operation.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Utility API reference for the {@link TechDocsStorageApi}.\n *\n * @public\n */\nexport const techdocsStorageApiRef = createApiRef({\n  id: 'plugin.techdocs.storageservice',\n});\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n\n  useContext,\n  useState,\n  memo,\n\n} from 'react';\nimport useAsync, { } from 'react-use/lib/useAsync';\n\nimport {\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\n\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { techdocsApiRef } from './api';\n\n\nconst areEntityRefsEqual = (\n  prevEntityRef,\n  nextEntityRef,\n) => {\n  return (\n    stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef)\n  );\n};\n\n/**\n * @public type for the value of the TechDocsReaderPageContext\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultTechDocsReaderPageValue = {\n  title: '',\n  subtitle: '',\n  setTitle: () => {},\n  setSubtitle: () => {},\n  setShadowRoot: () => {},\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: '', name: '', namespace: '' },\n};\n\nconst TechDocsReaderPageContext = createVersionedContext\n\n('techdocs-reader-page-context');\n\n/**\n * render function for {@link TechDocsReaderPageProvider}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A context to store the reader page state\n * @public\n */\nexport const TechDocsReaderPageProvider = memo(\n  ({ entityRef, children }) => {\n    const techdocsApi = useApi(techdocsApiRef);\n\n    const metadata = useAsync(async () => {\n      return techdocsApi.getTechDocsMetadata(entityRef);\n    }, [entityRef]);\n\n    const entityMetadata = useAsync(async () => {\n      return techdocsApi.getEntityMetadata(entityRef);\n    }, [entityRef]);\n\n    const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n    const [subtitle, setSubtitle] = useState(\n      defaultTechDocsReaderPageValue.subtitle,\n    );\n    const [shadowRoot, setShadowRoot] = useState(\n      defaultTechDocsReaderPageValue.shadowRoot,\n    );\n\n    const value = {\n      metadata,\n      entityRef,\n      entityMetadata,\n      shadowRoot,\n      setShadowRoot,\n      title,\n      setTitle,\n      subtitle,\n      setSubtitle,\n    };\n    const versionedValue = createVersionedValueMap({ 1: value });\n\n    return (\n      React.createElement(TechDocsReaderPageContext.Provider, { value: versionedValue,}\n        , children instanceof Function ? children(value) : children\n      )\n    );\n  },\n  (prevProps, nextProps) => {\n    return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n  },\n);\n\n/**\n * Hook used to get access to shared state between reader page components.\n * @public\n */\nexport const useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n\n  if (versionedContext === undefined) {\n    return defaultTechDocsReaderPageValue;\n  }\n\n  const context = versionedContext.atVersion(1);\n  if (context === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return context;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Metadata for TechDocs page\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Locations for which TechDocs addons may be declared and rendered.\n * @public\n */\nexport const TechDocsAddonLocations = Object.freeze({\n  /**\n   * These addons fill up the header from the right, on the same line as the\n   * title.\n   */\n  Header: 'Header',\n\n  /**\n   * These addons appear below the header and above all content; tooling addons\n   * can be inserted for convenience.\n   */\n  Subheader: 'Subheader',\n\n  /**\n   * These addons are items added to the settings menu list and are designed to make\n   * the reader experience customizable, for example accessibility options\n   */\n  Settings: 'Settings',\n\n  /**\n   * These addons appear left of the content and above the navigation.\n   */\n  PrimarySidebar: 'PrimarySidebar',\n\n  /**\n   * These addons appear right of the content and above the table of contents.\n   */\n  SecondarySidebar: 'SecondarySidebar',\n\n  /**\n   * A virtual location which allows mutation of all content within the shadow\n   * root by transforming DOM nodes. These addons should return null on render.\n   */\n  Content: 'Content',\n\n  /**\n   * todo(backstage/community): This is a proposed virtual location which would\n   * help implement a common addon pattern in which many instances of a given\n   * element in markdown would be dynamically replaced at render-time based on\n   * attributes provided on that element, for example:\n   *\n   * ```md\n   * ## For Fun\n   * <TechDocsAddon>CatGif</TechDocsAddon>\n   *\n   * ## Component Metadata\n   * <TechDocsAddon entityRef=\"default:component/some-component-name\">CatalogEntityCard</TechDocsAddon>\n   *\n   * ## System Metadata\n   * <TechDocsAddon entityRef=\"default:system/some-system-name\">CatalogEntityCard</TechDocsAddon>\n   * ```\n   *\n   * Could correspond to a TechDocs addon named `CatalogEntityCard` with\n   * location `TechDocsAddonLocations.COMPONENT`, whose `component` would be\n   * the react component that would be rendered in place of all instances of\n   * the markdown illustrated above.\n   *\n   * The `@backstage/plugin-techdocs-react` package would need to be updated to, in\n   * cases where such addons had been registered, find all instances of the\n   * the `<TechDocsAddon>` tag whose `textContent` corresponded with the name of the\n   * addon, then replace them with component instances of the addon component,\n   * passing any attributes from the tag as props to the component.\n   */\n  // Component: 'Component',\n} );\n\n/**\n * Options for creating a TechDocs addon.\n * @public\n */\n\n\n\n\n\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useState,\n  useEffect,\n  useCallback,\n} from 'react';\n\nimport { create } from 'jss';\nimport { StylesProvider, jssPreset } from '@material-ui/styles';\n\nimport { Progress } from '@backstage/core-components';\n\n/**\n * Name for the event dispatched when ShadowRoot styles are loaded.\n * @public\n */\nexport const SHADOW_DOM_STYLE_LOAD_EVENT = 'TECH_DOCS_SHADOW_DOM_STYLE_LOAD';\n\n/**\n * Dispatch style load event after all styles are loaded.\n * @param element - the ShadowRoot tree.\n */\nconst useShadowDomStylesEvents = (element) => {\n  useEffect(() => {\n    if (!element) {\n      return () => {};\n    }\n\n    const styles = element.querySelectorAll(\n      'head > link[rel=\"stylesheet\"]',\n    );\n\n    let count = styles?.length ?? 0;\n    const event = new CustomEvent(SHADOW_DOM_STYLE_LOAD_EVENT);\n\n    if (!count) {\n      element.dispatchEvent(event);\n      return () => {};\n    }\n\n    const handleLoad = () => {\n      if (--count === 0) {\n        element.dispatchEvent(event);\n      }\n    };\n\n    styles?.forEach(style => {\n      style.addEventListener('load', handleLoad);\n    });\n\n    return () => {\n      styles?.forEach(style => {\n        style.removeEventListener('load', handleLoad);\n      });\n    };\n  }, [element]);\n};\n\n/**\n * Returns the style's loading state.\n *\n * @example\n * Here's an example that updates the sidebar position only after styles are calculated:\n * ```jsx\n * import {\n *   TechDocsShadowDom,\n *   useShadowDomStylesLoading,\n * } from '@backstage/plugin-techdocs-react';\n *\n * export const TechDocsReaderPageContent = () => {\n *   // ...\n *   const dom = useTechDocsReaderDom(entity);\n *   const isStyleLoading = useShadowDomStylesLoading(dom);\n *\n *   const updateSidebarPosition = useCallback(() => {\n *     //...\n *   }, [dom]);\n *\n *   useEffect(() => {\n *     if (!isStyleLoading) {\n *       updateSidebarPosition();\n *     }\n *   }, [isStyleLoading, updateSidebarPosition]);\n *\n *   const handleDomAppend = useCallback(\n *     (newShadowRoot: ShadowRoot) => {\n *       setShadowRoot(newShadowRoot);\n *     },\n *     [setShadowRoot],\n *   );\n *\n *   return <TechDocsShadowDom element={dom} onAppend={handleDomAppend} />;\n * };\n * ```\n *\n * @param element - which is the ShadowRoot tree.\n * @returns a boolean value, true if styles are being loaded.\n * @public\n */\nexport const useShadowDomStylesLoading = (element) => {\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!element) return () => {};\n\n    setLoading(true);\n\n    const style = (element ).style;\n\n    style.setProperty('opacity', '0');\n\n    const handleLoad = () => {\n      setLoading(false);\n      style.setProperty('opacity', '1');\n    };\n\n    element.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n\n    return () => {\n      element.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    };\n  }, [element]);\n\n  return loading;\n};\n\n/**\n * Props for {@link TechDocsShadowDom}.\n *\n * @remarks\n * If you want to use portals to render Material UI components in the Shadow DOM,\n * you must render these portals as children because this component wraps its children in a Material UI StylesProvider\n * to ensure that Material UI styles are applied.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Renders a tree of elements in a Shadow DOM.\n *\n * @remarks\n * Centers the styles loaded event to avoid having multiple locations setting the opacity style in Shadow DOM causing the screen to flash multiple times,\n * so if you want to know when Shadow DOM styles are computed, you can listen for the \"TECH_DOCS_SHADOW_DOM_STYLE_LOAD\" event dispatched by the element tree.\n *\n * @example\n * Here is an example using this component and also listening for styles loaded event:\n *```jsx\n * import {\n *   TechDocsShadowDom,\n *   SHADOW_DOM_STYLE_LOAD_EVENT,\n * } from '@backstage/plugin-techdocs-react';\n *\n * export const TechDocsReaderPageContent = ({ entity }: TechDocsReaderPageContentProps) => {\n *   // ...\n *   const dom = useTechDocsReaderDom(entity);\n *\n *   useEffect(() => {\n *     const updateSidebarPosition = () => {\n *       // ...\n *     };\n *     dom?.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, updateSidebarPosition);\n *     return () => {\n *       dom?.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, updateSidebarPosition);\n *     };\n *   }, [dom]);\n *\n *   const handleDomAppend = useCallback(\n *     (newShadowRoot: ShadowRoot) => {\n *       setShadowRoot(newShadowRoot);\n *     },\n *     [setShadowRoot],\n *   );\n *\n *   return <TechDocsShadowDom element={dom} onAppend={handleDomAppend} />;\n * };\n * ```\n *\n * @param props - see {@link TechDocsShadowDomProps}.\n * @public\n */\nexport const TechDocsShadowDom = ({\n  element,\n  onAppend,\n  children,\n}) => {\n  const [jss, setJss] = useState(\n    create({\n      ...jssPreset(),\n      insertionPoint: undefined,\n    }),\n  );\n\n  useShadowDomStylesEvents(element);\n  const loading = useShadowDomStylesLoading(element);\n\n  const ref = useCallback(\n    (shadowHost) => {\n      if (!element || !shadowHost) return;\n\n      setJss(\n        create({\n          ...jssPreset(),\n          insertionPoint: element.querySelector('head') || undefined,\n        }),\n      );\n\n      let shadowRoot = shadowHost.shadowRoot;\n\n      if (!shadowRoot) {\n        shadowRoot = shadowHost.attachShadow({ mode: 'open' });\n      }\n\n      shadowRoot.replaceChildren(element);\n\n      if (typeof onAppend === 'function') {\n        onAppend(shadowRoot);\n      }\n    },\n    [element, onAppend],\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , loading && React.createElement(Progress, null )\n      /* The sheetsManager={new Map()} is needed in order to deduplicate the injection of CSS in the page. */\n      , React.createElement(StylesProvider, { jss: jss, sheetsManager: new Map(),}\n        , React.createElement('div', { ref: ref, 'data-testid': \"techdocs-native-shadowroot\",} )\n        , children\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState, useEffect, useMemo } from 'react';\nimport debounce from 'lodash/debounce';\nimport { useTechDocsReaderPage } from './context';\n\n/**\n * Hook for use within TechDocs addons that provides access to the underlying\n * shadow root of the current page, allowing the DOM within to be mutated.\n * @public\n */\nexport const useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\n\n/**\n * Convenience hook for use within TechDocs addons that provides access to\n * elements that match a given selector within the shadow root.\n *\n * @public\n */\nexport const useShadowRootElements = \n\n(\n  selectors,\n) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot) return [];\n  return selectors\n    .map(selector => shadowRoot?.querySelectorAll(selector))\n    .filter(nodeList => nodeList.length)\n    .map(nodeList => Array.from(nodeList))\n    .flat();\n};\n\nconst isValidSelection = (newSelection) => {\n  // Safari sets the selection rect to top zero\n  return (\n    newSelection.toString() &&\n    newSelection.rangeCount &&\n    newSelection.getRangeAt(0).getBoundingClientRect().top\n  );\n};\n\n/**\n * Hook for retreiving a selection within the ShadowRoot.\n * @public\n */\nexport const useShadowRootSelection = (wait = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(\n    () =>\n      debounce(() => {\n        const shadowDocument = shadowRoot \n;\n        // Firefox and Safari don't implement getSelection for Shadow DOM\n        const newSelection = shadowDocument.getSelection\n          ? shadowDocument.getSelection()\n          : document.getSelection();\n\n        if (newSelection && isValidSelection(newSelection)) {\n          setSelection(newSelection);\n        } else {\n          setSelection(null);\n        }\n      }, wait),\n    [shadowRoot, setSelection, wait],\n  );\n\n  useEffect(() => {\n    window.document.addEventListener('selectionchange', handleSelectionChange);\n    return () =>\n      window.document.removeEventListener(\n        'selectionchange',\n        handleSelectionChange,\n      );\n  }, [handleSelectionChange]);\n\n  return selection;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\nimport { TechDocsReaderPage } from './plugin';\nimport { TechDocsReaderPageSubheader } from './reader/components/TechDocsReaderPageSubheader';\nimport { TechDocsReaderPageContent } from './reader/components/TechDocsReaderPageContent';\n\n\n\nexport const EntityPageDocs = ({ entity }) => {\n  const entityRef = getCompoundEntityRef(entity);\n\n  return (\n    React.createElement(TechDocsReaderPage, { entityRef: entityRef,}\n      , React.createElement(TechDocsReaderPageSubheader, null )\n      , React.createElement(TechDocsReaderPageContent, { withSearch: false,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Route, Routes, useRoutes } from 'react-router-dom';\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nimport { EntityPageDocs } from './EntityPageDocs';\nimport { TechDocsIndexPage } from './home/components/TechDocsIndexPage';\nimport { TechDocsReaderPage } from './reader/components/TechDocsReaderPage';\n\nconst TECHDOCS_ANNOTATION = 'backstage.io/techdocs-ref';\n\n/**\n * Helper that takes in entity and returns true/false if TechDocs is available for the entity\n *\n * @public\n */\nexport const isTechDocsAvailable = (entity) =>\n  Boolean(entity?.metadata?.annotations?.[TECHDOCS_ANNOTATION]);\n\n/**\n * Responsible for registering routes for TechDocs, TechDocs Homepage and separate TechDocs page\n *\n * @public\n */\nexport const Router = () => {\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(TechDocsIndexPage, null ),} )\n      , React.createElement(Route, {\n        path: \"/:namespace/:kind/:name/*\",\n        element: React.createElement(TechDocsReaderPage, null ),}\n      )\n    )\n  );\n};\n\n/**\n * Responsible for registering route to view docs on Entity page\n *\n * @public\n */\nexport const EmbeddedDocsRouter = (props) => {\n  const { children } = props;\n  const { entity } = useEntity();\n\n  // Using objects instead of <Route> elements, otherwise \"outlet\" will be null on sub-pages and add-ons won't render\n  const element = useRoutes([\n    {\n      path: '/*',\n      element: React.createElement(EntityPageDocs, { entity: entity,} ),\n      children: [\n        {\n          path: '/*',\n          element: children,\n        },\n      ],\n    },\n  ]);\n\n  const projectId = entity.metadata.annotations?.[TECHDOCS_ANNOTATION];\n\n  if (!projectId) {\n    return React.createElement(MissingAnnotationEmptyState, { annotation: TECHDOCS_ANNOTATION,} );\n  }\n\n  return element;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * Utility API reference for the {@link TechDocsStorageApi}.\n *\n * @public\n * @deprecated Import from `@backstage/plugin-techdocs-react` instead\n */\nexport const techdocsStorageApiRef = createApiRef({\n  id: 'plugin.techdocs.storageservice',\n});\n\n/**\n * Utility API reference for the {@link TechDocsApi}.\n *\n * @public\n * @deprecated Import from `@backstage/plugin-techdocs-react` instead\n */\nexport const techdocsApiRef = createApiRef({\n  id: 'plugin.techdocs.service',\n});\n\n/**\n * The outcome of a docs sync operation.\n *\n * @public\n * @deprecated Import from `@backstage/plugin-techdocs-react` instead\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { NotFoundError, ResponseError } from '@backstage/errors';\n\n\n\n\nimport { EventSourcePolyfill } from 'event-source-polyfill';\n\n\n/**\n * API to talk to `techdocs-backend`.\n *\n * @public\n */\nexport class TechDocsClient  {\n   configApi;\n   discoveryApi;\n   fetchApi;\n\n  constructor(options\n\n\n\n) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl('techdocs');\n  }\n\n  /**\n   * Retrieve TechDocs metadata.\n   *\n   * When docs are built, we generate a techdocs_metadata.json and store it along with the generated\n   * static files. It includes necessary data about the docs site. This method requests techdocs-backend\n   * which retrieves the TechDocs metadata.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getTechDocsMetadata(\n    entityId,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n\n    return await request.json();\n  }\n\n  /**\n   * Retrieve metadata about an entity.\n   *\n   * This method requests techdocs-backend which uses the catalog APIs to respond with filtered\n   * information required here.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getEntityMetadata(\n    entityId,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n\n    return await request.json();\n  }\n}\n\n/**\n * API which talks to TechDocs storage to fetch files to render.\n *\n * @public\n */\nexport class TechDocsStorageClient  {\n   configApi;\n   discoveryApi;\n   identityApi;\n   fetchApi;\n\n  constructor(options\n\n\n\n\n) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl('techdocs');\n  }\n\n  async getStorageUrl() {\n    return (\n      this.configApi.getOptionalString('techdocs.storageUrl') ??\n      `${await this.discoveryApi.getBaseUrl('techdocs')}/static/docs`\n    );\n  }\n\n  async getBuilder() {\n    return this.configApi.getString('techdocs.builder');\n  }\n\n  /**\n   * Fetch HTML content as text for an individual docs page in an entity's docs site.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param path - The unique path to an individual docs page e.g. overview/what-is-new\n   * @returns HTML content of the docs page as string\n   * @throws Throws error when the page is not found.\n   */\n  async getEntityDocs(\n    entityId,\n    path,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n\n    const request = await this.fetchApi.fetch(\n      `${url.endsWith('/') ? url : `${url}/`}index.html`,\n    );\n\n    let errorMessage = '';\n    switch (request.status) {\n      case 404:\n        errorMessage = 'Page not found. ';\n        // path is empty for the home page of an entity's docs site\n        if (!path) {\n          errorMessage +=\n            'This could be because there is no index.md file in the root of the docs directory of this repository.';\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage =\n          'Could not generate documentation or an error in the TechDocs backend. ';\n        throw new Error(errorMessage);\n      default:\n        // Do nothing\n        break;\n    }\n\n    return request.text();\n  }\n\n  /**\n   * Check if docs are on the latest version and trigger rebuild if not\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param logHandler - Callback to receive log messages from the build process\n   * @returns Whether documents are currently synchronized to newest version\n   * @throws Throws error on error from sync endpoint in Techdocs Backend\n   */\n  async syncEntityDocs(\n    entityId,\n    logHandler = () => {},\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n\n    return new Promise((resolve, reject) => {\n      // Polyfill is used to add support for custom headers and auth\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      });\n\n      source.addEventListener('log', (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n\n      source.addEventListener('finish', (e) => {\n        let updated = false;\n\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n\n        resolve(updated ? 'updated' : 'cached');\n      });\n\n      source.onerror = (e) => {\n        source.close();\n\n        switch (e.status) {\n          // the endpoint returned a 404 status\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n\n          // also handles the event-stream close. the reject is ignored if the Promise was already\n          // resolved by a finish event.\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n\n  async getBaseUrl(\n    oldBaseUrl,\n    entityId,\n    path,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n\n    return new URL(\n      oldBaseUrl,\n      newBaseUrl.endsWith('/') ? newBaseUrl : `${newBaseUrl}/`,\n    ).toString();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Lower-case entity triplets by default, but allow override.\nexport function toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\n    'techdocs.legacyUseCaseSensitiveTripletPaths',\n  )\n    ? str\n    : str.toLocaleLowerCase('en-US');\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Content,\n  ContentHeader,\n  SupportButton,\n\n\n} from '@backstage/core-components';\nimport {\n  CatalogFilterLayout,\n  EntityListProvider,\n  EntityOwnerPicker,\n  EntityTagPicker,\n\n  UserListPicker,\n} from '@backstage/plugin-catalog-react';\nimport { TechDocsPageWrapper } from './TechDocsPageWrapper';\nimport { TechDocsPicker } from './TechDocsPicker';\nimport { EntityListDocsTable } from './Tables';\n\n/**\n * Props for {@link DefaultTechDocsHome}\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * Component which renders a default documentation landing page.\n *\n * @public\n */\nexport const DefaultTechDocsHome = (props) => {\n  const { initialFilter = 'all', columns, actions } = props;\n  return (\n    React.createElement(TechDocsPageWrapper, null\n      , React.createElement(Content, null\n        , React.createElement(ContentHeader, { title: \"\",}\n          , React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\"\n\n          )\n        )\n        , React.createElement(EntityListProvider, null\n          , React.createElement(CatalogFilterLayout, null\n            , React.createElement(CatalogFilterLayout.Filters, null\n              , React.createElement(TechDocsPicker, null )\n              , React.createElement(UserListPicker, { initialFilter: initialFilter,} )\n              , React.createElement(EntityOwnerPicker, null )\n              , React.createElement(EntityTagPicker, null )\n            )\n            , React.createElement(CatalogFilterLayout.Content, null\n              , React.createElement(EntityListDocsTable, { actions: actions, columns: columns,} )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { rootDocsRouteRef } from '../../../routes';\nimport { toLowerMaybe } from '../../../helpers';\n\nimport { useApi, useRouteRef, configApiRef } from '@backstage/core-plugin-api';\nimport {\n  Button,\n  ItemCardGrid,\n  ItemCardHeader,\n} from '@backstage/core-components';\nimport { Card, CardActions, CardContent, CardMedia } from '@material-ui/core';\nimport React from 'react';\n\n/**\n * Props for {@link DocsCardGrid}\n *\n * @public\n */\n\n\n\n\n/**\n * Component which accepts a list of entities and renders a item card for each entity\n *\n * @public\n */\nexport const DocsCardGrid = (props) => {\n  const { entities } = props;\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities) return null;\n  return (\n    React.createElement(ItemCardGrid, { 'data-testid': \"docs-explore\",}\n      , !entities?.length\n        ? null\n        : entities.map((entity, index) => (\n            React.createElement(Card, { key: index,}\n              , React.createElement(CardMedia, null\n                , React.createElement(ItemCardHeader, {\n                  title: entity.metadata.title ?? entity.metadata.name,}\n                )\n              )\n              , React.createElement(CardContent, null, entity.metadata.description)\n              , React.createElement(CardActions, null\n                , React.createElement(Button, {\n                  to: getRouteToReaderPageFor({\n                    namespace: toLowerMaybe(\n                      entity.metadata.namespace ?? 'default',\n                      config,\n                    ),\n                    kind: toLowerMaybe(entity.kind, config),\n                    name: toLowerMaybe(entity.metadata.name, config),\n                  }),\n                  color: \"primary\",\n                  'data-testid': \"read_docs\",}\n                , \"Read Docs\"\n\n                )\n              )\n            )\n          ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DocsCardGrid } from './DocsCardGrid';\nimport {\n  CodeSnippet,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\nimport { useEntityList } from '@backstage/plugin-catalog-react';\nimport React from 'react';\n\n/**\n * Component responsible to get entities from entity list context and pass down to DocsCardGrid\n *\n * @public\n */\nexport const EntityListDocsGrid = () => {\n  const { loading, error, entities } = useEntityList();\n\n  if (error) {\n    return (\n      React.createElement(WarningPanel, {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"    ,}\n      \n        , React.createElement(CodeSnippet, { language: \"text\", text: error.toString(),} )\n      )\n    );\n  }\n\n  if (loading || !entities) {\n    return React.createElement(Progress, null );\n  }\n\n  entities.sort((a, b) =>\n    (a.metadata.title ?? a.metadata.name).localeCompare(\n      b.metadata.title ?? b.metadata.name,\n    ),\n  );\n\n  return React.createElement(DocsCardGrid, { entities: entities,} );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\n\nimport { useRouteRef, useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport {\n  humanizeEntityRef,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { rootDocsRouteRef } from '../../../routes';\nimport {\n  Button,\n  EmptyState,\n  Table,\n\n\n} from '@backstage/core-components';\nimport { actionFactories } from './actions';\nimport { columnFactories } from './columns';\nimport { toLowerMaybe } from '../../../helpers';\n\n\n/**\n * Props for {@link DocsTable}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Component which renders a table documents\n *\n * @public\n */\nexport const DocsTable = (props) => {\n  const { entities, title, loading, columns, actions } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities) return null;\n\n  const documents = entities.map(entity => {\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            entity.metadata.namespace ?? 'default',\n            config,\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config),\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations\n          .map(r => humanizeEntityRef(r, { defaultKind: 'group' }))\n          .join(', '),\n      },\n    };\n  });\n\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createTypeColumn(),\n  ];\n\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n  ];\n\n  return (\n    React.createElement(React.Fragment, null\n      , loading || (documents && documents.length > 0) ? (\n        React.createElement(Table, {\n          isLoading: loading,\n          options: {\n            paging: true,\n            pageSize: 20,\n            search: true,\n            actionsColumnIndex: -1,\n          },\n          data: documents,\n          columns: columns || defaultColumns,\n          actions: actions || defaultActions,\n          title: \n            title\n              ? `${title} (${documents.length})`\n              : `All (${documents.length})`\n          ,}\n        )\n      ) : (\n        React.createElement(EmptyState, {\n          missing: \"data\",\n          title: \"No documents to show\"   ,\n          description: \"Create your own document. Check out our Getting Started Information\"         ,\n          action: \n            React.createElement(Button, {\n              color: \"primary\",\n              to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n              variant: \"contained\",}\n            , \"DOCS\"\n\n            )\n          ,}\n        )\n      )\n    )\n  );\n};\n\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { capitalize } from 'lodash';\nimport {\n  CodeSnippet,\n\n\n  WarningPanel,\n} from '@backstage/core-components';\nimport {\n  useEntityList,\n  useStarredEntities,\n} from '@backstage/plugin-catalog-react';\nimport { DocsTable } from './DocsTable';\nimport { actionFactories } from './actions';\nimport { columnFactories } from './columns';\n\n\n/**\n * Props for {@link EntityListDocsTable}.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Component which renders a table with entities from catalog.\n *\n * @public\n */\nexport const EntityListDocsTable = (props) => {\n  const { columns, actions } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n\n  const title = capitalize(filters.user?.value ?? 'all');\n\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(\n      isStarredEntity,\n      toggleStarredEntity,\n    ),\n  ];\n\n  if (error) {\n    return (\n      React.createElement(WarningPanel, {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"    ,}\n      \n        , React.createElement(CodeSnippet, { language: \"text\", text: error.toString(),} )\n      )\n    );\n  }\n\n  return (\n    React.createElement(DocsTable, {\n      title: title,\n      entities: entities,\n      loading: loading,\n      actions: actions || defaultActions,\n      columns: columns,}\n    )\n  );\n};\n\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { withStyles } from '@material-ui/styles';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\n\nconst YellowStar = withStyles({\n  root: {\n    color: '#f3ba37',\n  },\n})(Star);\n\n/**\n * Not directly exported, but through DocsTable.actions and EntityListDocsTable.actions\n *\n * @public\n */\nexport const actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => React.createElement(ShareIcon, { fontSize: \"small\",} ),\n        tooltip: 'Click to copy documentation link to clipboard',\n        onClick: () =>\n          copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`),\n      };\n    };\n  },\n  createStarEntityAction(\n    isStarredEntity,\n    toggleStarredEntity,\n  ) {\n    return ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: '1em' },\n        icon: () => (isStarred ? React.createElement(YellowStar, null ) : React.createElement(StarBorder, null )),\n        tooltip: isStarred ? 'Remove from favorites' : 'Add to favorites',\n        onClick: () => toggleStarredEntity(entity),\n      };\n    };\n  },\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Link, SubvalueCell, } from '@backstage/core-components';\nimport { EntityRefLinks } from '@backstage/plugin-catalog-react';\n\n\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\n\n/**\n * Not directly exported, but through DocsTable.columns and EntityListDocsTable.columns\n *\n * @public\n */\nexport const columnFactories = {\n  createNameColumn() {\n    return {\n      title: 'Document',\n      field: 'entity.metadata.name',\n      highlight: true,\n      render: (row) => (\n        React.createElement(SubvalueCell, {\n          value: \n            React.createElement(Link, { to: row.resolved.docsUrl,}, customTitle(row.entity))\n          ,\n          subvalue: row.entity.metadata.description,}\n        )\n      ),\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: 'Owner',\n      field: 'resolved.ownedByRelationsTitle',\n      render: ({ resolved }) => (\n        React.createElement(EntityRefLinks, {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\",}\n        )\n      ),\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: 'Type',\n      field: 'entity.spec.type',\n    };\n  },\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useOutlet } from 'react-router';\nimport { DefaultTechDocsHome } from './DefaultTechDocsHome';\n\nexport const TechDocsIndexPage = () => {\n  const outlet = useOutlet();\n\n  return outlet || React.createElement(DefaultTechDocsHome, null );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { PageWithHeader } from '@backstage/core-components';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\n/**\n * Props for {@link TechDocsPageWrapper}\n *\n * @public\n */\n\n\n\n\n/**\n * Component wrapping a techdocs page with Page and Header components\n *\n * @public\n */\nexport const TechDocsPageWrapper = (props) => {\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${\n    configApi.getOptionalString('organization.name') ?? 'Backstage'\n  }`;\n\n  return (\n    React.createElement(PageWithHeader, {\n      title: \"Documentation\",\n      subtitle: generatedSubtitle,\n      themeId: \"documentation\",}\n    \n      , children\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\nimport {\n  CATALOG_FILTER_EXISTS,\n\n\n  useEntityList,\n} from '@backstage/plugin-catalog-react';\n\nclass TechDocsFilter  {\n  getCatalogFilters() {\n    return {\n      'metadata.annotations.backstage.io/techdocs-ref': CATALOG_FILTER_EXISTS,\n    };\n  }\n}\n\n\n\n\n\n/**\n * Component responsible for updating TechDocs filters\n *\n * @public\n */\nexport const TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter(),\n    });\n  }, [updateFilters]);\n\n  return null;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  techdocsApiRef,\n  techdocsStorageApiRef,\n} from '@backstage/plugin-techdocs-react';\nimport { TechDocsClient, TechDocsStorageClient } from './client';\nimport {\n  rootDocsRouteRef,\n  rootRouteRef,\n  rootCatalogDocsRouteRef,\n} from './routes';\nimport {\n  configApiRef,\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\n/**\n * The Backstage plugin that renders technical documentation for your components\n *\n * @public\n */\nexport const techdocsPlugin = createPlugin({\n  id: 'techdocs',\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) =>\n        new TechDocsStorageClient({\n          configApi,\n          discoveryApi,\n          identityApi,\n          fetchApi,\n        }),\n    }),\n    createApiFactory({\n      api: techdocsApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) =>\n        new TechDocsClient({\n          configApi,\n          discoveryApi,\n          fetchApi,\n        }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef,\n  },\n});\n\n/**\n * Routable extension used to render docs\n *\n * @public\n */\nexport const TechdocsPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechdocsPage',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * Routable extension used to render docs on Entity page\n *\n * @public\n */\nexport const EntityTechdocsContent = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityTechdocsContent',\n    component: () => import('./Router').then(m => m.EmbeddedDocsRouter),\n    mountPoint: rootCatalogDocsRouteRef,\n  }),\n);\n\n/**\n * Component which takes a custom tabs config object and renders a documentation landing page.\n *\n * @public\n */\nexport const TechDocsCustomHome = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechDocsCustomHome',\n    component: () =>\n      import('./home/components/TechDocsCustomHome').then(\n        m => m.TechDocsCustomHome,\n      ),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * Responsible for rendering the provided router element\n *\n * @public\n */\nexport const TechDocsIndexPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechDocsIndexPage',\n    component: () =>\n      import('./home/components/TechDocsIndexPage').then(\n        m => m.TechDocsIndexPage,\n      ),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * Component responsible for composing a TechDocs reader page experience\n *\n * @public\n */\nexport const TechDocsReaderPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechDocsReaderPage',\n    component: () =>\n      import('./reader/components/TechDocsReaderPage').then(\n        m => m.TechDocsReaderPage,\n      ),\n    mountPoint: rootDocsRouteRef,\n  }),\n);\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Children } from 'react';\nimport { useOutlet, useParams } from 'react-router-dom';\n\nimport { Page } from '@backstage/core-components';\n\nimport {\n  TECHDOCS_ADDONS_WRAPPER_KEY,\n  TechDocsReaderPageProvider,\n} from '@backstage/plugin-techdocs-react';\n\n\n\nimport { TechDocsReaderPageContent } from '../TechDocsReaderPageContent';\nimport { TechDocsReaderPageHeader } from '../TechDocsReaderPageHeader';\nimport { TechDocsReaderPageSubheader } from '../TechDocsReaderPageSubheader';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Default TechDocs reader page structure composed with a header and content\n * @public\n */\nexport const TechDocsReaderLayout = ({\n  withSearch,\n  withHeader = true,\n}) => {\n  return (\n    React.createElement(Page, { themeId: \"documentation\",}\n      , withHeader && React.createElement(TechDocsReaderPageHeader, null )\n      , React.createElement(TechDocsReaderPageSubheader, null )\n      , React.createElement(TechDocsReaderPageContent, { withSearch: withSearch,} )\n    )\n  );\n};\n\n/**\n * @public\n */\n\n\n\n\n\n/**\n * An addon-aware implementation of the TechDocsReaderPage.\n * @public\n */\nexport const TechDocsReaderPage = (props) => {\n  const { kind, name, namespace } = useParams();\n  const { children, entityRef = { kind, name, namespace } } = props;\n\n  const outlet = useOutlet();\n\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n\n    const page = childrenList.find(child => {\n      const { type } = child ;\n      return !type?.__backstage_data?.map?.get(TECHDOCS_ADDONS_WRAPPER_KEY);\n    });\n\n    return (\n      React.createElement(TechDocsReaderPageProvider, { entityRef: entityRef,}\n        , (page ) || React.createElement(TechDocsReaderLayout, null )\n      )\n    );\n  }\n\n  return (\n    React.createElement(TechDocsReaderPageProvider, { entityRef: entityRef,}\n      , ({ metadata, entityMetadata, onReady }) => (\n        React.createElement(Page, { themeId: \"documentation\",}\n          , children instanceof Function\n            ? children({\n                entityRef,\n                techdocsMetadataValue: metadata.value,\n                entityMetadataValue: entityMetadata.value,\n                onReady,\n              })\n            : children\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport {\n  Button,\n  createStyles,\n  Drawer,\n  Grid,\n  IconButton,\n  makeStyles,\n\n  Typography,\n} from '@material-ui/core';\nimport Close from '@material-ui/icons/Close';\nimport React, { useState } from 'react';\n\nconst useDrawerStyles = makeStyles((theme) =>\n  createStyles({\n    paper: {\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: '75%',\n      },\n      [theme.breakpoints.up('md')]: {\n        width: '50%',\n      },\n      padding: theme.spacing(2.5),\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n    },\n    logs: {\n      background: theme.palette.background.default,\n    },\n  }),\n);\n\nexport const TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose,\n}\n\n\n) => {\n  const classes = useDrawerStyles();\n  const logText =\n    buildLog.length === 0 ? 'Waiting for logs...' : buildLog.join('\\n');\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      className: classes.root,\n      spacing: 0,\n      wrap: \"nowrap\",}\n    \n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        spacing: 0,\n        wrap: \"nowrap\",}\n      \n        , React.createElement(Typography, { variant: \"h5\",}, \"Build Details\" )\n        , React.createElement(IconButton, {\n          key: \"dismiss\",\n          title: \"Close the drawer\"  ,\n          onClick: onClose,\n          color: \"inherit\",}\n        \n          , React.createElement(Close, null )\n        )\n      )\n      , React.createElement(LogViewer, { text: logText, classes: { root: classes.logs },} )\n    )\n  );\n};\n\nexport const TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, { color: \"inherit\", onClick: () => setOpen(true),}, \"Show Build Logs\"\n\n      )\n      , React.createElement(Drawer, {\n        classes: { paper: classes.paper },\n        anchor: \"right\",\n        open: open,\n        onClose: () => setOpen(false),}\n      \n        , React.createElement(TechDocsBuildLogsDrawerContent, {\n          buildLog: buildLog,\n          onClose: () => setOpen(false),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { ErrorPage } from '@backstage/core-components';\n\n\n\n\n\nexport const TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder =\n    useApi(configApiRef).getOptionalString('techdocs.builder');\n\n  let additionalInfo = '';\n  if (techdocsBuilder !== 'local') {\n    additionalInfo =\n      \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not \" +\n      \"generate docs if they are not found. Make sure the project's docs are generated and published by some external \" +\n      \"process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage \" +\n      'instance.';\n  }\n\n  return (\n    React.createElement(ErrorPage, {\n      status: \"404\",\n      statusMessage: errorMessage || 'Documentation not found',\n      additionalInfo: additionalInfo,}\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CircularProgress, Button, makeStyles } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\n\nimport { TechDocsBuildLogs } from './TechDocsBuildLogs';\nimport { TechDocsNotFound } from './TechDocsNotFound';\nimport { useTechDocsReader } from './TechDocsReaderProvider';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: theme.spacing(2),\n  },\n  message: {\n    // `word-break: break-word` is deprecated, but gives legacy support to browsers not supporting `overflow-wrap` yet\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/word-break\n    wordBreak: 'break-word',\n    overflowWrap: 'anywhere',\n  },\n}));\n\nexport const TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles();\n\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog,\n  } = useTechDocsReader();\n\n  if (state === 'INITIAL_BUILD') {\n    StateAlert = (\n      React.createElement(Alert, {\n        classes: { root: classes.root },\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: React.createElement(CircularProgress, { size: \"24px\",} ),\n        action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),}\n      , \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\"\n\n\n      )\n    );\n  }\n\n  if (state === 'CONTENT_STALE_REFRESHING') {\n    StateAlert = (\n      React.createElement(Alert, {\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: React.createElement(CircularProgress, { size: \"24px\",} ),\n        action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),\n        classes: { root: classes.root },}\n      , \"A newer version of this documentation is being prepared and will be available shortly.\"\n\n\n      )\n    );\n  }\n\n  if (state === 'CONTENT_STALE_READY') {\n    StateAlert = (\n      React.createElement(Alert, {\n        variant: \"outlined\",\n        severity: \"success\",\n        action: \n          React.createElement(Button, { color: \"inherit\", onClick: () => contentReload(),}, \"Refresh\"\n\n          )\n        ,\n        classes: { root: classes.root },}\n      , \"A newer version of this documentation is now available, please refresh to view.\"\n\n\n      )\n    );\n  }\n\n  if (state === 'CONTENT_STALE_ERROR') {\n    StateAlert = (\n      React.createElement(Alert, {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),\n        classes: { root: classes.root, message: classes.message },}\n      , \"Building a newer version of this documentation failed.\"\n               , ' '\n        , syncErrorMessage\n      )\n    );\n  }\n\n  if (state === 'CONTENT_NOT_FOUND') {\n    StateAlert = (\n      React.createElement(React.Fragment, null\n        , syncErrorMessage && (\n          React.createElement(Alert, {\n            variant: \"outlined\",\n            severity: \"error\",\n            action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),\n            classes: { root: classes.root, message: classes.message },}\n          , \"Building a newer version of this documentation failed.\"\n                   , ' '\n            , syncErrorMessage\n          )\n        )\n        , React.createElement(TechDocsNotFound, { errorMessage: contentErrorMessage,} )\n      )\n    );\n  }\n\n  return StateAlert;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\n\n/**\n * Checks whether a node is link or not.\n * @param node - can be any element.\n * @returns true when node is link.\n */\nconst isLink = (node) => node.nodeName === 'LINK';\n\n/**\n * Checks whether a link is safe or not.\n * @param node - is an link element.\n * @returns true when link is mkdocs css, google fonts or gstatic fonts.\n */\nconst isSafe = (node) => {\n  const href = node?.getAttribute('href') || '';\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\n\n/**\n * Function that removes unsafe link nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeLinks = (node) => {\n  if (isLink(node) && !isSafe(node)) {\n    node.remove();\n  }\n  return node;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks whether a node is iframe or not.\n * @param node - can be any element.\n * @returns true when node is iframe.\n */\nconst isIframe = (node) => node.nodeName === 'IFRAME';\n\n/**\n * Checks whether a iframe is safe or not.\n * @param node - is an iframe element.\n * @param hosts - list of allowed hosts.\n * @returns true when iframe is included in hosts.\n */\nconst isSafe = (node, hosts) => {\n  const src = node.getAttribute('src') || '';\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Returns a function that removes unsafe iframe nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeIframes = (hosts) => (node) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport DOMPurify from 'dompurify';\nimport { useMemo, useCallback } from 'react';\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\n\nimport { removeUnsafeLinks, removeUnsafeIframes } from './hooks';\n\n/**\n * Returns html sanitizer configuration\n */\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n\n  return useMemo(() => {\n    return configApi.getOptionalConfig('techdocs.sanitizer');\n  }, [configApi]);\n};\n\n/**\n * Returns a transformer that sanitizes the dom's internal html.\n */\nexport const useSanitizerTransformer = () => {\n  const config = useSanitizerConfig();\n\n  return useCallback(\n    async (dom) => {\n      const hosts = config?.getOptionalStringArray('allowedIframeHosts');\n\n      DOMPurify.addHook('beforeSanitizeElements', removeUnsafeLinks);\n      const tags = ['link'];\n\n      if (hosts) {\n        tags.push('iframe');\n        DOMPurify.addHook('beforeSanitizeElements', removeUnsafeIframes(hosts));\n      }\n\n      return DOMPurify.sanitize(dom.innerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: ['style'],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true,\n      });\n    },\n    [config],\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { alpha, lighten } from '@material-ui/core';\n\nexport default ({ theme }) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n    theme.palette.text.secondary,\n    0.3,\n  )};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n    theme.palette.background.paper,\n    0.7,\n  )};\n  --md-default-bg-color--lightest: ${lighten(\n    theme.palette.background.paper,\n    0.3,\n  )};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n    theme.palette.primary.contrastText,\n    0.7,\n  )};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.primary.light\n      : theme.palette.primary.dark\n  };\n  --md-code-hl-function-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.secondary.light\n      : theme.palette.secondary.dark\n  };\n  --md-code-hl-string-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.success.light\n      : theme.palette.success.dark\n  };\n  --md-code-hl-number-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.error.light\n      : theme.palette.error.dark\n  };\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: var(--md-accent-fg-color);\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.error.dark, 0.5)\n      : alpha(theme.palette.error.light, 0.5)\n  };\n  --md-typeset-ins-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.success.dark, 0.5)\n      : alpha(theme.palette.success.light, 0.5)\n  };\n  --md-typeset-mark-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.warning.dark, 0.5)\n      : alpha(theme.palette.warning.light, 0.5)\n  };\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ({ theme }) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ({ theme, sidebar }) => `\n/*==================  Layout  ==================*/\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(16rem - 10px);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n}\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${\n      sidebar.isPinned ? 'calc(-12.1rem + 242px)' : 'calc(-12.1rem + 72px)'\n    } !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst headings = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\nexport default ({ theme }) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce((style, heading) => {\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value) => {\n    let factor = 1;\n    if (typeof value === 'number') {\n      // 60% of the size defined because it is too big\n      factor = (value / 16) * 0.6;\n    }\n    if (typeof value === 'string') {\n      factor = value.replace('rem', '');\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, '')}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ({ theme }) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === 'dark' ? '#ff53a3' : '#ec407a'};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${\n    theme.palette.type === 'dark' ? 'rgba(248,81,73,0.65)' : '#fdd'\n  };\n}\n\n.codehilite .gi {\n  background-color: ${\n    theme.palette.type === 'dark' ? 'rgba(46,160,67,0.65)' : '#dfd'\n  };\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { default as variables } from './variables';\nimport { default as reset } from './reset';\nimport { default as layout } from './layout';\nimport { default as typeset } from './typeset';\nimport { default as animations } from './animations';\nimport { default as extensions } from './extensions';\n\n/**\n * A list of style rules that will be applied to an element in the order they were added.\n *\n * @remarks\n * The order of items is important, which means that a rule can override any other rule previously added to the list,\n * i.e. the rules will be applied from the first added to the last added.\n */\nexport const rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions,\n];\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useMemo } from 'react';\n\nimport { useTheme } from '@material-ui/core';\n\nimport { useSidebarPinState } from '@backstage/core-components';\n\n\n\nimport { rules } from './rules';\n\n/**\n * Sidebar pinned state to be used in computing style injections.\n */\nconst useSidebar = () => useSidebarPinState();\n\n/**\n * Process all rules and concatenate their definitions into a single style.\n * @returns a string containing all processed style definitions.\n */\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce((styles, rule) => styles + rule(options), '');\n  }, [theme, sidebar]);\n};\n\n/**\n * Returns a transformer that inserts all style rules into the given element's head tag.\n */\nexport const useStylesTransformer = () => {\n  const styles = useRuleStyles();\n\n  return useCallback(\n    (dom) => {\n      dom\n        .getElementsByTagName('head')[0]\n        .insertAdjacentHTML('beforeend', `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles],\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * TechDocs backend serves SVGs with text/plain content-type for security. This\n * helper determines if an SVG is being loaded from the backend, and thus needs\n * inlining to be displayed properly.\n */\nconst isSvgNeedingInlining = (\n  attrName,\n  attrVal,\n  apiOrigin,\n) => {\n  const isSrcToSvg = attrName === 'src' && attrVal.endsWith('.svg');\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\n\nexport const addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path,\n}) => {\n  return async dom => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n\n    const updateDom = async ( \n      list,\n      attributeName,\n    ) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute) return;\n\n          // Special handling for SVG images.\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path,\n          );\n\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: 'include' });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent)),\n                )}`,\n              );\n            } catch (e) {\n              elem.setAttribute('alt', `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n\n    await Promise.all([\n      updateDom(dom.querySelectorAll('img'), 'src'),\n      updateDom(dom.querySelectorAll('script'), 'src'),\n      updateDom(dom.querySelectorAll('source'), 'src'),\n      updateDom(dom.querySelectorAll('link'), 'href'),\n      updateDom(dom.querySelectorAll('a[download]'), 'href'),\n    ]);\n\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  replaceGitHubUrlType,\n\n} from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport parseGitUrl from 'git-url-parse';\n\n// requires repo\nexport const addGitFeedbackLink = (\n  scmIntegrationsApi,\n) => {\n  return dom => {\n    // attempting to use selectors that are more likely to be static as MkDocs updates over time\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]',\n    ) ;\n\n    // don't show if edit link not available in raw page\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n\n    // don't show if can't identify edit link hostname as a gitlab/github hosting\n    if (integration?.type !== 'github' && integration?.type !== 'gitlab') {\n      return dom;\n    }\n\n    // topmost h1 only contains title for whole page\n    const title =\n      (dom.querySelector('article>h1') )?.childNodes[0]\n        .textContent || '';\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\\n${sourceAnchor.href}\\n\\nFeedback:`,\n    );\n\n    // Convert GitHub edit url to blob type so it can be parsed by git-url-parse correctly\n    const gitUrl =\n      integration?.type === 'github'\n        ? replaceGitHubUrlType(sourceURL.href, 'blob')\n        : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n\n    const feedbackLink = sourceAnchor.cloneNode() ;\n    switch (integration?.type) {\n      case 'gitlab':\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case 'github':\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    ReactDOM.render(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = '5px';\n    feedbackLink.title = 'Leave feedback for this page';\n    feedbackLink.id = 'git-feedback-link';\n    sourceAnchor?.insertAdjacentElement('beforebegin', feedbackLink);\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport const addSidebarToggle = () => {\n  return dom => {\n    // attempting to use selectors that are more likely to be static as MkDocs updates over time\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]',\n    ) ;\n    const article = dom.querySelector('article') ;\n\n    // Fail gracefully\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode() ;\n    ReactDOM.render(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = 'toggle-sidebar';\n    toggleSidebar.title = 'Toggle Sidebar';\n    toggleSidebar.classList.add('md-content__button');\n    toggleSidebar.style.setProperty('padding', '0 0 0 5px');\n    toggleSidebar.style.setProperty('margin', '0.4rem 0 0.4rem 0.4rem');\n    article?.prepend(toggleSidebar);\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const rewriteDocLinks = () => {\n  return dom => {\n    const updateDom = (\n      list,\n      attributeName,\n    ) => {\n      Array.from(list)\n        .filter(elem => elem.hasAttribute(attributeName))\n        .forEach((elem) => {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (elemAttribute) {\n            // if link is external, add target to open in a new window or tab\n            if (elemAttribute.match(/^https?:\\/\\//i)) {\n              elem.setAttribute('target', '_blank');\n            }\n\n            try {\n              const normalizedWindowLocation = normalizeUrl(\n                window.location.href,\n              );\n              elem.setAttribute(\n                attributeName,\n                new URL(elemAttribute, normalizedWindowLocation).toString(),\n              );\n            } catch (_e) {\n              // Non-parseable links should be re-written as plain text.\n              elem.replaceWith(elem.textContent || elemAttribute);\n            }\n          }\n        });\n    };\n\n    updateDom(Array.from(dom.getElementsByTagName('a')), 'href');\n\n    return dom;\n  };\n};\n\n/** Make sure that the input url always ends with a '/' */\nexport function normalizeUrl(input) {\n  const url = new URL(input);\n\n  if (!url.pathname.endsWith('/') && !url.pathname.endsWith('.html')) {\n    url.pathname += '/';\n  }\n\n  return url.toString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const addLinkClickListener = ({\n  baseUrl,\n  onClick,\n}) => {\n  return dom => {\n    Array.from(dom.getElementsByTagName('a')).forEach(elem => {\n      elem.addEventListener('click', (e) => {\n        const target = elem ;\n        const href = target.getAttribute('href');\n\n        if (!href) return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute('download')) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n\n    return dom;\n  };\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\nimport ReactDom from 'react-dom';\nimport {\n  withStyles,\n\n  ThemeProvider,\n  SvgIcon,\n  Tooltip,\n} from '@material-ui/core';\n\nconst CopyToClipboardTooltip = withStyles(theme => ({\n  tooltip: {\n    fontSize: 'inherit',\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: 'transparent',\n    boxShadow: 'none',\n  },\n}))(Tooltip);\n\nconst CopyToClipboardIcon = () => (\n  React.createElement(SvgIcon, null\n    , React.createElement('path', { d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"                ,} )\n  )\n);\n\n\n\n\n\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n\n  const handleClick = useCallback(() => {\n    navigator.clipboard.writeText(text);\n    setOpen(true);\n  }, [text]);\n\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  return (\n    React.createElement(CopyToClipboardTooltip, {\n      title: \"Copied to clipboard\"  ,\n      placement: \"left\",\n      open: open,\n      onClose: handleClose,\n      leaveDelay: 1000,}\n    \n      , React.createElement('button', { className: \"md-clipboard md-icon\" , onClick: handleClick,}\n        , React.createElement(CopyToClipboardIcon, null )\n      )\n    )\n  );\n};\n\n\n\n/**\n * Recreates copy-to-clipboard functionality attached to <code> snippets that\n * is native to mkdocs-material theme.\n */\nexport const copyToClipboard = (theme) => {\n  return dom => {\n    const codes = dom.querySelectorAll('pre > code');\n    for (const code of codes) {\n      const text = code.textContent || '';\n      const container = document.createElement('div');\n      code?.parentElement?.prepend(container);\n      ReactDom.render(\n        React.createElement(ThemeProvider, { theme: theme,}\n          , React.createElement(CopyToClipboardButton, { text: text,} )\n        ),\n        container,\n      );\n    }\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const removeMkdocsHeader = () => {\n  return dom => {\n    // Remove the header\n    dom.querySelector('.md-header')?.remove();\n\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const simplifyMkdocsFooter = () => {\n  return dom => {\n    // Remove new mkdocs copyright\n    dom.querySelector('.md-footer .md-copyright')?.remove();\n    // Remove old mkdocs copyright\n    dom.querySelector('.md-footer-copyright')?.remove();\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SHADOW_DOM_STYLE_LOAD_EVENT } from '@backstage/plugin-techdocs-react';\n\n\n\n\n\n\n\nexport const onCssReady = ({\n  onLoading,\n  onLoaded,\n}) => {\n  return dom => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad,\n        );\n      },\n    );\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const scrollIntoAnchor = () => {\n  return dom => {\n    setTimeout(() => {\n      // Scroll to the desired anchor on initial navigation\n      if (window.location.hash) {\n        const hash = window.location.hash.slice(1);\n        // fix invalid selector error for anchor starting with number\n        dom?.querySelector(`[id=\"${hash}\"]`)?.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nexport const transform = async (\n  html,\n  transformers,\n) => {\n  let dom;\n\n  if (typeof html === 'string') {\n    dom = new DOMParser().parseFromString(html, 'text/html').documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error('dom is not a recognized type');\n  }\n\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n\n  return dom;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useTheme, useMediaQuery } from '@material-ui/core';\n\n\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\n\nimport {\n  techdocsStorageApiRef,\n  useShadowDomStylesLoading,\n} from '@backstage/plugin-techdocs-react';\n\nimport { useTechDocsReader } from '../TechDocsReaderProvider';\n\nimport {\n  addBaseUrl,\n  addGitFeedbackLink,\n  addLinkClickListener,\n  addSidebarToggle,\n  onCssReady,\n  removeMkdocsHeader,\n  rewriteDocLinks,\n  simplifyMkdocsFooter,\n  scrollIntoAnchor,\n  transform as transformer,\n  copyToClipboard,\n  useSanitizerTransformer,\n  useStylesTransformer,\n} from '../../transformers';\n\nconst MOBILE_MEDIA_QUERY = 'screen and (max-width: 76.1875em)';\n\n/**\n * Hook that encapsulates the behavior of getting raw HTML and applying\n * transforms to it in order to make it function at a basic level in the\n * Backstage UI.\n */\nexport const useTechDocsReaderDom = (\n  entityRef,\n) => {\n  const navigate = useNavigate();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n\n  const { state, path, content: rawPage } = useTechDocsReader();\n\n  const [dom, setDom] = useState(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom) return;\n\n    const sidebars = dom.querySelectorAll('.md-sidebar');\n\n    sidebars.forEach(element => {\n      // set sidebar position to render in correct position\n      if (isMobileMedia) {\n        element.style.top = '0px';\n      } else {\n        const domTop = dom.getBoundingClientRect().top ?? 0;\n        const tabs = dom.querySelector('.md-container > .md-tabs');\n        const tabsHeight = tabs?.getBoundingClientRect().height ?? 0;\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n\n      // show the sidebar only after updating its position\n      element.style.setProperty('opacity', '1');\n    });\n  }, [dom, isMobileMedia]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSidebarPosition);\n    window.addEventListener('scroll', updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener('resize', updateSidebarPosition);\n      window.removeEventListener('scroll', updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n\n  // dynamically set width of footer to accommodate for pinning of the sidebar\n  const updateFooterWidth = useCallback(() => {\n    if (!dom) return;\n    const footer = dom.querySelector('.md-footer');\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateFooterWidth);\n    return () => {\n      window.removeEventListener('resize', updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n\n  // an update to \"state\" might lead to an updated UI so we include it as a trigger\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n\n  // a function that performs transformations that are executed prior to adding it to the DOM\n  const preRender = useCallback(\n    (rawContent, contentPath) =>\n      transformer(rawContent, [\n        sanitizerTransformer,\n        addBaseUrl({\n          techdocsStorageApi,\n          entityId: entityRef,\n          path: contentPath,\n        }),\n        rewriteDocLinks(),\n        addSidebarToggle(),\n        removeMkdocsHeader(),\n        simplifyMkdocsFooter(),\n        addGitFeedbackLink(scmIntegrationsApi),\n        stylesTransformer,\n      ]),\n    [\n      // only add dependencies that are in state or memorized variables to avoid unnecessary calls between re-renders\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer,\n    ],\n  );\n\n  // a function that performs transformations that are executed after adding it to the DOM\n  const postRender = useCallback(\n    async (transformedElement) =>\n      transformer(transformedElement, [\n        scrollIntoAnchor(),\n        copyToClipboard(theme),\n        addLinkClickListener({\n          baseUrl: window.location.origin,\n          onClick: (event, url) => {\n            // detect if CTRL or META keys are pressed so that links can be opened in a new tab with `window.open`\n            const modifierActive = event.ctrlKey || event.metaKey;\n            const parsedUrl = new URL(url);\n\n            // hash exists when anchor is clicked on secondary sidebar\n            if (parsedUrl.hash) {\n              if (modifierActive) {\n                window.open(`${parsedUrl.pathname}${parsedUrl.hash}`, '_blank');\n              } else {\n                navigate(`${parsedUrl.pathname}${parsedUrl.hash}`);\n                // Scroll to hash if it's on the current page\n                transformedElement\n                  ?.querySelector(`#${parsedUrl.hash.slice(1)}`)\n                  ?.scrollIntoView();\n              }\n            } else {\n              if (modifierActive) {\n                window.open(parsedUrl.pathname, '_blank');\n              } else {\n                navigate(parsedUrl.pathname);\n              }\n            }\n          },\n        }),\n        // disable MkDocs drawer toggling ('for' attribute => checkbox mechanism)\n        onCssReady({\n          onLoading: () => {},\n          onLoaded: () => {\n            transformedElement\n              .querySelector('.md-nav__title')\n              ?.removeAttribute('for');\n          },\n        }),\n        // hide sidebars until their positions are updated\n        onCssReady({\n          onLoading: () => {\n            const sidebars = Array.from(\n              transformedElement.querySelectorAll('.md-sidebar'),\n            );\n            sidebars.forEach(element => {\n              element.style.setProperty('opacity', '0');\n            });\n          },\n          onLoaded: () => {},\n        }),\n      ]),\n    [theme, navigate],\n  );\n\n  useEffect(() => {\n    if (!rawPage) return () => {};\n\n    // if false, there is already a newer execution of this effect\n    let shouldReplaceContent = true;\n\n    // Pre-render\n    preRender(rawPage, path).then(async preTransformedDomElement => {\n      if (!preTransformedDomElement?.innerHTML) {\n        return; // An unexpected error occurred\n      }\n\n      // don't manipulate the shadow dom if this isn't the latest effect execution\n      if (!shouldReplaceContent) {\n        return;\n      }\n\n      // Scroll to top after render\n      window.scroll({ top: 0 });\n\n      // Post-render\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement,\n      );\n      setDom(postTransformedDomElement );\n    });\n\n    // cancel this execution\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n\n  return dom;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Portal } from '@material-ui/core';\nimport {\n  useTechDocsAddons,\n  TechDocsAddonLocations as locations,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nexport const TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n\n  const { shadowRoot } = useTechDocsReaderPage();\n\n  const contentElement = shadowRoot?.querySelector(\n    '[data-md-component=\"content\"]',\n  );\n\n  const primarySidebarElement = shadowRoot?.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]',\n  );\n  let primarySidebarAddonLocation = primarySidebarElement?.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]',\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement('div');\n    primarySidebarAddonLocation.setAttribute(\n      'data-techdocs-addons-location',\n      'primary sidebar',\n    );\n    primarySidebarElement?.prepend(primarySidebarAddonLocation);\n  }\n\n  const secondarySidebarElement = shadowRoot?.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]',\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement?.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]',\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement('div');\n    secondarySidebarAddonLocation.setAttribute(\n      'data-techdocs-addons-location',\n      'secondary sidebar',\n    );\n    secondarySidebarElement?.prepend(secondarySidebarAddonLocation);\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Portal, { container: primarySidebarAddonLocation,}\n        , addons.renderComponentsByLocation(locations.PrimarySidebar)\n      )\n      , React.createElement(Portal, { container: contentElement,}\n        , addons.renderComponentsByLocation(locations.Content)\n      )\n      , React.createElement(Portal, { container: secondarySidebarAddonLocation,}\n        , addons.renderComponentsByLocation(locations.SecondarySidebar)\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback } from 'react';\n\nimport { makeStyles, Grid } from '@material-ui/core';\n\nimport {\n  TechDocsShadowDom,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nimport { Content, ErrorPage } from '@backstage/core-components';\n\nimport { TechDocsSearch } from '../../../search';\nimport { TechDocsStateIndicator } from '../TechDocsStateIndicator';\n\nimport { useTechDocsReaderDom } from './dom';\nimport { withTechDocsReaderProvider } from '../TechDocsReaderProvider';\nimport { TechDocsReaderPageContentAddons } from './TechDocsReaderPageContentAddons';\n\nconst useStyles = makeStyles({\n  search: {\n    width: '100%',\n    '@media (min-width: 76.1875em)': {\n      width: 'calc(100% - 34.4rem)',\n      margin: '0 auto',\n    },\n  },\n});\n\n/**\n * Props for {@link TechDocsReaderPageContent}\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Renders the reader page content\n * @public\n */\nexport const TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props) => {\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles();\n\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot,\n    } = useTechDocsReaderPage();\n\n    const dom = useTechDocsReaderDom(entityRef);\n\n    const handleAppend = useCallback(\n      (newShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady],\n    );\n\n    // No entity metadata = 404. Don't render content at all.\n    if (entityMetadataLoading === false && !entityMetadata)\n      return React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\"  ,} );\n\n    // Do not return content until dom is ready; instead, render a state\n    // indicator, which handles progress and content errors on our behalf.\n    if (!dom) {\n      return (\n        React.createElement(Content, null\n          , React.createElement(Grid, { container: true,}\n            , React.createElement(Grid, { xs: 12, item: true,}\n              , React.createElement(TechDocsStateIndicator, null )\n            )\n          )\n        )\n      );\n    }\n\n    return (\n      React.createElement(Content, null\n        , React.createElement(Grid, { container: true,}\n          , React.createElement(Grid, { xs: 12, item: true,}\n            , React.createElement(TechDocsStateIndicator, null )\n          )\n          , withSearch && (\n            React.createElement(Grid, { className: classes.search, xs: \"auto\", item: true,}\n              , React.createElement(TechDocsSearch, { entityId: entityRef,} )\n            )\n          )\n          , React.createElement(Grid, { xs: 12, item: true,}\n            /* Centers the styles loaded event to avoid having multiple locations setting the opacity style in Shadow Dom causing the screen to flash multiple times */\n            , React.createElement(TechDocsShadowDom, { element: dom, onAppend: handleAppend,}\n              , React.createElement(TechDocsReaderPageContentAddons, null )\n            )\n          )\n        )\n      )\n    );\n  },\n);\n\n/**\n * Props for {@link Reader}\n *\n * @public\n * @deprecated use `TechDocsReaderPageContentProps` instead.\n */\n\n\n/**\n * Component responsible for rendering TechDocs documentation\n * @public\n * @deprecated use `TechDocsReaderPageContent` component instead.\n */\nexport const Reader = TechDocsReaderPageContent;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport Helmet from 'react-helmet';\n\nimport { Skeleton } from '@material-ui/lab';\nimport CodeIcon from '@material-ui/icons/Code';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n\n\n} from '@backstage/plugin-techdocs-react';\nimport {\n  EntityRefLink,\n  EntityRefLinks,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY, } from '@backstage/catalog-model';\nimport { Header, HeaderLabel } from '@backstage/core-components';\nimport { useRouteRef, configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport { rootRouteRef } from '../../../routes';\n\nconst skeleton = React.createElement(Skeleton, { animation: \"wave\", variant: \"text\", height: 40,} );\n\n/**\n * Props for {@link TechDocsReaderPageHeader}\n *\n * @public\n * @deprecated No need to pass down properties anymore. The component consumes data from `TechDocsReaderPageContext` instead. Use the {@link @backstage/plugin-techdocs-react#useTechDocsReaderPage} hook for custom header.\n */\n\n\n\n\n\n\n/**\n * Renders the reader page header.\n * This component does not accept props, please use\n * the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageHeader = (\n  props,\n) => {\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  useEffect(() => {\n    if (!metadata) return;\n    setTitle(prevTitle => {\n      const { site_name } = metadata;\n      return prevTitle || site_name;\n    });\n    setSubtitle(prevSubtitle => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === 'None') {\n        site_description = 'Home';\n      }\n      return prevSubtitle || site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n  const tabTitle = [subtitle, title, appTitle].filter(Boolean).join(' | ');\n\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec?.lifecycle;\n\n  const ownedByRelations = entityMetadata\n    ? getEntityRelations(entityMetadata, RELATION_OWNED_BY)\n    : [];\n\n  const docsRootLink = useRouteRef(rootRouteRef)();\n\n  const labels = (\n    React.createElement(React.Fragment, null\n      , React.createElement(HeaderLabel, {\n        label: \"Component\",\n        value: \n          React.createElement(EntityRefLink, {\n            color: \"inherit\",\n            entityRef: entityRef,\n            defaultKind: \"Component\",}\n          )\n        ,}\n      )\n      , ownedByRelations.length > 0 && (\n        React.createElement(HeaderLabel, {\n          label: \"Owner\",\n          value: \n            React.createElement(EntityRefLinks, {\n              color: \"inherit\",\n              entityRefs: ownedByRelations,\n              defaultKind: \"group\",}\n            )\n          ,}\n        )\n      )\n      , lifecycle ? React.createElement(HeaderLabel, { label: \"Lifecycle\", value: lifecycle,} ) : null\n      , locationMetadata &&\n      locationMetadata.type !== 'dir' &&\n      locationMetadata.type !== 'file' ? (\n        React.createElement(HeaderLabel, {\n          label: \"\",\n          value: \n            React.createElement('a', {\n              href: locationMetadata.target,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\" ,}\n            \n              , React.createElement(CodeIcon, { style: { marginTop: '-25px', fill: '#fff' },} )\n            )\n          ,}\n        )\n      ) : null\n    )\n  );\n\n  // If there is no entity or techdocs metadata, there's no reason to show the\n  // header (hides the header on 404 error pages).\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === undefined;\n  const noTdMetadata = !metadataLoading && metadata === undefined;\n  if (noEntMetadata || noTdMetadata) return null;\n\n  return (\n    React.createElement(Header, {\n      type: \"Documentation\",\n      typeLink: docsRootLink,\n      title: title || skeleton,\n      subtitle: subtitle || skeleton,}\n    \n      , React.createElement(Helmet, { titleTemplate: \"%s\",}\n        , React.createElement('title', null, tabTitle)\n      )\n      , labels\n      , children\n      , addons.renderComponentsByLocation(locations.Header)\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\n\nimport {\n  Box,\n  makeStyles,\n  Toolbar,\n\n  Menu,\n  Tooltip,\n  IconButton,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageSubheader',\n    flexDirection: 'column',\n    minHeight: 'auto',\n    padding: theme.spacing(3, 3, 0),\n  },\n}));\n\n/**\n * Renders the reader page subheader.\n * Please use the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageSubheader = ({\n  toolbarProps,\n}\n\n) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClick = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  const addons = useTechDocsAddons();\n\n  const subheaderAddons = addons.renderComponentsByLocation(\n    locations.Subheader,\n  );\n\n  const settingsAddons = addons.renderComponentsByLocation(locations.Settings);\n\n  if (!subheaderAddons && !settingsAddons) return null;\n\n  // No entity metadata = 404. Don't render subheader on 404.\n  if (entityMetadataLoading === false && !entityMetadata) return null;\n\n  return (\n    React.createElement(Toolbar, { classes: classes, ...toolbarProps,}\n      , React.createElement(Box, {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        width: \"100%\",\n        flexWrap: \"wrap\",}\n      \n        , subheaderAddons\n        , settingsAddons ? (\n          React.createElement(React.Fragment, null\n            , React.createElement(Tooltip, { title: \"Settings\",}\n              , React.createElement(IconButton, {\n                'aria-controls': \"tech-docs-reader-page-settings\",\n                'aria-haspopup': \"true\",\n                onClick: handleClick,}\n              \n                , React.createElement(SettingsIcon, null )\n              )\n            )\n            , React.createElement(Menu, {\n              id: \"tech-docs-reader-page-settings\",\n              getContentAnchorEl: null,\n              anchorEl: anchorEl,\n              anchorOrigin: { vertical: 'bottom', horizontal: 'right' },\n              open: Boolean(anchorEl),\n              onClose: handleClose,\n              keepMounted: true,}\n            \n              , settingsAddons\n            )\n          )\n        ) : null\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useMemo, useReducer, useRef } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { techdocsStorageApiRef } from '@backstage/plugin-techdocs-react';\n\n/**\n * @public\n * A state representation that is used to configure the UI of <Reader />\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Calculate the state that should be reported to the display component.\n */\nexport function calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState,\n}\n\n\n) {\n  // we have nothing to display yet\n  if (contentLoading) {\n    return 'CHECKING';\n  }\n\n  // the build is ready, but it triggered a content reload and the content variable is not trusted\n  if (activeSyncState === 'BUILD_READY_RELOAD') {\n    return 'CHECKING';\n  }\n\n  // there is no content, but the sync process is still evaluating\n  if (!content && activeSyncState === 'CHECKING') {\n    return 'CHECKING';\n  }\n\n  // there is no content yet so we assume that we are building it for the first time\n  if (!content && activeSyncState === 'BUILDING') {\n    return 'INITIAL_BUILD';\n  }\n\n  // if there is still no content after building, it might just not exist\n  if (!content) {\n    return 'CONTENT_NOT_FOUND';\n  }\n\n  // we are still building, but we already show stale content\n  if (activeSyncState === 'BUILDING') {\n    return 'CONTENT_STALE_REFRESHING';\n  }\n\n  // the build is ready, but the content is still stale\n  if (activeSyncState === 'BUILD_READY') {\n    return 'CONTENT_STALE_READY';\n  }\n\n  // the build failed, but the content is still stale\n  if (activeSyncState === 'ERROR') {\n    return 'CONTENT_STALE_ERROR';\n  }\n\n  // seems like the content is up-to-date (or we don't know yet and the sync process is still evaluating in the background)\n  return 'CONTENT_FRESH';\n}\n\n/**\n * The state of the synchronization task. It checks whether the docs are\n * up-to-date. If they aren't, it triggers a build.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function reducer(\n  oldState,\n  action,\n) {\n  const newState = { ...oldState };\n\n  switch (action.type) {\n    case 'sync':\n      // reset the build log when a new check starts\n      if (action.state === 'CHECKING') {\n        newState.buildLog = [];\n      }\n\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n\n    case 'contentLoading':\n      newState.contentLoading = true;\n\n      // only reset errors but keep the old content until it is replaced by the 'content' action\n      newState.contentError = undefined;\n      break;\n\n    case 'content':\n      // only override the path if it is part of the action\n      if (typeof action.path === 'string') {\n        newState.path = action.path;\n      }\n\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n\n    case 'buildLog':\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n\n    default:\n      throw new Error();\n  }\n\n  // a content update loads fresh content so the build is updated to being up-to-date\n  if (\n    ['BUILD_READY', 'BUILD_READY_RELOAD'].includes(newState.activeSyncState) &&\n    ['contentLoading', 'content'].includes(action.type)\n  ) {\n    newState.activeSyncState = 'UP_TO_DATE';\n    newState.buildLog = [];\n  }\n\n  return newState;\n}\n/**\n * @public shared reader state\n */\n\n\n\n\n\n\n\n\n\n\nexport function useReaderState(\n  kind,\n  namespace,\n  name,\n  path,\n) {\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: 'CHECKING',\n    path,\n    contentLoading: true,\n    buildLog: [],\n  });\n\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n\n  // try to load the content. the function will fire events and we don't care for the return values\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: 'contentLoading' });\n\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path,\n      );\n\n      // update content and path at the same time\n      dispatch({ type: 'content', content: entityDocs, path });\n\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: 'content', contentError: e, path });\n    }\n\n    return undefined;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n\n  // create a ref that holds the latest content. This provides a useAsync hook\n  // with the latest content without restarting the useAsync hook.\n  const contentRef = useRef({\n    content: undefined,\n    reload: () => {},\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n\n  // try to derive the state. the function will fire events and we don't care for the return values\n  useAsync(async () => {\n    dispatch({ type: 'sync', state: 'CHECKING' });\n\n    // should only switch to BUILDING if the request takes more than 1 seconds\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: 'sync', state: 'BUILDING' });\n    }, 1000);\n\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name,\n        },\n        log => {\n          dispatch({ type: 'buildLog', log });\n        },\n      );\n\n      switch (result) {\n        case 'updated':\n          // if there was no content prior to building, retry the loading\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: 'sync', state: 'BUILD_READY_RELOAD' });\n          } else {\n            dispatch({ type: 'sync', state: 'BUILD_READY' });\n          }\n          break;\n        case 'cached':\n          dispatch({ type: 'sync', state: 'UP_TO_DATE' });\n          break;\n\n        default:\n          dispatch({\n            type: 'sync',\n            state: 'ERROR',\n            syncError: new Error('Unexpected return state'),\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: 'sync', state: 'ERROR', syncError: e });\n    } finally {\n      // Cancel the timer that sets the state \"BUILDING\"\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n\n  const displayState = useMemo(\n    () =>\n      calculateDisplayState({\n        activeSyncState: state.activeSyncState,\n        contentLoading: state.contentLoading,\n        content: state.content,\n      }),\n    [state.activeSyncState, state.content, state.contentLoading],\n  );\n\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: state.contentError?.toString(),\n    syncErrorMessage: state.syncError?.toString(),\n    buildLog: state.buildLog,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  createContext,\n  useContext,\n\n} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useTechDocsReaderPage } from '@backstage/plugin-techdocs-react';\n\nimport { useReaderState, } from './useReaderState';\n\nconst TechDocsReaderContext = createContext({} );\n\nexport const useTechDocsReader = () => useContext(TechDocsReaderContext);\n\n/**\n * @public Render function for {@link TechDocsReaderProvider}\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Provides shared building process state to the reader page components.\n *\n * @public\n */\nexport const TechDocsReaderProvider = ({\n  children,\n}) => {\n  const { '*': path = '' } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n\n  return (\n    React.createElement(TechDocsReaderContext.Provider, { value: value,}\n      , children instanceof Function ? children(value) : children\n    )\n  );\n};\n\nexport const withTechDocsReaderProvider =\n  (Component) =>\n  (props) =>\n    (\n      React.createElement(TechDocsReaderProvider, null\n        , React.createElement(Component, { ...props,} )\n      )\n    );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'techdocs:index-page',\n});\n\nexport const rootDocsRouteRef = createRouteRef({\n  id: 'techdocs:reader-page',\n  params: ['namespace', 'kind', 'name'],\n});\n\nexport const rootCatalogDocsRouteRef = createRouteRef({\n  id: 'techdocs:catalog-reader-view',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Divider, ListItem, ListItemText, makeStyles } from '@material-ui/core';\nimport { Link } from '@backstage/core-components';\n\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: 'wrap',\n  },\n  itemText: {\n    width: '100%',\n    marginBottom: '1rem',\n  },\n});\n\n/**\n * Props for {@link TechDocsSearchResultListItem}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n/**\n * Component which renders documentation and related metadata.\n *\n * @public\n */\nexport const TechDocsSearchResultListItem = (\n  props,\n) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n  } = props;\n  const classes = useStyles();\n  const TextItem = () => {\n    const resultTitle = highlight?.fields.title ? (\n      React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.title,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag,}\n      )\n    ) : (\n      result.title\n    );\n\n    const entityTitle = highlight?.fields.entityTitle ? (\n      React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.entityTitle,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag,}\n      )\n    ) : (\n      result.entityTitle\n    );\n\n    const resultName = highlight?.fields.name ? (\n      React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.name,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag,}\n      )\n    ) : (\n      result.name\n    );\n\n    return (\n      React.createElement(ListItemText, {\n        className: classes.itemText,\n        primaryTypographyProps: { variant: 'h6' },\n        primary: \n          title ? (\n            title\n          ) : (\n            React.createElement(React.Fragment, null\n              , resultTitle, \" | \"  , entityTitle ?? resultName, \" docs\"\n            )\n          )\n        ,\n        secondary: \n          React.createElement('span', {\n            style: {\n              display: '-webkit-box',\n              WebkitBoxOrient: 'vertical',\n              WebkitLineClamp: lineClamp,\n              overflow: 'hidden',\n            },}\n          \n            , highlight?.fields.text ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: highlight.fields.text,\n                preTag: highlight.preTag,\n                postTag: highlight.postTag,}\n              )\n            ) : (\n              result.text\n            )\n          )\n        ,}\n      )\n    );\n  };\n\n  const LinkWrapper = ({ children }) =>\n    asLink ? React.createElement(Link, { to: result.location,}, children) : React.createElement(React.Fragment, null, children);\n\n  const ListItemWrapper = ({ children }) =>\n    asListItem ? (\n      React.createElement(React.Fragment, null\n        , React.createElement(ListItem, { alignItems: \"flex-start\", className: classes.flexContainer,}\n          , children\n        )\n        , React.createElement(Divider, { component: \"li\",} )\n      )\n    ) : (\n      React.createElement(React.Fragment, null, children)\n    );\n\n  return (\n    React.createElement(LinkWrapper, null\n      , React.createElement(ListItemWrapper, null\n        , React.createElement(TextItem, null )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  SearchContextProvider,\n  useSearch,\n} from '@backstage/plugin-search-react';\nimport {\n  makeStyles,\n  CircularProgress,\n  IconButton,\n  InputAdornment,\n  TextField,\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { TechDocsSearchResultListItem } from './TechDocsSearchResultListItem';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n});\n\n/**\n * Props for {@link TechDocsSearch}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TechDocsSearchBar = (props) => {\n  const { entityId, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    term,\n    setTerm,\n    setFilters,\n    result: { loading, value: searchVal },\n  } = useSearch();\n  const classes = useStyles();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n\n    if (mounted && searchVal) {\n      // TODO: Change this into getting only subset of search results from the BE in the first place\n      // once pagination is implemented for search engines\n      // See: https://github.com/backstage/backstage/issues/6062\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n\n  const [value, setValue] = useState(term);\n\n  useDebounce(() => setTerm(value), debounceTime, [value]);\n\n  // Update the filter context when the entityId changes, e.g. when the search\n  // bar continues to be rendered, navigating between different TechDocs sites.\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters(prevFilters => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name,\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n\n  const handleQuery = (e) => {\n    if (!open) {\n      setOpen(true);\n    }\n    setValue(e.target.value);\n  };\n\n  const handleSelection = (_, selection) => {\n    if (selection?.document) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n\n  return (\n    React.createElement(Autocomplete, {\n      classes: { root: classes.root },\n      'data-testid': \"techdocs-search-bar\",\n      size: \"small\",\n      open: open,\n      getOptionLabel: () => '',\n      filterOptions: x => {\n        return x; // This is needed to get renderOption to be called after options change. Bug in material-ui?\n      },\n      onClose: () => {\n        setOpen(false);\n      },\n      onFocus: () => {\n        setOpen(true);\n      },\n      onChange: handleSelection,\n      blurOnSelect: true,\n      noOptionsText: \"No results found\"  ,\n      value: null,\n      options: options,\n      renderOption: ({ document, highlight }) => (\n        React.createElement(TechDocsSearchResultListItem, {\n          result: document,\n          lineClamp: 3,\n          asListItem: false,\n          asLink: false,\n          title: document.title,\n          highlight: highlight,}\n        )\n      ),\n      loading: loading,\n      renderInput: params => (\n        React.createElement(TextField, {\n          ...params,\n          'data-testid': \"techdocs-search-bar-input\",\n          variant: \"outlined\",\n          fullWidth: true,\n          placeholder: `Search ${entityId.name} docs`,\n          value: value,\n          onChange: handleQuery,\n          InputProps: {\n            ...params.InputProps,\n            startAdornment: (\n              React.createElement(InputAdornment, { position: \"start\",}\n                , React.createElement(IconButton, { 'aria-label': \"Query\", disabled: true,}\n                  , React.createElement(SearchIcon, null )\n                )\n              )\n            ),\n            endAdornment: (\n              React.createElement(React.Fragment, null\n                , loading ? (\n                  React.createElement(CircularProgress, { color: \"inherit\", size: 20,} )\n                ) : null\n                , params.InputProps.endAdornment\n              )\n            ),\n          },}\n        )\n      ),}\n    )\n  );\n};\n\n/**\n * Component used to render search bar on TechDocs page, scoped to\n *\n * @public\n */\nexport const TechDocsSearch = (props) => {\n  const initialState = {\n    term: '',\n    types: ['techdocs'],\n    pageCursor: '',\n    filters: props.entityId,\n  };\n  return (\n    React.createElement(SearchContextProvider, { initialState: initialState,}\n      , React.createElement(TechDocsSearchBar, { ...props,} )\n    )\n  );\n};\n"],"sourceRoot":""}