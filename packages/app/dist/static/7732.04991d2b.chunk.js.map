{"version":3,"sources":["webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateCard/TemplateCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateList/TemplateList.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ScaffolderPage/ScaffolderPageContextMenu.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ScaffolderPage/ScaffolderPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/MultistepJsonForm/schema.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/MultistepJsonForm/FieldOverrides/DescriptionField.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/MultistepJsonForm/MultistepJsonForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplatePage/createValidator.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplatePage/TemplatePage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ActionsPage/ActionsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/lib/filesystem/WebFileSystemAccess.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateEditorIntro.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/DirectoryEditorContext.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/DryRunContext.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/DryRunResults/DryRunResultsList.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/FileBrowser/FileBrowser.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/DryRunResults/DryRunResultsSplitView.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/DryRunResults/DryRunResultsView.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/DryRunResults/DryRunResults.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateEditorBrowser.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateEditorForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateEditorTextArea.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateEditor.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateFormPreviewer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateEditorPage/TemplateEditorPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ListTasksPage/OwnerListPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ListTasksPage/columns/CreatedAtColumn.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ListTasksPage/columns/OwnerEntityColumn.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ListTasksPage/columns/TaskStatusColumn.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ListTasksPage/columns/TemplateTitleColumn.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/ListTasksPage/ListTasksPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/Router.tsx"],"names":[],"mappings":"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","file":"static/7732.04991d2b.chunk.js","sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\n\nimport {\n  ScmIntegrationIcon,\n  scmIntegrationsApiRef,\n} from '@backstage/integration-react';\nimport {\n  EntityRefLinks,\n  FavoriteEntity,\n  getEntityRelations,\n  getEntitySourceLocation,\n} from '@backstage/plugin-catalog-react';\n\nimport {\n  Box,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Chip,\n  IconButton,\n  Link,\n  makeStyles,\n  Tooltip,\n  Typography,\n  useTheme,\n} from '@material-ui/core';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport React from 'react';\nimport { selectedTemplateRouteRef } from '../../routes';\n\nimport {\n  Button,\n  ItemCardHeader,\n  MarkdownContent,\n} from '@backstage/core-components';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles(theme => ({\n  cardHeader: {\n    position: 'relative',\n  },\n  title: {\n    backgroundImage: ({ backgroundImage }) => backgroundImage,\n  },\n  box: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    display: '-webkit-box',\n    '-webkit-line-clamp': 10,\n    '-webkit-box-orient': 'vertical',\n    paddingBottom: '0.8em',\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: 'uppercase',\n    fontSize: '0.65rem',\n    fontWeight: 'bold',\n    letterSpacing: 0.5,\n    lineHeight: 1,\n    paddingBottom: '0.2rem',\n  },\n  leftButton: {\n    marginRight: 'auto',\n  },\n  starButton: {\n    position: 'absolute',\n    top: theme.spacing(0.5),\n    right: theme.spacing(0.5),\n    padding: '0.25rem',\n    color: '#fff',\n  },\n}));\n\nconst useDeprecationStyles = makeStyles(theme => ({\n  deprecationIcon: {\n    position: 'absolute',\n    top: theme.spacing(0.5),\n    right: theme.spacing(3.5),\n    padding: '0.25rem',\n  },\n  link: {\n    color: theme.palette.warning.light,\n  },\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst getTemplateCardProps = (\n  template,\n) => {\n  return {\n    key: template.metadata.uid,\n    name: template.metadata.name,\n    title: `${(template.metadata.title || template.metadata.name) ?? ''}`,\n    type: template.spec.type ?? '',\n    description: template.metadata.description ?? '-',\n    tags: (template.metadata?.tags ) ?? [],\n  };\n};\n\nconst DeprecationWarning = () => {\n  const styles = useDeprecationStyles();\n\n  const Title = (\n    React.createElement(Typography, { style: { padding: 10, maxWidth: 300 },}, \"This template uses a syntax that has been deprecated, and should be migrated to a newer syntax. Click for more info.\"\n\n\n    )\n  );\n\n  return (\n    React.createElement('div', { className: styles.deprecationIcon,}\n      , React.createElement(Tooltip, { title: Title,}\n        , React.createElement(Link, {\n          href: \"https://backstage.io/docs/features/software-templates/migrating-from-v1beta2-to-v1beta3\",\n          className: styles.link,}\n        \n          , React.createElement(WarningIcon, null )\n        )\n      )\n    )\n  );\n};\n\nexport const TemplateCard = ({ template, deprecated }) => {\n  const backstageTheme = useTheme();\n  const templateRoute = useRouteRef(selectedTemplateRouteRef);\n  const templateProps = getTemplateCardProps(template);\n  const ownedByRelations = getEntityRelations(\n    template ,\n    RELATION_OWNED_BY,\n  );\n  const themeId = backstageTheme.getPageTheme({ themeId: templateProps.type })\n    ? templateProps.type\n    : 'other';\n  const theme = backstageTheme.getPageTheme({ themeId });\n  const classes = useStyles({ backgroundImage: theme.backgroundImage });\n  const href = templateRoute({ templateName: templateProps.name });\n\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const sourceLocation = getEntitySourceLocation(template, scmIntegrationsApi);\n\n  return (\n    React.createElement(Card, null\n      , React.createElement(CardMedia, { className: classes.cardHeader,}\n        , React.createElement(FavoriteEntity, { className: classes.starButton, entity: template,} )\n        , deprecated && React.createElement(DeprecationWarning, null )\n        , React.createElement(ItemCardHeader, {\n          title: templateProps.title,\n          subtitle: templateProps.type,\n          classes: { root: classes.title },}\n        )\n      )\n      , React.createElement(CardContent, { style: { display: 'grid' },}\n        , React.createElement(Box, { className: classes.box,}\n          , React.createElement(Typography, { variant: \"body2\", className: classes.label,}, \"Description\"\n\n          )\n          , React.createElement(MarkdownContent, { content: templateProps.description,} )\n        )\n        , React.createElement(Box, { className: classes.box,}\n          , React.createElement(Typography, { variant: \"body2\", className: classes.label,}, \"Owner\"\n\n          )\n          , React.createElement(EntityRefLinks, { entityRefs: ownedByRelations, defaultKind: \"Group\",} )\n        )\n        , React.createElement(Box, null\n          , React.createElement(Typography, { variant: \"body2\", className: classes.label,}, \"Tags\"\n\n          )\n          , templateProps.tags?.map(tag => (\n            React.createElement(Chip, { size: \"small\", label: tag, key: tag,} )\n          ))\n        )\n      )\n      , React.createElement(CardActions, null\n        , sourceLocation && (\n          React.createElement(IconButton, {\n            className: classes.leftButton,\n            href: sourceLocation.locationTargetUrl,}\n          \n            , React.createElement(ScmIntegrationIcon, { type: sourceLocation.integrationType,} )\n          )\n        )\n        , React.createElement(Button, {\n          color: \"primary\",\n          to: href,\n          'aria-label': `Choose ${templateProps.title}`,}\n        , \"Choose\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nimport {\n  Content,\n  ContentHeader,\n  ItemCardGrid,\n  Link,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\nimport { useEntityList } from '@backstage/plugin-catalog-react';\nimport { Typography } from '@material-ui/core';\nimport { TemplateCard } from '../TemplateCard';\n\n/**\n * @internal\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * @internal\n */\nexport const TemplateList = ({\n  TemplateCardComponent,\n  group,\n}) => {\n  const { loading, error, entities } = useEntityList();\n  const Card = TemplateCardComponent || TemplateCard;\n  const maybeFilteredEntities = group\n    ? entities.filter(e => group.filter(e))\n    : entities;\n\n  const titleComponent = (() => {\n    if (group && group.title) {\n      if (typeof group.title === 'string') {\n        return React.createElement(ContentHeader, { title: group.title,} );\n      }\n      return group.title;\n    }\n\n    return React.createElement(ContentHeader, { title: \"Other Templates\" ,} );\n  })();\n\n  if (group && maybeFilteredEntities.length === 0) {\n    return null;\n  }\n  return (\n    React.createElement(React.Fragment, null\n      , loading && React.createElement(Progress, null )\n\n      , error && (\n        React.createElement(WarningPanel, { title: \"Oops! Something went wrong loading the templates\"      ,}\n          , error.message\n        )\n      )\n\n      , !error && !loading && !entities.length && (\n        React.createElement(Typography, { variant: \"body2\",}, \"No templates found that match your filter. Learn more about\"\n                   , ' '\n          , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-templates/adding-templates\",}, \"adding templates\"\n\n          ), \".\"\n\n        )\n      )\n\n      , React.createElement(Content, null\n        , titleComponent\n        , React.createElement(ItemCardGrid, null\n          , maybeFilteredEntities &&\n            maybeFilteredEntities?.length > 0 &&\n            maybeFilteredEntities.map((template) => (\n              React.createElement(Card, {\n                key: stringifyEntityRef(template),\n                template: template ,\n                deprecated: template.apiVersion === 'backstage.io/v1beta2',}\n              )\n            ))\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Description from '@material-ui/icons/Description';\nimport Edit from '@material-ui/icons/Edit';\nimport List from '@material-ui/icons/List';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport {\n  actionsRouteRef,\n  editRouteRef,\n  scaffolderListTaskRouteRef,\n} from '../../routes';\n\nconst useStyles = makeStyles({\n  button: {\n    color: 'white',\n  },\n});\n\n\n\n\n\n\n\nexport function ScaffolderPageContextMenu(\n  props,\n) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState();\n  const editLink = useRouteRef(editRouteRef);\n  const actionsLink = useRouteRef(actionsRouteRef);\n  const tasksLink = useRouteRef(scaffolderListTaskRouteRef);\n\n  const navigate = useNavigate();\n\n  const showEditor = props.editor !== false;\n  const showActions = props.actions !== false;\n  const showTasks = props.tasks !== false;\n\n  if (!showEditor && !showActions) {\n    return null;\n  }\n\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const onClose = () => {\n    setAnchorEl(undefined);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(IconButton, {\n        'aria-label': \"more\",\n        'aria-controls': \"long-menu\",\n        'aria-haspopup': \"true\",\n        onClick: onOpen,\n        'data-testid': \"menu-button\",\n        color: \"inherit\",\n        className: classes.button,}\n      \n        , React.createElement(MoreVert, null )\n      )\n      , React.createElement(Popover, {\n        open: Boolean(anchorEl),\n        onClose: onClose,\n        anchorEl: anchorEl,\n        anchorOrigin: { vertical: 'bottom', horizontal: 'right' },\n        transformOrigin: { vertical: 'top', horizontal: 'right' },}\n      \n        , React.createElement(MenuList, null\n          , showEditor && (\n            React.createElement(MenuItem, { onClick: () => navigate(editLink()),}\n              , React.createElement(ListItemIcon, null\n                , React.createElement(Edit, { fontSize: \"small\",} )\n              )\n              , React.createElement(ListItemText, { primary: \"Template Editor\" ,} )\n            )\n          )\n          , showActions && (\n            React.createElement(MenuItem, { onClick: () => navigate(actionsLink()),}\n              , React.createElement(ListItemIcon, null\n                , React.createElement(Description, { fontSize: \"small\",} )\n              )\n              , React.createElement(ListItemText, { primary: \"Installed Actions\" ,} )\n            )\n          )\n          , showTasks && (\n            React.createElement(MenuItem, { onClick: () => navigate(tasksLink()),}\n              , React.createElement(ListItemIcon, null\n                , React.createElement(List, { fontSize: \"small\",} )\n              )\n              , React.createElement(ListItemText, { primary: \"Task List\" ,} )\n            )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  CreateButton,\n  Header,\n  Page,\n  SupportButton,\n} from '@backstage/core-components';\n\n\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport {\n  CatalogFilterLayout,\n  EntityKindPicker,\n  EntityListProvider,\n  EntitySearchBar,\n  EntityTagPicker,\n  UserListPicker,\n} from '@backstage/plugin-catalog-react';\nimport React, { } from 'react';\nimport { registerComponentRouteRef } from '../../routes';\nimport { TemplateList } from '../TemplateList';\nimport { TemplateTypePicker } from '../TemplateTypePicker';\nimport { catalogEntityCreatePermission } from '@backstage/plugin-catalog-common';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { ScaffolderPageContextMenu } from './ScaffolderPageContextMenu';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const ScaffolderPageContents = ({\n  TemplateCardComponent,\n  groups,\n  contextMenu,\n}) => {\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n  const otherTemplatesGroup = {\n    title: groups ? 'Other Templates' : 'Templates',\n    filter: (entity) => {\n      const filtered = (groups ?? []).map(group => group.filter(entity));\n      return !filtered.some(result => result === true);\n    },\n  };\n\n  const { allowed } = usePermission({\n    permission: catalogEntityCreatePermission,\n  });\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        pageTitleOverride: \"Create a New Component\"   ,\n        title: \"Create a New Component\"   ,\n        subtitle: \"Create new software components using standard templates\"      ,}\n      \n        , React.createElement(ScaffolderPageContextMenu, { ...contextMenu,} )\n      )\n      , React.createElement(Content, null\n        , React.createElement(ContentHeader, { title: \"Available Templates\" ,}\n          , allowed && (\n            React.createElement(CreateButton, {\n              title: \"Register Existing Component\"  ,\n              to: registerComponentLink && registerComponentLink(),}\n            )\n          )\n          , React.createElement(SupportButton, null, \"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...).\"\n\n\n\n          )\n        )\n\n        , React.createElement(CatalogFilterLayout, null\n          , React.createElement(CatalogFilterLayout.Filters, null\n            , React.createElement(EntitySearchBar, null )\n            , React.createElement(EntityKindPicker, { initialFilter: \"template\", hidden: true,} )\n            , React.createElement(UserListPicker, {\n              initialFilter: \"all\",\n              availableFilters: ['all', 'starred'],}\n            )\n            , React.createElement(TemplateTypePicker, null )\n            , React.createElement(EntityTagPicker, null )\n          )\n          , React.createElement(CatalogFilterLayout.Content, null\n            , groups &&\n              groups.map((group, index) => (\n                React.createElement(TemplateList, {\n                  key: index,\n                  TemplateCardComponent: TemplateCardComponent,\n                  group: group,}\n                )\n              ))\n            , React.createElement(TemplateList, {\n              key: \"other\",\n              TemplateCardComponent: TemplateCardComponent,\n              group: otherTemplatesGroup,}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n\nexport const ScaffolderPage = ({\n  TemplateCardComponent,\n  groups,\n}) => (\n  React.createElement(EntityListProvider, null\n    , React.createElement(ScaffolderPageContents, {\n      TemplateCardComponent: TemplateCardComponent,\n      groups: groups,}\n    )\n  )\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isObject(value) {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nfunction extractUiSchema(schema, uiSchema) {\n  if (!isObject(schema)) {\n    return;\n  }\n\n  const { properties, items, anyOf, oneOf, allOf, dependencies } = schema;\n\n  for (const propName in schema) {\n    if (!schema.hasOwnProperty(propName)) {\n      continue;\n    }\n\n    if (propName.startsWith('ui:')) {\n      uiSchema[propName] = schema[propName];\n      delete schema[propName];\n    }\n  }\n\n  if (isObject(properties)) {\n    for (const propName in properties) {\n      if (!properties.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      const schemaNode = properties[propName];\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      const innerUiSchema = {};\n      uiSchema[propName] = innerUiSchema;\n      extractUiSchema(schemaNode, innerUiSchema);\n    }\n  }\n\n  if (isObject(items)) {\n    const innerUiSchema = {};\n    uiSchema.items = innerUiSchema;\n    extractUiSchema(items, innerUiSchema);\n  }\n\n  if (Array.isArray(anyOf)) {\n    for (const schemaNode of anyOf) {\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n\n  if (Array.isArray(oneOf)) {\n    for (const schemaNode of oneOf) {\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n\n  if (Array.isArray(allOf)) {\n    for (const schemaNode of allOf) {\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n\n  if (isObject(dependencies)) {\n    for (const depName of Object.keys(dependencies)) {\n      const schemaNode = dependencies[depName];\n      if (!isObject(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n}\n\nexport function transformSchemaToProps(inputSchema)\n\n\n {\n  inputSchema.type = inputSchema.type || 'object';\n  const schema = JSON.parse(JSON.stringify(inputSchema));\n  delete schema.title; // Rendered separately\n  const uiSchema = {};\n  extractUiSchema(schema, uiSchema);\n  return { schema, uiSchema };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { MarkdownContent } from '@backstage/core-components';\n\n\nexport const DescriptionField = ({ description }) =>\n  description && React.createElement(MarkdownContent, { content: description, linkTarget: \"_blank\",} );\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  Button,\n  Paper,\n  Step as StepUI,\n  StepContent,\n  StepLabel,\n  Stepper,\n  Typography,\n} from '@material-ui/core';\nimport {\n  errorApiRef,\n  useApi,\n  featureFlagsApiRef,\n} from '@backstage/core-plugin-api';\nimport { withTheme } from '@rjsf/core';\nimport { Theme as MuiTheme } from '@rjsf/material-ui';\nimport React, { useState } from 'react';\nimport { transformSchemaToProps } from './schema';\nimport { Content, StructuredMetadataTable } from '@backstage/core-components';\nimport cloneDeep from 'lodash/cloneDeep';\nimport * as fieldOverrides from './FieldOverrides';\n\nconst Form = withTheme(MuiTheme);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function getUiSchemasFromSteps(steps) {\n  const uiSchemas = [];\n  steps.forEach(step => {\n    const schemaProps = step.schema.properties ;\n    for (const key in schemaProps) {\n      if (schemaProps.hasOwnProperty(key)) {\n        const uiSchema = schemaProps[key] ;\n        uiSchema.name = key;\n        uiSchemas.push(uiSchema);\n      }\n    }\n  });\n  return uiSchemas;\n}\n\nexport function getReviewData(formData, steps) {\n  const uiSchemas = getUiSchemasFromSteps(steps);\n  const reviewData = {};\n  for (const key in formData) {\n    if (formData.hasOwnProperty(key)) {\n      const uiSchema = uiSchemas.find(us => us.name === key);\n\n      if (!uiSchema) {\n        reviewData[key] = formData[key];\n        continue;\n      }\n\n      if (uiSchema['ui:widget'] === 'password') {\n        reviewData[key] = '******';\n        continue;\n      }\n\n      if (!uiSchema['ui:backstage'] || !uiSchema['ui:backstage'].review) {\n        reviewData[key] = formData[key];\n        continue;\n      }\n\n      const review = uiSchema['ui:backstage'].review ;\n      if (review.mask) {\n        reviewData[key] = review.mask;\n        continue;\n      }\n\n      if (!review.show) {\n        continue;\n      }\n      reviewData[key] = formData[key];\n    }\n  }\n\n  return reviewData;\n}\n\nexport const MultistepJsonForm = (props) => {\n  const {\n    formData,\n    onChange,\n    onReset,\n    onFinish,\n    fields,\n    widgets,\n    finishButtonLabel,\n  } = props;\n  const [activeStep, setActiveStep] = useState(0);\n  const [disableButtons, setDisableButtons] = useState(false);\n  const errorApi = useApi(errorApiRef);\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const featureFlagKey = 'backstage:featureFlag';\n  const filterOutProperties = (step) => {\n    const filteredStep = cloneDeep(step);\n    const removedPropertyKeys = [];\n    if (filteredStep.schema.properties) {\n      filteredStep.schema.properties = Object.fromEntries(\n        Object.entries(filteredStep.schema.properties).filter(\n          ([key, value]) => {\n            if (value[featureFlagKey]) {\n              if (featureFlagApi.isActive(value[featureFlagKey])) {\n                return true;\n              }\n              removedPropertyKeys.push(key);\n              return false;\n            }\n            return true;\n          },\n        ),\n      );\n\n      // remove the feature flag property key from required if they are not active\n      filteredStep.schema.required = Array.isArray(filteredStep.schema.required)\n        ? filteredStep.schema.required?.filter(\n            r => !removedPropertyKeys.includes(r ),\n          )\n        : filteredStep.schema.required;\n    }\n    return filteredStep;\n  };\n\n  const steps = props.steps\n    .filter(step => {\n      const featureFlag = step.schema[featureFlagKey];\n      return (\n        typeof featureFlag !== 'string' || featureFlagApi.isActive(featureFlag)\n      );\n    })\n    .map(filterOutProperties);\n\n  const handleReset = () => {\n    setActiveStep(0);\n    onReset();\n  };\n  const handleNext = () => {\n    setActiveStep(Math.min(activeStep + 1, steps.length));\n  };\n  const handleBack = () => setActiveStep(Math.max(activeStep - 1, 0));\n  const handleCreate = async () => {\n    if (!onFinish) {\n      return;\n    }\n\n    setDisableButtons(true);\n    try {\n      await onFinish();\n    } catch (err) {\n      errorApi.post(err);\n    } finally {\n      setDisableButtons(false);\n    }\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Stepper, { activeStep: activeStep, orientation: \"vertical\",}\n        , steps.map(({ title, schema, ...formProps }, index) => {\n          return (\n            React.createElement(StepUI, { key: title,}\n              , React.createElement(StepLabel, {\n                'aria-label': `Step ${index + 1} ${title}`,\n                'aria-disabled': \"false\",\n                tabIndex: 0,}\n              \n                , React.createElement(Typography, { variant: \"h6\", component: \"h3\",}\n                  , title\n                )\n              )\n              , React.createElement(StepContent, { key: title,}\n                , React.createElement(Form, {\n                  showErrorList: false,\n                  fields: { ...fieldOverrides, ...fields },\n                  widgets: widgets,\n                  noHtml5Validate: true,\n                  formData: formData,\n                  formContext: { formData },\n                  onChange: onChange,\n                  onSubmit: e => {\n                    if (e.errors.length === 0) handleNext();\n                  },\n                  ...formProps,\n                  ...transformSchemaToProps(schema),}\n                \n                  , React.createElement(Button, { disabled: activeStep === 0, onClick: handleBack,}, \"Back\"\n\n                  )\n                  , React.createElement(Button, { variant: \"contained\", color: \"primary\", type: \"submit\",}, \"Next step\"\n\n                  )\n                )\n              )\n            )\n          );\n        })\n      )\n      , activeStep === steps.length && (\n        React.createElement(Content, null\n          , React.createElement(Paper, { square: true, elevation: 0,}\n            , React.createElement(Typography, { variant: \"h6\",}, \"Review and create\"  )\n            , React.createElement(StructuredMetadataTable, {\n              dense: true,\n              metadata: getReviewData(formData, steps),}\n            )\n            , React.createElement(Box, { mb: 4,} )\n            , React.createElement(Button, { onClick: handleBack, disabled: disableButtons,}, \"Back\"\n\n            )\n            , React.createElement(Button, { onClick: handleReset, disabled: disableButtons,}, \"Reset\"\n\n            )\n            , React.createElement(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              onClick: handleCreate,\n              disabled: !onFinish || disableButtons,}\n            \n              , finishButtonLabel ?? 'Create'\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj !== null && !Array.isArray(obj);\n}\n\nexport const createValidator = (\n  rootSchema,\n  validators,\n  context\n\n,\n) => {\n  function validate(\n    schema,\n    formData,\n    errors,\n  ) {\n    const schemaProps = schema.properties;\n    const customObject = schema.type === 'object' && schemaProps === undefined;\n\n    if (!isObject(schemaProps) && !customObject) {\n      return;\n    }\n\n    if (schemaProps) {\n      for (const [key, propData] of Object.entries(formData)) {\n        const propValidation = errors[key];\n\n        if (isObject(propData)) {\n          const propSchemaProps = schemaProps[key];\n          if (isObject(propSchemaProps)) {\n            validate(\n              propSchemaProps,\n              propData ,\n              propValidation ,\n            );\n          }\n        } else {\n          const propSchema = schemaProps[key];\n          const fieldName =\n            isObject(propSchema) && (propSchema['ui:field'] );\n          if (fieldName && typeof validators[fieldName] === 'function') {\n            validators[fieldName](\n              propData ,\n              propValidation,\n              context,\n            );\n          }\n        }\n      }\n    } else if (customObject) {\n      const fieldName = schema['ui:field'] ;\n      if (fieldName && typeof validators[fieldName] === 'function') {\n        validators[fieldName](formData, errors, context);\n      }\n    }\n  }\n\n  return (formData, errors) => {\n    validate(rootSchema, formData, errors);\n    return errors;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { LinearProgress } from '@material-ui/core';\n\nimport qs from 'qs';\nimport React, { useCallback, useContext, useState } from 'react';\nimport { Navigate, useNavigate } from 'react-router';\nimport { useParams } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { scaffolderApiRef } from '../../api';\n\nimport { SecretsContext } from '../secrets/SecretsContext';\nimport { rootRouteRef, scaffolderTaskRouteRef } from '../../routes';\nimport { MultistepJsonForm } from '../MultistepJsonForm';\nimport { createValidator } from './createValidator';\n\nimport { Content, Header, InfoCard, Page } from '@backstage/core-components';\nimport {\n  errorApiRef,\n  useApi,\n  useApiHolder,\n  useRouteRef,\n} from '@backstage/core-plugin-api';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nconst useTemplateParameterSchema = (templateRef) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value, loading, error } = useAsync(\n    () => scaffolderApi.getTemplateParameterSchema(templateRef),\n    [scaffolderApi, templateRef],\n  );\n  return { schema: value, loading, error };\n};\n\nexport const TemplatePage = ({\n  customFieldExtensions = [],\n}\n\n) => {\n  const apiHolder = useApiHolder();\n  const secretsContext = useContext(SecretsContext);\n  const errorApi = useApi(errorApiRef);\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { templateName } = useParams();\n  const navigate = useNavigate();\n  const scaffolderTaskRoute = useRouteRef(scaffolderTaskRouteRef);\n  const rootRoute = useRouteRef(rootRouteRef);\n  const { schema, loading, error } = useTemplateParameterSchema(templateName);\n  const [formState, setFormState] = useState(() => {\n    const query = qs.parse(window.location.search, {\n      ignoreQueryPrefix: true,\n    });\n\n    try {\n      return JSON.parse(query.formData );\n    } catch (e) {\n      return query.formData ?? {};\n    }\n  });\n  const handleFormReset = () => setFormState({});\n  const handleChange = useCallback(\n    (e) => setFormState(e.formData),\n    [setFormState],\n  );\n\n  const handleCreate = async () => {\n    const { taskId } = await scaffolderApi.scaffold({\n      templateRef: stringifyEntityRef({\n        name: templateName,\n        kind: 'template',\n        namespace: 'default',\n      }),\n      values: formState,\n      secrets: secretsContext?.secrets,\n    });\n\n    const formParams = qs.stringify(\n      { formData: formState },\n      { addQueryPrefix: true },\n    );\n    const newUrl = `${window.location.pathname}${formParams}`;\n    // We use direct history manipulation since useSearchParams and\n    // useNavigate in react-router-dom cause unnecessary extra rerenders.\n    // Also make sure to replace the state rather than pushing to avoid\n    // extra back/forward slots.\n    window.history?.replaceState(null, document.title, newUrl);\n\n    navigate(scaffolderTaskRoute({ taskId }));\n  };\n\n  if (error) {\n    errorApi.post(new Error(`Failed to load template, ${error}`));\n    return React.createElement(Navigate, { to: rootRoute(),} );\n  }\n  if (!loading && !schema) {\n    errorApi.post(new Error('Template was not found.'));\n    return React.createElement(Navigate, { to: rootRoute(),} );\n  }\n\n  const customFieldComponents = Object.fromEntries(\n    customFieldExtensions.map(({ name, component }) => [name, component]),\n  );\n\n  const customFieldValidators = Object.fromEntries(\n    customFieldExtensions.map(({ name, validation }) => [name, validation]),\n  );\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        pageTitleOverride: \"Create a New Component\"   ,\n        title: \"Create a New Component\"   ,\n        subtitle: \"Create new software components using standard templates\"      ,}\n      )\n      , React.createElement(Content, null\n        , loading && React.createElement(LinearProgress, { 'data-testid': \"loading-progress\",} )\n        , schema && (\n          React.createElement(InfoCard, {\n            title: schema.title,\n            noPadding: true,\n            titleTypographyProps: { component: 'h2' },}\n          \n            , React.createElement(MultistepJsonForm, {\n              formData: formState,\n              fields: customFieldComponents,\n              onChange: handleChange,\n              onReset: handleFormReset,\n              onFinish: handleCreate,\n              steps: schema.steps.map(step => {\n                return {\n                  ...step,\n                  validate: createValidator(\n                    step.schema,\n                    customFieldValidators,\n                    { apiHolder },\n                  ),\n                };\n              }),}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { scaffolderApiRef } from '../../api';\nimport {\n  Typography,\n  Paper,\n  Table,\n  TableBody,\n  Box,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  makeStyles,\n} from '@material-ui/core';\n\nimport classNames from 'classnames';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  Progress,\n  Content,\n  Header,\n  Page,\n  ErrorPage,\n} from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  code: {\n    fontFamily: 'Menlo, monospace',\n    padding: theme.spacing(1),\n    backgroundColor:\n      theme.palette.type === 'dark'\n        ? theme.palette.grey[700]\n        : theme.palette.grey[300],\n    display: 'inline-block',\n    borderRadius: 5,\n    border: `1px solid ${theme.palette.grey[500]}`,\n    position: 'relative',\n  },\n\n  codeRequired: {\n    '&::after': {\n      position: 'absolute',\n      content: '\"*\"',\n      top: 0,\n      right: theme.spacing(0.5),\n      fontWeight: 'bolder',\n      color: theme.palette.error.light,\n    },\n  },\n}));\n\nexport const ActionsPage = () => {\n  const api = useApi(scaffolderApiRef);\n  const classes = useStyles();\n  const { loading, value, error } = useAsync(async () => {\n    return api.listActions();\n  });\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  if (error) {\n    return (\n      React.createElement(ErrorPage, {\n        statusMessage: \"Failed to load installed actions\"    ,\n        status: \"500\",}\n      )\n    );\n  }\n\n  const formatRows = (input) => {\n    const properties = input.properties;\n    if (!properties) {\n      return undefined;\n    }\n\n    return Object.entries(properties).map(entry => {\n      const [key] = entry;\n      const props = entry[1] ;\n      const codeClassname = classNames(classes.code, {\n        [classes.codeRequired]: input.required?.includes(key),\n      });\n\n      return (\n        React.createElement(TableRow, { key: key,}\n          , React.createElement(TableCell, null\n            , React.createElement('div', { className: codeClassname,}, key)\n          )\n          , React.createElement(TableCell, null, props.title)\n          , React.createElement(TableCell, null, props.description)\n          , React.createElement(TableCell, null\n            , React.createElement('span', { className: classes.code,}, props.type)\n          )\n        )\n      );\n    });\n  };\n\n  const renderTable = (input) => {\n    if (!input.properties) {\n      return undefined;\n    }\n    return (\n      React.createElement(TableContainer, { component: Paper,}\n        , React.createElement(Table, { size: \"small\",}\n          , React.createElement(TableHead, null\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null, \"Name\")\n              , React.createElement(TableCell, null, \"Title\")\n              , React.createElement(TableCell, null, \"Description\")\n              , React.createElement(TableCell, null, \"Type\")\n            )\n          )\n          , React.createElement(TableBody, null, formatRows(input))\n        )\n      )\n    );\n  };\n\n  const renderTables = (name, input) => {\n    if (!input) {\n      return undefined;\n    }\n\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(Typography, { variant: \"h6\",}, name)\n        , input.map((i, index) => (\n          React.createElement('div', { key: index,}, renderTable(i ))\n        ))\n      )\n    );\n  };\n\n  const items = value?.map(action => {\n    if (action.id.startsWith('legacy:')) {\n      return undefined;\n    }\n\n    const oneOf = renderTables('oneOf', action.schema?.input?.oneOf);\n    return (\n      React.createElement(Box, { pb: 4, key: action.id,}\n        , React.createElement(Typography, { variant: \"h4\", className: classes.code,}\n          , action.id\n        )\n        , React.createElement(Typography, null, action.description)\n        , action.schema?.input && (\n          React.createElement(Box, { pb: 2,}\n            , React.createElement(Typography, { variant: \"h5\",}, \"Input\")\n            , renderTable(action.schema.input)\n            , oneOf\n          )\n        )\n        , action.schema?.output && (\n          React.createElement(Box, { pb: 2,}\n            , React.createElement(Typography, { variant: \"h5\",}, \"Output\")\n            , renderTable(action.schema.output)\n          )\n        )\n      )\n    );\n  });\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        pageTitleOverride: \"Create a New Component\"   ,\n        title: \"Installed actions\" ,\n        subtitle: \"This is the collection of all installed actions\"       ,}\n      )\n      , React.createElement(Content, null, items)\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst showDirectoryPicker = (window ).showDirectoryPicker \n\n;\n\nclass WebFileAccess  {\n  constructor(\n     path,\n      handle,\n  ) {;this.path = path;this.handle = handle;}\n\n  file() {\n    return this.handle.getFile();\n  }\n\n  async save(data) {\n    const writable = await this.handle.createWritable();\n    await writable.write(data);\n    await writable.close();\n  }\n}\n\nclass WebDirectoryAccess  {\n  constructor(  handle) {;this.handle = handle;}\n\n  async listFiles() {\n    const content = [];\n    for await (const entry of this.listDirectoryContents(this.handle)) {\n      content.push(entry);\n    }\n    return content;\n  }\n\n   async *listDirectoryContents(\n    dirHandle,\n    basePath = [],\n  ) {\n    for await (const handle of dirHandle.values()) {\n      if (handle.kind === 'file') {\n        yield new WebFileAccess([...basePath, handle.name].join('/'), handle);\n      } else if (handle.kind === 'directory') {\n        yield* this.listDirectoryContents(handle, [...basePath, handle.name]);\n      }\n    }\n  }\n}\n\n/** @internal */\nexport class WebFileSystemAccess {\n  static isSupported() {\n    return Boolean(showDirectoryPicker);\n  }\n\n  static async requestDirectoryAccess() {\n    if (!showDirectoryPicker) {\n      throw new Error('File system access is not supported');\n    }\n    const handle = await showDirectoryPicker();\n    return new WebDirectoryAccess(handle);\n  }\n\n   constructor() {}\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { WebFileSystemAccess } from '../../lib/filesystem';\n\nconst useStyles = makeStyles(theme => ({\n  introText: {\n    textAlign: 'center',\n    marginTop: theme.spacing(2),\n  },\n  card: {\n    position: 'relative',\n    maxWidth: 340,\n    marginTop: theme.spacing(4),\n    margin: theme.spacing(0, 2),\n  },\n  infoIcon: {\n    position: 'absolute',\n    top: theme.spacing(1),\n    right: theme.spacing(1),\n  },\n}));\n\n\n\n\n\n\nexport function TemplateEditorIntro(props) {\n  const classes = useStyles();\n  const supportsLoad = WebFileSystemAccess.isSupported();\n\n  const cardLoadLocal = (\n    React.createElement(Card, { className: classes.card, elevation: 4,}\n      , React.createElement(CardActionArea, {\n        disabled: !supportsLoad,\n        onClick: () => props.onSelect?.('local'),}\n      \n        , React.createElement(CardContent, null\n          , React.createElement(Typography, {\n            variant: \"h5\",\n            gutterBottom: true,\n            color: supportsLoad ? undefined : 'textSecondary',\n            style: { display: 'flex', flexFlow: 'row nowrap' },}\n          , \"Load Template Directory\"\n\n          )\n          , React.createElement(Typography, {\n            variant: \"body1\",\n            color: supportsLoad ? undefined : 'textSecondary',}\n          , \"Load a local template directory, allowing you to both edit and try executing your own template.\"\n\n\n          )\n        )\n      )\n      , !supportsLoad && (\n        React.createElement('div', { className: classes.infoIcon,}\n          , React.createElement(Tooltip, {\n            placement: \"top\",\n            title: \"Only supported in some Chromium-based browsers\"     ,}\n          \n            , React.createElement(InfoOutlinedIcon, null )\n          )\n        )\n      )\n    )\n  );\n\n  const cardFormEditor = (\n    React.createElement(Card, { className: classes.card, elevation: 4,}\n      , React.createElement(CardActionArea, { onClick: () => props.onSelect?.('form'),}\n        , React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"h5\", gutterBottom: true,}, \"Edit Template Form\"\n\n          )\n          , React.createElement(Typography, { variant: \"body1\",}, \"Preview and edit a template form, either using a sample template or by loading a template from the catalog.\"\n\n\n          )\n        )\n      )\n    )\n  );\n\n  return (\n    React.createElement('div', { style: props.style,}\n      , React.createElement(Typography, { variant: \"h6\", className: classes.introText,}, \"Get started by choosing one of the options below\"\n\n      )\n      , React.createElement('div', {\n        style: {\n          display: 'flex',\n          flexFlow: 'row wrap',\n          alignItems: 'flex-start',\n          justifyContent: 'center',\n          alignContent: 'flex-start',\n        },}\n      \n        , supportsLoad && cardLoadLocal\n        , cardFormEditor\n        , !supportsLoad && cardLoadLocal\n      )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorPanel, Progress } from '@backstage/core-components';\nimport { useAsync, useRerender } from '@react-hookz/web';\nimport React, { createContext, useContext, useEffect } from 'react';\n\n\n\n\n\nconst MAX_SIZE = 1024 * 1024;\nconst MAX_SIZE_MESSAGE = 'This file is too large to be displayed';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass DirectoryEditorFileManager  {\n   #access;\n   #signalUpdate;\n\n  #content;\n  #savedContent;\n\n  constructor(access, signalUpdate) {\n    this.#access = access;\n    this.#signalUpdate = signalUpdate;\n  }\n\n  get path() {\n    return this.#access.path;\n  }\n\n  get content() {\n    return this.#content ?? MAX_SIZE_MESSAGE;\n  }\n\n  updateContent(content) {\n    if (this.#content === undefined) {\n      return;\n    }\n    this.#content = content;\n    this.#signalUpdate();\n  }\n\n  get dirty() {\n    return this.#content !== this.#savedContent;\n  }\n\n  async save() {\n    if (this.#content !== undefined) {\n      await this.#access.save(this.#content);\n      this.#savedContent = this.#content;\n      this.#signalUpdate();\n    }\n  }\n\n  async reload() {\n    const file = await this.#access.file();\n    if (file.size > MAX_SIZE) {\n      if (this.#content !== undefined) {\n        this.#content = undefined;\n        this.#savedContent = undefined;\n        this.#signalUpdate();\n      }\n      return;\n    }\n\n    const content = await file.text();\n    if (this.#content !== content) {\n      this.#content = content;\n      this.#savedContent = content;\n      this.#signalUpdate();\n    }\n  }\n}\n\nclass DirectoryEditorManager  {\n   #access;\n   #listeners = new Set();\n\n  #files = [];\n  #selectedFile;\n\n  constructor(access) {\n    this.#access = access;\n  }\n\n  get files() {\n    return this.#files;\n  }\n\n  get selectedFile() {\n    return this.#selectedFile;\n  }\n\n  setSelectedFile = (path) => {\n    const prev = this.#selectedFile;\n    const next = this.#files.find(file => file.path === path);\n    if (prev !== next) {\n      this.#selectedFile = next;\n      this.#signalUpdate();\n    }\n  };\n\n  get dirty() {\n    return this.#files.some(file => file.dirty);\n  }\n\n  async save() {\n    await Promise.all(this.#files.map(file => file.save()));\n  }\n\n  async reload() {\n    const selectedPath = this.#selectedFile?.path;\n\n    const files = await this.#access.listFiles();\n    const fileManagers = await Promise.all(\n      files.map(async file => {\n        const manager = new DirectoryEditorFileManager(\n          file,\n          this.#signalUpdate,\n        );\n        await manager.reload();\n        return manager;\n      }),\n    );\n    this.#files.length = 0;\n    this.#files.push(...fileManagers);\n\n    this.setSelectedFile(selectedPath);\n    this.#signalUpdate();\n  }\n\n  subscribe(listener) {\n    this.#listeners.add(listener);\n    return () => {\n      this.#listeners.delete(listener);\n    };\n  }\n\n  #signalUpdate = () => {\n    this.#listeners.forEach(listener => listener());\n  };\n}\n\nconst DirectoryEditorContext = createContext(\n  undefined,\n);\n\nexport function useDirectoryEditor() {\n  const value = useContext(DirectoryEditorContext);\n  const rerender = useRerender();\n\n  useEffect(() => value?.subscribe(rerender), [value, rerender]);\n\n  if (!value) {\n    throw new Error('must be used within a DirectoryEditorProvider');\n  }\n  return value;\n}\n\n\n\n\n\n\nexport function DirectoryEditorProvider(props) {\n  const { directory } = props;\n\n  const [{ result, error }, { execute }] = useAsync(\n    async (dir) => {\n      const manager = new DirectoryEditorManager(dir);\n      await manager.reload();\n\n      const firstYaml = manager.files.find(file => file.path.match(/\\.ya?ml$/));\n      if (firstYaml) {\n        manager.setSelectedFile(firstYaml.path);\n      }\n\n      return manager;\n    },\n  );\n\n  useEffect(() => {\n    execute(directory);\n  }, [execute, directory]);\n\n  if (error) {\n    return React.createElement(ErrorPanel, { error: error,} );\n  } else if (!result) {\n    return React.createElement(Progress, null );\n  }\n\n  return (\n    React.createElement(DirectoryEditorContext.Provider, { value: result,}\n      , props.children\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport yaml from 'yaml';\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport React, {\n  createContext,\n\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { scaffolderApiRef } from '../../api';\n\n\nconst MAX_CONTENT_SIZE = 256 * 1024;\nconst CHUNK_SIZE = 0x8000;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DryRunContext = createContext(undefined);\n\n\n\n\n\nexport function base64EncodeContent(content) {\n  if (content.length > MAX_CONTENT_SIZE) {\n    return btoa('<file too large>');\n  }\n\n  try {\n    return btoa(content);\n  } catch {\n    const decoder = new TextEncoder();\n    const buffer = decoder.encode(content);\n\n    const chunks = new Array();\n    for (let offset = 0; offset < buffer.length; offset += CHUNK_SIZE) {\n      chunks.push(\n        String.fromCharCode(...buffer.slice(offset, offset + CHUNK_SIZE)),\n      );\n    }\n    return btoa(chunks.join(''));\n  }\n}\n\nexport function DryRunProvider(props) {\n  const scaffolderApi = useApi(scaffolderApiRef);\n\n  const [state, setState] = useState\n\n({\n    results: [],\n    selectedResult: undefined,\n  });\n  const idRef = useRef(1);\n\n  const selectResult = useCallback((id) => {\n    setState(prevState => {\n      const result = prevState.results.find(r => r.id === id);\n      if (result === prevState.selectedResult) {\n        return prevState;\n      }\n      return {\n        results: prevState.results,\n        selectedResult: result,\n      };\n    });\n  }, []);\n\n  const deleteResult = useCallback((id) => {\n    setState(prevState => {\n      const index = prevState.results.findIndex(r => r.id === id);\n      if (index === -1) {\n        return prevState;\n      }\n      const newResults = prevState.results.slice();\n      const [deleted] = newResults.splice(index, 1);\n      return {\n        results: newResults,\n        selectedResult:\n          prevState.selectedResult?.id === deleted.id\n            ? newResults[0]\n            : prevState.selectedResult,\n      };\n    });\n  }, []);\n\n  const execute = useCallback(\n    async (options) => {\n      if (!scaffolderApi.dryRun) {\n        throw new Error('Scaffolder API does not support dry-run');\n      }\n\n      const parsed = yaml.parse(options.templateContent);\n\n      const response = await scaffolderApi.dryRun({\n        template: parsed,\n        values: options.values,\n        secrets: {},\n        directoryContents: options.files.map(file => ({\n          path: file.path,\n          base64Content: base64EncodeContent(file.content),\n        })),\n      });\n\n      const result = {\n        ...response,\n        id: idRef.current++,\n      };\n\n      setState(prevState => ({\n        results: [...prevState.results, result],\n        selectedResult: prevState.selectedResult ?? result,\n      }));\n    },\n    [scaffolderApi],\n  );\n\n  const dryRun = useMemo(\n    () => ({\n      ...state,\n      selectResult,\n      deleteResult,\n      execute,\n    }),\n    [state, selectResult, deleteResult, execute],\n  );\n\n  return (\n    React.createElement(DryRunContext.Provider, { value: dryRun,}\n      , props.children\n    )\n  );\n}\n\nexport function useDryRun() {\n  const value = useContext(DryRunContext);\n  if (!value) {\n    throw new Error('must be used within a DryRunProvider');\n  }\n  return value;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport CheckIcon from '@material-ui/icons/Check';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React from 'react';\nimport { useDryRun } from '../DryRunContext';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    overflowY: 'auto',\n    background: theme.palette.background.default,\n  },\n  iconSuccess: {\n    minWidth: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.status.ok,\n  },\n  iconFailure: {\n    minWidth: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.status.error,\n  },\n}));\n\nexport function DryRunResultsList() {\n  const classes = useStyles();\n  const dryRun = useDryRun();\n\n  return (\n    React.createElement(List, { className: classes.root, dense: true,}\n      , dryRun.results.map(result => {\n        const failed = result.log.some(l => l.body.status === 'failed');\n        return (\n          React.createElement(ListItem, {\n            button: true,\n            key: result.id,\n            selected: dryRun.selectedResult?.id === result.id,\n            onClick: () => dryRun.selectResult(result.id),}\n          \n            , React.createElement(ListItemIcon, {\n              className: failed ? classes.iconFailure : classes.iconSuccess,}\n            \n              , failed ? React.createElement(CancelIcon, null ) : React.createElement(CheckIcon, null )\n            )\n            , React.createElement(ListItemText, { primary: `Result ${result.id}`,} )\n            , React.createElement(ListItemSecondaryAction, null\n              , React.createElement(IconButton, {\n                edge: \"end\",\n                'aria-label': \"delete\",\n                onClick: () => dryRun.deleteResult(result.id),}\n              \n                , React.createElement(DeleteIcon, null )\n              )\n            )\n          )\n        );\n      })\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport TreeItem from '@material-ui/lab/TreeItem';\n\nconst useStyles = makeStyles({\n  root: {\n    whiteSpace: 'nowrap',\n    overflowY: 'auto',\n  },\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function parseFileEntires(paths) {\n  const root = {\n    type: 'directory',\n    name: '',\n    path: '',\n    children: [],\n  };\n\n  for (const path of paths.slice().sort()) {\n    const parts = path.split('/');\n\n    let current = root;\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      if (part === '') {\n        throw new Error(`Invalid path part: ''`);\n      }\n\n      const entryPath = parts.slice(0, i + 1).join('/');\n\n      const existing = current.children.find(child => child.name === part);\n      if (existing?.type === 'file') {\n        throw new Error(`Duplicate filename at '${entryPath}'`);\n      } else if (existing) {\n        current = existing;\n      } else {\n        if (i < parts.length - 1) {\n          const newEntry = {\n            type: 'directory',\n            name: part,\n            path: entryPath,\n            children: [],\n          };\n          const firstFileIndex = current.children.findIndex(\n            child => child.type === 'file',\n          );\n          current.children.splice(firstFileIndex, 0, newEntry);\n          current = newEntry;\n        } else {\n          current.children.push({\n            type: 'file',\n            name: part,\n            path: entryPath,\n          });\n        }\n      }\n    }\n  }\n\n  return root.children;\n}\n\nfunction FileTreeItem({ entry }) {\n  if (entry.type === 'file') {\n    return React.createElement(TreeItem, { nodeId: entry.path, label: entry.name,} );\n  }\n\n  return (\n    React.createElement(TreeItem, { nodeId: entry.path, label: entry.name,}\n      , entry.children.map(child => (\n        React.createElement(FileTreeItem, { key: child.path, entry: child,} )\n      ))\n    )\n  );\n}\n\n\n\n\n\n\n\n\n\n\n/** A simple file browser that allows you to select individual files */\nexport function FileBrowser(props) {\n  const classes = useStyles();\n\n  const fileTree = useMemo(\n    () => parseFileEntires(props.filePaths),\n    [props.filePaths],\n  );\n\n  return (\n    React.createElement(TreeView, {\n      selected: props.selected,\n      className: classes.root,\n      defaultCollapseIcon: React.createElement(ExpandMoreIcon, null ),\n      defaultExpandIcon: React.createElement(ChevronRightIcon, null ),\n      onNodeSelect: (_e, nodeId) => {\n        if (props.onSelect && props.filePaths.includes(nodeId)) {\n          props.onSelect(nodeId);\n        }\n      },}\n    \n      , fileTree.map(entry => (\n        React.createElement(FileTreeItem, { key: entry.path, entry: entry,} )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport React, { Children, } from 'react';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'grid',\n    gridTemplateColumns: '280px auto 3fr',\n    gridTemplateRows: '1fr',\n  },\n  child: {\n    overflowY: 'auto',\n    height: '100%',\n    minHeight: 0,\n  },\n  firstChild: {\n    background: theme.palette.background.paper,\n  },\n}));\n\nexport function DryRunResultsSplitView(props) {\n  const classes = useStyles();\n  const childArray = Children.toArray(props.children);\n\n  if (childArray.length !== 2) {\n    throw new Error('must have exactly 2 children');\n  }\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement('div', { className: classNames(classes.child, classes.firstChild),}\n        , childArray[0]\n      )\n      , React.createElement(Divider, { orientation: \"horizontal\",} )\n      , React.createElement('div', { className: classes.child,}, childArray[1])\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport { StreamLanguage } from '@codemirror/language';\nimport { yaml as yamlSupport } from '@codemirror/legacy-modes/mode/yaml';\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport CodeMirror from '@uiw/react-codemirror';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { TaskStatusStepper } from '../../TaskPage/TaskPage';\nimport { TaskPageLinks } from '../../TaskPage/TaskPageLinks';\nimport { useDryRun } from '../DryRunContext';\nimport { FileBrowser } from '../../FileBrowser';\nimport { DryRunResultsSplitView } from './DryRunResultsSplitView';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n  },\n  contentWrapper: {\n    flex: 1,\n    position: 'relative',\n  },\n  content: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n\n    display: 'flex',\n    '& > *': {\n      flex: 1,\n    },\n  },\n  codeMirror: {\n    height: '100%',\n    overflowY: 'auto',\n  },\n});\n\nfunction FilesContent() {\n  const classes = useStyles();\n  const { selectedResult } = useDryRun();\n  const [selectedPath, setSelectedPath] = useState('');\n  const selectedFile = selectedResult?.directoryContents.find(\n    f => f.path === selectedPath,\n  );\n\n  useEffect(() => {\n    if (selectedResult) {\n      const [firstFile] = selectedResult.directoryContents;\n      if (firstFile) {\n        setSelectedPath(firstFile.path);\n      } else {\n        setSelectedPath('');\n      }\n    }\n    return undefined;\n  }, [selectedResult]);\n\n  if (!selectedResult) {\n    return null;\n  }\n  return (\n    React.createElement(DryRunResultsSplitView, null\n      , React.createElement(FileBrowser, {\n        selected: selectedPath,\n        onSelect: setSelectedPath,\n        filePaths: selectedResult.directoryContents.map(file => file.path),}\n      )\n      , React.createElement(CodeMirror, {\n        className: classes.codeMirror,\n        theme: \"dark\",\n        height: \"100%\",\n        extensions: [StreamLanguage.define(yamlSupport)],\n        readOnly: true,\n        value: \n          selectedFile?.base64Content ? atob(selectedFile.base64Content) : ''\n        ,}\n      )\n    )\n  );\n}\nfunction LogContent() {\n  const { selectedResult } = useDryRun();\n  const [currentStepId, setUserSelectedStepId] = useState();\n\n  const steps = useMemo(() => {\n    if (!selectedResult) {\n      return [];\n    }\n    return (\n      selectedResult.steps.map(step => {\n        const stepLog = selectedResult.log.filter(\n          l => l.body.stepId === step.id,\n        );\n        return {\n          id: step.id,\n          name: step.name,\n          logString: stepLog.map(l => l.body.message).join('\\n'),\n          status: stepLog[stepLog.length - 1]?.body.status ?? 'completed',\n        };\n      }) ?? []\n    );\n  }, [selectedResult]);\n\n  if (!selectedResult) {\n    return null;\n  }\n\n  const selectedStep = steps.find(s => s.id === currentStepId) ?? steps[0];\n\n  return (\n    React.createElement(DryRunResultsSplitView, null\n      , React.createElement(TaskStatusStepper, {\n        steps: steps,\n        currentStepId: selectedStep.id,\n        onUserStepChange: setUserSelectedStepId,}\n      )\n      , React.createElement(LogViewer, { text: selectedStep?.logString ?? '',} )\n    )\n  );\n}\n\nfunction OutputContent() {\n  const classes = useStyles();\n  const { selectedResult } = useDryRun();\n\n  if (!selectedResult) {\n    return null;\n  }\n\n  return (\n    React.createElement(DryRunResultsSplitView, null\n      , React.createElement(Box, { pt: 2,}\n        , selectedResult.output?.links?.length && (\n          React.createElement(TaskPageLinks, { output: selectedResult.output,} )\n        )\n      )\n      , React.createElement(CodeMirror, {\n        className: classes.codeMirror,\n        theme: \"dark\",\n        height: \"100%\",\n        extensions: [StreamLanguage.define(yamlSupport)],\n        readOnly: true,\n        value: JSON.stringify(selectedResult.output, null, 2),}\n      )\n    )\n  );\n}\n\nexport function DryRunResultsView() {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = useState(\n    'files',\n  );\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Tabs, { value: selectedTab, onChange: (_, v) => setSelectedTab(v),}\n        , React.createElement(Tab, { value: \"files\", label: \"Files\",} )\n        , React.createElement(Tab, { value: \"log\", label: \"Log\",} )\n        , React.createElement(Tab, { value: \"output\", label: \"Output\",} )\n      )\n      , React.createElement(Divider, null )\n\n      , React.createElement('div', { className: classes.contentWrapper,}\n        , React.createElement('div', { className: classes.content,}\n          , selectedTab === 'files' && React.createElement(FilesContent, null )\n          , selectedTab === 'log' && React.createElement(LogContent, null )\n          , selectedTab === 'output' && React.createElement(OutputContent, null )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandLess';\nimport { usePrevious } from '@react-hookz/web';\nimport React, { useEffect, useState } from 'react';\nimport { useDryRun } from '../DryRunContext';\nimport { DryRunResultsList } from './DryRunResultsList';\nimport { DryRunResultsView } from './DryRunResultsView';\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    height: 48,\n    minHeight: 0,\n    '&.Mui-expanded': {\n      height: 48,\n      minHeight: 0,\n    },\n  },\n  content: {\n    display: 'grid',\n    background: theme.palette.background.default,\n    gridTemplateColumns: '180px auto 1fr',\n    gridTemplateRows: '1fr',\n    padding: 0,\n    height: 400,\n  },\n}));\n\nexport function DryRunResults() {\n  const classes = useStyles();\n  const dryRun = useDryRun();\n  const [expanded, setExpanded] = useState(false);\n  const [hidden, setHidden] = useState(true);\n\n  const resultsLength = dryRun.results.length;\n  const prevResultsLength = usePrevious(resultsLength);\n  useEffect(() => {\n    if (prevResultsLength === 0 && resultsLength === 1) {\n      setHidden(false);\n      setExpanded(true);\n    } else if (prevResultsLength === 1 && resultsLength === 0) {\n      setExpanded(false);\n    }\n  }, [prevResultsLength, resultsLength]);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Accordion, {\n        variant: \"outlined\",\n        expanded: expanded,\n        hidden: resultsLength === 0 && hidden,\n        onChange: (_, exp) => setExpanded(exp),\n        onTransitionEnd: () => resultsLength === 0 && setHidden(true),}\n      \n        , React.createElement(AccordionSummary, {\n          className: classes.header,\n          expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        \n          , React.createElement(Typography, null, \"Dry-run results\" )\n        )\n        , React.createElement(Divider, { orientation: \"horizontal\",} )\n        , React.createElement(AccordionDetails, { className: classes.content,}\n          , React.createElement(DryRunResultsList, null )\n          , React.createElement(Divider, { orientation: \"horizontal\",} )\n          , React.createElement(DryRunResultsView, null )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Divider, IconButton, makeStyles, Tooltip } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SaveIcon from '@material-ui/icons/Save';\nimport React from 'react';\nimport { FileBrowser } from '../FileBrowser';\nimport { useDirectoryEditor } from './DirectoryEditorContext';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    padding: theme.spacing(1),\n  },\n  buttons: {\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  buttonsGap: {\n    flex: '1 1 auto',\n  },\n  buttonsDivider: {\n    marginBottom: theme.spacing(1),\n  },\n}));\n\n/** The local file browser for the template editor */\nexport function TemplateEditorBrowser(props) {\n  const classes = useStyles();\n  const directoryEditor = useDirectoryEditor();\n  const changedFiles = directoryEditor.files.filter(file => file.dirty);\n\n  const handleClose = () => {\n    if (!props.onClose) {\n      return;\n    }\n    if (changedFiles.length > 0) {\n      // eslint-disable-next-line no-alert\n      const accepted = window.confirm(\n        'Are you sure? Unsaved changes will be lost',\n      );\n      if (!accepted) {\n        return;\n      }\n    }\n    props.onClose();\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { className: classes.buttons,}\n        , React.createElement(Tooltip, { title: \"Save all files\"  ,}\n          , React.createElement(IconButton, {\n            className: classes.button,\n            disabled: directoryEditor.files.every(file => !file.dirty),\n            onClick: () => directoryEditor.save(),}\n          \n            , React.createElement(SaveIcon, null )\n          )\n        )\n        , React.createElement(Tooltip, { title: \"Reload directory\" ,}\n          , React.createElement(IconButton, {\n            className: classes.button,\n            onClick: () => directoryEditor.reload(),}\n          \n            , React.createElement(RefreshIcon, null )\n          )\n        )\n        , React.createElement('div', { className: classes.buttonsGap,} )\n        , React.createElement(Tooltip, { title: \"Close directory\" ,}\n          , React.createElement(IconButton, { className: classes.button, onClick: handleClose,}\n            , React.createElement(CloseIcon, null )\n          )\n        )\n      )\n      , React.createElement(Divider, { className: classes.buttonsDivider,} )\n      , React.createElement(FileBrowser, {\n        selected: directoryEditor.selectedFile?.path ?? '',\n        onSelect: directoryEditor.setSelectedFile,\n        filePaths: directoryEditor.files.map(file => file.path),}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApiHolder } from '@backstage/core-plugin-api';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { Component, useMemo, useState } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport yaml from 'yaml';\n\n\nimport { MultistepJsonForm } from '../MultistepJsonForm';\nimport { createValidator } from '../TemplatePage';\nimport { useDirectoryEditor } from './DirectoryEditorContext';\nimport { useDryRun } from './DryRunContext';\n\nconst useStyles = makeStyles({\n  containerWrapper: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n  },\n  container: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    overflow: 'auto',\n  },\n});\n\n\n\n\n\n\n\n\n\n\n\nclass ErrorBoundary extends Component {\n  state = {\n    shouldRender: true,\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.invalidator !== this.props.invalidator) {\n      this.setState({ shouldRender: true });\n    }\n  }\n\n  componentDidCatch(error) {\n    this.props.setErrorText(error.message);\n    this.setState({ shouldRender: false });\n  }\n\n  render() {\n    return this.state.shouldRender ? this.props.children : null;\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isJsonObject(value) {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\n/** Shows the a template form that is parsed from the provided content */\nexport function TemplateEditorForm(props) {\n  const {\n    content,\n    contentIsSpec,\n    data,\n    onUpdate,\n    onDryRun,\n    setErrorText,\n    fieldExtensions = [],\n  } = props;\n  const classes = useStyles();\n  const apiHolder = useApiHolder();\n\n  const [steps, setSteps] = useState();\n\n  const fields = useMemo(() => {\n    return Object.fromEntries(\n      fieldExtensions.map(({ name, component }) => [name, component]),\n    );\n  }, [fieldExtensions]);\n\n  useDebounce(\n    () => {\n      try {\n        if (!content) {\n          setSteps(undefined);\n          return;\n        }\n        const parsed = yaml.parse(content);\n\n        if (!isJsonObject(parsed)) {\n          setSteps(undefined);\n          return;\n        }\n\n        let rootObj = parsed;\n        if (!contentIsSpec) {\n          const isTemplate =\n            String(parsed.kind).toLocaleLowerCase('en-US') === 'template';\n          if (!isTemplate) {\n            setSteps(undefined);\n            return;\n          }\n\n          rootObj = isJsonObject(parsed.spec) ? parsed.spec : {};\n        }\n\n        const { parameters } = rootObj;\n        if (!Array.isArray(parameters)) {\n          setErrorText('Template parameters must be an array');\n          setSteps(undefined);\n          return;\n        }\n\n        const fieldValidators = Object.fromEntries(\n          fieldExtensions.map(({ name, validation }) => [name, validation]),\n        );\n\n        setErrorText();\n        setSteps(\n          parameters.flatMap(param =>\n            isJsonObject(param)\n              ? [\n                  {\n                    title: String(param.title),\n                    schema: param,\n                    validate: createValidator(param, fieldValidators, {\n                      apiHolder,\n                    }),\n                  },\n                ]\n              : [],\n          ),\n        );\n      } catch (e) {\n        setErrorText(e.message);\n      }\n    },\n    250,\n    [contentIsSpec, content, apiHolder],\n  );\n\n  if (!steps) {\n    return null;\n  }\n\n  return (\n    React.createElement('div', { className: classes.containerWrapper,}\n      , React.createElement('div', { className: classes.container,}\n        , React.createElement(ErrorBoundary, { invalidator: steps, setErrorText: setErrorText,}\n          , React.createElement(MultistepJsonForm, {\n            steps: steps,\n            fields: fields,\n            formData: data,\n            onChange: e => onUpdate(e.formData),\n            onReset: () => onUpdate({}),\n            finishButtonLabel: onDryRun && 'Try It',\n            onFinish: onDryRun && (() => onDryRun(data)),}\n          )\n        )\n      )\n    )\n  );\n}\n\n/** A version of the TemplateEditorForm that is connected to the DirectoryEditor and DryRun contexts */\nexport function TemplateEditorFormDirectoryEditorDryRun(\n  props,\n) {\n  const { setErrorText, fieldExtensions = [] } = props;\n  const dryRun = useDryRun();\n\n  const directoryEditor = useDirectoryEditor();\n  const { selectedFile } = directoryEditor;\n\n  const [data, setData] = useState({});\n\n  const handleDryRun = async () => {\n    if (!selectedFile) {\n      return;\n    }\n\n    await dryRun.execute({\n      templateContent: selectedFile.content,\n      values: data,\n      files: directoryEditor.files,\n    });\n  };\n\n  const content =\n    selectedFile && selectedFile.path.match(/\\.ya?ml$/)\n      ? selectedFile.content\n      : undefined;\n\n  return (\n    React.createElement(TemplateEditorForm, {\n      onDryRun: handleDryRun,\n      fieldExtensions: fieldExtensions,\n      setErrorText: setErrorText,\n      content: content,\n      data: data,\n      onUpdate: setData,}\n    )\n  );\n}\n\nTemplateEditorForm.DirectoryEditorDryRun =\n  TemplateEditorFormDirectoryEditorDryRun;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StreamLanguage } from '@codemirror/language';\nimport { yaml as yamlSupport } from '@codemirror/legacy-modes/mode/yaml';\nimport { showPanel } from '@codemirror/view';\nimport { IconButton, makeStyles, Paper, Tooltip } from '@material-ui/core';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useKeyboardEvent } from '@react-hookz/web';\nimport CodeMirror from '@uiw/react-codemirror';\nimport React, { useMemo } from 'react';\nimport { useDirectoryEditor } from './DirectoryEditorContext';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n  },\n  codeMirror: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  errorPanel: {\n    color: theme.palette.error.main,\n    lineHeight: 2,\n    margin: theme.spacing(0, 1),\n  },\n  floatingButtons: {\n    position: 'absolute',\n    top: theme.spacing(1),\n    right: theme.spacing(3),\n  },\n  floatingButton: {\n    padding: theme.spacing(1),\n  },\n}));\n\n/** A wrapper around CodeMirror with an error panel and extra actions available */\nexport function TemplateEditorTextArea(props\n\n\n\n\n\n) {\n  const { errorText } = props;\n  const classes = useStyles();\n\n  const panelExtension = useMemo(() => {\n    if (!errorText) {\n      return showPanel.of(null);\n    }\n\n    const dom = document.createElement('div');\n    dom.classList.add(classes.errorPanel);\n    dom.textContent = errorText;\n    return showPanel.of(() => ({ dom, bottom: true }));\n  }, [classes, errorText]);\n\n  useKeyboardEvent(\n    e => e.key === 's' && (e.ctrlKey || e.metaKey),\n    e => {\n      e.preventDefault();\n      if (props.onSave) {\n        props.onSave();\n      }\n    },\n  );\n\n  return (\n    React.createElement('div', { className: classes.container,}\n      , React.createElement(CodeMirror, {\n        className: classes.codeMirror,\n        theme: \"dark\",\n        height: \"100%\",\n        extensions: [StreamLanguage.define(yamlSupport), panelExtension],\n        value: props.content,\n        onChange: props.onUpdate,}\n      )\n      , (props.onSave || props.onReload) && (\n        React.createElement('div', { className: classes.floatingButtons,}\n          , React.createElement(Paper, null\n            , props.onSave && (\n              React.createElement(Tooltip, { title: \"Save file\" ,}\n                , React.createElement(IconButton, {\n                  className: classes.floatingButton,\n                  onClick: () => props.onSave?.(),}\n                \n                  , React.createElement(SaveIcon, null )\n                )\n              )\n            )\n            , props.onReload && (\n              React.createElement(Tooltip, { title: \"Reload file\" ,}\n                , React.createElement(IconButton, {\n                  className: classes.floatingButton,\n                  onClick: () => props.onReload?.(),}\n                \n                  , React.createElement(RefreshIcon, null )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n}\n\n/** A version of the TemplateEditorTextArea that is connected to the DirectoryEditor context */\nexport function TemplateEditorDirectoryEditorTextArea(props\n\n) {\n  const directoryEditor = useDirectoryEditor();\n\n  const actions = directoryEditor.selectedFile?.dirty\n    ? {\n        onSave: () => directoryEditor.save(),\n        onReload: () => directoryEditor.reload(),\n      }\n    : {\n        onReload: () => directoryEditor.reload(),\n      };\n\n  return (\n    React.createElement(TemplateEditorTextArea, {\n      errorText: props.errorText,\n      content: directoryEditor.selectedFile?.content,\n      onUpdate: content => directoryEditor.selectedFile?.updateContent(content),\n      ...actions,}\n    )\n  );\n}\n\nTemplateEditorTextArea.DirectoryEditor = TemplateEditorDirectoryEditorTextArea;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core';\nimport React, { useState } from 'react';\n\n\nimport { DirectoryEditorProvider } from './DirectoryEditorContext';\nimport { DryRunProvider } from './DryRunContext';\nimport { DryRunResults } from './DryRunResults';\nimport { TemplateEditorBrowser } from './TemplateEditorBrowser';\nimport { TemplateEditorForm } from './TemplateEditorForm';\nimport { TemplateEditorTextArea } from './TemplateEditorTextArea';\n\nconst useStyles = makeStyles({\n  // Reset and fix sizing to make sure scrolling behaves correctly\n  root: {\n    gridArea: 'pageContent',\n\n    display: 'grid',\n    gridTemplateAreas: `\n      \"browser editor preview\"\n      \"results results results\"\n    `,\n    gridTemplateColumns: '1fr 3fr 2fr',\n    gridTemplateRows: '1fr auto',\n  },\n  browser: {\n    gridArea: 'browser',\n    overflow: 'auto',\n  },\n  editor: {\n    gridArea: 'editor',\n    overflow: 'auto',\n  },\n  preview: {\n    gridArea: 'preview',\n    overflow: 'auto',\n  },\n  results: {\n    gridArea: 'results',\n  },\n});\n\nexport const TemplateEditor = (props\n\n\n\n) => {\n  const classes = useStyles();\n\n  const [errorText, setErrorText] = useState();\n\n  return (\n    React.createElement(DirectoryEditorProvider, { directory: props.directory,}\n      , React.createElement(DryRunProvider, null\n        , React.createElement('main', { className: classes.root,}\n          , React.createElement('section', { className: classes.browser,}\n            , React.createElement(TemplateEditorBrowser, { onClose: props.onClose,} )\n          )\n          , React.createElement('section', { className: classes.editor,}\n            , React.createElement(TemplateEditorTextArea.DirectoryEditor, { errorText: errorText,} )\n          )\n          , React.createElement('section', { className: classes.preview,}\n            , React.createElement(TemplateEditorForm.DirectoryEditorDryRun, {\n              setErrorText: setErrorText,\n              fieldExtensions: props.fieldExtensions,}\n            )\n          )\n          , React.createElement('section', { className: classes.results,}\n            , React.createElement(DryRunResults, null )\n          )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\nimport {\n  catalogApiRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport {\n  FormControl,\n  IconButton,\n  InputLabel,\n  LinearProgress,\n  makeStyles,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { useCallback, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport yaml from 'yaml';\n\nimport { TemplateEditorForm } from './TemplateEditorForm';\nimport { TemplateEditorTextArea } from './TemplateEditorTextArea';\n\nconst EXAMPLE_TEMPLATE_PARAMS_YAML = `# Edit the template parameters below to see how they will render in the scaffolder form UI\nparameters:\n  - title: Fill in some steps\n    required:\n      - name\n    properties:\n      name:\n        title: Name\n        type: string\n        description: Unique name of the component\n      owner:\n        title: Owner\n        type: string\n        description: Owner of the component\n        ui:field: OwnerPicker\n        ui:options:\n          allowedKinds:\n            - Group\n  - title: Choose a location\n    required:\n      - repoUrl\n    properties:\n      repoUrl:\n        title: Repository Location\n        type: string\n        ui:field: RepoUrlPicker\n        ui:options:\n          allowedHosts:\n            - github.com\nsteps:\n  - id: fetch-base\n    name: Fetch Base\n    action: fetch:template\n    input:\n      url: ./template\n      values:\n        name: \\${{parameters.name}}\n`;\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n    display: 'grid',\n    gridTemplateAreas: `\n      \"controls controls\"\n      \"textArea preview\"\n    `,\n    gridTemplateRows: 'auto 1fr',\n    gridTemplateColumns: '1fr 1fr',\n  },\n  controls: {\n    gridArea: 'controls',\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    alignItems: 'center',\n    margin: theme.spacing(1),\n  },\n  textArea: {\n    gridArea: 'textArea',\n  },\n  preview: {\n    gridArea: 'preview',\n  },\n}));\n\nexport const TemplateFormPreviewer = ({\n  defaultPreviewTemplate = EXAMPLE_TEMPLATE_PARAMS_YAML,\n  customFieldExtensions = [],\n  onClose,\n}\n\n\n\n) => {\n  const classes = useStyles();\n  const alertApi = useApi(alertApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const [selectedTemplate, setSelectedTemplate] = useState('');\n  const [errorText, setErrorText] = useState();\n  const [templateOptions, setTemplateOptions] = useState([]);\n  const [templateYaml, setTemplateYaml] = useState(defaultPreviewTemplate);\n  const [formState, setFormState] = useState({});\n\n  const { loading } = useAsync(\n    () =>\n      catalogApi\n        .getEntities({\n          filter: { kind: 'template' },\n          fields: [\n            'kind',\n            'metadata.namespace',\n            'metadata.name',\n            'metadata.title',\n            'spec.parameters',\n            'spec.steps',\n            'spec.output',\n          ],\n        })\n        .then(({ items }) =>\n          setTemplateOptions(\n            items.map(template => ({\n              label:\n                template.metadata.title ??\n                humanizeEntityRef(template, { defaultKind: 'template' }),\n              value: template,\n            })),\n          ),\n        )\n        .catch(e =>\n          alertApi.post({\n            message: `Error loading exisiting templates: ${e.message}`,\n            severity: 'error',\n          }),\n        ),\n    [catalogApi],\n  );\n\n  const handleSelectChange = useCallback(\n    selected => {\n      setSelectedTemplate(selected);\n      setTemplateYaml(yaml.stringify(selected.spec));\n    },\n    [setTemplateYaml],\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , loading && React.createElement(LinearProgress, null )\n      , React.createElement('main', { className: classes.root,}\n        , React.createElement('div', { className: classes.controls,}\n          , React.createElement(FormControl, { variant: \"outlined\", size: \"small\", fullWidth: true,}\n            , React.createElement(InputLabel, { id: \"select-template-label\",}, \"Load Existing Template\"\n\n            )\n            , React.createElement(Select, {\n              value: selectedTemplate,\n              label: \"Load Existing Template\"  ,\n              labelId: \"select-template-label\",\n              onChange: e => handleSelectChange(e.target.value),}\n            \n              , templateOptions.map((option, idx) => (\n                React.createElement(MenuItem, { key: idx, value: option.value ,}\n                  , option.label\n                )\n              ))\n            )\n          )\n\n          , React.createElement(IconButton, { size: \"medium\", onClick: onClose,}\n            , React.createElement(CloseIcon, null )\n          )\n        )\n        , React.createElement('div', { className: classes.textArea,}\n          , React.createElement(TemplateEditorTextArea, {\n            content: templateYaml,\n            onUpdate: setTemplateYaml,\n            errorText: errorText,}\n          )\n        )\n        , React.createElement('div', { className: classes.preview,}\n          , React.createElement(TemplateEditorForm, {\n            content: templateYaml,\n            contentIsSpec: true,\n            fieldExtensions: customFieldExtensions,\n            data: formState,\n            onUpdate: setFormState,\n            setErrorText: setErrorText,}\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { Content, Header, Page } from '@backstage/core-components';\nimport {\n\n  WebFileSystemAccess,\n} from '../../lib/filesystem';\nimport { TemplateEditorIntro } from './TemplateEditorIntro';\nimport { TemplateEditor } from './TemplateEditor';\nimport { TemplateFormPreviewer } from './TemplateFormPreviewer';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function TemplateEditorPage(props) {\n  const [selection, setSelection] = useState();\n\n  let content = null;\n  if (selection?.type === 'local') {\n    content = (\n      React.createElement(TemplateEditor, {\n        directory: selection.directory,\n        fieldExtensions: props.customFieldExtensions,\n        onClose: () => setSelection(undefined),}\n      )\n    );\n  } else if (selection?.type === 'form') {\n    content = (\n      React.createElement(TemplateFormPreviewer, {\n        defaultPreviewTemplate: props.defaultPreviewTemplate,\n        customFieldExtensions: props.customFieldExtensions,\n        onClose: () => setSelection(undefined),}\n      )\n    );\n  } else {\n    content = (\n      React.createElement(Content, null\n        , React.createElement(TemplateEditorIntro, {\n          onSelect: option => {\n            if (option === 'local') {\n              WebFileSystemAccess.requestDirectoryAccess()\n                .then(directory => setSelection({ type: 'local', directory }))\n                .catch(() => {});\n            } else if (option === 'form') {\n              setSelection({ type: 'form' });\n            }\n          },}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        title: \"Template Editor\" ,\n        subtitle: \"Edit, preview, and try out templates and template forms\"        ,}\n      )\n      , content\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Card,\n  List,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  MenuItem,\n\n  Typography,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport React, { Fragment } from 'react';\n\nimport AllIcon from '@material-ui/icons/FontDownload';\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      backgroundColor: 'rgba(0, 0, 0, .11)',\n      boxShadow: 'none',\n      margin: theme.spacing(1, 0, 1, 0),\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: 'uppercase',\n      fontSize: 12,\n      fontWeight: 'bold',\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary,\n    },\n    menuItem: {\n      minHeight: theme.spacing(6),\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1),\n    },\n  }),\n  {\n    name: 'ScaffolderReactOwnerListPicker',\n  },\n);\n\n\n\n\n\n\n\n\n\n\nfunction getFilterGroups() {\n  return [\n    {\n      name: 'Task Owner',\n      items: [\n        {\n          id: 'owned',\n          label: 'Owned',\n          icon: SettingsIcon,\n        },\n        {\n          id: 'all',\n          label: 'All',\n          icon: AllIcon,\n        },\n      ],\n    },\n  ];\n}\n\nexport const OwnerListPicker = (props\n\n\n) => {\n  const { filter, onSelectOwner } = props;\n  const classes = useStyles();\n\n  const filterGroups = getFilterGroups();\n  return (\n    React.createElement(Card, { className: classes.root,}\n      , filterGroups.map(group => (\n        React.createElement(Fragment, { key: group.name,}\n          , React.createElement(Typography, { variant: \"subtitle2\", className: classes.title,}\n            , group.name\n          )\n          , React.createElement(Card, { className: classes.groupWrapper,}\n            , React.createElement(List, { disablePadding: true, dense: true,}\n              , group.items.map(item => (\n                React.createElement(MenuItem, {\n                  key: item.id,\n                  button: true,\n                  divider: true,\n                  onClick: () => onSelectOwner(item.id ),\n                  selected: item.id === filter,\n                  className: classes.menuItem,\n                  'data-testid': `owner-picker-${item.id}`,}\n                \n                  , item.icon && (\n                    React.createElement(ListItemIcon, { className: classes.listIcon,}\n                      , React.createElement(item.icon, { fontSize: \"small\",} )\n                    )\n                  )\n                  , React.createElement(ListItemText, null\n                    , React.createElement(Typography, { variant: \"body1\",}, item.label)\n                  )\n                )\n              ))\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\nimport React from 'react';\n\nexport const CreatedAtColumn = ({ createdAt }) => {\n  const createdAtTime = DateTime.fromISO(createdAt);\n  const formatted = Interval.fromDateTimes(createdAtTime, DateTime.local())\n    .toDuration()\n    .valueOf();\n\n  return React.createElement('p', null, humanizeDuration(formatted, { round: true }), \" ago\" );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApi } from '@backstage/core-plugin-api';\nimport React from 'react';\n\nimport useAsync from 'react-use/lib/useAsync';\n\nimport { catalogApiRef, EntityRefLink } from '@backstage/plugin-catalog-react';\nimport { parseEntityRef, } from '@backstage/catalog-model';\n\nexport const OwnerEntityColumn = ({ entityRef }) => {\n  const catalogApi = useApi(catalogApiRef);\n\n  const { value, loading, error } = useAsync(\n    () => catalogApi.getEntityByRef(entityRef || ''),\n    [catalogApi, entityRef],\n  );\n\n  if (!entityRef) {\n    return React.createElement('p', null, \"Unknown\");\n  }\n\n  if (loading || error) {\n    return null;\n  }\n\n  return (\n    React.createElement(EntityRefLink, {\n      entityRef: parseEntityRef(entityRef),\n      title: \n        (value )?.spec?.profile?.displayName ??\n        value?.metadata.name\n      ,}\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  StatusError,\n  StatusOK,\n  StatusPending,\n} from '@backstage/core-components';\nimport React from 'react';\n\nexport const TaskStatusColumn = ({ status }) => {\n  switch (status) {\n    case 'processing':\n      return React.createElement(StatusPending, null, status);\n    case 'completed':\n      return React.createElement(StatusOK, null, status);\n    case 'error':\n    default:\n      return React.createElement(StatusError, null, status);\n  }\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApi } from '@backstage/core-plugin-api';\nimport React from 'react';\nimport { scaffolderApiRef } from '../../../api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { EntityRefLink } from '@backstage/plugin-catalog-react';\n\nexport const TemplateTitleColumn = ({ entityRef }) => {\n  const scaffolder = useApi(scaffolderApiRef);\n  const { value, loading, error } = useAsync(\n    () => scaffolder.getTemplateParameterSchema(entityRef || ''),\n    [scaffolder, entityRef],\n  );\n\n  if (loading || error || !entityRef) {\n    return null;\n  }\n\n  return (\n    React.createElement(EntityRefLink, { entityRef: parseEntityRef(entityRef), title: value?.title,} )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Content,\n  EmptyState,\n  ErrorPanel,\n  Header,\n  Lifecycle,\n  Link,\n  Page,\n  Progress,\n} from '@backstage/core-components';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { CatalogFilterLayout } from '@backstage/plugin-catalog-react';\nimport useAsync from 'react-use/lib/useAsync';\nimport MaterialTable from '@material-table/core';\nimport React, { useState } from 'react';\nimport { scaffolderApiRef } from '../../api';\nimport { rootRouteRef } from '../../routes';\nimport { OwnerListPicker } from './OwnerListPicker';\nimport {\n  CreatedAtColumn,\n  OwnerEntityColumn,\n  TaskStatusColumn,\n  TemplateTitleColumn,\n} from './columns';\n\n\n\n\n\nconst ListTaskPageContent = (props) => {\n  const { initiallySelectedFilter = 'owned' } = props;\n\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const rootLink = useRouteRef(rootRouteRef);\n\n  const [ownerFilter, setOwnerFilter] = useState(initiallySelectedFilter);\n  const { value, loading, error } = useAsync(() => {\n    if (scaffolderApi.listTasks) {\n      return scaffolderApi.listTasks?.({ filterByOwnership: ownerFilter });\n    }\n\n    // eslint-disable-next-line no-console\n    console.warn(\n      'listTasks is not implemented in the scaffolderApi, please make sure to implement this method.',\n    );\n\n    return Promise.resolve({ tasks: [] });\n  }, [scaffolderApi, ownerFilter]);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  if (error) {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(ErrorPanel, { error: error,} )\n        , React.createElement(EmptyState, {\n          missing: \"info\",\n          title: \"No information to display\"   ,\n          description: \"There is no Tasks or there was an issue communicating with backend.\"           ,}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(CatalogFilterLayout, null\n      , React.createElement(CatalogFilterLayout.Filters, null\n        , React.createElement(OwnerListPicker, {\n          filter: ownerFilter,\n          onSelectOwner: id => setOwnerFilter(id),}\n        )\n      )\n      , React.createElement(CatalogFilterLayout.Content, null\n        , React.createElement(MaterialTable, {\n          data: value?.tasks ?? [],\n          title: \"Tasks\",\n          columns: [\n            {\n              title: 'Task ID',\n              field: 'id',\n              render: row => (\n                React.createElement(Link, { to: `${rootLink()}/tasks/${row.id}`,}, row.id)\n              ),\n            },\n            {\n              title: 'Template',\n              render: row => (\n                React.createElement(TemplateTitleColumn, {\n                  entityRef: row.spec.templateInfo?.entityRef,}\n                )\n              ),\n            },\n            {\n              title: 'Created',\n              field: 'createdAt',\n              render: row => React.createElement(CreatedAtColumn, { createdAt: row.createdAt,} ),\n            },\n            {\n              title: 'Owner',\n              field: 'createdBy',\n              render: row => (\n                React.createElement(OwnerEntityColumn, { entityRef: row.spec?.user?.ref,} )\n              ),\n            },\n            {\n              title: 'Status',\n              field: 'status',\n              render: row => React.createElement(TaskStatusColumn, { status: row.status,} ),\n            },\n          ],}\n        )\n      )\n    )\n  );\n};\n\nexport const ListTasksPage = (props) => {\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        pageTitleOverride: \"Templates Tasks\" ,\n        title: \n          React.createElement(React.Fragment, null, \"List template tasks \"\n               , React.createElement(Lifecycle, { shorthand: true, alpha: true,} )\n          )\n        ,\n        subtitle: \"All tasks that have been started\"     ,}\n      )\n      , React.createElement(Content, null\n        , React.createElement(ListTaskPageContent, { ...props,} )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Routes, Route, useOutlet, Navigate } from 'react-router';\n\n\nimport { ScaffolderPage } from './ScaffolderPage';\nimport { TemplatePage } from './TemplatePage';\nimport { TaskPage } from './TaskPage';\nimport { ActionsPage } from './ActionsPage';\nimport { SecretsContextProvider } from './secrets/SecretsContext';\nimport { TemplateEditorPage } from './TemplateEditorPage';\n\nimport {\n\n  FIELD_EXTENSION_WRAPPER_KEY,\n  FIELD_EXTENSION_KEY,\n  DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS,\n} from '../extensions';\nimport { useElementFilter } from '@backstage/core-plugin-api';\nimport {\n  actionsRouteRef,\n  editRouteRef,\n  scaffolderListTaskRouteRef,\n  scaffolderTaskRouteRef,\n  selectedTemplateRouteRef,\n} from '../routes';\nimport { ListTasksPage } from './ListTasksPage';\n\n/**\n * The props for the entrypoint `ScaffolderPage` component the plugin.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The main entrypoint `Router` for the `ScaffolderPlugin`.\n *\n * @public\n */\nexport const Router = (props) => {\n  const { groups, components = {}, defaultPreviewTemplate } = props;\n\n  const { TemplateCardComponent, TaskPageComponent } = components;\n\n  const outlet = useOutlet();\n  const TaskPageElement = TaskPageComponent ?? TaskPage;\n\n  const customFieldExtensions = useElementFilter(outlet, elements =>\n    elements\n      .selectByComponentData({\n        key: FIELD_EXTENSION_WRAPPER_KEY,\n      })\n      .findComponentData({\n        key: FIELD_EXTENSION_KEY,\n      }),\n  );\n\n  const fieldExtensions = [\n    ...customFieldExtensions,\n    ...DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS.filter(\n      ({ name }) =>\n        !customFieldExtensions.some(\n          customFieldExtension => customFieldExtension.name === name,\n        ),\n    ),\n  ];\n\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, {\n        element: \n          React.createElement(ScaffolderPage, {\n            groups: groups,\n            TemplateCardComponent: TemplateCardComponent,\n            contextMenu: props.contextMenu,}\n          )\n        ,}\n      )\n      , React.createElement(Route, {\n        path: selectedTemplateRouteRef.path,\n        element: \n          React.createElement(SecretsContextProvider, null\n            , React.createElement(TemplatePage, { customFieldExtensions: fieldExtensions,} )\n          )\n        ,}\n      )\n      , React.createElement(Route, {\n        path: scaffolderListTaskRouteRef.path,\n        element: React.createElement(ListTasksPage, null ),}\n      )\n      , React.createElement(Route, { path: scaffolderTaskRouteRef.path, element: React.createElement(TaskPageElement, null ),} )\n      , React.createElement(Route, { path: actionsRouteRef.path, element: React.createElement(ActionsPage, null ),} )\n      , React.createElement(Route, {\n        path: editRouteRef.path,\n        element: \n          React.createElement(SecretsContextProvider, null\n            , React.createElement(TemplateEditorPage, {\n              defaultPreviewTemplate: defaultPreviewTemplate,\n              customFieldExtensions: fieldExtensions,}\n            )\n          )\n        ,}\n      )\n\n      , React.createElement(Route, { path: \"preview\", element: React.createElement(Navigate, { to: \"../edit\",} ),} )\n    )\n  );\n};\n"],"sourceRoot":""}