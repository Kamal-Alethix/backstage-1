{"version":3,"sources":["webpack://example-app/../node_modules/@material-ui/icons/ZoomOutMap.js","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/components/GroupsExplorerContent/GroupsDiagram.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/components/GroupsExplorerContent/GroupsExplorerContent.tsx"],"names":[],"mappings":"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","file":"static/5423.171aebc0.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z\"\n}), 'ZoomOutMap');\n\nexports.default = _default;","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  parseEntityRef,\n  RELATION_CHILD_OF,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  DependencyGraph,\n  DependencyGraphTypes,\n  Link,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\nimport { configApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport {\n  catalogApiRef,\n  entityRouteRef,\n  humanizeEntityRef,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\n\nimport { makeStyles, Typography, useTheme } from '@material-ui/core';\nimport ZoomOutMap from '@material-ui/icons/ZoomOutMap';\nimport classNames from 'classnames';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\nconst useStyles = makeStyles((theme) => ({\n  graph: {\n    flex: 1,\n    minHeight: 0,\n  },\n  organizationNode: {\n    fill: theme.palette.secondary.light,\n    stroke: theme.palette.secondary.light,\n  },\n  groupNode: {\n    fill: theme.palette.primary.light,\n    stroke: theme.palette.primary.light,\n  },\n  centeredContent: {\n    padding: theme.spacing(1),\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'black',\n  },\n  textOrganization: {\n    color: theme.palette.secondary.contrastText,\n  },\n  textGroup: {\n    color: theme.palette.primary.contrastText,\n  },\n  textWrapper: {\n    display: '-webkit-box',\n    WebkitBoxOrient: 'vertical',\n    WebkitLineClamp: 2,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    fontSize: '20px',\n  },\n}));\n\nfunction RenderNode(props) {\n  const nodeWidth = 180;\n  const nodeHeight = 60;\n  const theme = useTheme();\n  const classes = useStyles();\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n\n  if (props.node.id === 'root') {\n    return (\n      React.createElement('g', null\n        , React.createElement('rect', {\n          width: nodeWidth,\n          height: nodeHeight,\n          rx: theme.shape.borderRadius,\n          className: classes.organizationNode,}\n        )\n        , React.createElement('title', null, props.node.name)\n        , React.createElement('foreignObject', { width: nodeWidth, height: nodeHeight,}\n          , React.createElement('div', { className: classes.centeredContent,}\n            , React.createElement('div', {\n              className: classNames(\n                classes.textWrapper,\n                classes.textOrganization,\n              ),}\n            \n              , props.node.name\n            )\n          )\n        )\n      )\n    );\n  }\n\n  const ref = parseEntityRef(props.node.id);\n\n  return (\n    React.createElement('g', null\n      , React.createElement('rect', {\n        width: nodeWidth,\n        height: nodeHeight,\n        rx: theme.shape.borderRadius,\n        className: classes.groupNode,}\n      )\n      , React.createElement('title', null, props.node.name)\n\n      , React.createElement(Link, {\n        to: catalogEntityRoute({\n          kind: ref.kind,\n          namespace: ref.namespace,\n          name: ref.name,\n        }),}\n      \n        , React.createElement('foreignObject', { width: nodeWidth, height: nodeHeight,}\n          , React.createElement('div', { className: classes.centeredContent,}\n            , React.createElement('div', { className: classNames(classes.textWrapper, classes.textGroup),}\n              , props.node.name\n            )\n          )\n        )\n      )\n    )\n  );\n}\n\n/**\n * Dynamically generates a diagram of groups registered in the catalog.\n */\nexport function GroupsDiagram() {\n  const nodes = new Array\n\n\n\n();\n  const edges = new Array();\n\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const organizationName =\n    configApi.getOptionalString('organization.name') ?? 'Backstage';\n  const {\n    loading,\n    error,\n    value: catalogResponse,\n  } = useAsync(() => {\n    return catalogApi.getEntities({\n      filter: {\n        kind: ['Group'],\n      },\n    });\n  }, [catalogApi]);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  // the root of this diagram is the organization\n  nodes.push({\n    id: 'root',\n    kind: 'Organization',\n    name: organizationName,\n  });\n\n  for (const catalogItem of catalogResponse?.items || []) {\n    const currentItemId = stringifyEntityRef(catalogItem);\n\n    nodes.push({\n      id: stringifyEntityRef(catalogItem),\n      kind: catalogItem.kind,\n      name:\n        (catalogItem ).spec?.profile?.displayName ||\n        humanizeEntityRef(catalogItem, { defaultKind: 'Group' }),\n    });\n\n    // Edge to parent\n    const catalogItemRelations_childOf = getEntityRelations(\n      catalogItem,\n      RELATION_CHILD_OF,\n    );\n\n    // if no parent is found, link the node to the root\n    if (catalogItemRelations_childOf.length === 0) {\n      edges.push({\n        from: currentItemId,\n        to: 'root',\n        label: '',\n      });\n    }\n\n    catalogItemRelations_childOf.forEach(relation => {\n      edges.push({\n        from: currentItemId,\n        to: stringifyEntityRef(relation),\n        label: '',\n      });\n    });\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DependencyGraph, {\n        nodes: nodes,\n        edges: edges,\n        nodeMargin: 10,\n        direction: DependencyGraphTypes.Direction.RIGHT_LEFT,\n        renderNode: RenderNode,\n        className: classes.graph,}\n      )\n      , React.createElement(Typography, {\n        variant: \"caption\",\n        style: { display: 'block', textAlign: 'right' },}\n      \n        , React.createElement(ZoomOutMap, { style: { verticalAlign: 'bottom' },} ), \" Use pinch & zoom to move around the diagram.\"\n\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { GroupsDiagram } from './GroupsDiagram';\nimport {\n  Content,\n  ContentHeader,\n  SupportButton,\n} from '@backstage/core-components';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100%',\n    maxHeight: '100%',\n    minHeight: 0,\n  },\n});\n\n\n\n\n\nexport const GroupsExplorerContent = ({\n  title,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Content, { noPadding: true, stretch: true, className: classes.root,}\n      , React.createElement(ContentHeader, { title: title ?? 'Groups',}\n        , React.createElement(SupportButton, null, \"Explore your groups.\"  )\n      )\n\n      , React.createElement(GroupsDiagram, null )\n    )\n  );\n};\n"],"sourceRoot":""}