{"version":3,"sources":["webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/components/ScheduleIntervalLabel/ScheduleIntervalLabel.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/components/DagTableComponent/DagTableComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/components/StatusComponent/StatusComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/components/VersionComponent/VersionComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/components/HomePage/HomePage.tsx"],"names":[],"mappings":"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","file":"static/9768.ed95e4e3.chunk.js","sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Chip from '@material-ui/core/Chip';\nimport React from 'react';\n\n\n\n\n\n\nconst timeDeltaToLabel = (delta) => {\n  let label = '';\n  const date = new Date(0);\n  date.setSeconds(delta.seconds);\n  const time = date.toISOString().substr(11, 8);\n  if (delta.days === 0) {\n    label = `${time}`;\n  } else if (delta.days === 1) {\n    label = `1 day ${time}`;\n  } else {\n    label = `${delta.days} days ${time}`;\n  }\n  return label;\n};\n\nconst relativeDeltaToLabel = (delta) => {\n  const params = Object.entries(delta)\n    .filter(o => o[0] !== '__type' && o[1] !== null && o[1] !== 0)\n    .map(o => (o[1] > 0 ? `${o[0]}=+${o[1]}` : `${o[0]}=-${o[1]}`));\n  return `relativedelta(${params})`;\n};\n\nexport const ScheduleIntervalLabel = ({ interval }) => {\n  let label = '';\n  switch (interval?.__type) {\n    case 'TimeDelta':\n      label = timeDeltaToLabel(interval);\n      break;\n    case 'RelativeDelta':\n      label = relativeDeltaToLabel(interval);\n      break;\n    case 'CronExpression':\n      label = interval.value;\n      break;\n    default:\n      label = 'None';\n  }\n  return React.createElement(Chip, { label: label, size: \"small\",} );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Progress,\n  StatusError,\n  StatusOK,\n  Table,\n\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport Box from '@material-ui/core/Box';\nimport Chip from '@material-ui/core/Chip';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport Alert from '@material-ui/lab/Alert';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { apacheAirflowApiRef } from '../../api';\n\nimport { ScheduleIntervalLabel } from '../ScheduleIntervalLabel';\n\n\n\n\n\n\nconst columns = [\n  {\n    title: 'Paused',\n    field: 'is_paused',\n    render: (row) => (\n      React.createElement(Tooltip, { title: \"Pause/Unpause DAG\" ,}\n        , React.createElement(Switch, { checked: !row.is_paused, disabled: true,} )\n      )\n    ),\n    width: '5%',\n  },\n  {\n    title: 'DAG',\n    field: 'id',\n    render: (row) => (\n      React.createElement('div', null\n        , React.createElement(Typography, { variant: \"subtitle2\", gutterBottom: true, noWrap: true,}\n          , row.id\n        )\n        , React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , row.tags?.map((tag, ix) => (\n            React.createElement(Chip, { label: tag.name, key: ix, size: \"small\",} )\n          ))\n        )\n      )\n    ),\n    width: '60%',\n  },\n  {\n    title: 'Owner',\n    field: 'owners',\n    render: (row) => (\n      React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n        , row.owners?.map((owner, ix) => (\n          React.createElement(Chip, { label: owner, key: ix, size: \"small\",} )\n        ))\n      )\n    ),\n    width: '10%',\n  },\n  {\n    title: 'Active',\n    render: (row) => (\n      React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n        , row.is_active ? React.createElement(StatusOK, null ) : React.createElement(StatusError, null )\n        , React.createElement(Typography, { variant: \"body2\",}\n          , row.is_active ? 'Active' : 'Inactive'\n        )\n      )\n    ),\n    width: '10%',\n  },\n  {\n    title: 'Schedule',\n    render: (row) => (\n      React.createElement(ScheduleIntervalLabel, { interval: row.schedule_interval,} )\n    ),\n    width: '10%',\n  },\n  {\n    title: 'Link',\n    field: 'dagUrl',\n    render: (row) => (\n      React.createElement('a', { href: row.dagUrl,}\n        , React.createElement(IconButton, { 'aria-label': \"details\",}\n          , React.createElement(OpenInBrowserIcon, null )\n        )\n      )\n    ),\n    width: '5%',\n  },\n];\n\n\n\n\n\nexport const DenseTable = ({ dags }) => {\n  return (\n    React.createElement(Table, {\n      title: \"DAGs\",\n      options: { pageSize: 5 },\n      columns: columns,\n      data: dags,}\n    )\n  );\n};\n\nexport const DagTableComponent = () => {\n  const apiClient = useApi(apacheAirflowApiRef);\n  const { value, loading, error } = useAsync(async () => {\n    return await apiClient.listDags();\n  }, []);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(Alert, { severity: \"error\",}, error.message);\n  }\n\n  const data = value?.map(el => ({\n    ...el,\n    id: el.dag_id, // table records require `id` attribute\n    dagUrl: `${apiClient.baseUrl}dag_details?dag_id=${el.dag_id}`, // construct path to DAG using `baseUrl`\n  }));\n\n  return React.createElement(DenseTable, { dags: data || [],} );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  InfoCard,\n  Progress,\n  StructuredMetadataTable,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport Alert from '@material-ui/lab/Alert';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { apacheAirflowApiRef } from '../../api';\n\n\nexport const StatusComponent = () => {\n  const apiClient = useApi(apacheAirflowApiRef);\n  const { value, loading, error } =\n    useAsync(async () => {\n      return await apiClient.getInstanceStatus();\n    }, []);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(Alert, { severity: \"error\",}, error.message);\n  }\n\n  if (value) {\n    const metadata = {\n      'Metadatabase Status': value.metadatabase.status,\n      'Scheduler Status': value.scheduler.status,\n      'Latest Scheduler Heartbeat': value.scheduler.latest_scheduler_heartbeat,\n    };\n\n    return (\n      React.createElement(InfoCard, {\n        title: \"Instance Status\" ,\n        subheader: \"Scheduler and Metadatabase Status\"   ,\n        variant: \"fullHeight\",}\n      \n        , React.createElement(StructuredMetadataTable, { metadata: metadata,} )\n      )\n    );\n  }\n  return React.createElement(Alert, { severity: \"warning\",}, \"No status information found...\"   );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  InfoCard,\n  Progress,\n  StructuredMetadataTable,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport Alert from '@material-ui/lab/Alert';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { apacheAirflowApiRef } from '../../api';\n\n\nexport const VersionComponent = () => {\n  const apiClient = useApi(apacheAirflowApiRef);\n  const { value, loading, error } =\n    useAsync(async () => {\n      return await apiClient.getInstanceVersion();\n    }, []);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(Alert, { severity: \"error\",}, error.message);\n  }\n\n  if (value) {\n    const metadata = {\n      Version: value.version,\n      'Git Version': value.git_version,\n    };\n\n    return (\n      React.createElement(InfoCard, { title: \"Instance Version\" , variant: \"fullHeight\",}\n        , React.createElement(StructuredMetadataTable, { metadata: metadata,} )\n      )\n    );\n  }\n  return React.createElement(Alert, { severity: \"warning\",}, \"No status information found...\"   );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  HeaderLabel,\n  Page,\n  SupportButton,\n} from '@backstage/core-components';\nimport { Grid } from '@material-ui/core';\nimport React from 'react';\nimport { DagTableComponent } from '../DagTableComponent';\nimport { StatusComponent } from '../StatusComponent';\nimport { VersionComponent } from '../VersionComponent';\n\nexport const HomePage = () => (\n  React.createElement(Page, { themeId: \"tool\",}\n    , React.createElement(Header, { title: \"Apache Airflow\" , subtitle: \"Workflow management platform\"  ,}\n      , React.createElement(HeaderLabel, { label: \"Lifecycle\", value: \"Alpha\",} )\n    )\n    , React.createElement(Content, null\n      , React.createElement(ContentHeader, { title: \"Overview\",}\n        , React.createElement(SupportButton, null, \"See an overview of your Apache Airflow instance, and manage workflows\"\n\n        )\n      )\n      , React.createElement(Grid, { container: true, spacing: 3, direction: \"row\",}\n        , React.createElement(Grid, { item: true, sm: 12, lg: 6,}\n          , React.createElement(VersionComponent, null )\n        )\n        , React.createElement(Grid, { item: true, sm: 12, lg: 6,}\n          , React.createElement(StatusComponent, null )\n        )\n        , React.createElement(Grid, { item: true, sm: 12,}\n          , React.createElement(DagTableComponent, null )\n        )\n      )\n    )\n  )\n);\n"],"sourceRoot":""}