{"version":3,"sources":["webpack://example-app/../app-defaults/src/defaults/apis.ts","webpack://example-app/../app-defaults/src/defaults/components.tsx","webpack://example-app/../app-defaults/src/defaults/icons.tsx","webpack://example-app/../app-defaults/src/defaults/themes.tsx","webpack://example-app/../app-defaults/src/createApp.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/extensions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsSupportButton/CostInsightsSupportButton.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationBarChartLegend.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationBarChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationAlertCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/example/forms/KubernetesMigrationDismissForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/example/alerts/KubernetesMigrationAlert.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/products.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/config.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/filters.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/loading.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/mockData.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/providers.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/testUtils/testUtils.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/example/client.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/util/examples.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/extensions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcp-projects/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/node_modules/@svgr/webpack/dist/plugins/graphiql/src/assets/graphiql.icon.svg","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/route-refs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/extensions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/assets/TemplateBackstageLogo.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/assets/TemplateBackstageLogoIcon.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/Filters/FiltersButton.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/Filters/Filters.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchFilter/hooks.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchFilter/SearchFilter.Autocomplete.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchFilter/SearchFilter.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchType/SearchType.Accordion.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchType/SearchType.Tabs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchType/SearchType.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SidebarSearch/SidebarSearch.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/sample.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/ExpandableNavigation/ExpandableNavigation.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/ReportIssue/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/ReportIssue/hooks.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/ReportIssue/IssueLink.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/ReportIssue/ReportIssue.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/TextSize/TextSize.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-module-addons-contrib/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/Settings.tsx","webpack://example-app/./src/components/advancedSettings/AdvancedSettings.tsx","webpack://example-app/./src/apis.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/badges/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/api/KafkaBackendClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/api/KubernetesBackendClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/GoogleKubernetesAuthProvider.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/ServiceAccountKubernetesAuthProvider.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/AwsKubernetesAuthProvider.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/GoogleServiceAccountAuthProvider.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/AzureKubernetesAuthProvider.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/OidcKubernetesAuthProvider.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/KubernetesAuthProviders.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/TriggerButton/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/api/RollbarClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/extensions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/todo/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/todo/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/extensions.ts","webpack://example-app/./src/components/catalog/EntityPage.tsx","webpack://example-app/./src/components/home/HomePage.tsx","webpack://example-app/./src/components/Root/LogoFull.tsx","webpack://example-app/./src/components/Root/LogoIcon.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/shortcuts/src/plugin.ts","webpack://example-app/./src/components/search/SearchModal.tsx","webpack://example-app/./src/components/Root/Root.tsx","webpack://example-app/./src/components/scaffolder/customScaffolderExtensions.tsx","webpack://example-app/./src/components/scaffolder/defaultPreviewTemplate.ts","webpack://example-app/./src/components/search/SearchPage.tsx","webpack://example-app/./src/identityProviders.ts","webpack://example-app/./src/components/techdocs/TechDocsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/plugin.ts","webpack://example-app/./src/App.tsx","webpack://example-app/./src/index.tsx","webpack://example-app/../catalog-client/src/types/api.ts","webpack://example-app/../catalog-client/src/CatalogClient.ts","webpack://example-app/../catalog-client/src/types/status.ts","webpack://example-app/../catalog-model/src/entity/constants.ts","webpack://example-app/../catalog-model/src/entity/policies/DefaultNamespaceEntityPolicy.ts","webpack://example-app/../catalog-model/src/validation/CommonValidatorFunctions.ts","webpack://example-app/../catalog-model/src/validation/ajv.ts","webpack://example-app/../catalog-model/src/validation/entityEnvelopeSchemaValidator.ts","webpack://example-app/../catalog-model/src/validation/entityKindSchemaValidator.ts","webpack://example-app/../catalog-model/src/validation/entitySchemaValidator.ts","webpack://example-app/../catalog-model/src/validation/KubernetesValidatorFunctions.ts","webpack://example-app/../catalog-model/src/validation/makeValidator.ts","webpack://example-app/../catalog-model/src/entity/policies/FieldFormatEntityPolicy.ts","webpack://example-app/../catalog-model/src/entity/policies/SchemaValidEntityPolicy.ts","webpack://example-app/../catalog-model/src/entity/ref.ts","webpack://example-app/../catalog-model/src/EntityPolicies.ts","webpack://example-app/../catalog-model/src/kinds/util.ts","webpack://example-app/../catalog-model/src/kinds/ApiEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/ComponentEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/DomainEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/GroupEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/LocationEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/relations.ts","webpack://example-app/../catalog-model/src/kinds/ResourceEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/SystemEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/kinds/UserEntityV1alpha1.ts","webpack://example-app/../catalog-model/src/location/annotation.ts","webpack://example-app/../catalog-model/src/location/helpers.ts","webpack://example-app/../core-app-api/src/apis/implementations/AlertApi/AlertApiForwarder.ts","webpack://example-app/../core-app-api/src/apis/implementations/AnalyticsApi/NoOpAnalyticsApi.ts","webpack://example-app/../core-app-api/src/apis/implementations/AppThemeApi/AppThemeSelector.ts","webpack://example-app/../config/src/reader.ts","webpack://example-app/../core-app-api/src/apis/implementations/DiscoveryApi/UrlPatternDiscovery.ts","webpack://example-app/../core-app-api/src/apis/implementations/ErrorApi/ErrorAlerter.ts","webpack://example-app/../core-app-api/src/apis/implementations/ErrorApi/ErrorApiForwarder.ts","webpack://example-app/../core-app-api/src/apis/implementations/ErrorApi/UnhandledErrorForwarder.ts","webpack://example-app/../core-app-api/src/apis/implementations/FeatureFlagsApi/LocalStorageFeatureFlags.tsx","webpack://example-app/../core-app-api/src/apis/implementations/FetchApi/createFetchApi.ts","webpack://example-app/../core-app-api/src/apis/implementations/FetchApi/IdentityAuthInjectorFetchMiddleware.ts","webpack://example-app/../core-app-api/src/apis/implementations/FetchApi/PluginProtocolResolverFetchMiddleware.ts","webpack://example-app/../core-app-api/src/apis/implementations/FetchApi/FetchMiddlewares.ts","webpack://example-app/../core-app-api/src/apis/implementations/OAuthRequestApi/OAuthPendingRequests.ts","webpack://example-app/../core-app-api/src/apis/implementations/OAuthRequestApi/OAuthRequestManager.ts","webpack://example-app/../core-app-api/src/apis/implementations/StorageApi/WebStorage.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/atlassian/AtlassianAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/bitbucket/BitbucketAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/github/GithubAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/gitlab/GitlabAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/google/GoogleAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/microsoft/MicrosoftAuth.ts","webpack://example-app/../core-app-api/src/lib/loginPopup.ts","webpack://example-app/../core-app-api/src/lib/AuthConnector/DefaultAuthConnector.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/oauth2/OAuth2.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/okta/OktaAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/onelogin/OneLoginAuth.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/saml/types.ts","webpack://example-app/../core-app-api/src/apis/implementations/auth/saml/SamlAuth.ts","webpack://example-app/../core-app-api/src/apis/system/ApiFactoryRegistry.ts","webpack://example-app/../core-app-api/src/apis/system/ApiAggregator.ts","webpack://example-app/../core-app-api/src/apis/system/ApiProvider.tsx","webpack://example-app/../core-app-api/src/apis/system/ApiResolver.ts","webpack://example-app/../core-app-api/src/extensions/traversal.ts","webpack://example-app/../core-app-api/src/plugins/collectors.ts","webpack://example-app/../core-app-api/src/routing/collectors.tsx","webpack://example-app/../core-app-api/src/routing/types.ts","webpack://example-app/../core-app-api/src/routing/RouteResolver.ts","webpack://example-app/../core-app-api/src/routing/RoutingProvider.tsx","webpack://example-app/../core-app-api/src/routing/RouteTracker.tsx","webpack://example-app/../core-app-api/src/routing/validation.ts","webpack://example-app/../core-app-api/src/app/AppContext.tsx","webpack://example-app/../core-app-api/src/apis/implementations/IdentityApi/AppIdentityProxy.ts","webpack://example-app/../core-app-api/src/app/AppThemeProvider.tsx","webpack://example-app/../core-app-api/src/app/defaultConfigLoader.ts","webpack://example-app/../core-app-api/src/apis/system/ApiRegistry.ts","webpack://example-app/../core-app-api/src/app/resolveRouteBindings.ts","webpack://example-app/../core-app-api/src/app/AppManager.tsx","webpack://example-app/../core-app-api/src/app/createSpecializedApp.tsx","webpack://example-app/../core-app-api/src/lib/AuthSessionManager/common.ts","webpack://example-app/../core-app-api/src/lib/AuthSessionManager/SessionStateTracker.ts","webpack://example-app/../core-app-api/src/lib/AuthSessionManager/RefreshingAuthSessionManager.ts","webpack://example-app/../core-app-api/src/lib/AuthSessionManager/StaticAuthSessionManager.ts","webpack://example-app/../core-app-api/src/lib/subjects.ts","webpack://example-app/../core-app-api/src/routing/FeatureFlagged.tsx","webpack://example-app/../core-app-api/src/routing/FlatRoutes.tsx","webpack://example-app/../core-components/src/components/AlertDisplay/AlertDisplay.tsx","webpack://example-app/../core-components/src/components/Avatar/utils.ts","webpack://example-app/../core-components/src/components/Avatar/Avatar.tsx","webpack://example-app/../core-components/src/components/Link/Link.tsx","webpack://example-app/../core-components/src/components/Button/Button.tsx","webpack://example-app/../core-components/src/components/CopyTextButton/CopyTextButton.tsx","webpack://example-app/../core-components/src/components/CodeSnippet/CodeSnippet.tsx","webpack://example-app/../core-components/src/components/CreateButton/CreateButton.tsx","webpack://example-app/../core-components/src/components/DependencyGraph/types.ts","webpack://example-app/../core-components/src/components/DependencyGraph/DefaultNode.tsx","webpack://example-app/../core-components/src/components/DependencyGraph/constants.ts","webpack://example-app/../core-components/src/components/DependencyGraph/Node.tsx","webpack://example-app/../core-components/src/components/DependencyGraph/DefaultLabel.tsx","webpack://example-app/../core-components/src/components/DependencyGraph/Edge.tsx","webpack://example-app/../core-components/src/components/DependencyGraph/DependencyGraph.tsx","webpack://example-app/../core-components/src/components/DismissableBanner/DismissableBanner.tsx","webpack://example-app/../core-components/src/components/EmptyState/EmptyStateImage.tsx","webpack://example-app/../core-components/src/components/EmptyState/EmptyState.tsx","webpack://example-app/../core-components/src/components/EmptyState/MissingAnnotationEmptyState.tsx","webpack://example-app/../core-components/src/components/WarningPanel/WarningPanel.tsx","webpack://example-app/../core-components/src/components/ErrorPanel/ErrorPanel.tsx","webpack://example-app/../core-components/src/components/ResponseErrorPanel/ResponseErrorPanel.tsx","webpack://example-app/../core-components/src/components/FeatureDiscovery/lib/usePortal.ts","webpack://example-app/../core-components/src/components/FeatureDiscovery/lib/useShowCallout.ts","webpack://example-app/../core-components/src/components/FeatureDiscovery/FeatureCalloutCircular.tsx","webpack://example-app/../core-components/src/components/HeaderIconLinkRow/IconLinkVertical.tsx","webpack://example-app/../core-components/src/components/HeaderIconLinkRow/HeaderIconLinkRow.tsx","webpack://example-app/../core-components/src/components/HorizontalScrollGrid/HorizontalScrollGrid.tsx","webpack://example-app/../core-components/src/components/Lifecycle/Lifecycle.tsx","webpack://example-app/../core-components/src/components/LogViewer/LogViewer.tsx","webpack://example-app/../core-components/src/components/MarkdownContent/MarkdownContent.tsx","webpack://example-app/../core-components/src/components/OAuthRequestDialog/LoginRequestListItem.tsx","webpack://example-app/../core-components/src/components/OAuthRequestDialog/OAuthRequestDialog.tsx","webpack://example-app/../core-components/src/components/OverflowTooltip/OverflowTooltip.tsx","webpack://example-app/../core-components/src/components/Progress/Progress.tsx","webpack://example-app/../core-components/src/layout/BottomLink/BottomLink.tsx","webpack://example-app/../core-components/src/layout/ErrorBoundary/ErrorBoundary.tsx","webpack://example-app/../core-components/src/layout/InfoCard/InfoCard.tsx","webpack://example-app/../core-components/src/components/ProgressBars/Gauge.tsx","webpack://example-app/../core-components/src/components/ProgressBars/GaugeCard.tsx","webpack://example-app/../core-components/src/components/ProgressBars/LinearGauge.tsx","webpack://example-app/../core-components/src/components/Select/static/ClosedDropdown.tsx","webpack://example-app/../core-components/src/components/Select/static/OpenedDropdown.tsx","webpack://example-app/../core-components/src/components/Select/Select.tsx","webpack://example-app/../core-components/src/components/SimpleStepper/SimpleStepper.tsx","webpack://example-app/../core-components/src/components/SimpleStepper/SimpleStepperFooter.tsx","webpack://example-app/../core-components/src/components/SimpleStepper/SimpleStepperStep.tsx","webpack://example-app/../core-components/src/components/Status/Status.tsx","webpack://example-app/../core-components/src/components/StructuredMetadataTable/MetadataTable.tsx","webpack://example-app/../core-components/src/components/StructuredMetadataTable/StructuredMetadataTable.tsx","webpack://example-app/../core-components/src/hooks/useQueryParamState.ts","webpack://example-app/../core-components/src/hooks/useSupportConfig.ts","webpack://example-app/../core-components/src/icons/icons.tsx","webpack://example-app/../core-components/src/components/SupportButton/SupportButton.tsx","webpack://example-app/../core-components/src/layout/Sidebar/config.ts","webpack://example-app/../core-components/src/layout/Sidebar/localStorage.ts","webpack://example-app/../core-components/src/layout/Sidebar/SidebarPinStateContext.tsx","webpack://example-app/../core-components/src/layout/Sidebar/Page.tsx","webpack://example-app/../core-components/src/layout/Sidebar/SidebarOpenStateContext.tsx","webpack://example-app/../core-components/src/layout/Sidebar/SidebarGroup.tsx","webpack://example-app/../core-components/src/layout/Sidebar/MobileSidebar.tsx","webpack://example-app/../core-components/src/layout/Sidebar/Bar.tsx","webpack://example-app/../core-components/src/layout/Sidebar/utils.ts","webpack://example-app/../core-components/src/layout/Sidebar/SidebarSubmenuItem.tsx","webpack://example-app/../core-components/src/layout/Sidebar/SidebarSubmenu.tsx","webpack://example-app/../core-components/src/layout/Sidebar/icons/DoubleArrowLeft.tsx","webpack://example-app/../core-components/src/layout/Sidebar/icons/DoubleArrowRight.tsx","webpack://example-app/../core-components/src/layout/Sidebar/Items.tsx","webpack://example-app/../core-components/src/layout/Sidebar/Intro.tsx","webpack://example-app/../core-components/src/layout/Content/Content.tsx","webpack://example-app/../core-components/src/layout/HeaderTabs/HeaderTabs.tsx","webpack://example-app/../core-components/src/components/TabbedLayout/RoutedTabs.tsx","webpack://example-app/../core-components/src/components/TabbedLayout/TabbedLayout.tsx","webpack://example-app/../core-components/src/components/Table/SubvalueCell.tsx","webpack://example-app/../core-components/src/components/Table/Filters.tsx","webpack://example-app/../core-components/src/components/Table/Table.tsx","webpack://example-app/../core-components/src/components/Tabs/TabPanel.tsx","webpack://example-app/../core-components/src/components/Tabs/TabIcon.tsx","webpack://example-app/../core-components/src/components/Tabs/Tab.tsx","webpack://example-app/../core-components/src/components/Tabs/TabBar.tsx","webpack://example-app/../core-components/src/components/Tabs/Tabs.tsx","webpack://example-app/../core-components/src/components/TrendLine/TrendLine.tsx","webpack://example-app/../core-components/src/layout/ContentHeader/ContentHeader.tsx","webpack://example-app/../core-components/src/layout/ErrorPage/MicDrop.tsx","webpack://example-app/../core-components/src/layout/ErrorPage/ErrorPage.tsx","webpack://example-app/../core-components/src/layout/Breadcrumbs/Breadcrumbs.tsx","webpack://example-app/../core-components/src/layout/Header/Header.tsx","webpack://example-app/../core-components/src/layout/HeaderLabel/HeaderLabel.tsx","webpack://example-app/../core-components/src/layout/HomepageTimer/HomepageTimer.tsx","webpack://example-app/../core-components/src/layout/ItemCard/ItemCardHeader.tsx","webpack://example-app/../core-components/src/layout/ItemCard/ItemCard.tsx","webpack://example-app/../core-components/src/layout/ItemCard/ItemCardGrid.tsx","webpack://example-app/../core-components/src/layout/Page/Page.tsx","webpack://example-app/../core-components/src/layout/Page/PageWithHeader.tsx","webpack://example-app/../core-components/src/layout/ProxiedSignInPage/types.ts","webpack://example-app/../core-components/src/layout/ProxiedSignInPage/ProxiedSignInIdentity.ts","webpack://example-app/../core-components/src/layout/ProxiedSignInPage/ProxiedSignInPage.tsx","webpack://example-app/../core-components/src/layout/SignInPage/GuestUserIdentity.ts","webpack://example-app/../core-components/src/layout/SignInPage/LegacyUserIdentity.ts","webpack://example-app/../core-components/src/layout/SignInPage/UserIdentity.ts","webpack://example-app/../core-components/src/layout/SignInPage/styles.tsx","webpack://example-app/../core-components/src/layout/SignInPage/commonProvider.tsx","webpack://example-app/../core-components/src/layout/SignInPage/guestProvider.tsx","webpack://example-app/../core-components/src/layout/SignInPage/customProvider.tsx","webpack://example-app/../core-components/src/layout/SignInPage/IdentityApiSignOutProxy.ts","webpack://example-app/../core-components/src/layout/SignInPage/providers.tsx","webpack://example-app/../core-components/src/layout/SignInPage/SignInPage.tsx","webpack://example-app/../core-components/src/layout/TabbedCard/TabbedCard.tsx","webpack://example-app/../core-plugin-api/src/analytics/AnalyticsContext.tsx","webpack://example-app/../core-plugin-api/src/analytics/Tracker.ts","webpack://example-app/../core-plugin-api/src/analytics/useAnalytics.tsx","webpack://example-app/../core-plugin-api/src/apis/definitions/auth.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/AlertApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/AnalyticsApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/AppThemeApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/ConfigApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/DiscoveryApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/ErrorApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/FeatureFlagsApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/FetchApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/IdentityApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/OAuthRequestApi.ts","webpack://example-app/../core-plugin-api/src/apis/definitions/StorageApi.ts","webpack://example-app/../core-plugin-api/src/apis/system/ApiRef.ts","webpack://example-app/../core-plugin-api/src/apis/system/helpers.ts","webpack://example-app/../core-plugin-api/src/apis/system/useApi.tsx","webpack://example-app/../core-plugin-api/src/app/useApp.tsx","webpack://example-app/../core-plugin-api/src/extensions/componentData.tsx","webpack://example-app/../core-plugin-api/src/extensions/PluginErrorBoundary.tsx","webpack://example-app/../core-plugin-api/src/extensions/extensions.tsx","webpack://example-app/../core-plugin-api/src/extensions/useElementFilter.tsx","webpack://example-app/../core-plugin-api/src/plugin/Plugin.tsx","webpack://example-app/../core-plugin-api/src/routing/types.ts","webpack://example-app/../core-plugin-api/src/routing/RouteRef.ts","webpack://example-app/../core-plugin-api/src/routing/SubRouteRef.ts","webpack://example-app/../core-plugin-api/src/routing/ExternalRouteRef.ts","webpack://example-app/../core-plugin-api/src/routing/useRouteRef.tsx","webpack://example-app/../core-plugin-api/src/routing/useRouteRefParams.ts","webpack://example-app/../errors/src/errors/assertion.ts","webpack://example-app/../errors/src/serialization/error.ts","webpack://example-app/../errors/src/errors/CustomErrorBase.ts","webpack://example-app/../errors/src/errors/common.ts","webpack://example-app/../errors/src/serialization/response.ts","webpack://example-app/../errors/src/errors/ResponseError.ts","webpack://example-app/../integration-react/src/api/ScmAuthApi.ts","webpack://example-app/../integration-react/src/api/ScmAuth.ts","webpack://example-app/../integration-react/src/api/ScmIntegrationsApi.ts","webpack://example-app/../integration-react/src/components/ScmIntegrationIcon/ScmIntegrationIcon.tsx","webpack://example-app/../integration/src/helpers.ts","webpack://example-app/../integration/src/awsS3/config.ts","webpack://example-app/../integration/src/awsS3/AwsS3Integration.ts","webpack://example-app/../integration/src/azure/AzureUrl.ts","webpack://example-app/../integration/src/azure/config.ts","webpack://example-app/../integration/src/azure/AzureIntegration.ts","webpack://example-app/../integration/src/azure/core.ts","webpack://example-app/../integration/src/bitbucket/config.ts","webpack://example-app/../integration/src/bitbucket/BitbucketIntegration.ts","webpack://example-app/../integration/src/bitbucket/core.ts","webpack://example-app/../integration/src/bitbucketCloud/config.ts","webpack://example-app/../integration/src/bitbucketCloud/BitbucketCloudIntegration.ts","webpack://example-app/../integration/src/bitbucketCloud/core.ts","webpack://example-app/../integration/src/bitbucketServer/config.ts","webpack://example-app/../integration/src/bitbucketServer/BitbucketServerIntegration.ts","webpack://example-app/../integration/src/bitbucketServer/core.ts","webpack://example-app/../integration/src/gerrit/config.ts","webpack://example-app/../integration/src/gerrit/core.ts","webpack://example-app/../integration/src/gerrit/GerritIntegration.ts","webpack://example-app/../integration/src/github/config.ts","webpack://example-app/../integration/src/github/core.ts","webpack://example-app/../integration/src/github/SingleInstanceGithubCredentialsProvider.ts","webpack://example-app/../integration/src/github/DefaultGithubCredentialsProvider.ts","webpack://example-app/../integration/src/github/GitHubIntegration.ts","webpack://example-app/../integration/src/gitlab/config.ts","webpack://example-app/../integration/src/gitlab/core.ts","webpack://example-app/../integration/src/gitlab/GitLabIntegration.ts","webpack://example-app/../integration/src/ScmIntegrations.ts","webpack://example-app/../theme/src/pageTheme.ts","webpack://example-app/../theme/src/baseTheme.ts","webpack://example-app/../theme/src/themes.ts","webpack://example-app/../version-bridge/src/lib/globalObject.ts","webpack://example-app/../version-bridge/src/lib/VersionedContext.ts","webpack://example-app/../version-bridge/src/lib/VersionedValue.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/api/ApacheAirflowApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/apache-airflow/src/api/ApacheAirflowClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApiDefinitionCard/ApiDefinitionCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/GrpcApiDefinitionWidget/GrpcApiDefinitionWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApiDefinitionCard/ApiDefinitionWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApiDefinitionCard/ApiTypeTitle.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApiExplorerPage/DefaultApiExplorerPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApiExplorerPage/ApiExplorerPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApisCards/presets.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApisCards/ConsumedApisCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApisCards/HasApisCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ApisCards/ProvidedApisCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/AsyncApiDefinitionWidget/AsyncApiDefinitionWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ComponentsCards/ConsumingComponentsCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/ComponentsCards/ProvidingComponentsCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/GraphQlDefinitionWidget/GraphQlDefinitionWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/OpenApiDefinitionWidget/OpenApiDefinitionWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/components/PlainApiDefinitionWidget/PlainApiDefinitionWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/config.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/api-docs/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops-common/src/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/api/AzureDevOpsApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/api/AzureDevOpsClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/AzurePullRequestsIcon/AzurePullRequestsIcon.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/utils/arrayHas.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/utils/equalsIgnoreCase.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/assignedToTeamFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/assignedToTeamsFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/assignedToUserFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/createdByTeamFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/createdByTeamsFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/createdByUserFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/allFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/filters/createFilter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/utils.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/AutoCompleteIcon/AutoCompleteIcon.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestCard/PullRequestCardPolicy.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestCard/PullRequestCardPolicies.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestCard/PullRequestCardReviewer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestCard/PullRequestCardReviewers.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestCard/PullRequestCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestGridColumn/PullRequestGridColumn.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/PullRequestGrid/PullRequestGrid.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/useAllTeams.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/useDashboardPullRequests.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/useRepoBuilds.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/useUserEmail.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/useUserTeamIds.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/lib/hooks/useFilterProcessor.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/components/PullRequestsPage/PullRequestsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/useProjectRepoFromEntity.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/hooks/usePullRequests.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/azure-devops/src/utils/getDurationFromDates.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/badges/src/api/BadgesClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/badges/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-common/src/permissions.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/CustomLabel.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/EntityKindIcon.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/CustomNode.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/relations.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/useEntityStore.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/useEntityRelationGraph.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/useEntityRelationNodesAndEdges.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/components/EntityRelationsGraph/EntityRelationsGraph.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-graph/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/api/CatalogImportApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/api/GitHub.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/api/CatalogImportClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/Buttons/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/DefaultImportPage/DefaultImportPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/EntityListComponent/EntityListComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/ImportInfoCard/ImportInfoCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/useImportState.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepFinishImportLocation/StepFinishImportLocation.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepPrepareSelectLocations/StepPrepareSelectLocations.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepReviewLocation/StepReviewLocation.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/ImportStepper/defaults.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/ImportStepper/ImportStepper.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepInitAnalyzeUrl/StepInitAnalyzeUrl.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepPrepareCreatePullRequest/AutocompleteTextField.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepPrepareCreatePullRequest/PreparePullRequestForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepPrepareCreatePullRequest/PreviewCatalogInfoComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepPrepareCreatePullRequest/PreviewPullRequestComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/StepPrepareCreatePullRequest/StepPrepareCreatePullRequest.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/components/helpers.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-import/src/hooks/useCatalogFilename.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/apis/StarredEntitiesApi/StarredEntitiesApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/apis/StarredEntitiesApi/MockStarredEntitiesApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/CatalogFilterLayout/CatalogFilterLayout.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntity.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/filters.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/getEntityRelations.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/getEntitySourceLocation.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/utils/isOwnerOf.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityListProvider.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityRefLink/humanize.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityRefLink/EntityRefLink.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityRefLink/EntityRefLinks.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/filters.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityTypeFilter.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useRelatedEntities.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useStarredEntities.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useStarredEntity.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityOwnership.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/hooks/useEntityPermission.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityKindPicker/EntityKindPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityLifecyclePicker/EntityLifecyclePicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityOwnerPicker/EntityOwnerPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntitySearchBar/EntitySearchBar.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTable/columns.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTable/presets.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTable/EntityTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTagPicker/EntityTagPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/EntityTypePicker/EntityTypePicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/FavoriteEntity/FavoriteEntity.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/EntityKindIcon.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/AncestryPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/common.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/ColocatedPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/util.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/JsonPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/OverviewPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/components/YamlPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/InspectEntityDialog/InspectEntityDialog.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/UnregisterEntityDialog/useUnregisterEntityDialogState.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/UnregisterEntityDialog/UnregisterEntityDialog.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/components/UserListPicker/UserListPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog-react/src/testUtils/providers.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/AboutCard/AboutField.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/AboutCard/AboutContent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/AboutCard/AboutCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogKindHeader/CatalogKindHeader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogTable/columns.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogTable/CatalogTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/apis/StarredEntitiesApi/migration.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/apis/StarredEntitiesApi/DefaultStarredEntitiesApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/CatalogSearchResultListItem/CatalogSearchResultListItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityContextMenu/EntityContextMenu.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityLayout/EntityLayout.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityOrphanWarning/DeleteEntityDialog.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityOrphanWarning/EntityOrphanWarning.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntityProcessingErrorsPanel/EntityProcessingErrorsPanel.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntitySwitch/EntitySwitch.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/EntitySwitch/conditions.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/components/FilteredEntityLayout/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/catalog/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/api/CircleCIApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/util/time.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/components/BuildWithStepsPage/lib/ActionOutput/ActionOutput.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/state/useAsyncPolling.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/state/useBuilds.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/state/useBuildWithSteps.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/components/BuildWithStepsPage/BuildWithStepsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/components/BuildsPage/lib/CITable/CITable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/components/BuildsPage/lib/Builds/Builds.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/components/BuildsPage/BuildsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/circleci/src/route-refs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/api/CloudbuildApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/api/CloudbuildClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/Cards/Cards.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/WorkflowRunDetails/useWorkflowRunsDetails.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/WorkflowRunDetails/WorkflowRunDetails.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/WorkflowRunStatus/WorkflowRunStatus.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/WorkflowRunsTable/WorkflowRunsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/useProjectName.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/components/useWorkflowRuns.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cloudbuild/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/CoverageHistoryChart/CoverageHistoryChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/FileExplorer/CodeRow.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/FileExplorer/Highlighter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/FileExplorer/FileContent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/FileExplorer/FileExplorer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/CodeCoveragePage/CodeCoveragePage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/code-coverage/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/alerts/ProjectGrowthAlert.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/alerts/UnlabeledDataflowAlert.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/api/CostInsightsApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ActionItems/ActionItemCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ActionItems/ActionItems.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertDialog.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertStatusSummary.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertStatusSummaryButton.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertInsightsHeader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertInsightsSectionHeader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertInsightsSection.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInsights/AlertInsights.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/AlertInstructionsLayout/AlertInstructionsLayout.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartLabel.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartTick.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartStepperButton.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartSteps.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartStepper.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartTooltip.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartTooltipItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/BarChart/BarChartLegend.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CopyUrlToClipboard/CopyUrlToClipboard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/grammar.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostGrowth/CostGrowth.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostGrowth/CostGrowthIndicator.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsHeader/CostInsightsHeader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsLayout/CostInsightsLayout.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsNavigation/CostInsightsNavigation.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsPage/CostInsightsThemeProvider.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsPage/selector.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsPage/CostInsightsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsPage/CostInsightsPageRoot.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsTabs/selector.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostInsightsTabs/CostInsightsTabs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/charts.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostOverviewCard/selector.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostOverviewCard/CostOverviewLegend.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostOverviewCard/CostOverviewChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/sum.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostOverviewCard/CostOverviewBreakdownChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostOverviewCard/CostOverviewHeader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CostOverviewCard/CostOverviewCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/CurrencySelect/CurrencySelect.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/LabelDataflowInstructionsPage/LabelDataflowInstructionsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/LegendItem/LegendItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/MetricSelect/MetricSelect.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/PeriodSelect/PeriodSelect.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProductInsightsCard/ProductInsightsCardList.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProductInsights/ProductInsights.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProductInsightsCard/ProductInsightsCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProductInsightsCard/ProductEntityTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProductInsightsCard/ProductEntityDialog.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProductInsightsCard/ProductInsightsChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProjectGrowthAlertCard/ProjectGrowthAlertChart.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProjectGrowthAlertCard/ProjectGrowthAlertCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProjectGrowthInstructionsPage/ProjectGrowthInstructionsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/ProjectSelect/ProjectSelect.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/UnlabeledDataflowAlertCard/UnlabeledDataflowAlertCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/components/WhyCostsMatter/WhyCostsMatter.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/config.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useConfig.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useCurrency.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/filters.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/history.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useFilters.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useGroups.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useLastCompleteBillingDate.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useLoading.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/hooks/useScroll.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/types/Duration.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/types/Alert.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/types/ChangeStatistic.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/types/Currency.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/types/Icon.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/forms/AlertAcceptForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/forms/AlertSnoozeForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/forms/AlertDismissForm.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/alerts.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/assert.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/change.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/currency.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/duration.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/formatters.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/graphs.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/loading.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/navigation.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/scroll.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/sort.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/cost-insights/src/utils/styles.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore-react/src/tools/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/components/DomainCard/DomainCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/explore/src/components/ExploreLayout/ExploreLayout.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcalendar/src/api/client.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcalendar/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcalendar/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcalendar/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcp-projects/src/api/GcpApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcp-projects/src/api/GcpClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gcp-projects/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/api/GithubActionsApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/api/GithubActionsClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/Cards/Cards.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/Cards/RecentWorkflowRunsCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunDetails/useWorkflowRunJobs.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunDetails/useWorkflowRunsDetails.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunLogs/useDownloadWorkflowRunLogs.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunLogs/WorkflowRunLogs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunDetails/WorkflowRunDetails.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunStatus/WorkflowRunStatus.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/WorkflowRunsTable/WorkflowRunsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/getProjectNameFromEntity.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/components/useWorkflowRuns.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/github-actions/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/api/gocdApi.model.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/components/GoCdBuildsTable/GoCdBuildsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/components/GoCdBuildsInsights/GoCdBuildsInsights.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/components/Select/Select.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/components/GoCdBuildsComponent/GoCdBuildsComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/api/gocdApi.client.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/gocd/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/lib/storage/StorageBucket.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/components/GraphiQLBrowser/GraphiQLBrowser.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/components/GraphiQLPage/GraphiQLPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/lib/api/GraphQLEndpoints.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/graphiql/src/lib/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/components/HomepageCompositionRoot.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/components/SettingsModal.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/home/src/components/HeaderWorldClock/HeaderWorldClock.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/api/JenkinsApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/BuildsPage/lib/Status/JenkinsRunStatus.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/Cards/Cards.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins-common/src/permissions.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/BuildsPage/lib/CITable/CITable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/useAsyncPolling.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/useBuildWithSteps.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/BuildWithStepsPage/BuildWithStepsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/components/useBuilds.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/jenkins/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/components/ConsumerGroupOffsets/useConsumerGroupsForEntity.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/components/ConsumerGroupOffsets/useConsumerGroupsOffsetsForEntity.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/components/ConsumerGroupOffsets/ConsumerGroupOffsets.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kafka/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/DeploymentsAccordions/DeploymentDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/DeploymentsAccordions/DeploymentsAccordions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/StatefulSetsAccordions/StatefulSetDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/StatefulSetsAccordions/StatefulSetsAccordions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/Cluster/Cluster.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CronJobsAccordions/CronJobsDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CronJobsAccordions/CronJobsAccordions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CustomResources/ArgoRollouts/RolloutDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CustomResources/ArgoRollouts/StepsProgress.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CustomResources/ArgoRollouts/Rollout.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CustomResources/DefaultCustomResourceDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CustomResources/DefaultCustomResource.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/CustomResources/CustomResources.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/ErrorPanel/ErrorPanel.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/ErrorReporting/ErrorReporting.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/HorizontalPodAutoscalers/HorizontalPodAutoscalerDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/IngressesAccordions/IngressDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/IngressesAccordions/IngressesAccordions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/JobsAccordions/JobsDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/JobsAccordions/JobsAccordions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/error-detection/common.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/error-detection/pods.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/error-detection/deployments.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/error-detection/hpas.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/error-detection/error-detection.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/KubernetesContent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/KubernetesDrawer/KubernetesDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/Pods/PodDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/Pods/PodsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/ServicesAccordions/ServiceDrawer.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/components/ServicesAccordions/ServicesAccordions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/hooks/PodNamesWithMetrics.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/hooks/useKubernetesObjects.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/hooks/PodNamesWithErrors.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/hooks/GroupedResponses.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/hooks/Cluster.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/kubernetes-auth-provider/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/standard.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/rancher.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/openshift.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/aks.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/eks.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/gke.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatters/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/clusterLinks/formatClusterLink.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/owner.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/pod.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/kubernetes/src/utils/response.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/utils.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/SupportButton/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/Intro/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/AuditList/AuditListTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/AuditList/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/AuditView/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/CreateAudit/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/AuditList/AuditListForEntity.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/AuditStatusIcon/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/components/Cards/LastLighthouseAuditCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/lighthouse/src/hooks/useWebsiteForEntity.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/components/NewRelicDashboard/DashboardSnapshotList/DashboardSnapshotList.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/components/NewRelicDashboard/NewRelicDashboard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/api/NewRelicDashboardApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/queries/getDashboardParentGuidQuery.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/queries/getDashboardSnapshotQuery.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/api/NewRelicDashboardClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/components/NewRelicDashboard/DashboardEntityList.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/components/NewRelicDashboard/DashboardSnapshotList/DashboardSnapshot.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic-dashboard/src/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/newrelic/src/api/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/Cards/Group/MembersList/MembersListCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/Cards/Group/GroupProfile/GroupProfileCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/Cards/User/UserProfileCard/UserProfileCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/Cards/OwnershipCard/useGetEntities.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/Cards/OwnershipCard/ComponentsGrid.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/Cards/OwnershipCard/OwnershipCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/components/MyGroupsSidebarItem/MyGroupsSidebarItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/org/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/api/client.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Incident/IncidentListItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Incident/IncidentEmptyState.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Incident/Incidents.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Escalation/EscalationUsersEmptyState.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Escalation/EscalationUser.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Escalation/EscalationPolicy.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/Errors/MissingTokenError.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/ChangeEvents/ChangeEventListItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/ChangeEvents/ChangeEventEmptyState.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/ChangeEvents/ChangeEvents.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/PagerDutyCard/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/TriggerDialog/TriggerDialog.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/components/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/pagerduty/src/hooks/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/types/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/permissions/util.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/permissions/createPermission.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-common/src/PermissionClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/apis/PermissionApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/apis/IdentityPermissionApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/hooks/usePermission.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/permission-react/src/components/PermissionedRoute.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/api/RollbarApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/hooks/useProject.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/hooks/useTopActiveItems.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/utils/index.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/components/TrendGraph/TrendGraph.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/components/RollbarTopItemsTable/RollbarTopItemsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/components/RollbarProject/RollbarProject.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/components/EntityPageRollbar/EntityPageRollbar.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/components/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/rollbar/src/constants.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/hooks/useEventStream.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TaskPage/TaskPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TaskPage/IconLink.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TaskPage/TaskPageLinks.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/TemplateTypePicker/TemplateTypePicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/EntityNamePicker/EntityNamePicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/EntityNamePicker/validation.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/EntityPicker/EntityPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/EntityTagsPicker/EntityTagsPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/OwnedEntityPicker/OwnedEntityPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/OwnerPicker/OwnerPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/GithubRepoPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/GitlabRepoPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/AzureRepoPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/BitbucketRepoPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/GerritRepoPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/RepoUrlPickerHost.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/utils.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/RepoUrlPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/fields/RepoUrlPicker/validation.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/components/secrets/SecretsContext.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/extensions/default.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/extensions/index.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/scaffolder/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search-react/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search-react/src/components/HighlightedSearchResultText/HighlightedSearchResultText.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search-react/src/context/SearchContext.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/DefaultResultListItem/DefaultResultListItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchTracker/SearchTracker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchBar/SearchBar.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchModal/SearchModal.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchModal/useSearchModal.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/LegacySearchPage/LegacySearchBar.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/LegacySearchPage/Filters/FiltersButton.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/LegacySearchPage/Filters/Filters.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/LegacySearchPage/LegacySearchPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchPage/SearchPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchResult/SearchResult.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/components/SearchResultPager/SearchResultPager.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/apis.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/search/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/api/mock/mock-api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/api/sentry-api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/api/production-api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/components/ErrorCell/ErrorCell.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/components/ErrorGraph/ErrorGraph.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/components/SentryIssuesTable/SentryIssuesTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/components/useProjectSlug.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/sentry/src/components/SentryIssuesWidget/SentryIssuesWidget.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/shortcuts/src/api/LocalStoredShortcuts.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/shortcuts/src/api/ShortcutApi.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarGrid/RadarGrid.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/utils/components.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarDescription/RadarDescription.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarEntry/RadarEntry.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarBubble/RadarBubble.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarFooter/RadarFooter.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarLegend/RadarLegend.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarPlot/RadarPlot.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/utils/segment.js","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/Radar/utils.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/Radar/Radar.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarComponent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/tech-radar/src/components/RadarPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/addons.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/api.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/context.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/component.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs-react/src/hooks.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/EntityPageDocs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/Router.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/client.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/helpers.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/DefaultTechDocsHome.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Grids/DocsCardGrid.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Grids/EntityListDocsGrid.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/actions.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/columns.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/DocsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/Tables/EntityListDocsTable.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/TechDocsIndexPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/TechDocsPageWrapper.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/home/components/TechDocsPicker.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/plugin.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPage/TechDocsReaderPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsBuildLogs.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsNotFound.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsStateIndicator.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/html/hooks/links.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/html/hooks/iframes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/html/transformer.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/variables.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/reset.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/layout.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/typeset.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/animations.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/extensions.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/rules/rules.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/styles/transformer.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addBaseUrl.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addGitFeedbackLink.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addSidebarToggle.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/rewriteDocLinks.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/addLinkClickListener.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/copyToClipboard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/removeMkdocsHeader.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/simplifyMkdocsFooter.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/onCssReady.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/scrollIntoAnchor.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/transformers/transformer.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageContent/dom.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageContent/TechDocsReaderPageContentAddons.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageContent/TechDocsReaderPageContent.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageHeader/TechDocsReaderPageHeader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderPageSubheader/TechDocsReaderPageSubheader.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/useReaderState.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/reader/components/TechDocsReaderProvider.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/routes.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/search/components/TechDocsSearchResultListItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/techdocs/src/search/components/TechDocsSearch.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/todo/src/api/TodoClient.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/todo/src/api/types.ts","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/AuthProviders/EmptyProviders.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/AuthProviders/ProviderSettingsItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/AuthProviders/DefaultProviderSettings.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/AuthProviders/UserSettingsAuthProviders.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/FeatureFlags/EmptyFlags.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/FeatureFlags/FeatureFlagsItem.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/FeatureFlags/UserSettingsFeatureFlags.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsSignInAvatar.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsMenu.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsProfileCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsPinToggle.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsThemeToggle.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsAppearanceCard.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/General/UserSettingsGeneral.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/SettingsPage.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/UserSettingsTab/UserSettingsTab.tsx","webpack://example-app/../node_modules/@sucrase/webpack-loader/dist/plugins/user-settings/src/components/useUserProfileInfo.ts","webpack://example-app//root/backstage/packages/node_modules/moment/locale|sync|/^\\.\\/.*$/"],"names":[],"mappings":"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,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,GACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,GACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ,IACV,EACA,CACE,KAAM,aACN,OAAQ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","file":"static/main.c1f8a4eb.js","sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AlertApiForwarder,\n  NoOpAnalyticsApi,\n  ErrorApiForwarder,\n  ErrorAlerter,\n  GoogleAuth,\n  GithubAuth,\n  OktaAuth,\n  GitlabAuth,\n  MicrosoftAuth,\n  BitbucketAuth,\n  OAuthRequestManager,\n  WebStorage,\n  UrlPatternDiscovery,\n  OneLoginAuth,\n  UnhandledErrorForwarder,\n  AtlassianAuth,\n  createFetchApi,\n  FetchMiddlewares,\n} from '@backstage/core-app-api';\n\nimport {\n  createApiFactory,\n  alertApiRef,\n  analyticsApiRef,\n  errorApiRef,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n  oauthRequestApiRef,\n  googleAuthApiRef,\n  githubAuthApiRef,\n  oktaAuthApiRef,\n  gitlabAuthApiRef,\n  microsoftAuthApiRef,\n  storageApiRef,\n  configApiRef,\n  oneloginAuthApiRef,\n  bitbucketAuthApiRef,\n  atlassianAuthApiRef,\n} from '@backstage/core-plugin-api';\nimport {\n  permissionApiRef,\n  IdentityPermissionApi,\n} from '@backstage/plugin-permission-react';\n\nexport const apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) =>\n      UrlPatternDiscovery.compile(\n        `${configApi.getString('backend.baseUrl')}/api/{{ pluginId }}`,\n      ),\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder(),\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi(),\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    },\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi }),\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef,\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi,\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi,\n          }),\n        ],\n      });\n    },\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager(),\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GoogleAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      MicrosoftAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GithubAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        defaultScopes: ['read:user'],\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OktaAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GitlabAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OneLoginAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      BitbucketAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        defaultScopes: ['team'],\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      });\n    },\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef,\n    },\n    factory: ({ config, discovery, identity }) =>\n      IdentityPermissionApi.create({ config, discovery, identity }),\n  }),\n];\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport Button from '@material-ui/core/Button';\nimport { ErrorPanel, Progress, ErrorPage } from '@backstage/core-components';\nimport {\n  MemoryRouter,\n  useInRouterContext,\n  BrowserRouter,\n} from 'react-router-dom';\n\n\n\n\n\n\nexport function OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return React.createElement(React.Fragment, null, children);\n  }\n  return React.createElement(MemoryRouter, null, children);\n}\n\nconst DefaultNotFoundPage = () => (\n  React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\"  ,} )\n);\n\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = '';\n  if (step === 'load-config') {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === 'load-chunk') {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  // TODO: figure out a nicer way to handle routing on the error page, when it can be done.\n  return (\n    React.createElement(OptionallyWrapInRouter, null\n      , React.createElement(ErrorPage, { status: \"501\", statusMessage: message,} )\n    )\n  );\n};\n\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin,\n}) => {\n  return (\n    React.createElement(ErrorPanel, {\n      title: `Error in ${plugin?.getId()}`,\n      defaultExpanded: true,\n      error: error,}\n    \n      , React.createElement(Button, { variant: \"outlined\", onClick: resetError,}, \"Retry\"\n\n      )\n    )\n  );\n};\n\n/**\n * Creates a set of default components to pass along to {@link @backstage/core-app-api#createSpecializedApp}.\n *\n * @public\n */\nexport const components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback,\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\n\nexport const icons = {\n  brokenImage: MuiBrokenImageIcon ,\n  // To be confirmed: see https://github.com/backstage/backstage/issues/4970\n  catalog: MuiMenuBookIcon ,\n  scaffolder: MuiCreateNewFolderIcon ,\n  techdocs: MuiSubjectIcon ,\n  search: MuiSearchIcon ,\n  chat: MuiChatIcon ,\n  dashboard: MuiDashboardIcon ,\n  docs: MuiDocsIcon ,\n  email: MuiEmailIcon ,\n  github: MuiGitHubIcon ,\n  group: MuiPeopleIcon ,\n  help: MuiHelpIcon ,\n  'kind:api': MuiExtensionIcon ,\n  'kind:component': MuiMemoryIcon ,\n  'kind:domain': MuiApartmentIcon ,\n  'kind:group': MuiPeopleIcon ,\n  'kind:location': MuiLocationOnIcon ,\n  'kind:system': MuiCategoryIcon ,\n  'kind:user': MuiPersonIcon ,\n  user: MuiPersonIcon ,\n  warning: MuiWarningIcon ,\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { darkTheme, lightTheme } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\n\nexport const themes = [\n  {\n    id: 'light',\n    title: 'Light Theme',\n    variant: 'light',\n    icon: React.createElement(LightIcon, null ),\n    Provider: ({ children }) => (\n      React.createElement(ThemeProvider, { theme: lightTheme,}\n        , React.createElement(CssBaseline, null, children)\n      )\n    ),\n  },\n  {\n    id: 'dark',\n    title: 'Dark Theme',\n    variant: 'dark',\n    icon: React.createElement(DarkIcon, null ),\n    Provider: ({ children }) => (\n      React.createElement(ThemeProvider, { theme: darkTheme,}\n        , React.createElement(CssBaseline, null, children)\n      )\n    ),\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { apis, components, icons, themes } from './defaults';\n\n\n\n\n\nimport {\n\n\n\n  createSpecializedApp,\n} from '@backstage/core-app-api';\n\n/**\n * Creates a new Backstage App using a default set of components, icons and themes unless\n * they are explicitly provided.\n *\n * @public\n */\nexport function createApp(\n  options,\n) {\n  return createSpecializedApp({\n    ...options,\n    apis: options?.apis ?? [],\n    bindRoutes: options?.bindRoutes,\n    components: {\n      ...components,\n      ...options?.components,\n    },\n    configLoader: options?.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options?.icons,\n    },\n    plugins: (options?.plugins ) ?? [],\n    themes: options?.themes ?? themes,\n  });\n}\n\n/**\n * The set of app options that {@link createApp} will provide defaults for\n * if they are not passed in explicitly.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defaultDefinitionWidgets } from './components/ApiDefinitionCard';\nimport { apiDocsConfigRef } from './config';\nimport { registerComponentRouteRef, rootRoute } from './routes';\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const apiDocsPlugin = createPlugin({\n  id: 'api-docs',\n  routes: {\n    root: rootRoute,\n  },\n  apis: [\n    createApiFactory({\n      api: apiDocsConfigRef,\n      deps: {},\n      factory: () => {\n        const definitionWidgets = defaultDefinitionWidgets();\n        return {\n          getApiDefinitionWidget: (apiEntity) => {\n            return definitionWidgets.find(d => d.type === apiEntity.spec.type);\n          },\n        };\n      },\n    }),\n  ],\n  externalRoutes: {\n    registerApi: registerComponentRouteRef,\n  },\n});\n\nexport const ApiExplorerPage = apiDocsPlugin.provide(\n  createRoutableExtension({\n    name: 'ApiExplorerPage',\n    component: () =>\n      import('./components/ApiExplorerPage').then(m => m.ApiExplorerIndexPage),\n    mountPoint: rootRoute,\n  }),\n);\n\nexport const EntityApiDefinitionCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityApiDefinitionCard',\n    component: {\n      lazy: () =>\n        import('./components/ApiDefinitionCard').then(m => m.ApiDefinitionCard),\n    },\n  }),\n);\n\nexport const EntityConsumedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityConsumedApisCard',\n    component: {\n      lazy: () =>\n        import('./components/ApisCards').then(m => m.ConsumedApisCard),\n    },\n  }),\n);\n\nexport const EntityConsumingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityConsumingComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/ComponentsCards').then(\n          m => m.ConsumingComponentsCard,\n        ),\n    },\n  }),\n);\n\nexport const EntityProvidedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityProvidedApisCard',\n    component: {\n      lazy: () =>\n        import('./components/ApisCards').then(m => m.ProvidedApisCard),\n    },\n  }),\n);\n\nexport const EntityProvidingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityProvidingComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/ComponentsCards').then(\n          m => m.ProvidingComponentsCard,\n        ),\n    },\n  }),\n);\n\nexport const EntityHasApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasApisCard',\n    component: {\n      lazy: () => import('./components/ApisCards').then(m => m.HasApisCard),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const azurePullRequestDashboardRouteRef = createRouteRef({\n  id: 'azure-pull-request-dashboard',\n});\n\nexport const azurePipelinesEntityContentRouteRef = createRouteRef({\n  id: 'azure-pipelines-entity-content',\n});\n\nexport const azureGitTagsEntityContentRouteRef = createRouteRef({\n  id: 'azure-git-tags-entity-content',\n});\n\nexport const azurePullRequestsEntityContentRouteRef = createRouteRef({\n  id: 'azure-pull-requests-entity-content',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AZURE_DEVOPS_BUILD_DEFINITION_ANNOTATION,\n  AZURE_DEVOPS_PROJECT_ANNOTATION,\n  AZURE_DEVOPS_REPO_ANNOTATION,\n} from './constants';\nimport {\n  azurePipelinesEntityContentRouteRef,\n  azurePullRequestDashboardRouteRef,\n  azureGitTagsEntityContentRouteRef,\n  azurePullRequestsEntityContentRouteRef,\n} from './routes';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nimport { AzureDevOpsClient } from './api/AzureDevOpsClient';\n\nimport { azureDevOpsApiRef } from './api/AzureDevOpsApi';\n\nexport const isAzureDevOpsAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[AZURE_DEVOPS_REPO_ANNOTATION]);\n\nexport const isAzurePipelinesAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[AZURE_DEVOPS_REPO_ANNOTATION]) ||\n  (Boolean(entity.metadata.annotations?.[AZURE_DEVOPS_PROJECT_ANNOTATION]) &&\n    Boolean(\n      entity.metadata.annotations?.[AZURE_DEVOPS_BUILD_DEFINITION_ANNOTATION],\n    ));\n\nexport const azureDevOpsPlugin = createPlugin({\n  id: 'azureDevOps',\n  apis: [\n    createApiFactory({\n      api: azureDevOpsApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new AzureDevOpsClient({ discoveryApi, identityApi }),\n    }),\n  ],\n});\n\nexport const AzurePullRequestsPage = azureDevOpsPlugin.provide(\n  createRoutableExtension({\n    name: 'AzurePullRequestsPage',\n    component: () =>\n      import('./components/PullRequestsPage').then(m => m.PullRequestsPage),\n    mountPoint: azurePullRequestDashboardRouteRef,\n  }),\n);\n\nexport const EntityAzurePipelinesContent = azureDevOpsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityAzurePipelinesContent',\n    component: () =>\n      import('./components/EntityPageAzurePipelines').then(\n        m => m.EntityPageAzurePipelines,\n      ),\n    mountPoint: azurePipelinesEntityContentRouteRef,\n  }),\n);\n\nexport const EntityAzureGitTagsContent = azureDevOpsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityAzureGitTagsContent',\n    component: () =>\n      import('./components/EntityPageAzureGitTags').then(\n        m => m.EntityPageAzureGitTags,\n      ),\n    mountPoint: azureGitTagsEntityContentRouteRef,\n  }),\n);\n\nexport const EntityAzurePullRequestsContent = azureDevOpsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityAzurePullRequestsContent',\n    component: () =>\n      import('./components/EntityPageAzurePullRequests').then(\n        m => m.EntityPageAzurePullRequests,\n      ),\n    mountPoint: azurePullRequestsEntityContentRouteRef,\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createPlugin } from '@backstage/core-plugin-api';\nimport { catalogEntityRouteRef, catalogGraphRouteRef } from './routes';\n\n/**\n * Catalog Graph Plugin instance.\n * @public\n */\nexport const catalogGraphPlugin = createPlugin({\n  id: 'catalog-graph',\n  routes: {\n    catalogGraph: catalogGraphRouteRef,\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef,\n  },\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createComponentExtension,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\nimport { catalogGraphPlugin } from './plugin';\nimport { catalogGraphRouteRef } from './routes';\n\n/**\n * A card that displays the directly related entities to the current entity.\n *\n * @public\n */\nexport const EntityCatalogGraphCard = catalogGraphPlugin.provide(\n  createComponentExtension({\n    name: 'EntityCatalogGraphCard',\n    component: {\n      lazy: () =>\n        import('./components/CatalogGraphCard').then(m => m.CatalogGraphCard),\n    },\n  }),\n);\n\n/**\n * A standalone page that can be added to your application providing a viewer\n * for your entities and their relations.\n *\n * @public\n */\nexport const CatalogGraphPage = catalogGraphPlugin.provide(\n  createRoutableExtension({\n    name: 'CatalogGraphPage',\n    component: () =>\n      import('./components/CatalogGraphPage').then(m => m.CatalogGraphPage),\n    mountPoint: catalogGraphRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  configApiRef,\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport {\n  scmAuthApiRef,\n  scmIntegrationsApiRef,\n} from '@backstage/integration-react';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { catalogImportApiRef, CatalogImportClient } from './api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'catalog-import',\n});\n\n/**\n * A plugin that helps the user in importing projects and YAML files into the\n * catalog.\n *\n * @public\n */\nexport const catalogImportPlugin = createPlugin({\n  id: 'catalog-import',\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef,\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi,\n      }) =>\n        new CatalogImportClient({\n          discoveryApi,\n          scmAuthApi,\n          scmIntegrationsApi,\n          identityApi,\n          catalogApi,\n          configApi,\n        }),\n    }),\n  ],\n  routes: {\n    importPage: rootRouteRef,\n  },\n});\n\n/**\n * The page for importing projects and YAML files into the catalog.\n *\n * @public\n */\nexport const CatalogImportPage = catalogImportPlugin.provide(\n  createRoutableExtension({\n    name: 'CatalogImportPage',\n    component: () => import('./components/ImportPage').then(m => m.ImportPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPlugin,\n  createRouteRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'cost-insights',\n});\n\nexport const projectGrowthAlertRef = createRouteRef({\n  id: 'cost-insights:investigating-growth',\n});\n\nexport const unlabeledDataflowAlertRef = createRouteRef({\n  id: 'cost-insights:labeling-jobs',\n});\n\nexport const costInsightsPlugin = createPlugin({\n  id: 'cost-insights',\n  featureFlags: [{ name: 'cost-insights-currencies' }],\n  routes: {\n    root: rootRouteRef,\n    growthAlerts: projectGrowthAlertRef,\n    unlabeledDataflowAlerts: unlabeledDataflowAlertRef,\n  },\n});\n\nexport const CostInsightsPage = costInsightsPlugin.provide(\n  createRoutableExtension({\n    name: 'CostInsightsPage',\n    component: () =>\n      import('./components/CostInsightsPage').then(m => m.CostInsightsPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const CostInsightsProjectGrowthInstructionsPage =\n  costInsightsPlugin.provide(\n    createRoutableExtension({\n      name: 'CostInsightsProjectGrowthInstructionsPage',\n      component: () =>\n        import('./components/ProjectGrowthInstructionsPage').then(\n          m => m.ProjectGrowthInstructionsPage,\n        ),\n      mountPoint: projectGrowthAlertRef,\n    }),\n  );\n\nexport const CostInsightsLabelDataflowInstructionsPage =\n  costInsightsPlugin.provide(\n    createRoutableExtension({\n      name: 'CostInsightsLabelDataflowInstructionsPage',\n      component: () =>\n        import('./components/LabelDataflowInstructionsPage').then(\n          m => m.LabelDataflowInstructionsPage,\n        ),\n      mountPoint: unlabeledDataflowAlertRef,\n    }),\n  );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { SupportButton } from '@backstage/core-components';\n\nexport const CostInsightsSupportButton = () => {\n  return (\n    React.createElement(SupportButton, null, \"Insights into cloud costs for your organization\"\n\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { CostGrowth, LegendItem } from '../../../components';\nimport { Duration } from '../../../types';\nimport { monthOf } from '../../../utils/formatters';\n\n\n\n\n\n\n\n\nexport const KubernetesMigrationBarChartLegend = ({\n  currentProduct,\n  comparedProduct,\n  change,\n  startDate,\n}) => {\n  const theme = useTheme();\n  return (\n    React.createElement(Box, { display: \"flex\", flexDirection: \"row\",}\n      , React.createElement(Box, { marginRight: 2,}\n        , React.createElement(LegendItem, {\n          title: monthOf(startDate),\n          markerColor: theme.palette.magenta,}\n        \n          , currentProduct\n        )\n      )\n      , React.createElement(Box, { marginRight: 2,}\n        , React.createElement(LegendItem, { title: \"Estimated Cost\" , markerColor: theme.palette.yellow,}\n          , comparedProduct\n        )\n      )\n      , React.createElement(LegendItem, { title: \"Total Savings\" ,}\n        , React.createElement(CostGrowth, { change: change, duration: Duration.P30D,} )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BarChart } from '../../../components';\n\n\n\n\n\n\nimport { useTheme } from '@material-ui/core';\n\n\n\n\n\n\n\nexport const KubernetesMigrationBarChart = ({\n  currentProduct,\n  comparedProduct,\n  services,\n}) => {\n  const theme = useTheme();\n\n  const options = {\n    previousFill: theme.palette.magenta,\n    currentFill: theme.palette.yellow,\n    previousName: comparedProduct,\n    currentName: currentProduct,\n  };\n\n  const resources = services.map(service => ({\n    name: service.id,\n    previous: service.aggregation[0],\n    current: service.aggregation[1],\n  }));\n\n  return React.createElement(BarChart, { resources: resources, options: options,} );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box } from '@material-ui/core';\nimport { KubernetesMigrationBarChartLegend } from './KubernetesMigrationBarChartLegend';\nimport { KubernetesMigrationBarChart } from './KubernetesMigrationBarChart';\n\nimport { InfoCard } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\nexport const KubernetesMigrationAlertCard = ({\n  data,\n  title,\n  subheader,\n  currentProduct,\n  comparedProduct,\n}) => {\n  return (\n    React.createElement(InfoCard, { title: title, subheader: subheader,}\n      , React.createElement(Box, { display: \"flex\", flexDirection: \"column\",}\n        , React.createElement(Box, { paddingY: 1,}\n          , React.createElement(KubernetesMigrationBarChartLegend, {\n            startDate: data.startDate,\n            change: data.change,\n            currentProduct: currentProduct,\n            comparedProduct: comparedProduct,}\n          )\n        )\n        , React.createElement(Box, { paddingY: 1,}\n          , React.createElement(KubernetesMigrationBarChart, {\n            services: data.services,\n            currentProduct: currentProduct,\n            comparedProduct: comparedProduct,}\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useEffect,\n  useState,\n  forwardRef,\n\n\n} from 'react';\nimport {\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  Typography,\n} from '@material-ui/core';\n\n\nimport { findAlways } from '../../utils/assert';\n\n\n\n\n\n\n\n\n\n\nexport const KubernetesMigrationDismissForm = forwardRef\n\n\n(({ onSubmit, disableSubmit, alert }, ref) => {\n  const [services, setServices] = useState(alert.data.services);\n\n  const onFormSubmit = e => {\n    /* Remember to prevent default form behavior */\n    e.preventDefault();\n    onSubmit({ services: services });\n  };\n\n  const onCheckboxChange = (\n    e,\n    checked,\n  ) => {\n    if (checked) {\n      const service = findAlways(\n        alert.data.services,\n        s => s.id === e.target.value,\n      );\n      setServices(prevServices => prevServices.concat(service));\n    } else {\n      setServices(prevServices =>\n        prevServices.filter(p => p.id !== e.target.value),\n      );\n    }\n  };\n\n  /* Submit button is disabled by default. Use props.disableSubmit to toggle disabled state. */\n  useEffect(() => {\n    if (services.length) {\n      disableSubmit(false);\n    } else {\n      disableSubmit(true);\n    }\n  }, [services, disableSubmit]);\n\n  return (\n    /* All custom forms must accept a ref and implement an onSubmit handler. */\n    React.createElement('form', { ref: ref, onSubmit: onFormSubmit,}\n      , React.createElement(FormControl, { component: \"fieldset\", fullWidth: true,}\n        , React.createElement(Typography, { color: \"textPrimary\",}\n          , React.createElement('b', null, \"Or choose which services to dismiss this alert for.\"        )\n        )\n        , React.createElement(FormGroup, null\n          , alert.data.services.map((service, index) => (\n            React.createElement(FormControlLabel, {\n              key: `example-option-${index}`,\n              label: service.id,\n              value: service.id,\n              control: \n                React.createElement(Checkbox, {\n                  color: \"primary\",\n                  checked: services.some(p => p.id === service.id),\n                  onChange: onCheckboxChange,}\n                )\n              ,}\n            )\n          ))\n        )\n      )\n    )\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { KubernetesMigrationAlertCard } from '../components';\n\nimport {\n\n\n\n  AlertStatus,\n\n\n\n} from '../../types';\nimport {\n  KubernetesMigrationDismissForm,\n\n} from '../forms';\nimport { Lifecycle } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This is an example of an Alert implementation using optional event hooks.\n *\n * Event hooks can be used to enable users to dismiss, snooze, or accept an action item\n * - or any combination thereof. Defining a hook will generate default UI - button, dialog and\n * form. Cost Insights does not preserve client side alert state - each hook is expected to return a new set of alerts.\n *\n * Snoozed, accepted, etc. alerts should define a corresponding status property. Alerts will be aggregated\n * by status in a collapsed view below Alert Insights section and a badge will appear in Action Items\n * showing the total alerts of that status.\n *\n * Customizing Alerts\n * Default forms can be overridden in two ways - by setting a form property to null or defining a custom component.\n *\n * If a form property is set to null, the Dialog will not render a form. This can be useful in scenarios\n * where data isn't needed from the user such as when a user accepts an action item's recommendation.\n *\n * If a form property is set to a React component, the Dialog will render the form component in place of the default form.\n * Form components must return valid form elements, and accept a ref and onSubmit event handler.\n * Custom forms must implement the corresponding event hook. See /forms for example implementations.\n */\n\nexport class KubernetesMigrationAlert  {\n  api;\n  data;\n\n  subtitle =\n    'Services running on Kubernetes are estimated to save 50% or more compared to Compute Engine.';\n\n  // Dialog will not render a form if form property set to null.\n  AcceptForm = null;\n  // Overrides default Dismiss form with a custom form component.\n  DismissForm\n\n\n = KubernetesMigrationDismissForm;\n\n  constructor(api, data) {\n    this.api = api;\n    this.data = data;\n  }\n\n  get title() {\n    return (\n      React.createElement('span', null, \"Consider migrating\"\n         , ' '\n        , pluralize('service', this.data.services.length, true), \" to Kubernetes\"  , ' '\n        , React.createElement(Lifecycle, { shorthand: true,} )\n      )\n    );\n  }\n\n  get element() {\n    const subheader = `${pluralize(\n      'Service',\n      this.data.services.length,\n      true,\n    )}, sorted by cost`;\n    return (\n      React.createElement(KubernetesMigrationAlertCard, {\n        data: this.data,\n        title: \"Migrate to Kubernetes\"  ,\n        subheader: subheader,\n        currentProduct: \"Compute Engine\" ,\n        comparedProduct: \"Kubernetes\",}\n      )\n    );\n  }\n\n  /* Fires when the onSubmit event is raised on a Dismiss form. Displays custom dismiss form. */\n  async onDismissed(\n    options,\n  ) {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Dismissed,\n        },\n      ]),\n    );\n  }\n\n  /* Fires when the onSubmit event is raised on a Snooze form. Displays default snooze form. */\n  async onSnoozed(\n    options,\n  ) {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Snoozed,\n        },\n      ]),\n    );\n  }\n\n  /* Fires when the Accept button is clicked. Dialog does not render a form. See KubernetesMigrationAlert.AcceptForm */\n  async onAccepted(options) {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Accepted,\n        },\n      ]),\n    );\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { findAlways } from '../utils/assert';\n\n\n\nexport const createMockEntity = (\n  callback,\n) => {\n  const defaultEntity = {\n    id: 'test-entity',\n    aggregation: [100, 200],\n    entities: {},\n    change: {\n      ratio: 0,\n      amount: 0,\n    },\n  };\n\n  if (typeof callback === 'function') {\n    return callback({ ...defaultEntity });\n  }\n  return { ...defaultEntity };\n};\n\nexport const createMockProduct = (\n  callback,\n) => {\n  const defaultProduct = {\n    kind: 'compute-engine',\n    name: 'Compute Engine',\n  };\n  if (typeof callback === 'function') {\n    return callback({ ...defaultProduct });\n  }\n  return { ...defaultProduct };\n};\n\nexport const MockProductTypes = {\n  'compute-engine': 'Compute Engine',\n  'cloud-dataflow': 'Cloud Dataflow',\n  'cloud-storage': 'Cloud Storage',\n  'big-query': 'Big Query',\n  'big-table': 'BigTable',\n  'cloud-pub-sub': 'Cloud Pub/Sub',\n};\n\nexport const MockProducts = Object.keys(MockProductTypes).map(\n  productType =>\n    createMockProduct(() => ({\n      kind: productType,\n      name: MockProductTypes[productType],\n    })),\n);\n\nexport const MockComputeEngine = findAlways(\n  MockProducts,\n  p => p.kind === 'compute-engine',\n);\nexport const MockCloudDataflow = findAlways(\n  MockProducts,\n  p => p.kind === 'cloud-dataflow',\n);\nexport const MockCloudStorage = findAlways(\n  MockProducts,\n  p => p.kind === 'cloud-storage',\n);\nexport const MockBigQuery = findAlways(\n  MockProducts,\n  p => p.kind === 'big-query',\n);\nexport const MockBigtable = findAlways(\n  MockProducts,\n  p => p.kind === 'big-table',\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { MockProductTypes } from './products';\n\n\nexport const MockProductsConfig = {\n  keys: () => Object.keys(MockProductTypes),\n};\n\nexport const MockMetricsConfig = {\n  getOptionalString: () => 'daily-cost',\n  keys: () => ['daily-cost'],\n};\n\nexport const MockCostInsightsConfig = {\n  getConfig: () => MockProductsConfig ,\n  getOptionalConfig: () => MockMetricsConfig ,\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, } from '../types';\nimport { MockProductTypes } from './products';\n\nexport const MockProductFilters = Object.keys(\n  MockProductTypes,\n).map(productType => ({ duration: Duration.P30D, productType }));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { MockProducts } from './products';\nimport {\n  DefaultLoadingAction,\n  getDefaultState as getDefaultLoadingState,\n} from '../utils/loading';\n\nexport const MockDefaultLoadingActions = (\n  [\n    DefaultLoadingAction.UserGroups,\n    DefaultLoadingAction.CostInsightsInitial,\n    DefaultLoadingAction.CostInsightsPage,\n  ] \n).concat(MockProducts.map(product => product.kind));\n\nexport const mockDefaultLoadingState = getDefaultLoadingState(\n  MockDefaultLoadingActions,\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const MockAggregatedDailyCosts = [\n  {\n    date: '2020-08-07',\n    amount: 3500,\n  },\n  {\n    date: '2020-08-06',\n    amount: 2500,\n  },\n  {\n    date: '2020-08-05',\n    amount: 1400,\n  },\n  {\n    date: '2020-08-04',\n    amount: 3800,\n  },\n  {\n    date: '2020-08-09',\n    amount: 1900,\n  },\n  {\n    date: '2020-08-08',\n    amount: 2400,\n  },\n  {\n    date: '2020-08-03',\n    amount: 4000,\n  },\n  {\n    date: '2020-08-02',\n    amount: 3700,\n  },\n  {\n    date: '2020-08-01',\n    amount: 2500,\n  },\n  {\n    date: '2020-08-18',\n    amount: 4300,\n  },\n  {\n    date: '2020-08-17',\n    amount: 1500,\n  },\n  {\n    date: '2020-08-16',\n    amount: 3600,\n  },\n  {\n    date: '2020-08-15',\n    amount: 2200,\n  },\n  {\n    date: '2020-08-19',\n    amount: 3900,\n  },\n  {\n    date: '2020-08-10',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-14',\n    amount: 3600,\n  },\n  {\n    date: '2020-08-13',\n    amount: 2900,\n  },\n  {\n    date: '2020-08-12',\n    amount: 2700,\n  },\n  {\n    date: '2020-08-11',\n    amount: 5100,\n  },\n  {\n    date: '2020-09-19',\n    amount: 1200,\n  },\n  {\n    date: '2020-09-18',\n    amount: 6500,\n  },\n  {\n    date: '2020-09-17',\n    amount: 2500,\n  },\n  {\n    date: '2020-09-16',\n    amount: 1400,\n  },\n  {\n    date: '2020-09-11',\n    amount: 2300,\n  },\n  {\n    date: '2020-09-10',\n    amount: 1900,\n  },\n  {\n    date: '2020-09-15',\n    amount: 3100,\n  },\n  {\n    date: '2020-09-14',\n    amount: 4500,\n  },\n  {\n    date: '2020-09-13',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-12',\n    amount: 2800,\n  },\n  {\n    date: '2020-09-29',\n    amount: 2600,\n  },\n  {\n    date: '2020-09-28',\n    amount: 4100,\n  },\n  {\n    date: '2020-09-27',\n    amount: 3800,\n  },\n  {\n    date: '2020-09-22',\n    amount: 3700,\n  },\n  {\n    date: '2020-09-21',\n    amount: 2700,\n  },\n  {\n    date: '2020-09-20',\n    amount: 2200,\n  },\n  {\n    date: '2020-09-26',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-25',\n    amount: 4000,\n  },\n  {\n    date: '2020-09-24',\n    amount: 3800,\n  },\n  {\n    date: '2020-09-23',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-29',\n    amount: 4400,\n  },\n  {\n    date: '2020-08-28',\n    amount: 5000,\n  },\n  {\n    date: '2020-08-27',\n    amount: 4900,\n  },\n  {\n    date: '2020-08-26',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-21',\n    amount: 3700,\n  },\n  {\n    date: '2020-08-20',\n    amount: 2200,\n  },\n  {\n    date: '2020-08-25',\n    amount: 1700,\n  },\n  {\n    date: '2020-08-24',\n    amount: 2100,\n  },\n  {\n    date: '2020-08-23',\n    amount: 3100,\n  },\n  {\n    date: '2020-08-22',\n    amount: 1500,\n  },\n  {\n    date: '2020-09-08',\n    amount: 2900,\n  },\n  {\n    date: '2020-09-07',\n    amount: 4100,\n  },\n  {\n    date: '2020-09-06',\n    amount: 3600,\n  },\n  {\n    date: '2020-09-05',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-09',\n    amount: 2800,\n  },\n  {\n    date: '2020-08-31',\n    amount: 3400,\n  },\n  {\n    date: '2020-08-30',\n    amount: 4300,\n  },\n  {\n    date: '2020-09-04',\n    amount: 6100,\n  },\n  {\n    date: '2020-09-03',\n    amount: 2500,\n  },\n  {\n    date: '2020-09-02',\n    amount: 4900,\n  },\n  {\n    date: '2020-09-01',\n    amount: 6100,\n  },\n  {\n    date: '2020-09-30',\n    amount: 5500,\n  },\n];\n\nexport const MockBigQueryInsights = {\n  id: 'bigQuery',\n  aggregation: [10_000, 30_000],\n  change: {\n    ratio: 3,\n    amount: 20_000,\n  },\n  entities: {\n    dataset: [\n      {\n        id: 'dataset-a',\n        aggregation: [5_000, 10_000],\n        change: {\n          ratio: 1,\n          amount: 5_000,\n        },\n        entities: {},\n      },\n      {\n        id: 'dataset-b',\n        aggregation: [5_000, 10_000],\n        change: {\n          ratio: 1,\n          amount: 5_000,\n        },\n        entities: {},\n      },\n      {\n        id: 'dataset-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockCloudDataflowInsights = {\n  id: 'cloudDataflow',\n  aggregation: [100_000, 158_000],\n  change: {\n    ratio: 0.58,\n    amount: 58_000,\n  },\n  entities: {\n    pipeline: [\n      {\n        id: null,\n        aggregation: [10_000, 12_000],\n        change: {\n          ratio: 0.2,\n          amount: 2_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [3_000, 4_000],\n              change: {\n                ratio: 0.333333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [7_000, 8_000],\n              change: {\n                ratio: 0.14285714,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-a',\n        aggregation: [60_000, 70_000],\n        change: {\n          ratio: 0.16666666666666666,\n          amount: 10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [20_000, 15_000],\n              change: {\n                ratio: -0.25,\n                amount: -5_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [30_000, 35_000],\n              change: {\n                ratio: -0.16666666666666666,\n                amount: -5_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [10_000, 20_000],\n              change: {\n                ratio: 1,\n                amount: 10_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-b',\n        aggregation: [12_000, 8_000],\n        change: {\n          ratio: -0.33333,\n          amount: -4_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [4_000, 4_000],\n              change: {\n                ratio: 0,\n                amount: 0,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [8_000, 4_000],\n              change: {\n                ratio: -0.5,\n                amount: -4_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockCloudStorageInsights = {\n  id: 'cloudStorage',\n  aggregation: [45_000, 45_000],\n  change: {\n    ratio: 0,\n    amount: 0,\n  },\n  entities: {\n    bucket: [\n      {\n        id: 'bucket-a',\n        aggregation: [15_000, 20_000],\n        change: {\n          ratio: 0.333,\n          amount: 5_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [10_000, 11_000],\n              change: {\n                ratio: 0.1,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [2_000, 5_000],\n              change: {\n                ratio: 1.5,\n                amount: 3_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [3_000, 4_000],\n              change: {\n                ratio: 0.3333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'bucket-b',\n        aggregation: [30_000, 25_000],\n        change: {\n          ratio: -0.16666,\n          amount: -5_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [12_000, 13_000],\n              change: {\n                ratio: 0.08333333333333333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [16_000, 12_000],\n              change: {\n                ratio: -0.25,\n                amount: -4_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [2_000, 0],\n              change: {\n                amount: -2000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'bucket-c',\n        aggregation: [0, 0],\n        change: {\n          amount: 0,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockComputeEngineInsights = {\n  id: 'computeEngine',\n  aggregation: [80_000, 90_000],\n  change: {\n    ratio: 0.125,\n    amount: 10_000,\n  },\n  entities: {\n    service: [\n      {\n        id: 'service-a',\n        aggregation: [20_000, 10_000],\n        change: {\n          ratio: -0.5,\n          amount: -10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [9_000, 2_000],\n              change: {\n                ratio: -0.7777777777777778,\n                amount: -7000,\n              },\n              entities: {},\n            },\n          ],\n          deployment: [\n            {\n              id: 'Compute Engine',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Kubernetes',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'service-b',\n        aggregation: [10_000, 20_000],\n        change: {\n          ratio: 1,\n          amount: 10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [1_000, 2_000],\n              change: {\n                ratio: 1,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [4_000, 8_000],\n              change: {\n                ratio: 1,\n                amount: 4_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [5_000, 10_000],\n              change: {\n                ratio: 1,\n                amount: 5_000,\n              },\n              entities: {},\n            },\n          ],\n          deployment: [\n            {\n              id: 'Compute Engine',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Kubernetes',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'service-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockEventsInsights = {\n  id: 'events',\n  aggregation: [20_000, 10_000],\n  change: {\n    ratio: -0.5,\n    amount: -10_000,\n  },\n  entities: {\n    event: [\n      {\n        id: 'event-a',\n        aggregation: [15_000, 7_000],\n        change: {\n          ratio: -0.53333333333,\n          amount: -8_000,\n        },\n        entities: {\n          product: [\n            {\n              id: 'Mock Product A',\n              aggregation: [5_000, 2_000],\n              change: {\n                ratio: -0.6,\n                amount: -3_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product B',\n              aggregation: [7_000, 2_500],\n              change: {\n                ratio: -0.64285714285,\n                amount: -4_500,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product C',\n              aggregation: [3_000, 2_500],\n              change: {\n                ratio: -0.16666666666,\n                amount: -500,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'event-b',\n        aggregation: [5_000, 3_000],\n        change: {\n          ratio: -0.4,\n          amount: -2_000,\n        },\n        entities: {\n          product: [\n            {\n              id: 'Mock Product A',\n              aggregation: [2_000, 1_000],\n              change: {\n                ratio: -0.5,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product B',\n              aggregation: [1_000, 1_500],\n              change: {\n                ratio: 0.5,\n                amount: 500,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product C',\n              aggregation: [2_000, 500],\n              change: {\n                ratio: -0.75,\n                amount: -1_500,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n    ],\n  },\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { LoadingContext, } from '../hooks/useLoading';\nimport { GroupsContext, } from '../hooks/useGroups';\nimport { FilterContext, } from '../hooks/useFilters';\nimport { ConfigContext, } from '../hooks/useConfig';\nimport { CurrencyContext, } from '../hooks/useCurrency';\nimport {\n  BillingDateContext,\n\n} from '../hooks/useLastCompleteBillingDate';\nimport { ScrollContext, } from '../hooks/useScroll';\nimport { Duration } from '../types';\n\n\n\nexport const MockGroups = [{ id: 'tech' }, { id: 'mock-group' }];\n\n\n\n\nexport const MockFilterProvider = ({\n  children,\n  ...context\n}) => {\n  const defaultContext = {\n    pageFilters: {\n      group: 'tech',\n      project: null,\n      duration: Duration.P90D,\n      metric: null,\n    },\n    productFilters: [],\n    setPageFilters: jest.fn(),\n    setProductFilters: jest.fn(),\n  };\n  return (\n    React.createElement(FilterContext.Provider, { value: { ...defaultContext, ...context },}\n      , children\n    )\n  );\n};\n\n\n\n\nexport const MockLoadingProvider = ({\n  children,\n  ...context\n}) => {\n  const defaultContext = {\n    state: {},\n    actions: [],\n    dispatch: jest.fn(),\n  };\n  return (\n    React.createElement(LoadingContext.Provider, { value: { ...defaultContext, ...context },}\n      , children\n    )\n  );\n};\n\n\n\n\nexport const MockConfigProvider = ({\n  children,\n  ...context\n}) => {\n  const defaultContext = {\n    metrics: [],\n    products: [],\n    icons: [],\n    engineerCost: 0,\n    currencies: [],\n  };\n  return (\n    React.createElement(ConfigContext.Provider, { value: { ...defaultContext, ...context },}\n      , children\n    )\n  );\n};\n\n\n\n\nexport const MockCurrencyProvider = ({\n  children,\n  ...context\n}) => {\n  const defaultContext = {\n    currency: {\n      kind: null,\n      label: 'Engineers ',\n      unit: 'engineer',\n    },\n    setCurrency: jest.fn(),\n  };\n  return (\n    React.createElement(CurrencyContext.Provider, { value: { ...defaultContext, ...context },}\n      , children\n    )\n  );\n};\n\n\n\n\nexport const MockBillingDateProvider = ({\n  children,\n  ...context\n}) => {\n  const defaultContext = {\n    lastCompleteBillingDate: '2020-10-01',\n  };\n  return (\n    React.createElement(BillingDateContext.Provider, { value: { ...defaultContext, ...context },}\n      , children\n    )\n  );\n};\n\n\n\nexport const MockScrollProvider = ({ children }) => {\n  const defaultContext = {\n    scroll: null,\n    setScroll: jest.fn(),\n  };\n  return (\n    React.createElement(ScrollContext.Provider, { value: defaultContext,}\n      , children\n    )\n  );\n};\n\n\n\n\nexport const MockGroupsProvider = ({\n  children,\n  ...context\n}) => {\n  const defaultContext = {\n    groups: [],\n  };\n  return (\n    React.createElement(GroupsContext.Provider, { value: { ...defaultContext, ...context },}\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime } from 'luxon';\nimport regression, { } from 'regression';\nimport {\n\n\n\n\n\n  DEFAULT_DATE_FORMAT,\n} from '../types';\nimport { inclusiveEndDateOf, inclusiveStartDateOf } from '../utils/duration';\nimport {\n  MockComputeEngineInsights,\n  MockCloudDataflowInsights,\n  MockCloudStorageInsights,\n  MockBigQueryInsights,\n  MockEventsInsights,\n} from './mockData';\n\n\n\n\n\n\nfunction parseIntervals(intervals) {\n  const match = intervals.match(\n    /\\/(?<duration>P\\d+[DM])\\/(?<date>\\d{4}-\\d{2}-\\d{2})/,\n  );\n  if (Object.keys(match?.groups || {}).length !== 2) {\n    throw new Error(`Invalid intervals: ${intervals}`);\n  }\n  const { duration, date } = match.groups;\n  return {\n    duration: duration ,\n    endDate: date,\n  };\n}\n\nexport function aggregationFor(\n  intervals,\n  baseline,\n) {\n  const { duration, endDate } = parseIntervals(intervals);\n  const inclusiveEndDate = inclusiveEndDateOf(duration, endDate);\n  const days = DateTime.fromISO(endDate).diff(\n    DateTime.fromISO(inclusiveStartDateOf(duration, inclusiveEndDate)),\n    'days',\n  ).days;\n\n  function nextDelta() {\n    const varianceFromBaseline = 0.15;\n    // Let's give positive vibes in trendlines - higher change for positive delta with >0.5 value\n    const positiveTrendChance = 0.55;\n    const normalization = positiveTrendChance - 1;\n    return baseline * (Math.random() + normalization) * varianceFromBaseline;\n  }\n\n  return [...Array(days).keys()].reduce(\n    (values, i) => {\n      const last = values.length ? values[values.length - 1].amount : baseline;\n      const date = DateTime.fromISO(\n        inclusiveStartDateOf(duration, inclusiveEndDate),\n      )\n        .plus({ days: i })\n        .toFormat(DEFAULT_DATE_FORMAT);\n      const amount = Math.max(0, last + nextDelta());\n      values.push({\n        date: date,\n        amount: amount,\n      });\n      return values;\n    },\n    [],\n  );\n}\n\nexport function changeOf(aggregation) {\n  const firstAmount = aggregation.length ? aggregation[0].amount : 0;\n  const lastAmount = aggregation.length\n    ? aggregation[aggregation.length - 1].amount\n    : 0;\n\n  // if either the first or last amounts are zero, the rate of increase/decrease is infinite\n  if (!firstAmount || !lastAmount) {\n    return {\n      amount: lastAmount - firstAmount,\n    };\n  }\n\n  return {\n    ratio: (lastAmount - firstAmount) / firstAmount,\n    amount: lastAmount - firstAmount,\n  };\n}\n\nexport function trendlineOf(aggregation) {\n  const data = aggregation.map(a => [\n    Date.parse(a.date) / 1000,\n    a.amount,\n  ]);\n  const result = regression.linear(data, { precision: 5 });\n  return {\n    slope: result.equation[0],\n    intercept: result.equation[1],\n  };\n}\n\nexport function entityOf(product) {\n  switch (product) {\n    case 'computeEngine':\n      return MockComputeEngineInsights;\n    case 'cloudDataflow':\n      return MockCloudDataflowInsights;\n    case 'cloudStorage':\n      return MockCloudStorageInsights;\n    case 'bigQuery':\n      return MockBigQueryInsights;\n    case 'events':\n      return MockEventsInsights;\n    default:\n      throw new Error(\n        `Cannot get insights for ${product}. Make sure product matches product property in app-info.yaml`,\n      );\n  }\n}\n\nexport const getGroupedProducts = (intervals) => [\n  {\n    id: 'Cloud Dataflow',\n    aggregation: aggregationFor(intervals, 1_700),\n  },\n  {\n    id: 'Compute Engine',\n    aggregation: aggregationFor(intervals, 350),\n  },\n  {\n    id: 'Cloud Storage',\n    aggregation: aggregationFor(intervals, 1_300),\n  },\n  {\n    id: 'BigQuery',\n    aggregation: aggregationFor(intervals, 2_000),\n  },\n  {\n    id: 'Cloud SQL',\n    aggregation: aggregationFor(intervals, 750),\n  },\n  {\n    id: 'Cloud Spanner',\n    aggregation: aggregationFor(intervals, 50),\n  },\n  {\n    id: 'Cloud Pub/Sub',\n    aggregation: aggregationFor(intervals, 1_000),\n  },\n  {\n    id: 'Cloud Bigtable',\n    aggregation: aggregationFor(intervals, 250),\n  },\n];\n\nexport const getGroupedProjects = (intervals) => [\n  {\n    id: 'project-a',\n    aggregation: aggregationFor(intervals, 1_700),\n  },\n  {\n    id: 'project-b',\n    aggregation: aggregationFor(intervals, 350),\n  },\n  {\n    id: 'project-c',\n    aggregation: aggregationFor(intervals, 1_300),\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-restricted-imports */\n\nimport { DateTime } from 'luxon';\n\nimport {\n\n\n  DEFAULT_DATE_FORMAT,\n\n\n\n\n\n\n} from '../types';\nimport { KubernetesMigrationAlert } from './alerts';\nimport { ProjectGrowthAlert, UnlabeledDataflowAlert } from '../alerts';\nimport {\n  aggregationFor,\n  changeOf,\n  entityOf,\n  getGroupedProducts,\n  getGroupedProjects,\n  trendlineOf,\n} from '../testUtils';\n\nexport class ExampleCostInsightsClient  {\n   request(_, res) {\n    return new Promise(resolve => setTimeout(resolve, 0, res));\n  }\n\n  getLastCompleteBillingDate() {\n    return Promise.resolve(\n      DateTime.now().minus({ days: 1 }).toFormat(DEFAULT_DATE_FORMAT),\n    );\n  }\n\n  async getUserGroups(userId) {\n    const groups = await this.request({ userId }, [\n      { id: 'pied-piper' },\n    ]);\n\n    return groups;\n  }\n\n  async getGroupProjects(group) {\n    const projects = await this.request({ group }, [\n      { id: 'project-a' },\n      { id: 'project-b' },\n      { id: 'project-c' },\n    ]);\n\n    return projects;\n  }\n\n  async getDailyMetricData(\n    metric,\n    intervals,\n  ) {\n    const aggregation = aggregationFor(intervals, 100_000).map(entry => ({\n      ...entry,\n      amount: Math.round(entry.amount),\n    }));\n\n    const cost = await this.request(\n      { metric, intervals },\n      {\n        format: 'number',\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n      },\n    );\n\n    return cost;\n  }\n\n  async getGroupDailyCost(group, intervals) {\n    const aggregation = aggregationFor(intervals, 8_000);\n    const groupDailyCost = await this.request(\n      { group, intervals },\n      {\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n        // Optional field providing cost groupings / breakdowns keyed by the type. In this example,\n        // daily cost grouped by cloud product OR by project / billing account.\n        groupedCosts: {\n          product: getGroupedProducts(intervals),\n          project: getGroupedProjects(intervals),\n        },\n      },\n    );\n\n    return groupDailyCost;\n  }\n\n  async getProjectDailyCost(project, intervals) {\n    const aggregation = aggregationFor(intervals, 1_500);\n    const projectDailyCost = await this.request(\n      { project, intervals },\n      {\n        id: 'project-a',\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n        // Optional field providing cost groupings / breakdowns keyed by the type. In this example,\n        // daily project cost grouped by cloud product.\n        groupedCosts: {\n          product: getGroupedProducts(intervals),\n        },\n      },\n    );\n\n    return projectDailyCost;\n  }\n\n  async getProductInsights(options) {\n    const productInsights = await this.request(\n      options,\n      entityOf(options.product),\n    );\n\n    return productInsights;\n  }\n\n  async getAlerts(group) {\n    const projectGrowthData = {\n      project: 'example-project',\n      periodStart: '2020-Q2',\n      periodEnd: '2020-Q3',\n      aggregation: [60_000, 120_000],\n      change: {\n        ratio: 1,\n        amount: 60_000,\n      },\n      products: [\n        { id: 'Compute Engine', aggregation: [58_000, 118_000] },\n        { id: 'Cloud Dataflow', aggregation: [1200, 1500] },\n        { id: 'Cloud Storage', aggregation: [800, 500] },\n      ],\n    };\n\n    const unlabeledDataflowData = {\n      periodStart: '2020-09-01',\n      periodEnd: '2020-09-30',\n      labeledCost: 6_200,\n      unlabeledCost: 7_000,\n      projects: [\n        {\n          id: 'example-project-1',\n          unlabeledCost: 5_000,\n          labeledCost: 3_000,\n        },\n        {\n          id: 'example-project-2',\n          unlabeledCost: 2_000,\n          labeledCost: 3_200,\n        },\n      ],\n    };\n\n    const today = DateTime.now();\n    const alerts = await this.request({ group }, [\n      new ProjectGrowthAlert(projectGrowthData),\n      new UnlabeledDataflowAlert(unlabeledDataflowData),\n      new KubernetesMigrationAlert(this, {\n        startDate: today.minus({ days: 30 }).toFormat(DEFAULT_DATE_FORMAT),\n        endDate: today.toFormat(DEFAULT_DATE_FORMAT),\n        change: {\n          ratio: 0,\n          amount: 0,\n        },\n        services: [\n          {\n            id: 'service-a',\n            aggregation: [20_000, 10_000],\n            change: {\n              ratio: -0.5,\n              amount: -10_000,\n            },\n            entities: {},\n          },\n          {\n            id: 'service-b',\n            aggregation: [30_000, 15_000],\n            change: {\n              ratio: -0.5,\n              amount: -15_000,\n            },\n            entities: {},\n          },\n        ],\n      }),\n    ]);\n\n    return alerts;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createComponentExtension,\n  createPlugin,\n} from '@backstage/core-plugin-api';\nimport { catalogIndexRouteRef } from './routes';\n\n/** @public */\nexport const orgPlugin = createPlugin({\n  id: 'org',\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef,\n  },\n});\n\n/** @public */\nexport const EntityGroupProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityGroupProfileCard',\n    component: {\n      lazy: () => import('./components').then(m => m.GroupProfileCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityMembersListCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityMembersListCard',\n    component: {\n      lazy: () => import('./components').then(m => m.MembersListCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityOwnershipCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityOwnershipCard',\n    component: {\n      lazy: () => import('./components').then(m => m.OwnershipCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityUserProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityUserProfileCard',\n    component: {\n      lazy: () => import('./components').then(m => m.UserProfileCard),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createExternalRouteRef,\n  createRouteRef,\n} from '@backstage/core-plugin-api';\n\nexport const exploreRouteRef = createRouteRef({\n  id: 'explore',\n});\n\n/**\n * @deprecated This route is no longer used and can be removed\n */\nexport const catalogEntityRouteRef = createExternalRouteRef({\n  id: 'catalog-entity',\n  params: ['namespace', 'kind', 'name'],\n  optional: true,\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const exampleTools = [\n  {\n    title: 'New Relic',\n    description:\n      'Observability platform built to help engineers create and monitor their software',\n    url: '/newrelic',\n    image: 'https://i.imgur.com/L37ikrX.jpg',\n    tags: ['newrelic', 'performance', 'monitoring', 'errors', 'alerting'],\n  },\n  {\n    title: 'CircleCI',\n    description:\n      'Provides builds overview, detailed build info and retriggering functionality for CircleCI.',\n    url: '/circleci',\n    image: 'https://miro.medium.com/max/1200/1*hkTBp22vLAqlIHkrkZHPnw.png',\n    tags: ['circleci', 'ci', 'dev'],\n  },\n  {\n    title: 'Sentry',\n    description:\n      'Self-hosted and cloud-based error monitoring that helps software teams discover, triage, and prioritize errors in real-time.',\n    url: '/sentry',\n    image: 'https://sentry-brand.storage.googleapis.com/sentry-logo-black.png',\n    tags: ['sentry', 'monitoring', 'errors'],\n  },\n  {\n    title: 'Lighthouse',\n    description:\n      \"Google's Lighthouse tool is a great resource for benchmarking and improving the accessibility, performance, SEO, and best practices of your website.\",\n    url: '/lighthouse',\n    image:\n      'https://raw.githubusercontent.com/GoogleChrome/lighthouse/8b3d7f052b2e64dd857e741d7395647f487697e7/assets/lighthouse-logo.png',\n    tags: ['web', 'seo', 'accessibility', 'performance'],\n  },\n  {\n    title: 'Tech Radar',\n    description:\n      'Tech Radar is a list of technologies, complemented by an assessment result, called ring assignment.',\n    url: '/tech-radar',\n    image:\n      'https://storage.googleapis.com/wf-blogs-engineering-media/2018/09/fe13bb32-wf-tech-radar-hero-1024x597.png',\n    tags: ['standards', 'landscape'],\n  },\n  {\n    title: 'Cost Insights',\n    description: 'Insights into cloud costs for your organization.',\n    url: '/cost-insights',\n    image: 'https://cloud.google.com/images/press/logo-cloud.png',\n    tags: ['cloud', 'finops'],\n  },\n  {\n    title: 'GraphiQL',\n    description:\n      'Integrates GraphiQL as a tool to browse GraphiQL endpoints inside Backstage.',\n    url: '/graphiql',\n    image:\n      'https://camo.githubusercontent.com/517398c3fbe0687d3d4dcbe05da82970b882e75a/68747470733a2f2f64337676366c703535716a6171632e636c6f756466726f6e742e6e65742f6974656d732f33413061324e314c3346324f304c3377326e316a2f477261706869514c382e706e673f582d436c6f75644170702d56697369746f722d49643d3433363432',\n    tags: ['graphql', 'dev'],\n  },\n  {\n    title: 'GitOps Clusters',\n    description:\n      'Create GitOps-managed clusters with Backstage. Currently supports EKS flavors and profiles like Machine Learning Ops (MLOps)',\n    url: '/gitops-clusters',\n    image: 'https://miro.medium.com/max/801/1*R28u8gj-hVdDFISoYqPhrQ.png',\n    tags: ['gitops', 'dev'],\n  },\n  {\n    title: 'Rollbar',\n    description:\n      'Error monitoring and crash reporting for agile development and continuous delivery',\n    url: '/rollbar',\n    image:\n      'https://images.ctfassets.net/cj4mgtttlyx7/4DfiWj9CbuHBi10uWK7JHn/5e94a6c5dbd5d50bdcd8d9e78f88689b/rollbar-seo.png',\n    tags: ['rollbar', 'monitoring', 'errors'],\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exploreToolsConfigRef } from '@backstage/plugin-explore-react';\nimport { catalogEntityRouteRef, exploreRouteRef } from './routes';\nimport { exampleTools } from './util/examples';\nimport { createApiFactory, createPlugin } from '@backstage/core-plugin-api';\n\nexport const explorePlugin = createPlugin({\n  id: 'explore',\n  apis: [\n    // Register a default for exploreToolsConfigRef, you may want to override\n    // the API locally in your app.\n    createApiFactory({\n      api: exploreToolsConfigRef,\n      deps: {},\n      factory: () => ({\n        async getTools() {\n          return exampleTools;\n        },\n      }),\n    }),\n  ],\n  routes: {\n    explore: exploreRouteRef,\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef,\n  },\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { explorePlugin } from './plugin';\nimport { exploreRouteRef } from './routes';\nimport {\n  createComponentExtension,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const ExplorePage = explorePlugin.provide(\n  createRoutableExtension({\n    name: 'ExplorePage',\n    component: () =>\n      import('./components/ExplorePage').then(m => m.ExplorePage),\n    mountPoint: exploreRouteRef,\n  }),\n);\n\nexport const DomainExplorerContent = explorePlugin.provide(\n  createComponentExtension({\n    name: 'DomainExplorerContent',\n    component: {\n      lazy: () =>\n        import('./components/DomainExplorerContent').then(\n          m => m.DomainExplorerContent,\n        ),\n    },\n  }),\n);\n\nexport const GroupsExplorerContent = explorePlugin.provide(\n  createComponentExtension({\n    name: 'GroupsExplorerContent',\n    component: {\n      lazy: () =>\n        import('./components/GroupsExplorerContent').then(\n          m => m.GroupsExplorerContent,\n        ),\n    },\n  }),\n);\n\nexport const ToolExplorerContent = explorePlugin.provide(\n  createComponentExtension({\n    name: 'ToolExplorerContent',\n    component: {\n      lazy: () =>\n        import('./components/ToolExplorerContent').then(\n          m => m.ToolExplorerContent,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { gcpApiRef, GcpClient } from './api';\nimport { rootRouteRef } from './routes';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  googleAuthApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const gcpProjectsPlugin = createPlugin({\n  id: 'gcp-projects',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: gcpApiRef,\n      deps: { googleAuthApi: googleAuthApiRef },\n      factory({ googleAuthApi }) {\n        return new GcpClient(googleAuthApi);\n      },\n    }),\n  ],\n});\n\nexport const GcpProjectsPage = gcpProjectsPlugin.provide(\n  createRoutableExtension({\n    name: 'GcpProjectsPage',\n    component: () =>\n      import('./components/GcpProjectsPage').then(m => m.GcpProjectsPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n","import * as React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst SvgGraphiqlIcon = props => React.createElement(SvgIcon, props, React.createElement('path', { d: \"m3.45 18.16-.864-.5 9.61-16.64.863.496Zm0 0\"   ,} ), React.createElement('path', { d: \"M2.387 16.332h19.218v.996H2.387Zm0 0\"  ,} ), React.createElement('path', { d: \"m12.383 22.441-9.613-5.55.496-.864 9.613 5.551ZM20.73 7.977l-9.613-5.551.5-.864 9.613 5.551Zm0 0\"       ,} ), React.createElement('path', { d: \"m3.27 7.973-.5-.864 9.613-5.55.5.863Zm0 0\"   ,} ), React.createElement('path', { d: \"m20.555 18.16-9.61-16.644.864-.496 9.609 16.64ZM3.148 6.45h.997v11.1h-.997Zm0 0\"     ,} ), React.createElement('path', { d: \"M19.855 6.45h.997v11.1h-.997Zm0 0\"  ,} ), React.createElement('path', { d: \"m12.21 22.02-.433-.754 8.36-4.825.433.75Zm0 0\"   ,} ), React.createElement('path', { d: \"M22.172 17.875a2.099 2.099 0 0 1-2.863.766 2.095 2.095 0 1 1 2.093-3.63 2.09 2.09 0 0 1 .77 2.864M5.453 8.219a2.095 2.095 0 1 1-3.63-2.092 2.095 2.095 0 0 1 3.63 2.092M1.828 17.875a2.103 2.103 0 0 1 .77-2.863 2.1 2.1 0 0 1 2.863.77 2.096 2.096 0 0 1-3.633 2.093M18.547 8.219a2.095 2.095 0 1 1 3.63-2.092 2.095 2.095 0 0 1-3.63 2.092M12 23.746a2.094 2.094 0 1 1 0-4.187 2.094 2.094 0 0 1 0 4.187M12 4.441a2.094 2.094 0 1 1 0-4.187 2.094 2.094 0 0 1 0 4.187\"                                                                                      ,} ));\n\nexport default SvgGraphiqlIcon;","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\n/** @public */\nexport const graphiQLRouteRef = createRouteRef({\n  id: 'graphiql-root',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPlugin,\n  createApiFactory,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\nimport { graphQlBrowseApiRef, GraphQLEndpoints } from './lib/api';\nimport { graphiQLRouteRef } from './route-refs';\n\n/** @public */\nexport const graphiqlPlugin = createPlugin({\n  id: 'graphiql',\n  apis: [\n    // GitLab is used as an example endpoint, but most will want to plug in\n    // their own instead.\n    createApiFactory(\n      graphQlBrowseApiRef,\n      GraphQLEndpoints.from([\n        GraphQLEndpoints.create({\n          id: 'gitlab',\n          title: 'GitLab',\n          url: 'https://gitlab.com/api/graphql',\n        }),\n      ]),\n    ),\n  ],\n});\n\n/** @public */\nexport const GraphiQLPage = graphiqlPlugin.provide(\n  createRoutableExtension({\n    name: 'GraphiQLPage',\n    component: () => import('./components').then(m => m.GraphiQLPage),\n    mountPoint: graphiQLRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Backstage plugin for browsing GraphQL APIs\n *\n * @packageDocumentation\n */\n\nimport GraphiQLIconComponent from './assets/graphiql.icon.svg';\n\n\nexport {\n  graphiqlPlugin,\n  graphiqlPlugin as plugin,\n  GraphiQLPage,\n} from './plugin';\nexport { GraphiQLPage as Router } from './components';\nexport * from './lib/api';\nexport * from './route-refs';\n\n/** @public */\nexport const GraphiQLIcon =\n  GraphiQLIconComponent ;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Suspense } from 'react';\nimport { IconButton } from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { InfoCard } from '@backstage/core-components';\nimport { SettingsModal } from './components';\nimport { createReactExtension, useApp } from '@backstage/core-plugin-api';\n\n/**\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An extension creator to create card based components for the homepage\n *\n * @public\n */\nexport function createCardExtension(options\n\n\n\n) {\n  const { title, components, name } = options;\n\n  return createReactExtension({\n    name,\n    component: {\n      lazy: () =>\n        components().then(({ Content, Actions, Settings, ContextProvider }) => {\n          const CardExtension = (props) => {\n            const { Renderer, title: overrideTitle, ...childProps } = props;\n            const app = useApp();\n            const { Progress } = app.getComponents();\n            const [settingsOpen, setSettingsOpen] = React.useState(false);\n\n            if (Renderer) {\n              return (\n                React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n                  , React.createElement(Renderer, {\n                    title: overrideTitle || title,\n                    ...{\n                      Content,\n                      ...(Actions ? { Actions } : {}),\n                      ...(Settings ? { Settings } : {}),\n                      ...(ContextProvider ? { ContextProvider } : {}),\n                      ...childProps,\n                    },}\n                  )\n                )\n              );\n            }\n\n            const cardProps = {\n              title: overrideTitle ?? title,\n              ...(Settings\n                ? {\n                    action: (\n                      React.createElement(IconButton, { onClick: () => setSettingsOpen(true),}\n                        , React.createElement(SettingsIcon, null, \"Settings\")\n                      )\n                    ),\n                  }\n                : {}),\n              ...(Actions\n                ? {\n                    actions: React.createElement(Actions, null ),\n                  }\n                : {}),\n            };\n\n            const innerContent = (\n              React.createElement(InfoCard, { ...cardProps,}\n                , Settings && (\n                  React.createElement(SettingsModal, {\n                    open: settingsOpen,\n                    componentName: title,\n                    close: () => setSettingsOpen(false),}\n                  \n                    , React.createElement(Settings, null )\n                  )\n                )\n                , React.createElement(Content, { ...childProps,} )\n              )\n            );\n\n            return (\n              React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n                , ContextProvider ? (\n                  React.createElement(ContextProvider, { ...childProps,}\n                    , innerContent\n                  )\n                ) : (\n                  innerContent\n                )\n              )\n            );\n          };\n          return CardExtension;\n        }),\n    },\n  });\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'home',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\nimport { createCardExtension } from './extensions';\n\n\nimport { rootRouteRef } from './routes';\n\n/** @public */\nexport const homePlugin = createPlugin({\n  id: 'home',\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\n/** @public */\nexport const HomepageCompositionRoot = homePlugin.provide(\n  createRoutableExtension({\n    name: 'HomepageCompositionRoot',\n    component: () =>\n      import('./components').then(m => m.HomepageCompositionRoot),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/** @public */\nexport const ComponentAccordion = homePlugin.provide(\n  createComponentExtension({\n    name: 'ComponentAccordion',\n    component: {\n      lazy: () =>\n        import('./componentRenderers').then(m => m.ComponentAccordion),\n    },\n  }),\n);\n\n/** @public */\nexport const ComponentTabs = homePlugin.provide(\n  createComponentExtension({\n    name: 'ComponentTabs',\n    component: {\n      lazy: () => import('./componentRenderers').then(m => m.ComponentTabs),\n    },\n  }),\n);\n\n/** @public */\nexport const ComponentTab = homePlugin.provide(\n  createComponentExtension({\n    name: 'ComponentTab',\n    component: {\n      lazy: () => import('./componentRenderers').then(m => m.ComponentTab),\n    },\n  }),\n);\n\n/**\n * A component to display a playful greeting for the user.\n *\n * @public\n */\nexport const WelcomeTitle = homePlugin.provide(\n  createComponentExtension({\n    name: 'WelcomeTitle',\n    component: {\n      lazy: () =>\n        import('./homePageComponents/WelcomeTitle').then(m => m.WelcomeTitle),\n    },\n  }),\n);\n\n/**\n * A component to display a company logo for the user.\n *\n * @public\n */\nexport const HomePageCompanyLogo = homePlugin.provide(\n  createComponentExtension({\n    name: 'CompanyLogo',\n    component: {\n      lazy: () =>\n        import('./homePageComponents/CompanyLogo').then(m => m.CompanyLogo),\n    },\n  }),\n);\n\n/** @public */\nexport const HomePageRandomJoke = homePlugin.provide(\n  createCardExtension({\n    name: 'HomePageRandomJoke',\n    title: 'Random Joke',\n    components: () => import('./homePageComponents/RandomJoke'),\n  }),\n);\n\n/**\n * A component to display a list of tools for the user.\n *\n * @public\n */\nexport const HomePageToolkit = homePlugin.provide(\n  createCardExtension({\n    name: 'HomePageToolkit',\n    title: 'Toolkit',\n    components: () => import('./homePageComponents/Toolkit'),\n  }),\n);\n\n/**\n * A component to display a list of starred entities for the user.\n *\n * @public\n */\nexport const HomePageStarredEntities = homePlugin.provide(\n  createCardExtension({\n    name: 'HomePageStarredEntities',\n    title: 'Your Starred Entities',\n    components: () => import('./homePageComponents/StarredEntities'),\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\n\n\n\n\n\n\n\n\n\nexport const TemplateBackstageLogo = (props) => {\n  return (\n    React.createElement('svg', {\n      className: props.classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2079.95 456.05\"   ,}\n    \n      , React.createElement('path', {\n        className: props.classes.path,\n        d: \"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z\",}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  svg: {\n    width: 'auto',\n    height: 28,\n  },\n  path: {\n    fill: '#7df3e1',\n  },\n});\n\nexport const TemplateBackstageLogoIcon = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('svg', {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 337.46 428.5\"   ,}\n    \n      , React.createElement('path', {\n        className: classes.path,\n        d: \"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z\",}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { lighthouseApiRef, LighthouseRestApi } from './api';\nimport {\n  createPlugin,\n  createRouteRef,\n  createApiFactory,\n  configApiRef,\n  createRoutableExtension,\n  createComponentExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'lighthouse',\n});\n\nexport const viewAuditRouteRef = createRouteRef({\n  id: 'lighthouse:audit',\n});\n\nexport const createAuditRouteRef = createRouteRef({\n  id: 'lighthouse:create-audit',\n});\n\nexport const entityContentRouteRef = createRouteRef({\n  id: 'lighthouse:entity-content',\n});\n\nexport const lighthousePlugin = createPlugin({\n  id: 'lighthouse',\n  apis: [\n    createApiFactory({\n      api: lighthouseApiRef,\n      deps: { configApi: configApiRef },\n      factory: ({ configApi }) => LighthouseRestApi.fromConfig(configApi),\n    }),\n  ],\n  routes: {\n    root: createAuditRouteRef,\n    entityContent: entityContentRouteRef,\n  },\n});\n\nexport const LighthousePage = lighthousePlugin.provide(\n  createRoutableExtension({\n    name: 'LighthousePage',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const EntityLighthouseContent = lighthousePlugin.provide(\n  createRoutableExtension({\n    name: 'EntityLighthouseContent',\n    component: () => import('./Router').then(m => m.EmbeddedRouter),\n    mountPoint: entityContentRouteRef,\n  }),\n);\n\nexport const EntityLastLighthouseAuditCard = lighthousePlugin.provide(\n  createComponentExtension({\n    name: 'EntityLastLighthouseAuditCard',\n    component: {\n      lazy: () =>\n        import('./components/Cards').then(m => m.LastLighthouseAuditCard),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NewRelicClient, newRelicApiRef } from './api';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  discoveryApiRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'newrelic',\n});\n\nexport const newRelicPlugin = createPlugin({\n  id: 'newrelic',\n  apis: [\n    createApiFactory({\n      api: newRelicApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new NewRelicClient({ discoveryApi }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\nexport const NewRelicPage = newRelicPlugin.provide(\n  createRoutableExtension({\n    name: 'NewRelicPage',\n    component: () =>\n      import('./components/NewRelicComponent').then(m => m.default),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { scaffolderApiRef, ScaffolderClient } from './api';\nimport { EntityPicker } from './components/fields/EntityPicker/EntityPicker';\nimport { entityNamePickerValidation } from './components/fields/EntityNamePicker';\nimport { EntityNamePicker } from './components/fields/EntityNamePicker/EntityNamePicker';\nimport { OwnerPicker } from './components/fields/OwnerPicker/OwnerPicker';\nimport { repoPickerValidation } from './components/fields/RepoUrlPicker';\nimport { RepoUrlPicker } from './components/fields/RepoUrlPicker/RepoUrlPicker';\nimport { createScaffolderFieldExtension } from './extensions';\nimport { registerComponentRouteRef, rootRouteRef } from './routes';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { OwnedEntityPicker } from './components/fields/OwnedEntityPicker/OwnedEntityPicker';\nimport { EntityTagsPicker } from './components/fields/EntityTagsPicker/EntityTagsPicker';\n\n/**\n * The main plugin export for the scaffolder.\n * @public\n */\nexport const scaffolderPlugin = createPlugin({\n  id: 'scaffolder',\n  apis: [\n    createApiFactory({\n      api: scaffolderApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        fetchApi: fetchApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ discoveryApi, scmIntegrationsApi, fetchApi, identityApi }) =>\n        new ScaffolderClient({\n          discoveryApi,\n          scmIntegrationsApi,\n          fetchApi,\n          identityApi,\n        }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n  externalRoutes: {\n    registerComponent: registerComponentRouteRef,\n  },\n});\n\n/**\n * A field extension for selecting an Entity that exists in the Catalog.\n *\n * @public\n */\nexport const EntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityPicker,\n    name: 'EntityPicker',\n  }),\n);\n\n/**\n * The field extension for selecting a name for a new Entity in the Catalog.\n *\n * @public\n */\nexport const EntityNamePickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityNamePicker,\n    name: 'EntityNamePicker',\n    validation: entityNamePickerValidation,\n  }),\n);\n\n/**\n * The field extension which provides the ability to select a RepositoryUrl.\n * Currently this is an encoded URL that looks something like the following `github.com?repo=myRepoName&owner=backstage`.\n *\n * @public\n */\nexport const RepoUrlPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: RepoUrlPicker,\n    name: 'RepoUrlPicker',\n    validation: repoPickerValidation,\n  }),\n);\n\n/**\n * A field extension for picking users and groups out of the Catalog.\n *\n * @public\n */\nexport const OwnerPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnerPicker,\n    name: 'OwnerPicker',\n  }),\n);\n\n/**\n * The Router and main entrypoint to the Scaffolder plugin.\n *\n * @public\n */\nexport const ScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: 'ScaffolderPage',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * A field extension to show all the Entities that are owned by the current logged-in User for use in templates.\n *\n * @public\n */\nexport const OwnedEntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnedEntityPicker,\n    name: 'OwnedEntityPicker',\n  }),\n);\n\n/**\n * EntityTagsPickerFieldExtension\n * @public\n */\nexport const EntityTagsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityTagsPicker,\n    name: 'EntityTagsPicker',\n  }),\n);\n\n/**\n * @alpha\n * The Router and main entrypoint to the Alpha Scaffolder plugin.\n */\nexport const NextScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: 'NextScaffolderPage',\n    component: () => import('./next/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { makeStyles, IconButton, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    width: '250px',\n    display: 'flex',\n  },\n  icon: {\n    margin: theme.spacing(-1, 0, 0, 0),\n  },\n}));\n\n\n\n\n\n\nexport const FiltersButton = ({\n  numberOfSelectedFilters,\n  handleToggleFilters,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.filters,}\n      , React.createElement(IconButton, {\n        className: classes.icon,\n        'aria-label': \"settings\",\n        onClick: handleToggleFilters,}\n      \n        , React.createElement(FilterListIcon, null )\n      )\n      , React.createElement(Typography, { variant: \"h6\",}, \"Filters (\"\n         , numberOfSelectedFilters ? numberOfSelectedFilters : 0, \")\"\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  makeStyles,\n  Typography,\n  Divider,\n  Card,\n  CardHeader,\n  Button,\n  CardContent,\n  Select,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemText,\n  MenuItem,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    background: 'transparent',\n    boxShadow: '0px 0px 0px 0px',\n  },\n  checkbox: {\n    padding: theme.spacing(0, 1, 0, 1),\n  },\n  dropdown: {\n    width: '100%',\n  },\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const Filters = ({\n  filters,\n  filterOptions,\n  resetFilters,\n  updateSelected,\n  updateChecked,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Card, { className: classes.filters,}\n      , React.createElement(CardHeader, {\n        title: React.createElement(Typography, { variant: \"h6\",}, \"Filters\"),\n        action: \n          React.createElement(Button, { color: \"primary\", onClick: () => resetFilters(),}, \"CLEAR ALL\"\n\n          )\n        ,}\n      )\n      , React.createElement(Divider, null )\n      , filterOptions.kind.length === 0 && filterOptions.lifecycle.length === 0 && (\n        React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"subtitle2\",}, \"Filters cannot be applied to available results\"\n\n          )\n        )\n      )\n      , filterOptions.kind.length > 0 && (\n        React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"subtitle2\",}, \"Kind\")\n          , React.createElement(Select, {\n            id: \"outlined-select\",\n            onChange: (e) =>\n              updateSelected(e?.target?.value)\n            ,\n            variant: \"outlined\",\n            className: classes.dropdown,\n            value: filters.selected,}\n          \n            , filterOptions.kind.map(filter => (\n              React.createElement(MenuItem, {\n                selected: filter === '',\n                dense: true,\n                key: filter,\n                value: filter,}\n              \n                , filter\n              )\n            ))\n          )\n        )\n      )\n      , filterOptions.lifecycle.length > 0 && (\n        React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"subtitle2\",}, \"Lifecycle\")\n          , React.createElement(List, { disablePadding: true, dense: true,}\n            , filterOptions.lifecycle.map(filter => (\n              React.createElement(ListItem, {\n                key: filter,\n                dense: true,\n                button: true,\n                onClick: () => updateChecked(filter),}\n              \n                , React.createElement(Checkbox, {\n                  edge: \"start\",\n                  disableRipple: true,\n                  className: classes.checkbox,\n                  color: \"primary\",\n                  checked: filters.checked.includes(filter),\n                  tabIndex: -1,\n                  value: filter,\n                  name: filter,}\n                )\n                , React.createElement(ListItemText, { id: filter, primary: filter,} )\n              )\n            ))\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef } from 'react';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useSearch } from '@backstage/plugin-search-react';\n\n/**\n * Utility hook for either asynchronously loading filter values from a given\n * function or synchronously providing a given list of default values.\n */\nexport const useAsyncFilterValues = (\n  fn,\n  inputValue,\n  defaultValues = [],\n  debounce = 250,\n) => {\n  const valuesMemo = useRef({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true,\n  });\n\n  // Do not invoke the given function more than necessary.\n  useDebounce(\n    () => {\n      // Performance optimization: only invoke the callback once per inputValue\n      // for the lifetime of the hook/component.\n      if (valuesMemo.current[inputValue] === undefined) {\n        valuesMemo.current[inputValue] = callback(inputValue).then(values => {\n          // Override the value for future immediate returns.\n          valuesMemo.current[inputValue] = values;\n          return values;\n        });\n      }\n    },\n    debounce,\n    [callback, inputValue],\n  );\n\n  // Immediately return the default values if they are provided.\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues,\n    };\n  }\n\n  // Immediately return a memoized value if it is set (and not a promise).\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue,\n    };\n  }\n\n  return state;\n};\n\n/**\n * Utility hook for applying a given default value to the search context.\n */\nexport const useDefaultFilterValue = (\n  name,\n  defaultValue,\n) => {\n  const { setFilters } = useSearch();\n\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters(prevFilters => ({\n        ...prevFilters,\n        [name]: defaultValue,\n      }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Chip, TextField } from '@material-ui/core';\nimport {\n  Autocomplete,\n\n\n} from '@material-ui/lab';\nimport { useSearch } from '@backstage/plugin-search-react';\nimport { useAsyncFilterValues, useDefaultFilterValue } from './hooks';\n\n\n/**\n * @public\n */\n\n\n\n\n\n\nexport const AutocompleteFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple,\n  } = props;\n  const [inputValue, setInputValue] = useState('');\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues =\n    typeof givenValues === 'function' ? givenValues : undefined;\n  const defaultValues =\n    typeof givenValues === 'function' ? undefined : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(\n    asyncValues,\n    inputValue,\n    defaultValues,\n    valuesDebounceMs,\n  );\n  const { filters, setFilters } = useSearch();\n  const filterValue =\n    (filters[name] ) || (multiple ? [] : null);\n\n  // Set new filter values on input change.\n  const handleChange = (\n    _,\n    newValue,\n  ) => {\n    setFilters(prevState => {\n      const { [name]: filter, ...others } = prevState;\n\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n\n  // Provide the input field.\n  const renderInput = (params) => (\n    React.createElement(TextField, {\n      ...params,\n      name: \"search\",\n      variant: \"outlined\",\n      label: label,\n      fullWidth: true,}\n    )\n  );\n\n  // Render tags as primary-colored chips.\n  const renderTags = (\n    tagValue,\n    getTagProps,\n  ) =>\n    tagValue.map((option, index) => (\n      React.createElement(Chip, { label: option, color: \"primary\", ...getTagProps({ index }),} )\n    ));\n\n  return (\n    React.createElement(Autocomplete, {\n      filterSelectedOptions: filterSelectedOptions,\n      limitTags: limitTags,\n      multiple: multiple,\n      className: className,\n      id: `${multiple ? 'multi-' : ''}select-filter-${name}--select`,\n      options: values || [],\n      loading: loading,\n      value: filterValue,\n      onChange: handleChange,\n      onInputChange: (_, newValue) => setInputValue(newValue),\n      renderInput: renderInput,\n      renderTags: renderTags,}\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport {\n  makeStyles,\n  FormControl,\n  FormControlLabel,\n  InputLabel,\n  Checkbox,\n  Select,\n  MenuItem,\n  FormLabel,\n} from '@material-ui/core';\n\nimport {\n  AutocompleteFilter,\n\n} from './SearchFilter.Autocomplete';\nimport { useSearch } from '@backstage/plugin-search-react';\nimport { useAsyncFilterValues, useDefaultFilterValue } from './hooks';\n\nconst useStyles = makeStyles({\n  label: {\n    textTransform: 'capitalize',\n  },\n});\n\n/**\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst CheckboxFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs,\n  } = props;\n  const classes = useStyles();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues =\n    typeof givenValues === 'function' ? givenValues : undefined;\n  const defaultValues =\n    typeof givenValues === 'function' ? undefined : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    '',\n    defaultValues,\n    valuesDebounceMs,\n  );\n\n  const handleChange = (e) => {\n    const {\n      target: { value, checked },\n    } = e;\n\n    setFilters(prevFilters => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = ((filter ) || []).filter(i => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n\n  return (\n    React.createElement(FormControl, {\n      className: className,\n      disabled: loading,\n      fullWidth: true,\n      'data-testid': \"search-checkboxfilter-next\",}\n    \n      , label ? React.createElement(FormLabel, { className: classes.label,}, label) : null\n      , values.map((value) => (\n        React.createElement(FormControlLabel, {\n          key: value,\n          control: \n            React.createElement(Checkbox, {\n              color: \"primary\",\n              tabIndex: -1,\n              inputProps: { 'aria-labelledby': value },\n              value: value,\n              name: value,\n              onChange: handleChange,\n              checked: ((filters[name] ) ?? []).includes(value),}\n            )\n          ,\n          label: value,}\n        )\n      ))\n    )\n  );\n};\n\nconst SelectFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n  } = props;\n  const classes = useStyles();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues =\n    typeof givenValues === 'function' ? givenValues : undefined;\n  const defaultValues =\n    typeof givenValues === 'function' ? undefined : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    '',\n    defaultValues,\n    valuesDebounceMs,\n  );\n  const { filters, setFilters } = useSearch();\n\n  const handleChange = (e) => {\n    const {\n      target: { value },\n    } = e;\n\n    setFilters(prevFilters => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value  } : others;\n    });\n  };\n\n  return (\n    React.createElement(FormControl, {\n      disabled: loading,\n      className: className,\n      variant: \"filled\",\n      fullWidth: true,\n      'data-testid': \"search-selectfilter-next\",}\n    \n      , label ? (\n        React.createElement(InputLabel, { className: classes.label, margin: \"dense\",}\n          , label\n        )\n      ) : null\n      , React.createElement(Select, {\n        variant: \"outlined\",\n        value: filters[name] || '',\n        onChange: handleChange,}\n      \n        , React.createElement(MenuItem, { value: \"\",}\n          , React.createElement('em', null, \"All\")\n        )\n        , values.map((value) => (\n          React.createElement(MenuItem, { key: value, value: value,}\n            , value\n          )\n        ))\n      )\n    )\n  );\n};\n\nconst SearchFilter = ({\n  component: Element,\n  ...props\n}) => React.createElement(Element, { ...props,} );\n\nSearchFilter.Checkbox = (\n  props\n,\n) => React.createElement(SearchFilter, { ...props, component: CheckboxFilter,} );\n\nSearchFilter.Select = (\n  props\n,\n) => React.createElement(SearchFilter, { ...props, component: SelectFilter,} );\n\n/**\n * A control surface for a given filter field name, rendered as an autocomplete\n * textfield. A hard-coded list of values may be provided, or an async function\n * which returns values may be provided instead.\n * @public\n */\nSearchFilter.Autocomplete = (props) => (\n  React.createElement(SearchFilter, { ...props, component: AutocompleteFilter,} )\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchFilter /> component instead. This component will be removed in an\n * upcoming release.\n */\nconst SearchFilterNext = SearchFilter;\n\nexport { SearchFilter, SearchFilterNext };\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { cloneElement, Fragment, useEffect, useState } from 'react';\nimport { useSearch } from '@backstage/plugin-search-react';\nimport {\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    backgroundColor: 'rgba(0, 0, 0, .11)',\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1),\n  },\n  icon: {\n    color: theme.palette.common.black,\n  },\n  list: {\n    width: '100%',\n  },\n  listItemIcon: {\n    width: '24px',\n    height: '24px',\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  accordionSummary: {\n    minHeight: 'auto',\n    '&.Mui-expanded': {\n      minHeight: 'auto',\n    },\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    '&.Mui-expanded': {\n      margin: theme.spacing(2, 0),\n    },\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1),\n  },\n}));\n\n/**\n * @public\n */\n\n\n\n\n\n\n\n\n\n\nexport const SearchTypeAccordion = (props) => {\n  const classes = useStyles();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, types: givenTypes } = props;\n\n  const toggleExpanded = () => setExpanded(prevState => !prevState);\n  const handleClick = (type) => {\n    return () => {\n      setTypes(type !== '' ? [type] : []);\n      setPageCursor(undefined);\n      setExpanded(false);\n    };\n  };\n\n  // Handle any provided defaultValue\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const definedTypes = [\n    {\n      value: '',\n      name: 'All',\n      icon: React.createElement(AllIcon, null ),\n    },\n    ...givenTypes,\n  ];\n  const selected = types[0] || '';\n\n  return (\n    React.createElement(Card, { className: classes.card,}\n      , React.createElement(CardHeader, { title: name, titleTypographyProps: { variant: 'overline' },} )\n      , React.createElement(CardContent, { className: classes.cardContent,}\n        , React.createElement(Accordion, {\n          className: classes.accordion,\n          expanded: expanded,\n          onChange: toggleExpanded,}\n        \n          , React.createElement(AccordionSummary, {\n            classes: {\n              root: classes.accordionSummary,\n              content: classes.accordionSummaryContent,\n            },\n            expandIcon: React.createElement(ExpandMoreIcon, { className: classes.icon,} ),\n            IconButtonProps: { size: 'small' },}\n          \n            , expanded\n              ? 'Collapse'\n              : definedTypes.filter(t => t.value === selected)[0].name\n          )\n          , React.createElement(AccordionDetails, { classes: { root: classes.accordionDetails },}\n            , React.createElement(List, {\n              className: classes.list,\n              component: \"nav\",\n              'aria-label': \"filter by type\"  ,\n              disablePadding: true,\n              dense: true,}\n            \n              , definedTypes.map(type => (\n                React.createElement(Fragment, { key: type.value,}\n                  , React.createElement(Divider, null )\n                  , React.createElement(ListItem, {\n                    selected: \n                      types[0] === type.value ||\n                      (types.length === 0 && type.value === '')\n                    ,\n                    onClick: handleClick(type.value),\n                    button: true,}\n                  \n                    , React.createElement(ListItemIcon, null\n                      , cloneElement(type.icon, {\n                        className: classes.listItemIcon,\n                      })\n                    )\n                    , React.createElement(ListItemText, { primary: type.name,} )\n                  )\n                )\n              ))\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useSearch } from '@backstage/plugin-search-react';\n\nimport { makeStyles, Tab, Tabs } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n    padding: theme.spacing(0, 4),\n  },\n  tab: {\n    height: '50px',\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.textSubtle,\n    minWidth: '130px',\n  },\n}));\n\n/**\n * @public\n */\n\n\n\n\n\n\n\n\nexport const SearchTypeTabs = (props) => {\n  const classes = useStyles();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n\n  const changeTab = (_, newType) => {\n    setTypes(newType !== '' ? [newType] : []);\n    setPageCursor(undefined);\n  };\n\n  // Handle any provided defaultValue\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const definedTypes = [\n    {\n      value: '',\n      name: 'All',\n    },\n    ...givenTypes,\n  ];\n\n  return (\n    React.createElement(Tabs, {\n      className: classes.tabs,\n      indicatorColor: \"primary\",\n      value: types.length === 0 ? '' : types[0],\n      onChange: changeTab,}\n    \n      , definedTypes.map((type, idx) => (\n        React.createElement(Tab, {\n          key: idx,\n          className: classes.tab,\n          disableRipple: true,\n          label: type.name,\n          value: type.value,}\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Checkbox,\n  Chip,\n  FormControl,\n  InputLabel,\n  ListItemText,\n  makeStyles,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport React, { } from 'react';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport {\n  SearchTypeAccordion,\n  SearchTypeAccordionProps,\n} from './SearchType.Accordion';\nimport { SearchTypeTabs, SearchTypeTabsProps } from './SearchType.Tabs';\nimport { useSearch } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    textTransform: 'capitalize',\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginTop: theme.spacing(1),\n  },\n  chip: {\n    margin: 2,\n  },\n}));\n\n/**\n * @public\n */\n\n\n\n\n\n\n\nconst SearchType = (props) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n\n  const handleChange = (e) => {\n    const value = e.target.value ;\n    setTypes(value );\n  };\n\n  return (\n    React.createElement(FormControl, {\n      className: className,\n      variant: \"filled\",\n      fullWidth: true,\n      'data-testid': \"search-typefilter-next\",}\n    \n      , React.createElement(InputLabel, { className: classes.label, margin: \"dense\",}\n        , name\n      )\n      , React.createElement(Select, {\n        multiple: true,\n        variant: \"outlined\",\n        value: types,\n        onChange: handleChange,\n        placeholder: \"All Results\" ,\n        renderValue: selected => (\n          React.createElement('div', { className: classes.chips,}\n            , (selected ).map(value => (\n              React.createElement(Chip, {\n                key: value,\n                label: value,\n                className: classes.chip,\n                size: \"small\",}\n              )\n            ))\n          )\n        ),}\n      \n        , values.map((value) => (\n          React.createElement(MenuItem, { key: value, value: value,}\n            , React.createElement(Checkbox, { checked: types.indexOf(value) > -1,} )\n            , React.createElement(ListItemText, { primary: value,} )\n          )\n        ))\n      )\n    )\n  );\n};\n\n/**\n * A control surface for the search query's \"types\" property, displayed as a\n * single-select collapsible accordion suitable for use in faceted search UIs.\n * @public\n */\nSearchType.Accordion = (props) => {\n  return React.createElement(SearchTypeAccordion, { ...props,} );\n};\n\n/**\n * A control surface for the search query's \"types\" property, displayed as a\n * tabs suitable for use in faceted search UIs.\n * @public\n */\nSearchType.Tabs = (props) => {\n  return React.createElement(SearchTypeTabs, { ...props,} );\n};\n\nexport { SearchType };\n;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport qs from 'qs';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rootRouteRef } from '../../plugin';\n\nimport { useRouteRef, } from '@backstage/core-plugin-api';\nimport { SidebarSearchField, useContent } from '@backstage/core-components';\n\n\n\n\n\nexport const SidebarSearch = (props) => {\n  const searchRoute = useRouteRef(rootRouteRef);\n  const { focusContent } = useContent();\n  const navigate = useNavigate();\n  const handleSearch = useCallback(\n    (query) => {\n      const queryString = qs.stringify({ query }, { addQueryPrefix: true });\n      focusContent();\n      navigate(`${searchRoute()}${queryString}`);\n    },\n    [focusContent, navigate, searchRoute],\n  );\n\n  return (\n    React.createElement(SidebarSearchField, {\n      icon: props.icon,\n      onSearch: handleSearch,\n      to: \"/search\",}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst rings = new Array();\nrings.push({ id: 'adopt', name: 'ADOPT', color: '#93c47d' });\nrings.push({ id: 'trial', name: 'TRIAL', color: '#93d2c2' });\nrings.push({ id: 'assess', name: 'ASSESS', color: '#fbdb84' });\nrings.push({ id: 'hold', name: 'HOLD', color: '#efafa9' });\n\nconst quadrants = new Array();\nquadrants.push({ id: 'infrastructure', name: 'Infrastructure' });\nquadrants.push({ id: 'frameworks', name: 'Frameworks' });\nquadrants.push({ id: 'languages', name: 'Languages' });\nquadrants.push({ id: 'process', name: 'Process' });\n\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n      description:\n        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua',\n    },\n  ],\n  url: '#',\n  key: 'javascript',\n  id: 'javascript',\n  title: 'JavaScript',\n  quadrant: 'languages',\n  description:\n    'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n',\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n      description:\n        'Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat',\n    },\n  ],\n  url: '#',\n  key: 'typescript',\n  id: 'typescript',\n  title: 'TypeScript',\n  quadrant: 'languages',\n  description:\n    'Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat',\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n      description:\n        'Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur',\n    },\n  ],\n  url: 'https://webpack.js.org/',\n  key: 'webpack',\n  id: 'webpack',\n  title: 'Webpack',\n  quadrant: 'frameworks',\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n    },\n  ],\n  url: 'https://reactjs.org/',\n  key: 'react',\n  id: 'react',\n  title: 'React',\n  quadrant: 'frameworks',\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n    },\n  ],\n  url: '#',\n  key: 'code-reviews',\n  id: 'code-reviews',\n  title: 'Code Reviews',\n  quadrant: 'process',\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: 'assess',\n      date: new Date('2020-08-06'),\n    },\n  ],\n  url: '#',\n  key: 'mob-programming',\n  id: 'mob-programming',\n  title: 'Mob Programming',\n  quadrant: 'process',\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n    },\n  ],\n  url: '#',\n  key: 'docs-like-code',\n  id: 'docs-like-code',\n  title: 'Docs-like-code',\n  quadrant: 'process',\n});\nentries.push({\n  timeline: [\n    {\n      ringId: 'hold',\n      date: new Date('2020-08-06'),\n    },\n  ],\n  url: '#',\n  key: 'force-push',\n  id: 'force-push',\n  title: 'Force push to master',\n  quadrant: 'process',\n});\nentries.push({\n  timeline: [\n    {\n      ringId: 'adopt',\n      date: new Date('2020-08-06'),\n      description: 'long description',\n    },\n  ],\n  url: 'https://github.com',\n  key: 'github-actions',\n  id: 'github-actions',\n  title: 'GitHub Actions',\n  quadrant: 'infrastructure',\n});\n\nexport const mock = {\n  entries,\n  quadrants,\n  rings,\n};\n\nexport class SampleTechRadarApi  {\n  async load() {\n    return mock;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { techRadarApiRef } from './api';\n\nimport { SampleTechRadarApi } from './sample';\nimport {\n  createPlugin,\n  createRouteRef,\n  createRoutableExtension,\n  createApiFactory,\n} from '@backstage/core-plugin-api';\n\nconst rootRouteRef = createRouteRef({\n  id: 'tech-radar',\n});\n\n/**\n * Tech Radar plugin instance\n */\nexport const techRadarPlugin = createPlugin({\n  id: 'tech-radar',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())],\n});\n\n/**\n * Main Tech Radar Page\n *\n * @remarks\n *\n * Uses {@link TechRadarPageProps} as props\n */\nexport const TechRadarPage = techRadarPlugin.provide(\n  createRoutableExtension({\n    name: 'TechRadarPage',\n    component: () => import('./components/RadarPage').then(m => m.RadarPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A Backstage plugin that lets you display a Tech Radar for your organization\n *\n * @packageDocumentation\n */\n\nimport { RadarPage } from './components';\n\nexport {\n  techRadarPlugin,\n  techRadarPlugin as plugin,\n  TechRadarPage,\n} from './plugin';\n\nexport * from './components';\n\n/**\n * @deprecated Use plugin extensions instead\n */\nexport const Router = RadarPage;\n\n/**\n * The TypeScript API for configuring Tech Radar.\n */\nexport * from './api';\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * Utility API reference for the {@link TechDocsStorageApi}.\n *\n * @public\n * @deprecated Import from `@backstage/plugin-techdocs-react` instead\n */\nexport const techdocsStorageApiRef = createApiRef({\n  id: 'plugin.techdocs.storageservice',\n});\n\n/**\n * Utility API reference for the {@link TechDocsApi}.\n *\n * @public\n * @deprecated Import from `@backstage/plugin-techdocs-react` instead\n */\nexport const techdocsApiRef = createApiRef({\n  id: 'plugin.techdocs.service',\n});\n\n/**\n * The outcome of a docs sync operation.\n *\n * @public\n * @deprecated Import from `@backstage/plugin-techdocs-react` instead\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useCallback, useState } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport { Button, withStyles } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { useShadowRootElements } from '@backstage/plugin-techdocs-react';\n\nconst NESTED_LIST_TOGGLE = '.md-nav__item--nested .md-toggle';\n\nconst EXPANDABLE_NAVIGATION_LOCAL_STORAGE =\n  '@backstage/techdocs-addons/nav-expanded';\n\nconst StyledButton = withStyles({\n  root: {\n    position: 'absolute',\n    left: '220px',\n    top: '19px',\n    padding: 0,\n    minWidth: 0,\n  },\n})(Button);\n\nconst CollapsedIcon = withStyles({\n  root: {\n    height: '20px',\n    width: '20px',\n  },\n})(ChevronRightIcon);\n\nconst ExpandedIcon = withStyles({\n  root: {\n    height: '20px',\n    width: '20px',\n  },\n})(ExpandMoreIcon);\n\n\n\n\n\n/**\n * Show expand/collapse navigation button next to site name in main\n * navigation menu if documentation site has nested navigation.\n */\nexport const ExpandableNavigationAddon = () => {\n  const defaultValue = { expandAllNestedNavs: false };\n  const [expanded, setExpanded] =\n    useLocalStorageValue(\n      EXPANDABLE_NAVIGATION_LOCAL_STORAGE,\n      defaultValue,\n    );\n  const [hasNavSubLevels, setHasNavSubLevels] = useState(false);\n\n  const [...checkboxToggles] = useShadowRootElements([\n    NESTED_LIST_TOGGLE,\n  ]);\n\n  const shouldToggle = useCallback(\n    (item) => {\n      const isExpanded = item.checked;\n      const shouldExpand = expanded?.expandAllNestedNavs;\n\n      // Is collapsed but should expand\n      if (shouldExpand && !isExpanded) {\n        return true;\n      }\n\n      // Is expanded but should collapse\n      if (!shouldExpand && isExpanded) {\n        return true;\n      }\n\n      return false;\n    },\n    [expanded],\n  );\n\n  useEffect(() => {\n    // There is no nested navs\n    if (!checkboxToggles?.length) return;\n\n    setHasNavSubLevels(true);\n    checkboxToggles.forEach(item => {\n      if (shouldToggle(item)) item.click();\n    });\n  }, [expanded, shouldToggle, checkboxToggles]);\n\n  const handleState = () => {\n    setExpanded(prevState => ({\n      expandAllNestedNavs: !prevState?.expandAllNestedNavs,\n    }));\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , hasNavSubLevels ? (\n        React.createElement(StyledButton, {\n          size: \"small\",\n          onClick: handleState,\n          'aria-label': \n            expanded?.expandAllNestedNavs ? 'collapse-nav' : 'expand-nav'\n          ,}\n        \n          , expanded?.expandAllNestedNavs ? React.createElement(ExpandedIcon, null ) : React.createElement(CollapsedIcon, null )\n        )\n      ) : null\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ADDON_FEEDBACK_CONTAINER_ID = 'techdocs-report-issue';\nexport const ADDON_FEEDBACK_CONTAINER_SELECTOR = `#${ADDON_FEEDBACK_CONTAINER_ID}`;\nexport const PAGE_EDIT_LINK_SELECTOR = '[title^=\"Edit this page\"]';\nexport const PAGE_FEEDBACK_LINK_SELECTOR = '[title^=\"Leave feedback for\"]';\nexport const PAGE_MAIN_CONTENT_SELECTOR =\n  '[data-md-component=\"main\"] .md-content';\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  replaceGitHubUrlType,\n  replaceGitLabUrlType,\n} from '@backstage/integration';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport {\n  useShadowRootElements,\n  useShadowRootSelection,\n} from '@backstage/plugin-techdocs-react';\n\nimport { PAGE_EDIT_LINK_SELECTOR } from './constants';\n\nconst resolveBlobUrl = (url, type) => {\n  if (type === 'github') {\n    return replaceGitHubUrlType(url, 'blob');\n  } else if (type === 'gitlab') {\n    return replaceGitLabUrlType(url, 'blob');\n  }\n  // eslint-disable-next-line no-console\n  console.error(\n    `Invalid SCM type ${type} found in ReportIssue addon for URL ${url}!`,\n  );\n  return url;\n};\n\nexport const getTitle = (selection) => {\n  const text = selection.toString().substring(0, 70);\n  const ellipsis = text.length === 70 ? '...' : '';\n  return `Documentation feedback: ${text}${ellipsis}`;\n};\n\nexport const getBody = (selection, markdownUrl) => {\n  const title = '## Documentation Feedback ';\n  const subheading = '#### The highlighted text:';\n  const commentHeading = '#### The comment on the text:';\n  const commentPlaceholder = '_>replace this line with your comment<_';\n  const highlightedTextAsQuote = selection\n    .toString()\n    .trim()\n    .split('\\n')\n    .map(line => `> ${line.trim()}`)\n    .join('\\n');\n\n  const facts = [\n    `Backstage URL: <${window.location.href}> \\nMarkdown URL: <${markdownUrl}>`,\n  ];\n\n  return `${title}\\n\\n ${subheading} \\n\\n ${highlightedTextAsQuote}\\n\\n ${commentHeading} \\n ${commentPlaceholder}\\n\\n ___\\n${facts}`;\n};\n\nexport const useGitTemplate = (debounceTime) => {\n  const initialTemplate = { title: '', body: '' };\n  const selection = useShadowRootSelection(debounceTime);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (editLink )?.href ?? '';\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n\n  if (!selection || !url) return initialTemplate;\n\n  const type = scmIntegrationsApi.byUrl(url)?.type;\n\n  if (!type) return initialTemplate;\n\n  return {\n    title: getTitle(selection),\n    body: getBody(selection, resolveBlobUrl(url, type)),\n  };\n};\n\nexport const useGitRepository = () => {\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (editLink )?.href ?? '';\n\n  if (!url) return null;\n\n  const type = scmIntegrationsApi.byUrl(url)?.type;\n\n  if (!type) return null;\n\n  return { ...parseGitUrl(resolveBlobUrl(url, type)), type };\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport BugReportIcon from '@material-ui/icons/BugReport';\n\nimport { Link, GitHubIcon } from '@backstage/core-components';\n\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'grid',\n    gridGap: theme.spacing(1),\n    gridAutoFlow: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize,\n  },\n}));\n\n\n\n\n\n\nconst getIcon = ({ type }) => {\n  if (type === 'github') {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\n\nconst getName = ({ type }) => {\n  if (type === 'github') {\n    return 'Github';\n  }\n  return 'Gitlab';\n};\n\nconst getUrl = (repository, template) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n  const encodedOwner = encodeURIComponent(owner);\n  const encodedName = encodeURIComponent(name);\n\n  const url = `${protocol}://${resource}/${encodedOwner}/${encodedName}`;\n  if (type === 'github') {\n    return `${url}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${url}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\n\nexport const IssueLink = ({ template, repository }) => {\n  const classes = useStyles();\n\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n\n  return (\n    React.createElement(Link, { className: classes.root, to: url, target: \"_blank\",}\n      , React.createElement(Icon, null ), \" Open new \"   , getName(repository), \" issue\"\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\n\nimport { makeStyles, Portal, Paper } from '@material-ui/core';\n\nimport { useGitTemplate, useGitRepository } from './hooks';\n\nimport {\n  PAGE_MAIN_CONTENT_SELECTOR,\n  PAGE_FEEDBACK_LINK_SELECTOR,\n  ADDON_FEEDBACK_CONTAINER_ID,\n  ADDON_FEEDBACK_CONTAINER_SELECTOR,\n} from './constants';\nimport { IssueLink } from './IssueLink';\n\nimport {\n  useShadowRootElements,\n  useShadowRootSelection,\n} from '@backstage/plugin-techdocs-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    transform: 'translate(-100%, -100%)',\n    position: 'absolute',\n    padding: theme.spacing(1),\n    zIndex: theme.zIndex.tooltip,\n    background: theme.palette.common.white,\n  },\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Show report issue button when text is highlighted\n */\nexport const ReportIssueAddon = ({\n  debounceTime = 500,\n  templateBuilder: buildTemplate,\n}) => {\n  const classes = useStyles();\n  const [style, setStyle] = useState();\n\n  const repository = useGitRepository();\n\n  const defaultTemplate = useGitTemplate(debounceTime);\n\n  const selection = useShadowRootSelection(debounceTime);\n\n  const [mainContent, feedbackLink] = useShadowRootElements([\n    PAGE_MAIN_CONTENT_SELECTOR,\n    PAGE_FEEDBACK_LINK_SELECTOR,\n  ]);\n\n  let [feedbackContainer] = useShadowRootElements([\n    ADDON_FEEDBACK_CONTAINER_SELECTOR,\n  ]);\n\n  if (feedbackLink) {\n    feedbackLink.style.display = 'none';\n  }\n\n  // calculates the position of the selected text to be able to set the position of the addon\n  useEffect(() => {\n    if (\n      // todo(backstage/techdocs-core) handle non-repo rendering\n      !repository ||\n      !selection ||\n      !selection.containsNode(mainContent, true) ||\n      selection?.containsNode(feedbackContainer, true)\n    ) {\n      return;\n    }\n\n    const mainContentPosition = mainContent.getBoundingClientRect();\n    const selectionPosition = selection.getRangeAt(0).getBoundingClientRect();\n\n    setStyle({\n      top: `${selectionPosition.top - mainContentPosition.top - 16}px`,\n      left: `${selectionPosition.left + selectionPosition.width / 2}px`,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selection, mainContent, feedbackContainer]);\n\n  if (!selection || !repository) return null;\n\n  if (!feedbackContainer) {\n    feedbackContainer = document.createElement('div');\n    feedbackContainer.setAttribute('id', ADDON_FEEDBACK_CONTAINER_ID);\n    mainContent.prepend(feedbackContainer);\n  }\n\n  return (\n    React.createElement(Portal, { container: feedbackContainer,}\n      , React.createElement(Paper, {\n        'data-testid': \"report-issue-addon\",\n        className: classes.root,\n        style: style,}\n      \n        , React.createElement(IssueLink, {\n          repository: repository,\n          template: \n            buildTemplate ? buildTemplate({ selection }) : defaultTemplate\n          ,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n\n  useMemo,\n  useState,\n  useEffect,\n  useCallback,\n} from 'react';\n\nimport {\n  withStyles,\n  makeStyles,\n  useTheme,\n  Box,\n  MenuItem,\n  ListItemText,\n  Slider,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\n\nimport { useShadowRootElements } from '@backstage/plugin-techdocs-react';\n\nconst boxShadow =\n  '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\n\nconst StyledSlider = withStyles(theme => ({\n  root: {\n    height: 2,\n    padding: '15px 0',\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: theme.palette.common.white,\n    boxShadow: boxShadow,\n    marginTop: -9,\n    marginLeft: -9,\n    '&:focus, &:hover, &$active': {\n      boxShadow:\n        '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        boxShadow: boxShadow,\n      },\n    },\n  },\n  active: {},\n  valueLabel: {\n    top: '100%',\n    left: '50%',\n    transform: 'scale(1) translate(-50%, -5px) !important',\n    '& *': {\n      color: theme.palette.common.black,\n      fontSize: theme.typography.caption.fontSize,\n      background: 'transparent',\n    },\n  },\n  track: {\n    height: 2,\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5,\n  },\n  mark: {\n    height: 10,\n    width: 1,\n    marginTop: -4,\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor',\n  },\n}))(Slider);\n\nconst settings = {\n  key: 'techdocs.addons.settings.textsize',\n  defaultValue: 100,\n};\n\nconst marks = [\n  {\n    value: 90,\n  },\n  {\n    value: 100,\n  },\n  {\n    value: 115,\n  },\n  {\n    value: 130,\n  },\n  {\n    value: 150,\n  },\n];\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    color: theme.palette.textSubtle,\n    display: 'flex',\n    alignItems: 'center',\n    margin: 0,\n    minWidth: 200,\n  },\n  menuItem: {\n    '&:hover': {\n      background: 'transparent',\n    },\n  },\n  decreaseButton: {\n    marginRight: theme.spacing(1),\n  },\n  increaseButton: {\n    marginLeft: theme.spacing(1),\n  },\n}));\n\nexport const TextSizeAddon = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [body] = useShadowRootElements(['body']);\n\n  const [value, setValue] = useState(() => {\n    const initialValue = localStorage?.getItem(settings.key);\n    return initialValue ? parseInt(initialValue, 10) : settings.defaultValue;\n  });\n\n  const values = useMemo(() => marks.map(mark => mark.value), []);\n  const index = useMemo(() => values.indexOf(value), [values, value]);\n  const min = useMemo(() => values[0], [values]);\n  const max = useMemo(() => values[values.length - 1], [values]);\n\n  const getValueText = useCallback(() => `${value}%`, [value]);\n\n  const handleChangeCommitted = useCallback(\n    (_event, newValue) => {\n      if (!Array.isArray(newValue)) {\n        setValue(newValue);\n        localStorage?.setItem(settings.key, String(newValue));\n      }\n    },\n    [setValue],\n  );\n\n  const handleDecreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index - 1]);\n    },\n    [index, values, handleChangeCommitted],\n  );\n\n  const handleIncreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index + 1]);\n    },\n    [index, values, handleChangeCommitted],\n  );\n\n  useEffect(() => {\n    if (!body) return;\n    const htmlFontSize =\n      (\n        theme.typography \n\n\n      )?.htmlFontSize ?? 16;\n    body.style.setProperty(\n      '--md-typeset-font-size',\n      `${htmlFontSize * (value / 100)}px`,\n    );\n  }, [body, value, theme]);\n\n  return (\n    React.createElement(MenuItem, { className: classes.menuItem, button: true, disableRipple: true,}\n      , React.createElement(ListItemText, {\n        primary: \n          React.createElement(Typography, { variant: \"subtitle2\", color: \"textPrimary\",}, \"Text size\"\n\n          )\n        ,\n        secondary: \n          React.createElement(Box, { className: classes.container,}\n            , React.createElement(IconButton, {\n              className: classes.decreaseButton,\n              size: \"small\",\n              edge: \"start\",\n              disabled: value === min,\n              onClick: handleDecreaseClick,\n              'aria-label': \"Decrease text size\"  ,}\n            \n              , React.createElement(RemoveIcon, null )\n            )\n            , React.createElement(StyledSlider, {\n              value: value,\n              'aria-labelledby': \"text-size-slider\",\n              getAriaValueText: getValueText,\n              valueLabelDisplay: \"on\",\n              valueLabelFormat: getValueText,\n              marks: marks,\n              step: null,\n              min: min,\n              max: max,\n              onChangeCommitted: handleChangeCommitted,}\n            )\n            , React.createElement(IconButton, {\n              className: classes.increaseButton,\n              size: \"small\",\n              edge: \"end\",\n              disabled: value === max,\n              onClick: handleIncreaseClick,\n              'aria-label': \"Increase text size\"  ,}\n            \n              , React.createElement(AddIcon, null )\n            )\n          )\n        ,\n        disableTypography: true,}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPlugin } from '@backstage/core-plugin-api';\nimport {\n  createTechDocsAddonExtension,\n  TechDocsAddonLocations,\n} from '@backstage/plugin-techdocs-react';\nimport { ExpandableNavigationAddon } from './ExpandableNavigation';\nimport { ReportIssueAddon, } from './ReportIssue';\nimport { TextSizeAddon } from './TextSize';\n\n/**\n * The TechDocs addons contrib plugin\n *\n * @public\n */\n\nexport const techdocsModuleAddonsContribPlugin = createPlugin({\n  id: 'techdocsModuleAddonsContrib',\n});\n\n/**\n * TechDocs addon that lets you expand/collapse the TechDocs main navigation\n * and keep the preferred state in local storage. The addon will render as\n * a button next to the site name if the documentation has nested navigation.\n *\n * @example\n * Here's a simple example:\n * ```\n * import {\n *   DefaultTechDocsHome,\n *   TechDocsIndexPage,\n *   TechDocsReaderPage,\n * } from '@backstage/plugin-techdocs';\n * import { TechDocsAddons } from '@backstage/plugin-techdocs-react/alpha';\n * import { ExpandableNavigation } from '@backstage/plugin-techdocs-module-addons-contrib';\n *\n *\n * const AppRoutes = () => {\n *   <FlatRoutes>\n *     // other plugin routes\n *     <Route path=\"/docs\" element={<TechDocsIndexPage />}>\n *       <DefaultTechDocsHome />\n *     </Route>\n *     <Route\n *       path=\"/docs/:namespace/:kind/:name/*\"\n *       element={<TechDocsReaderPage />}\n *     >\n *       <TechDocsAddons>\n *         <ExpandableNavigation />\n *       </TechDocsAddons>\n *     </Route>\n *   </FlatRoutes>;\n * };\n * ```\n *\n * @public\n */\n\nexport const ExpandableNavigation = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: 'ExpandableNavigation',\n    location: TechDocsAddonLocations.PrimarySidebar,\n    component: ExpandableNavigationAddon,\n  }),\n);\n\n/**\n * TechDocs addon that lets you select text and open GitHub/Gitlab issues\n *\n * @remarks\n * Before using it, you should set up an `edit_uri` for your pages as explained {@link https://backstage.io/docs/features/techdocs/faqs#is-it-possible-for-users-to-suggest-changes-or-provide-feedback-on-a-techdocs-page | here} and remember, it only works for Github or Gitlab.\n *\n * @example\n * Here's a simple example:\n * ```\n * import {\n *   DefaultTechDocsHome,\n *   TechDocsIndexPage,\n *   TechDocsReaderPage,\n * } from '@backstage/plugin-techdocs';\n * import { TechDocsAddons } from '@backstage/plugin-techdocs-react';\n * import { ReportIssue } from '@backstage/plugin-techdocs-module-addons-contrib';\n *\n *\n * const AppRoutes = () => {\n *   <FlatRoutes>\n *     // other plugin routes\n *     <Route path=\"/docs\" element={<TechDocsIndexPage />}>\n *       <DefaultTechDocsHome />\n *     </Route>\n *     <Route\n *       path=\"/docs/:namespace/:kind/:name/*\"\n *       element={<TechDocsReaderPage />}\n *     >\n *       <TechDocsAddons>\n *         <ReportIssue />\n *       </TechDocsAddons>\n *     </Route>\n *   </FlatRoutes>;\n * };\n * ```\n *\n * @example\n * Here's an example with `debounceTime` and `templateBuilder` props:\n * ```\n * import {\n *   DefaultTechDocsHome,\n *   TechDocsIndexPage,\n *   TechDocsReaderPage,\n * } from '@backstage/plugin-techdocs';\n * import { TechDocsAddons } from '@backstage/plugin-techdocs-react';\n * import { ReportIssue } from '@backstage/plugin-techdocs-module-addons-contrib';\n *\n * const templateBuilder = ({ selection }: ReportIssueTemplateBuilder) => (({\n *  title: 'Custom issue title',\n *  body: `Custom issue body: ${selection.toString()}`\n * }))\n *\n * const AppRoutes = () => {\n *   <FlatRoutes>\n *     // other plugin routes\n *     <Route path=\"/docs\" element={<TechDocsIndexPage />}>\n *       <DefaultTechDocsHome />\n *     </Route>\n *     <Route\n *       path=\"/docs/:namespace/:kind/:name/*\"\n *       element={<TechDocsReaderPage />}\n *     >\n *       <TechDocsAddons>\n *         <ReportIssue debounceTime={300} templateBuilder={templateBuilder} />\n *       </TechDocsAddons>\n *     </Route>\n *   </FlatRoutes>;\n * ```\n * @param props - Object that can optionally contain `debounceTime` and `templateBuilder` properties.\n * @public\n */\nexport const ReportIssue = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: 'ReportIssue',\n    location: TechDocsAddonLocations.Content,\n    component: ReportIssueAddon,\n  }),\n);\n\n/**\n * This TechDocs addon allows users to customize text size on documentation pages, they can select how much they want to increase or decrease the font size via slider or buttons.\n *\n * @remarks\n * The default value for the font size is 100% of the HTML font size, if the theme does not have a `htmlFontSize` in its typography object, the addon will assume 16px as 100%, and remember, this setting is kept in the browser local storage.\n *\n * @example\n * Here's a simple example:\n * ```\n * import {\n *   DefaultTechDocsHome,\n *   TechDocsIndexPage,\n *   TechDocsReaderPage,\n * } from '@backstage/plugin-techdocs';\n * import { TechDocsAddons } from '@backstage/plugin-techdocs-react';\n * import { TextSize } from '@backstage/plugin-techdocs-module-addons-contrib';\n *\n *\n * const AppRoutes = () => {\n *   <FlatRoutes>\n *     // other plugin routes\n *     <Route path=\"/docs\" element={<TechDocsIndexPage />}>\n *       <DefaultTechDocsHome />\n *     </Route>\n *     <Route\n *       path=\"/docs/:namespace/:kind/:name/*\"\n *       element={<TechDocsReaderPage />}\n *     >\n *       <TechDocsAddons>\n *         <TextSize />\n *       </TechDocsAddons>\n *     </Route>\n *   </FlatRoutes>;\n * };\n * ```\n *\n * @public\n */\nexport const TextSize = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: 'TextSize',\n    location: TechDocsAddonLocations.Settings,\n    component: TextSizeAddon,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n} from '@backstage/core-plugin-api';\n\nexport const settingsRouteRef = createRouteRef({\n  id: 'user-settings',\n});\n\nexport const userSettingsPlugin = createPlugin({\n  id: 'user-settings',\n  routes: {\n    settingsPage: settingsRouteRef,\n  },\n});\n\nexport const UserSettingsPage = userSettingsPlugin.provide(\n  createRoutableExtension({\n    name: 'UserSettingsPage',\n    component: () =>\n      import('./components/SettingsPage').then(m => m.SettingsPage),\n    mountPoint: settingsRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { settingsRouteRef } from '../plugin';\nimport { SidebarItem } from '@backstage/core-components';\nimport { useRouteRef, } from '@backstage/core-plugin-api';\n\n\n\n\n\nexport const Settings = (props) => {\n  const routePath = useRouteRef(settingsRouteRef);\n  const Icon = props.icon ? props.icon : SettingsIcon;\n  return React.createElement(SidebarItem, { text: \"Settings\", to: routePath(), icon: Icon,} );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { InfoCard } from '@backstage/core-components';\nimport {\n  List,\n  Grid,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Switch,\n} from '@material-ui/core';\nimport useLocalStorage from 'react-use/lib/useLocalStorage';\n\nexport function AdvancedSettings() {\n  const [value, setValue] = useLocalStorage(\n    'advanced-option',\n    'off',\n  );\n\n  const toggleValue = (ev) => {\n    setValue(ev.currentTarget.checked ? 'on' : 'off');\n  };\n\n  return (\n    React.createElement(Grid, { container: true, direction: \"row\", spacing: 3,}\n      , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n        , React.createElement(InfoCard, { title: \"Advanced settings\" , variant: \"gridItem\",}\n          , React.createElement(List, null\n            , React.createElement(ListItem, null\n              , React.createElement(ListItemText, {\n                primary: \"Advanced user option\"  ,\n                secondary: \"An extra settings tab to further customize the experience\"        ,}\n              )\n              , React.createElement(ListItemSecondaryAction, null\n                , React.createElement(Switch, {\n                  color: \"primary\",\n                  value: value,\n                  onChange: toggleValue,\n                  name: \"advanced\",}\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ScmIntegrationsApi,\n  scmIntegrationsApiRef,\n  ScmAuth,\n} from '@backstage/integration-react';\nimport {\n  costInsightsApiRef,\n  ExampleCostInsightsClient,\n} from '@backstage/plugin-cost-insights';\nimport {\n  graphQlBrowseApiRef,\n  GraphQLEndpoints,\n} from '@backstage/plugin-graphiql';\nimport {\n\n  configApiRef,\n  createApiFactory,\n  errorApiRef,\n  githubAuthApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const apis = [\n  createApiFactory({\n    api: scmIntegrationsApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => ScmIntegrationsApi.fromConfig(configApi),\n  }),\n\n  ScmAuth.createDefaultApiFactory(),\n\n  createApiFactory({\n    api: graphQlBrowseApiRef,\n    deps: { errorApi: errorApiRef, githubAuthApi: githubAuthApiRef },\n    factory: ({ errorApi, githubAuthApi }) =>\n      GraphQLEndpoints.from([\n        GraphQLEndpoints.create({\n          id: 'gitlab',\n          title: 'GitLab',\n          url: 'https://gitlab.com/api/graphql',\n        }),\n        GraphQLEndpoints.github({\n          id: 'github',\n          title: 'GitHub',\n          errorApi,\n          githubAuthApi,\n        }),\n      ]),\n  }),\n\n  createApiFactory(costInsightsApiRef, new ExampleCostInsightsClient()),\n];\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { badgesApiRef, BadgesClient } from './api';\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const badgesPlugin = createPlugin({\n  id: 'badges',\n  apis: [\n    createApiFactory({\n      api: badgesApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new BadgesClient({ discoveryApi, identityApi }),\n    }),\n  ],\n});\n\nexport const EntityBadgesDialog = badgesPlugin.provide(\n  createComponentExtension({\n    name: 'EntityBadgesDialog',\n    component: {\n      lazy: () =>\n        import('./components/EntityBadgesDialog').then(\n          m => m.EntityBadgesDialog,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { circleCIApiRef, CircleCIApi } from './api';\nimport { circleCIRouteRef } from './route-refs';\nimport {\n  createPlugin,\n  createApiFactory,\n  discoveryApiRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const circleCIPlugin = createPlugin({\n  id: 'circleci',\n  apis: [\n    createApiFactory({\n      api: circleCIApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new CircleCIApi({ discoveryApi }),\n    }),\n  ],\n});\n\nexport const EntityCircleCIContent = circleCIPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityCircleCIContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: circleCIRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { cloudbuildApiRef, CloudbuildClient } from './api';\nimport { rootRouteRef } from './routes';\nimport {\n  createPlugin,\n  createApiFactory,\n  googleAuthApiRef,\n  createRoutableExtension,\n  createComponentExtension,\n} from '@backstage/core-plugin-api';\n\nexport const cloudbuildPlugin = createPlugin({\n  id: 'cloudbuild',\n  apis: [\n    createApiFactory({\n      api: cloudbuildApiRef,\n      deps: { googleAuthApi: googleAuthApiRef },\n      factory({ googleAuthApi }) {\n        return new CloudbuildClient(googleAuthApi);\n      },\n    }),\n  ],\n  routes: {\n    entityContent: rootRouteRef,\n  },\n});\n\nexport const EntityCloudbuildContent = cloudbuildPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityCloudbuildContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const EntityLatestCloudbuildRunCard = cloudbuildPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLatestCloudbuildRunCard',\n    component: {\n      lazy: () =>\n        import('./components/Cards').then(m => m.LatestWorkflowRunCard),\n    },\n  }),\n);\n\nexport const EntityLatestCloudbuildsForBranchCard = cloudbuildPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLatestCloudbuildsForBranchCard',\n    component: {\n      lazy: () =>\n        import('./components/Cards').then(m => m.LatestWorkflowsForBranchCard),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'code-coverage',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { codeCoverageApiRef, CodeCoverageRestApi } from './api';\nimport { rootRouteRef } from './routes';\n\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const codeCoveragePlugin = createPlugin({\n  id: 'code-coverage',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: codeCoverageApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new CodeCoverageRestApi(discoveryApi),\n    }),\n  ],\n});\n\nexport const EntityCodeCoverageContent = codeCoveragePlugin.provide(\n  createRoutableExtension({\n    name: 'EntityCodeCoverageContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { githubActionsApiRef, GithubActionsClient } from './api';\nimport { rootRouteRef } from './routes';\nimport {\n  configApiRef,\n  createPlugin,\n  createApiFactory,\n  githubAuthApiRef,\n  createRoutableExtension,\n  createComponentExtension,\n} from '@backstage/core-plugin-api';\n\nexport const githubActionsPlugin = createPlugin({\n  id: 'github-actions',\n  apis: [\n    createApiFactory({\n      api: githubActionsApiRef,\n      deps: { configApi: configApiRef, githubAuthApi: githubAuthApiRef },\n      factory: ({ configApi, githubAuthApi }) =>\n        new GithubActionsClient({ configApi, githubAuthApi }),\n    }),\n  ],\n  routes: {\n    entityContent: rootRouteRef,\n  },\n});\n\nexport const EntityGithubActionsContent = githubActionsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityGithubActionsContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const EntityLatestGithubActionRunCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLatestGithubActionRunCard',\n    component: {\n      lazy: () =>\n        import('./components/Cards').then(m => m.LatestWorkflowRunCard),\n    },\n  }),\n);\n\nexport const EntityLatestGithubActionsForBranchCard =\n  githubActionsPlugin.provide(\n    createComponentExtension({\n      name: 'EntityLatestGithubActionsForBranchCard',\n      component: {\n        lazy: () =>\n          import('./components/Cards').then(\n            m => m.LatestWorkflowsForBranchCard,\n          ),\n      },\n    }),\n  );\n\nexport const EntityRecentGithubActionsRunsCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityRecentGithubActionsRunsCard',\n    component: {\n      lazy: () =>\n        import('./components/Cards').then(m => m.RecentWorkflowRunsCard),\n    },\n  }),\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class KafkaBackendClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n   async internalGet(path) {\n    const url = `${await this.discoveryApi.getBaseUrl('kafka')}${path}`;\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    if (!response.ok) {\n      const payload = await response.text();\n      const message = `Request failed with ${response.status} ${response.statusText}, ${payload}`;\n      throw new Error(message);\n    }\n\n    return await response.json();\n  }\n\n  async getConsumerGroupOffsets(\n    clusterId,\n    consumerGroup,\n  ) {\n    return await this.internalGet(\n      `/consumers/${clusterId}/${consumerGroup}/offsets`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { KafkaBackendClient } from './api/KafkaBackendClient';\nimport { kafkaApiRef } from './api/types';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootCatalogKafkaRouteRef = createRouteRef({\n  id: 'kafka',\n});\n\nexport const kafkaPlugin = createPlugin({\n  id: 'kafka',\n  apis: [\n    createApiFactory({\n      api: kafkaApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new KafkaBackendClient({ discoveryApi, identityApi }),\n    }),\n  ],\n  routes: {\n    entityContent: rootCatalogKafkaRouteRef,\n  },\n});\n\nexport const EntityKafkaContent = kafkaPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityKafkaContent',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: rootCatalogKafkaRouteRef,\n  }),\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class KubernetesBackendClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n   async handleResponse(response) {\n    if (!response.ok) {\n      const payload = await response.text();\n      let message;\n      switch (response.status) {\n        case 404:\n          message =\n            'Could not find the Kubernetes Backend (HTTP 404). Make sure the plugin has been fully installed.';\n          break;\n        default:\n          message = `Request failed with ${response.status} ${response.statusText}, ${payload}`;\n      }\n      throw new Error(message);\n    }\n\n    return await response.json();\n  }\n\n   async postRequired(\n    path,\n    requestBody,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('kubernetes')}${path}`;\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n      body: JSON.stringify(requestBody),\n    });\n\n    return this.handleResponse(response);\n  }\n\n  async getObjectsByEntity(\n    requestBody,\n  ) {\n    return await this.postRequired(\n      `/services/${requestBody.entity.metadata.name}`,\n      requestBody,\n    );\n  }\n\n  async getClusters() {\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const url = `${await this.discoveryApi.getBaseUrl('kubernetes')}/clusters`;\n\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    return (await this.handleResponse(response)).items;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class GoogleKubernetesAuthProvider  {\n  authProvider;\n\n  constructor(authProvider) {\n    this.authProvider = authProvider;\n  }\n\n  async decorateRequestBodyForAuth(\n    requestBody,\n  ) {\n    const googleAuthToken = await this.authProvider.getAccessToken(\n      'https://www.googleapis.com/auth/cloud-platform',\n    );\n    if ('auth' in requestBody) {\n      requestBody.auth.google = googleAuthToken;\n    } else {\n      requestBody.auth = { google: googleAuthToken };\n    }\n    return requestBody;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class ServiceAccountKubernetesAuthProvider\n  \n{\n  async decorateRequestBodyForAuth(\n    requestBody,\n  ) {\n    // No-op, with service account for auth, cluster config/details should already have serviceAccountToken\n    return requestBody;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class AwsKubernetesAuthProvider  {\n  async decorateRequestBodyForAuth(\n    requestBody,\n  ) {\n    // No-op, with aws auth, server's AWS credentials are used for access\n    return requestBody;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class GoogleServiceAccountAuthProvider\n  \n{\n  async decorateRequestBodyForAuth(\n    requestBody,\n  ) {\n    // No-op, with google service account auth, server's AWS credentials are used for access\n    return requestBody;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class AzureKubernetesAuthProvider  {\n  async decorateRequestBodyForAuth(\n    requestBody,\n  ) {\n    // No-op, with azure auth, server's Azure credentials are used for access\n    return requestBody;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class OidcKubernetesAuthProvider  {\n  providerName;\n  authProvider;\n\n  constructor(providerName, authProvider) {\n    this.providerName = providerName;\n    this.authProvider = authProvider;\n  }\n\n  async decorateRequestBodyForAuth(\n    requestBody,\n  ) {\n    const authToken = await this.authProvider.getIdToken();\n    const auth = { ...requestBody.auth };\n    if (auth.oidc) {\n      auth.oidc[this.providerName] = authToken;\n    } else {\n      auth.oidc = { [this.providerName]: authToken };\n    }\n    requestBody.auth = auth;\n    return requestBody;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { GoogleKubernetesAuthProvider } from './GoogleKubernetesAuthProvider';\nimport { ServiceAccountKubernetesAuthProvider } from './ServiceAccountKubernetesAuthProvider';\nimport { AwsKubernetesAuthProvider } from './AwsKubernetesAuthProvider';\n\nimport { GoogleServiceAccountAuthProvider } from './GoogleServiceAccountAuthProvider';\nimport { AzureKubernetesAuthProvider } from './AzureKubernetesAuthProvider';\nimport { OidcKubernetesAuthProvider } from './OidcKubernetesAuthProvider';\n\nexport class KubernetesAuthProviders  {\n    kubernetesAuthProviderMap\n\n\n;\n\n  constructor(options\n\n\n) {\n    this.kubernetesAuthProviderMap = new Map();\n    this.kubernetesAuthProviderMap.set(\n      'google',\n      new GoogleKubernetesAuthProvider(options.googleAuthApi),\n    );\n    this.kubernetesAuthProviderMap.set(\n      'serviceAccount',\n      new ServiceAccountKubernetesAuthProvider(),\n    );\n    this.kubernetesAuthProviderMap.set(\n      'googleServiceAccount',\n      new GoogleServiceAccountAuthProvider(),\n    );\n    this.kubernetesAuthProviderMap.set('aws', new AwsKubernetesAuthProvider());\n    this.kubernetesAuthProviderMap.set(\n      'azure',\n      new AzureKubernetesAuthProvider(),\n    );\n\n    if (options.oidcProviders) {\n      Object.keys(options.oidcProviders).forEach(provider => {\n        this.kubernetesAuthProviderMap.set(\n          `oidc.${provider}`,\n          new OidcKubernetesAuthProvider(\n            provider,\n            options.oidcProviders[provider],\n          ),\n        );\n      });\n    }\n  }\n\n  async decorateRequestBodyForAuth(\n    authProvider,\n    requestBody,\n  ) {\n    const kubernetesAuthProvider =\n      this.kubernetesAuthProviderMap.get(authProvider);\n    if (kubernetesAuthProvider) {\n      return await kubernetesAuthProvider.decorateRequestBodyForAuth(\n        requestBody,\n      );\n    }\n\n    if (authProvider.startsWith('oidc.')) {\n      throw new Error(\n        `KubernetesAuthProviders has no oidcProvider configured for ${authProvider}`,\n      );\n    }\n    throw new Error(\n      `authProvider \"${authProvider}\" has no KubernetesAuthProvider defined for it`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { KubernetesBackendClient } from './api/KubernetesBackendClient';\nimport { kubernetesApiRef } from './api/types';\nimport { kubernetesAuthProvidersApiRef } from './kubernetes-auth-provider/types';\nimport { KubernetesAuthProviders } from './kubernetes-auth-provider/KubernetesAuthProviders';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n  googleAuthApiRef,\n  microsoftAuthApiRef,\n  oktaAuthApiRef,\n  oneloginAuthApiRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootCatalogKubernetesRouteRef = createRouteRef({\n  id: 'kubernetes',\n});\n\nexport const kubernetesPlugin = createPlugin({\n  id: 'kubernetes',\n  apis: [\n    createApiFactory({\n      api: kubernetesApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ discoveryApi, identityApi }) =>\n        new KubernetesBackendClient({ discoveryApi, identityApi }),\n    }),\n    createApiFactory({\n      api: kubernetesAuthProvidersApiRef,\n      deps: {\n        googleAuthApi: googleAuthApiRef,\n        microsoftAuthApi: microsoftAuthApiRef,\n        oktaAuthApi: oktaAuthApiRef,\n        oneloginAuthApi: oneloginAuthApiRef,\n      },\n      factory: ({\n        googleAuthApi,\n        microsoftAuthApi,\n        oktaAuthApi,\n        oneloginAuthApi,\n      }) => {\n        const oidcProviders = {\n          google: googleAuthApi,\n          microsoft: microsoftAuthApi,\n          okta: oktaAuthApi,\n          onelogin: oneloginAuthApi,\n        };\n\n        return new KubernetesAuthProviders({ googleAuthApi, oidcProviders });\n      },\n    }),\n  ],\n  routes: {\n    entityContent: rootCatalogKubernetesRouteRef,\n  },\n});\n\n/**\n * Props of EntityKubernetesContent\n *\n * @public\n */\n\n\n\n\n\n\n\nexport const EntityKubernetesContent\n\n = kubernetesPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityKubernetesContent',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: rootCatalogKubernetesRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { pagerDutyApiRef, PagerDutyClient } from './api';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  discoveryApiRef,\n  configApiRef,\n  createComponentExtension,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'pagerduty',\n});\n\nexport const pagerDutyPlugin = createPlugin({\n  id: 'pagerduty',\n  apis: [\n    createApiFactory({\n      api: pagerDutyApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        configApi: configApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ configApi, discoveryApi, identityApi }) =>\n        PagerDutyClient.fromConfig(configApi, discoveryApi, identityApi),\n    }),\n  ],\n});\n\nexport const EntityPagerDutyCard = pagerDutyPlugin.provide(\n  createComponentExtension({\n    name: 'EntityPagerDutyCard',\n    component: {\n      lazy: () =>\n        import('./components/PagerDutyCard').then(m => m.PagerDutyCard),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useCallback, useState } from 'react';\nimport { makeStyles, Button } from '@material-ui/core';\n\n\nimport { usePagerdutyEntity } from '../../hooks';\nimport { TriggerDialog } from '../TriggerDialog';\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  buttonStyle: {\n    backgroundColor: theme.palette.error.main,\n    color: theme.palette.error.contrastText,\n    '&:hover': {\n      backgroundColor: theme.palette.error.dark,\n    },\n  },\n}));\n\nexport function TriggerButton(props) {\n  const { buttonStyle } = useStyles();\n  const { integrationKey } = usePagerdutyEntity();\n  const [dialogShown, setDialogShown] = useState(false);\n\n  const showDialog = useCallback(() => {\n    setDialogShown(true);\n  }, [setDialogShown]);\n  const hideDialog = useCallback(() => {\n    setDialogShown(false);\n  }, [setDialogShown]);\n\n  const disabled = !integrationKey;\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, {\n        onClick: showDialog,\n        variant: \"contained\",\n        className: disabled ? '' : buttonStyle,\n        disabled: disabled,}\n      \n        , integrationKey\n          ? props.children ?? 'Create Incident'\n          : 'Missing integration key'\n      )\n      , integrationKey && (\n        React.createElement(TriggerDialog, { showDialog: dialogShown, handleDialog: hideDialog,} )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class RollbarClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  async getAllProjects() {\n    return await this.get(`/projects`);\n  }\n\n  async getProject(projectName) {\n    return await this.get(`/projects/${projectName}`);\n  }\n\n  async getTopActiveItems(\n    project,\n    hours = 24,\n    environment = 'production',\n  ) {\n    return await this.get(\n      `/projects/${project}/top_active_items?environment=${environment}&hours=${hours}`,\n    );\n  }\n\n  async getProjectItems(project) {\n    return await this.get(`/projects/${project}/items`);\n  }\n\n   async get(path) {\n    const url = `${await this.discoveryApi.getBaseUrl('rollbar')}${path}`;\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const response = await fetch(url, {\n      headers: idToken ? { Authorization: `Bearer ${idToken}` } : {},\n    });\n\n    if (!response.ok) {\n      const payload = await response.text();\n      const message = `Request failed with ${response.status} ${response.statusText}, ${payload}`;\n      throw new Error(message);\n    }\n\n    return await response.json();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { rollbarApiRef } from './api/RollbarApi';\nimport { RollbarClient } from './api/RollbarClient';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'rollbar',\n});\n\nexport const rollbarPlugin = createPlugin({\n  id: 'rollbar',\n  apis: [\n    createApiFactory({\n      api: rollbarApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new RollbarClient({ discoveryApi, identityApi }),\n    }),\n  ],\n  routes: {\n    entityContent: rootRouteRef,\n  },\n});\n\nexport const EntityRollbarContent = rollbarPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityRollbarContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ProductionSentryApi, sentryApiRef } from './api';\nimport {\n  configApiRef,\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'sentry',\n});\n\nexport const sentryPlugin = createPlugin({\n  id: 'sentry',\n  apis: [\n    createApiFactory({\n      api: sentryApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ configApi, discoveryApi, identityApi }) =>\n        new ProductionSentryApi(\n          discoveryApi,\n          configApi.getString('sentry.organization'),\n          identityApi,\n        ),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { sentryPlugin, rootRouteRef } from './plugin';\nimport {\n  createComponentExtension,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\nexport const EntitySentryContent = sentryPlugin.provide(\n  createRoutableExtension({\n    name: 'EntitySentryContent',\n    mountPoint: rootRouteRef,\n    component: () =>\n      import('./components/SentryIssuesWidget').then(\n        ({ SentryIssuesWidget }) => {\n          const SentryPage = ({ statsFor, tableOptions }) => {\n            const { entity } = useEntity();\n            const defaultOptions = {\n              padding: 'dense',\n              paging: true,\n              search: false,\n              pageSize: 5,\n            };\n            return (\n              React.createElement(SentryIssuesWidget, {\n                entity: entity,\n                statsFor: statsFor || '24h',\n                tableOptions: { ...defaultOptions, ...tableOptions },}\n              )\n            );\n          };\n          return SentryPage;\n        },\n      ),\n  }),\n);\n\nexport const EntitySentryCard = sentryPlugin.provide(\n  createComponentExtension({\n    name: 'EntitySentryCard',\n    component: {\n      lazy: () =>\n        import('./components/SentryIssuesWidget').then(\n          ({ SentryIssuesWidget }) => {\n            const SentryCard = ({\n              statsFor,\n              tableOptions,\n            }) => {\n              const { entity } = useEntity();\n              return (\n                React.createElement(SentryIssuesWidget, {\n                  entity: entity,\n                  statsFor: statsFor || '24h',\n                  tableOptions: \n                    tableOptions || {\n                      padding: 'dense',\n                      paging: true,\n                      search: false,\n                      pageSize: 5,\n                    }\n                  ,}\n                )\n              );\n            };\n            return SentryCard;\n          },\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { Route, Routes } from 'react-router';\nimport { SentryIssuesWidget } from './SentryIssuesWidget';\n\nexport const Router = ({ entity }) => {\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, {\n        path: \"/\",\n        element: \n          React.createElement(SentryIssuesWidget, {\n            entity: entity,\n            statsFor: \"24h\",\n            tableOptions: {\n              padding: 'dense',\n              paging: true,\n              search: false,\n              pageSize: 5,\n            },}\n          )\n        ,}\n      ), \")\"\n\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'todo',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { todoApiRef, TodoClient } from './api';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { rootRouteRef } from './routes';\n\n/**\n * The Todo plugin instance.\n *\n * @public\n */\nexport const todoPlugin = createPlugin({\n  id: 'todo',\n  apis: [\n    createApiFactory({\n      api: todoApiRef,\n      deps: {\n        identityApi: identityApiRef,\n        discoveryApi: discoveryApiRef,\n      },\n      factory({ identityApi, discoveryApi }) {\n        return new TodoClient({ identityApi, discoveryApi });\n      },\n    }),\n  ],\n  routes: {\n    entityContent: rootRouteRef,\n  },\n});\n\n/**\n * An extension for displaying the list of todos on an entity page.\n *\n * @public\n */\nexport const EntityTodoContent = todoPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityTodoContent',\n    component: () => import('./components/TodoList').then(m => m.TodoList),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'new-relic-dashboard',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createPlugin,\n  configApiRef,\n  createApiFactory,\n  discoveryApiRef,\n  createComponentExtension,\n  fetchApiRef,\n} from '@backstage/core-plugin-api';\nimport { newRelicDashboardApiRef, NewRelicDashboardClient } from './api';\nimport { rootRouteRef } from './routes';\n\nexport const newRelicDashboardPlugin = createPlugin({\n  id: 'new-relic-dashboard',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: newRelicDashboardApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) =>\n        new NewRelicDashboardClient({\n          discoveryApi,\n          fetchApi,\n          baseUrl: configApi.getOptionalString('newrelicdashboard.baseUrl'),\n        }),\n    }),\n  ],\n});\nexport const EntityNewRelicDashboardContent = newRelicDashboardPlugin.provide(\n  createComponentExtension({\n    name: 'EntityNewRelicDashboardPage',\n    component: {\n      lazy: () => import('./Router').then(m => m.Router),\n    },\n  }),\n);\n\nexport const EntityNewRelicDashboardCard = newRelicDashboardPlugin.provide(\n  createComponentExtension({\n    name: 'EntityNewRelicDashboardListComponent',\n    component: {\n      lazy: () =>\n        import('./components/NewRelicDashboard/DashboardEntityList').then(\n          m => m.DashboardEntityList,\n        ),\n    },\n  }),\n);\n/**\n * Render dashboard snapshots from Newrelic in backstage. Use dashboards which have the tag `isDashboardPage: true`\n *\n * @remarks\n * This can be helpful for rendering dashboards outside of Entity Catalog.\n *\n * @public\n */\nexport const DashboardSnapshotComponent = newRelicDashboardPlugin.provide(\n  createComponentExtension({\n    name: 'DashboardSnapshotComponent',\n    component: {\n      lazy: () =>\n        import(\n          './components/NewRelicDashboard/DashboardSnapshotList/DashboardSnapshot'\n        ).then(m => m.DashboardSnapshot),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { gocdPlugin } from './plugin';\nimport { createComponentExtension } from '@backstage/core-plugin-api';\n\n/**\n * GoCD builds table component.\n *\n * @public\n */\nexport const EntityGoCdContent = gocdPlugin.provide(\n  createComponentExtension({\n    name: 'EntityGoCdContent',\n    component: {\n      lazy: () =>\n        import('./components/GoCdBuildsComponent').then(\n          m => m.GoCdBuildsComponent,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_API_CONSUMED_BY,\n  RELATION_API_PROVIDED_BY,\n  RELATION_CONSUMES_API,\n  RELATION_DEPENDENCY_OF,\n  RELATION_DEPENDS_ON,\n  RELATION_HAS_PART,\n  RELATION_PART_OF,\n  RELATION_PROVIDES_API,\n} from '@backstage/catalog-model';\nimport { EmptyState } from '@backstage/core-components';\nimport {\n  EntityApiDefinitionCard,\n  EntityConsumedApisCard,\n  EntityConsumingComponentsCard,\n  EntityHasApisCard,\n  EntityProvidedApisCard,\n  EntityProvidingComponentsCard,\n} from '@backstage/plugin-api-docs';\nimport {\n  EntityAzurePipelinesContent,\n  EntityAzureGitTagsContent,\n  EntityAzurePullRequestsContent,\n  isAzureDevOpsAvailable,\n  isAzurePipelinesAvailable,\n} from '@backstage/plugin-azure-devops';\nimport { EntityBadgesDialog } from '@backstage/plugin-badges';\nimport {\n  EntityAboutCard,\n  EntityDependsOnComponentsCard,\n  EntityDependsOnResourcesCard,\n  EntityHasComponentsCard,\n  EntityHasResourcesCard,\n  EntityHasSubcomponentsCard,\n  EntityHasSystemsCard,\n  EntityLayout,\n  EntityLinksCard,\n  EntityOrphanWarning,\n  EntityProcessingErrorsPanel,\n  EntitySwitch,\n  hasCatalogProcessingErrors,\n  isComponentType,\n  isKind,\n  isOrphan,\n} from '@backstage/plugin-catalog';\nimport {\n  Direction,\n  EntityCatalogGraphCard,\n} from '@backstage/plugin-catalog-graph';\nimport {\n  EntityCircleCIContent,\n  isCircleCIAvailable,\n} from '@backstage/plugin-circleci';\nimport {\n  EntityCloudbuildContent,\n  isCloudbuildAvailable,\n} from '@backstage/plugin-cloudbuild';\nimport { EntityCodeCoverageContent } from '@backstage/plugin-code-coverage';\nimport {\n  EntityGithubActionsContent,\n  EntityRecentGithubActionsRunsCard,\n  isGithubActionsAvailable,\n} from '@backstage/plugin-github-actions';\nimport {\n  EntityJenkinsContent,\n  EntityLatestJenkinsRunCard,\n  isJenkinsAvailable,\n} from '@backstage/plugin-jenkins';\nimport { EntityKafkaContent } from '@backstage/plugin-kafka';\nimport { EntityKubernetesContent } from '@backstage/plugin-kubernetes';\nimport {\n  EntityLastLighthouseAuditCard,\n  EntityLighthouseContent,\n  isLighthouseAvailable,\n} from '@backstage/plugin-lighthouse';\nimport {\n  EntityGroupProfileCard,\n  EntityMembersListCard,\n  EntityOwnershipCard,\n  EntityUserProfileCard,\n} from '@backstage/plugin-org';\nimport {\n  EntityPagerDutyCard,\n  isPagerDutyAvailable,\n} from '@backstage/plugin-pagerduty';\nimport {\n  EntityRollbarContent,\n  isRollbarAvailable,\n} from '@backstage/plugin-rollbar';\nimport { EntitySentryContent } from '@backstage/plugin-sentry';\nimport { EntityTechdocsContent } from '@backstage/plugin-techdocs';\nimport { EntityTodoContent } from '@backstage/plugin-todo';\nimport { Button, Grid } from '@material-ui/core';\nimport BadgeIcon from '@material-ui/icons/CallToAction';\n\nimport {\n  EntityGithubInsightsContent,\n  EntityGithubInsightsLanguagesCard,\n  EntityGithubInsightsReadmeCard,\n  EntityGithubInsightsReleasesCard,\n  isGithubInsightsAvailable,\n} from '@roadiehq/backstage-plugin-github-insights';\nimport {\n  EntityGithubPullRequestsContent,\n  EntityGithubPullRequestsOverviewCard,\n  isGithubPullRequestsAvailable,\n} from '@roadiehq/backstage-plugin-github-pull-requests';\nimport {\n  EntityTravisCIContent,\n  EntityTravisCIOverviewCard,\n  isTravisciAvailable,\n} from '@roadiehq/backstage-plugin-travis-ci';\nimport {\n  EntityBuildkiteContent,\n  isBuildkiteAvailable,\n} from '@roadiehq/backstage-plugin-buildkite';\nimport {\n  isNewRelicDashboardAvailable,\n  EntityNewRelicDashboardContent,\n  EntityNewRelicDashboardCard,\n} from '@backstage/plugin-newrelic-dashboard';\nimport { EntityGoCdContent, isGoCdAvailable } from '@backstage/plugin-gocd';\n\nimport React, { useMemo, useState } from 'react';\n\nimport { TechDocsAddons } from '@backstage/plugin-techdocs-react';\nimport {\n  TextSize,\n  ReportIssue,\n} from '@backstage/plugin-techdocs-module-addons-contrib';\n\nconst customEntityFilterKind = ['Component', 'API', 'System'];\n\nconst EntityLayoutWrapper = (props) => {\n  const [badgesDialogOpen, setBadgesDialogOpen] = useState(false);\n\n  const extraMenuItems = useMemo(() => {\n    return [\n      {\n        title: 'Badges',\n        Icon: BadgeIcon,\n        onClick: () => setBadgesDialogOpen(true),\n      },\n    ];\n  }, []);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(EntityLayout, { UNSTABLE_extraContextMenuItems: extraMenuItems,}\n        , props.children\n      )\n      , React.createElement(EntityBadgesDialog, {\n        open: badgesDialogOpen,\n        onClose: () => setBadgesDialogOpen(false),}\n      )\n    )\n  );\n};\n\nconst techdocsContent = (\n  React.createElement(EntityTechdocsContent, null\n    , React.createElement(TechDocsAddons, null\n      , React.createElement(TextSize, null )\n      , React.createElement(ReportIssue, null )\n    )\n  )\n);\n\n/**\n * NOTE: This page is designed to work on small screens such as mobile devices.\n * This is based on Material UI Grid. If breakpoints are used, each grid item must set the `xs` prop to a column size or to `true`,\n * since this does not default. If no breakpoints are used, the items will equitably share the asvailable space.\n * https://material-ui.com/components/grid/#basic-grid.\n */\n\nexport const cicdContent = (\n  React.createElement(EntitySwitch, null\n    , React.createElement(EntitySwitch.Case, { if: isJenkinsAvailable,}\n      , React.createElement(EntityJenkinsContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isBuildkiteAvailable,}\n      , React.createElement(EntityBuildkiteContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isCircleCIAvailable,}\n      , React.createElement(EntityCircleCIContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isCloudbuildAvailable,}\n      , React.createElement(EntityCloudbuildContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isTravisciAvailable,}\n      , React.createElement(EntityTravisCIContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isGoCdAvailable,}\n      , React.createElement(EntityGoCdContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isGithubActionsAvailable,}\n      , React.createElement(EntityGithubActionsContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isAzurePipelinesAvailable,}\n      , React.createElement(EntityAzurePipelinesContent, { defaultLimit: 25,} )\n    )\n\n    , React.createElement(EntitySwitch.Case, null\n      , React.createElement(EmptyState, {\n        title: \"No CI/CD available for this entity\"     ,\n        missing: \"info\",\n        description: \"You need to add an annotation to your component if you want to enable CI/CD for it. You can read more about annotations in Backstage by clicking the button below.\"                             ,\n        action: \n          React.createElement(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            href: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\",}\n          , \"Read more\"\n\n          )\n        ,}\n      )\n    )\n  )\n);\n\nconst cicdCard = (\n  React.createElement(EntitySwitch, null\n    , React.createElement(EntitySwitch.Case, { if: isJenkinsAvailable,}\n      , React.createElement(Grid, { item: true, sm: 6,}\n        , React.createElement(EntityLatestJenkinsRunCard, { branch: \"master\", variant: \"gridItem\",} )\n      )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isTravisciAvailable ,}\n      , React.createElement(Grid, { item: true, sm: 6,}\n        , React.createElement(EntityTravisCIOverviewCard, null )\n      )\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isGithubActionsAvailable,}\n      , React.createElement(Grid, { item: true, sm: 6,}\n        , React.createElement(EntityRecentGithubActionsRunsCard, { limit: 4, variant: \"gridItem\",} )\n      )\n    )\n  )\n);\n\nconst entityWarningContent = (\n  React.createElement(React.Fragment, null\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: isOrphan,}\n        , React.createElement(Grid, { item: true, xs: 12,}\n          , React.createElement(EntityOrphanWarning, null )\n        )\n      )\n    )\n\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: hasCatalogProcessingErrors,}\n        , React.createElement(Grid, { item: true, xs: 12,}\n          , React.createElement(EntityProcessingErrorsPanel, null )\n        )\n      )\n    )\n  )\n);\n\nconst errorsContent = (\n  React.createElement(EntitySwitch, null\n    , React.createElement(EntitySwitch.Case, { if: isRollbarAvailable,}\n      , React.createElement(EntityRollbarContent, null )\n    )\n\n    , React.createElement(EntitySwitch.Case, null\n      , React.createElement(EntitySentryContent, null )\n    )\n  )\n);\n\nconst pullRequestsContent = (\n  React.createElement(EntitySwitch, null\n    , React.createElement(EntitySwitch.Case, { if: isAzureDevOpsAvailable,}\n      , React.createElement(EntityAzurePullRequestsContent, { defaultLimit: 25,} )\n    )\n\n    , React.createElement(EntitySwitch.Case, null\n      , React.createElement(EntityGithubPullRequestsContent, null )\n    )\n  )\n);\n\nconst overviewContent = (\n  React.createElement(Grid, { container: true, spacing: 3, alignItems: \"stretch\",}\n    , entityWarningContent\n    , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n      , React.createElement(EntityAboutCard, { variant: \"gridItem\",} )\n    )\n\n    , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n      , React.createElement(EntityCatalogGraphCard, { variant: \"gridItem\", height: 400,} )\n    )\n\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: isPagerDutyAvailable,}\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityPagerDutyCard, null )\n        )\n      )\n    )\n\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: isNewRelicDashboardAvailable,}\n        , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n          , React.createElement(EntityNewRelicDashboardCard, null )\n        )\n      )\n    )\n\n    , React.createElement(Grid, { item: true, md: 4, xs: 12,}\n      , React.createElement(EntityLinksCard, null )\n    )\n\n    , cicdCard\n\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: isGithubInsightsAvailable,}\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityGithubInsightsLanguagesCard, null )\n          , React.createElement(EntityGithubInsightsReleasesCard, null )\n        )\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityGithubInsightsReadmeCard, { maxHeight: 350,} )\n        )\n      )\n    )\n\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: isLighthouseAvailable,}\n        , React.createElement(Grid, { item: true, sm: 4,}\n          , React.createElement(EntityLastLighthouseAuditCard, { variant: \"gridItem\",} )\n        )\n      )\n    )\n\n    , React.createElement(EntitySwitch, null\n      , React.createElement(EntitySwitch.Case, { if: isGithubPullRequestsAvailable,}\n        , React.createElement(Grid, { item: true, sm: 4,}\n          , React.createElement(EntityGithubPullRequestsOverviewCard, null )\n        )\n      )\n    )\n\n    , React.createElement(Grid, { item: true, md: 8, xs: 12,}\n      , React.createElement(EntityHasSubcomponentsCard, { variant: \"gridItem\",} )\n    )\n  )\n);\n\nconst serviceEntityPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , overviewContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/ci-cd\", title: \"CI/CD\",}\n      , cicdContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/errors\", title: \"Errors\",}\n      , errorsContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/api\", title: \"API\",}\n      , React.createElement(Grid, { container: true, spacing: 3, alignItems: \"stretch\",}\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityProvidedApisCard, null )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityConsumedApisCard, null )\n        )\n      )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/dependencies\", title: \"Dependencies\",}\n      , React.createElement(Grid, { container: true, spacing: 3, alignItems: \"stretch\",}\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityDependsOnComponentsCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityDependsOnResourcesCard, { variant: \"gridItem\",} )\n        )\n      )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/docs\", title: \"Docs\",}\n      , techdocsContent\n    )\n\n    , React.createElement(EntityLayout.Route, {\n      if: isNewRelicDashboardAvailable,\n      path: \"/newrelic-dashboard\",\n      title: \"New Relic Dashboard\"  ,}\n    \n      , React.createElement(EntityNewRelicDashboardContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/kubernetes\", title: \"Kubernetes\",}\n      , React.createElement(EntityKubernetesContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/pull-requests\", title: \"Pull Requests\" ,}\n      , pullRequestsContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/code-insights\", title: \"Code Insights\" ,}\n      , React.createElement(EntityGithubInsightsContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/code-coverage\", title: \"Code Coverage\" ,}\n      , React.createElement(EntityCodeCoverageContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/kafka\", title: \"Kafka\",}\n      , React.createElement(EntityKafkaContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/todos\", title: \"TODOs\",}\n      , React.createElement(EntityTodoContent, null )\n    )\n  )\n);\n\nconst websiteEntityPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , overviewContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/ci-cd\", title: \"CI/CD\",}\n      , cicdContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/lighthouse\", title: \"Lighthouse\",}\n      , React.createElement(EntityLighthouseContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/errors\", title: \"Errors\",}\n      , errorsContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/dependencies\", title: \"Dependencies\",}\n      , React.createElement(Grid, { container: true, spacing: 3, alignItems: \"stretch\",}\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityDependsOnComponentsCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityDependsOnResourcesCard, { variant: \"gridItem\",} )\n        )\n      )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/docs\", title: \"Docs\",}\n      , techdocsContent\n    )\n\n    , React.createElement(EntityLayout.Route, {\n      if: isNewRelicDashboardAvailable,\n      path: \"/newrelic-dashboard\",\n      title: \"New Relic Dashboard\"  ,}\n    \n      , React.createElement(EntityNewRelicDashboardContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/kubernetes\", title: \"Kubernetes\",}\n      , React.createElement(EntityKubernetesContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, {\n      if: isAzureDevOpsAvailable,\n      path: \"/git-tags\",\n      title: \"Git Tags\" ,}\n    \n      , React.createElement(EntityAzureGitTagsContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/pull-requests\", title: \"Pull Requests\" ,}\n      , pullRequestsContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/code-insights\", title: \"Code Insights\" ,}\n      , React.createElement(EntityGithubInsightsContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/code-coverage\", title: \"Code Coverage\" ,}\n      , React.createElement(EntityCodeCoverageContent, null )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/todos\", title: \"TODOs\",}\n      , React.createElement(EntityTodoContent, null )\n    )\n  )\n);\n\nconst defaultEntityPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , overviewContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/docs\", title: \"Docs\",}\n      , techdocsContent\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/todos\", title: \"TODOs\",}\n      , React.createElement(EntityTodoContent, null )\n    )\n  )\n);\n\nconst componentPage = (\n  React.createElement(EntitySwitch, null\n    , React.createElement(EntitySwitch.Case, { if: isComponentType('service'),}\n      , serviceEntityPage\n    )\n\n    , React.createElement(EntitySwitch.Case, { if: isComponentType('website'),}\n      , websiteEntityPage\n    )\n\n    , React.createElement(EntitySwitch.Case, null, defaultEntityPage)\n  )\n);\n\nconst apiPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , React.createElement(Grid, { container: true, spacing: 3,}\n        , entityWarningContent\n        , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n          , React.createElement(EntityAboutCard, null )\n        )\n        , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n          , React.createElement(EntityCatalogGraphCard, { variant: \"gridItem\", height: 400,} )\n        )\n        , React.createElement(Grid, { item: true, xs: 12,}\n          , React.createElement(Grid, { container: true,}\n            , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n              , React.createElement(EntityProvidingComponentsCard, null )\n            )\n            , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n              , React.createElement(EntityConsumingComponentsCard, null )\n            )\n          )\n        )\n      )\n    )\n\n    , React.createElement(EntityLayout.Route, { path: \"/definition\", title: \"Definition\",}\n      , React.createElement(Grid, { container: true, spacing: 3,}\n        , React.createElement(Grid, { item: true, xs: 12,}\n          , React.createElement(EntityApiDefinitionCard, null )\n        )\n      )\n    )\n  )\n);\n\nconst userPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , React.createElement(Grid, { container: true, spacing: 3,}\n        , entityWarningContent\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityUserProfileCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityOwnershipCard, {\n            variant: \"gridItem\",\n            entityFilterKind: customEntityFilterKind,}\n          )\n        )\n      )\n    )\n  )\n);\n\nconst groupPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , React.createElement(Grid, { container: true, spacing: 3,}\n        , entityWarningContent\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityGroupProfileCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n          , React.createElement(EntityOwnershipCard, {\n            variant: \"gridItem\",\n            entityFilterKind: customEntityFilterKind,}\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: 12,}\n          , React.createElement(EntityMembersListCard, null )\n        )\n      )\n    )\n  )\n);\n\nconst systemPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , React.createElement(Grid, { container: true, spacing: 3, alignItems: \"stretch\",}\n        , entityWarningContent\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityAboutCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n          , React.createElement(EntityCatalogGraphCard, { variant: \"gridItem\", height: 400,} )\n        )\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityHasComponentsCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityHasApisCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityHasResourcesCard, { variant: \"gridItem\",} )\n        )\n      )\n    )\n    , React.createElement(EntityLayout.Route, { path: \"/diagram\", title: \"Diagram\",}\n      , React.createElement(EntityCatalogGraphCard, {\n        variant: \"gridItem\",\n        direction: Direction.TOP_BOTTOM,\n        title: \"System Diagram\" ,\n        height: 700,\n        relations: [\n          RELATION_PART_OF,\n          RELATION_HAS_PART,\n          RELATION_API_CONSUMED_BY,\n          RELATION_API_PROVIDED_BY,\n          RELATION_CONSUMES_API,\n          RELATION_PROVIDES_API,\n          RELATION_DEPENDENCY_OF,\n          RELATION_DEPENDS_ON,\n        ],\n        unidirectional: false,}\n      )\n    )\n  )\n);\n\nconst domainPage = (\n  React.createElement(EntityLayoutWrapper, null\n    , React.createElement(EntityLayout.Route, { path: \"/\", title: \"Overview\",}\n      , React.createElement(Grid, { container: true, spacing: 3, alignItems: \"stretch\",}\n        , entityWarningContent\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityAboutCard, { variant: \"gridItem\",} )\n        )\n        , React.createElement(Grid, { item: true, md: 6, xs: 12,}\n          , React.createElement(EntityCatalogGraphCard, { variant: \"gridItem\", height: 400,} )\n        )\n        , React.createElement(Grid, { item: true, md: 6,}\n          , React.createElement(EntityHasSystemsCard, { variant: \"gridItem\",} )\n        )\n      )\n    )\n  )\n);\n\nexport const entityPage = (\n  React.createElement(EntitySwitch, null\n    , React.createElement(EntitySwitch.Case, { if: isKind('component'), children: componentPage,} )\n    , React.createElement(EntitySwitch.Case, { if: isKind('api'), children: apiPage,} )\n    , React.createElement(EntitySwitch.Case, { if: isKind('group'), children: groupPage,} )\n    , React.createElement(EntitySwitch.Case, { if: isKind('user'), children: userPage,} )\n    , React.createElement(EntitySwitch.Case, { if: isKind('system'), children: systemPage,} )\n    , React.createElement(EntitySwitch.Case, { if: isKind('domain'), children: domainPage,} )\n\n    , React.createElement(EntitySwitch.Case, null, defaultEntityPage)\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  HomePageRandomJoke,\n  ComponentAccordion,\n  ComponentTabs,\n  ComponentTab,\n  WelcomeTitle,\n  HeaderWorldClock,\n\n  HomePageStarredEntities,\n} from '@backstage/plugin-home';\nimport { Content, Header, Page } from '@backstage/core-components';\nimport { HomePageSearchBar } from '@backstage/plugin-search';\nimport { HomePageCalendar } from '@backstage/plugin-gcalendar';\nimport Grid from '@material-ui/core/Grid';\nimport React from 'react';\n\nconst clockConfigs = [\n  {\n    label: 'NYC',\n    timeZone: 'America/New_York',\n  },\n  {\n    label: 'UTC',\n    timeZone: 'UTC',\n  },\n  {\n    label: 'STO',\n    timeZone: 'Europe/Stockholm',\n  },\n  {\n    label: 'TYO',\n    timeZone: 'Asia/Tokyo',\n  },\n];\n\nexport const homePage = (\n  React.createElement(Page, { themeId: \"home\",}\n    , React.createElement(Header, { title: React.createElement(WelcomeTitle, null ), pageTitleOverride: \"Home\",}\n      , React.createElement(HeaderWorldClock, { clockConfigs: clockConfigs,} )\n    )\n    , React.createElement(Content, null\n      , React.createElement(Grid, { container: true, spacing: 3,}\n        , React.createElement(Grid, { item: true, xs: 12,}\n          , React.createElement(HomePageSearchBar, null )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 4,}\n          , React.createElement(HomePageRandomJoke, null )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 4,}\n          , React.createElement(HomePageRandomJoke, {\n            defaultCategory: \"any\",\n            Renderer: ComponentAccordion,}\n          )\n          , React.createElement(HomePageRandomJoke, {\n            title: \"Another Random Joke\"  ,\n            Renderer: ComponentAccordion,}\n          )\n          , React.createElement(HomePageRandomJoke, {\n            title: \"One More Random Joke\"   ,\n            defaultCategory: \"programming\",\n            Renderer: ComponentAccordion,}\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 4,}\n          , React.createElement(ComponentTabs, {\n            title: \"Random Jokes\" ,\n            tabs: [\n              {\n                label: 'Programming',\n                Component: () => (\n                  React.createElement(HomePageRandomJoke, {\n                    defaultCategory: \"programming\",\n                    Renderer: ComponentTab,}\n                  )\n                ),\n              },\n              {\n                label: 'Any',\n                Component: () => (\n                  React.createElement(HomePageRandomJoke, {\n                    defaultCategory: \"any\",\n                    Renderer: ComponentTab,}\n                  )\n                ),\n              },\n            ],}\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 4,}\n          , React.createElement(HomePageCalendar, null )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, md: 4,}\n          , React.createElement(HomePageStarredEntities, null )\n        )\n      )\n    )\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  svg: {\n    width: 'auto',\n    height: 30,\n  },\n  path: {\n    fill: '#7df3e1',\n  },\n});\nconst LogoFull = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('svg', {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2079.95 456.05\"   ,}\n    \n      , React.createElement('path', {\n        className: classes.path,\n        d: \"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z\",}\n      )\n    )\n  );\n};\n\nexport default LogoFull;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  svg: {\n    width: 'auto',\n    height: 28,\n  },\n  path: {\n    fill: '#7df3e1',\n  },\n});\n\nconst LogoIcon = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('svg', {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 337.46 428.5\"   ,}\n    \n      , React.createElement('path', {\n        className: classes.path,\n        d: \"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z\",}\n      )\n    )\n  );\n};\n\nexport default LogoIcon;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LocalStoredShortcuts, shortcutsApiRef } from './api';\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  storageApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const shortcutsPlugin = createPlugin({\n  id: 'shortcuts',\n  apis: [\n    createApiFactory({\n      api: shortcutsApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) =>\n        new LocalStoredShortcuts(storageApi.forBucket('shortcuts')),\n    }),\n  ],\n});\n\nexport const Shortcuts = shortcutsPlugin.provide(\n  createComponentExtension({\n    name: 'Shortcuts',\n    component: { lazy: () => import('./Shortcuts').then(m => m.Shortcuts) },\n  }),\n);\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  List,\n  makeStyles,\n  Paper,\n  useTheme,\n} from '@material-ui/core';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { Link, useContent } from '@backstage/core-components';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { CatalogSearchResultListItem } from '@backstage/plugin-catalog';\nimport {\n  catalogApiRef,\n  CATALOG_FILTER_EXISTS,\n} from '@backstage/plugin-catalog-react';\nimport {\n  DefaultResultListItem,\n  SearchBar,\n  SearchFilter,\n  searchPlugin,\n  SearchResult,\n  SearchResultPager,\n  SearchType,\n} from '@backstage/plugin-search';\nimport { useSearch } from '@backstage/plugin-search-react';\nimport { TechDocsSearchResultListItem } from '@backstage/plugin-techdocs';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    borderRadius: 30,\n    display: 'flex',\n    height: '2.4em',\n  },\n  filter: {\n    '& + &': {\n      marginTop: theme.spacing(2.5),\n    },\n  },\n  filters: {\n    padding: theme.spacing(2),\n    marginTop: theme.spacing(2),\n  },\n  input: {\n    flex: 1,\n  },\n  dialogActionsContainer: { padding: theme.spacing(1, 3) },\n  viewResultsLink: { verticalAlign: '0.5em' },\n}));\n\nexport const SearchModal = ({ toggleModal }) => {\n  const getSearchLink = useRouteRef(searchPlugin.routes.root);\n  const classes = useStyles();\n\n  const catalogApi = useApi(catalogApiRef);\n  const { term, types } = useSearch();\n  const { focusContent } = useContent();\n  const { transitions } = useTheme();\n\n  const handleResultClick = () => {\n    toggleModal();\n    setTimeout(focusContent, transitions.duration.leavingScreen);\n  };\n\n  const handleKeyPress = () => {\n    handleResultClick();\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogTitle, null\n        , React.createElement(Paper, { className: classes.container,}\n          , React.createElement(SearchBar, { className: classes.input,} )\n        )\n      )\n      , React.createElement(DialogContent, null\n        , React.createElement(Grid, { container: true, direction: \"column\",}\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(SearchType.Tabs, {\n              defaultValue: \"software-catalog\",\n              types: [\n                {\n                  value: 'software-catalog',\n                  name: 'Software Catalog',\n                },\n                {\n                  value: 'techdocs',\n                  name: 'Documentation',\n                },\n              ],}\n            )\n          )\n          , React.createElement(Grid, { item: true, container: true,}\n            , types.includes('techdocs') && (\n              React.createElement(Grid, { item: true, xs: 2,}\n                , React.createElement(SearchFilter.Select, {\n                  className: classes.filter,\n                  label: \"Entity\",\n                  name: \"name\",\n                  values: async () => {\n                    // Return a list of entities which are documented.\n                    const { items } = await catalogApi.getEntities({\n                      fields: ['metadata.name'],\n                      filter: {\n                        'metadata.annotations.backstage.io/techdocs-ref':\n                          CATALOG_FILTER_EXISTS,\n                      },\n                    });\n\n                    const names = items.map(entity => entity.metadata.name);\n                    names.sort();\n                    return names;\n                  },}\n                )\n              )\n            )\n            , React.createElement(Grid, { item: true, xs: 2,}\n              , React.createElement(SearchFilter.Select, {\n                className: classes.filter,\n                label: \"Kind\",\n                name: \"kind\",\n                values: ['Component', 'Template'],}\n              )\n            )\n            , React.createElement(Grid, { item: true, xs: 2,}\n              , React.createElement(SearchFilter.Select, {\n                className: classes.filter,\n                label: \"Lifecycle\",\n                name: \"lifecycle\",\n                values: ['experimental', 'production'],}\n              )\n            )\n            , React.createElement(Grid, {\n              item: true,\n              xs: types.includes('techdocs') ? 6 : 8,\n              container: true,\n              direction: \"row-reverse\",\n              justifyContent: \"flex-start\",\n              alignItems: \"center\",}\n            \n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Link, {\n                  onClick: () => {\n                    toggleModal();\n                    setTimeout(\n                      focusContent,\n                      transitions.duration.leavingScreen,\n                    );\n                  },\n                  to: `${getSearchLink()}?query=${term}`,}\n                \n                  , React.createElement('span', { className: classes.viewResultsLink,}, \"View Full Results\"\n\n                  )\n                  , React.createElement(LaunchIcon, { color: \"primary\",} )\n                )\n              )\n            )\n          )\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(SearchResult, null\n              , ({ results }) => (\n                React.createElement(List, null\n                  , results.map(({ type, document, highlight }) => {\n                    let resultItem;\n                    switch (type) {\n                      case 'software-catalog':\n                        resultItem = (\n                          React.createElement(CatalogSearchResultListItem, {\n                            key: document.location,\n                            result: document,\n                            highlight: highlight,}\n                          )\n                        );\n                        break;\n                      case 'techdocs':\n                        resultItem = (\n                          React.createElement(TechDocsSearchResultListItem, {\n                            key: document.location,\n                            result: document,\n                            highlight: highlight,}\n                          )\n                        );\n                        break;\n                      default:\n                        resultItem = (\n                          React.createElement(DefaultResultListItem, {\n                            key: document.location,\n                            result: document,\n                            highlight: highlight,}\n                          )\n                        );\n                    }\n                    return (\n                      React.createElement('div', {\n                        role: \"button\",\n                        tabIndex: 0,\n                        key: `${document.location}-btn`,\n                        onClick: handleResultClick,\n                        onKeyPress: handleKeyPress,}\n                      \n                        , resultItem\n                      )\n                    );\n                  })\n                )\n              )\n            )\n          )\n        )\n      )\n      , React.createElement(DialogActions, { className: classes.dialogActionsContainer,}\n        , React.createElement(Grid, { container: true, direction: \"row\",}\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(SearchResultPager, null )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Link, makeStyles } from '@material-ui/core';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport RuleIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport MapIcon from '@material-ui/icons/MyLocation';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport LibraryBooks from '@material-ui/icons/LibraryBooks';\nimport CreateComponentIcon from '@material-ui/icons/AddCircleOutline';\nimport SearchIcon from '@material-ui/icons/Search';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MoneyIcon from '@material-ui/icons/MonetizationOn';\nimport LogoFull from './LogoFull';\nimport LogoIcon from './LogoIcon';\nimport { NavLink } from 'react-router-dom';\nimport { GraphiQLIcon } from '@backstage/plugin-graphiql';\nimport {\n  Settings as SidebarSettings,\n  UserSettingsSignInAvatar,\n} from '@backstage/plugin-user-settings';\nimport { SidebarSearchModal } from '@backstage/plugin-search';\nimport { Shortcuts } from '@backstage/plugin-shortcuts';\nimport {\n  Sidebar,\n  sidebarConfig,\n  SidebarDivider,\n  SidebarGroup,\n  SidebarItem,\n  SidebarPage,\n  SidebarScrollWrapper,\n  SidebarSpace,\n  useSidebarOpenState,\n} from '@backstage/core-components';\nimport { MyGroupsSidebarItem } from '@backstage/plugin-org';\nimport GroupIcon from '@material-ui/icons/People';\nimport { SearchModal } from '../search/SearchModal';\n\nconst useSidebarLogoStyles = makeStyles({\n  root: {\n    width: sidebarConfig.drawerWidthClosed,\n    height: 3 * sidebarConfig.logoHeight,\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    alignItems: 'center',\n    marginBottom: -14,\n  },\n  link: {\n    width: sidebarConfig.drawerWidthClosed,\n    marginLeft: 24,\n  },\n});\n\nconst SidebarLogo = () => {\n  const classes = useSidebarLogoStyles();\n  const { isOpen } = useSidebarOpenState();\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Link, {\n        component: NavLink,\n        to: \"/\",\n        underline: \"none\",\n        className: classes.link,\n        'aria-label': \"Home\",}\n      \n        , isOpen ? React.createElement(LogoFull, null ) : React.createElement(LogoIcon, null )\n      )\n    )\n  );\n};\n\nexport const Root = ({ children }) => (\n  React.createElement(SidebarPage, null\n    , React.createElement(Sidebar, null\n      , React.createElement(SidebarLogo, null )\n      , React.createElement(SidebarGroup, { label: \"Search\", icon: React.createElement(SearchIcon, null ), to: \"/search\",}\n        , React.createElement(SidebarSearchModal, null\n          , ({ toggleModal }) => React.createElement(SearchModal, { toggleModal: toggleModal,} )\n        )\n      )\n      , React.createElement(SidebarDivider, null )\n      , React.createElement(SidebarGroup, { label: \"Menu\", icon: React.createElement(MenuIcon, null ),}\n        /* Global nav, not org-specific */\n        , React.createElement(SidebarItem, { icon: HomeIcon, to: \"catalog\", text: \"Home\",} )\n        , React.createElement(MyGroupsSidebarItem, {\n          singularTitle: \"My Squad\" ,\n          pluralTitle: \"My Squads\" ,\n          icon: GroupIcon,}\n        )\n        , React.createElement(SidebarItem, { icon: ExtensionIcon, to: \"api-docs\", text: \"APIs\",} )\n        , React.createElement(SidebarItem, { icon: LibraryBooks, to: \"docs\", text: \"Docs\",} )\n        , React.createElement(SidebarItem, { icon: LayersIcon, to: \"explore\", text: \"Explore\",} )\n        , React.createElement(SidebarItem, { icon: CreateComponentIcon, to: \"create\", text: \"Create...\",} )\n        /* End global nav */\n        , React.createElement(SidebarDivider, null )\n        , React.createElement(SidebarScrollWrapper, null\n          , React.createElement(SidebarItem, { icon: MapIcon, to: \"tech-radar\", text: \"Tech Radar\" ,} )\n          , React.createElement(SidebarItem, { icon: RuleIcon, to: \"lighthouse\", text: \"Lighthouse\",} )\n          , React.createElement(SidebarItem, {\n            icon: MoneyIcon,\n            to: \"cost-insights\",\n            text: \"Cost Insights\" ,}\n          )\n          , React.createElement(SidebarItem, { icon: GraphiQLIcon, to: \"graphiql\", text: \"GraphiQL\",} )\n        )\n        , React.createElement(SidebarDivider, null )\n        , React.createElement(Shortcuts, null )\n      )\n      , React.createElement(SidebarSpace, null )\n      , React.createElement(SidebarDivider, null )\n      , React.createElement(SidebarGroup, {\n        label: \"Settings\",\n        icon: React.createElement(UserSettingsSignInAvatar, null ),\n        to: \"/settings\",}\n      \n        , React.createElement(SidebarSettings, null )\n      )\n    )\n    , children\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport {\n  createScaffolderFieldExtension,\n\n  scaffolderPlugin,\n} from '@backstage/plugin-scaffolder';\n\nimport { TextField } from '@material-ui/core';\n\nconst TextValuePicker = (props) => {\n  const {\n    onChange,\n    required,\n    schema: { title, description },\n    rawErrors,\n    formData,\n    uiSchema: { 'ui:autofocus': autoFocus },\n    idSchema,\n    placeholder,\n  } = props;\n\n  return (\n    React.createElement(TextField, {\n      id: idSchema?.$id,\n      label: title,\n      placeholder: placeholder,\n      helperText: description,\n      required: required,\n      value: formData ?? '',\n      onChange: ({ target: { value } }) => onChange(value),\n      margin: \"normal\",\n      error: rawErrors?.length > 0 && !formData,\n      inputProps: { autoFocus },}\n    )\n  );\n};\n\nexport const LowerCaseValuePickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    name: 'LowerCaseValuePicker',\n    component: TextValuePicker,\n    validation: (value, validation) => {\n      if (value.toLocaleLowerCase('en-US') !== value) {\n        validation.addError('Only lowercase values are allowed.');\n      }\n    },\n  }),\n);\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const defaultPreviewTemplate = `# Edit the template parameters below to see how they will render in the scaffolder form UI\nparameters:\n  - title: Fill in some steps\n    required:\n      - name\n    properties:\n      name:\n        title: Name\n        type: string\n        description: Unique name of the component\n      owner:\n        title: Owner\n        type: string\n        description: Owner of the component\n        ui:field: OwnerPicker\n        ui:options:\n          allowedKinds:\n            - Group\n  - title: Choose a location\n    required:\n      - repoUrl\n    properties:\n      repoUrl:\n        title: Repository Location\n        type: string\n        ui:field: RepoUrlPicker\n        ui:options:\n          allowedHosts:\n            - github.com\n  - title: Custom Fields\n    required:\n      - lowerCaseValue\n    properties:\n      lowerCaseValue:\n        title: Lower Cased Value\n        type: string\n        ui:field: LowerCaseValuePicker\n`;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CatalogIcon,\n  Content,\n  DocsIcon,\n  Header,\n  Lifecycle,\n  Page,\n  useSidebarPinState,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { CatalogSearchResultListItem } from '@backstage/plugin-catalog';\nimport {\n  catalogApiRef,\n  CATALOG_FILTER_EXISTS,\n} from '@backstage/plugin-catalog-react';\nimport {\n  DefaultResultListItem,\n  SearchBar,\n  SearchFilter,\n  SearchResult,\n  SearchResultPager,\n  SearchType,\n} from '@backstage/plugin-search';\nimport { useSearch } from '@backstage/plugin-search-react';\nimport { TechDocsSearchResultListItem } from '@backstage/plugin-techdocs';\nimport { Grid, List, makeStyles, Paper, } from '@material-ui/core';\nimport React from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  bar: {\n    padding: theme.spacing(1, 0),\n  },\n  filter: {\n    '& + &': {\n      marginTop: theme.spacing(2.5),\n    },\n  },\n  filters: {\n    padding: theme.spacing(2),\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst SearchPage = () => {\n  const classes = useStyles();\n  const { isMobile } = useSidebarPinState();\n  const { types } = useSearch();\n  const catalogApi = useApi(catalogApiRef);\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , !isMobile && React.createElement(Header, { title: \"Search\", subtitle: React.createElement(Lifecycle, { alpha: true,} ),} )\n      , React.createElement(Content, null\n        , React.createElement(Grid, { container: true, direction: \"row\",}\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(Paper, { className: classes.bar,}\n              , React.createElement(SearchBar, { debounceTime: 100,} )\n            )\n          )\n          , !isMobile && (\n            React.createElement(Grid, { item: true, xs: 3,}\n              , React.createElement(SearchType.Accordion, {\n                name: \"Result Type\" ,\n                defaultValue: \"software-catalog\",\n                types: [\n                  {\n                    value: 'software-catalog',\n                    name: 'Software Catalog',\n                    icon: React.createElement(CatalogIcon, null ),\n                  },\n                  {\n                    value: 'techdocs',\n                    name: 'Documentation',\n                    icon: React.createElement(DocsIcon, null ),\n                  },\n                ],}\n              )\n              , React.createElement(Paper, { className: classes.filters,}\n                , types.includes('techdocs') && (\n                  React.createElement(SearchFilter.Select, {\n                    className: classes.filter,\n                    label: \"Entity\",\n                    name: \"name\",\n                    values: async () => {\n                      // Return a list of entities which are documented.\n                      const { items } = await catalogApi.getEntities({\n                        fields: ['metadata.name'],\n                        filter: {\n                          'metadata.annotations.backstage.io/techdocs-ref':\n                            CATALOG_FILTER_EXISTS,\n                        },\n                      });\n\n                      const names = items.map(entity => entity.metadata.name);\n                      names.sort();\n                      return names;\n                    },}\n                  )\n                )\n                , React.createElement(SearchFilter.Select, {\n                  className: classes.filter,\n                  label: \"Kind\",\n                  name: \"kind\",\n                  values: ['Component', 'Template'],}\n                )\n                , React.createElement(SearchFilter.Checkbox, {\n                  className: classes.filter,\n                  label: \"Lifecycle\",\n                  name: \"lifecycle\",\n                  values: ['experimental', 'production'],}\n                )\n              )\n            )\n          )\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(SearchResult, null\n              , ({ results }) => (\n                React.createElement(List, null\n                  , results.map(({ type, document, highlight }) => {\n                    switch (type) {\n                      case 'software-catalog':\n                        return (\n                          React.createElement(CatalogSearchResultListItem, {\n                            key: document.location,\n                            result: document,\n                            highlight: highlight,}\n                          )\n                        );\n                      case 'techdocs':\n                        return (\n                          React.createElement(TechDocsSearchResultListItem, {\n                            key: document.location,\n                            result: document,\n                            highlight: highlight,}\n                          )\n                        );\n                      default:\n                        return (\n                          React.createElement(DefaultResultListItem, {\n                            key: document.location,\n                            result: document,\n                            highlight: highlight,}\n                          )\n                        );\n                    }\n                  })\n                )\n              )\n            )\n            , React.createElement(SearchResultPager, null )\n          )\n        )\n      )\n    )\n  );\n};\n\nexport const searchPage = React.createElement(SearchPage, null );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  googleAuthApiRef,\n  gitlabAuthApiRef,\n  oktaAuthApiRef,\n  githubAuthApiRef,\n  microsoftAuthApiRef,\n  oneloginAuthApiRef,\n  bitbucketAuthApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const providers = [\n  {\n    id: 'google-auth-provider',\n    title: 'Google',\n    message: 'Sign In using Google',\n    apiRef: googleAuthApiRef,\n  },\n  {\n    id: 'microsoft-auth-provider',\n    title: 'Microsoft',\n    message: 'Sign In using Microsoft Azure AD',\n    apiRef: microsoftAuthApiRef,\n  },\n  {\n    id: 'gitlab-auth-provider',\n    title: 'GitLab',\n    message: 'Sign In using GitLab',\n    apiRef: gitlabAuthApiRef,\n  },\n  {\n    id: 'github-auth-provider',\n    title: 'GitHub',\n    message: 'Sign In using GitHub',\n    apiRef: githubAuthApiRef,\n  },\n  {\n    id: 'okta-auth-provider',\n    title: 'Okta',\n    message: 'Sign In using Okta',\n    apiRef: oktaAuthApiRef,\n  },\n  {\n    id: 'onelogin-auth-provider',\n    title: 'OneLogin',\n    message: 'Sign In using OneLogin',\n    apiRef: oneloginAuthApiRef,\n  },\n  {\n    id: 'bitbucket-auth-provider',\n    title: 'Bitbucket',\n    message: 'Sign In using Bitbucket',\n    apiRef: bitbucketAuthApiRef,\n  },\n];\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Page } from '@backstage/core-components';\nimport {\n  TechDocsReaderPageHeader,\n  TechDocsReaderPageSubheader,\n  TechDocsReaderPageContent,\n} from '@backstage/plugin-techdocs';\n\nconst DefaultTechDocsPage = () => {\n  return (\n    React.createElement(Page, { themeId: \"documentation\",}\n      , React.createElement(TechDocsReaderPageHeader, null )\n      , React.createElement(TechDocsReaderPageSubheader, null )\n      , React.createElement(TechDocsReaderPageContent, null )\n    )\n  );\n};\n\nexport const techDocsPage = React.createElement(DefaultTechDocsPage, null );\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'apache-airflow',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { rootRouteRef } from './routes';\nimport { apacheAirflowApiRef, ApacheAirflowClient } from './api';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  configApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const apacheAirflowPlugin = createPlugin({\n  id: 'apache-airflow',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: apacheAirflowApiRef,\n      deps: { configApi: configApiRef, discoveryApi: discoveryApiRef },\n      factory: ({ configApi, discoveryApi }) =>\n        new ApacheAirflowClient({\n          discoveryApi,\n          baseUrl: configApi.getString('apacheAirflow.baseUrl'),\n        }),\n    }),\n  ],\n});\n\nexport const ApacheAirflowPage = apacheAirflowPlugin.provide(\n  createRoutableExtension({\n    name: 'ApacheAirflowPage',\n    component: () => import('./components/HomePage').then(m => m.HomePage),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  RELATION_API_CONSUMED_BY,\n  RELATION_API_PROVIDED_BY,\n  RELATION_CONSUMES_API,\n  RELATION_DEPENDENCY_OF,\n  RELATION_DEPENDS_ON,\n  RELATION_HAS_PART,\n  RELATION_OWNED_BY,\n  RELATION_OWNER_OF,\n  RELATION_PART_OF,\n  RELATION_PROVIDES_API,\n} from '@backstage/catalog-model';\nimport { createApp } from '@backstage/app-defaults';\nimport { FlatRoutes } from '@backstage/core-app-api';\nimport {\n  AlertDisplay,\n  OAuthRequestDialog,\n  SignInPage,\n} from '@backstage/core-components';\nimport { apiDocsPlugin, ApiExplorerPage } from '@backstage/plugin-api-docs';\nimport { AzurePullRequestsPage } from '@backstage/plugin-azure-devops';\nimport {\n  CatalogEntityPage,\n  CatalogIndexPage,\n  catalogPlugin,\n} from '@backstage/plugin-catalog';\nimport { CatalogGraphPage } from '@backstage/plugin-catalog-graph';\nimport {\n  CatalogImportPage,\n  catalogImportPlugin,\n} from '@backstage/plugin-catalog-import';\nimport {\n  CostInsightsLabelDataflowInstructionsPage,\n  CostInsightsPage,\n  CostInsightsProjectGrowthInstructionsPage,\n} from '@backstage/plugin-cost-insights';\nimport { orgPlugin } from '@backstage/plugin-org';\nimport { ExplorePage } from '@backstage/plugin-explore';\nimport { GcpProjectsPage } from '@backstage/plugin-gcp-projects';\nimport { GraphiQLPage } from '@backstage/plugin-graphiql';\nimport { HomepageCompositionRoot } from '@backstage/plugin-home';\nimport { LighthousePage } from '@backstage/plugin-lighthouse';\nimport { NewRelicPage } from '@backstage/plugin-newrelic';\nimport {\n  ScaffolderFieldExtensions,\n  ScaffolderPage,\n  scaffolderPlugin,\n} from '@backstage/plugin-scaffolder';\nimport { SearchPage } from '@backstage/plugin-search';\nimport { TechRadarPage } from '@backstage/plugin-tech-radar';\nimport {\n  TechDocsIndexPage,\n  TechDocsReaderPage,\n  techdocsPlugin,\n} from '@backstage/plugin-techdocs';\nimport { TechDocsAddons } from '@backstage/plugin-techdocs-react';\nimport {\n  ExpandableNavigation,\n  ReportIssue,\n  TextSize,\n} from '@backstage/plugin-techdocs-module-addons-contrib';\nimport {\n  UserSettingsPage,\n  UserSettingsTab,\n} from '@backstage/plugin-user-settings';\nimport { AdvancedSettings } from './components/advancedSettings';\nimport AlarmIcon from '@material-ui/icons/Alarm';\nimport React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport { Navigate, Route } from 'react-router';\nimport { apis } from './apis';\nimport { entityPage } from './components/catalog/EntityPage';\nimport { homePage } from './components/home/HomePage';\nimport { Root } from './components/Root';\nimport { LowerCaseValuePickerFieldExtension } from './components/scaffolder/customScaffolderExtensions';\nimport { defaultPreviewTemplate } from './components/scaffolder/defaultPreviewTemplate';\nimport { searchPage } from './components/search/SearchPage';\nimport { providers } from './identityProviders';\nimport * as plugins from './plugins';\n\nimport { techDocsPage } from './components/techdocs/TechDocsPage';\nimport { ApacheAirflowPage } from '@backstage/plugin-apache-airflow';\nimport { PermissionedRoute } from '@backstage/plugin-permission-react';\nimport { catalogEntityCreatePermission } from '@backstage/plugin-catalog-common';\n\nconst app = createApp({\n  apis,\n  plugins: Object.values(plugins),\n  icons: {\n    // Custom icon example\n    alert: AlarmIcon,\n  },\n  components: {\n    SignInPage: props => {\n      return (\n        React.createElement(SignInPage, {\n          ...props,\n          providers: ['guest', 'custom', ...providers],\n          title: \"Select a sign-in method\"   ,\n          align: \"center\",}\n        )\n      );\n    },\n  },\n  bindRoutes({ bind }) {\n    bind(catalogPlugin.externalRoutes, {\n      createComponent: scaffolderPlugin.routes.root,\n      viewTechDoc: techdocsPlugin.routes.docRoot,\n    });\n    bind(apiDocsPlugin.externalRoutes, {\n      registerApi: catalogImportPlugin.routes.importPage,\n    });\n    bind(scaffolderPlugin.externalRoutes, {\n      registerComponent: catalogImportPlugin.routes.importPage,\n    });\n    bind(orgPlugin.externalRoutes, {\n      catalogIndex: catalogPlugin.routes.catalogIndex,\n    });\n  },\n});\n\nconst AppProvider = app.getProvider();\nconst AppRouter = app.getRouter();\n\nconst routes = (\n  React.createElement(FlatRoutes, null\n    , React.createElement(Navigate, { key: \"/\", to: \"catalog\",} )\n    /* TODO(rubenl): Move this to / once its more mature and components exist */\n    , React.createElement(Route, { path: \"/home\", element: React.createElement(HomepageCompositionRoot, null ),}\n      , homePage\n    )\n    , React.createElement(Route, { path: \"/catalog\", element: React.createElement(CatalogIndexPage, null ),} )\n    , React.createElement(Route, {\n      path: \"/catalog/:namespace/:kind/:name\",\n      element: React.createElement(CatalogEntityPage, null ),}\n    \n      , entityPage\n    )\n    , React.createElement(PermissionedRoute, {\n      path: \"/catalog-import\",\n      permission: catalogEntityCreatePermission,\n      element: React.createElement(CatalogImportPage, null ),}\n    )\n    , React.createElement(Route, {\n      path: \"/catalog-graph\",\n      element: \n        React.createElement(CatalogGraphPage, {\n          initialState: {\n            selectedKinds: ['component', 'domain', 'system', 'api', 'group'],\n            selectedRelations: [\n              RELATION_OWNER_OF,\n              RELATION_OWNED_BY,\n              RELATION_CONSUMES_API,\n              RELATION_API_CONSUMED_BY,\n              RELATION_PROVIDES_API,\n              RELATION_API_PROVIDED_BY,\n              RELATION_HAS_PART,\n              RELATION_PART_OF,\n              RELATION_DEPENDS_ON,\n              RELATION_DEPENDENCY_OF,\n            ],\n          },}\n        )\n      ,}\n    )\n    , React.createElement(Route, { path: \"/docs\", element: React.createElement(TechDocsIndexPage, null ),} )\n    , React.createElement(Route, {\n      path: \"/docs/:namespace/:kind/:name/*\",\n      element: React.createElement(TechDocsReaderPage, null ),}\n    \n      , techDocsPage\n      , React.createElement(TechDocsAddons, null\n        , React.createElement(ExpandableNavigation, null )\n        , React.createElement(ReportIssue, null )\n        , React.createElement(TextSize, null )\n      )\n    )\n    , React.createElement(Route, {\n      path: \"/create\",\n      element: \n        React.createElement(ScaffolderPage, {\n          defaultPreviewTemplate: defaultPreviewTemplate,\n          groups: [\n            {\n              title: 'Recommended',\n              filter: entity =>\n                entity?.metadata?.tags?.includes('recommended') ?? false,\n            },\n          ],}\n        )\n      ,}\n    \n      , React.createElement(ScaffolderFieldExtensions, null\n        , React.createElement(LowerCaseValuePickerFieldExtension, null )\n      )\n    )\n    , React.createElement(Route, { path: \"/explore\", element: React.createElement(ExplorePage, null ),} )\n    , React.createElement(Route, {\n      path: \"/tech-radar\",\n      element: React.createElement(TechRadarPage, { width: 1500, height: 800,} ),}\n    )\n    , React.createElement(Route, { path: \"/graphiql\", element: React.createElement(GraphiQLPage, null ),} )\n    , React.createElement(Route, { path: \"/lighthouse\", element: React.createElement(LighthousePage, null ),} )\n    , React.createElement(Route, { path: \"/api-docs\", element: React.createElement(ApiExplorerPage, null ),} )\n    , React.createElement(Route, { path: \"/gcp-projects\", element: React.createElement(GcpProjectsPage, null ),} )\n    , React.createElement(Route, { path: \"/newrelic\", element: React.createElement(NewRelicPage, null ),} )\n    , React.createElement(Route, { path: \"/search\", element: React.createElement(SearchPage, null ),}\n      , searchPage\n    )\n    , React.createElement(Route, { path: \"/cost-insights\", element: React.createElement(CostInsightsPage, null ),} )\n    , React.createElement(Route, {\n      path: \"/cost-insights/investigating-growth\",\n      element: React.createElement(CostInsightsProjectGrowthInstructionsPage, null ),}\n    )\n    , React.createElement(Route, {\n      path: \"/cost-insights/labeling-jobs\",\n      element: React.createElement(CostInsightsLabelDataflowInstructionsPage, null ),}\n    )\n    , React.createElement(Route, { path: \"/settings\", element: React.createElement(UserSettingsPage, null ),}\n      , React.createElement(UserSettingsTab, { path: \"/advanced\", title: \"Advanced\",}\n        , React.createElement(AdvancedSettings, null )\n      )\n    )\n    , React.createElement(Route, { path: \"/azure-pull-requests\", element: React.createElement(AzurePullRequestsPage, null ),} )\n    , React.createElement(Route, { path: \"/apache-airflow\", element: React.createElement(ApacheAirflowPage, null ),} )\n  )\n);\n\nconst App = () => (\n  React.createElement(AppProvider, null\n    , React.createElement(AlertDisplay, null )\n    , React.createElement(OAuthRequestDialog, null )\n    , React.createElement(AppRouter, null\n      , React.createElement(Root, null, routes)\n    )\n  )\n);\n\nexport default hot(App);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport '@backstage/cli/asset-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(React.createElement(App, null ), document.getElementById('root'));\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This symbol can be used in place of a value when passed to filters in e.g.\n * {@link CatalogClient.getEntities}, to signify that you want to filter on the\n * presence of that key no matter what its value is.\n *\n * @public\n */\nexport const CATALOG_FILTER_EXISTS = Symbol.for(\n  // Random UUID to ensure no collisions\n  'CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111',\n);\n\n/**\n * The request type for {@link CatalogClient.getEntities}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  parseEntityRef,\n  stringifyEntityRef,\n  stringifyLocationRef,\n} from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\nimport {\n  CATALOG_FILTER_EXISTS,\n\n\n\n\n\n\n\n\n\n\n\n} from './types/api';\n\n\n\n/**\n * A frontend and backend compatible client for communicating with the Backstage\n * software catalog.\n *\n * @public\n */\nexport class CatalogClient  {\n    discoveryApi;\n    fetchApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntityAncestors}\n   */\n  async getEntityAncestors(\n    request,\n    options,\n  ) {\n    const { kind, namespace, name } = parseEntityRef(request.entityRef);\n    return await this.requestRequired(\n      'GET',\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace,\n      )}/${encodeURIComponent(name)}/ancestry`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getLocationById}\n   */\n  async getLocationById(\n    id,\n    options,\n  ) {\n    return await this.requestOptional(\n      'GET',\n      `/locations/${encodeURIComponent(id)}`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntities}\n   */\n  async getEntities(\n    request,\n    options,\n  ) {\n    const { filter = [], fields = [], offset, limit, after } = request ?? {};\n    const params = [];\n\n    // filter param can occur multiple times, for example\n    // /api/catalog/entities?filter=metadata.name=wayback-search,kind=component&filter=metadata.name=www-artist,kind=component'\n    // the \"outer array\" defined by `filter` occurrences corresponds to \"anyOf\" filters\n    // the \"inner array\" defined within a `filter` param corresponds to \"allOf\" filters\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === 'string') {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`,\n            );\n          }\n        }\n      }\n\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(',')}`);\n      }\n    }\n\n    if (fields.length) {\n      params.push(`fields=${fields.map(encodeURIComponent).join(',')}`);\n    }\n\n    if (offset !== undefined) {\n      params.push(`offset=${offset}`);\n    }\n    if (limit !== undefined) {\n      params.push(`limit=${limit}`);\n    }\n    if (after !== undefined) {\n      params.push(`after=${encodeURIComponent(after)}`);\n    }\n\n    const query = params.length ? `?${params.join('&')}` : '';\n    const entities = await this.requestRequired(\n      'GET',\n      `/entities${query}`,\n      options,\n    );\n\n    const refCompare = (a, b) => {\n      // in case field filtering is used, these fields might not be part of the response\n      if (\n        a.metadata?.name === undefined ||\n        a.kind === undefined ||\n        b.metadata?.name === undefined ||\n        b.kind === undefined\n      ) {\n        return 0;\n      }\n\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n\n    return { items: entities.sort(refCompare) };\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntityByRef}\n   */\n  async getEntityByRef(\n    entityRef,\n    options,\n  ) {\n    const { kind, namespace, name } = parseEntityRef(entityRef);\n    return this.requestOptional(\n      'GET',\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace,\n      )}/${encodeURIComponent(name)}`,\n      options,\n    );\n  }\n\n  // NOTE(freben): When we deprecate getEntityByName from the interface, we may\n  // still want to leave this implementation in place for quite some time\n  // longer, to minimize the risk for breakages. Suggested date for removal:\n  // August 2022\n  /**\n   * @deprecated Use getEntityByRef instead\n   */\n  async getEntityByName(\n    compoundName,\n    options,\n  ) {\n    const { kind, namespace = 'default', name } = compoundName;\n    return this.requestOptional(\n      'GET',\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace,\n      )}/${encodeURIComponent(name)}`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.refreshEntity}\n   */\n  async refreshEntity(entityRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl('catalog')}/refresh`,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(options?.token && { Authorization: `Bearer ${options?.token}` }),\n        },\n        method: 'POST',\n        body: JSON.stringify({ entityRef }),\n      },\n    );\n\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getEntityFacets}\n   */\n  async getEntityFacets(\n    request,\n    options,\n  ) {\n    const { filter = [], facets } = request;\n    const params = [];\n\n    // filter param can occur multiple times, for example\n    // /api/catalog/entities?filter=metadata.name=wayback-search,kind=component&filter=metadata.name=www-artist,kind=component'\n    // the \"outer array\" defined by `filter` occurrences corresponds to \"anyOf\" filters\n    // the \"inner array\" defined within a `filter` param corresponds to \"allOf\" filters\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === 'string') {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`,\n            );\n          }\n        }\n      }\n\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(',')}`);\n      }\n    }\n\n    for (const facet of facets) {\n      params.push(`facet=${encodeURIComponent(facet)}`);\n    }\n\n    const query = params.length ? `?${params.join('&')}` : '';\n    return await this.requestOptional('GET', `/entity-facets${query}`, options);\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.addLocation}\n   */\n  async addLocation(\n    { type = 'url', target, dryRun },\n    options,\n  ) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl('catalog')}/locations${\n        dryRun ? '?dryRun=true' : ''\n      }`,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(options?.token && { Authorization: `Bearer ${options?.token}` }),\n        },\n        method: 'POST',\n        body: JSON.stringify({ type, target }),\n      },\n    );\n\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n\n    const { location, entities, exists } = await response.json();\n\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n\n    return {\n      location,\n      entities,\n      exists,\n    };\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.getLocationByRef}\n   */\n  async getLocationByRef(\n    locationRef,\n    options,\n  ) {\n    const all = await this.requestRequired(\n      'GET',\n      '/locations',\n      options,\n    );\n    return all\n      .map(r => r.data)\n      .find(l => locationRef === stringifyLocationRef(l));\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.removeLocationById}\n   */\n  async removeLocationById(\n    id,\n    options,\n  ) {\n    await this.requestIgnored(\n      'DELETE',\n      `/locations/${encodeURIComponent(id)}`,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc CatalogApi.removeEntityByUid}\n   */\n  async removeEntityByUid(\n    uid,\n    options,\n  ) {\n    await this.requestIgnored(\n      'DELETE',\n      `/entities/by-uid/${encodeURIComponent(uid)}`,\n      options,\n    );\n  }\n\n  //\n  // Private methods\n  //\n\n   async requestIgnored(\n    method,\n    path,\n    options,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('catalog')}${path}`;\n    const headers = options?.token\n      ? { Authorization: `Bearer ${options.token}` }\n      : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n\n   async requestRequired(\n    method,\n    path,\n    options,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('catalog')}${path}`;\n    const headers = options?.token\n      ? { Authorization: `Bearer ${options.token}` }\n      : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n\n   async requestOptional(\n    method,\n    path,\n    options,\n  ) {\n    const url = `${await this.discoveryApi.getBaseUrl('catalog')}${path}`;\n    const headers = options?.token\n      ? { Authorization: `Bearer ${options.token}` }\n      : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        return undefined;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The entity `status.items[].type` for the status of the processing engine in\n * regards to an entity.\n *\n * @public\n */\nexport const ENTITY_STATUS_CATALOG_PROCESSING_TYPE =\n  'backstage.io/catalog-processing';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The namespace that entities without an explicit namespace fall into.\n *\n * @public\n */\nexport const DEFAULT_NAMESPACE = 'default';\n\n/**\n * Annotation for linking to entity page from catalog pages.\n *\n * @public\n */\nexport const ANNOTATION_VIEW_URL = 'backstage.io/view-url';\n\n/**\n * Annotation for linking to entity edit page from catalog pages.\n *\n * @public\n */\nexport const ANNOTATION_EDIT_URL = 'backstage.io/edit-url';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport lodash from 'lodash';\n\nimport { DEFAULT_NAMESPACE } from '../constants';\n\n\n/**\n * Sets a default namespace if none was set.\n *\n * @public\n */\nexport class DefaultNamespaceEntityPolicy  {\n    namespace;\n\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    this.namespace = namespace;\n  }\n\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport lodash from 'lodash';\n\n/**\n * Contains various helper validation and normalization functions that can be\n * composed to form a Validator.\n *\n * @public\n */\nexport class CommonValidatorFunctions {\n  /**\n   * Checks that the value is on the form <suffix> or <prefix><separator><suffix>, and validates\n   * those parts separately.\n   *\n   * @param value - The value to check\n   * @param separator - The separator between parts\n   * @param isValidPrefix - Checks that the part before the separator is valid, if present\n   * @param isValidSuffix - Checks that the part after the separator (or the entire value if there is no separator) is valid\n   */\n  static isValidPrefixAndOrSuffix(\n    value,\n    separator,\n    isValidPrefix,\n    isValidSuffix,\n  ) {\n    if (typeof value !== 'string') {\n      return false;\n    }\n\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n\n    return false;\n  }\n\n  /**\n   * Checks that the value can be safely transferred as JSON.\n   *\n   * @param value - The value to check\n   */\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Checks that the value is a valid DNS subdomain name.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsSubdomain(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 253 &&\n      value.split('.').every(CommonValidatorFunctions.isValidDnsLabel)\n    );\n  }\n\n  /**\n   * Checks that the value is a valid DNS label.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsLabel(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-z0-9]+(\\-[a-z0-9]+)*$/.test(value)\n    );\n  }\n\n  /**\n   * Checks that the value is a valid tag.\n   *\n   * @deprecated This will be removed in a future release\n   * @param value - The value to check\n   */\n  static isValidTag(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value)\n    );\n  }\n\n  /**\n   * Checks that the value is a valid string URL.\n   *\n   * @param value - The value to check\n   */\n  static isValidUrl(value) {\n    if (typeof value !== 'string') {\n      return false;\n    }\n\n    try {\n      // eslint-disable-next-line no-new\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Checks that the value is a non empty string value.\n   *\n   * @deprecated use isNonEmptyString instead\n   * @param value - The value to check\n   */\n  static isValidString(value) {\n    return typeof value === 'string' && value?.trim()?.length >= 1;\n  }\n\n  /**\n   * Checks that the value is a string value that's not empty.\n   *\n   * @param value - The value to check\n   */\n  static isNonEmptyString(value) {\n    return typeof value === 'string' && value?.trim()?.length >= 1;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Ajv, { } from 'ajv';\nimport entitySchema from '../schema/Entity.schema.json';\nimport entityEnvelopeSchema from '../schema/EntityEnvelope.schema.json';\nimport entityMetaSchema from '../schema/EntityMeta.schema.json';\nimport commonSchema from '../schema/shared/common.schema.json';\n\n// A local cache of compiled schemas, to avoid duplicate work.\n// The keys are JSON stringified versions of the schema\nconst compiledSchemaCache = new Map();\n\n// The core schemas that others can depend on\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema,\n];\n\nexport function throwAjvError(\n  errors,\n) {\n  if (!errors?.length) {\n    throw new TypeError('Unknown error');\n  }\n\n  const error = errors[0];\n  throw new TypeError(\n    `${error.instancePath || '<root>'} ${error.message}${\n      error.params\n        ? ` - ${Object.entries(error.params)\n            .map(([key, val]) => `${key}: ${val}`)\n            .join(', ')}`\n        : ''\n    }`,\n  );\n}\n\n// Compiles the given schema, and makes sure to also grab any core dependencies\n// that it depends on\nexport function compileAjvSchema(\n  schema,\n  options = {},\n) {\n  const disableCache = options?.disableCache ?? false;\n  const cacheKey = disableCache ? '' : JSON.stringify(schema);\n\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true,\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, undefined, undefined, true);\n  }\n  const compiled = ajv.compile(schema);\n\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n\n  return compiled;\n}\n\n// Find refs in the given schema and recursively in all known schemas it\n// targets, collecting that list of schemas as we go\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== 'object') {\n    return [];\n  }\n\n  const seen = new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n\n  const selected = new Array();\n\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n\n        const match = refDependencyCandidates.find(c => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n\n  return selected;\n}\n\n// Naively step through the entire schema looking for \"$ref\": \"x\" pairs. The\n// resulting iterator may contain duplicates. Ignores fragments, i.e. for a ref\n// of \"a#b\", it will just yield \"a\".\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === 'object' && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === '$ref' && typeof value === 'string') {\n          yield value.split('#')[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport entityEnvelopeSchema from '../schema/EntityEnvelope.schema.json';\nimport { compileAjvSchema, throwAjvError } from './ajv';\n\n/**\n * Creates a validation function that takes some arbitrary data, and either\n * returns that data cast to an {@link EntityEnvelope} (or the given subtype)\n * if it matches that schema, or throws a {@link globals#TypeError} describing the\n * errors.\n *\n * @remarks\n *\n * Note that this validator is only meant for applying the base schema checks;\n * it does not take custom policies or additional processor based validation\n * into account.\n *\n * By default, the plain `EntityEnvelope` schema is used. If you pass in your\n * own, it may contain `$ref` references to the following, which are resolved\n * automatically for you:\n *\n * - {@link EntityEnvelope}\n * - {@link Entity}\n * - {@link EntityMeta}\n * - `common#<id>`\n *\n * See also {@link https://github.com/backstage/backstage/tree/master/packages/catalog-model/src/schema}\n *\n * @public\n *\n */\nexport function entityEnvelopeSchemaValidator\n\n(schema) {\n  const validate = compileAjvSchema(\n    schema ? (schema ) : entityEnvelopeSchema,\n  );\n\n  return data => {\n    const result = validate(data);\n    if (result === true) {\n      return data ;\n    }\n\n    throw throwAjvError(validate.errors);\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { compileAjvSchema, throwAjvError } from './ajv';\n\n/**\n * Creates a validation function that takes some arbitrary data, and either\n * returns that data cast to a `T` if it matches that schema, or `false` if the\n * schema apiVersion/kind didn't apply to that data, or throws a\n * {@link globals#TypeError} describing actual errors.\n *\n * @remarks\n *\n * This validator is highly specialized, in that it has special treatment of\n * the `kind` and `apiVersion` root keys. This only works if your schema has\n * their rule set to `\"enum\"`:\n *\n * ```\n * \"apiVersion\": {\n *    \"enum\": [\"backstage.io/v1alpha1\", \"backstage.io/v1beta1\"]\n * },\n * \"kind\": {\n *   \"enum\": [\"Group\"]\n * },\n * ```\n *\n * In the above example, the created validator will return `false` if and only\n * if the kind and/or apiVersion mismatch.\n *\n * Note that this validator is only meant for applying the base schema checks;\n * it does not take custom policies or additional processor based validation\n * into account.\n *\n * The given schema may contain `$ref` references to the following, which are\n * resolved automatically for you:\n *\n * - {@link Entity}\n *\n * - {@link EntityEnvelope}\n *\n * - {@link EntityMeta}\n *\n * - `common#<id>`\n * @see {@link https://github.com/backstage/backstage/tree/master/packages/catalog-model/src/schema}\n *\n * @public\n */\nexport function entityKindSchemaValidator(\n  schema,\n) {\n  const validate = compileAjvSchema(schema );\n\n  return data => {\n    const result = validate(data);\n    if (result === true) {\n      return data ;\n    }\n\n    // Only in the case where kind and/or apiVersion have enum mismatches AND\n    // have NO other errors, we call it a soft error.\n    const softCandidates = validate.errors?.filter(e =>\n      ['/kind', '/apiVersion'].includes(e.instancePath),\n    );\n    if (\n      softCandidates?.length &&\n      softCandidates.every(e => e.keyword === 'enum')\n    ) {\n      return false;\n    }\n\n    throw throwAjvError(validate.errors);\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport entitySchema from '../schema/Entity.schema.json';\nimport { compileAjvSchema, throwAjvError } from './ajv';\n\n/**\n * Creates a validation function that takes some arbitrary data, and either\n * returns that data cast to an {@link Entity} (or the given subtype) if it\n * matches that schema, or throws a {@link globals#TypeError} describing the errors.\n *\n * @remarks\n *\n * Note that this validator is only meant for applying the base schema checks;\n * it does not take custom policies or additional processor based validation\n * into account.\n *\n * By default, the plain {@link Entity} schema is used. If you pass in your own, it\n * may contain `$ref` references to the following, which are resolved\n * automatically for you:\n *\n * - {@link Entity}\n * - {@link EntityEnvelope}\n * - {@link EntityMeta}\n * - `common#<id>`\n *\n * @public\n * @see {@link https://github.com/backstage/backstage/tree/master/packages/catalog-model/src/schema}\n */\nexport function entitySchemaValidator(\n  schema,\n) {\n  const validate = compileAjvSchema(schema ? (schema ) : entitySchema);\n\n  return data => {\n    const result = validate(data);\n    if (result === true) {\n      return data ;\n    }\n\n    throw throwAjvError(validate.errors);\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonValidatorFunctions } from './CommonValidatorFunctions';\n\n/**\n * Contains validation functions that match the Kubernetes spec, usable to\n * build a catalog that is compatible with those rule sets.\n *\n * @public\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/names/\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/#syntax-and-character-set\n */\nexport class KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      n => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n),\n    );\n  }\n\n  static isValidKind(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-zA-Z][a-z0-9A-Z]*$/.test(value)\n    );\n  }\n\n  static isValidObjectName(value) {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value)\n    );\n  }\n\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName,\n    );\n  }\n\n  static isValidLabelValue(value) {\n    return (\n      value === '' || KubernetesValidatorFunctions.isValidObjectName(value)\n    );\n  }\n\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName,\n    );\n  }\n\n  static isValidAnnotationValue(value) {\n    return typeof value === 'string';\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { KubernetesValidatorFunctions } from './KubernetesValidatorFunctions';\n\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    // NOTE(freben): This one is a bit of an oddball and doesn't fit well anywhere to delegate to, so it's just inlined for now.\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value)\n    );\n  },\n};\n\n/**\n * Creates a {@link Validators} object from `overrides`, with default values taken from {@link KubernetesValidatorFunctions}\n *\n * @public\n */\nexport function makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  CommonValidatorFunctions,\n  KubernetesValidatorFunctions,\n  makeValidator,\n\n} from '../../validation';\n\n\n/**\n * Ensures that the format of individual fields of the entity envelope\n * is valid.\n *\n * @remarks\n *\n * This does not take into account machine generated fields such as uid and etag.\n *\n * @public\n */\nexport class FieldFormatEntityPolicy  {\n    validators;\n\n  constructor(validators = makeValidator()) {\n    this.validators = validators;\n  }\n\n  async enforce(entity) {\n    function require(\n      field,\n      value,\n      validator,\n    ) {\n      if (value === undefined || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n\n      if (!isValid) {\n        let expectation;\n        switch (\n          validator.name \n\n\n        ) {\n          case 'isValidLabelValue':\n          case 'isValidObjectName':\n            expectation =\n              'a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total';\n            break;\n          case 'isValidLabelKey':\n          case 'isValidApiVersion':\n          case 'isValidAnnotationKey':\n            expectation = 'a valid prefix and/or suffix';\n            break;\n          case 'isValidNamespace':\n          case 'isValidDnsLabel':\n            expectation =\n              'a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total';\n            break;\n          case 'isValidTag':\n            expectation =\n              'a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total';\n            break;\n          case 'isValidAnnotationValue':\n            expectation = 'a string';\n            break;\n          case 'isValidKind':\n            expectation =\n              'a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total';\n            break;\n          case 'isValidUrl':\n            expectation = 'a string that is a valid url';\n            break;\n          case 'isValidString':\n          case 'isNonEmptyString':\n            expectation = 'a non empty string';\n            break;\n          default:\n            expectation = undefined;\n            break;\n        }\n\n        // ensure that if there are other/future validators, the error message defaults to a general \"is not valid, visit link\"\n        const message = expectation\n          ? ` expected ${expectation} but found \"${value}\".`\n          : '';\n\n        throw new Error(\n          `\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`,\n        );\n      }\n    }\n\n    function optional(\n      field,\n      value,\n      validator,\n    ) {\n      return value === undefined || require(field, value, validator);\n    }\n\n    require('apiVersion', entity.apiVersion, this.validators.isValidApiVersion);\n    require('kind', entity.kind, this.validators.isValidKind);\n\n    require('metadata.name', entity.metadata.name, this.validators\n      .isValidEntityName);\n    optional(\n      'metadata.namespace',\n      entity.metadata.namespace,\n      this.validators.isValidNamespace,\n    );\n\n    for (const [k, v] of Object.entries(entity.metadata.labels ?? [])) {\n      require(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n\n    for (const [k, v] of Object.entries(entity.metadata.annotations ?? [])) {\n      require(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n\n    const tags = entity.metadata.tags ?? [];\n\n    for (let i = 0; i < tags.length; ++i) {\n      require(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n\n    const links = entity.metadata.links ?? [];\n\n    for (let i = 0; i < links.length; ++i) {\n      require(`links.${i}.url`, links[i]\n        ?.url, CommonValidatorFunctions.isValidUrl);\n      optional(\n        `links.${i}.title`,\n        links[i]?.title,\n        CommonValidatorFunctions.isNonEmptyString,\n      );\n      optional(\n        `links.${i}.icon`,\n        links[i]?.icon,\n        KubernetesValidatorFunctions.isValidObjectName,\n      );\n    }\n\n    return entity;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Ajv, { } from 'ajv';\nimport entitySchema from '../../schema/Entity.schema.json';\nimport entityMetaSchema from '../../schema/EntityMeta.schema.json';\nimport commonSchema from '../../schema/shared/common.schema.json';\n\n\n\n/**\n * Ensures that the entity spec is valid according to a schema.\n *\n * @remarks\n *\n * This should be the first policy in the list, to ensure that other downstream\n * policies can work with a structure that is at least valid in therms of the\n * typescript type.\n *\n * @public\n */\nexport class SchemaValidEntityPolicy  {\n   validate;\n\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv\n        .addSchema([commonSchema, entityMetaSchema], undefined, undefined, true)\n        .compile(entitySchema);\n    }\n\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n\n    throw new Error(\n      `Malformed envelope, ${error.instancePath || '<root>'} ${error.message}`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_NAMESPACE } from './constants';\n\n\n\nfunction parseRefString(ref)\n\n\n\n {\n  let colonI = ref.indexOf(':');\n  const slashI = ref.indexOf('/');\n\n  // If the / is ahead of the :, treat the rest as the name\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n\n  const kind = colonI === -1 ? undefined : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? undefined : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n\n  if (kind === '' || namespace === '' || name === '') {\n    throw new TypeError(\n      `Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`,\n    );\n  }\n\n  return { kind, namespace, name };\n}\n\n/**\n * Extracts the kind, namespace and name that form the compound entity ref\n * triplet of the given entity.\n *\n * @public\n * @param entity - An entity\n * @returns The compound entity ref\n */\nexport function getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name,\n  };\n}\n\n/**\n * Parses an entity reference, either on string or compound form, and returns\n * a structure with a name, and optional kind and namespace.\n *\n * @remarks\n *\n * The context object can contain default values for the kind and namespace,\n * that will be used if the input reference did not specify any.\n *\n * @public\n * @param ref - The reference to parse\n * @param context - The context of defaults that the parsing happens within\n * @returns The compound form of the reference\n */\nexport function parseEntityRef(\n  ref,\n  context\n\n\n\n\n,\n) {\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n\n  const defaultKind = context?.defaultKind;\n  const defaultNamespace = context?.defaultNamespace || DEFAULT_NAMESPACE;\n\n  let kind;\n  let namespace;\n  let name;\n\n  if (typeof ref === 'string') {\n    const parsed = parseRefString(ref);\n    kind = parsed.kind ?? defaultKind;\n    namespace = parsed.namespace ?? defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = ref.kind ?? defaultKind;\n    namespace = ref.namespace ?? defaultNamespace;\n    name = ref.name;\n  }\n\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`,\n    );\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty namespace`,\n    );\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n\n  return { kind, namespace, name };\n}\n\n/**\n * Takes an entity or entity name/reference, and returns the string form of an\n * entity ref.\n *\n * @remarks\n *\n * This function creates a canonical and unique reference to the entity, converting\n * all parts of the name to lowercase and inserts the default namespace if needed.\n * It is typically not the best way to represent the entity reference to the user.\n *\n * @public\n * @param ref - The reference to serialize\n * @returns The same reference on either string or compound form\n */\nexport function stringifyEntityRef(\n  ref,\n) {\n  let kind;\n  let namespace;\n  let name;\n\n  if ('metadata' in ref) {\n    kind = ref.kind;\n    namespace = ref.metadata.namespace ?? DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = ref.namespace ?? DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n\n  return `${kind.toLocaleLowerCase('en-US')}:${namespace.toLocaleLowerCase(\n    'en-US',\n  )}/${name.toLocaleLowerCase('en-US')}`;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Helper that requires that all of a set of policies can be successfully\n// applied\nclass AllEntityPolicies  {\n  constructor(  policies) {;this.policies = policies;}\n\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(\n          `Policy ${policy.constructor.name} did not return a result`,\n        );\n      }\n      result = output;\n    }\n    return result;\n  }\n}\n\n// Helper that requires that at least one of a set of policies can be\n// successfully applied\nclass AnyEntityPolicy  {\n  constructor(  policies) {;this.policies = policies;}\n\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\n\n/**\n * Provides helpers for enforcing a set of {@link EntityPolicy} in an `and`/`or` expression.\n *\n * @public\n */\nexport const EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  },\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { entityKindSchemaValidator } from '../validation';\n\n\n// TODO(freben): Left here as a compatibility helper. It would be nicer to\n// just export the inner validator directly. However, all of the already\n// exported kind validators have the `KindValidator` signature which is\n// different. So let's postpone that change until a later time.\nexport function ajvCompiledJsonSchemaValidator(schema) {\n  const validator = entityKindSchemaValidator(schema);\n  return {\n    async check(data) {\n      return validator(data) === data;\n    },\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/API.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage API kind Entity. APIs describe the interfaces for Components to communicate.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link ApiEntityV1alpha1}.\n *\n * @public\n */\nexport const apiEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Component.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Component kind Entity. Represents a single, individual piece of software.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link ComponentEntityV1alpha1}.\n *\n * @public\n */\nexport const componentEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Domain.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage Domain kind Entity. Domains group Systems together.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link DomainEntityV1alpha1}.\n *\n * @public\n */\nexport const domainEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Group.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Group kind Entity.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link GroupEntityV1alpha1}.\n * @public\n */\nexport const groupEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Location.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Location kind Entity.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link LocationEntityV1alpha1}.\n *\n * @public\n */\nexport const locationEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\nNaming rules for relations in priority order:\n\n1. Use at most two words. One main verb and a specifier, e.g. \"ownerOf\"\n2. Reading out \"<source-kind> <type> <target-kind>\" should make sense in English.\n3. Maintain symmetry between pairs, e.g. \"ownedBy\" and \"ownerOf\" rather than \"owns\".\n*/\n\n/**\n * An ownership relation where the owner is usually an organizational\n * entity (user or group), and the other entity can be anything. Reversed\n * direction of {@link RELATION_OWNER_OF}.\n *\n * @public\n */\nexport const RELATION_OWNED_BY = 'ownedBy';\n\n/**\n * A relationship from an owner to the owned entity. Reversed direction of\n * {@link RELATION_OWNED_BY}.\n *\n * @public\n */\nexport const RELATION_OWNER_OF = 'ownerOf';\n\n/**\n * A relation with an API entity, typically from a component. Reversed direction of\n * {@link RELATION_API_CONSUMED_BY}.\n *\n * @public\n */\nexport const RELATION_CONSUMES_API = 'consumesApi';\n\n/**\n * A relation of an API being consumed, typically by a component. Reversed direction of\n * {@link RELATION_CONSUMES_API}.\n *\n * @public\n */\nexport const RELATION_API_CONSUMED_BY = 'apiConsumedBy';\n\n/**\n * A relation from an API provider entity (typically a component) to the API. Reversed direction of\n * {@link RELATION_API_PROVIDED_BY}.\n *\n * @public\n */\nexport const RELATION_PROVIDES_API = 'providesApi';\n\n/**\n * A relation from an API to its provider entity (typically a component). Reversed direction of\n * {@link RELATION_PROVIDES_API}.\n *\n * @public\n */\nexport const RELATION_API_PROVIDED_BY = 'apiProvidedBy';\n\n/**\n * A relation denoting a dependency on another entity. Reversed direction of\n * {@link RELATION_DEPENDENCY_OF}.\n *\n * @public\n */\nexport const RELATION_DEPENDS_ON = 'dependsOn';\n\n/**\n * A relation denoting a reverse dependency by another entity. Reversed direction of\n * {@link RELATION_DEPENDS_ON}.\n *\n * @public\n */\nexport const RELATION_DEPENDENCY_OF = 'dependencyOf';\n\n/**\n * A parent/child relation to build up a tree, used for example to describe\n * the organizational structure between groups. Reversed direction of\n * {@link RELATION_CHILD_OF}.\n *\n * @public\n */\nexport const RELATION_PARENT_OF = 'parentOf';\n\n/**\n * A relation from a child to a parent entity, used for example to describe\n * the organizational structure between groups. Reversed direction of\n * {@link RELATION_PARENT_OF}.\n *\n * @public\n */\nexport const RELATION_CHILD_OF = 'childOf';\n\n/**\n * A membership relation, typically for users in a group. Reversed direction of\n * {@link RELATION_HAS_MEMBER}.\n *\n * @public\n */\nexport const RELATION_MEMBER_OF = 'memberOf';\n\n/**\n * A relation from a group to its member, typcally a user in a group. Reversed direction of\n * {@link RELATION_MEMBER_OF}.\n *\n * @public\n */\nexport const RELATION_HAS_MEMBER = 'hasMember';\n\n/**\n * A part/whole relation, typically for components in a system and systems\n * in a domain. Reversed direction of {@link RELATION_HAS_PART}.\n *\n * @public\n */\nexport const RELATION_PART_OF = 'partOf';\n\n/**\n * A relation from a containing entity to a contained entity. Reversed direction of\n * {@link RELATION_PART_OF}.\n *\n * @public\n */\nexport const RELATION_HAS_PART = 'hasPart';\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/Resource.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog Resource kind Entity. Represents infrastructure required to operate Components.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link ResourceEntityV1alpha1}.\n *\n * @public\n */\nexport const resourceEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/System.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog System kind Entity. Systems group Comopnents, Resources and APIs together.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/features/software-catalog/system-model}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link SystemEntityV1alpha1}.\n *\n * @public\n */\nexport const systemEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport schema from '../schema/kinds/User.v1alpha1.schema.json';\nimport { ajvCompiledJsonSchemaValidator } from './util';\n\n/**\n * Backstage catalog User kind Entity.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * {@link KindValidator} for {@link UserEntityV1alpha1}.\n *\n * @public\n */\nexport const userEntityV1alpha1Validator =\n  ajvCompiledJsonSchemaValidator(schema);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Entity annotation containing the location from which the entity is sourced.\n *\n * @public\n */\nexport const ANNOTATION_LOCATION = 'backstage.io/managed-by-location';\n\n/**\n * Entity annotation containing the originally sourced location which ultimately\n * led to this entity being ingested.\n *\n * @public\n */\nexport const ANNOTATION_ORIGIN_LOCATION =\n  'backstage.io/managed-by-origin-location';\n\n/**\n * Entity annotation pointing to the source (e.g. source code repository root or\n * similar) for this entity.\n *\n * @public\n */\nexport const ANNOTATION_SOURCE_LOCATION = 'backstage.io/source-location';\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ANNOTATION_SOURCE_LOCATION } from '.';\nimport { stringifyEntityRef } from '../entity';\nimport { ANNOTATION_LOCATION } from './annotation';\n\n/**\n * Parses a string form location reference.\n *\n * @public\n * @param ref - A string-form location ref, e.g. `'url:https://host'`\n * @returns A location ref, e.g. `{ type: 'url', target: 'https://host' }`\n */\nexport function parseLocationRef(ref)\n\n\n {\n  if (typeof ref !== 'string') {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`,\n    );\n  }\n\n  const splitIndex = ref.indexOf(':');\n  if (splitIndex < 0) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`,\n    );\n  }\n\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n\n  if (!type || !target) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`,\n    );\n  }\n\n  if (type === 'http' || type === 'https') {\n    throw new TypeError(\n      `Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`,\n    );\n  }\n\n  return { type, target };\n}\n\n/**\n * Turns a location ref into its string form.\n *\n * @public\n * @param ref - A location ref, e.g. `{ type: 'url', target: 'https://host' }`\n * @returns A string-form location ref, e.g. `'url:https://host'`\n */\nexport function stringifyLocationRef(ref\n\n\n) {\n  const { type, target } = ref;\n\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n\n  return `${type}:${target}`;\n}\n\n/**\n * Returns the source code location of the Entity, to the extent that one exists.\n *\n * @remarks\n *\n * If the returned location type is of type 'url', the target should be readable at least\n * using the UrlReader from `@backstage/backend-common`. If it is not of type 'url', the caller\n * needs to have explicit handling of each location type or signal that it is not supported.\n *\n * @public\n */\nexport function getEntitySourceLocation(entity)\n\n\n {\n  const locationRef =\n    entity.metadata?.annotations?.[ANNOTATION_SOURCE_LOCATION] ??\n    entity.metadata?.annotations?.[ANNOTATION_LOCATION];\n\n  if (!locationRef) {\n    throw new Error(\n      `Entity '${stringifyEntityRef(entity)}' is missing location`,\n    );\n  }\n\n  return parseLocationRef(locationRef);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { PublishSubject } from '../../../lib/subjects';\n\n/**\n * Base implementation for the AlertApi that simply forwards alerts to consumers.\n *\n * @public\n */\nexport class AlertApiForwarder  {\n    subject = new PublishSubject();\n\n  post(alert) {\n    this.subject.next(alert);\n  }\n\n  alert$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Base implementation for the AnalyticsApi that does nothing.\n *\n * @public\n */\nexport class NoOpAnalyticsApi  {\n  captureEvent(_event) {}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { BehaviorSubject } from '../../../lib/subjects';\n\nconst STORAGE_KEY = 'theme';\n\n/**\n * Exposes the themes installed in the app, and permits switching the currently\n * active theme.\n *\n * @public\n */\nexport class AppThemeSelector  {\n  static createWithStorage(themes) {\n    const selector = new AppThemeSelector(themes);\n\n    if (!window.localStorage) {\n      return selector;\n    }\n\n    const initialThemeId =\n      window.localStorage.getItem(STORAGE_KEY) ?? undefined;\n\n    selector.setActiveThemeId(initialThemeId);\n\n    selector.activeThemeId$().subscribe(themeId => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY);\n      }\n    });\n\n    window.addEventListener('storage', event => {\n      if (event.key === STORAGE_KEY) {\n        const themeId = localStorage.getItem(STORAGE_KEY) ?? undefined;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n\n    return selector;\n  }\n\n   activeThemeId;\n    subject = new BehaviorSubject(undefined);\n\n  constructor(  themes) {;this.themes = themes;}\n\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n\n  activeThemeId$() {\n    return this.subject;\n  }\n\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\n// Update the same pattern in config-loader package if this is changed\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\n\nfunction isObject(value) {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nfunction typeOf(value) {\n  if (value === null) {\n    return 'null';\n  } else if (Array.isArray(value)) {\n    return 'array';\n  }\n  const type = typeof value;\n  if (type === 'number' && isNaN(value )) {\n    return 'nan';\n  }\n  if (type === 'string' && value === '') {\n    return 'empty-string';\n  }\n  return type;\n}\n\n// Separate out a couple of common error messages to reduce bundle size.\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  },\n};\n\n/**\n * An implementation of the `Config` interface that uses a plain JavaScript object\n * for the backing data, with the ability of linking multiple readers together.\n *\n * @public\n */\nexport class ConfigReader  {\n  /**\n   * A set of key paths that where removed from the config due to not being visible.\n   *\n   * This was added as a mutable private member to avoid changes to the public API.\n   * Its only purpose of this is to warn users of missing visibility when running\n   * the frontend in development mode.\n   */\n   filteredKeys;\n   notifiedFilteredKeys = new Set();\n\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(undefined);\n    }\n\n    // Merge together all configs into a single config with recursive fallback\n    // readers, giving the first config object in the array the lowest priority.\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${\n                description || ''\n              }`,\n            );\n          }\n        }\n\n        return reader;\n      },\n      undefined,\n    );\n  }\n\n  constructor(\n      data,\n      context = 'mock-config',\n      fallback,\n      prefix = '',\n  ) {;this.data = data;this.context = context;this.fallback = fallback;this.prefix = prefix;}\n\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    const value = this.readValue(key);\n    if (value !== undefined) {\n      return true;\n    }\n    return this.fallback?.has(key) ?? false;\n  }\n\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = this.fallback?.keys() ?? [];\n    return [...new Set([...localKeys, ...fallbackKeys])];\n  }\n\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key ?? '')));\n    }\n    return value ;\n  }\n\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = this.fallback?.getOptional(key);\n\n    if (value === undefined) {\n      if (process.env.NODE_ENV === 'development') {\n        if (fallbackValue === undefined && key) {\n          const fullKey = this.fullKey(key);\n          if (\n            this.filteredKeys?.includes(fullKey) &&\n            !this.notifiedFilteredKeys.has(fullKey)\n          ) {\n            this.notifiedFilteredKeys.add(fullKey);\n            // eslint-disable-next-line no-console\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. ` +\n                'See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.',\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === undefined) {\n      return value ;\n    }\n\n    // Avoid merging arrays and primitive values, since that's how merging works for other\n    // methods for reading config.\n    return mergeWith({}, { value: fallbackValue }, { value }, (into, from) =>\n      !isObject(from) || !isObject(into) ? from : undefined,\n    ).value ;\n  }\n\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    const value = this.readValue(key);\n    const fallbackConfig = this.fallback?.getOptionalConfig(key);\n\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== undefined) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), 'object'),\n      );\n    }\n    return fallbackConfig;\n  }\n\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    const configs = this.readConfigValue(key, values => {\n      if (!Array.isArray(values)) {\n        return { expected: 'object-array' };\n      }\n\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: 'object-array', value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n\n    if (!configs) {\n      if (process.env.NODE_ENV === 'development') {\n        const fullKey = this.fullKey(key);\n        if (\n          this.filteredKeys?.some(k => k.startsWith(fullKey)) &&\n          !this.notifiedFilteredKeys.has(key)\n        ) {\n          this.notifiedFilteredKeys.add(key);\n          // eslint-disable-next-line no-console\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. ` +\n              'See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.',\n          );\n        }\n      }\n      return undefined;\n    }\n\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      val =>\n        typeof val === 'number' ||\n        typeof val === 'string' || { expected: 'number' },\n    );\n    if (typeof value === 'number' || value === undefined) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, 'number'),\n      );\n    }\n    return number;\n  }\n\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    return this.readConfigValue(\n      key,\n      value => typeof value === 'boolean' || { expected: 'boolean' },\n    );\n  }\n\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      value =>\n        (typeof value === 'string' && value !== '') || { expected: 'string' },\n    );\n  }\n\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === undefined) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, values => {\n      if (!Array.isArray(values)) {\n        return { expected: 'string-array' };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== 'string' || value === '') {\n          return { expected: 'string-array', value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n\n   fullKey(key) {\n    return `${this.prefix}${this.prefix ? '.' : ''}${key}`;\n  }\n\n   copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key),\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n\n   readConfigValue(\n    key,\n    validate\n\n,\n  ) {\n    const value = this.readValue(key);\n\n    if (value === undefined) {\n      if (process.env.NODE_ENV === 'development') {\n        const fullKey = this.fullKey(key);\n        if (\n          this.filteredKeys?.includes(fullKey) &&\n          !this.notifiedFilteredKeys.has(fullKey)\n        ) {\n          this.notifiedFilteredKeys.add(fullKey);\n          // eslint-disable-next-line no-console\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. ` +\n              'See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.',\n          );\n        }\n      }\n\n      return this.fallback?.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected,\n        ),\n      );\n    }\n\n    return value ;\n  }\n\n   readValue(key) {\n    const parts = key ? key.split('.') : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n\n    if (this.data === undefined) {\n      return undefined;\n    }\n\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== undefined) {\n        const badKey = this.fullKey(parts.slice(0, index).join('.'));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), 'object'),\n        );\n      }\n    }\n\n    return value;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ERROR_PREFIX = 'Invalid discovery URL pattern,';\n\n/**\n * UrlPatternDiscovery is a lightweight DiscoveryApi implementation.\n * It uses a single template string to construct URLs for each plugin.\n *\n * @public\n */\nexport class UrlPatternDiscovery  {\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join('pluginId');\n\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith('/')) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n\n    return new UrlPatternDiscovery(parts);\n  }\n\n   constructor(  parts) {;this.parts = parts;}\n\n  async getBaseUrl(pluginId) {\n    return this.parts.join(pluginId);\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Decorates an ErrorApi by also forwarding error messages\n * to the alertApi with an 'error' severity.\n *\n * @public\n */\nexport class ErrorAlerter  {\n  constructor(\n      alertApi,\n      errorApi,\n  ) {;this.alertApi = alertApi;this.errorApi = errorApi;}\n\n  post(error, context) {\n    if (!context?.hidden) {\n      this.alertApi.post({ message: error.message, severity: 'error' });\n    }\n\n    return this.errorApi.post(error, context);\n  }\n\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { PublishSubject } from '../../../lib/subjects';\n\n/**\n * Base implementation for the ErrorApi that simply forwards errors to consumers.\n *\n * @public\n */\nexport class ErrorApiForwarder  {\n    subject = new PublishSubject\n\n\n();\n\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n\n  error$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Utility class that helps with error forwarding.\n *\n * @public\n */\nexport class UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      'unhandledrejection',\n      (e) => {\n        errorApi.post(e.reason , errorContext);\n      },\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureFlagState,\n\n\n\n} from '@backstage/core-plugin-api';\n\nexport function validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`,\n    );\n  }\n\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`,\n    );\n  }\n\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. ` +\n        'Examples: feature-flag-one, alpha, release-2020',\n    );\n  }\n}\n\n/**\n * A feature flags implementation that stores the flags in the browser's local\n * storage.\n *\n * @public\n */\nexport class LocalStorageFeatureFlags  {\n   registeredFeatureFlags = [];\n   flags;\n\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active,\n    );\n    window.localStorage.setItem(\n      'featureFlags',\n      JSON.stringify(Object.fromEntries(enabled)),\n    );\n  }\n\n   load() {\n    try {\n      const jsonStr = window.localStorage.getItem('featureFlags');\n      if (!jsonStr) {\n        return new Map();\n      }\n      const json = JSON.parse(jsonStr) ;\n      if (typeof json !== 'object' || json === null || Array.isArray(json)) {\n        return new Map();\n      }\n\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n\n      return new Map(entries);\n    } catch {\n      return new Map();\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Builds a fetch API, based on the builtin fetch wrapped by a set of optional\n * middleware implementations that add behaviors.\n *\n * @remarks\n *\n * The middleware are applied in reverse order, i.e. the last one will be\n * \"closest\" to the base implementation. Passing in `[M1, M2, M3]` effectively\n * leads to `M1(M2(M3(baseImplementation)))`.\n *\n * @public\n */\nexport function createFetchApi(options\n\n\n) {\n  let result = options.baseImplementation || global.fetch;\n\n  const middleware = [options.middleware ?? []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n\n  return {\n    fetch: result,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A fetch middleware, which injects a Backstage token header when the user is\n * signed in.\n */\nexport class IdentityAuthInjectorFetchMiddleware  {\n  static create(options\n\n\n\n\n\n\n\n\n) {\n    const matcher = buildMatcher(options);\n    const headerName = options.header?.name || 'authorization';\n    const headerValue = options.header?.value || (token => `Bearer ${token}`);\n\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue,\n    );\n  }\n\n  constructor(\n      identityApi,\n      allowUrl,\n      headerName,\n      headerValue,\n  ) {;this.identityApi = identityApi;this.allowUrl = allowUrl;this.headerName = headerName;this.headerValue = headerValue;}\n\n  apply(next) {\n    return async (input, init) => {\n      // Skip this middleware if the header already exists, or if the URL\n      // doesn't match any of the allowlist items, or if there was no token\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (\n        request.headers.get(this.headerName) ||\n        typeof token !== 'string' ||\n        !token ||\n        !this.allowUrl(request.url)\n      ) {\n        return next(input, init);\n      }\n\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\n\nfunction buildMatcher(options\n\n\n\n) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString('backend.baseUrl')]);\n  }\n  return () => false;\n}\n\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map(prefix => prefix.replace(/\\/$/, ''));\n  return url =>\n    trimmedPrefixes.some(\n      prefix => url === prefix || url.startsWith(`${prefix}/`),\n    );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction join(left, right) {\n  if (!right || right === '/') {\n    return left;\n  }\n\n  return `${left.replace(/\\/$/, '')}/${right.replace(/^\\//, '')}`;\n}\n\n/**\n * Handles translation from plugin://some-plugin-id/<path> to concrete http(s)\n * URLs.\n */\nexport class PluginProtocolResolverFetchMiddleware  {\n  constructor(  discoveryApi) {;this.discoveryApi = discoveryApi;}\n\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = 'plugin://';\n\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n\n      // Switch to a known protocol, since browser URL parsing misbehaves wildly\n      // on foreign protocols\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`,\n      );\n\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : ''}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(target, typeof input === 'string' ? init : input);\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { IdentityAuthInjectorFetchMiddleware } from './IdentityAuthInjectorFetchMiddleware';\nimport { PluginProtocolResolverFetchMiddleware } from './PluginProtocolResolverFetchMiddleware';\n\n\n/**\n * A collection of common middlewares for the FetchApi.\n *\n * @public\n */\nexport class FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options\n\n) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options\n\n\n\n\n\n\n\n\n) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n\n   constructor() {}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { BehaviorSubject } from '../../../lib/subjects';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function hasScopes(\n  searched,\n  searchFor,\n) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function joinScopes(\n  scopes,\n  ...moreScopess\n) {\n  const result = new Set(scopes);\n\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n\n  return result;\n}\n\n/**\n * The OAuthPendingRequests class is a utility for managing and observing\n * a stream of requests for oauth scopes for a single provider, and resolving\n * them correctly once requests are fulfilled.\n */\nexport class OAuthPendingRequests {\n   requests = [];\n   subject = new BehaviorSubject(\n    this.getCurrentPending(),\n  );\n\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n\n  resolve(scopes, result) {\n    this.requests = this.requests.filter(request => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n\n    this.subject.next(this.getCurrentPending());\n  }\n\n  reject(error) {\n    this.requests.forEach(request => request.reject(error));\n    this.requests = [];\n\n    this.subject.next(this.getCurrentPending());\n  }\n\n  pending() {\n    return this.subject;\n  }\n\n   getCurrentPending() {\n    const currentScopes =\n      this.requests.length === 0\n        ? undefined\n        : this.requests\n            .slice(1)\n            .reduce(\n              (acc, current) => joinScopes(acc, current.scopes),\n              this.requests[0].scopes,\n            );\n\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      },\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuthPendingRequests, } from './OAuthPendingRequests';\nimport { BehaviorSubject } from '../../../lib/subjects';\n\n/**\n * The OAuthRequestManager is an implementation of the OAuthRequestApi.\n *\n * The purpose of this class and the API is to read a stream of incoming requests\n * of OAuth access tokens from different providers with varying scope, and funnel\n * them all together into a single request for each OAuth provider.\n *\n * @public\n */\nexport class OAuthRequestManager  {\n    subject = new BehaviorSubject([]);\n   currentRequests = [];\n   handlerCount = 0;\n\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n\n    const index = this.handlerCount;\n    this.handlerCount++;\n\n    handler.pending().subscribe({\n      next: scopeRequest => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        // Convert from sparse array to array of present items only\n        this.subject.next(newRequests.filter(Boolean));\n      },\n    });\n\n    return scopes => {\n      return handler.request(scopes);\n    };\n  }\n\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n   makeAuthRequest(\n    request,\n    options,\n  ) {\n    const { scopes } = request;\n    if (!scopes) {\n      return undefined;\n    }\n\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error('Login failed, rejected by user');\n        error.name = 'RejectedError';\n        request.reject(error);\n      },\n    };\n  }\n\n  authRequest$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\n\nconst buckets = new Map();\n\n/**\n * An implementation of the storage API, that uses the browser's local storage.\n *\n * @public\n */\nexport class WebStorage  {\n  constructor(\n      namespace,\n      errorApi,\n  ) {;this.namespace = namespace;this.errorApi = errorApi;}\n\n  static create(options\n\n\n) {\n    return new WebStorage(options.namespace ?? '', options.errorApi);\n  }\n\n  get(key) {\n    return this.snapshot(key).value ;\n  }\n\n  snapshot(key) {\n    let value = undefined;\n    let presence = 'absent';\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === 'object' && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = 'present';\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`),\n      );\n    }\n    return { key, value, presence };\n  }\n\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n\n  observe$(key) {\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n\n   getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n\n   notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n\n   subscribers = new Set\n\n();\n\n    observable = new ObservableImpl\n\n(subscriber => {\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'atlassian',\n  title: 'Atlassian',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to Atlassian products.\n *\n * @public\n */\nexport default class AtlassianAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'bitbucket',\n  title: 'Bitbucket',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to Bitbucket products.\n *\n * @public\n */\nexport default class BitbucketAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['team'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'github',\n  title: 'GitHub',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to GitHub products.\n *\n * @public\n */\nexport default class GithubAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['read:user'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'gitlab',\n  title: 'GitLab',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to GitLab products.\n *\n * @public\n */\nexport default class GitlabAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['read_user'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'google',\n  title: 'Google',\n  icon: () => null,\n};\n\nconst SCOPE_PREFIX = 'https://www.googleapis.com/auth/';\n\n/**\n * Implements the OAuth flow to Google products.\n *\n * @public\n */\nexport default class GoogleAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      oauthRequestApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      defaultScopes = [\n        'openid',\n        `${SCOPE_PREFIX}userinfo.email`,\n        `${SCOPE_PREFIX}userinfo.profile`,\n      ],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (scope === 'openid') {\n            return scope;\n          }\n\n          if (scope === 'profile' || scope === 'email') {\n            return `${SCOPE_PREFIX}userinfo.${scope}`;\n          }\n\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'microsoft',\n  title: 'Microsoft',\n  icon: () => null,\n};\n\n/**\n * Implements the OAuth flow to Microsoft products.\n *\n * @public\n */\nexport default class MicrosoftAuth {\n  static create(options) {\n    const {\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        'openid',\n        'offline_access',\n        'profile',\n        'email',\n        'User.Read',\n      ],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Options used to open a login popup.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Show a popup pointing to a URL that starts an auth flow. Implementing the receiving\n * end of the postMessage mechanism outlined in https://tools.ietf.org/html/draft-sakimura-oauth-wmrm-00\n *\n * The redirect handler of the flow should use postMessage to communicate back\n * to the app window. The message posted to the app must match the AuthResult type.\n *\n * The returned promise resolves to the response of the message that was posted from the auth popup.\n */\nexport function showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`,\n    );\n\n    let targetOrigin = '';\n\n    if (!popup || typeof popup.closed === 'undefined' || popup.closed) {\n      const error = new Error('Failed to open auth popup.');\n      error.name = 'PopupRejectedError';\n      reject(error);\n      return;\n    }\n\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n\n      if (data.type === 'config_info') {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n\n      if (data.type !== 'authorization_response') {\n        return;\n      }\n      const authResult = data ;\n\n      if ('error' in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        // TODO: proper error type\n        // error.extra = authResult.error.extra;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${\n          targetOrigin && targetOrigin !== window.location.origin\n            ? `Incorrect app origin, expected ${targetOrigin}`\n            : 'popup was closed'\n        }`;\n        const error = new Error(errMessage);\n        error.name = 'PopupClosedError';\n        reject(error);\n        done();\n      }\n    }, 100);\n\n    function done() {\n      window.removeEventListener('message', messageListener);\n      clearInterval(intervalId);\n    }\n\n    window.addEventListener('message', messageListener);\n  });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { showLoginPopup } from '../loginPopup';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(' ');\n}\n\n/**\n * DefaultAuthConnector is the default auth connector in Backstage. It talks to the\n * backend auth plugin through the standardized API, and requests user permission\n * via the OAuthRequestApi.\n */\nexport class DefaultAuthConnector\n\n{\n    discoveryApi;\n    environment;\n    provider;\n    joinScopesFunc;\n    authRequester;\n    sessionTransform;\n\n  constructor(options) {\n    const {\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = id => id,\n    } = options;\n\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: scopes => this.showPopup(scopes),\n    });\n\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n  }\n\n  async createSession(options) {\n    if (options.instantPopup) {\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n\n  async refreshSession() {\n    const res = await fetch(\n      await this.buildUrl('/refresh', { optional: true }),\n      {\n        headers: {\n          'x-requested-with': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n      },\n    ).catch(error => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`,\n      );\n      error.status = res.status;\n      throw error;\n    }\n\n    const authInfo = await res.json();\n\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n\n  async removeSession() {\n    const res = await fetch(await this.buildUrl('/logout'), {\n      method: 'POST',\n      headers: {\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      credentials: 'include',\n    }).catch(error => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n\n   async showPopup(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl('/start', {\n      scope,\n      origin: location.origin,\n    });\n\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730,\n    });\n\n    return await this.sessionTransform(payload);\n  }\n\n   async buildUrl(\n    path,\n    query,\n  ) {\n    const baseUrl = await this.discoveryApi.getBaseUrl('auth');\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment,\n    });\n\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n\n   buildQueryString(query\n\n) {\n    if (!query) {\n      return '';\n    }\n\n    const queryString = Object.entries(query)\n      .map(([key, value]) => {\n        if (typeof value === 'string') {\n          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        } else if (value) {\n          return encodeURIComponent(key);\n        }\n        return undefined;\n      })\n      .filter(Boolean)\n      .join('&');\n\n    if (!queryString) {\n      return '';\n    }\n    return `?${queryString}`;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DefaultAuthConnector } from '../../../../lib/AuthConnector';\nimport { RefreshingAuthSessionManager } from '../../../../lib/AuthSessionManager';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * OAuth2 create options.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'oauth2',\n  title: 'Your Identity Provider',\n  icon: () => null,\n};\n\n/**\n * Implements a generic OAuth2 flow for auth.\n *\n * @public\n */\nexport default class OAuth2\n  \n\n\n\n\n\n{\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = x => x,\n    } = options;\n\n    const connector = new DefaultAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi: oauthRequestApi,\n      sessionTransform(res) {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope,\n            ),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1000,\n            ),\n          },\n        };\n      },\n    });\n\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        const expiresInSec =\n          (session.providerInfo.expiresAt.getTime() - Date.now()) / 1000;\n        return expiresInSec < 60 * 5;\n      },\n    });\n\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n\n    sessionManager;\n    scopeTransform;\n\n   constructor(options\n\n\n) {\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n\n  async signIn() {\n    await this.getAccessToken();\n  }\n\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n\n  async getAccessToken(\n    scope,\n    options,\n  ) {\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes,\n    });\n    return session?.providerInfo.accessToken ?? '';\n  }\n\n  async getIdToken(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.providerInfo.idToken ?? '';\n  }\n\n  async getBackstageIdentity(\n    options = {},\n  ) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n\n   static normalizeScopes(\n    scopeTransform,\n    scopes,\n  ) {\n    if (!scopes) {\n      return new Set();\n    }\n\n    const scopeList = Array.isArray(scopes)\n      ? scopes\n      : scopes.split(/[\\s|,]/).filter(Boolean);\n\n    return new Set(scopeTransform(scopeList));\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'okta',\n  title: 'Okta',\n  icon: () => null,\n};\n\nconst OKTA_OIDC_SCOPES = new Set([\n  'openid',\n  'profile',\n  'email',\n  'phone',\n  'address',\n  'groups',\n  'offline_access',\n]);\n\nconst OKTA_SCOPE_PREFIX = 'okta.';\n\n/**\n * Implements the OAuth flow to Okta products.\n *\n * @public\n */\nexport default class OktaAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n      defaultScopes = ['openid', 'email', 'profile', 'offline_access'],\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { OAuth2 } from '../oauth2';\n\n/**\n * OneLogin auth provider create options.\n * @public\n */\n\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'onelogin',\n  title: 'onelogin',\n  icon: () => null,\n};\n\nconst OIDC_SCOPES = new Set([\n  'openid',\n  'profile',\n  'email',\n  'phone',\n  'address',\n  'groups',\n  'offline_access',\n]);\n\nconst SCOPE_PREFIX = 'onelogin.';\n\n/**\n * Implements a OneLogin OAuth flow.\n *\n * @public\n */\nexport default class OneLoginAuth {\n  static create(\n    options,\n  ) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi,\n    } = options;\n\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: ['openid', 'email', 'profile', 'offline_access'],\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { z } from 'zod';\n\n/** @internal */\n\n\n\n\n\n/** @internal */\nexport const samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional(),\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal('user'),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string()),\n    }),\n  }),\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { DirectAuthConnector } from '../../../../lib/AuthConnector';\nimport {\n  AuthSessionStore,\n  StaticAuthSessionManager,\n} from '../../../../lib/AuthSessionManager';\n\n\nimport { samlSessionSchema } from './types';\n\n\n\n\n\n\nconst DEFAULT_PROVIDER = {\n  id: 'saml',\n  title: 'SAML',\n  icon: () => null,\n};\n\n/**\n * Implements a general SAML based auth flow.\n *\n * @public\n */\nexport default class SamlAuth\n  \n{\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = 'development',\n      provider = DEFAULT_PROVIDER,\n    } = options;\n\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n    });\n\n    const sessionManager = new StaticAuthSessionManager({\n      connector,\n    });\n\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema,\n    });\n\n    return new SamlAuth(authSessionStore);\n  }\n\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n\n   constructor(\n      sessionManager,\n  ) {;this.sessionManager = sessionManager;}\n\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  async getBackstageIdentity(\n    options = {},\n  ) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Scope type when registering API factories.\n * @public\n */\n\n\n\n // APIs that can't be overridden, e.g. config\n\nvar ScopePriority; (function (ScopePriority) {\n  ScopePriority[ScopePriority[\"default\"] = 10] = \"default\";\n  const app = 50; ScopePriority[ScopePriority[\"app\"] = app] = \"app\";\n  ScopePriority[ScopePriority[\"static\"] = 100] = \"static\";\n})(ScopePriority || (ScopePriority = {}));\n\n\n\n\n\n\n/**\n * ApiFactoryRegistry is an ApiFactoryHolder implementation that enables\n * registration of API Factories with different scope.\n *\n * Each scope has an assigned priority, where factories registered with\n * higher priority scopes override ones with lower priority.\n *\n * @public\n */\nexport class ApiFactoryRegistry  {\n    factories = new Map();\n\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(\n    scope,\n    factory,\n  ) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n\n  get(\n    api,\n  ) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return undefined;\n    }\n    return tuple.factory ;\n  }\n\n  getAllApis() {\n    const refs = new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An ApiHolder that queries multiple other holders from for\n * an Api implementation, returning the first one encountered..\n */\nexport class ApiAggregator  {\n    holders;\n\n  constructor(...holders) {\n    this.holders = holders;\n  }\n\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return undefined;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext, } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ApiAggregator } from './ApiAggregator';\nimport {\n  createVersionedValueMap,\n  createVersionedContext,\n} from '@backstage/version-bridge';\n\n/**\n * Prop types for the ApiProvider component.\n * @public\n */\n\n\n\n\n\nconst ApiContext = createVersionedContext('api-context');\n\n/**\n * Provides an {@link @backstage/core-plugin-api#ApiHolder} for consumption in\n * the React tree.\n *\n * @public\n */\nexport const ApiProvider = (props) => {\n  const { apis, children } = props;\n  const parentHolder = useContext(ApiContext)?.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n\n  return (\n    React.createElement(ApiContext.Provider, {\n      value: createVersionedValueMap({ 1: holder }),\n      children: children,}\n    )\n  );\n};\n\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node,\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Handles the actual on-demand instantiation and memoization of APIs out of\n * an {@link ApiFactoryHolder}.\n *\n * @public\n */\nexport class ApiResolver  {\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(\n    factories,\n    apis,\n  ) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = new Set();\n\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n\n    apis = new Map();\n\n  constructor(  factories) {;this.factories = factories;}\n\n  get(ref) {\n    return this.load(ref);\n  }\n\n   load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl ;\n    }\n\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return undefined;\n    }\n\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api ;\n  }\n\n   loadDeps(\n    dependent,\n    apis,\n    loading,\n  ) {\n    const impls = {} ;\n\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`,\n          );\n        }\n        impls[key] = api;\n      }\n    }\n\n    return impls;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValidElement, Children } from 'react';\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A function that allows you to traverse a tree of React elements using\n * varying methods to discover child nodes and collect data along the way.\n */\nexport function traverseElementTree(options\n\n\n\n) {\n  const collectors\n\n = {};\n\n  // Bootstrap all collectors, initializing the accumulators and providing the visitor function\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n\n  // Internal representation of an element in the tree that we're iterating over\n  \n\n\n\n\n\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: undefined,\n      contexts: {},\n    } ,\n  ];\n\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n\n    // While the parent and the element we pass on to collectors and discoverers\n    // have been validated and are known to be React elements, the child nodes\n    // emitted by the discoverers are not.\n    Children.forEach(node, element => {\n      if (!isValidElement(element)) {\n        return;\n      }\n\n      const nextContexts = {};\n\n      // Collectors populate their result data using the current node, and compute\n      // context for the next iteration\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name],\n          );\n        }\n      }\n\n      // Discoverers provide ways to continue the traversal from the current element\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts,\n          });\n        }\n      }\n    });\n  }\n\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator]),\n  ) ;\n}\n\nexport function createCollector(\n  accumulatorFactory,\n  visit,\n) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\n\nexport function childDiscoverer(element) {\n  return element.props?.children;\n}\n\nexport function routeElementDiscoverer(element) {\n  if (element.props?.path && element.props?.element) {\n    return element.props?.element;\n  }\n  return undefined;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getComponentData } from '@backstage/core-plugin-api';\nimport { createCollector } from '../extensions/traversal';\n\nexport const pluginCollector = createCollector(\n  () => new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(\n      node,\n      'core.plugin',\n    );\n    if (plugin) {\n      acc.add(plugin);\n    }\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  getComponentData,\n\n} from '@backstage/core-plugin-api';\nimport { isValidElement } from 'react';\n\nimport { createCollector } from '../extensions/traversal';\nimport { FeatureFlagged, } from './FeatureFlagged';\n\n// We always add a child that matches all subroutes but without any route refs. This makes\n// sure that we're always able to match each route no matter how deep the navigation goes.\n// The route resolver then takes care of selecting the most specific match in order to find\n// mount points that are as deep in the routing tree as possible.\nexport const MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: '/*',\n  element: 'match-all', // These elements aren't used, so we add in a bit of debug information\n  routeRefs: new Set(),\n};\n\n\n\n\n\n\n\n\n/**\n * This is the old V1 logic for collecting the routing model.\n * It is being replaced by a new collector because this collection\n * logic does not work well beyond react-router v6 beta.\n *\n * The breaking change is that react-router now requires route\n * elements to be `Route` components, and directly renders the\n * element prop rather than the `Route` itself. This means it is\n * no longer possible to create utility route components. In order\n * to fill this gap and in general simplify the route collection\n * logic, a new route collection logic is created.\n *\n * @internal\n */\nexport const routingV1Collector = createCollector(\n  () => ({\n    paths: new Map(),\n    parents: new Map(),\n    objects: new Array(),\n  }),\n  (acc, node, parent, ctx) => {\n    // Ignore the top-level element within element props, since it's already been collected.\n    if (parent?.props.element === node) {\n      return ctx;\n    }\n\n    let currentObj = ctx?.obj;\n    let currentParentRouteRef = ctx?.routeRef;\n    let sticky = ctx?.sticky;\n\n    const path = node.props?.path;\n    const parentChildren = currentObj?.children ?? acc.objects;\n    const caseSensitive = Boolean(node.props?.caseSensitive);\n\n    // The context path is used during mount point gathering to assign the same path\n    // to all discovered mount points\n    let currentCtxPath = ctx?.path;\n\n    // Start gathering mount points when we encounter a mount point gathering flag\n    if (getComponentData(node, 'core.gatherMountPoints')) {\n      if (!path) {\n        throw new Error('Mount point gatherer must have a path');\n      }\n      currentCtxPath = path;\n    }\n\n    // Route refs are discovered on the element itself, and on the top-level\n    // element within the element prop if it exists.\n    const element = node.props?.element;\n    let routeRef = getComponentData(node, 'core.mountPoint');\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, 'core.mountPoint');\n    }\n\n    if (routeRef) {\n      // First the path gathering\n\n      let routePath = path;\n      // If we're gathering mount points we use the context path as out path, unless\n      // the element has its own path, in which case we use that instead and stop gathering\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = undefined;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error('Mounted routable extension must have a path');\n      }\n      acc.paths.set(routeRef, routePath);\n\n      // Then the parent gathering\n\n      // \"sticky\" route ref is when we've encountered a mount point gatherer, and we want a\n      // mount points beneath it to have the same parent, regardless of internal structure\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n\n        // When we encounter a mount point with an explicit path, we stop gathering\n        // mount points within the children and remove the sticky state\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n\n      // Then construct the objects\n\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: 'mounted',\n          routeRefs: new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugin: getComponentData(\n            node.props.element,\n            'core.plugin',\n          ),\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj?.routeRefs.add(routeRef);\n      }\n    }\n\n    if (getComponentData(node, 'core.gatherMountPoints')) {\n      sticky = true;\n    }\n\n    const isGatherer = getComponentData(\n      node,\n      'core.gatherMountPoints',\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error('Mount point gatherer must have a path');\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: 'gathered',\n          routeRefs: new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugin: ctx?.obj?.plugin,\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky,\n    };\n  },\n);\n\nexport const featureFlagCollector = createCollector(\n  () => new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props ;\n      acc.add('with' in props ? props.with : props.without);\n    }\n  },\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n\n\n\n\nexport const routeRefType = getOrCreateGlobalSingleton(\n  'route-ref-type',\n  () => Symbol('route-ref-type'),\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function isRouteRef(\n  routeRef\n\n\n,\n) {\n  return routeRef[routeRefType] === 'absolute';\n}\n\nexport function isSubRouteRef(\n  routeRef\n\n\n,\n) {\n  return routeRef[routeRefType] === 'sub';\n}\n\nexport function isExternalRouteRef\n\n\n(\n  routeRef\n\n\n,\n) {\n  return routeRef[routeRefType] === 'external';\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { generatePath, matchRoutes } from 'react-router-dom';\nimport {\n\n\n\n\n  routeRefType,\n  isRouteRef,\n  isSubRouteRef,\n  isExternalRouteRef,\n} from './types';\n\n\n\n\n\n\n// Joins a list of paths together, avoiding trailing and duplicate slashes\nfunction joinPaths(...paths) {\n  const normalized = paths.join('/').replace(/\\/\\/+/g, '/');\n  if (normalized !== '/' && normalized.endsWith('/')) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\n/**\n * Resolves the absolute route ref that our target route ref is pointing pointing to, as well\n * as the relative target path.\n *\n * Returns an undefined target ref if one could not be fully resolved.\n */\nfunction resolveTargetRef(\n  anyRouteRef,\n  routePaths,\n  routeBindings,\n) {\n  // First we figure out which absolute route ref we're dealing with, an if there was an sub route path to append.\n  // For sub routes it will be the parent path, while for external routes it will be the bound route.\n  let targetRef;\n  let subRoutePath = '';\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [undefined, ''];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`,\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`,\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n\n  // Bail if no absolute path could be resolved\n  if (!targetRef) {\n    return [undefined, ''];\n  }\n\n  // Find the path that our target route is bound to\n  const resolvedPath = routePaths.get(targetRef);\n  if (!resolvedPath) {\n    return [undefined, ''];\n  }\n\n  // SubRouteRefs join the path from the parent route with its own path\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\n\n/**\n * Resolves the complete base path for navigating to the target RouteRef.\n */\nfunction resolveBasePath(\n  targetRef,\n  sourceLocation,\n  routePaths,\n  routeParents,\n  routeObjects,\n) {\n  // While traversing the app element tree we build up the routeObjects structure\n  // used here. It is the same kind of structure that react-router creates, with the\n  // addition that associated route refs are stored throughout the tree. This lets\n  // us look up all route refs that can be reached from our source location.\n  // Because of the similar route object structure, we can use `matchRoutes` from\n  // react-router to do the lookup of our current location.\n  const match = matchRoutes(routeObjects, sourceLocation) ?? [];\n\n  // While we search for a common routing root between our current location and\n  // the target route, we build a list of all route refs we find that we need\n  // to traverse to reach the target.\n  const refDiffList = Array();\n\n  let matchIndex = -1;\n  for (\n    let targetSearchRef = targetRef;\n    targetSearchRef;\n    targetSearchRef = routeParents.get(targetSearchRef)\n  ) {\n    // The match contains a list of all ancestral route refs present at our current location\n    // Starting at the desired target ref and traversing back through its parents, we search\n    // for a target ref that is present in the match for our current location. When a match\n    // is found it means we have found a common base to resolve the route from.\n    matchIndex = match.findIndex(m =>\n      (m.route ).routeRefs.has(targetSearchRef),\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n\n    // Every time we move a step up in the ancestry of the target ref, we add the current ref\n    // to the diff list, which ends up being the list of route refs to traverse form the common base\n    // in order to reach our target.\n    refDiffList.unshift(targetSearchRef);\n  }\n\n  // If our target route is present in the initial match we need to construct the final path\n  // from the parent of the matched route segment. That's to allow the caller of the route\n  // function to supply their own params.\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n\n  // This is the part of the route tree that the target and source locations have in common.\n  // We re-use the existing pathname directly along with all params.\n  const parentPath = matchIndex === -1 ? '' : match[matchIndex].pathname;\n\n  // This constructs the mid section of the path using paths resolved from all route refs\n  // we need to traverse to reach our target except for the very last one. None of these\n  // paths are allowed to require any parameters, as the caller would have no way of knowing\n  // what parameters those are.\n  const diffPath = joinPaths(\n    ...refDiffList.slice(0, -1).map(ref => {\n      const path = routePaths.get(ref);\n      if (!path) {\n        throw new Error(`No path for ${ref}`);\n      }\n      if (path.includes(':')) {\n        throw new Error(\n          `Cannot route to ${targetRef} with parent ${ref} as it has parameters`,\n        );\n      }\n      return path;\n    }),\n  );\n\n  return parentPath + diffPath;\n}\n\nexport class RouteResolver {\n  constructor(\n      routePaths,\n      routeParents,\n      routeObjects,\n      routeBindings\n\n\n,\n      appBasePath, // base path without a trailing slash\n  ) {;this.routePaths = routePaths;this.routeParents = routeParents;this.routeObjects = routeObjects;this.routeBindings = routeBindings;this.appBasePath = appBasePath;}\n\n  resolve(\n    anyRouteRef\n\n\n,\n    sourceLocation,\n  ) {\n    // First figure out what our target absolute ref is, as well as our target path.\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings,\n    );\n    if (!targetRef) {\n      return undefined;\n    }\n\n    // The location that we get passed in uses the full path, so start by trimming off\n    // the app base path prefix in case we're running the app on a sub-path.\n    let relativeSourceLocation;\n    if (typeof sourceLocation === 'string') {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname),\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n\n    // Next we figure out the base path, which is the combination of the common parent path\n    // between our current location and our target location, as well as the additional path\n    // that is the difference between the parent path and the base of our target location.\n    const basePath =\n      this.appBasePath +\n      resolveBasePath(\n        targetRef,\n        relativeSourceLocation,\n        this.routePaths,\n        this.routeParents,\n        this.routeObjects,\n      );\n\n    const routeFunc = (...[params]) => {\n      return basePath + generatePath(targetPath, params);\n    };\n    return routeFunc;\n  }\n\n   trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\n\n\n\n\nimport {\n  createVersionedValueMap,\n  createVersionedContext,\n} from '@backstage/version-bridge';\nimport { RouteResolver } from './RouteResolver';\n\n\nconst RoutingContext = createVersionedContext(\n  'routing-context',\n);\n\n\n\n\n\n\n\n\n\n\nexport const RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = '',\n  children,\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath,\n  );\n\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return (\n    React.createElement(RoutingContext.Provider, { value: versionedValue,}\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { matchRoutes, useLocation } from 'react-router-dom';\nimport {\n  useAnalytics,\n  AnalyticsContext,\n\n\n} from '@backstage/core-plugin-api';\n\n\n/**\n * Returns an extension context given the current pathname and a list of\n * Backstage route objects.\n */\nconst getExtensionContext = (\n  pathname,\n  routes,\n) => {\n  try {\n    // Find matching routes for the given path name.\n    const matches = matchRoutes(routes, { pathname }) \n\n;\n\n    // Of the matching routes, get the last (e.g. most specific) instance of\n    // the BackstageRouteObject.\n    const routeObject = matches\n      ?.filter(match => match?.route.routeRefs?.size > 0)\n      .pop()?.route;\n\n    // If there is no route object, then allow inheritance of default context.\n    if (!routeObject) {\n      return {};\n    }\n\n    // If there is a single route ref, return it.\n    // todo: get routeRef of rendered gathered mount point(?)\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n\n    return {\n      extension: 'App',\n      pluginId: routeObject.plugin?.getId() || 'root',\n      ...(routeRef ? { routeRef: (routeRef ).id } : {}),\n    };\n  } catch {\n    return {};\n  }\n};\n\n/**\n * Performs the actual event capture on render.\n */\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n}\n\n\n\n) => {\n  const analytics = useAnalytics();\n\n  useEffect(() => {\n    analytics.captureEvent('navigate', `${pathname}${search}${hash}`);\n  }, [analytics, pathname, search, hash]);\n\n  return null;\n};\n\n/**\n * Logs a \"navigate\" event with appropriate plugin-level analytics context\n * attributes each time the user navigates to a page.\n */\nexport const RouteTracker = ({\n  routeObjects,\n}\n\n) => {\n  const { pathname, search, hash } = useLocation();\n\n  return (\n    React.createElement(AnalyticsContext, { attributes: getExtensionContext(pathname, routeObjects),}\n      , React.createElement(TrackNavigation, { pathname: pathname, search: search, hash: hash,} )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Validates that there is no duplication of route parameter names\nexport function validateRouteParameters(\n  routePaths,\n  routeParents,\n) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(undefined);\n\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n\n    let currentRouteRef = route;\n\n    let fullPath = '';\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (!path) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = `${path}${fullPath}`;\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`,\n            );\n          }\n        }\n      }\n    }\n  }\n}\n\n// Validates that all non-optional external routes have been bound\nexport function validateRouteBindings(\n  routeBindings,\n  plugins,\n) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes,\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. ` +\n            'See https://backstage.io/link?bind-routes for details.',\n        );\n      }\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport {\n  createVersionedValueMap,\n  createVersionedContext,\n} from '@backstage/version-bridge';\n\n\nconst AppContext = createVersionedContext('app-context');\n\n\n\n\n\nexport const AppContextProvider = ({\n  appContext,\n  children,\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n\n  return React.createElement(AppContext.Provider, { value: versionedValue, children: children,} );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`,\n  );\n}\n\nfunction logDeprecation(thing) {\n  // eslint-disable-next-line no-console\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`,\n  );\n}\n\n// We use this for a period of backwards compatibility. It is a hidden\n// compatibility that will allow old plugins to continue working for a limited time.\n\n\n\n\n\n\n/**\n * Implementation of the connection between the App-wide IdentityApi\n * and sign-in page.\n */\nexport class AppIdentityProxy  {\n   target;\n   waitForTarget;\n   resolveTarget = () => {};\n\n  constructor() {\n    this.waitForTarget = new Promise(resolve => {\n      this.resolveTarget = resolve;\n    });\n  }\n\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi) {\n    this.target = identityApi;\n    this.resolveTarget(identityApi);\n  }\n\n  getUserId() {\n    if (!this.target) {\n      throw mkError('getUserId');\n    }\n    if (!this.target.getUserId) {\n      throw new Error('IdentityApi does not implement getUserId');\n    }\n    logDeprecation('getUserId');\n    return this.target.getUserId();\n  }\n\n  getProfile() {\n    if (!this.target) {\n      throw mkError('getProfile');\n    }\n    if (!this.target.getProfile) {\n      throw new Error('IdentityApi does not implement getProfile');\n    }\n    logDeprecation('getProfile');\n    return this.target.getProfile();\n  }\n\n  async getProfileInfo() {\n    return this.waitForTarget.then(target => target.getProfileInfo());\n  }\n\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(target =>\n      target.getBackstageIdentity(),\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. ` +\n          `It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`,\n      );\n    }\n\n    return identity;\n  }\n\n  async getCredentials() {\n    return this.waitForTarget.then(target => target.getCredentials());\n  }\n\n  async getIdToken() {\n    return this.waitForTarget.then(target => {\n      if (!target.getIdToken) {\n        throw new Error('IdentityApi does not implement getIdToken');\n      }\n      logDeprecation('getIdToken');\n      return target.getIdToken();\n    });\n  }\n\n  async signOut() {\n    await this.waitForTarget.then(target => target.signOut());\n    location.reload();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo, useEffect, useState, } from 'react';\nimport { useApi, appThemeApiRef, } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/lib/useObservable';\n\n// This tries to find the most accurate match, but also falls back to less\n// accurate results in order to avoid errors.\nfunction resolveTheme(\n  themeId,\n  shouldPreferDark,\n  themes,\n) {\n  if (themeId !== undefined) {\n    const selectedTheme = themes.find(theme => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n\n  if (shouldPreferDark) {\n    const darkTheme = themes.find(theme => theme.variant === 'dark');\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n\n  const lightTheme = themes.find(theme => theme.variant === 'light');\n  if (lightTheme) {\n    return lightTheme;\n  }\n\n  return themes[0];\n}\n\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia('(prefers-color-scheme: dark)'),\n    [],\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n\n  return shouldPreferDark;\n};\n\nexport function AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId(),\n  );\n\n  // Browser feature detection won't change over time, so ignore lint rule\n  const shouldPreferDark = Boolean(window.matchMedia)\n    ? useShouldPreferDarkTheme() // eslint-disable-line react-hooks/rules-of-hooks\n    : false;\n\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes(),\n  );\n  if (!appTheme) {\n    throw new Error('App has no themes');\n  }\n\n  return React.createElement(appTheme.Provider, { children: children,} );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The default config loader, which expects that config is available at compile-time\n * in `process.env.APP_CONFIG`. APP_CONFIG should be an array of config objects as\n * returned by the config loader.\n *\n * It will also load runtime config from the __APP_INJECTED_RUNTIME_CONFIG__ string,\n * which can be rewritten at runtime to contain an additional JSON config object.\n * If runtime config is present, it will be placed first in the config array, overriding\n * other config values.\n *\n * @public\n */\nexport const defaultConfigLoader = async (\n  // This string may be replaced at runtime to provide additional config.\n  // It should be replaced by a JSON-serialized config object.\n  // It's a param so we can test it, but at runtime this will always fall back to default.\n  runtimeConfigJson = '__APP_INJECTED_RUNTIME_CONFIG__',\n) => {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error('No static configuration provided');\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error('Static configuration has invalid format');\n  }\n  const configs = appConfig.slice() ;\n\n  // Avoiding this string also being replaced at runtime\n  if (\n    runtimeConfigJson !==\n    '__app_injected_runtime_config__'.toLocaleUpperCase('en-US')\n  ) {\n    try {\n      const data = JSON.parse(runtimeConfigJson) ;\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: 'env' });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n\n  const windowAppConfig = (window ).__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: 'window',\n      data: windowAppConfig,\n    });\n  }\n  return configs;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @internal */\nclass ApiRegistryBuilder {\n   apis = [];\n\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n\n  build() {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\n\n/**\n * A registry for utility APIs.\n *\n * @internal\n */\nexport class ApiRegistry  {\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(new Map([[api.id, impl]]));\n  }\n\n  constructor(  apis) {;this.apis = apis;}\n\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n\n  get(api) {\n    return this.apis.get(api.id) ;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function resolveRouteBindings(bindRoutes) {\n  const result = new Map();\n\n  if (bindRoutes) {\n    const bind = (\n      externalRoutes,\n      targetRoutes,\n    ) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`,\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n\n  return result;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React, {\n\n  createContext,\n\n\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  ApiProvider,\n  AppThemeSelector,\n  ConfigReader,\n  LocalStorageFeatureFlags,\n} from '../apis';\nimport {\n  useApi,\n\n\n\n\n  appThemeApiRef,\n  configApiRef,\n\n\n  featureFlagsApiRef,\n\n  identityApiRef,\n\n} from '@backstage/core-plugin-api';\nimport { ApiFactoryRegistry, ApiResolver } from '../apis/system';\nimport {\n  childDiscoverer,\n  routeElementDiscoverer,\n  traverseElementTree,\n} from '../extensions/traversal';\nimport { pluginCollector } from '../plugins/collectors';\nimport {\n  featureFlagCollector,\n  routingV1Collector,\n} from '../routing/collectors';\nimport { RoutingProvider } from '../routing/RoutingProvider';\nimport { RouteTracker } from '../routing/RouteTracker';\nimport {\n  validateRouteParameters,\n  validateRouteBindings,\n} from '../routing/validation';\nimport { AppContextProvider } from './AppContext';\nimport { AppIdentityProxy } from '../apis/implementations/IdentityApi/AppIdentityProxy';\n\n\n\n\n\n\n\n\nimport { AppThemeProvider } from './AppThemeProvider';\nimport { defaultConfigLoader } from './defaultConfigLoader';\nimport { ApiRegistry } from '../apis/system/ApiRegistry';\nimport { resolveRouteBindings } from './resolveRouteBindings';\n\n\n\n\n\n\n\n\nconst InternalAppContext = createContext\n\n({ routeObjects: [] });\n\n/**\n * Get the app base path from the configured app baseUrl.\n *\n * The returned path does not have a trailing slash.\n */\nfunction getBasePath(configApi) {\n  let { pathname } = new URL(\n    configApi.getOptionalString('app.baseUrl') ?? '/',\n    'http://dummy.dev', // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, '');\n  return pathname;\n}\n\nfunction useConfigLoader(\n  configLoader,\n  components,\n  appThemeApi,\n) {\n  // Keeping this synchronous when a config loader isn't set simplifies tests a lot\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n\n  let noConfigNode = undefined;\n\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = React.createElement(Progress, null );\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = React.createElement(BootErrorPage, { step: \"load-config\", error: config.error,} );\n  }\n\n  const { ThemeProvider = AppThemeProvider } = components;\n\n  // Before the config is loaded we can't use a router, so exit early\n  if (noConfigNode) {\n    return {\n      node: (\n        React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi),}\n          , React.createElement(ThemeProvider, null, noConfigNode)\n        )\n      ),\n    };\n  }\n\n  const configReader = ConfigReader.fromConfigs(config.value ?? []);\n\n  return { api: configReader };\n}\n\nclass AppContextImpl  {\n  constructor(  app) {;this.app = app;}\n\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\n\nexport class AppManager  {\n   apiHolder;\n   configApi;\n\n    apis;\n    icons;\n    plugins;\n    components;\n    themes;\n    configLoader;\n    defaultApis;\n    bindRoutes;\n\n    appIdentityProxy = new AppIdentityProxy();\n    apiFactoryRegistry;\n\n  constructor(options) {\n    this.apis = options.apis ?? [];\n    this.icons = options.icons;\n    this.plugins = new Set((options.plugins ) ?? []);\n    this.components = options.components;\n    this.themes = options.themes ;\n    this.configLoader = options.configLoader ?? defaultConfigLoader;\n    this.defaultApis = options.defaultApis ?? [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n  }\n\n  getPlugins() {\n    return Array.from(this.plugins) ;\n  }\n\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n\n  getComponents() {\n    return this.components;\n  }\n\n  getProvider() {\n    const appContext = new AppContextImpl(this);\n\n    // We only validate routes once\n    let routesHaveBeenValidated = false;\n\n    const Provider = ({ children }) => {\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        [],\n      );\n\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: routingV1Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector,\n          },\n        });\n\n        // TODO(Rugvip): Restructure the public API so that we can get an immediate view of\n        //               the app, rather than having to wait for the provider to render.\n        //               For now we need to push the additional plugins we find during\n        //               collection and then make sure we initialize things afterwards.\n        result.collectedPlugins.forEach(plugin => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n\n        // Initialize APIs once all plugins are available\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes),\n        };\n      }, [children]);\n\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins ,\n        );\n      }\n\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi,\n      );\n\n      const hasConfigApi = 'api' in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig ;\n        this.configApi = api;\n      }\n\n      useEffect(() => {\n        if (hasConfigApi) {\n          const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n\n          for (const plugin of this.plugins.values()) {\n            if ('getFeatureFlags' in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId(),\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === 'feature-flag') {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId(),\n                  });\n                }\n              }\n            }\n          }\n\n          // Go through the featureFlags returned from the traversal and\n          // register those now the configApi has been loaded\n          for (const name of featureFlags) {\n            featureFlagsApi.registerFlag({ name, pluginId: '' });\n          }\n        }\n      }, [hasConfigApi, loadedConfig, featureFlags]);\n\n      if ('node' in loadedConfig) {\n        // Loading or error\n        return loadedConfig.node;\n      }\n\n      const { ThemeProvider = AppThemeProvider } = this.components;\n\n      return (\n        React.createElement(ApiProvider, { apis: this.getApiHolder(),}\n          , React.createElement(AppContextProvider, { appContext: appContext,}\n            , React.createElement(ThemeProvider, null\n              , React.createElement(RoutingProvider, {\n                routePaths: routing.paths,\n                routeParents: routing.parents,\n                routeObjects: routing.objects,\n                routeBindings: routeBindings,\n                basePath: getBasePath(loadedConfig.api),}\n              \n                , React.createElement(InternalAppContext.Provider, {\n                  value: { routeObjects: routing.objects },}\n                \n                  , children\n                )\n              )\n            )\n          )\n        )\n      );\n    };\n    return Provider;\n  }\n\n  getRouter() {\n    const { Router: RouterComponent, SignInPage: SignInPageComponent } =\n      this.components;\n\n    // This wraps the sign-in page and waits for sign-in to be completed before rendering the app\n    const SignInPageWrapper = ({\n      component: Component,\n      children,\n    }\n\n\n) => {\n      const [identityApi, setIdentityApi] = useState();\n\n      if (!identityApi) {\n        return React.createElement(Component, { onSignInSuccess: setIdentityApi,} );\n      }\n\n      this.appIdentityProxy.setTarget(identityApi);\n      return children;\n    };\n\n    const AppRouter = ({ children }) => {\n      const configApi = useApi(configApiRef);\n      const mountPath = `${getBasePath(configApi)}/*`;\n      const { routeObjects } = useContext(InternalAppContext);\n\n      // If the app hasn't configured a sign-in page, we just continue as guest.\n      if (!SignInPageComponent) {\n        this.appIdentityProxy.setTarget({\n          getUserId: () => 'guest',\n          getIdToken: async () => undefined,\n          getProfile: () => ({\n            email: 'guest@example.com',\n            displayName: 'Guest',\n          }),\n          getProfileInfo: async () => ({\n            email: 'guest@example.com',\n            displayName: 'Guest',\n          }),\n          getBackstageIdentity: async () => ({\n            type: 'user',\n            userEntityRef: 'user:default/guest',\n            ownershipEntityRefs: ['user:default/guest'],\n          }),\n          getCredentials: async () => ({}),\n          signOut: async () => {},\n        });\n\n        return (\n          React.createElement(RouterComponent, null\n            , React.createElement(RouteTracker, { routeObjects: routeObjects,} )\n            , React.createElement(Routes, null\n              , React.createElement(Route, { path: mountPath, element: React.createElement(React.Fragment, null, children),} )\n            )\n          )\n        );\n      }\n\n      return (\n        React.createElement(RouterComponent, null\n          , React.createElement(RouteTracker, { routeObjects: routeObjects,} )\n          , React.createElement(SignInPageWrapper, { component: SignInPageComponent,}\n            , React.createElement(Routes, null\n              , React.createElement(Route, { path: mountPath, element: React.createElement(React.Fragment, null, children),} )\n            )\n          )\n        )\n      );\n    };\n\n    return AppRouter;\n  }\n\n   getApiHolder() {\n    if (this.apiHolder) {\n      // Register additional plugins if they have been added.\n      // Routes paths, objects and others are already updated in the provider when children of it change\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register('default', factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis(),\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register('static', {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes),\n    });\n    this.apiFactoryRegistry.register('static', {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            'Tried to access config API before config was loaded',\n          );\n        }\n        return this.configApi;\n      },\n    });\n    this.apiFactoryRegistry.register('static', {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy,\n    });\n\n    // It's possible to replace the feature flag API, but since we must have at least\n    // one implementation we add it here directly instead of through the defaultApis.\n    this.apiFactoryRegistry.register('default', {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags(),\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register('default', factory);\n    }\n\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register('default', factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${\n              factory.api\n            }`,\n          );\n        }\n      }\n    }\n\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register('app', factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`,\n        );\n      }\n    }\n\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis(),\n    );\n\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n\n   verifyPlugins(plugins) {\n    const pluginIds = new Set();\n\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppManager } from './AppManager';\n\n\n/**\n * Creates a new Backstage App where the full set of options are required.\n *\n * @public\n * @param options - A set of options for creating the app\n * @returns\n * @remarks\n *\n * You will most likely want to use {@link @backstage/app-defaults#createApp},\n * however, this low-level API allows you to provide a full set of options,\n * including your own `components`, `icons`, `defaultApis`, and `themes`. This\n * is particularly useful if you are not using `@backstage/core-components` or\n * MUI, as it allows you to avoid those dependencies completely.\n */\nexport function createSpecializedApp(options) {\n  return new AppManager(options);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function hasScopes(\n  searched,\n  searchFor,\n) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n\n\n\n\nexport class SessionScopeHelper {\n  constructor(  options) {;this.options = options;}\n\n  sessionExistsAndHasScope(\n    session,\n    scopes,\n  ) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === undefined) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes(sessionScopes, scopes);\n  }\n\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== undefined) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BehaviorSubject } from '../subjects';\nimport { SessionState } from '@backstage/core-plugin-api';\n\n\nexport class SessionStateTracker {\n    subject = new BehaviorSubject(\n    SessionState.SignedOut,\n  );\n\n   signedIn = false;\n\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut,\n      );\n    }\n  }\n\n  sessionState$() {\n    return this.subject;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SessionScopeHelper, hasScopes } from './common';\nimport { SessionStateTracker } from './SessionStateTracker';\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * RefreshingAuthSessionManager manages an underlying session that has\n * and expiration time and needs to be refreshed periodically.\n */\nexport class RefreshingAuthSessionManager {\n    connector;\n    helper;\n    sessionScopesFunc;\n    sessionShouldRefreshFunc;\n    stateTracker = new SessionStateTracker();\n\n   refreshPromise;\n   currentSession;\n\n  constructor(options) {\n    const {\n      connector,\n      defaultScopes = new Set(),\n      sessionScopes,\n      sessionShouldRefresh,\n    } = options;\n\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n\n  async getSession(options) {\n    if (\n      this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)\n    ) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh();\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return undefined;\n        }\n        throw error;\n      }\n    }\n\n    // The user may still have a valid refresh token in their cookies. Attempt to\n    // initiate a fresh session through the backend using that refresh token.\n    //\n    // We skip this check if an instant login popup is requested, as we need to\n    // stay in a synchronous call stack from the user interaction. The downside\n    // is that that the user will sometimes be requested to log in even if they\n    // already had an existing session.\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh();\n        this.currentSession = newSession;\n        // The session might not have the scopes requested so go back and check again\n        return this.getSession(options);\n      } catch {\n        // If the refresh attempt fails we assume we don't have a session, so continue to create one.\n      }\n    }\n\n    // If we continue here we will show a popup, so exit if this is an optional session request.\n    if (options.optional) {\n      return undefined;\n    }\n\n    // We can call authRequester multiple times, the returned session will contain all requested scopes.\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes),\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n\n  async removeSession() {\n    this.currentSession = undefined;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n\n   async collapsedSessionRefresh() {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n\n    this.refreshPromise = this.connector.refreshSession();\n\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SessionScopeHelper } from './common';\nimport { SessionStateTracker } from './SessionStateTracker';\n\n\n\n\n\n\n\n\n\n\n/**\n * StaticAuthSessionManager manages an underlying session that does not expire.\n */\nexport class StaticAuthSessionManager {\n    connector;\n    helper;\n    stateTracker = new SessionStateTracker();\n\n   currentSession;\n\n  constructor(options) {\n    const { connector, defaultScopes = new Set(), sessionScopes } = options;\n\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n\n  async getSession(options) {\n    if (\n      this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)\n    ) {\n      return this.currentSession;\n    }\n\n    // If we continue here we will show a popup, so exit if this is an optional session request.\n    if (options.optional) {\n      return undefined;\n    }\n\n    // We can call authRequester multiple times, the returned session will contain all requested scopes.\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes),\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = undefined;\n    this.stateTracker.setIsSignedIn(false);\n  }\n\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\n\n// TODO(Rugvip): These are stopgap and probably incomplete implementations of subjects.\n// If we add a more complete Observables library they should be replaced.\n\n/**\n * A basic implementation of ReactiveX publish subjects.\n *\n * A subject is a convenient way to create an observable when you want\n * to fan out a single value to all subscribers.\n *\n * See http://reactivex.io/documentation/subject.html\n */\nexport class PublishSubject\n\n{\n   isClosed = false;\n   terminatingError;\n\n    observable = new ObservableImpl(subscriber => {\n    if (this.isClosed) {\n      if (this.terminatingError) {\n        subscriber.error(this.terminatingError);\n      } else {\n        subscriber.complete();\n      }\n      return () => {};\n    }\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n    subscribers = new Set\n\n();\n\n  [Symbol.observable]() {\n    return this;\n  }\n\n  get closed() {\n    return this.isClosed;\n  }\n\n  next(value) {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.subscribers.forEach(subscriber => subscriber.next(value));\n  }\n\n  error(error) {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach(subscriber => subscriber.error(error));\n  }\n\n  complete() {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.isClosed = true;\n    this.subscribers.forEach(subscriber => subscriber.complete());\n  }\n\n  \n\n\n\n\n\n  subscribe(\n    onNext,\n    onError,\n    onComplete,\n  ) {\n    const observer =\n      typeof onNext === 'function'\n        ? {\n            next: onNext,\n            error: onError,\n            complete: onComplete,\n          }\n        : onNext;\n\n    return this.observable.subscribe(observer);\n  }\n}\n\n/**\n * A basic implementation of ReactiveX behavior subjects.\n *\n * A subject is a convenient way to create an observable when you want\n * to fan out a single value to all subscribers.\n *\n * The BehaviorSubject will emit the most recently emitted value or error\n * whenever a new observer subscribes to the subject.\n *\n * See http://reactivex.io/documentation/subject.html\n */\n\nexport class BehaviorSubject\n\n{\n   isClosed;\n   currentValue;\n   terminatingError;\n    observable;\n\n  constructor(value) {\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = undefined;\n    this.observable = new ObservableImpl(subscriber => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {};\n      }\n\n      subscriber.next(this.currentValue);\n\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n\n    subscribers = new Set\n\n();\n\n  [Symbol.observable]() {\n    return this;\n  }\n\n  get closed() {\n    return this.isClosed;\n  }\n\n  next(value) {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.currentValue = value;\n    this.subscribers.forEach(subscriber => subscriber.next(value));\n  }\n\n  error(error) {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach(subscriber => subscriber.error(error));\n  }\n\n  complete() {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.isClosed = true;\n    this.subscribers.forEach(subscriber => subscriber.complete());\n  }\n\n  \n\n\n\n\n\n  subscribe(\n    onNext,\n    onError,\n    onComplete,\n  ) {\n    const observer =\n      typeof onNext === 'function'\n        ? {\n            next: onNext,\n            error: onError,\n            complete: onComplete,\n          }\n        : onNext;\n\n    return this.observable.subscribe(observer);\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  featureFlagsApiRef,\n  useApi,\n  attachComponentData,\n} from '@backstage/core-plugin-api';\nimport React, { } from 'react';\n\n/**\n * Props for the {@link FeatureFlagged} component.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Enables or disables rendering of its children based on the state of a given\n * feature flag.\n *\n * @public\n */\nexport const FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled =\n    'with' in props\n      ? featureFlagApi.isActive(props.with)\n      : !featureFlagApi.isActive(props.without);\n  return React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\n\nattachComponentData(FeatureFlagged, 'core.featureFlagged', true);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { useRoutes } from 'react-router-dom';\nimport { useApp, useElementFilter } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A wrapper around a set of routes.\n *\n * @remarks\n *\n * The root of the routing hierarchy in your app should use this component,\n * instead of the one from `react-router-dom`. This ensures that all of the\n * plugin route and utility API wiring happens under the hood.\n *\n * @public\n */\nexport const FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const routes = useElementFilter(props.children, elements =>\n    elements\n      .getElements()\n      .flatMap(child => {\n        let path = child.props.path;\n\n        // TODO(Rugvip): Work around plugins registering empty paths, remove once deprecated routes are gone\n        if (path === '') {\n          return [];\n        }\n        path = path?.replace(/\\/\\*$/, '') ?? '/';\n\n        return [\n          {\n            path,\n            element: child,\n            children: child.props.children\n              ? [\n                  // These are the children of each route, which we all add in under a catch-all\n                  // subroute in order to make them available to `useOutlet`\n                  {\n                    path: path === '/' ? '/' : '/*', // The root path must require an exact match\n                    element: child.props.children,\n                  },\n                ]\n              : undefined,\n          },\n        ];\n      })\n      // Routes are sorted to work around a bug where prefixes are unexpectedly matched\n      .sort((a, b) => b.path.localeCompare(a.path))\n      // We make sure all routes have '/*' appended, except '/'\n      .map(obj => {\n        obj.path = obj.path === '/' ? '/' : `${obj.path}/*`;\n        return obj;\n      }),\n  );\n\n  // TODO(Rugvip): Possibly add a way to skip this, like a noNotFoundPage prop\n  routes.push({\n    element: React.createElement(NotFoundErrorPage, null ),\n    path: '/*',\n  });\n\n  return useRoutes(routes);\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\nimport pluralize from 'pluralize';\n\n/**\n * Displays alerts from {@link @backstage/core-plugin-api#AlertApi}\n *\n * @public\n * @remarks\n *\n * Shown as SnackBar at the center top of the page by default. Configurable with props.\n */\n\n// TODO: improve on this and promote to a shared component for use by all apps.\n\n\n\n\n\n\n\n\n/** @public */\nexport function AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n\n  const { anchorOrigin = { vertical: 'top', horizontal: 'center' } } = props;\n\n  useEffect(() => {\n    const subscription = alertApi\n      .alert$()\n      .subscribe(message => setMessages(msgs => msgs.concat(message)));\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n\n  if (messages.length === 0) {\n    return null;\n  }\n\n  const [firstMessage] = messages;\n\n  const handleClose = () => {\n    setMessages(msgs => msgs.filter(msg => msg !== firstMessage));\n  };\n\n  return (\n    React.createElement(Snackbar, { open: true, anchorOrigin: anchorOrigin,}\n      , React.createElement(Alert, {\n        action: \n          React.createElement(IconButton, {\n            color: \"inherit\",\n            size: \"small\",\n            onClick: handleClose,\n            'data-testid': \"error-button-close\",}\n          \n            , React.createElement(CloseIcon, null )\n          )\n        ,\n        severity: firstMessage.severity,}\n      \n        , React.createElement('span', null\n          , firstMessage.message.toString()\n          , messages.length > 1 && (\n            React.createElement('em', null, ` (${messages.length - 1} older ${pluralize(\n              'message',\n              messages.length - 1,\n            )})`)\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    color += `00${value.toString(16)}`.substr(-2);\n  }\n  return color;\n}\n\nexport function extractInitials(value) {\n  return value.match(/\\b\\w/g)?.join('').substring(0, 2);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { createStyles, makeStyles, } from '@material-ui/core/styles';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { extractInitials, stringToColor } from './utils';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      avatar: {\n        width: '4rem',\n        height: '4rem',\n        color: '#fff',\n        fontWeight: theme.typography.fontWeightBold,\n        letterSpacing: '1px',\n        textTransform: 'uppercase',\n      },\n    }),\n  { name: 'BackstageAvatar' },\n);\n\n/**\n * Properties for {@link Avatar}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n *  Component rendering an Avatar\n *\n * @public\n * @remarks\n *\n * Based on https://v4.mui.com/components/avatars/#avatar with some styling adjustment and two-letter initials\n */\nexport function Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles();\n  let styles = { ...customStyles };\n  // We only calculate the background color if there's not an avatar\n  // picture. If there is a picture, it might have a transparent\n  // background and we don't know whether the calculated background\n  // color will clash.\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || ''),\n      ...customStyles,\n    };\n  }\n  return (\n    React.createElement(MaterialAvatar, {\n      alt: displayName,\n      src: picture,\n      className: classes.avatar,\n      style: styles,}\n    \n      , displayName && extractInitials(displayName)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport classnames from 'classnames';\nimport MaterialLink, {\n\n} from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { } from 'react';\nimport {\n  Link as RouterLink,\n\n} from 'react-router-dom';\n\nconst useStyles = makeStyles(\n  {\n    visuallyHidden: {\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      overflow: 'hidden',\n      position: 'absolute',\n      whiteSpace: 'nowrap',\n      height: 1,\n      width: 1,\n    },\n    externalLink: {\n      position: 'relative',\n    },\n  },\n  { name: 'Link' },\n);\n\nexport const isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\n\n\n\n\n\n\n\n/**\n * Given a react node, try to retrieve its text content.\n */\nconst getNodeText = (node) => {\n  // If the node is an array of children, recurse and join.\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(' ').trim();\n  }\n\n  // If the node is a react element, recurse on its children.\n  if (typeof node === 'object' && node) {\n    return getNodeText((node )?.props?.children);\n  }\n\n  // Base case: the node is just text. Return it.\n  if (['string', 'number'].includes(typeof node)) {\n    return String(node);\n  }\n\n  // Base case: just return an empty string.\n  return '';\n};\n\n/**\n * Thin wrapper on top of material-ui's Link component, which...\n * - Makes the Link use react-router\n * - Captures Link clicks as analytics events.\n */\nexport const Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles();\n    const analytics = useAnalytics();\n    const to = String(props.to);\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n\n    const handleClick = (event) => {\n      onClick?.(event);\n      if (!noTrack) {\n        analytics.captureEvent('click', linkText, { attributes: { to } });\n      }\n    };\n\n    return external ? (\n      // External links\n      React.createElement(MaterialLink, {\n        ref: ref,\n        href: to,\n        onClick: handleClick,\n        ...(newWindow ? { target: '_blank', rel: 'noopener' } : {}),\n        ...props,\n        className: classnames(classes.externalLink, props.className),}\n      \n        , props.children\n        , React.createElement('span', { className: classes.visuallyHidden,}, \", Opens in a new window\"     )\n      )\n    ) : (\n      // Interact with React Router for internal links\n      React.createElement(MaterialLink, {\n        ref: ref,\n        component: RouterLink,\n        onClick: handleClick,\n        ...props,}\n      )\n    );\n  },\n) ;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport MaterialButton, {\n\n} from '@material-ui/core/Button';\nimport React from 'react';\nimport { Link, } from '../Link';\n\n/**\n * Properties for {@link Button}\n *\n * @public\n * @remarks\n *\n * See {@link https://v4.mui.com/api/button/#props | Material-UI Button Props} for all properties\n */\n\n\n\n/**\n * This wrapper is here to reset the color of the Link and make typescript happy.\n */\nconst LinkWrapper = React.forwardRef((props, ref) => (\n  React.createElement(Link, { ref: ref, ...props, color: \"initial\",} )\n));\n\n/**\n * Thin wrapper on top of material-ui's {@link https://v4.mui.com/components/buttons/ | Button} component\n *\n * @public\n * @remarks\n *\n * Makes the Button to utilise react-router\n */\nexport const Button = React.forwardRef((props, ref) => (\n  React.createElement(MaterialButton, { ref: ref, component: LinkWrapper, ...props,} )\n)) ;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport React, { useEffect, useState } from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\n\n/**\n * Properties for {@link CopyTextButton}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Copy text button with visual feedback\n *\n * @public\n * @remarks\n *\n * Visual feedback takes form of:\n *  - a hover color\n *  - click ripple\n *  - Tooltip shown when user has clicked\n *\n * @example\n *\n * `<CopyTextButton text=\"My text that I want to be copied to the clipboard\" />`\n */\nexport function CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1000,\n    tooltipText = 'Text copied to clipboard',\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  const handleCopyClick = e => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Tooltip, {\n        id: \"copy-test-tooltip\",\n        title: tooltipText,\n        placement: \"top\",\n        leaveDelay: tooltipDelay,\n        onClose: () => setOpen(false),\n        open: open,}\n      \n        , React.createElement(IconButton, { onClick: handleCopyClick,}\n          , React.createElement(CopyIcon, null )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\n\nimport { CopyTextButton } from '../CopyTextButton';\nimport { LightAsync } from 'react-syntax-highlighter';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\n\n/**\n * Properties for {@link CodeSnippet}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Thin wrapper on top of {@link https://react-syntax-highlighter.github.io/react-syntax-highlighter/ | react-syntax-highlighter}\n * providing consistent theming and copy code button\n *\n * @public\n */\nexport function CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false,\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === 'dark' ? dark : docco;\n  const highlightColor = theme.palette.type === 'dark' ? '#256bf3' : '#e6ffed';\n\n  return (\n    React.createElement('div', { style: { position: 'relative' },}\n      , React.createElement(LightAsync, {\n        customStyle: customStyle,\n        language: language,\n        style: mode,\n        showLineNumbers: showLineNumbers,\n        wrapLines: true,\n        lineNumberStyle: { color: theme.palette.textVerySubtle },\n        lineProps: (lineNumber) =>\n          highlightedNumbers?.includes(lineNumber)\n            ? {\n                style: {\n                  backgroundColor: highlightColor,\n                },\n              }\n            : {}\n        ,}\n      \n        , text\n      )\n      , showCopyCodeButton && (\n        React.createElement('div', { style: { position: 'absolute', top: 0, right: 0 },}\n          , React.createElement(CopyTextButton, { text: text,} )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React from 'react';\nimport { Link as RouterLink, } from 'react-router-dom';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\n\n/**\n * Properties for {@link CreateButton}\n *\n * @public\n */\n\n\n\n\n/**\n * Responsive Button giving consistent UX for creation of different things\n *\n * @public\n */\nexport function CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(theme =>\n    theme.breakpoints.down('xs'),\n  );\n\n  if (!to) {\n    return null;\n  }\n\n  return isXSScreen ? (\n    React.createElement(IconButton, {\n      component: RouterLink,\n      color: \"primary\",\n      title: title,\n      size: \"small\",\n      to: to,}\n    \n      , React.createElement(AddCircleOutline, null )\n    )\n  ) : (\n    React.createElement(Button, { component: RouterLink, variant: \"contained\", color: \"primary\", to: to,}\n      , title\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Edge of {@link DependencyGraph}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Graph direction\n *\n * @public\n */\nexport var Direction; (function (Direction) {\n  /**\n   * Top to Bottom\n   */\n  const TOP_BOTTOM = 'TB'; Direction[\"TOP_BOTTOM\"] = TOP_BOTTOM;\n  /**\n   * Bottom to Top\n   */\n  const BOTTOM_TOP = 'BT'; Direction[\"BOTTOM_TOP\"] = BOTTOM_TOP;\n  /**\n   * Left to Right\n   */\n  const LEFT_RIGHT = 'LR'; Direction[\"LEFT_RIGHT\"] = LEFT_RIGHT;\n  /**\n   * Right to Left\n   */\n  const RIGHT_LEFT = 'RL'; Direction[\"RIGHT_LEFT\"] = RIGHT_LEFT;\n})(Direction || (Direction = {}));\n\n/**\n * Node alignment\n *\n * @public\n */\nexport var Alignment; (function (Alignment) {\n  /**\n   * Up Left\n   */\n  const UP_LEFT = 'UL'; Alignment[\"UP_LEFT\"] = UP_LEFT;\n  /**\n   * Up Right\n   */\n  const UP_RIGHT = 'UR'; Alignment[\"UP_RIGHT\"] = UP_RIGHT;\n  /**\n   * Down Left\n   */\n  const DOWN_LEFT = 'DL'; Alignment[\"DOWN_LEFT\"] = DOWN_LEFT;\n  /**\n   * Down Right\n   */\n  const DOWN_RIGHT = 'DR'; Alignment[\"DOWN_RIGHT\"] = DOWN_RIGHT;\n})(Alignment || (Alignment = {}));\n\n/**\n * Algorithm used to rand nodes in graph\n */\nexport var Ranker; (function (Ranker) {\n  /**\n   * {@link https://en.wikipedia.org/wiki/Network_simplex_algorithm | Network Simplex} algorithm\n   */\n  const NETWORK_SIMPLEX = 'network-simplex'; Ranker[\"NETWORK_SIMPLEX\"] = NETWORK_SIMPLEX;\n  /**\n   * Tight Tree algorithm\n   */\n  const TIGHT_TREE = 'tight-tree'; Ranker[\"TIGHT_TREE\"] = TIGHT_TREE;\n  /**\n   * Longest path algorithm\n   *\n   * @remarks\n   *\n   * Simplest and fastest\n   */\n  const LONGEST_PATH = 'longest-path'; Ranker[\"LONGEST_PATH\"] = LONGEST_PATH;\n})(Ranker || (Ranker = {}));\n\n/**\n * Position of label in relation to the edge\n *\n * @public\n */\nexport var LabelPosition; (function (LabelPosition) {\n  const LEFT = 'l'; LabelPosition[\"LEFT\"] = LEFT;\n  const RIGHT = 'r'; LabelPosition[\"RIGHT\"] = RIGHT;\n  const CENTER = 'c'; LabelPosition[\"CENTER\"] = CENTER;\n})(LabelPosition || (LabelPosition = {}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light,\n    },\n    text: {\n      fill: theme.palette.primary.contrastText,\n    },\n  }),\n  { name: 'BackstageDependencyGraphDefaultNode' },\n);\n\n/** @public */\nexport function DefaultNode({ node: { id } }) {\n  const classes = useStyles();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  return (\n    React.createElement('g', null\n      , React.createElement('rect', {\n        className: classes.node,\n        width: paddedWidth,\n        height: paddedHeight,\n        rx: 10,}\n      )\n      , React.createElement('text', {\n        ref: idRef,\n        className: classes.text,\n        y: paddedHeight / 2,\n        x: paddedWidth / 2,\n        textAnchor: \"middle\",\n        alignmentBaseline: \"middle\",}\n      \n        , id\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ARROW_MARKER_ID = 'arrow-marker';\n\nexport const NODE_TEST_ID = 'node';\nexport const EDGE_TEST_ID = 'edge';\nexport const LABEL_TEST_ID = 'label';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { DefaultNode } from './DefaultNode';\n\nimport { NODE_TEST_ID } from './constants';\n\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n  }),\n  { name: 'BackstageDependencyGraphNode' },\n);\n\n\n\n\n\n\n\n\n\nconst renderDefault = (props) => React.createElement(DefaultNode, { ...props,} );\n\nexport function Node({\n  render = renderDefault,\n  setNode,\n  node,\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles();\n  const nodeRef = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    // set the node width to the actual rendered width to properly layout graph\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n\n  return (\n    React.createElement('g', {\n      ref: nodeRef,\n      'data-testid': NODE_TEST_ID,\n      className: classes.node,\n      transform: `translate(${x - width / 2},${y - height / 2})`,}\n    \n      , render({ node: nodeProps })\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\n\n\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast,\n    },\n  }),\n  { name: 'BackstageDependencyGraphDefaultLabel' },\n);\n\n/** @public */\nexport function DefaultLabel({ edge: { label } }) {\n  const classes = useStyles();\n  return (\n    React.createElement('text', { className: classes.text, textAnchor: \"middle\",}\n      , label\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\n\n\n\n\n\n\n\nimport { ARROW_MARKER_ID, EDGE_TEST_ID, LABEL_TEST_ID } from './constants';\nimport { DefaultLabel } from './DefaultLabel';\n\n\n/* Based on: https://github.com/dagrejs/dagre/wiki#configuring-the-layout  */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    path: {\n      strokeWidth: 2,\n      stroke: theme.palette.textSubtle,\n      fill: 'none',\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n  }),\n  { name: 'BackstageDependencyGraphEdge' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst renderDefault = (props) => (\n  React.createElement(DefaultLabel, { ...props,} )\n);\n\nconst createPath = d3Shape\n  .line()\n  .x(d => d.x)\n  .y(d => d.y)\n  .curve(d3Shape.curveMonotoneX);\n\nexport function Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles();\n\n  const labelRef = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    // set the label width to the actual rendered width to properly layout graph\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n\n  let path = '';\n\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y),\n    );\n    path = createPath(finitePoints) || '';\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , path && (\n        React.createElement('path', {\n          'data-testid': EDGE_TEST_ID,\n          className: classes.path,\n          markerEnd: `url(#${ARROW_MARKER_ID})`,\n          d: path,}\n        )\n      )\n      , labelProps.label ? (\n        React.createElement('g', {\n          ref: labelRef,\n          'data-testid': LABEL_TEST_ID,\n          className: classes.label,\n          transform: `translate(${x},${y})`,}\n        \n          , render({ edge: labelProps })\n        )\n      ) : null\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\n\nimport {\n\n\n  Direction,\n\n  Ranker,\n\n\n  LabelPosition,\n} from './types';\nimport { Node } from './Node';\nimport { Edge, } from './Edge';\nimport { ARROW_MARKER_ID } from './constants';\n\n/**\n * Properties of {@link DependencyGraph}\n *\n * @public\n * @remarks\n * <NodeData> and <EdgeData> are useful when rendering custom or edge labels\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst WORKSPACE_ID = 'workspace';\n\n/**\n * Graph component used to visualize relations between entities\n *\n * @public\n */\nexport function DependencyGraph(\n  props,\n) {\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = Ranker.NETWORK_SIMPLEX,\n    labelPosition = LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = 'enabled',\n    ...svgProps\n  } = props;\n  const theme = useTheme();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n\n  const graph = React.useRef(\n    new dagre.graphlib.Graph(),\n  );\n  const [graphWidth, setGraphWidth] = React.useState(\n    graph.current.graph()?.width || 0,\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    graph.current.graph()?.height || 0,\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n\n  const containerRef = React.useMemo(\n    () =>\n      debounce((node) => {\n        if (!node) {\n          return;\n        }\n        // Set up zooming + panning\n        const container = d3Selection.select(node);\n        const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n\n        function enableZoom() {\n          container.call(\n            d3Zoom\n              .zoom()\n              .scaleExtent([1, 10])\n              .on('zoom', event => {\n                event.transform.x = Math.min(\n                  0,\n                  Math.max(\n                    event.transform.x,\n                    maxWidth - maxWidth * event.transform.k,\n                  ),\n                );\n                event.transform.y = Math.min(\n                  0,\n                  Math.max(\n                    event.transform.y,\n                    maxHeight - maxHeight * event.transform.k,\n                  ),\n                );\n                workspace.attr('transform', event.transform);\n              }),\n          );\n        }\n\n        if (zoom === 'enabled') {\n          enableZoom();\n        } else if (zoom === 'enable-on-click') {\n          container.on('click', () => enableZoom());\n        }\n\n        const { width: newContainerWidth, height: newContainerHeight } =\n          node.getBoundingClientRect();\n        if (containerWidth !== newContainerWidth) {\n          setContainerWidth(newContainerWidth);\n        }\n        if (containerHeight !== newContainerHeight) {\n          setContainerHeight(newContainerHeight);\n        }\n      }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom],\n  );\n\n  const setNodesAndEdges = React.useCallback(() => {\n    // Cleaning up lingering nodes and edges\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n\n    currentGraphNodes.forEach(nodeId => {\n      const remainingNode = nodes.some(node => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n\n    currentGraphEdges.forEach(e => {\n      const remainingEdge = edges.some(\n        edge => edge.from === e.v && edge.to === e.w,\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n\n    // Adding/updating nodes and edges\n    nodes.forEach(node => {\n      const existingNode = graph.current\n        .nodes()\n        .find(nodeId => node.id === nodeId);\n\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n\n    edges.forEach(e => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks,\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n\n  const updateGraph = React.useMemo(\n    () =>\n      debounce(\n        () => {\n          dagre.layout(graph.current);\n          const { height, width } = graph.current.graph();\n          const newHeight = Math.max(0, height || 0);\n          const newWidth = Math.max(0, width || 0);\n          setGraphWidth(newWidth);\n          setGraphHeight(newHeight);\n\n          setGraphNodes(graph.current.nodes());\n          setGraphEdges(graph.current.edges());\n        },\n        250,\n        { leading: true },\n      ),\n    [],\n  );\n\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker,\n    });\n\n    setNodesAndEdges();\n    updateGraph();\n\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph,\n  ]);\n\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n\n  return (\n    React.createElement('svg', {\n      ref: containerRef,\n      ...svgProps,\n      width: \"100%\",\n      height: maxHeight,\n      viewBox: `0 0 ${maxWidth} ${maxHeight}`,}\n    \n      , React.createElement('defs', null\n        , React.createElement('marker', {\n          id: ARROW_MARKER_ID,\n          viewBox: \"0 0 24 24\"   ,\n          markerWidth: \"14\",\n          markerHeight: \"14\",\n          refX: \"16\",\n          refY: \"12\",\n          orient: \"auto\",\n          markerUnits: \"strokeWidth\",}\n        \n          , React.createElement('path', {\n            fill: theme.palette.textSubtle,\n            d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"        ,}\n          )\n        )\n        , defs\n      )\n      , React.createElement('g', { id: WORKSPACE_ID,}\n        , React.createElement('svg', {\n          width: graphWidth,\n          height: graphHeight,\n          y: maxHeight / 2 - graphHeight / 2,\n          x: maxWidth / 2 - graphWidth / 2,\n          viewBox: `0 0 ${graphWidth} ${graphHeight}`,}\n        \n          , graphEdges.map(e => {\n            const edge = graph.current.edge(e) ;\n            if (!edge) return null;\n            return (\n              React.createElement(Edge, {\n                key: `${e.v}-${e.w}`,\n                id: e,\n                setEdge: setEdge,\n                render: renderLabel,\n                edge: edge,}\n              )\n            );\n          })\n          , graphNodes.map((id) => {\n            const node = graph.current.node(id);\n            if (!node) return null;\n            return (\n              React.createElement(Node, {\n                key: id,\n                setNode: setNode,\n                render: renderNode,\n                node: node,}\n              )\n            );\n          })\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useApi, storageApiRef } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/lib/useObservable';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Close from '@material-ui/icons/Close';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0),\n      marginBottom: theme.spacing(0),\n      marginTop: theme.spacing(0),\n      display: 'flex',\n      flexFlow: 'row nowrap',\n    },\n    // showing on top\n    topPosition: {\n      position: 'relative',\n      marginBottom: theme.spacing(6),\n      marginTop: -theme.spacing(3),\n      zIndex: 'unset',\n    },\n    icon: {\n      fontSize: 20,\n    },\n    content: {\n      width: '100%',\n      maxWidth: 'inherit',\n      flexWrap: 'nowrap',\n    },\n    message: {\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.banner.text,\n      '& a': {\n        color: theme.palette.banner.link,\n      },\n    },\n    info: {\n      backgroundColor: theme.palette.banner.info,\n    },\n    error: {\n      backgroundColor: theme.palette.banner.error,\n    },\n    warning: {\n      backgroundColor:\n        theme.palette.banner.warning ?? theme.palette.banner.error,\n    },\n  }),\n  { name: 'BackstageDismissableBanner' },\n);\n\n\n\n\n\n\n\n\n/** @public */\nexport const DismissableBanner = (props) => {\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket('notifications');\n  const rawDismissedBanners =\n    notificationsStore.snapshot('dismissedBanners').value ?? [];\n\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners),\n  );\n\n  const observedItems = useObservable(\n    notificationsStore.observe$('dismissedBanners'),\n  );\n\n  useEffect(() => {\n    if (observedItems?.value) {\n      const currentValue = observedItems?.value ?? [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems?.value]);\n\n  const handleClick = () => {\n    notificationsStore.set('dismissedBanners', [...dismissedBanners, id]);\n  };\n\n  return (\n    React.createElement(Snackbar, {\n      anchorOrigin: \n        fixed\n          ? { vertical: 'bottom', horizontal: 'center' }\n          : { vertical: 'top', horizontal: 'center' }\n      ,\n      open: !dismissedBanners.has(id),\n      classes: {\n        root: classNames(classes.root, !fixed && classes.topPosition),\n      },}\n    \n      , React.createElement(SnackbarContent, {\n        classes: {\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message,\n        },\n        message: message,\n        action: [\n          React.createElement(IconButton, {\n            key: \"dismiss\",\n            title: \"Permanently dismiss this message\"   ,\n            color: \"inherit\",\n            onClick: handleClick,}\n          \n            , React.createElement(Close, { className: classes.icon,} )\n          ),\n        ],}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport missingAnnotation from './assets/missingAnnotation.svg';\nimport noInformation from './assets/noInformation.svg';\nimport createComponent from './assets/createComponent.svg';\nimport noBuild from './assets/noBuild.svg';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    generalImg: {\n      width: '95%',\n      zIndex: 2,\n      position: 'relative',\n      left: '50%',\n      top: '50%',\n      transform: 'translate(-50%, 15%)',\n    },\n  },\n  { name: 'BackstageEmptyStateImage' },\n);\n\n/** @public */\nexport const EmptyStateImage = ({ missing }) => {\n  const classes = useStyles();\n  switch (missing) {\n    case 'field':\n      return (\n        React.createElement('img', {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"  ,}\n        )\n      );\n    case 'info':\n      return (\n        React.createElement('img', {\n          src: noInformation,\n          alt: \"no Information\" ,\n          className: classes.generalImg,}\n        )\n      );\n    case 'content':\n      return (\n        React.createElement('img', {\n          src: createComponent,\n          alt: \"create Component\" ,\n          className: classes.generalImg,}\n        )\n      );\n    case 'data':\n      return (\n        React.createElement('img', { src: noBuild, alt: \"no Build\" , className: classes.generalImg,} )\n      );\n    default:\n      return null;\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { EmptyStateImage } from './EmptyStateImage';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0),\n    },\n    action: {\n      marginTop: theme.spacing(2),\n    },\n    imageContainer: {\n      position: 'relative',\n    },\n  }),\n  { name: 'BackstageEmptyState' },\n);\n\n\n\n\n\n\n\n\n/**\n * Various placeholder views for empty state pages\n *\n * @public\n *\n */\nexport function EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles();\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2,}\n    \n      , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n        , React.createElement(Grid, { container: true, direction: \"column\",}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(Typography, { variant: \"h5\",}, title)\n          )\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(Typography, { variant: \"body1\",}, description)\n          )\n          , React.createElement(Grid, { item: true, xs: true, className: classes.action,}\n            , action\n          )\n        )\n      )\n      , React.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer,}\n        , React.createElement(EmptyStateImage, { missing: missing,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Link } from '../Link';\nimport { EmptyState } from './EmptyState';\nimport { CodeSnippet } from '../CodeSnippet';\n\nconst COMPONENT_YAML = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background: theme.palette.type === 'dark' ? '#444' : '#fff',\n    },\n  }),\n  { name: 'BackstageMissingAnnotationEmptyState' },\n);\n\nexport function MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const url =\n    readMoreUrl ||\n    'https://backstage.io/docs/features/software-catalog/well-known-annotations';\n  const classes = useStyles();\n  const description = (\n    React.createElement(React.Fragment, null, \"The \"\n       , React.createElement('code', null, annotation), \" annotation is missing. You need to add the annotation to your component if you want to enable this tool.\"\n\n    )\n  );\n  return (\n    React.createElement(EmptyState, {\n      missing: \"field\",\n      title: \"Missing Annotation\" ,\n      description: description,\n      action: \n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, { variant: \"body1\",}, \"Add the annotation to your component YAML as shown in the highlighted example below:\"\n\n\n          )\n          , React.createElement('div', { className: classes.code,}\n            , React.createElement(CodeSnippet, {\n              text: COMPONENT_YAML.replace('ANNOTATION', annotation),\n              language: \"yaml\",\n              showLineNumbers: true,\n              highlightedNumbers: [6, 7],\n              customStyle: { background: 'inherit', fontSize: '115%' },}\n            )\n          )\n          , React.createElement(Button, { color: \"primary\", component: Link, to: url,}, \"Read more\"\n\n          )\n        )\n      ,}\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles, darken, lighten } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\n\nconst getWarningTextColor = (\n  severity,\n  theme,\n) => {\n  const getColor = theme.palette.type === 'light' ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\n\nconst getWarningBackgroundColor = (\n  severity,\n  theme,\n) => {\n  const getBackgroundColor = theme.palette.type === 'light' ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\n\nconst useErrorOutlineStyles = makeStyles(theme => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) =>\n      getWarningTextColor(\n        severity ,\n        theme,\n      ),\n  },\n}));\n\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return React.createElement(ErrorOutline, { classes: classes,} );\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return React.createElement(ExpandMoreIcon, { classes: classes,} );\n};\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    panel: {\n      backgroundColor: ({ severity }) =>\n        getWarningBackgroundColor(\n          severity ,\n          theme,\n        ),\n      color: ({ severity }) =>\n        getWarningTextColor(\n          severity ,\n          theme,\n        ),\n      verticalAlign: 'middle',\n    },\n    summary: {\n      display: 'flex',\n      flexDirection: 'row',\n    },\n    summaryText: {\n      color: ({ severity }) =>\n        getWarningTextColor(\n          severity ,\n          theme,\n        ),\n      fontWeight: 'bold',\n    },\n    message: {\n      width: '100%',\n      display: 'block',\n      color: ({ severity }) =>\n        getWarningTextColor(\n          severity ,\n          theme,\n        ),\n      backgroundColor: ({ severity }) =>\n        getWarningBackgroundColor(\n          severity ,\n          theme,\n        ),\n    },\n    details: {\n      width: '100%',\n      display: 'block',\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2.0),\n      fontFamily: 'sans-serif',\n    },\n  }),\n  { name: 'BackstageWarningPanel' },\n);\n\n\n\n\n\n\n\n\n\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase('en-US') + s.slice(1);\n};\n\n/**\n * WarningPanel. Show a user friendly error message to a user similar to\n * ErrorPanel except that the warning panel only shows the warning message to\n * the user.\n *\n * @param severity - Ability to change the severity of the alert. Default value\n *        \"warning\"\n * @param title - A title for the warning. If not supplied, \"Warning\" will be\n *        used.\n * @param message - Optional more detailed user-friendly message elaborating on\n *        the cause of the error.\n * @param children - Objects to provide context, such as a stack trace or detailed\n *        error reporting. Will be available inside an unfolded accordion.\n */\nexport function WarningPanel(props) {\n  const {\n    severity = 'warning',\n    title,\n    message,\n    children,\n    defaultExpanded,\n  } = props;\n  const classes = useStyles({ severity });\n\n  // If no severity or title provided, the heading will read simply \"Warning\"\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : '');\n\n  return (\n    React.createElement(Accordion, {\n      defaultExpanded: defaultExpanded ?? false,\n      className: classes.panel,\n      role: \"alert\",}\n    \n      , React.createElement(AccordionSummary, {\n        expandIcon: React.createElement(ExpandMoreIconStyled, { severity: severity,} ),\n        className: classes.summary,}\n      \n        , React.createElement(ErrorOutlineStyled, { severity: severity,} )\n        , React.createElement(Typography, { className: classes.summaryText, variant: \"subtitle1\",}\n          , subTitle\n        )\n      )\n      , (message || children) && (\n        React.createElement(AccordionDetails, null\n          , React.createElement(Grid, { container: true,}\n            , message && (\n              React.createElement(Grid, { item: true, xs: 12,}\n                , React.createElement(Typography, { className: classes.message, variant: \"body1\",}\n                  , message\n                )\n              )\n            )\n            , children && (\n              React.createElement(Grid, { item: true, xs: 12, className: classes.details,}\n                , children\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React, { } from 'react';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { WarningPanel } from '../WarningPanel';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageErrorPanel' },\n);\n\n\n\n\n\n\n\n\n\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(List, { dense: true,}\n      , React.createElement(ListItem, { alignItems: \"flex-start\",}\n        , React.createElement(ListItemText, {\n          classes: { secondary: classes.text },\n          primary: \"Error\",\n          secondary: error,}\n        )\n        , React.createElement(CopyTextButton, { text: error,} )\n      )\n\n      , React.createElement(ListItem, { alignItems: \"flex-start\",}\n        , React.createElement(ListItemText, {\n          classes: { secondary: classes.text },\n          primary: \"Message\",\n          secondary: message,}\n        )\n        , React.createElement(CopyTextButton, { text: message,} )\n      )\n\n      , stack && (\n        React.createElement(ListItem, { alignItems: \"flex-start\",}\n          , React.createElement(ListItemText, {\n            classes: { secondary: classes.text },\n            primary: \"Stack Trace\" ,\n            secondary: stack,}\n          )\n          , React.createElement(CopyTextButton, { text: stack,} )\n        )\n      )\n\n      , children\n    )\n  );\n};\n\n/** @public */\n\n\n\n\n\n\n/**\n * Renders a warning panel as the effect of an error.\n *\n * @public\n */\nexport function ErrorPanel(props) {\n  const { title, error, defaultExpanded, children } = props;\n  return (\n    React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: title ?? error.message,\n      defaultExpanded: defaultExpanded,}\n    \n      , React.createElement(ErrorList, {\n        error: error.name,\n        message: error.message,\n        stack: error.stack,\n        children: children,}\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React from 'react';\nimport { CodeSnippet } from '../CodeSnippet';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { ErrorPanel, } from '../ErrorPanel';\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageResponseErrorPanel' },\n);\n\n/**\n * Renders a warning panel as the effect of a failed server request.\n *\n * Has special treatment for ResponseError errors, to display rich\n * server-provided information about what happened.\n */\nexport function ResponseErrorPanel(props) {\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles();\n\n  if (error.name !== 'ResponseError') {\n    return (\n      React.createElement(ErrorPanel, {\n        title: title ?? error.message,\n        defaultExpanded: defaultExpanded,\n        error: error,}\n      )\n    );\n  }\n\n  const { body, cause } = error ;\n  const { request, response } = body;\n\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, '\\n');\n  const stackString = cause.stack?.replace(/\\\\n/g, '\\n');\n  const jsonString = JSON.stringify(body, undefined, 2);\n\n  return (\n    React.createElement(ErrorPanel, {\n      title: title ?? error.message,\n      defaultExpanded: defaultExpanded,\n      error: { name: errorString, message: messageString, stack: stackString },}\n    \n      , requestString && (\n        React.createElement(ListItem, { alignItems: \"flex-start\",}\n          , React.createElement(ListItemText, {\n            classes: { secondary: classes.text },\n            primary: \"Request\",\n            secondary: request ? `${requestString}` : undefined,}\n          )\n          , React.createElement(CopyTextButton, { text: requestString,} )\n        )\n      )\n      , React.createElement(React.Fragment, null\n        , React.createElement(Divider, { component: \"li\", className: classes.divider,} )\n        , React.createElement(ListItem, { alignItems: \"flex-start\",}\n          , React.createElement(ListItemText, {\n            classes: { secondary: classes.text },\n            primary: \"Full Error as JSON\"   ,}\n          )\n        )\n        , React.createElement(CodeSnippet, { language: \"json\", text: jsonString, showCopyCodeButton: true,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef, useEffect } from 'react';\n\n/**\n * Creates DOM element to be used as React root.\n */\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n */\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling,\n  );\n}\n\n/**\n * Hook to create a React Portal.\n *\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n *\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n *\n * @param id - The id of the target container, e.g 'modal' or 'spotlight'\n * @returns The DOM node to use as the Portal target.\n */\nexport function usePortal(id) {\n  const rootElemRef = useRef(null);\n\n  useEffect(\n    function setupElement() {\n      // Look for existing target dom element to append to\n      const existingParent = document.querySelector(`#${id}`);\n      // Parent is either a new root or the existing dom element\n      const parentElem = existingParent || createRootElement(id);\n\n      // If there is no existing DOM element, add a new one.\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n\n      // Add the detached element to the parent\n      parentElem.appendChild(rootElemRef.current);\n\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id],\n  );\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useState } from 'react';\n\nconst STATES_LOCAL_STORAGE_KEY = 'core.calloutSeen';\n\nfunction useCalloutStates()\n\n\n {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n\n  return { states, setState };\n}\n\nfunction useCalloutHasBeenSeen(featureId)\n\n\n {\n  const { states, setState } = useCalloutStates();\n\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n\n  return { seen: states[featureId] === true, markSeen };\n}\n\nexport function useShowCallout(featureId)\n\n\n {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, {\n\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport { usePortal } from './lib/usePortal';\nimport { useShowCallout } from './lib/useShowCallout';\n\n/** @public */\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    '@keyframes pulsateSlightly': {\n      '0%': { transform: 'scale(1.0)' },\n      '100%': { transform: 'scale(1.1)' },\n    },\n    '@keyframes pulsateAndFade': {\n      '0%': { transform: 'scale(1.0)', opacity: 0.9 },\n      '100%': { transform: 'scale(1.5)', opacity: 0 },\n    },\n    featureWrapper: {\n      position: 'relative',\n    },\n    backdrop: {\n      zIndex: 2000,\n      position: 'fixed',\n      overflow: 'hidden',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n    },\n    dot: {\n      position: 'absolute',\n      backgroundColor: 'transparent',\n      borderRadius: '100%',\n      border: '1px solid rgba(103, 146, 180, 0.98)',\n      boxShadow: '0px 0px 0px 20000px rgba(0, 0, 0, 0.5)',\n      zIndex: 2001,\n      transformOrigin: 'center center',\n      animation:\n        '$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite',\n    },\n    pulseCircle: {\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'transparent',\n      borderRadius: '100%',\n      border: '2px solid white',\n      zIndex: 2001,\n      transformOrigin: 'center center',\n      animation:\n        '$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite',\n    },\n    text: {\n      position: 'absolute',\n      color: 'white',\n      zIndex: 2003,\n    },\n  },\n  { name: 'BackstageFeatureCalloutCircular' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * One-time, round 'telescope' animation showing new feature.\n *\n * @public\n *\n */\nexport function FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal('core.callout');\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles();\n\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n\n      const borderWidth = 800;\n      const dotLeft =\n        wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth,\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('resize', update);\n    window.addEventListener('scroll', update);\n    return () => {\n      window.removeEventListener('resize', update);\n      window.removeEventListener('scroll', update);\n    };\n  }, [update]);\n\n  useLayoutEffect(update, [wrapperRef.current, update]);\n\n  if (!show) {\n    return React.createElement(React.Fragment, null, children);\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { className: classes.featureWrapper, ref: wrapperRef,}\n        , children\n      )\n      , createPortal(\n        React.createElement('div', { className: classes.backdrop,}\n          , React.createElement(ClickAwayListener, { onClickAway: hide,}\n            , React.createElement(React.Fragment, null\n              , React.createElement('div', {\n                className: classes.dot,\n                'data-testid': \"dot\",\n                style: {\n                  left: placement?.dotLeft,\n                  top: placement?.dotTop,\n                  width: placement?.dotSize,\n                  height: placement?.dotSize,\n                  borderWidth: placement?.borderWidth,\n                },\n                onClick: hide,\n                onKeyDown: hide,\n                role: \"button\",\n                tabIndex: 0,}\n              \n                , React.createElement('div', { className: classes.pulseCircle,} )\n              )\n              , React.createElement('div', {\n                className: classes.text,\n                'data-testid': \"text\",\n                style: {\n                  left: placement?.textLeft,\n                  top: placement?.textTop,\n                  width: placement?.textWidth,\n                },}\n              \n                , React.createElement(Typography, { variant: \"h2\", paragraph: true,}\n                  , title\n                )\n                , React.createElement(Typography, null, description)\n              )\n            )\n          )\n        ),\n        portalElement,\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport classnames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Link';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { Link as RouterLink } from '../Link';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useIconStyles = makeStyles(\n  theme => ({\n    link: {\n      display: 'grid',\n      justifyItems: 'center',\n      gridGap: 4,\n      textAlign: 'center',\n    },\n    disabled: {\n      color: 'gray',\n      cursor: 'default',\n    },\n    primary: {\n      color: theme.palette.primary.main,\n    },\n    secondary: {\n      color: theme.palette.secondary.main,\n    },\n    label: {\n      fontSize: '0.7rem',\n      textTransform: 'uppercase',\n      fontWeight: 600,\n      letterSpacing: 1.2,\n    },\n  }),\n  { name: 'BackstageIconLinkVertical' },\n);\n\n/** @public */\nexport function IconLinkVertical({\n  color = 'primary',\n  disabled = false,\n  href = '#',\n  icon = React.createElement(LinkIcon, null ),\n  label,\n  onClick,\n  title,\n}) {\n  const classes = useIconStyles();\n\n  if (disabled) {\n    return (\n      React.createElement(Link, {\n        title: title,\n        className: classnames(classes.link, classes.disabled),\n        underline: \"none\",}\n      \n        , icon\n        , React.createElement('span', { className: classes.label,}, label)\n      )\n    );\n  }\n\n  return (\n    React.createElement(Link, {\n      title: title,\n      className: classnames(classes.link, classes[color]),\n      to: href,\n      component: RouterLink,\n      onClick: onClick,}\n    \n      , icon\n      , React.createElement('span', { className: classes.label,}, label)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { IconLinkVertical, } from './IconLinkVertical';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: 'grid',\n      gridAutoFlow: 'column',\n      gridAutoColumns: 'min-content',\n      gridGap: theme.spacing(3),\n    },\n  }),\n  { name: 'BackstageHeaderIconLinkRow' },\n);\n\n\n\n\n\n/**\n * HTML nav tag with links mapped inside\n *\n * @public\n *\n */\nexport function HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles();\n  return (\n    React.createElement('nav', { className: classes.links,}\n      , links.map((link, index) => (\n        React.createElement(IconLinkVertical, { key: index + 1, ...link,} )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles, } from '@material-ui/core/styles';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport classNames from 'classnames';\nimport React, { } from 'react';\n\nconst generateGradientStops = (themeType) => {\n  // 97% corresponds to the theme.palette.background.default for the light theme\n  // 16% for the dark theme\n  const luminance = themeType === 'dark' ? '16%' : '97%';\n  // Generated with https://larsenwork.com/easing-gradients/\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\n\nconst fadeSize = 100;\nconst fadePadding = 10;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      position: 'relative',\n      display: 'flex',\n      flexFlow: 'row nowrap',\n      alignItems: 'center',\n    },\n    container: {\n      overflow: 'auto',\n      scrollbarWidth: 0 , // hide in FF\n      '&::-webkit-scrollbar': {\n        display: 'none', // hide in Chrome\n      },\n    },\n    fade: {\n      position: 'absolute',\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: 'opacity 300ms',\n      pointerEvents: 'none',\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type,\n      )})`,\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type,\n      )})`,\n    },\n    fadeHidden: {\n      opacity: 0,\n    },\n    button: {\n      position: 'absolute',\n    },\n    buttonLeft: {\n      left: -theme.spacing(2),\n    },\n    buttonRight: {\n      right: -theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageHorizontalScrollGrid' },\n);\n\n// Returns scroll distance from left and right\nfunction useScrollDistance(\n  ref,\n) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState\n\n([0, 0]);\n\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n\n    handleUpdate();\n\n    el.addEventListener('scroll', handleUpdate);\n    window.addEventListener('resize', handleUpdate);\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => {\n      el.removeEventListener('scroll', handleUpdate);\n      window.removeEventListener('resize', handleUpdate);\n    };\n  }, [ref]);\n\n  return [scrollLeft, scrollRight];\n}\n\n// Used to animate scrolling. Returns a single setScrollTarger function, when called with e.g. 200,\n// the element pointer to by the ref will be scrolled 200px forwards over time.\nfunction useSmoothScroll(\n  ref,\n  speed,\n  minDistance,\n) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n\n    const startTime = performance.now();\n    const id = requestAnimationFrame(frameTime => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = (Math.abs(scrollTarget) * frameDuration) / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n\n      ref.current.scrollBy({ left: scrollAmount });\n\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n\n  return setScrollTarget;\n}\n\n/**\n * Horizontal scrollable component with arrows to navigate\n *\n * @public\n *\n */\nexport function HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles(props);\n  const ref = React.useRef();\n\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n\n  return (\n    React.createElement('div', { ...otherProps, className: classes.root,}\n      , React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        wrap: \"nowrap\",\n        className: classes.container,\n        ref: ref ,}\n      \n        , children\n      )\n      , React.createElement('div', {\n        className: classNames(classes.fade, classes.fadeLeft, {\n          [classes.fadeHidden]: scrollLeft === 0,\n        }),}\n      )\n      , React.createElement('div', {\n        className: classNames(classes.fade, classes.fadeRight, {\n          [classes.fadeHidden]: scrollRight === 0,\n        }),}\n      )\n      , scrollLeft > 0 && (\n        React.createElement(IconButton, {\n          title: \"Scroll Left\" ,\n          onClick: () => handleScrollClick(false),\n          className: classNames(classes.button, classes.buttonLeft, {}),}\n        \n          , React.createElement(ChevronLeftIcon, null )\n        )\n      )\n      , scrollRight > 0 && (\n        React.createElement(IconButton, {\n          title: \"Scroll Right\" ,\n          onClick: () => handleScrollClick(true),\n          className: classNames(classes.button, classes.buttonRight, {}),}\n        \n          , React.createElement(ChevronRightIcon, null )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    alpha: {\n      color: '#ffffff',\n      fontFamily: 'serif',\n      fontWeight: 'normal',\n      fontStyle: 'italic',\n    },\n    beta: {\n      color: '#4d65cc',\n      fontFamily: 'serif',\n      fontWeight: 'normal',\n      fontStyle: 'italic',\n    },\n  },\n  { name: 'BackstageLifecycle' },\n);\n\nexport function Lifecycle(props) {\n  const classes = useStyles(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? (\n    React.createElement('span', {\n      className: classes[alpha ? 'alpha' : 'beta'],\n      style: { fontSize: '120%' },}\n    \n      , alpha ? React.createElement(React.Fragment, null, \"\") : React.createElement(React.Fragment, null, \"\")\n    )\n  ) : (\n    React.createElement('span', { className: classes[alpha ? 'alpha' : 'beta'],}\n      , alpha ? 'Alpha' : 'Beta'\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { lazy, Suspense } from 'react';\nimport { useApp } from '@backstage/core-plugin-api';\n\nconst RealLogViewer = lazy(() =>\n  import('./RealLogViewer').then(m => ({ default: m.RealLogViewer })),\n);\n\n/**\n * The properties for the LogViewer component.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A component that displays logs in a scrollable text area.\n *\n * The LogViewer has support for search and filtering, as well as displaying\n * text content with ANSI color escape codes.\n *\n * Since the LogViewer uses windowing to avoid rendering all contents at once, the\n * log is sized automatically to fill the available vertical space. This means\n * it may often be needed to wrap the LogViewer in a container that provides it\n * with a fixed amount of space.\n *\n * @public\n */\nexport function LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return (\n    React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n      , React.createElement(RealLogViewer, { ...props,} )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport ReactMarkdown, { } from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport React from 'react';\n\nimport { CodeSnippet } from '../CodeSnippet';\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    markdown: {\n      '& table': {\n        borderCollapse: 'collapse',\n        border: `1px solid ${theme.palette.border}`,\n      },\n      '& th, & td': {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1),\n      },\n      '& td': {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        verticalAlign: 'middle',\n        lineHeight: '1',\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0,\n      },\n      '& th': {\n        backgroundColor: theme.palette.background.paper,\n      },\n      '& tr': {\n        backgroundColor: theme.palette.background.paper,\n      },\n      '& tr:nth-child(odd)': {\n        backgroundColor: theme.palette.background.default,\n      },\n\n      '& a': {\n        color: theme.palette.link,\n      },\n      '& img': {\n        maxWidth: '100%',\n      },\n    },\n  }),\n  { name: 'BackstageMarkdownContent' },\n);\n\n\n\n\n\n\n\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, '');\n    const match = /language-(\\w+)/.exec(className || '');\n    return !inline && match ? (\n      React.createElement(CodeSnippet, { language: match[1], text: text,} )\n    ) : (\n      React.createElement('code', { className: className, ...props,}\n        , children\n      )\n    );\n  },\n};\n\n/**\n * MarkdownContent\n * --\n * Renders markdown with the default dialect [gfm - GitHub flavored Markdown](https://github.github.com/gfm/) to backstage theme styled HTML.\n * If you just want to render to plain [CommonMark](https://commonmark.org/), set the dialect to `'common-mark'`\n */\nexport function MarkdownContent(props) {\n  const { content, dialect = 'gfm', linkTarget } = props;\n  const classes = useStyles();\n  return (\n    React.createElement(ReactMarkdown, {\n      remarkPlugins: dialect === 'gfm' ? [gfm] : [],\n      className: classes.markdown,\n      children: content,\n      components: components,\n      linkTarget: linkTarget,}\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport React, { useState } from 'react';\nimport { isError } from '@backstage/errors';\n\n\n\n\nconst useItemStyles = makeStyles(\n  theme => ({\n    root: {\n      paddingLeft: theme.spacing(3),\n    },\n  }),\n  { name: 'BackstageLoginRequestListItem' },\n);\n\n\n\n\n\n\n\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : 'An unspecified error occurred');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const IconComponent = request.provider.icon;\n\n  return (\n    React.createElement(ListItem, { disabled: busy, classes: { root: classes.root },}\n      , React.createElement(ListItemAvatar, null\n        , React.createElement(IconComponent, { fontSize: \"large\",} )\n      )\n      , React.createElement(ListItemText, {\n        primary: request.provider.title,\n        secondary: error && React.createElement(Typography, { color: \"error\",}, error),}\n      )\n      , React.createElement(Button, { color: \"primary\", variant: \"contained\", onClick: handleContinue,}, \"Log in\"\n\n      )\n    )\n  );\n};\n\nexport default LoginRequestListItem;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport Button from '@material-ui/core/Button';\nimport React, { useMemo, useState } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\nimport LoginRequestListItem from './LoginRequestListItem';\nimport { useApi, oauthRequestApiRef } from '@backstage/core-plugin-api';\nimport Typography from '@material-ui/core/Typography';\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    dialog: {\n      paddingTop: theme.spacing(1),\n    },\n    title: {\n      minWidth: 0,\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize,\n    },\n    contentList: {\n      padding: 0,\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0),\n    },\n  }),\n  { name: 'OAuthRequestDialog' },\n);\n\nexport function OAuthRequestDialog(_props) {\n  const classes = useStyles();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    [],\n  );\n\n  const handleRejectAll = () => {\n    requests.forEach(request => request.reject());\n  };\n\n  return (\n    React.createElement(Dialog, {\n      open: Boolean(requests.length),\n      fullWidth: true,\n      maxWidth: \"xs\",\n      classes: { paper: classes.dialog },\n      'aria-labelledby': \"oauth-req-dialog-title\",}\n    \n      , React.createElement('main', null\n        , React.createElement(DialogTitle, {\n          classes: { root: classes.title },\n          id: \"oauth-req-dialog-title\",}\n        \n          , React.createElement(Typography, { className: classes.titleHeading, variant: \"h1\",}, \"Login Required\"\n\n          )\n        )\n\n        , React.createElement(DialogContent, { dividers: true, classes: { root: classes.contentList },}\n          , React.createElement(List, null\n            , requests.map(request => (\n              React.createElement(LoginRequestListItem, {\n                key: request.provider.title,\n                request: request,\n                busy: busy,\n                setBusy: setBusy,}\n              )\n            ))\n          )\n        )\n      )\n\n      , React.createElement(DialogActions, { classes: { root: classes.actionButtons },}\n        , React.createElement(Button, { onClick: handleRejectAll,}, \"Reject All\" )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip, { } from '@material-ui/core/Tooltip';\nimport React, { useState } from 'react';\nimport TextTruncate, { } from 'react-text-truncate';\nimport { useIsMounted } from '@react-hookz/web';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      overflow: 'visible !important',\n    },\n  },\n  { name: 'BackstageOverflowTooltip' },\n);\n\nexport function OverflowTooltip(props) {\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles();\n\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n\n  return (\n    React.createElement(Tooltip, {\n      title: props.title ?? (props.text || ''),\n      placement: props.placement,\n      disableHoverListener: !hover,}\n    \n      , React.createElement(TextTruncate, {\n        text: props.text,\n        line: props.line,\n        onToggled: handleToggled,\n        containerClassName: classes.container,}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect, } from 'react';\nimport LinearProgress, {\n\n} from '@material-ui/core/LinearProgress';\n\nexport function Progress(props) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const handle = setTimeout(() => setIsVisible(true), 250);\n    return () => clearTimeout(handle);\n  }, []);\n\n  return isVisible ? (\n    React.createElement(LinearProgress, { ...props, 'data-testid': \"progress\",} )\n  ) : (\n    React.createElement('div', { style: { display: 'none' },} )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport { Link } from '../../components/Link';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      maxWidth: 'fit-content',\n      padding: theme.spacing(2, 2, 2, 2.5),\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle,\n    },\n    arrow: {\n      color: theme.palette.textSubtle,\n    },\n  }),\n  { name: 'BackstageBottomLink' },\n);\n\n/** @public */\n\n\n\n\n\n\n/**\n * Footer with link used in  {@link InfoCard } and {@link TabbedCard}\n *\n * @public\n *\n */\nexport function BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', null\n      , React.createElement(Divider, null )\n      , React.createElement(Link, { to: link, onClick: onClick, underline: \"none\",}\n        , React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root,}\n          , React.createElement(Box, { className: classes.boxTitle, fontWeight: \"fontWeightBold\", m: 1,}\n            , React.createElement(Typography, null\n              , React.createElement('strong', null, title)\n            )\n          )\n          , React.createElement(ArrowIcon, { className: classes.arrow,} )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Component, } from 'react';\nimport { Button } from '../../components/Button';\nimport { ErrorPanel } from '../../components/ErrorPanel';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === 'string') {\n    return React.createElement(React.Fragment, null, \"Please contact \"  , slackChannel, \" for help.\"  );\n  } else if (!slackChannel.href) {\n    return React.createElement(React.Fragment, null, \"Please contact \"  , slackChannel.name, \" for help.\"  );\n  }\n\n  return (\n    React.createElement(Button, { to: slackChannel.href, variant: \"contained\",}\n      , slackChannel.name\n    )\n  );\n};\n\n/** @public */\nexport const ErrorBoundary\n\n\n = class ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: undefined,\n      errorInfo: undefined,\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // eslint-disable-next-line no-console\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n\n    if (!error) {\n      return children;\n    }\n\n    return (\n      React.createElement(ErrorPanel, { title: \"Something Went Wrong\"  , error: error,}\n        , React.createElement(SlackLink, { slackChannel: slackChannel,} )\n      )\n    );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader, { } from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { } from 'react';\nimport { BottomLink, } from '../BottomLink';\nimport { ErrorBoundary, } from '../ErrorBoundary';\n\n/** @public */\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    noPadding: {\n      padding: 0,\n      '&:last-child': {\n        paddingBottom: 0,\n      },\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5),\n    },\n    headerTitle: {\n      fontWeight: 700,\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1),\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: 'flex',\n    },\n  }),\n  { name: 'BackstageInfoCard' },\n);\n\n/** @public */\n\n\nconst CardActionsTopRight = withStyles(\n  theme => ({\n    root: {\n      display: 'inline-block',\n      padding: theme.spacing(8, 8, 0, 0),\n      float: 'right',\n    },\n  }),\n  { name: 'BackstageInfoCardCardActionsTopRight' },\n)(CardActions);\n\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    fullHeight: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n    },\n    gridItem: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100% - 10px)', // for pages without content header\n      marginBottom: '10px',\n    },\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1,\n    },\n    gridItem: {\n      flex: 1,\n    },\n  },\n};\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Material-ui card with header , content and actions footer\n *\n * @public\n *\n */\nexport function InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps,\n  } = props;\n  const classes = useStyles();\n  /**\n   * If variant is specified, we build up styles for that particular variant for both\n   * the Card and the CardContent (since these need to be synced)\n   */\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach(name => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name ],\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[\n          name \n        ],\n      };\n    });\n  }\n\n  const cardSubTitle = () => {\n    return (\n      React.createElement('div', { className: classes.headerSubheader,}\n        , subheader && React.createElement('div', { className: classes.subheader,}, subheader)\n        , icon\n      )\n    );\n  };\n\n  const errProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    React.createElement(Card, { style: calculatedStyle, className: className,}\n      , React.createElement(ErrorBoundary, { ...errProps,}\n        , title && (\n          React.createElement(CardHeader, {\n            classes: {\n              root: classes.header,\n              title: classes.headerTitle,\n              subheader: classes.headerSubheader,\n              avatar: classes.headerAvatar,\n              action: classes.headerAction,\n              content: classes.headerContent,\n            },\n            title: title,\n            subheader: cardSubTitle(),\n            action: action,\n            style: { ...headerStyle },\n            titleTypographyProps: titleTypographyProps,\n            ...headerProps,}\n          )\n        )\n        , actionsTopRight && (\n          React.createElement(CardActionsTopRight, null, actionsTopRight)\n        )\n        , divider && React.createElement(Divider, null )\n        , React.createElement(CardContent, {\n          className: classNames(cardClassName, {\n            [classes.noPadding]: noPadding,\n          }),\n          style: calculatedCardStyle,}\n        \n          , children\n        )\n        , actions && (\n          React.createElement(CardActions, { className: actionsClassName,}, actions)\n        )\n        , deepLink && React.createElement(BottomLink, { ...deepLink,} )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Circle } from 'rc-progress';\nimport React, { useEffect, useState } from 'react';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      position: 'relative',\n      lineHeight: 0,\n    },\n    overlay: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -60%)',\n      fontSize: 45,\n      fontWeight: 'bold',\n      color: theme.palette.textContrast,\n    },\n    description: {\n      fontSize: '100%',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n      position: 'absolute',\n      wordBreak: 'break-all',\n      display: 'inline-block',\n    },\n    circle: {\n      width: '80%',\n      transform: 'translate(10%, 0)',\n    },\n    colorUnknown: {},\n  }),\n  { name: 'BackstageGauge' },\n);\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: '%',\n  max: 100,\n};\n\nexport const getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max,\n}) => {\n  if (isNaN(value)) {\n    return '#ddd';\n  }\n\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n\n  return palette.status.ok;\n};\n\n/**\n * Circular Progress Bar\n *\n * @public\n *\n */\n\nexport function Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props,\n  };\n\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n\n  const [isHovering, setIsHovering] = useState(false);\n\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener('mouseenter', handleMouseOver);\n      node.addEventListener('mouseleave', handleMouseOut);\n\n      return () => {\n        node.removeEventListener('mouseenter', handleMouseOver);\n        node.removeEventListener('mouseleave', handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n\n  return (\n    React.createElement('div', { ref: setHoverRef, className: classes.root,}\n      , React.createElement(Circle, {\n        strokeLinecap: \"butt\",\n        percent: asPercentage,\n        strokeWidth: 12,\n        trailWidth: 12,\n        strokeColor: getColor({ palette, value: asActual, inverse, max }),\n        className: classes.circle,}\n      )\n      , description && isHovering ? (\n        React.createElement('div', { className: classes.description,}, description)\n      ) : (\n        React.createElement('div', { className: classes.overlay,}\n          , isNaN(value) ? 'N/A' : `${asActual}${unit}`\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { } from 'react';\n\nimport { InfoCard, } from '../../layout/InfoCard';\nimport { Gauge, } from './Gauge';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    root: {\n      height: '100%',\n      width: 250,\n    },\n  },\n  { name: 'BackstageGaugeCard' },\n);\n\n/**\n * {@link Gauge} with header, subheader and footer\n *\n * @public\n *\n */\nexport function GaugeCard(props) {\n  const classes = useStyles(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor,\n  } = props;\n\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress,\n  };\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(InfoCard, {\n        title: title,\n        subheader: subheader,\n        deepLink: deepLink,\n        variant: variant,\n        icon: icon,}\n      \n        , React.createElement(Gauge, { ...gaugeProps,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Line } from 'rc-progress';\n\nimport { getProgressColor, } from './Gauge';\n\n\n\n\n\n\n\n\n\nexport function LinearGauge(props) {\n  const { value, getColor = getProgressColor } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100,\n  });\n  return (\n    React.createElement(Tooltip, { title: `${percent}%`,}\n      , React.createElement('span', null\n        , React.createElement(Line, {\n          percent: percent,\n          strokeWidth: 4,\n          trailWidth: 4,\n          strokeColor: strokeColor,}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  () =>\n    createStyles({\n      icon: {\n        position: 'absolute',\n        right: '4px',\n        pointerEvents: 'none',\n      },\n    }),\n  { name: 'BackstageClosedDropdown' },\n);\n\nconst ClosedDropdown = () => {\n  const classes = useStyles();\n  return (\n    React.createElement(SvgIcon, {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",}\n    \n      , React.createElement('path', {\n        d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\"       ,\n        fill: \"#616161\",}\n      )\n    )\n  );\n};\n\nexport default ClosedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n\n\nconst useStyles = makeStyles(\n  () =>\n    createStyles({\n      icon: {\n        position: 'absolute',\n        right: '4px',\n        pointerEvents: 'none',\n      },\n    }),\n  { name: 'BackstageOpenedDropdown' },\n);\n\nconst OpenedDropdown = () => {\n  const classes = useStyles();\n  return (\n    React.createElement(SvgIcon, {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",}\n    \n      , React.createElement('path', {\n        d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\"       ,\n        fill: \"#616161\",}\n      )\n    )\n  );\n};\n\nexport default OpenedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport {\n  createStyles,\n  makeStyles,\n\n  withStyles,\n} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useEffect, useState } from 'react';\nimport ClosedDropdown from './static/ClosedDropdown';\nimport OpenedDropdown from './static/OpenedDropdown';\n\n/** @public */\n\n\nconst BootstrapInput = withStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        'label + &': {\n          marginTop: theme.spacing(3),\n        },\n      },\n      input: {\n        borderRadius: 4,\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        border: '1px solid #ced4da',\n        fontSize: 16,\n        padding: '10px 26px 10px 12px',\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\n        fontFamily: 'Helvetica Neue',\n        '&:focus': {\n          background: theme.palette.background.paper,\n          borderRadius: 4,\n        },\n      },\n    }),\n  { name: 'BackstageSelectInputBase' },\n)(InputBase);\n\n/** @public */\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      formControl: {\n        margin: `${theme.spacing(1)} 0px`,\n        maxWidth: 300,\n      },\n      label: {\n        transform: 'initial',\n        fontWeight: 'bold',\n        fontSize: 14,\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        '&.Mui-focused': {\n          color: theme.palette.text.primary,\n        },\n      },\n      formLabel: {\n        transform: 'initial',\n        fontWeight: 'bold',\n        fontSize: 14,\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        '&.Mui-focused': {\n          color: theme.palette.text.primary,\n        },\n      },\n      chips: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      chip: {\n        margin: 2,\n      },\n      checkbox: {},\n\n      root: {\n        display: 'flex',\n        flexDirection: 'column',\n      },\n    }),\n  { name: 'BackstageSelect' },\n);\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport function SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n  } = props;\n  const classes = useStyles();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : ''),\n  );\n  const [isOpen, setOpen] = useState(false);\n\n  useEffect(() => {\n    setValue(multiple ? [] : '');\n  }, [triggerReset, multiple]);\n\n  useEffect(() => {\n    if (selected !== undefined) {\n      setValue(selected);\n    }\n  }, [selected]);\n\n  const handleChange = (event) => {\n    setValue(event.target.value );\n    onChange(event.target.value );\n  };\n\n  const handleClick = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen(previous => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  const handleDelete = (selectedValue) => () => {\n    const newValue = (value ).filter(chip => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(ClickAwayListener, { onClickAway: handleClickAway,}\n        , React.createElement(FormControl, { className: classes.formControl,}\n          , React.createElement(InputLabel, { className: classes.formLabel,}, label)\n          , React.createElement(Select, {\n            'aria-label': label,\n            value: value,\n            native: native,\n            disabled: disabled,\n            'data-testid': \"select\",\n            displayEmpty: true,\n            multiple: multiple,\n            onChange: handleChange,\n            onClick: handleClick,\n            open: isOpen,\n            input: React.createElement(BootstrapInput, null ),\n            label: label,\n            tabIndex: 0,\n            renderValue: s =>\n              multiple && (value ).length !== 0 ? (\n                React.createElement('div', { className: classes.chips,}\n                  , (s ).map(selectedValue => (\n                    React.createElement(Chip, {\n                      key: items.find(el => el.value === selectedValue)?.value,\n                      label: \n                        items.find(el => el.value === selectedValue)?.label\n                      ,\n                      clickable: true,\n                      onDelete: handleDelete(selectedValue),\n                      className: classes.chip,}\n                    )\n                  ))\n                )\n              ) : (\n                React.createElement(Typography, null\n                  , (value ).length === 0\n                    ? placeholder || ''\n                    : items.find(el => el.value === s)?.label\n                )\n              )\n            ,\n            IconComponent: () =>\n              !isOpen ? React.createElement(ClosedDropdown, null ) : React.createElement(OpenedDropdown, null )\n            ,\n            MenuProps: {\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left',\n              },\n              transformOrigin: {\n                vertical: 'top',\n                horizontal: 'left',\n              },\n              getContentAnchorEl: null,\n            },}\n          \n            , placeholder && !multiple && (\n              React.createElement(MenuItem, { value: [],}, placeholder)\n            )\n            , native\n              ? items &&\n                items.map(item => (\n                  React.createElement('option', { value: item.value, key: item.value,}\n                    , item.label\n                  )\n                ))\n              : items &&\n                items.map(item => (\n                  React.createElement(MenuItem, { key: item.value, value: item.value,}\n                    , multiple && (\n                      React.createElement(Checkbox, {\n                        color: \"primary\",\n                        checked: (value ).includes(item.value) || false,\n                        className: classes.checkbox,}\n                      )\n                    )\n                    , item.label\n                  )\n                ))\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Children,\n  isValidElement,\n  useState,\n  useEffect,\n\n} from 'react';\nimport MuiStepper from '@material-ui/core/Stepper';\n\n\n\n\n\n\n\n\n\n\nconst noop = () => {};\nexport const VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop,\n});\n\n\n\n\n\n\n\nexport function SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n\n  const steps = [];\n  let endStep;\n  Children.forEach(children, child => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(VerticalStepperContext.Provider, {\n        value: {\n          stepIndex,\n          setStepIndex,\n          stepHistory,\n          setStepHistory,\n          onStepChange,\n          stepperLength: Children.count(children),\n        },}\n      \n        , React.createElement(MuiStepper, {\n          activeStep: stepIndex,\n          orientation: \"vertical\",\n          elevation: elevated ? 2 : 0,}\n        \n          , steps\n        )\n      )\n      , stepIndex >= Children.count(children) - 1 && endStep\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext, } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport { VerticalStepperContext } from './SimpleStepper';\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      marginTop: theme.spacing(3),\n      '& button': {\n        marginRight: theme.spacing(1),\n      },\n    },\n  }),\n  { name: 'BackstageSimpleStepperFooter' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const RestartBtn = ({ text, handleClick }) => (\n  React.createElement(Button, { onClick: handleClick,}, text || 'Reset')\n);\n\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex,\n}) => (\n  React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: disabled,\n    'data-testid': `nextButton-${stepIndex}`,\n    onClick: handleClick,}\n  \n    , text || (last ? 'Finish' : 'Next')\n  )\n);\n\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => (\n  React.createElement(Button, {\n    onClick: handleClick,\n    'data-testid': `backButton-${stepIndex}`,\n    disabled: disabled,}\n  \n    , text || 'Back'\n  )\n);\n\n\n\n\n\n\nexport const SimpleStepperFooter = ({\n  actions = {},\n  children,\n}) => {\n  const classes = useStyles();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange,\n  } = useContext(VerticalStepperContext);\n\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n\n    setStepIndex(newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = actions.nextStep\n      ? actions.nextStep(stepIndex, stepperLength - 1)\n      : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , [undefined, true].includes(actions.showBack) && stepIndex !== 0 && (\n        React.createElement(BackBtn, {\n          text: actions.backText,\n          handleClick: handleBack,\n          disabled: stepIndex === 0,\n          stepIndex: stepIndex,}\n        )\n      )\n      , [undefined, true].includes(actions.showNext) && (\n        React.createElement(NextBtn, {\n          text: actions.nextText,\n          handleClick: handleNext,\n          disabled: \n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canNext && !actions.canNext())\n          ,\n          stepIndex: stepIndex,}\n        )\n      )\n      , actions.showRestart && stepIndex !== 0 && (\n        React.createElement(RestartBtn, {\n          text: actions.restartText,\n          handleClick: handleRestart,\n          stepIndex: stepIndex,}\n        )\n      )\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Typography from '@material-ui/core/Typography';\nimport { SimpleStepperFooter } from './SimpleStepperFooter';\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    end: {\n      padding: theme.spacing(3),\n    },\n  }),\n  { name: 'SimpleStepperStep' },\n);\n\nexport function SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles();\n\n  // The end step is not a part of the stepper\n  // It simply is the final screen with an option to have buttons such as reset or back\n  return end ? (\n    React.createElement('div', { className: classes.end,}\n      , React.createElement(Typography, { variant: \"h6\",}, title)\n      , children\n      , React.createElement(SimpleStepperFooter, { actions: { ...(actions || {}), showNext: false },} )\n    )\n  ) : (\n    React.createElement(MuiStep, { ...muiProps,}\n      , React.createElement(StepLabel, null\n        , React.createElement(Typography, { variant: \"h6\",}, title)\n      )\n      , React.createElement(StepContent, null\n        , children\n        , React.createElement(SimpleStepperFooter, { actions: actions,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport classNames from 'classnames';\nimport React, { } from 'react';\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    status: {\n      fontWeight: 500,\n      '&::before': {\n        width: '0.7em',\n        height: '0.7em',\n        display: 'inline-block',\n        marginRight: 8,\n        borderRadius: '50%',\n        content: '\"\"',\n      },\n    },\n    ok: {\n      '&::before': {\n        backgroundColor: theme.palette.status.ok,\n      },\n    },\n    warning: {\n      '&::before': {\n        backgroundColor: theme.palette.status.warning,\n      },\n    },\n    error: {\n      '&::before': {\n        backgroundColor: theme.palette.status.error,\n      },\n    },\n    pending: {\n      '&::before': {\n        backgroundColor: theme.palette.status.pending,\n      },\n    },\n    running: {\n      '&::before': {\n        backgroundColor: theme.palette.status.running,\n      },\n    },\n    aborted: {\n      '&::before': {\n        backgroundColor: theme.palette.status.aborted,\n      },\n    },\n  }),\n  { name: 'BackstageStatus' },\n);\n\nexport function StatusOK(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.ok),\n      'aria-label': \"Status ok\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusWarning(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.warning),\n      'aria-label': \"Status warning\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusError(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.error),\n      'aria-label': \"Status error\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusPending(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.pending),\n      'aria-label': \"Status pending\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusRunning(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.running),\n      'aria-label': \"Status running\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n\nexport function StatusAborted(props) {\n  const classes = useStyles(props);\n  return (\n    React.createElement('span', {\n      className: classNames(classes.status, classes.aborted),\n      'aria-label': \"Status aborted\" ,\n      'aria-hidden': \"true\",\n      ...props,}\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  withStyles,\n  createStyles,\n\n\n} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\n\n\nconst tableTitleCellStyles = (theme) =>\n  createStyles({\n    root: {\n      fontWeight: 'bolder',\n      whiteSpace: 'nowrap',\n      paddingRight: theme.spacing(4),\n      border: '0',\n      verticalAlign: 'top',\n    },\n  });\n\n\n\nconst tableContentCellStyles = {\n  root: {\n    border: '0',\n    verticalAlign: 'top',\n  },\n};\n\n\n\nconst listStyles = (theme) =>\n  createStyles({\n    root: {\n      listStyle: 'none',\n      margin: theme.spacing(0, 0, -1, 0),\n      padding: '0',\n    },\n  });\n\n\n\nconst listItemStyles = (theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(0, 0, 1, 0),\n    },\n    random: {},\n  });\n\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: 'BackstageMetadataTableTitleCell',\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: 'BackstageMetadataTableCell',\n})(TableCell);\n\nexport const MetadataTable = ({\n  dense,\n  children,\n}\n\n\n) => (\n  React.createElement(Table, { size: dense ? 'small' : 'medium',}\n    , React.createElement(TableBody, null, children)\n  )\n);\n\nexport const MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}\n\n\n) => (\n  React.createElement(TableRow, null\n    , title && React.createElement(TitleCell, null, title)\n    , React.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest,}\n      , children\n    )\n  )\n);\n\n\n\n\n\nexport const MetadataList = withStyles(listStyles, {\n  name: 'BackstageMetadataTableList',\n})(({ classes, children }) => (\n  React.createElement('ul', { className: classes.root,}, children)\n));\n\nexport const MetadataListItem = withStyles(listItemStyles, {\n  name: 'BackstageMetadataTableListItem',\n})(({ classes, children }) => (\n  React.createElement('li', { className: classes.root,}, children)\n));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Fragment, } from 'react';\nimport {\n  withStyles,\n  createStyles,\n\n\n} from '@material-ui/core/styles';\nimport startCase from 'lodash/startCase';\n\nimport {\n  MetadataTable,\n  MetadataTableItem,\n  MetadataList,\n  MetadataListItem,\n} from './MetadataTable';\n\n\n\nconst listStyle = createStyles({\n  root: {\n    margin: '0 0',\n    listStyleType: 'none',\n  },\n});\n\n\n\nconst nestedListStyle = (theme) =>\n  createStyles({\n    root: {\n      ...listStyle.root,\n      paddingLeft: theme.spacing(1),\n    },\n  });\n\n\n\n\n// Sub Components\nconst StyledList = withStyles(listStyle, {\n  name: 'BackstageStructuredMetadataTableList',\n})(({ classes, children }) => (\n  React.createElement(MetadataList, { classes: classes,}, children)\n));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: 'BackstageStructuredMetadataTableNestedList',\n})(({ classes, children }) => (\n  React.createElement(MetadataList, { classes: classes,}, children)\n));\n\nfunction renderList(list, nested) {\n  const values = list.map((item, index) => (\n    React.createElement(MetadataListItem, { key: index,}, toValue(item))\n  ));\n  return nested ? (\n    React.createElement(StyledNestedList, null, values)\n  ) : (\n    React.createElement(StyledList, null, values)\n  );\n}\n\nfunction renderMap(\n  map,\n  nested,\n  options,\n) {\n  const values = Object.keys(map).map(key => {\n    const value = toValue(map[key], true);\n    const fmtKey =\n      options && options.titleFormat\n        ? options.titleFormat(key)\n        : startCase(key);\n    return (\n      React.createElement(MetadataListItem, { key: key,}\n        , `${fmtKey}: `\n        , value\n      )\n    );\n  });\n\n  return nested ? (\n    React.createElement(StyledNestedList, null, values)\n  ) : (\n    React.createElement(StyledList, null, values)\n  );\n}\n\nfunction toValue(\n  value,\n  options,\n  nested,\n) {\n  if (React.isValidElement(value)) {\n    return React.createElement(Fragment, null, value);\n  }\n\n  if (typeof value === 'object' && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n\n  if (typeof value === 'boolean') {\n    return React.createElement(Fragment, null, value ? '' : '');\n  }\n\n  return React.createElement(Fragment, null, value);\n}\nconst ItemValue = ({ value, options }) => (\n  React.createElement(Fragment, null, toValue(value, options))\n);\n\nconst TableItem = ({\n  title,\n  value,\n  options,\n}\n\n\n\n) => {\n  return (\n    React.createElement(MetadataTableItem, {\n      title: \n        options && options.titleFormat\n          ? options.titleFormat(title)\n          : startCase(title)\n      ,}\n    \n      , React.createElement(ItemValue, { value: value, options: options,} )\n    )\n  );\n};\n\nfunction mapToItems(info, options) {\n  return Object.keys(info).map(key => (\n    React.createElement(TableItem, { key: key, title: key, value: info[key], options: options,} )\n  ));\n}\n\n\n\n\n\n\n\nexport function StructuredMetadataTable(props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return React.createElement(MetadataTable, { dense: dense,}, metadataItems);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEqual } from 'lodash';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { useDebouncedEffect } from '@react-hookz/web';\n\nfunction stringify(queryParams) {\n  // Even though these setting don't look nice (e.g. escaped brackets), we should keep\n  // them this way. The current syntax handles all cases, including variable types with\n  // arrays or strings.\n  return qs.stringify(queryParams, {\n    strictNullHandling: true,\n  });\n}\n\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true,\n  });\n}\n\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n\n  return queryParams[stateName];\n}\n\nfunction joinQueryString(\n  queryString,\n  stateName,\n  state,\n) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state,\n  };\n  return stringify(queryParams);\n}\n\n\n\nexport function useQueryParamState(\n  stateName,\n  /** @deprecated Don't configure a custom debouceTime */\n  debounceTime = 250,\n) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName),\n  );\n\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n\n    setQueryParamState(oldState =>\n      isEqual(newState, oldState) ? oldState : newState,\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState,\n      );\n\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime,\n  );\n\n  return [queryParamState, setQueryParamState];\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApiHolder, configApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: 'https://github.com/backstage/backstage/issues',\n  items: [\n    {\n      title: 'Support Not Configured',\n      icon: 'warning',\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: 'Add `app.support` config key',\n          url: 'https://github.com/backstage/backstage/blob/master/app-config.yaml',\n        },\n      ],\n    },\n  ],\n};\n\nexport function useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config?.getOptionalConfig('app.support');\n\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n\n  return {\n    url: supportConfig.getString('url'),\n    items: supportConfig.getConfigArray('items').flatMap(itemConf => ({\n      title: itemConf.getString('title'),\n      icon: itemConf.getOptionalString('icon'),\n      links: (itemConf.getOptionalConfigArray('links') ?? []).flatMap(\n        linkConf => ({\n          url: linkConf.getString('url'),\n          title: linkConf.getString('title'),\n        }),\n      ),\n    })),\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApp } from '@backstage/core-plugin-api';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport React, { } from 'react';\n\n\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? React.createElement(Icon, { ...props,} ) : React.createElement(MuiBrokenImageIcon, { ...props,} );\n}\n\n// Should match the list of overridable system icon keys in @backstage/core-app-api\n/**\n * Broken Image Icon\n *\n * @public\n *\n */\nexport function BrokenImageIcon(props) {\n  return useSystemIcon('brokenImage', props);\n}\n/** @public */\nexport function CatalogIcon(props) {\n  return useSystemIcon('catalog', props);\n}\n/** @public */\nexport function ChatIcon(props) {\n  return useSystemIcon('chat', props);\n}\n/** @public */\nexport function DashboardIcon(props) {\n  return useSystemIcon('dashboard', props);\n}\n/** @public */\nexport function DocsIcon(props) {\n  return useSystemIcon('docs', props);\n}\n/** @public */\nexport function EmailIcon(props) {\n  return useSystemIcon('email', props);\n}\n/** @public */\nexport function GitHubIcon(props) {\n  return useSystemIcon('github', props);\n}\n/** @public */\nexport function GroupIcon(props) {\n  return useSystemIcon('group', props);\n}\n/** @public */\nexport function HelpIcon(props) {\n  return useSystemIcon('help', props);\n}\n/** @public */\nexport function UserIcon(props) {\n  return useSystemIcon('user', props);\n}\n/** @public */\nexport function WarningIcon(props) {\n  return useSystemIcon('warning', props);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApp } from '@backstage/core-plugin-api';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useState } from 'react';\nimport { useSupportConfig } from '../../hooks';\nimport { HelpIcon } from '../../icons';\nimport { Link } from '../Link';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400,\n    },\n  },\n  { name: 'BackstageSupportButton' },\n);\n\nconst SupportIcon = ({ icon }) => {\n  const app = useApp();\n  const Icon = icon ? app.getSystemIcon(icon) ?? HelpIcon : HelpIcon;\n  return React.createElement(Icon, null );\n};\n\nconst SupportLink = ({ link }) => (\n  React.createElement(Link, { to: link.url,}, link.title ?? link.url)\n);\n\nconst SupportListItem = ({ item }) => {\n  return (\n    React.createElement(ListItem, null\n      , React.createElement(ListItemIcon, null\n        , React.createElement(SupportIcon, { icon: item.icon,} )\n      )\n      , React.createElement(ListItemText, {\n        primary: item.title,\n        secondary: item.links?.reduce(\n          (prev, link, idx) => [\n            ...prev,\n            idx > 0 && React.createElement('br', { key: idx,} ),\n            React.createElement(SupportLink, { link: link, key: link.url,} ),\n          ],\n          [],\n        ),}\n      )\n    )\n  );\n};\n\nexport function SupportButton(props) {\n  const { title, children } = props;\n  const { items } = useSupportConfig();\n\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles();\n  const isSmallScreen = useMediaQuery(theme =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const onClickHandler = event => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Box, { display: \"flex\", ml: 1,}\n        , isSmallScreen ? (\n          React.createElement(IconButton, {\n            color: \"primary\",\n            size: \"small\",\n            onClick: onClickHandler,\n            'data-testid': \"support-button\",}\n          \n            , React.createElement(HelpIcon, null )\n          )\n        ) : (\n          React.createElement(Button, {\n            'data-testid': \"support-button\",\n            'aria-label': \"support\",\n            color: \"primary\",\n            onClick: onClickHandler,\n            startIcon: React.createElement(HelpIcon, null ),}\n          , \"Support\"\n\n          )\n        )\n      )\n      , React.createElement(Popover, {\n        'data-testid': \"support-button-popover\",\n        open: popoverOpen,\n        anchorEl: anchorEl,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'right',\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'right',\n        },\n        onClose: popoverCloseHandler,}\n      \n        , React.createElement(List, { className: classes.popoverList,}\n          , title && (\n            React.createElement(ListItem, { alignItems: \"flex-start\",}\n              , React.createElement(Typography, { variant: \"subtitle1\",}, title)\n            )\n          )\n          , React.Children.map(children, (child, i) => (\n            React.createElement(ListItem, { alignItems: \"flex-start\", key: `child-${i}`,}\n              , child\n            )\n          ))\n          , items &&\n            items.map((item, i) => (\n              React.createElement(SupportListItem, { item: item, key: `item-${i}`,} )\n            ))\n        )\n        , React.createElement(DialogActions, null\n          , React.createElement(Button, { color: \"primary\", onClick: popoverCloseHandler,}, \"Close\"\n\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, } from 'react';\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\n\n/** @public **/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56,\n};\n\nexport const makeSidebarConfig = (\n  customSidebarConfig,\n) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter:\n    sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2,\n});\n\n/** @internal **/\n\n\n\n\n\n\nexport const submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200,\n};\n\nexport const makeSidebarSubmenuConfig = (\n  customSubmenuConfig,\n) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig,\n});\n\nexport const SIDEBAR_INTRO_LOCAL_STORAGE =\n  '@backstage/core/sidebar-intro-dismissed';\n\n\n\n\n\n\nexport const SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig,\n});\n\n\n\n\n\n\nexport const SidebarItemWithSubmenuContext =\n  createContext({\n    isHoveredOn: false,\n    setIsHoveredOn: () => {},\n  });\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar LocalStorageKeys; (function (LocalStorageKeys) {\n  const SIDEBAR_PIN_STATE = 'sidebarPinState'; LocalStorageKeys[\"SIDEBAR_PIN_STATE\"] = SIDEBAR_PIN_STATE;\n})(LocalStorageKeys || (LocalStorageKeys = {}));\n\nexport const LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(LocalStorageKeys.SIDEBAR_PIN_STATE) ||\n          'true',\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      LocalStorageKeys.SIDEBAR_PIN_STATE,\n      JSON.stringify(state),\n    );\n  },\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, { createContext, useContext } from 'react';\n\n/**\n * Type of `SidebarPinStateContext`\n *\n * @public @deprecated\n * Use `SidebarPinState` instead.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {},\n  isMobile: false,\n};\n\n/**\n * Contains the state on how the `Sidebar` is rendered\n *\n * @public @deprecated\n * Use `<SidebarPinStateContextProvider>` + `useSidebarPinState()` instead.\n */\nexport const LegacySidebarPinStateContext =\n  createContext(defaultSidebarPinStateContext);\n\nconst VersionedSidebarPinStateContext = createVersionedContext\n\n('sidebar-pin-state-context');\n\n/**\n * Provides state for how the `Sidebar` is rendered\n *\n * @public\n */\nexport const SidebarPinStateProvider = ({\n  children,\n  value,\n}\n\n\n) => (\n  React.createElement(LegacySidebarPinStateContext.Provider, { value: value,}\n    , React.createElement(VersionedSidebarPinStateContext.Provider, {\n      value: createVersionedValueMap({ 1: value }),}\n    \n      , children\n    )\n  )\n);\n\n/**\n * Hook to read and update sidebar pin state, which controls whether or not the\n * sidebar is pinned open.\n *\n * @public\n */\nexport const useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n\n  // Invoked from outside a SidebarPinStateProvider: check for the legacy\n  // context's value, but otherwise return the default.\n  if (versionedPinStateContext === undefined) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return pinStateContext;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { SidebarConfigContext, } from './config';\n\nimport { LocalStorage } from './localStorage';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { SidebarPinStateProvider } from './SidebarPinStateContext';\n\n\n\nconst useStyles = makeStyles\n\n\n(\n  theme => ({\n    root: {\n      width: '100%',\n      transition: 'padding-left 0.1s ease-out',\n      isolation: 'isolate',\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: props =>\n          props.isPinned\n            ? props.sidebarConfig.drawerWidthOpen\n            : props.sidebarConfig.drawerWidthClosed,\n      },\n      [theme.breakpoints.down('xs')]: {\n        paddingBottom: props => props.sidebarConfig.mobileSidebarHeight,\n      },\n    },\n    content: {\n      zIndex: 0,\n      isolation: 'isolate',\n      '&:focus': {\n        outline: 0,\n      },\n    },\n  }),\n  { name: 'BackstageSidebarPage' },\n);\n\n/**\n * Props for SidebarPage\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\nconst PageContext = createContext({\n  content: {\n    contentRef: undefined,\n  },\n});\nexport function SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(() =>\n    LocalStorage.getSidebarPinState(),\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n\n  const contentRef = useRef(null);\n\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef,\n      },\n    }),\n    [contentRef],\n  );\n\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n\n  const isMobile = useMediaQuery(\n    theme => theme.breakpoints.down('xs'),\n    { noSsr: true },\n  );\n\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n\n  const classes = useStyles({ isPinned, sidebarConfig });\n\n  return (\n    React.createElement(SidebarPinStateProvider, {\n      value: {\n        isPinned,\n        toggleSidebarPinState,\n        isMobile,\n      },}\n    \n      , React.createElement(PageContext.Provider, { value: pageContext,}\n        , React.createElement('div', { className: classes.root,}, props.children)\n      )\n    )\n  );\n}\n\n/**\n * This hook provides a react ref to the main content.\n * Allows to set an element as the main content and focus on that component.\n *\n * *Note: If `contentRef` is not set `focusContent` is noop. `Content` component sets this ref automatically*\n *\n * @public\n * @example\n * Focus current content\n * ```tsx\n *  const { focusContent} = useContent();\n * ...\n *  <Button onClick={focusContent}>\n *     focus main content\n *  </Button>\n * ```\n * @example\n * Set the reference to an Html element\n * ```\n *  const { contentRef } = useContent();\n * ...\n *  <article ref={contentRef} tabIndex={-1}>Main Content</article>\n * ```\n */\nexport function useContent() {\n  const { content } = useContext(PageContext);\n\n  const focusContent = useCallback(() => {\n    content?.contentRef?.current?.focus();\n  }, [content]);\n\n  return { focusContent, contentRef: content?.contentRef };\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext, useContext } from 'react';\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\n\n/**\n * Types for the `SidebarContext`\n *\n * @public @deprecated\n * Use `SidebarOpenState` instead.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {},\n};\n\n/**\n * Context whether the `Sidebar` is open\n *\n * @public @deprecated\n * Use `<SidebarOpenStateProvider>` + `useSidebarOpenState()` instead.\n */\nexport const LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext,\n);\n\nconst VersionedSidebarContext = createVersionedContext\n\n('sidebar-open-state-context');\n\n/**\n * Provides context for reading and updating sidebar state.\n *\n * @public\n */\nexport const SidebarOpenStateProvider = ({\n  children,\n  value,\n}\n\n\n) => (\n  React.createElement(LegacySidebarContext.Provider, { value: value,}\n    , React.createElement(VersionedSidebarContext.Provider, {\n      value: createVersionedValueMap({ 1: value }),}\n    \n      , children\n    )\n  )\n);\n\n/**\n * Hook to read and update the sidebar's open state, which controls whether or\n * not the sidebar is open and full-width, or closed and only displaying icons.\n *\n * @public\n */\nexport const useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n\n  // Invoked from outside a SidebarOpenStateProvider: check for the legacy\n  // context's value, but otherwise return the default.\n  if (versionedOpenStateContext === undefined) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return openStateContext;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport BottomNavigationAction, {\n\n} from '@material-ui/core/BottomNavigationAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useSidebarPinState } from '.';\nimport { Link } from '../../components';\nimport { SidebarConfigContext, } from './config';\nimport { MobileSidebarContext } from './MobileSidebar';\n\n/**\n * Props for the `SidebarGroup`\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color,\n    },\n\n    selected: props => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: '-1px',\n    }),\n\n    label: {\n      display: 'none',\n    },\n  }),\n);\n\n/**\n * Returns a MUI `BottomNavigationAction`, which is aware of the current location & the selected item in the `BottomNavigation`,\n * such that it will highlight a `MobileSidebarGroup` either on location change or if the selected item changes.\n *\n * @param props `to`: pathname of link; `value`: index of the selected item\n * @internal\n */\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } =\n    useContext(MobileSidebarContext);\n\n  const onChange = (_, value) => {\n    if (value === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value);\n    }\n  };\n\n  const selected =\n    (value === selectedMenuItemIndex && selectedMenuItemIndex >= 0) ||\n    (!(value === selectedMenuItemIndex) &&\n      !(selectedMenuItemIndex >= 0) &&\n      to === location.pathname);\n\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    React.createElement(BottomNavigationAction, {\n      label: label,\n      icon: icon,\n      component: Link ,\n      to: (to ? to : location.pathname) ,\n      onChange: onChange,\n      value: value,\n      selected: selected,\n      classes: classes,}\n    )\n  );\n};\n\n/**\n * Groups items of the `Sidebar` together.\n *\n * On bigger screens, this won't have any effect at the moment.\n * On small screens, it will add an action to the bottom navigation - either triggering an overlay menu or acting as a link\n *\n * @public\n */\nexport const SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    React.createElement(MobileSidebarGroup, { to: to, label: label, icon: icon, value: value,} )\n  ) : (\n    React.createElement(React.Fragment, null, children)\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\n\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Box from '@material-ui/core/Box';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { orderBy } from 'lodash';\nimport React, { createContext, useEffect, useState, useContext } from 'react';\nimport { useLocation } from 'react-router';\nimport { SidebarOpenStateProvider } from './SidebarOpenStateContext';\nimport { SidebarGroup } from './SidebarGroup';\nimport { SidebarConfigContext, } from './config';\n\n/**\n * Type of `MobileSidebarContext`\n *\n * @internal\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      position: 'fixed',\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: '1px solid #383838',\n    },\n\n    overlay: props => ({\n      background: theme.palette.navigation.background,\n      width: '100%',\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: '0 1 auto',\n      overflow: 'auto',\n    }),\n\n    overlayHeader: {\n      display: 'flex',\n      color: theme.palette.bursts.fontColor,\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: theme.spacing(2, 3),\n    },\n\n    overlayHeaderClose: {\n      color: theme.palette.bursts.fontColor,\n    },\n\n    marginMobileSidebar: props => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n    }),\n  }),\n);\n\nconst sortSidebarGroupsForPriority = (children) =>\n  orderBy(\n    children,\n    ({ props: { priority } }) => (Number.isInteger(priority) ? priority : -1),\n    'desc',\n  );\n\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\n\nconst OverlayMenu = ({\n  children,\n  label = 'Menu',\n  open,\n  onClose,\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n\n  return (\n    React.createElement(Drawer, {\n      anchor: \"bottom\",\n      open: open,\n      onClose: onClose,\n      ModalProps: {\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } },\n      },\n      classes: {\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay,\n      },}\n    \n      , React.createElement(Box, { className: classes.overlayHeader,}\n        , React.createElement(Typography, { variant: \"h3\",}, label)\n        , React.createElement(IconButton, {\n          onClick: onClose,\n          classes: { root: classes.overlayHeaderClose },}\n        \n          , React.createElement(CloseIcon, null )\n        )\n      )\n      , React.createElement(Box, { component: \"nav\",}, children)\n    )\n  );\n};\n\n/**\n * Context on which `SidebarGroup` is currently selected\n *\n * @internal\n */\nexport const MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {},\n});\n\n/**\n * A navigation component for mobile screens, which sticks to the bottom.\n *\n * It alternates the normal sidebar by grouping the `SidebarItems` based on provided `SidebarGroup`s\n * either rendering them as a link or an overlay menu.\n * If no `SidebarGroup`s are provided the sidebar content is wrapped in an default overlay menu.\n *\n * @public\n */\nexport const MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] =\n    useState(-1);\n\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n\n  // Filter children for SidebarGroups\n  //\n  // Directly comparing child.type with SidebarSubmenu will not work with in\n  // combination with react-hot-loader\n  //\n  // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n  let sidebarGroups = useElementFilter(children, elements =>\n    elements.getElements().filter(child => child.type === sidebarGroupType),\n  );\n\n  if (!children) {\n    // If Sidebar has no children the MobileSidebar won't be rendered\n    return null;\n  } else if (!sidebarGroups.length) {\n    // If Sidebar has no SidebarGroup as a children a default\n    // SidebarGroup with the complete Sidebar content will be created\n    sidebarGroups.push(\n      React.createElement(SidebarGroup, { key: \"default_menu\", icon: React.createElement(MenuIcon, null ),}\n        , children\n      ),\n    );\n  } else {\n    // Sort SidebarGroups for the given Priority\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n\n  const shouldShowGroupChildren =\n    selectedMenuItemIndex >= 0 &&\n    !sidebarGroups[selectedMenuItemIndex].props.to;\n\n  return (\n    React.createElement(SidebarOpenStateProvider, { value: { isOpen: true, setOpen: () => {} },}\n      , React.createElement(MobileSidebarContext.Provider, {\n        value: { selectedMenuItemIndex, setSelectedMenuItemIndex },}\n      \n        , React.createElement(OverlayMenu, {\n          label: \n            sidebarGroups[selectedMenuItemIndex] &&\n            (sidebarGroups[selectedMenuItemIndex].props.label )\n          ,\n          open: shouldShowGroupChildren,\n          onClose: () => setSelectedMenuItemIndex(-1),}\n        \n          , sidebarGroups[selectedMenuItemIndex] &&\n            (sidebarGroups[selectedMenuItemIndex].props\n              .children )\n        )\n        , React.createElement(BottomNavigation, {\n          className: classes.root,\n          'data-testid': \"mobile-sidebar-root\",\n          component: \"nav\",}\n        \n          , sidebarGroups\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\n\nimport React, { useState, useContext, useRef } from 'react';\nimport Button from '@material-ui/core/Button';\n\nimport {\n  makeSidebarConfig,\n  makeSidebarSubmenuConfig,\n\n  SidebarConfigContext,\n\n\n\n} from './config';\n\nimport { useContent } from './Page';\nimport { SidebarOpenStateProvider } from './SidebarOpenStateContext';\nimport { useSidebarPinState } from './SidebarPinStateContext';\nimport { MobileSidebar } from './MobileSidebar';\n\n/** @public */\n\nconst useStyles = makeStyles(\n  theme => ({\n    drawer: props => ({\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      position: 'fixed',\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: 'hidden',\n      msOverflowStyle: 'none',\n      scrollbarWidth: 'none',\n      width: props.sidebarConfig.drawerWidthClosed,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest,\n      }),\n      '& > *': {\n        flexShrink: 0,\n      },\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    }),\n    drawerOpen: props => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter,\n      }),\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: 'absolute',\n      zIndex: 1000,\n      transform: 'translateY(-200%)',\n      '&:focus': {\n        transform: 'translateY(5px)',\n      },\n    },\n  }),\n  { name: 'BackstageSidebar' },\n);\n\nvar State; (function (State) {\n  const Closed = 0; State[State[\"Closed\"] = Closed] = \"Closed\";\n  const Idle = Closed + 1; State[State[\"Idle\"] = Idle] = \"Idle\";\n  const Open = Idle + 1; State[State[\"Open\"] = Open] = \"Open\";\n})(State || (State = {}));\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Places the Sidebar & wraps the children providing context weather the `Sidebar` is open or not.\n *\n * Handles & delays hover events for expanding the `Sidebar`\n *\n * @param props `disableExpandOnHover` disables the default hover behaviour;\n * `openDelayMs` & `closeDelayMs` set delay until sidebar will open/close on hover\n * @returns\n * @internal\n */\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children,\n  } = props;\n\n  const classes = useStyles({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    theme => theme.breakpoints.down('md'),\n    { noSsr: true },\n  );\n  const [state, setState] = useState(State.Closed);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state !== State.Open && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Open);\n      }, openDelayMs);\n\n      setState(State.Idle);\n    }\n  };\n\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state === State.Idle) {\n      setState(State.Closed);\n    } else if (state === State.Open) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Closed);\n      }, closeDelayMs);\n    }\n  };\n\n  const isOpen = (state === State.Open && !isSmallScreen) || isPinned;\n\n  /**\n   * Close/Open Sidebar directily without delays. Also toggles `SidebarPinState` to avoid hidden content behind Sidebar.\n   */\n  const setOpen = (open) => {\n    if (open) {\n      setState(State.Open);\n      toggleSidebarPinState();\n    } else {\n      setState(State.Closed);\n      toggleSidebarPinState();\n    }\n  };\n\n  return (\n    React.createElement('nav', { style: {}, 'aria-label': \"sidebar nav\" ,}\n      , React.createElement(A11ySkipSidebar, null )\n      , React.createElement(SidebarOpenStateProvider, { value: { isOpen, setOpen },}\n        , React.createElement('div', {\n          className: classes.root,\n          'data-testid': \"sidebar-root\",\n          onMouseEnter: disableExpandOnHover ? () => {} : handleOpen,\n          onFocus: disableExpandOnHover ? () => {} : handleOpen,\n          onMouseLeave: disableExpandOnHover ? () => {} : handleClose,\n          onBlur: disableExpandOnHover ? () => {} : handleClose,}\n        \n          , React.createElement('div', {\n            className: classnames(classes.drawer, {\n              [classes.drawerOpen]: isOpen,\n            }),}\n          \n            , children\n          )\n        )\n      )\n    )\n  );\n};\n\n/**\n * Passing children into the desktop or mobile sidebar depending on the context\n *\n * @public\n */\nexport const Sidebar = (props) => {\n  const sidebarConfig = makeSidebarConfig(\n    props.sidebarOptions ?? {},\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    props.submenuOptions ?? {},\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    React.createElement(MobileSidebar, null, children)\n  ) : (\n    React.createElement(SidebarConfigContext.Provider, { value: { sidebarConfig, submenuConfig },}\n      , React.createElement(DesktopSidebar, {\n        openDelayMs: openDelayMs,\n        closeDelayMs: closeDelayMs,\n        disableExpandOnHover: disableExpandOnHover,}\n      \n        , children\n      )\n    )\n  );\n};\n\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles({ sidebarConfig });\n\n  if (!contentRef?.current) {\n    return null;\n  }\n  return (\n    React.createElement(Button, {\n      onClick: focusContent,\n      variant: \"contained\",\n      className: classnames(classes.visuallyHidden),}\n    , \"Skip to content\"\n\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { isEqual, isMatch } from 'lodash';\nimport qs from 'qs';\n\nexport function isLocationMatch(currentLocation, toLocation) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search,\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n\n  const matching =\n    isEqual(toLocation.pathname, currentLocation.pathname) &&\n    isMatch(currentQueryParameters, toQueryParameters);\n\n  return matching;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext, useState } from 'react';\nimport { resolvePath, useLocation, useResolvedPath } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '../../components/Link';\n\nimport classnames from 'classnames';\n\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport { SidebarItemWithSubmenuContext } from './config';\nimport { isLocationMatch } from './utils';\n\nconst useStyles = makeStyles(\n  theme => ({\n    item: {\n      height: 48,\n      width: '100%',\n      '&:hover': {\n        background: '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.navigation.color,\n      padding: 20,\n      cursor: 'pointer',\n      position: 'relative',\n      background: 'none',\n      border: 'none',\n    },\n    itemContainer: {\n      width: '100%',\n    },\n    selected: {\n      background: '#6f6f6f',\n      color: '#FFF',\n    },\n    label: {\n      margin: 14,\n      marginLeft: 7,\n      fontSize: 14,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n    dropdownArrow: {\n      position: 'absolute',\n      right: 21,\n    },\n    dropdown: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'end',\n    },\n    dropdownItem: {\n      width: '100%',\n      padding: '10px 0 10px 0',\n      '&:hover': {\n        background: '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n    },\n    textContent: {\n      color: theme.palette.navigation.color,\n      paddingLeft: theme.spacing(4),\n      paddingRight: theme.spacing(1),\n      fontSize: '14px',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n  }),\n  { name: 'BackstageSidebarSubmenuItem' },\n);\n\n/**\n * Clickable item displayed when submenu item is clicked.\n * title: Text content of item\n * to: Path to navigate to when item is clicked\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Item used inside a submenu within the sidebar.\n *\n * @public\n */\nexport const SidebarSubmenuItem = (props) => {\n  const { title, to, icon: Icon, dropdownItems } = props;\n  const classes = useStyles();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath(to ?? '');\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation);\n\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== undefined) {\n    dropdownItems.some(item => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath);\n      return isActive;\n    });\n    return (\n      React.createElement('div', { className: classes.itemContainer,}\n        , React.createElement(Tooltip, { title: title, enterDelay: 500, enterNextDelay: 500,}\n          , React.createElement('button', {\n            onClick: handleClickDropdown,\n            onTouchStart: e => e.stopPropagation(),\n            className: classnames(\n              classes.item,\n              isActive ? classes.selected : undefined,\n            ),}\n          \n            , Icon && React.createElement(Icon, { fontSize: \"small\",} )\n            , React.createElement(Typography, { variant: \"subtitle1\", className: classes.label,}\n              , title\n            )\n            , showDropDown ? (\n              React.createElement(ArrowDropUpIcon, { className: classes.dropdownArrow,} )\n            ) : (\n              React.createElement(ArrowDropDownIcon, { className: classes.dropdownArrow,} )\n            )\n          )\n        )\n        , dropdownItems && showDropDown && (\n          React.createElement('div', { className: classes.dropdown,}\n            , dropdownItems.map((object, key) => (\n              React.createElement(Tooltip, {\n                key: key,\n                title: object.title,\n                enterDelay: 500,\n                enterNextDelay: 500,}\n              \n                , React.createElement(Link, {\n                  to: object.to,\n                  underline: \"none\",\n                  className: classes.dropdownItem,\n                  onClick: closeSubmenu,\n                  onTouchStart: e => e.stopPropagation(),}\n                \n                  , React.createElement(Typography, { className: classes.textContent,}\n                    , object.title\n                  )\n                )\n              )\n            ))\n          )\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement('div', { className: classes.itemContainer,}\n      , React.createElement(Tooltip, { title: title, enterDelay: 500, enterNextDelay: 500,}\n        , React.createElement(Link, {\n          to: to,\n          underline: \"none\",\n          className: classnames(\n            classes.item,\n            isActive ? classes.selected : undefined,\n          ),\n          onClick: closeSubmenu,\n          onTouchStart: e => e.stopPropagation(),}\n        \n          , Icon && React.createElement(Icon, { fontSize: \"small\",} )\n          , React.createElement(Typography, { variant: \"subtitle1\", className: classes.label,}\n            , title\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport classnames from 'classnames';\nimport React, { useContext, useEffect, useState } from 'react';\nimport {\n  SidebarItemWithSubmenuContext,\n  SidebarConfigContext,\n\n} from './config';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n\nconst useStyles = makeStyles\n\n\n(\n  theme => ({\n    root: {\n      zIndex: 1000,\n      position: 'relative',\n      overflow: 'visible',\n      width: theme.spacing(7) + 1,\n    },\n    drawer: props => ({\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      position: 'fixed',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: props.left,\n        transition: theme.transitions.create('margin-left', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest,\n        }),\n      },\n      top: 0,\n      bottom: 0,\n      padding: 0,\n      background: theme.palette.navigation.submenu?.background ?? '#404040',\n      overflowX: 'hidden',\n      msOverflowStyle: 'none',\n      scrollbarWidth: 'none',\n      cursor: 'default',\n      width: props.submenuConfig.drawerWidthClosed,\n      transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n      '& > *': {\n        flexShrink: 0,\n      },\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    }),\n    drawerOpen: props => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        position: 'relative',\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0,\n      },\n    }),\n    title: {\n      fontSize: 24,\n      fontWeight: 500,\n      color: '#FFF',\n      padding: 20,\n      [theme.breakpoints.down('xs')]: {\n        display: 'none',\n      },\n    },\n  }),\n  { name: 'BackstageSidebarSubmenu' },\n);\n\n/**\n * Holds a title for text Header of a sidebar submenu and children\n * components to be rendered inside SidebarSubmenu\n *\n * @public\n */\n\n\n\n\n\n/**\n * Used inside SidebarItem to display an expandable Submenu\n *\n * @public\n */\nexport const SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen\n    ? sidebarConfig.drawerWidthOpen\n    : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles({ left, submenuConfig });\n\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n\n  return (\n    React.createElement('div', {\n      className: classnames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen,\n      }),}\n    \n      , React.createElement(Typography, { variant: \"h5\", className: classes.title,}\n        , props.title\n      )\n      , props.children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    display: 'flex',\n    position: 'relative',\n    width: '100%',\n  },\n  arrow1: {\n    right: '6px',\n    position: 'absolute',\n  },\n});\n\nconst DoubleArrowLeft = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.iconContainer,}\n      , React.createElement('div', { className: classes.arrow1,}\n        , React.createElement(ArrowBackIosIcon, { style: { fontSize: '12px' },} )\n      )\n      , React.createElement('div', null\n        , React.createElement(ArrowBackIosIcon, { style: { fontSize: '12px' },} )\n      )\n    )\n  );\n};\n\nexport default DoubleArrowLeft;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    display: 'flex',\n    position: 'relative',\n    width: '100%',\n  },\n  arrow1: {\n    right: '6px',\n    position: 'absolute',\n  },\n});\n\nconst DoubleArrowRight = () => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.iconContainer,}\n      , React.createElement('div', { className: classes.arrow1,}\n        , React.createElement(ArrowForwardIosIcon, { style: { fontSize: '12px' },} )\n      )\n      , React.createElement('div', null\n        , React.createElement(ArrowForwardIosIcon, { style: { fontSize: '12px' },} )\n      )\n    )\n  );\n};\n\nexport default DoubleArrowRight;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\n\nimport { makeStyles, styled, } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\n\n\n\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowDropUp from '@material-ui/icons/ArrowDropUp';\nimport ArrowDropDown from '@material-ui/icons/ArrowDropDown';\nimport classnames from 'classnames';\nimport React, {\n\n\n  forwardRef,\n\n\n  useContext,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Link,\n\n  resolvePath,\n  useLocation,\n  useResolvedPath,\n} from 'react-router-dom';\nimport {\n  SidebarConfigContext,\n  SidebarItemWithSubmenuContext,\n\n} from './config';\nimport {\n\n\n  SidebarSubmenu,\n} from '.';\nimport DoubleArrowLeft from './icons/DoubleArrowLeft';\nimport DoubleArrowRight from './icons/DoubleArrowRight';\nimport { isLocationMatch } from './utils';\n\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst makeSidebarStyles = (sidebarConfig) =>\n  makeStyles(\n    theme => ({\n      root: {\n        color: theme.palette.navigation.color,\n        display: 'flex',\n        flexFlow: 'row nowrap',\n        alignItems: 'center',\n        height: 48,\n        cursor: 'pointer',\n      },\n      buttonItem: {\n        background: 'none',\n        border: 'none',\n        width: '100%',\n        margin: 0,\n        padding: 0,\n        textAlign: 'inherit',\n        font: 'inherit',\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: 'center',\n      },\n      open: {\n        [theme.breakpoints.up('sm')]: {\n          width: sidebarConfig.drawerWidthOpen,\n        },\n      },\n      highlightable: {\n        '&:hover': {\n          background:\n            theme.palette.navigation.navItem?.hoverBackground ?? '#404040',\n        },\n      },\n      highlighted: {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground ?? '#404040',\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: 'bold',\n        whiteSpace: 'nowrap',\n        lineHeight: 'auto',\n        flex: '3 1 auto',\n        width: '110px',\n        overflow: 'hidden',\n        'text-overflow': 'ellipsis',\n      },\n      iconContainer: {\n        boxSizing: 'border-box',\n        height: '100%',\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      searchRoot: {\n        marginBottom: 12,\n      },\n      searchField: {\n        color: '#b5b5b5',\n        fontWeight: 'bold',\n        fontSize: theme.typography.fontSize,\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2),\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth,\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: 'center',\n        marginRight: theme.spacing(1),\n      },\n      closedItemIcon: {\n        width: '100%',\n        justifyContent: 'center',\n      },\n      submenuArrow: {\n        display: 'flex',\n      },\n      expandButton: {\n        background: 'none',\n        border: 'none',\n        color: theme.palette.navigation.color,\n        width: '100%',\n        cursor: 'pointer',\n        position: 'relative',\n        height: 48,\n      },\n      arrows: {\n        position: 'absolute',\n        right: 10,\n      },\n      selected: {\n        '&$root': {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor,\n        },\n        '&$closed': {\n          width: sidebarConfig.drawerWidthClosed,\n        },\n        '& $closedItemIcon': {\n          paddingRight: sidebarConfig.selectedIndicatorWidth,\n        },\n        '& $iconContainer': {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth,\n        },\n      },\n    }),\n    { name: 'BackstageSidebarItem' },\n  );\n\n// This is a workaround for this issue https://github.com/mui/material-ui/issues/15511\n// The styling of the `selected` elements doesn't work as expected when using a prop callback.\n// Don't use this pattern unless needed\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig],\n  );\n  return useStyles();\n}\n\n/**\n * Evaluates the routes of the SubmenuItems & nested DropdownItems.\n * The reeveluation is only triggered, if the `locationPathname` changes, as `useElementFilter` uses memorization.\n *\n * @param submenu SidebarSubmenu component\n * @param location Location\n * @returns boolean\n */\nconst useLocationMatch = (\n  submenu,\n  location,\n) =>\n  useElementFilter(\n    submenu.props.children,\n    elements => {\n      let active = false;\n      elements\n        .getElements()\n        .forEach(\n          ({\n            props: { to, dropdownItems },\n          }\n\n) => {\n            if (!active) {\n              if (dropdownItems?.length) {\n                dropdownItems.forEach(\n                  ({ to: _to }) =>\n                    (active =\n                      active || isLocationMatch(location, resolvePath(_to))),\n                );\n                return;\n              }\n              if (to) {\n                active = isLocationMatch(location, resolvePath(to));\n              }\n            }\n          },\n        );\n      return active;\n    },\n    [location.pathname],\n  );\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isButtonItem(\n  props,\n) {\n  return (props ).to === undefined;\n}\n\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\n\n// TODO(Rugvip): Remove this once NavLink is updated in react-router-dom.\n//               This is needed because react-router doesn't handle the path comparison\n//               properly yet, matching for example /foobar with /foo.\nexport const WorkaroundNavLink = React.forwardRef\n\n\n(function WorkaroundNavLinkWithRef(\n  {\n    to,\n    end,\n    style,\n    className,\n    activeStyle,\n    caseSensitive,\n    activeClassName = 'active',\n    'aria-current': ariaCurrentProp = 'page',\n    ...rest\n  },\n  ref,\n) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath(to);\n\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase('en-US');\n    toPathname = toPathname.toLocaleLowerCase('en-US');\n  }\n\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    // This is the behavior that is different from the original NavLink\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n\n  const ariaCurrent = isActive ? ariaCurrentProp : undefined;\n\n  return (\n    React.createElement(Link, {\n      ...rest,\n      to: to,\n      ref: ref,\n      'aria-current': ariaCurrent,\n      style: { ...style, ...(isActive ? activeStyle : undefined) },\n      className: classnames([\n        className,\n        isActive ? activeClassName : undefined,\n      ]),}\n    )\n  );\n});\n\n/**\n * Common component used by SidebarItem & SidebarItemWithSubmenu\n */\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  // XXX (@koroeskohr): unsure this is optimal. But I just really didn't want to have the item component\n  // depend on the current location, and at least have it being optionally forced to selected.\n  // Still waiting on a Q answered to fine tune the implementation\n  const { isOpen } = useSidebarOpenState();\n\n  const divStyle =\n    !isOpen && hasSubmenu ? { display: 'flex', marginLeft: '24px' } : {};\n\n  const displayItemIcon = (\n    React.createElement('div', { style: divStyle,}\n      , React.createElement(Icon, { fontSize: \"small\",} )\n      , !isOpen && hasSubmenu ? React.createElement(ArrowRightIcon, null ) : React.createElement(React.Fragment, null)\n    )\n  );\n\n  const itemIcon = (\n    React.createElement(Badge, {\n      color: \"secondary\",\n      variant: \"dot\",\n      overlap: \"circular\",\n      invisible: !hasNotifications,\n      className: classnames({ [classes.closedItemIcon]: !isOpen }),}\n    \n      , displayItemIcon\n    )\n  );\n\n  const openContent = (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { 'data-testid': \"login-button\", className: classes.iconContainer,}\n        , itemIcon\n      )\n      , text && (\n        React.createElement(Typography, { variant: \"subtitle2\", className: classes.label,}\n          , text\n        )\n      )\n      , React.createElement('div', { className: classes.secondaryAction,}, children)\n    )\n  );\n\n  const content = isOpen ? openContent : itemIcon;\n\n  const childProps = {\n    onClick,\n    className: classnames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight },\n    ),\n  };\n\n  if (isButtonItem(props)) {\n    return (\n      React.createElement('button', { 'aria-label': text, ...childProps, ref: ref,}\n        , content\n      )\n    );\n  }\n\n  return (\n    React.createElement(WorkaroundNavLink, {\n      ...childProps,\n      activeClassName: classes.selected,\n      to: props.to ? props.to : '',\n      ref: ref,\n      'aria-label': text ? text : props.to,\n      ...navLinkProps,}\n    \n      , content\n    )\n  );\n});\n\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}\n\n) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery((theme) =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? (\n        React.createElement(ArrowDropUp, { fontSize: \"small\", className: classes.submenuArrow,} )\n      ) : (\n        React.createElement(ArrowDropDown, { fontSize: \"small\", className: classes.submenuArrow,} )\n      );\n    }\n    return (\n      !isHoveredOn && (\n        React.createElement(ArrowRightIcon, { fontSize: \"small\", className: classes.submenuArrow,} )\n      )\n    );\n  };\n\n  return (\n    React.createElement(SidebarItemWithSubmenuContext.Provider, {\n      value: {\n        isHoveredOn,\n        setIsHoveredOn,\n      },}\n    \n      , React.createElement('div', {\n        'data-testid': \"item-with-submenu\",\n        onMouseLeave: handleMouseLeave,\n        onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n        onMouseEnter: handleMouseEnter,\n        className: classnames(isHoveredOn && classes.highlighted),}\n      \n        , React.createElement(SidebarItemBase, {\n          hasSubmenu: true,\n          className: isActive ? classes.selected : '',\n          ...props,}\n        \n          , arrowIcon()\n        )\n        , isHoveredOn && children\n      )\n    )\n  );\n};\n\n/**\n * Creates a `SidebarItem`\n *\n * If children contain a `SidebarSubmenu` component the `SidebarItem` will have a expandable submenu\n */\nexport const SidebarItem = forwardRef((props, ref) => {\n  // Filter children for SidebarSubmenu components\n  const [submenu] = useElementFilter(props.children, elements =>\n    // Directly comparing child.type with SidebarSubmenu will not work with in\n    // combination with react-hot-loader\n    //\n    // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n    elements.getElements().filter(child => child.type === sidebarSubmenuType),\n  );\n\n  if (submenu) {\n    return (\n      React.createElement(SidebarItemWithSubmenu, { ...props,}\n        , submenu \n      )\n    );\n  }\n\n  return React.createElement(SidebarItemBase, { ...props, ref: ref,} );\n}) ;\n\n\n\n\n\n\n\nexport function SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState('');\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n\n  const search = () => {\n    props.onSearch(input);\n    setInput('');\n  };\n\n  const handleEnter = ev => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      search();\n    }\n  };\n\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n\n  const handleInputClick = (ev) => {\n    // Clicking into the search fields shouldn't navigate to the search page\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n\n  const handleItemClick = (ev) => {\n    // Clicking on the search icon while should execute a query with the current field content\n    search();\n    ev.preventDefault();\n  };\n\n  return (\n    React.createElement('div', { className: classes.searchRoot,}\n      , React.createElement(SidebarItem, {\n        icon: Icon,\n        to: props.to,\n        onClick: handleItemClick,\n        disableHighlight: true,}\n      \n        , React.createElement(TextField, {\n          placeholder: \"Search\",\n          value: input,\n          onClick: handleInputClick,\n          onChange: handleInput,\n          onKeyDown: handleEnter,\n          className: classes.searchContainer,\n          InputProps: {\n            disableUnderline: true,\n            className: classes.searchField,\n          },\n          inputProps: {\n            className: classes.searchFieldHTMLInput,\n          },}\n        )\n      )\n    )\n  );\n}\n\n\n\nexport const SidebarSpace = styled('div')(\n  {\n    flex: 1,\n  },\n  { name: 'BackstageSidebarSpace' },\n) ;\n\n\n\nexport const SidebarSpacer = styled('div')(\n  {\n    height: 8,\n  },\n  { name: 'BackstageSidebarSpacer' },\n) ;\n\n\n\nexport const SidebarDivider = styled('hr')(\n  {\n    height: 1,\n    width: '100%',\n    background: '#383838',\n    border: 'none',\n    margin: '12px 0px',\n  },\n  { name: 'BackstageSidebarDivider' },\n) ;\n\nconst styledScrollbar = (theme) => ({\n  overflowY: 'auto',\n  '&::-webkit-scrollbar': {\n    backgroundColor: theme.palette.background.default,\n    width: '5px',\n    borderRadius: '5px',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: '5px',\n  },\n});\n\nexport const SidebarScrollWrapper = styled('div')(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: '0 1 auto',\n    overflowX: 'hidden',\n    // 5px space to the right of the scrollbar\n    width: 'calc(100% - 5px)',\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: '48px',\n    overflowY: 'hidden',\n    '@media (hover: none)': scrollbarStyles,\n    '&:hover': scrollbarStyles,\n  };\n}) ;\n\n/**\n * A button which allows you to expand the sidebar when clicked.\n * Use optionally to replace sidebar's expand-on-hover feature with expand-on-click.\n *\n * If you are using this you might want to set the `disableExpandOnHover` of the `Sidebar` to `true`.\n *\n * @public\n */\nexport const SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    theme => theme.breakpoints.down('md'),\n    { noSsr: true },\n  );\n\n  if (isSmallScreen) {\n    return null;\n  }\n\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n\n  return (\n    React.createElement('button', {\n      onClick: handleClick,\n      className: classes.expandButton,\n      'aria-label': \"Expand Sidebar\" ,\n      'data-testid': \"sidebar-expand-button\",}\n    \n      , React.createElement('div', { className: classes.arrows,}\n        , isOpen ? React.createElement(DoubleArrowLeft, null ) : React.createElement(DoubleArrowRight, null )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Collapse from '@material-ui/core/Collapse';\nimport Link from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { useContext, useState } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport {\n  SidebarConfigContext,\n\n  SIDEBAR_INTRO_LOCAL_STORAGE,\n} from './config';\nimport { SidebarDivider } from './Items';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    introCard: props => ({\n      color: '#b5b5b5',\n      // XXX (@koroeskohr): should I be using a Mui theme variable?\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: 18,\n      marginBottom: 12,\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding,\n    }),\n    introDismiss: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      alignItems: 'center',\n      marginTop: 12,\n    },\n    introDismissLink: {\n      color: '#dddddd',\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: 4,\n      '&:hover': {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create('color', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest,\n        }),\n      },\n    },\n    introDismissText: {\n      fontSize: '0.7rem',\n      fontWeight: 'bold',\n      textTransform: 'uppercase',\n      letterSpacing: 1,\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: 12,\n    },\n  }),\n  { name: 'BackstageSidebarIntro' },\n);\n\n\n\n\n\n\n/**\n * Closable card with information from Navigation Sidebar\n *\n * @public\n *\n */\n\nexport function IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n\n  return (\n    React.createElement('div', { className: classes.introCard,}\n      , React.createElement(Typography, { variant: \"subtitle2\",}, text)\n      , React.createElement('div', { className: classes.introDismiss,}\n        , React.createElement(Link, {\n          component: \"button\",\n          onClick: handleClose,\n          underline: \"none\",\n          className: classes.introDismissLink,}\n        \n          , React.createElement(CloseIcon, { className: classes.introDismissIcon,} )\n          , React.createElement(Typography, { component: \"span\", className: classes.introDismissText,}, \"Dismiss\"\n\n          )\n        )\n      )\n    )\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return (\n    React.createElement(Collapse, { in: !collapsing, onExited: onDismiss,}\n      , React.createElement(IntroCard, { text: text, onClose: startDismissing,} )\n    )\n  );\n};\n\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon () next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText =\n  'And your recently viewed plugins will pop up here!';\n\nexport function SidebarIntro(_props) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false,\n  };\n  const [dismissedIntro, setDismissedIntro] =\n    useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } =\n    dismissedIntro ?? {};\n\n  const dismissStarred = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true,\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true,\n    }));\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , !starredItemsDismissed && (\n        React.createElement(React.Fragment, null\n          , React.createElement(SidebarIntroCard, {\n            text: starredIntroText,\n            onDismiss: dismissStarred,}\n          )\n          , React.createElement(SidebarDivider, null )\n        )\n      )\n      , !recentlyViewedItemsDismissed && (\n        React.createElement(SidebarIntroCard, {\n          text: recentlyViewedIntroText,\n          onDismiss: dismissRecentlyViewed,}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { } from 'react';\nimport { useContent } from '../Sidebar';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: 'pageContent',\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n    },\n    stretch: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n    },\n    noPadding: {\n      padding: 0,\n    },\n  }),\n  { name: 'BackstageContent' },\n);\n\n\n\n\n\n\n\n/**\n * The main content part inside a {@link Page}.\n *\n * @public\n *\n */\n\nexport function Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n\n  const { contentRef } = useContent();\n\n  const classes = useStyles();\n  return (\n    React.createElement('article', {\n      ref: contentRef,\n      tabIndex: -1,\n      ...restProps,\n      className: classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding,\n      }),}\n    \n      , children\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO(blam): Remove this implementation when the Tabs are ready\n// This is just a temporary solution to implementing tabs for now\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport TabUI, { } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport React, { useEffect, useState } from 'react';\n\n/** @public */\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    tabsWrapper: {\n      gridArea: 'pageSubheader',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0,\n    },\n    defaultTab: {\n      padding: theme.spacing(3, 3),\n      ...theme.typography.caption,\n      textTransform: 'uppercase',\n      fontWeight: 'bold',\n      color: theme.palette.text.secondary,\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n    tabRoot: {\n      '&:hover': {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary,\n      },\n    },\n  }),\n  { name: 'BackstageHeaderTabs' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Horizontal Tabs component\n *\n * @public\n *\n */\nexport function HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex ?? 0);\n  const styles = useStyles();\n\n  const handleChange = (_, index) => {\n    if (selectedIndex === undefined) {\n      setSelectedTab(index);\n    }\n    if (onChange) onChange(index);\n  };\n\n  useEffect(() => {\n    if (selectedIndex !== undefined) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n\n  return (\n    React.createElement('div', { className: styles.tabsWrapper,}\n      , React.createElement(Tabs, {\n        selectionFollowsFocus: true,\n        indicatorColor: \"primary\",\n        textColor: \"inherit\",\n        variant: \"scrollable\",\n        scrollButtons: \"auto\",\n        'aria-label': \"scrollable auto tabs example\"   ,\n        onChange: handleChange,\n        value: selectedTab,}\n      \n        , tabs.map((tab, index) => (\n          React.createElement(TabUI, {\n            ...tab.tabProps,\n            'data-testid': `header-tab-${index}`,\n            label: tab.label,\n            key: tab.id,\n            value: index,\n            className: styles.defaultTab,\n            classes: { selected: styles.selected, root: styles.tabRoot },}\n          )\n        ))\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useMemo } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { matchRoutes, useNavigate, useParams, useRoutes } from 'react-router';\nimport { Content } from '../../layout/Content';\nimport { HeaderTabs } from '../../layout/HeaderTabs';\n\n\nexport function useSelectedSubRoute(subRoutes)\n\n\n\n {\n  const params = useParams();\n\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children,\n  }));\n\n  // TODO: remove once react-router updated\n  const sortedRoutes = routes.sort((a, b) =>\n    // remove \"/*\" symbols from path end before comparing\n    b.path.replace(/\\/\\*$/, '').localeCompare(a.path.replace(/\\/\\*$/, '')),\n  );\n\n  const element = useRoutes(sortedRoutes) ?? subRoutes[0].children;\n\n  const [matchedRoute] = matchRoutes(sortedRoutes, `/${params['*']}`) ?? [];\n  const foundIndex = matchedRoute\n    ? subRoutes.findIndex(t => `${t.path}/*` === matchedRoute.route.path)\n    : 0;\n\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: subRoutes[foundIndex] ?? subRoutes[0],\n  };\n}\n\nexport function RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () =>\n      routes.map(t => ({\n        id: t.path,\n        label: t.title,\n        tabProps: t.tabProps,\n      })),\n    [routes],\n  );\n\n  const onTabChange = (tabIndex) =>\n    // Remove trailing /*\n    // And remove leading / for relative navigation\n    // Note! route resolves relative to the position in the React tree,\n    // not relative to current location\n    navigate(routes[tabIndex].path.replace(/\\/\\*$/, '').replace(/^\\//, ''));\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(HeaderTabs, {\n        tabs: headerTabs,\n        selectedIndex: index,\n        onChange: onTabChange,}\n      )\n      , React.createElement(Content, null\n        , React.createElement(Helmet, { title: route.title,} )\n        , element\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { attachComponentData } from '@backstage/core-plugin-api';\nimport React, {\n  Children,\n  Fragment,\n  isValidElement,\n\n\n} from 'react';\nimport { RoutedTabs } from './RoutedTabs';\n\n\n\n\n\n\n\n\n\nconst Route = () => null;\n\n// This causes all mount points that are discovered within this route to use the path of the route itself\nattachComponentData(Route, 'core.gatherMountPoints', true);\n\nexport function createSubRoutesFromChildren(\n  childrenProps,\n) {\n  // Directly comparing child.type with Route will not work with in\n  // combination with react-hot-loader in storybook\n  // https://github.com/gaearon/react-hot-loader/issues/304\n  const routeType = (\n    React.createElement(Route, { path: \"\", title: \"\",}\n      , React.createElement('div', null )\n    )\n  ).type;\n\n  return Children.toArray(childrenProps).flatMap(child => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n\n    if (child.type !== routeType) {\n      throw new Error('Child of TabbedLayout must be an TabbedLayout.Route');\n    }\n\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\n\n/**\n * TabbedLayout is a compound component, which allows you to define a layout for\n * pages using a sub-navigation mechanism.\n *\n * Consists of two parts: TabbedLayout and TabbedLayout.Route\n *\n * @example\n * ```jsx\n * <TabbedLayout>\n *   <TabbedLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </TabbedLayout.Route>\n * </TabbedLayout>\n * ```\n */\nexport function TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n\n  return React.createElement(RoutedTabs, { routes: routes,} );\n}\n\nTabbedLayout.Route = Route;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\n\n\nconst useSubvalueCellStyles = makeStyles(\n  theme => ({\n    value: {\n      marginBottom: '6px',\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: 'normal',\n    },\n  }),\n  { name: 'BackstageSubvalueCell' },\n);\n\n\n\n\n\n\nexport function SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { className: classes.value,}, value)\n      , React.createElement('div', { className: classes.subvalue,}, subvalue)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { Select } from '../Select';\n\n\n\n\nconst useFilterStyles = makeStyles(\n  theme => ({\n    root: {\n      height: '100%',\n      width: '315px',\n      display: 'flex',\n      flexDirection: 'column',\n      marginRight: theme.spacing(3),\n    },\n    value: {\n      fontWeight: 'bold',\n      fontSize: 18,\n    },\n    header: {\n      display: 'flex',\n      alignItems: 'center',\n      height: '60px',\n      justifyContent: 'space-between',\n      borderBottom: `1px solid ${theme.palette.grey[500]}`,\n    },\n    filters: {\n      display: 'flex',\n      flexDirection: 'column',\n      '& > *': {\n        marginTop: theme.spacing(2),\n      },\n    },\n  }),\n  { name: 'BackstageTableFilters' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const Filters = (props) => {\n  const classes = useFilterStyles();\n\n  const { onChangeFilters } = props;\n\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters,\n  });\n  const [reset, triggerReset] = useState(false);\n\n  // Trigger re-rendering\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset(el => !el);\n  };\n\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n\n  // As material table doesn't provide a way to add a column filter tab we will make our own filter logic\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement('div', { className: classes.header,}\n        , React.createElement('div', { className: classes.value,}, \"Filters\")\n        , React.createElement(Button, { color: \"primary\", onClick: handleClick,}, \"Clear all\"\n\n        )\n      )\n      , React.createElement('div', { className: classes.filters,}\n        , props.filters?.length &&\n          props.filters.map(filter => (\n            React.createElement(Select, {\n              triggerReset: reset,\n              key: filter.element.label,\n              ...(filter.element ),\n              selected: selectedFilters[filter.element.label],\n              onChange: el =>\n                setSelectedFilters({\n                  ...selectedFilters,\n                  [filter.element.label]: el ,\n                })\n              ,}\n            )\n          ))\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles, useTheme, withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n// Material-table is not using the standard icons available in in material-ui. https://github.com/mbrn/material-table/issues/51\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { isEqual, transform } from 'lodash';\nimport MTable, {\n\n\n\n  MTableBody,\n  MTableHeader,\n  MTableToolbar,\n\n} from '@material-table/core';\nimport React, {\n  forwardRef,\n\n\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\nimport { Filters, } from './Filters';\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => React.createElement(AddBox, { ...props, ref: ref,} )),\n  Check: forwardRef((props, ref) => React.createElement(Check, { ...props, ref: ref,} )),\n  Clear: forwardRef((props, ref) => React.createElement(Clear, { ...props, ref: ref,} )),\n  Delete: forwardRef((props, ref) => React.createElement(DeleteOutline, { ...props, ref: ref,} )),\n  DetailPanel: forwardRef((props, ref) => (\n    React.createElement(ChevronRight, { ...props, ref: ref,} )\n  )),\n  Edit: forwardRef((props, ref) => React.createElement(Edit, { ...props, ref: ref,} )),\n  Export: forwardRef((props, ref) => React.createElement(SaveAlt, { ...props, ref: ref,} )),\n  Filter: forwardRef((props, ref) => React.createElement(FilterList, { ...props, ref: ref,} )),\n  FirstPage: forwardRef((props, ref) => React.createElement(FirstPage, { ...props, ref: ref,} )),\n  LastPage: forwardRef((props, ref) => React.createElement(LastPage, { ...props, ref: ref,} )),\n  NextPage: forwardRef((props, ref) => React.createElement(ChevronRight, { ...props, ref: ref,} )),\n  PreviousPage: forwardRef((props, ref) => (\n    React.createElement(ChevronLeft, { ...props, ref: ref,} )\n  )),\n  ResetSearch: forwardRef((props, ref) => React.createElement(Clear, { ...props, ref: ref,} )),\n  Search: forwardRef((props, ref) => React.createElement(FilterList, { ...props, ref: ref,} )),\n  SortArrow: forwardRef((props, ref) => React.createElement(ArrowUpward, { ...props, ref: ref,} )),\n  ThirdStateCheck: forwardRef((props, ref) => React.createElement(Remove, { ...props, ref: ref,} )),\n  ViewColumn: forwardRef((props, ref) => React.createElement(ViewColumn, { ...props, ref: ref,} )),\n};\n\n// TODO: Material table might already have such a function internally that we can use?\nfunction extractValueByField(data, field) {\n  const path = field.split('.');\n  let value = data[path[0]];\n\n  for (let i = 1; i < path.length; ++i) {\n    if (value === undefined) {\n      return value;\n    }\n\n    const f = path[i];\n    value = value[f];\n  }\n\n  return value;\n}\n\n\n\nconst StyledMTableHeader = withStyles(\n  theme => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      color: (theme ).palette.textSubtle,\n      fontWeight: theme.typography.fontWeightBold,\n      position: 'static',\n      wordBreak: 'normal',\n    },\n  }),\n  { name: 'BackstageTableHeader' },\n)(MTableHeader);\n\n\n\nconst StyledMTableToolbar = withStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5),\n    },\n    title: {\n      '& > h6': {\n        fontWeight: 'bold',\n      },\n    },\n    searchField: {\n      paddingRight: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageTableToolbar' },\n)(MTableToolbar);\n\n/** @public */\n\n\nconst useFilterStyles = makeStyles(\n  () => ({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n    },\n    title: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      whiteSpace: 'nowrap',\n    },\n  }),\n  { name: 'BackstageTableFiltersContainer' },\n);\n\n\n\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: 'flex',\n      alignItems: 'start',\n    },\n  }),\n  { name: 'BackstageTable' },\n);\n\nfunction convertColumns(\n  columns,\n  theme,\n) {\n  return columns.map(column => {\n    const headerStyle = {};\n\n    let cellStyle = column.cellStyle || {};\n\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n\n      if (typeof cellStyle === 'object') {\n        (cellStyle ).fontWeight =\n          theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle \n\n\n\n;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n\n    return {\n      ...column,\n      headerStyle,\n      cellStyle,\n    };\n  });\n}\n\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\n\nconst defaultInitialState = {\n  search: '',\n  filtersOpen: false,\n  filters: {},\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function TableToolbar(toolbarProps\n\n\n\n\n\n\n) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters,\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch],\n  );\n\n  if (hasFilters) {\n    return (\n      React.createElement('div', { className: filtersClasses.root,}\n        , React.createElement('div', { className: filtersClasses.root,}\n          , React.createElement(IconButton, { onClick: toggleFilters, 'aria-label': \"filter list\" ,}\n            , React.createElement(FilterList, null )\n          )\n          , React.createElement(Typography, { className: filtersClasses.title,}, \"Filters (\"\n             , selectedFiltersLength, \")\"\n          )\n        )\n        , React.createElement(StyledMTableToolbar, {\n          ...toolbarProps,\n          ref: toolbarRef,\n          onSearchChanged: onSearchChanged,}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(StyledMTableToolbar, {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged: onSearchChanged,}\n    )\n  );\n}\n\nexport function Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n\n  const theme = useTheme();\n\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen,\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen(v => !v),\n    [setFiltersOpen],\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data );\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters,\n  );\n\n  const MTColumns = convertColumns(columns, theme);\n\n  const [search, setSearch] = useState(calculatedInitialState.search);\n\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters,\n        },\n        defaultInitialState,\n      );\n\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: 'uppercase',\n    },\n  };\n\n  const getFieldByTitle = useCallback(\n    (titleValue) =>\n      columns.find(el => el.title === titleValue)?.field,\n    [columns],\n  );\n\n  useEffect(() => {\n    if (typeof data === 'function') {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data );\n      return;\n    }\n\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = (data ).filter(\n        el =>\n          !!Object.entries(selectedFilters)\n            .filter(([, value]) => !!value.length)\n            .every(([key, filterValue]) => {\n              const fieldValue = extractValueByField(\n                el,\n                getFieldByTitle(key) ,\n              );\n\n              if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n                return fieldValue.some(v => filterValue.includes(v));\n              } else if (Array.isArray(fieldValue)) {\n                return fieldValue.includes(filterValue);\n              } else if (Array.isArray(filterValue)) {\n                return filterValue.includes(fieldValue);\n              }\n\n              return fieldValue === filterValue;\n            }),\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data );\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n\n  const constructFilters = (\n    filterConfig,\n    dataValue,\n  ) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = new Set();\n      const addValue = (value) => {\n        if (value !== undefined && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n\n      if (dataValue) {\n        dataValue.forEach(el => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field) ,\n          );\n\n          if (Array.isArray(value)) {\n            (value ).forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n\n      return distinctValues;\n    };\n\n    const constructSelect = (\n      filter,\n    ) => {\n      return {\n        placeholder: 'All results',\n        label: filter.column,\n        multiple: filter.type === 'multiple-select',\n        items: [...extractDistinctValues(filter.column)].sort().map(value => ({\n          label: value,\n          value,\n        })),\n      };\n    };\n\n    return filterConfig.map(filter => ({\n      type: filter.type,\n      element: constructSelect(filter),\n    }));\n  };\n\n  const hasFilters = !!filters?.length;\n  const Toolbar = useCallback(\n    toolbarProps => {\n      return (\n        React.createElement(TableToolbar, {\n          setSearch: setSearch,\n          hasFilters: hasFilters,\n          selectedFiltersLength: selectedFiltersLength,\n          toggleFilters: toggleFilters,\n          ...toolbarProps,}\n        )\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch],\n  );\n\n  const hasNoRows = typeof data !== 'function' && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    bodyProps => {\n      if (emptyContent && hasNoRows) {\n        return (\n          React.createElement('tbody', null\n            , React.createElement('tr', null\n              , React.createElement('td', { colSpan: columnCount,}, emptyContent)\n            )\n          )\n        );\n      }\n\n      return React.createElement(MTableBody, { ...bodyProps,} );\n    },\n    [hasNoRows, emptyContent, columnCount],\n  );\n\n  return (\n    React.createElement('div', { className: tableClasses.root,}\n      , filtersOpen && data && typeof data !== 'function' && filters?.length && (\n        React.createElement(Filters, {\n          filters: constructFilters(filters, data ),\n          selectedFilters: selectedFilters,\n          onChangeFilters: setSelectedFilters,}\n        )\n      )\n      , React.createElement(MTable, {\n        components: {\n          Header: StyledMTableHeader,\n          Toolbar,\n          Body,\n        },\n        options: { ...defaultOptions, ...options },\n        columns: MTColumns,\n        icons: tableIcons,\n        title: \n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"h5\", component: \"h2\",}\n              , title\n            )\n            , subtitle && (\n              React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}\n                , subtitle\n              )\n            )\n          )\n        ,\n        data: typeof data === 'function' ? data : tableData,\n        style: { width: '100%' },\n        localization: { toolbar: { searchPlaceholder: 'Filter' } },\n        ...restProps,}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport Box from '@material-ui/core/Box';\n\n\n\n\n\n\nexport const TabPanel = (props) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    React.createElement('div', {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      'aria-labelledby': `scrollable-auto-tab-${index}`,\n      ...other,}\n    \n      , value === index && React.createElement(Box, { p: 3,}, children)\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  () => ({\n    root: {\n      color: '#6E6E6E',\n      overflow: 'visible',\n      fontSize: '1.5rem',\n      textAlign: 'center',\n      borderRadius: '50%',\n      backgroundColor: '#E6E6E6',\n      marginLeft: props => (props.isNext ? 'auto' : '0'),\n      marginRight: props => (props.isNext ? '0' : '10px'),\n      '&:hover': {\n        backgroundColor: '#E6E6E6',\n        opacity: '1',\n      },\n    },\n  }),\n  { name: 'BackstageTabIcon' },\n);\n\nexport const StyledIcon = (props) => {\n  const classes = useStyles(props);\n  const { ariaLabel, onClick } = props;\n  return (\n    React.createElement(IconButton, {\n      onClick: onClick,\n      className: classes.root,\n      size: \"small\",\n      disableRipple: true,\n      disableFocusRipple: true,\n      'aria-label': ariaLabel,}\n    \n      , props.children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\n\n\n\n\n\n\n\n\n\n\nconst tabMarginLeft = (isFirstNav, isFirstIndex) => {\n  if (isFirstIndex) {\n    if (isFirstNav) {\n      return '20px';\n    }\n    return '0';\n  }\n  return '40px';\n};\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      textTransform: 'none',\n      height: '64px',\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.pxToRem(13),\n      color: theme.palette.textSubtle,\n      marginLeft: props =>\n        tabMarginLeft(\n          props.isFirstNav ,\n          props.isFirstIndex ,\n        ),\n      width: '130px',\n      minWidth: '130px',\n      '&:hover': {\n        outline: 'none',\n        backgroundColor: 'transparent',\n        color: theme.palette.textSubtle,\n      },\n    },\n  }),\n  { name: 'BackstageTab' },\n);\n\nexport const StyledTab = (props) => {\n  const classes = useStyles(props);\n  const { isFirstNav, isFirstIndex, ...rest } = props;\n  return React.createElement(Tab, { classes: classes, disableRipple: true, ...rest,} );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    indicator: {\n      display: 'flex',\n      justifyContent: 'center',\n      backgroundColor: theme.palette.tabbar.indicator,\n      height: '4px',\n    },\n    flexContainer: {\n      alignItems: 'center',\n    },\n    root: {\n      '&:last-child': {\n        marginLeft: 'auto',\n      },\n    },\n  }),\n  { name: 'BackstageTabBar' },\n);\n\nexport const StyledTabs = (props) => {\n  const classes = useStyles(props);\n  return (\n    React.createElement(Tabs, {\n      classes: classes,\n      ...props,\n      TabIndicatorProps: { children: React.createElement('span', null ) },}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport { chunkArray } from './utils';\nimport useWindowSize from 'react-use/lib/useWindowSize';\n\n/* Import Components */\n\nimport { TabPanel } from './TabPanel';\nimport { StyledIcon } from './TabIcon';\nimport { StyledTab } from './Tab';\nimport { StyledTabs } from './TabBar';\n\n/* Props Types */\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      flexGrow: 1,\n      width: '100%',\n    },\n    styledTabs: {\n      backgroundColor: theme.palette.background.paper,\n    },\n    appbar: {\n      boxShadow: 'none',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: '10px',\n      paddingRight: '10px',\n    },\n  }),\n  { name: 'BackstageTabs' },\n);\n\nexport function Tabs(props) {\n  const { tabs } = props;\n  const classes = useStyles();\n  const [value, setValue] = useState([0, 0]); // [selectedChunkedNavIndex, selectedIndex]\n  const [navIndex, setNavIndex] = useState(0);\n  const [numberOfChunkedElement, setNumberOfChunkedElement] = useState(0);\n  const [chunkedTabs, setChunkedTabs] = useState([[]]);\n  const wrapper = useRef() ;\n\n  const { width } = useWindowSize();\n\n  const handleChange = (_, newValue) => {\n    setValue([navIndex, newValue]);\n  };\n\n  const navigateToPrevChunk = () => {\n    setNavIndex(navIndex - 1);\n  };\n\n  const navigateToNextChunk = () => {\n    setNavIndex(navIndex + 1);\n  };\n\n  const hasNextNavIndex = () => navIndex + 1 < chunkedTabs.length;\n\n  useEffect(() => {\n    // Each time the window is resized we calculate how many tabs we can render given the window width\n    const padding = 20; // The AppBar padding\n\n    const numberOfTabIcons = navIndex === 0 ? 1 : 2;\n    const wrapperWidth =\n      wrapper.current.offsetWidth - padding - numberOfTabIcons * 30;\n    const flattenIndex = value[0] * numberOfChunkedElement + value[1];\n    const newChunkedElementSize = Math.floor(wrapperWidth / 170);\n\n    setNumberOfChunkedElement(newChunkedElementSize);\n    setChunkedTabs(chunkArray(tabs, newChunkedElementSize));\n    setValue([\n      Math.floor(flattenIndex / newChunkedElementSize),\n      flattenIndex % newChunkedElementSize,\n    ]);\n    // eslint-disable-next-line\n  }, [width, tabs]);\n\n  const currentIndex = navIndex === value[0] ? value[1] : false;\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(AppBar, { ref: wrapper, className: classes.appbar, position: \"static\",}\n        , React.createElement('div', null\n          , React.createElement(StyledTabs, {\n            value: currentIndex,\n            onChange: handleChange,\n            selectionFollowsFocus: true,}\n          \n            , navIndex !== 0 && (\n              React.createElement(StyledIcon, {\n                onClick: navigateToPrevChunk,\n                ariaLabel: \"navigate-before\",}\n              \n                , React.createElement(NavigateBeforeIcon, null )\n              )\n            )\n            , chunkedTabs[navIndex].map((tab, index) => (\n              React.createElement(StyledTab, {\n                value: index,\n                isFirstIndex: index === 0,\n                isFirstNav: navIndex === 0,\n                key: index,\n                icon: tab.icon || undefined,\n                label: tab.label || undefined,}\n              )\n            ))\n            , hasNextNavIndex() && (\n              React.createElement(StyledIcon, {\n                isNext: true,\n                onClick: navigateToNextChunk,\n                ariaLabel: \"navigate-next\",}\n              \n                , React.createElement(NavigateNextIcon, null )\n              )\n            )\n          )\n        )\n      )\n      , currentIndex !== false ? (\n        chunkedTabs[navIndex].map((tab, index) => (\n          React.createElement(TabPanel, { key: index, value: index, index: currentIndex,}\n            , tab.content\n          )\n        ))\n      ) : (\n        // Render if the selected tab index is outside the current rendered chunked array\n        React.createElement(TabPanel, {\n          key: \"panel_outside_chunked_array\",\n          value: value[1],\n          index: value[1],}\n        \n          , chunkedTabs[value[0]][value[1]].content\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Sparklines,\n  SparklinesLine,\n\n\n} from 'react-sparklines';\nimport { useTheme } from '@material-ui/core/styles';\n\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum) return undefined;\n  if (lastNum >= 0.9) return theme.palette.status.ok;\n  if (lastNum >= 0.5) return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\n\nexport function TrendLine(\n  props\n,\n) {\n  const theme = useTheme();\n\n  if (!props.data) return null;\n  return (\n    React.createElement(Sparklines, { width: 120, height: 30, min: 0, max: 1, ...props,}\n      , props.title && React.createElement('title', null, props.title)\n      , React.createElement(SparklinesLine, { color: props.color ?? color(props.data, theme),} )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * TODO favoriteable capability\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { } from 'react';\nimport { Helmet } from 'react-helmet';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = (props) =>\n  makeStyles(\n    theme => ({\n      container: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'flex-end',\n        alignItems: 'center',\n        marginBottom: theme.spacing(2),\n        textAlign: props.textAlign,\n      },\n      leftItemsBox: {\n        flex: '1 1 auto',\n        minWidth: 0,\n        overflow: 'visible',\n      },\n      rightItemsBox: {\n        flex: '0 1 auto',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        alignItems: 'center',\n        marginLeft: theme.spacing(1),\n        minWidth: 0,\n        overflow: 'visible',\n      },\n      description: {},\n      title: {\n        display: 'inline-flex',\n        marginBottom: 0,\n      },\n    }),\n    { name: 'BackstageContentHeader' },\n  );\n\n\n\n\n\n\nconst ContentHeaderTitle = ({\n  title = 'Unknown page',\n  className,\n}) => (\n  React.createElement(Typography, {\n    variant: \"h4\",\n    component: \"h2\",\n    className: className,\n    'data-testid': \"header-title\",}\n  \n    , title\n  )\n);\n\n\n\n\n\n\n\n\n/**\n *  A header at the top inside a {@link Content}.\n *\n * @public\n *\n */\n\nexport function ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = undefined,\n    children,\n    textAlign = 'left',\n  } = props;\n  const classes = useStyles({ textAlign })();\n\n  const renderedTitle = TitleComponent ? (\n    TitleComponent\n  ) : (\n    React.createElement(ContentHeaderTitle, { title: title, className: classes.title,} )\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Helmet, { title: title,} )\n      , React.createElement('div', { className: classes.container,}\n        , React.createElement('div', { className: classes.leftItemsBox,}\n          , renderedTitle\n          , description && (\n            React.createElement(Typography, { className: classes.description, variant: \"body2\",}\n              , description\n            )\n          )\n        )\n        , React.createElement('div', { className: classes.rightItemsBox,}, children)\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MicDropSvgUrl from './mic-drop.svg';\n\nconst useStyles = makeStyles(\n  theme => ({\n    micDrop: {\n      maxWidth: '60%',\n      position: 'absolute',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down('xs')]: {\n        maxWidth: '96%',\n        position: 'relative',\n        bottom: 'unset',\n        right: 'unset',\n        margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`,\n      },\n    },\n  }),\n  { name: 'BackstageErrorPageMicDrop' },\n);\n\n\n\nexport const MicDrop = () => {\n  const classes = useStyles();\n  return (\n    React.createElement('img', {\n      src: MicDropSvgUrl,\n      className: classes.micDrop,\n      alt: \"Girl dropping mic from her hands\"     ,}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { useNavigate } from 'react-router';\nimport { Link } from '../../components/Link';\nimport { useSupportConfig } from '../../hooks';\nimport { MicDrop } from './MicDrop';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down('xs')]: {\n        padding: theme.spacing(2),\n      },\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down('xs')]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: 32,\n      },\n    },\n    subtitle: {\n      color: theme.palette.textSubtle,\n    },\n  }),\n  { name: 'BackstageErrorPage' },\n);\n\n/**\n * Error page with status and description\n *\n * @public\n *\n */\nexport function ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n\n  return (\n    React.createElement(Grid, { container: true, spacing: 0, className: classes.container,}\n      , React.createElement(MicDrop, null )\n      , React.createElement(Grid, { item: true, xs: 12, sm: 8, md: 4,}\n        , React.createElement(Typography, {\n          'data-testid': \"error\",\n          variant: \"body1\",\n          className: classes.subtitle,}\n        , \"ERROR \"\n           , status, \": \" , statusMessage\n        )\n        , React.createElement(Typography, { variant: \"body1\", className: classes.subtitle,}\n          , additionalInfo\n        )\n        , React.createElement(Typography, { variant: \"h2\", className: classes.title,}, \"Looks like someone dropped the mic!\"\n\n        )\n        , React.createElement(Typography, { variant: \"h6\",}\n          , React.createElement(Link, { to: \"#\", 'data-testid': \"go-back-link\", onClick: () => navigate(-1),}, \"Go back\"\n\n          ), \"... or please\"\n            , ' '\n          , React.createElement(Link, { to: supportUrl || support.url,}, \"contact support\" ), \" if you think this is a bug.\"\n\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { Fragment } from 'react';\n\n\n\n\n\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      cursor: 'pointer',\n    },\n  },\n  { name: 'BackstageBreadcrumbsClickableText' },\n)(Typography);\n\n/** @public */\n\n\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      color: 'inherit',\n    },\n  },\n  { name: 'BackstageBreadcrumbsStyledBox' },\n)(Box);\n\n/**\n * Breadcrumbs component to show navigation hierarchical structure\n *\n * @public\n *\n */\nexport function Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null,\n  );\n\n  const childrenArray = React.Children.toArray(children);\n\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length\n    ? expandablePages.pop()\n    : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    React.createElement(Fragment, null\n      , React.createElement(MaterialBreadcrumbs, { 'aria-label': \"breadcrumb\", ...restProps,}\n        , childrenArray.length > 1 && React.createElement(StyledBox, { clone: true,}, firstPage)\n        , childrenArray.length > 2 && React.createElement(StyledBox, { clone: true,}, secondPage)\n        , hasHiddenBreadcrumbs && (\n          React.createElement(ClickableText, { onClick: handleClick,}, \"...\")\n        )\n        , React.createElement(Box, { style: { fontStyle: 'italic' },}, currentPage)\n      )\n      , React.createElement(Popover, {\n        open: open,\n        anchorEl: anchorEl,\n        onClose: handleClose,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'left',\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'left',\n        },}\n      \n        , React.createElement(List, null\n          , expandablePages.map((pageLink, index) => (\n            React.createElement(ListItem, { key: index, button: true,}\n              , React.createElement(StyledBox, { clone: true,}, pageLink)\n            )\n          ))\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport React, { } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Link } from '../../components/Link';\nimport { Breadcrumbs } from '../Breadcrumbs';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    header: {\n      gridArea: 'pageHeader',\n      padding: theme.spacing(3),\n      width: '100%',\n      boxShadow: theme.shadows[4],\n      position: 'relative',\n      zIndex: 100,\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      [theme.breakpoints.down('sm')]: {\n        flexWrap: 'wrap',\n      },\n    },\n    leftItemsBox: {\n      maxWidth: '100%',\n      flexGrow: 1,\n    },\n    rightItemsBox: {\n      width: 'auto',\n    },\n    title: {\n      color: theme.palette.bursts.fontColor,\n      wordBreak: 'break-word',\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0,\n    },\n    subtitle: {\n      color: theme.palette.bursts.fontColor,\n      opacity: 0.8,\n      display: 'inline-block', // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: '75ch',\n    },\n    type: {\n      textTransform: 'uppercase',\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.palette.bursts.fontColor,\n    },\n    breadcrumb: {\n      color: theme.palette.bursts.fontColor,\n    },\n    breadcrumbType: {\n      fontSize: 'inherit',\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3),\n    },\n    breadcrumbTitle: {\n      fontSize: 'inherit',\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageHeader' },\n);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle,\n}) => {\n  if (!type) {\n    return null;\n  }\n\n  if (!typeLink) {\n    return React.createElement(Typography, { className: classes.type,}, type);\n  }\n\n  return (\n    React.createElement(Breadcrumbs, { className: classes.breadcrumb,}\n      , React.createElement(Link, { to: typeLink,}, type)\n      , React.createElement(Typography, null, pageTitle)\n    )\n  );\n};\n\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const FinalTitle = (\n    React.createElement(Typography, { className: classes.title, variant: \"h1\",}\n      , pageTitle\n    )\n  );\n\n  if (!tooltip) {\n    return FinalTitle;\n  }\n\n  return (\n    React.createElement(Tooltip, { title: tooltip, placement: \"top-start\",}\n      , FinalTitle\n    )\n  );\n};\n\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n\n  if (typeof subtitle !== 'string') {\n    return React.createElement(React.Fragment, null, subtitle);\n  }\n\n  return (\n    React.createElement(Typography, {\n      className: classes.subtitle,\n      variant: \"subtitle2\",\n      component: \"span\",}\n    \n      , subtitle\n    )\n  );\n};\n/**\n * Backstage main header with abstract color background in multiple variants\n *\n * @public\n *\n */\nexport function Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink,\n  } = props;\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString('app.title') || 'Backstage';\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Helmet, { titleTemplate: titleTemplate, defaultTitle: defaultTitle,} )\n      , React.createElement('header', { style: style, className: classes.header,}\n        , React.createElement(Box, { className: classes.leftItemsBox,}\n          , React.createElement(TypeFragment, {\n            classes: classes,\n            type: type,\n            typeLink: typeLink,\n            pageTitle: pageTitle,}\n          )\n          , React.createElement(TitleFragment, {\n            classes: classes,\n            pageTitle: pageTitle,\n            tooltip: tooltip,}\n          )\n          , React.createElement(SubtitleFragment, { classes: classes, subtitle: subtitle,} )\n        )\n        , React.createElement(Grid, { container: true, className: classes.rightItemsBox, spacing: 4,}\n          , children\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { Link } from '../../components/Link';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      textAlign: 'left',\n    },\n    label: {\n      color: theme.palette.common.white,\n      fontWeight: 'bold',\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1,\n    },\n    value: {\n      color: 'rgba(255, 255, 255, 0.8)',\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1,\n    },\n  }),\n  { name: 'BackstageHeaderLabel' },\n);\n\n\n\n\n\n\nconst HeaderLabelContent = ({ value, className }) => (\n  React.createElement(Typography, { className: className,}, value)\n);\n\n\n\n\n\n\n\n/**\n * Additional label to main {@link Header}\n *\n * @public\n *\n */\nexport function HeaderLabel(props) {\n  const { label, value, url } = props;\n  const classes = useStyles();\n  const content = (\n    React.createElement(HeaderLabelContent, {\n      className: classes.value,\n      value: value || '<Unknown>',}\n    )\n  );\n  return (\n    React.createElement(Grid, { item: true,}\n      , React.createElement('span', { className: classes.root,}\n        , React.createElement(Typography, { className: classes.label,}, label)\n        , url ? React.createElement(Link, { to: url,}, content) : content\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { HeaderLabel } from '../HeaderLabel';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\nconst timeFormat = {\n  hour: '2-digit',\n  minute: '2-digit',\n};\n\n\n\n\n\n\nfunction getTimes(configApi) {\n  const d = new Date();\n  const lang = window.navigator.language;\n\n  const clocks = [];\n\n  if (!configApi.has('homepage.clocks')) {\n    return clocks;\n  }\n\n  const clockConfigs = configApi.getConfigArray('homepage.clocks');\n\n  for (const clock of clockConfigs) {\n    if (clock.has('label') && clock.has('timezone')) {\n      let label = clock.getString('label');\n\n      const options = {\n        timeZone: clock.getString('timezone'),\n        ...timeFormat,\n      };\n\n      try {\n        new Date().toLocaleString(lang, options);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `The timezone ${options.timeZone} is invalid. Defaulting to GMT`,\n        );\n        options.timeZone = 'GMT';\n        label = 'GMT';\n      }\n\n      const time = d.toLocaleTimeString(lang, options);\n      clocks.push({ time, label });\n    }\n  }\n  return clocks;\n}\n\n/**\n * Please use the HeaderWorldClock in the home plugin\n *\n * @public\n * @deprecated in favor of the HeaderWorldClock which is found in the to home plugin\n */\nexport function HomepageTimer(_props) {\n  const configApi = useApi(configApiRef);\n\n  const defaultTimes = [];\n  const [clocks, setTimes] = React.useState(defaultTimes);\n\n  React.useEffect(() => {\n    setTimes(getTimes(configApi));\n\n    const intervalId = setInterval(() => {\n      setTimes(getTimes(configApi));\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [configApi]);\n\n  if (clocks.length !== 0) {\n    return (\n      React.createElement(React.Fragment, null\n        , clocks.map(clock => (\n          React.createElement(HeaderLabel, {\n            label: clock.label,\n            value: clock.time,\n            key: clock.label,}\n          )\n        ))\n      )\n    );\n  }\n  return null;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createStyles, makeStyles, } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\n\n/** @public */\n\n\nconst styles = (theme) =>\n  createStyles({\n    root: {\n      color: theme.palette.common.white,\n      padding: theme.spacing(2, 2, 3),\n      backgroundImage: theme.palette.bursts.gradient.linear,\n      backgroundPosition: 0,\n      backgroundSize: 'inherit',\n    },\n  });\n\nconst useStyles = makeStyles(styles, { name: 'BackstageItemCardHeader' });\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A simple card header, rendering a default look for \"item cards\" - cards that\n * are arranged in a grid for users to select among several options.\n *\n * This component expects to be placed within a MUI <CardMedia>.\n *\n * Styles for the header can be overridden using the `classes` prop, e.g.:\n *\n * `<ItemCardHeader title=\"Hello\" classes={{ root: myClassName }} />`\n *\n * @public\n */\nexport function ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles(props);\n  return (\n    React.createElement('div', { className: classes.root,}\n      , subtitle && (\n        React.createElement(Typography, { variant: \"subtitle2\", component: \"h3\",}\n          , subtitle\n        )\n      )\n      , title && (\n        React.createElement(Typography, { variant: \"h6\", component: \"h4\",}\n          , title\n        )\n      )\n      , children\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Chip from '@material-ui/core/Chip';\nimport React, { } from 'react';\nimport { Button } from '../../components';\nimport { ItemCardHeader } from './ItemCardHeader';\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This card type has been deprecated. Instead use plain MUI Card and helpers\n * where appropriate.\n *\n * ```\n *   <Card>\n *     <CardMedia>\n *       <ItemCardHeader title=\"My Card\" subtitle=\"neat!\" />\n *     </CardMedia>\n *     <CardContent>\n *        Some text\n *     </CardContent>\n *     <CardActions>\n *       <Button color=\"primary\" to=\"https://backstage.io\">\n *         Get Started\n *       </Button>\n *     </CardActions>\n *   </Card>\n * ```\n *\n * @deprecated Use plain MUI `<Card>` and composable helpers instead.\n * @see https://material-ui.com/components/cards/\n */\nexport function ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } =\n    props;\n  return (\n    React.createElement(Card, null\n      , React.createElement(CardMedia, null\n        , React.createElement(ItemCardHeader, { title: title, subtitle: subtitle || type,} )\n      )\n      , React.createElement(CardContent, null\n        , tags?.length ? (\n          React.createElement(Box, null\n            , tags.map((tag, i) => (\n              React.createElement(Chip, { size: \"small\", label: tag, key: i,} )\n            ))\n          )\n        ) : null\n        , description\n      )\n      , React.createElement(CardActions, null\n        , !href && (\n          React.createElement(Button, { to: \"#\", onClick: onClick, color: \"primary\",}\n            , label\n          )\n        )\n        , href && (\n          React.createElement(Button, { to: href, color: \"primary\",}\n            , label\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createStyles,\n  makeStyles,\n\n\n} from '@material-ui/core/styles';\nimport React from 'react';\n\n/** @public */\n\n\nconst styles = (theme) =>\n  createStyles({\n    root: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fill, minmax(22em, 1fr))',\n      gridAutoRows: '1fr',\n      gridGap: theme.spacing(2),\n    },\n  });\n\nconst useStyles = makeStyles(styles, { name: 'BackstageItemCardGrid' });\n\n/** @public */\n\n\n\n\n\n\n\n/**\n * A default grid to use when arranging \"item cards\" - cards that let users\n * select among several options.\n *\n * The immediate children are expected to be MUI Card components.\n *\n * Styles for the grid can be overridden using the `classes` prop, e.g.:\n *\n * `<ItemCardGrid title=\"Hello\" classes={{ root: myClassName }} />`\n *\n * This can be useful for e.g. overriding gridTemplateColumns to adapt the\n * minimum size of the cells to fit the content better.\n *\n * @public\n */\nexport function ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return (\n    React.createElement('div', { className: classes.root, ...otherProps,}\n      , children\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport { useSidebarPinState } from '../Sidebar/SidebarPinStateContext';\n\n\n\nconst useStyles = makeStyles(\n  () => ({\n    root: ({ isMobile }) => ({\n      display: 'grid',\n      gridTemplateAreas:\n        \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: 'max-content auto 1fr',\n      gridTemplateColumns: 'auto 1fr auto',\n      height: isMobile ? '100%' : '100vh',\n      overflowY: 'auto',\n    }),\n  }),\n  { name: 'BackstagePage' },\n);\n\n\n\n\n\n\nexport function Page(props) {\n  const { themeId, children } = props;\n  const { isMobile } = useSidebarPinState();\n  const classes = useStyles({ isMobile });\n  return (\n    React.createElement(ThemeProvider, {\n      theme: (baseTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId }),\n      }),}\n    \n      , React.createElement('main', { className: classes.root,}, children)\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\nimport { Header } from '../Header';\nimport { Page } from './Page';\n\n\n\n\n\nexport function PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return (\n    React.createElement(Page, { themeId: themeId,}\n      , React.createElement(Header, { ...restProps,} )\n      , children\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { z } from 'zod';\n\nexport const proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional(),\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal('user'),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string()),\n    }),\n  }),\n});\n\n/**\n * Generic session information for proxied sign-in providers, e.g. common\n * reverse authenticating proxy implementations.\n *\n * @public\n */\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\nimport { proxiedSessionSchema } from './types';\n\nexport const DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1000,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1000,\n} ;\n\n// When the token expires, with some margin\nexport function tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n\n  const [_header, rawPayload, _signature] = jwtToken.split('.');\n  const payload = JSON.parse(atob(rawPayload));\n  if (typeof payload.exp !== 'number') {\n    return fallback;\n  }\n\n  return new Date(payload.exp * 1000 - DEFAULTS.tokenExpiryMarginMillis);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An identity API that gets the user auth information solely based on a\n * provider's `/refresh` endpoint.\n */\nexport class ProxiedSignInIdentity  {\n    options;\n    abortController;\n   state;\n\n  constructor(options) {\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: 'empty' };\n  }\n\n  async start() {\n    // Try to make a first fetch, bubble up any errors to the caller\n    await this.getSessionAsync();\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n\n    return match[3];\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token,\n    };\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    this.abortController.abort();\n  }\n\n  getSessionSync() {\n    if (this.state.type === 'active') {\n      return this.state.session;\n    } else if (this.state.type === 'fetching' && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error('No session available. Try reloading your browser page.');\n  }\n\n  async getSessionAsync() {\n    if (this.state.type === 'fetching') {\n      return this.state.promise;\n    } else if (\n      this.state.type === 'active' &&\n      new Date() < this.state.expiresAt\n    ) {\n      return this.state.session;\n    }\n\n    const previous =\n      this.state.type === 'active' ? this.state.session : undefined;\n\n    const promise = this.fetchSession().then(\n      session => {\n        this.state = {\n          type: 'active',\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token),\n        };\n        return session;\n      },\n      error => {\n        this.state = {\n          type: 'failed',\n          error,\n        };\n        throw error;\n      },\n    );\n\n    this.state = {\n      type: 'fetching',\n      promise,\n      previous,\n    };\n\n    return promise;\n  }\n\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl('auth');\n\n    // Note that we do not use the fetchApi here, since this all happens before\n    // sign-in completes so there can be no automatic token injection and\n    // similar.\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: { 'x-requested-with': 'XMLHttpRequest' },\n        credentials: 'include',\n      },\n    );\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  discoveryApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport React from 'react';\nimport { useAsync, useMountEffect } from '@react-hookz/web';\nimport { ErrorPanel } from '../../components/ErrorPanel';\nimport { Progress } from '../../components/Progress';\nimport { ProxiedSignInIdentity } from './ProxiedSignInIdentity';\n\n/**\n * Props for {@link ProxiedSignInPage}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * A sign-in page that has no user interface of its own. Instead, it relies on\n * sign-in being performed by a reverse authenticating proxy that Backstage is\n * deployed behind, and leverages its session handling.\n *\n * @remarks\n *\n * This sign-in page is useful when you are using products such as Google\n * Identity-Aware Proxy or AWS Application Load Balancer or similar, to front\n * your Backstage installation. This sign-in page implementation will silently\n * and regularly punch through the proxy to the auth backend to refresh your\n * frontend session information, without requiring user interaction.\n *\n * @public\n */\nexport const ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n    });\n\n    await identity.start();\n\n    props.onSignInSuccess(identity);\n  });\n\n  useMountEffect(execute);\n\n  if (status === 'loading') {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return (\n      React.createElement(ErrorPanel, {\n        title: \"You do not appear to be signed in. Please try reloading the browser page.\"             ,\n        error: error,}\n      )\n    );\n  }\n\n  return null;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class GuestUserIdentity  {\n  getUserId() {\n    return 'guest';\n  }\n\n  async getIdToken() {\n    return undefined;\n  }\n\n  getProfile() {\n    return {\n      email: 'guest@example.com',\n      displayName: 'Guest',\n    };\n  }\n\n  async getProfileInfo() {\n    return {\n      email: 'guest@example.com',\n      displayName: 'Guest',\n    };\n  }\n\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: 'user',\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef],\n    };\n  }\n\n  async getCredentials() {\n    return {};\n  }\n\n  async signOut() {}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split('.');\n  return JSON.parse(atob(payload));\n}\n\n\n\n\n\n\n\n\n/** @internal */\nexport class LegacyUserIdentity  {\n   constructor(  result) {;this.result = result;}\n\n  getUserId() {\n    return this.result.userId;\n  }\n\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n\n  async getIdToken() {\n    return this.result.getIdToken?.();\n  }\n\n  getProfile() {\n    return this.result.profile;\n  }\n\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: 'user',\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef],\n      };\n    }\n\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: 'user',\n      userEntityRef: sub,\n      ownershipEntityRefs: ent ?? [],\n    };\n  }\n\n  async getCredentials() {\n    const token = await this.result.getIdToken?.();\n    return { token };\n  }\n\n  async signOut() {\n    return this.result.signOut?.();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { GuestUserIdentity } from './GuestUserIdentity';\nimport { LegacyUserIdentity } from './LegacyUserIdentity';\n\n// TODO(Rugvip): This and the other IdentityApi implementations still implement\n//               the old removed methods. This is to allow for backwards compatibility\n//               with old plugins that still consume this API. We will leave these in\n//               place as a hidden compatibility for a couple of months.\n//               The AppIdentityProxy warns in case any of these methods are called.\n\n/**\n * An implementation of the IdentityApi that is constructed using\n * various backstage user identity representations.\n *\n * @public\n */\nexport class UserIdentity  {\n   profilePromise;\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options\n\n\n\n\n\n\n\n\n\n\n) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n\n   constructor(\n      identity,\n      authApi\n\n,\n      profile,\n  ) {;this.identity = identity;this.authApi = authApi;this.profile = profile;}\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n\n    return match[3];\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        'The identity API does not implement synchronous profile fetching, use getProfileInfo() instead',\n      );\n    }\n    return this.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n\n    try {\n      this.profilePromise = this.authApi.getProfile() ;\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = undefined;\n      throw ex;\n    }\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\n\n\n\nexport const useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: 'none',\n    },\n    item: {\n      display: 'flex',\n      flexDirection: 'column',\n      width: '100%',\n      maxWidth: '400px',\n      margin: 0,\n      padding: 0,\n    },\n  },\n  { name: 'BackstageSignInPage' },\n);\n\nexport const GridItem = ({ children }) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Grid, { component: \"li\", item: true, classes: classes,}\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { InfoCard } from '../InfoCard/InfoCard';\n\n\n\n\n\n\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\nimport { GridItem } from './styles';\nimport { ForwardedError } from '@backstage/errors';\nimport { UserIdentity } from './UserIdentity';\n\nconst Component = ({ config, onSignInSuccess }) => {\n  const { apiRef, title, message } = config ;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const handleLogin = async () => {\n    try {\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true,\n      });\n      if (!identityResponse) {\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`,\n        );\n      }\n\n      const profile = await authApi.getProfile();\n\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi,\n        }),\n      );\n    } catch (error) {\n      errorApi.post(new ForwardedError('Login failed', error));\n    }\n  };\n\n  return (\n    React.createElement(GridItem, null\n      , React.createElement(InfoCard, {\n        variant: \"fullHeight\",\n        title: title,\n        actions: \n          React.createElement(Button, { color: \"primary\", variant: \"outlined\", onClick: handleLogin,}, \"Sign In\"\n\n          )\n        ,}\n      \n        , React.createElement(Typography, { variant: \"body1\",}, message)\n      )\n    )\n  );\n};\n\nconst loader = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true,\n  });\n\n  if (!identityResponse) {\n    return undefined;\n  }\n\n  const profile = await authApi.getProfile();\n\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi,\n  });\n};\n\nexport const commonProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport { GridItem } from './styles';\n\nimport { GuestUserIdentity } from './GuestUserIdentity';\n\nconst Component = ({ onSignInSuccess }) => (\n  React.createElement(GridItem, null\n    , React.createElement(InfoCard, {\n      title: \"Guest\",\n      variant: \"fullHeight\",\n      actions: \n        React.createElement(Button, {\n          color: \"primary\",\n          variant: \"outlined\",\n          onClick: () => onSignInSuccess(new GuestUserIdentity()),}\n        , \"Enter\"\n\n        )\n      ,}\n    \n      , React.createElement(Typography, { variant: \"body1\",}, \"Enter as a Guest User.\"\n\n        , React.createElement('br', null ), \"You will not have a verified identity,\"\n\n        , React.createElement('br', null ), \"meaning some features might be unavailable.\"\n\n      )\n    )\n  )\n);\n\nconst loader = async () => {\n  return new GuestUserIdentity();\n};\n\nexport const guestProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useForm, } from 'react-hook-form';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\nimport { InfoCard } from '../InfoCard/InfoCard';\n\nimport { GridItem } from './styles';\nimport { UserIdentity } from './UserIdentity';\n\n// accept base64url format according to RFC7515 (https://tools.ietf.org/html/rfc7515#section-3)\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\n\n/** @public */\n\n\nconst useFormStyles = makeStyles(\n  theme => ({\n    form: {\n      display: 'flex',\n      flexFlow: 'column nowrap',\n    },\n    button: {\n      alignSelf: 'center',\n      marginTop: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageCustomProvider' },\n);\n\n\n\n\n\n\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest,\n  };\n};\n\nconst Component = ({ onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: 'onChange',\n  });\n\n  const { errors } = formState;\n\n  const handleResult = ({ userId }) => {\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        profile: {\n          email: `${userId}@example.com`,\n        },\n      }),\n    );\n  };\n\n  return (\n    React.createElement(GridItem, null\n      , React.createElement(InfoCard, { title: \"Custom User\" , variant: \"fullHeight\",}\n        , React.createElement(Typography, { variant: \"body1\",}, \"Enter your own User ID and credentials.\"\n\n          , React.createElement('br', null ), \"This selection will not be stored.\"\n\n        )\n\n        , React.createElement('form', { className: classes.form, onSubmit: handleSubmit(handleResult),}\n          , React.createElement(FormControl, null\n            , React.createElement(TextField, {\n              ...asInputRef(register('userId', { required: true })),\n              label: \"User ID\" ,\n              margin: \"normal\",\n              error: Boolean(errors.userId),}\n            )\n            , errors.userId && (\n              React.createElement(FormHelperText, { error: true,}, errors.userId.message)\n            )\n          )\n          , React.createElement(FormControl, null\n            , React.createElement(TextField, {\n              ...asInputRef(\n                register('idToken', {\n                  required: false,\n                  validate: token =>\n                    !token ||\n                    ID_TOKEN_REGEX.test(token) ||\n                    'Token is not a valid OpenID Connect JWT Token',\n                }),\n              ),\n              label: \"ID Token (optional)\"  ,\n              margin: \"normal\",\n              autoComplete: \"off\",\n              error: Boolean(errors.idToken),}\n            )\n            , errors.idToken && (\n              React.createElement(FormHelperText, { error: true,}, errors.idToken.message)\n            )\n          )\n          , React.createElement(Button, {\n            type: \"submit\",\n            color: \"primary\",\n            variant: \"outlined\",\n            className: classes.button,\n            disabled: !formState?.isDirty || !isEmpty(errors),}\n          , \"Continue\"\n\n          )\n        )\n      )\n    )\n  );\n};\n\n// Custom provider doesn't store credentials\nconst loader = async () => undefined;\n\nexport const customProvider = { Component, loader };\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Similar to the AppIdentityApi we provide backwards compatibility for a limited time\n\n\n\n\n\n\nexport class IdentityApiSignOutProxy  {\n   constructor(\n      config\n\n\n,\n  ) {;this.config = config;}\n\n  static from(config\n\n\n) {\n    return new IdentityApiSignOutProxy(config);\n  }\n\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n\n  signOut() {\n    return this.config.signOut();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useLayoutEffect, useState, useMemo, useCallback } from 'react';\nimport {\n\n  useApi,\n  useApiHolder,\n  errorApiRef,\n\n} from '@backstage/core-plugin-api';\n\n\n\n\n\nimport { commonProvider } from './commonProvider';\nimport { guestProvider } from './guestProvider';\nimport { customProvider } from './customProvider';\nimport { IdentityApiSignOutProxy } from './IdentityApiSignOutProxy';\n\nconst PROVIDER_STORAGE_KEY = '@backstage/core:SignInPage:provider';\n\n\n\n\n\n\n\n\n\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider,\n};\n\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`,\n    );\n}\n\nexport function getSignInProviders(\n  identityProviders,\n) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === 'string') {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n\n        return acc;\n      }\n\n      const { id } = config ;\n      validateIDs(id, acc);\n\n      acc[id] = { components: signInProviders.common, id, config };\n\n      return acc;\n    },\n    {},\n  );\n\n  return providers;\n}\n\nexport const useSignInProviders = (\n  providers,\n  onSignInSuccess,\n) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n\n  // This decorates the result with sign out logic from this hook\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await identityApi.signOut?.();\n          },\n        }),\n      );\n    },\n    [onSignInSuccess],\n  );\n\n  // In this effect we check if the user has already selected an existing login\n  // provider, and in that case try to load an existing session for the provider.\n  useLayoutEffect(() => {\n    if (!loading) {\n      return undefined;\n    }\n\n    // We can't use storageApi here, as it might have a dependency on the IdentityApi\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY,\n    ) ;\n\n    // No provider selected, let the user pick one\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return undefined;\n    }\n\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return undefined;\n    }\n\n    let didCancel = false;\n\n    provider.components\n      .loader(apiHolder, provider.config?.apiRef)\n      .then(result => {\n        if (didCancel) {\n          return;\n        }\n        if (result) {\n          handleWrappedResult(result);\n        } else {\n          setLoading(false);\n        }\n      })\n      .catch(error => {\n        if (didCancel) {\n          return;\n        }\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        errorApi.post(error);\n        setLoading(false);\n      });\n\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult,\n  ]);\n\n  // This renders all available sign-in providers\n  const elements = useMemo(\n    () =>\n      Object.keys(providers).map(key => {\n        const provider = providers[key];\n\n        const { Component } = provider.components;\n\n        const handleSignInSuccess = (result) => {\n          localStorage.setItem(PROVIDER_STORAGE_KEY, provider.id);\n\n          handleWrappedResult(result);\n        };\n\n        return (\n          React.createElement(Component, {\n            key: provider.id,\n            config: provider.config,\n            onSignInSuccess: handleSignInSuccess,}\n          )\n        );\n      }),\n    [providers, handleWrappedResult],\n  );\n\n  return [loading, elements];\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  configApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { UserIdentity } from './UserIdentity';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useState } from 'react';\nimport { useMountEffect } from '@react-hookz/web';\nimport { Progress } from '../../components/Progress';\nimport { Content } from '../Content/Content';\nimport { ContentHeader } from '../ContentHeader/ContentHeader';\nimport { Header } from '../Header';\nimport { InfoCard } from '../InfoCard';\nimport { Page } from '../Page';\nimport { getSignInProviders, useSignInProviders } from './providers';\nimport { GridItem, useStyles } from './styles';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = 'left',\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess,\n  );\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, { title: configApi.getString('app.title'),} )\n      , React.createElement(Content, null\n        , title && React.createElement(ContentHeader, { title: title, textAlign: align,} )\n        , React.createElement(Grid, {\n          container: true,\n          justifyContent: align === 'center' ? align : 'flex-start',\n          spacing: 2,\n          component: \"ul\",\n          classes: classes,}\n        \n          , providerElements\n        )\n      )\n    )\n  );\n};\n\nexport const SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess,\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n\n  const [error, setError] = useState();\n\n  // The SignIn component takes some time to decide whether the user is logged-in or not.\n  // showLoginPage is used to prevent a glitch-like experience where the sign-in page is\n  // displayed for a split second when the user is already logged-in.\n  const [showLoginPage, setShowLoginPage] = useState(false);\n\n  \n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        // Do an initial check if any logged-in session exists\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true,\n        });\n      }\n\n      // If no session exists, show the sign-in page\n      if (!identityResponse && (showPopup || auto)) {\n        // Unless auto is set to true, this step should not happen.\n        // When user intentionally clicks the Sign In button, autoShowPopup is set to true\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true,\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`,\n          );\n        }\n      }\n\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile,\n        }),\n      );\n    } catch (err) {\n      // User closed the sign-in modal\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n\n  useMountEffect(() => login({ checkExisting: true }));\n\n  return showLoginPage ? (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, { title: configApi.getString('app.title'),} )\n      , React.createElement(Content, null\n        , React.createElement(Grid, {\n          container: true,\n          justifyContent: \"center\",\n          spacing: 2,\n          component: \"ul\",\n          classes: classes,}\n        \n          , React.createElement(GridItem, null\n            , React.createElement(InfoCard, {\n              variant: \"fullHeight\",\n              title: provider.title,\n              actions: \n                React.createElement(Button, {\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  onClick: () => {\n                    login({ showPopup: true });\n                  },}\n                , \"Sign In\"\n\n                )\n              ,}\n            \n              , React.createElement(Typography, { variant: \"body1\",}, provider.message)\n              , error && error.name !== 'PopupRejectedError' && (\n                React.createElement(Typography, { variant: \"body1\", color: \"error\",}\n                  , error.message\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  ) : (\n    React.createElement(Progress, null )\n  );\n};\n\nexport function SignInPage(props) {\n  if ('provider' in props) {\n    return React.createElement(SingleSignInPage, { ...props,} );\n  }\n\n  return React.createElement(MultiSignInPage, { ...props,} );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Tab, { } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport React, {\n\n\n\n  useState,\n} from 'react';\nimport { BottomLink, } from '../BottomLink';\nimport { ErrorBoundary, } from '../ErrorBoundary';\n\n\n\nconst useTabsStyles = makeStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3),\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageTabbedCard' },\n);\n\n/** @public */\n\n\nconst BoldHeader = withStyles(\n  theme => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: 'inline-block' },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) },\n  }),\n  { name: 'BackstageTabbedCardBoldHeader' },\n)(CardHeader);\n\n\n\n\n\n\n\n\n\n\n\n\nexport function TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange,\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n\n  const handleChange = onChange\n    ? onChange\n    : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, child => {\n      if (React.isValidElement(child) && child?.props.value === value) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  }\n\n  const errProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    React.createElement(Card, null\n      , React.createElement(ErrorBoundary, { ...errProps,}\n        , title && React.createElement(BoldHeader, { title: title,} )\n        , React.createElement(Tabs, {\n          selectionFollowsFocus: true,\n          classes: tabsClasses,\n          value: value || selectedIndex,\n          onChange: handleChange,}\n        \n          , children\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(CardContent, null, selectedTabContent)\n        , deepLink && React.createElement(BottomLink, { ...deepLink,} )\n      )\n    )\n  );\n}\n\n/** @public */\n\n\nconst useCardTabStyles = makeStyles(\n  theme => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: 'none',\n      '&:hover': {\n        opacity: 1,\n        backgroundColor: 'transparent',\n        color: theme.palette.text.primary,\n      },\n    },\n    selected: {\n      fontWeight: 'bold',\n    },\n  }),\n  { name: 'BackstageCardTab' },\n);\n\n\n\n\n\n/**\n * Card tab component used in {@link TabbedCard}\n *\n * @public\n *\n */\nexport function CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n\n  return React.createElement(Tab, { disableRipple: true, classes: classes, ...restProps,} );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, { useContext } from 'react';\n\n\nconst AnalyticsReactContext = createVersionedContext\n\n('analytics-context');\n\n/**\n * A \"private\" (to this package) hook that enables context inheritance and a\n * way to read Analytics Context values at event capture-time.\n *\n * @internal\n */\nexport const useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n\n  // Provide a default value if no value exists.\n  if (theContext === undefined) {\n    return {\n      routeRef: 'unknown',\n      pluginId: 'root',\n      extension: 'App',\n    };\n  }\n\n  // This should probably never happen, but check for it.\n  const theValue = theContext.atVersion(1);\n  if (theValue === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return theValue;\n};\n\n/**\n * Provides components in the child react tree an Analytics Context, ensuring\n * all analytics events captured within the context have relevant attributes.\n *\n * @remarks\n *\n * Analytics contexts are additive, meaning the context ultimately emitted with\n * an event is the combination of all contexts in the parent tree.\n *\n * @alpha\n */\nexport const AnalyticsContext = (options\n\n\n) => {\n  const { attributes, children } = options;\n\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes,\n  };\n\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return (\n    React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue,}\n      , children\n    )\n  );\n};\n\n/**\n * Returns an HOC wrapping the provided component in an Analytics context with\n * the given values.\n *\n * @param Component - Component to be wrapped with analytics context attributes\n * @param values - Analytics context key/value pairs.\n * @internal\n */\nexport function withAnalyticsContext(\n  Component,\n  values,\n) {\n  const ComponentWithAnalyticsContext = (props) => {\n    return (\n      React.createElement(AnalyticsContext, { attributes: values,}\n        , React.createElement(Component, { ...props,} )\n      )\n    );\n  };\n  ComponentWithAnalyticsContext.displayName = `WithAnalyticsContext(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n  return ComponentWithAnalyticsContext;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class Tracker  {\n  constructor(\n      analyticsApi,\n     context = {\n      routeRef: 'unknown',\n      pluginId: 'root',\n      extension: 'App',\n    },\n  ) {;this.analyticsApi = analyticsApi;this.context = context;}\n\n  setContext(context) {\n    this.context = context;\n  }\n\n  captureEvent(\n    action,\n    subject,\n    {\n      value,\n      attributes,\n    } = {},\n  ) {\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context: this.context,\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn('Error during analytics event capture. %o', e);\n    }\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useAnalyticsContext } from './AnalyticsContext';\nimport {\n  analyticsApiRef,\n\n\n  useApi,\n} from '../apis';\nimport { useRef } from 'react';\nimport { Tracker } from './Tracker';\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {} };\n  }\n}\n\n/**\n * Gets a pre-configured analytics tracker.\n *\n * @alpha\n */\nexport function useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  // Our goal is to make this API truly optional for any/all consuming code\n  // (including tests). This hook runs last to ensure hook order is, as much as\n  // possible, maintained.\n  const analyticsApi = useAnalyticsApi();\n\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n\n  const tracker = getTracker();\n  tracker.setContext(context);\n\n  return tracker;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n\n/**\n * This file contains declarations for common interfaces of auth-related APIs.\n * The declarations should be used to signal which type of authentication and\n * authorization methods each separate auth provider supports.\n *\n * For example, a Google OAuth provider that supports OAuth 2 and OpenID Connect,\n * would be declared as follows:\n *\n * const googleAuthApiRef = createApiRef<OAuthApi & OpenIDConnectApi>({ ... })\n */\n\n/**\n * Information about the auth provider.\n *\n * @remarks\n *\n * This information is used both to connect the correct auth provider in the backend, as\n * well as displaying the provider to the user.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Session state values passed to subscribers of the SessionApi.\n *\n * @public\n */\nexport var SessionState; (function (SessionState) {\n  /**\n   * User signed in.\n   */\n  const SignedIn = 'SignedIn'; SessionState[\"SignedIn\"] = SignedIn;\n  /**\n   * User not signed in.\n   */\n  const SignedOut = 'SignedOut'; SessionState[\"SignedOut\"] = SignedOut;\n})(SessionState || (SessionState = {}));\n\n/**\n * The SessionApi provides basic controls for any auth provider that is tied to a persistent session.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Provides authentication towards Google APIs and identities.\n *\n * @public\n * @remarks\n *\n * See {@link https://developers.google.com/identity/protocols/googlescopes} for a full list of supported scopes.\n *\n * Note that the ID token payload is only guaranteed to contain the user's numerical Google ID,\n * email and expiration information. Do not rely on any other fields, as they might not be present.\n */\nexport const googleAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.google',\n});\n\n/**\n * Provides authentication towards GitHub APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/}\n * for a full list of supported scopes.\n */\nexport const githubAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.github',\n});\n\n/**\n * Provides authentication towards Okta APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://developer.okta.com/docs/guides/implement-oauth-for-okta/scopes/}\n * for a full list of supported scopes.\n */\nexport const oktaAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.okta',\n});\n\n/**\n * Provides authentication towards GitLab APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html#limiting-scopes-of-a-personal-access-token}\n * for a full list of supported scopes.\n */\nexport const gitlabAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.gitlab',\n});\n\n/**\n * Provides authentication towards Microsoft APIs and identities.\n *\n * @public\n * @remarks\n *\n * For more info and a full list of supported scopes, see:\n * - {@link https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent}\n * - {@link https://docs.microsoft.com/en-us/graph/permissions-reference}\n */\nexport const microsoftAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.microsoft',\n});\n\n/**\n * Provides authentication towards OneLogin APIs.\n *\n * @public\n */\nexport const oneloginAuthApiRef\n\n\n\n\n\n = createApiRef({\n  id: 'core.auth.onelogin',\n});\n\n/**\n * Provides authentication towards Bitbucket APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://support.atlassian.com/bitbucket-cloud/docs/use-oauth-on-bitbucket-cloud/}\n * for a full list of supported scopes.\n */\nexport const bitbucketAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.bitbucket',\n});\n\n/**\n * Provides authentication towards Atlassian APIs.\n *\n * @public\n * @remarks\n *\n * See {@link https://developer.atlassian.com/cloud/jira/platform/scopes-for-connect-and-oauth-2-3LO-apps/}\n * for a full list of supported scopes.\n */\nexport const atlassianAuthApiRef\n\n = createApiRef({\n  id: 'core.auth.atlassian',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef, } from '../system';\n\n\n/**\n * Message handled by the {@link AlertApi}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link AlertApi}.\n *\n * @public\n */\nexport const alertApiRef = createApiRef({\n  id: 'core.alert',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Represents an event worth tracking in an analytics system that could inform\n * how users of a Backstage instance are using its features.\n *\n * @alpha\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * **EXPERIMENTAL**\n *\n * The {@link ApiRef} of {@link AnalyticsApi}.\n *\n * @alpha\n */\nexport const analyticsApiRef = createApiRef({\n  id: 'core.analytics',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Describes a theme provided by the app.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link AppThemeApi}.\n *\n * @public\n */\nexport const appThemeApiRef = createApiRef({\n  id: 'core.apptheme',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '../system';\n\n\n/**\n * The Config API is used to provide a mechanism to access the\n * runtime configuration of the system.\n *\n * @public\n */\n\n\n/**\n * The {@link ApiRef} of {@link ConfigApi}.\n *\n * @public\n */\nexport const configApiRef = createApiRef({\n  id: 'core.config',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '../system';\n\n/**\n * The discovery API is used to provide a mechanism for plugins to\n * discover the endpoint to use to talk to their backend counterpart.\n *\n * @remarks\n *\n * The purpose of the discovery API is to allow for many different deployment\n * setups and routing methods through a central configuration, instead\n * of letting each individual plugin manage that configuration.\n *\n * Implementations of the discovery API can be a simple as a URL pattern\n * using the pluginId, but could also have overrides for individual plugins,\n * or query a separate discovery service.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link DiscoveryApi}.\n *\n * @public\n */\nexport const discoveryApiRef = createApiRef({\n  id: 'core.discovery',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Mirrors the JavaScript Error class, for the purpose of\n * providing documentation and optional fields.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link ErrorApi}.\n *\n * @public\n */\nexport const errorApiRef = createApiRef({\n  id: 'core.error',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n/**\n * Feature flag descriptor.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Enum representing the state of a feature flag (inactive/active).\n *\n * @public\n */\nexport var FeatureFlagState; (function (FeatureFlagState) {\n  /**\n   * Feature flag inactive (disabled).\n   */\n  const None = 0; FeatureFlagState[FeatureFlagState[\"None\"] = None] = \"None\";\n  /**\n   * Feature flag active (enabled).\n   */\n  const Active = 1; FeatureFlagState[FeatureFlagState[\"Active\"] = Active] = \"Active\";\n})(FeatureFlagState || (FeatureFlagState = {}));\n\n/**\n * Options to use when saving feature flags.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link FeatureFlagsApi}.\n *\n * @public\n */\nexport const featureFlagsApiRef = createApiRef({\n  id: 'core.featureflags',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n/**\n * A wrapper for the fetch API, that has additional behaviors such as the\n * ability to automatically inject auth information where necessary.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link FetchApi}.\n *\n * @remarks\n *\n * This is a wrapper for the fetch API, that has additional behaviors such as\n * the ability to automatically inject auth information where necessary.\n *\n * @public\n */\nexport const fetchApiRef = createApiRef({\n  id: 'core.fetch',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '../system';\n\n\n/**\n * The Identity API used to identify and get information about the signed in user.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link IdentityApi}.\n *\n * @public\n */\nexport const identityApiRef = createApiRef({\n  id: 'core.identity',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '../system';\n\n\n/**\n * Describes how to handle auth requests. Both how to show them to the user, and what to do when\n * the user accesses the auth request.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link OAuthRequestApi}.\n *\n * @public\n */\nexport const oauthRequestApiRef = createApiRef({\n  id: 'core.oauthrequest',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '../system';\n\n\n/**\n * A snapshot in time of the current known value of a storage key.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The {@link ApiRef} of {@link StorageApi}.\n *\n * @public\n */\nexport const storageApiRef = createApiRef({\n  id: 'core.storage',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * API reference configuration - holds an ID of the referenced API.\n *\n * @public\n */\n\n\n\n\nclass ApiRefImpl {\n  constructor(  config) {;this.config = config;\n    const valid = config.id\n      .split('.')\n      .flatMap(part => part.split('-'))\n      .every(part => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`,\n      );\n    }\n  }\n\n  get id() {\n    return this.config.id;\n  }\n\n  // Utility for getting type of an api, using `typeof apiRef.T`\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\n\n/**\n * Creates a reference to an API.\n *\n * @param config - The descriptor of the API to reference.\n * @returns An API reference.\n * @public\n */\nexport function createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Used to infer types for a standalone {@link ApiFactory} that isn't immediately passed\n * to another function.\n *\n * @remarks\n *\n * This function doesn't actually do anything, it's only used to infer types.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Used to infer types for a standalone {@link ApiFactory} that isn't immediately passed\n * to another function.\n *\n * @remarks\n *\n * Creates factory from {@link ApiRef} or returns the factory itself if provided.\n *\n * @param factory - Existing factory or {@link ApiRef}.\n * @param instance - The instance to be returned by the factory.\n * @public\n */\nexport function createApiFactory\n\n\n\n(\n  factory,\n  instance,\n) {\n  if ('id' in factory) {\n    return {\n      api: factory,\n      deps: {} ,\n      factory: () => instance,\n    };\n  }\n  return factory;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\nimport { useVersionedContext } from '@backstage/version-bridge';\n\n/**\n * React hook for retrieving {@link ApiHolder}, an API catalog.\n *\n * @public\n */\nexport function useApiHolder() {\n  const versionedHolder = useVersionedContext('api-context');\n  if (!versionedHolder) {\n    throw new Error('API context is not available');\n  }\n\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error('ApiContext v1 not available');\n  }\n  return apiHolder;\n}\n\n/**\n * React hook for retrieving APIs.\n *\n * @param apiRef - Reference of the API to use.\n * @public\n */\nexport function useApi(apiRef) {\n  const apiHolder = useApiHolder();\n\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\n\n/**\n * Wrapper for giving component an API context.\n *\n * @param apis - APIs for the context.\n * @public\n */\nexport function withApis(apis) {\n  return function withApisWrapper(\n    WrappedComponent,\n  ) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n\n      const impls = {} ;\n\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n\n      return React.createElement(WrappedComponent, { ...(props ), ...impls,} );\n    };\n    const displayName =\n      WrappedComponent.displayName || WrappedComponent.name || 'Component';\n\n    Hoc.displayName = `withApis(${displayName})`;\n\n    return Hoc;\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useVersionedContext } from '@backstage/version-bridge';\n\n\n/**\n * React hook providing {@link AppContext}.\n *\n * @public\n */\nexport const useApp = () => {\n  const versionedContext = useVersionedContext(\n    'app-context',\n  );\n  if (!versionedContext) {\n    throw new Error('App context is not available');\n  }\n\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error('AppContext v1 not available');\n  }\n  return appContext;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n\n\n\n\n// This method of storing the component data was deprecated in September 2021, it\n// will be removed in the future for the reasons described below.\nconst globalStore = getOrCreateGlobalSingleton(\n  'component-data-store',\n  () => new WeakMap(),\n);\n\n// This key is used to attach component data to the component type (function or class)\n// itself. This method is used because it has better compatibility component wrappers\n// like react-hot-loader, as opposed to the WeakMap method or using a symbol.\nconst componentDataKey = '__backstage_data';\n\n\n\n\n\n\n\n\n\n/**\n * Stores data related to a component in a global store.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#component-data}.\n *\n * @param component - The component to attach the data to.\n * @param type - The key under which the data will be stored.\n * @param data - Arbitrary value.\n * @public\n */\nexport function attachComponentData(\n  component,\n  type,\n  data,\n) {\n  const dataComponent = component ;\n\n  let container = dataComponent[componentDataKey] ?? globalStore.get(component);\n  if (!container) {\n    container = { map: new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container,\n    });\n    globalStore.set(component, container);\n  }\n\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`,\n    );\n  }\n\n  container.map.set(type, data);\n}\n\n/**\n * Retrieves data attached to a component.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#component-data}.\n *\n * @param node - React component to look up.\n * @param type - Key of the data to retrieve.\n * @returns Data stored using {@link attachComponentData}.\n * @public\n */\nexport function getComponentData(\n  node,\n  type,\n) {\n  if (!node) {\n    return undefined;\n  }\n\n  const component = (node ).type;\n  if (!component) {\n    return undefined;\n  }\n\n  const container = component[componentDataKey] ?? globalStore.get(component);\n  if (!container) {\n    return undefined;\n  }\n\n  return container.map.get(type) ;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\n\n\n\n\n\n\n\n\n\nexport class PluginErrorBoundary extends React.Component {\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  state = { error: undefined };\n\n  handleErrorReset = () => {\n    this.setState({ error: undefined });\n  };\n\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n\n    if (error) {\n      return (\n        React.createElement(ErrorBoundaryFallback, {\n          error: error,\n          resetError: this.handleErrorReset,\n          plugin: plugin,}\n        )\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { lazy, Suspense } from 'react';\nimport { AnalyticsContext } from '../analytics/AnalyticsContext';\nimport { useApp } from '../app';\nimport { useRouteRef } from '../routing';\nimport { attachComponentData } from './componentData';\n\nimport { PluginErrorBoundary } from './PluginErrorBoundary';\n\n/**\n * Lazy or synchronous retrieving of extension components.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Extension for components that can have its own URL route (top-level pages, tabs etc.).\n *\n * @remarks\n *\n * We do not use ComponentType as the return type, since it doesn't let us convey the children prop.\n * ComponentType inserts children as an optional prop whether the inner component accepts it or not,\n * making it impossible to make the usage of children type safe.\n *\n * See {@link https://backstage.io/docs/plugins/composability#extensions}.\n *\n * @public\n */\nexport function createRoutableExtension\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () =>\n        component().then(\n          InnerComponent => {\n            const RoutableExtensionWrapper = (props) => {\n              // Validate that the routing is wired up correctly in the App.tsx\n              try {\n                useRouteRef(mountPoint);\n              } catch (error) {\n                if (typeof error === 'object' && error !== null) {\n                  const { message } = error ;\n                  if (\n                    typeof message === 'string' &&\n                    message.startsWith('No path for ')\n                  ) {\n                    throw new Error(\n                      `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. ` +\n                        'Routable extension components may not be rendered by other components and must be ' +\n                        'directly available as an element within the App provider component.',\n                    );\n                  }\n                }\n                throw error;\n              }\n              return React.createElement(InnerComponent, { ...props,} );\n            };\n\n            const componentName =\n              name ||\n              (InnerComponent ).displayName ||\n              InnerComponent.name ||\n              'LazyComponent';\n\n            RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n\n            return RoutableExtensionWrapper ;\n          },\n          error => {\n            const RoutableExtensionWrapper = (_) => {\n              const app = useApp();\n              const { BootErrorPage } = app.getComponents();\n\n              return React.createElement(BootErrorPage, { step: \"load-chunk\", error: error,} );\n            };\n            return RoutableExtensionWrapper;\n          },\n        ),\n    },\n    data: {\n      'core.mountPoint': mountPoint,\n    },\n    name,\n  });\n}\n\n/**\n * Plain React component extension.\n *\n * @remarks\n *\n * We do not use ComponentType as the return type, since it doesn't let us convey the children prop.\n * ComponentType inserts children as an optional prop whether the inner component accepts it or not,\n * making it impossible to make the usage of children type safe.\n *\n * See {@link https://backstage.io/docs/plugins/composability#extensions}.\n *\n * @public\n */\nexport function createComponentExtension\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\n\n/**\n * Used by {@link createComponentExtension} and {@link createRoutableExtension}.\n *\n * @remarks\n *\n * We do not use ComponentType as the return type, since it doesn't let us convey the children prop.\n * ComponentType inserts children as an optional prop whether the inner component accepts it or not,\n * making it impossible to make the usage of children type safe.\n *\n * See {@link https://backstage.io/docs/plugins/composability#extensions}.\n *\n * @public\n */\nexport function createReactExtension\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  const { data = {}, name } = options;\n  if (!name) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'Declaring extensions without name is DEPRECATED. ' +\n        'Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.',\n    );\n  }\n\n  let Component;\n  if ('lazy' in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(() =>\n      lazyLoader().then(component => ({ default: component })),\n    ) ;\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName =\n    name ||\n    (Component ).displayName ||\n    Component.name ||\n    'Component';\n\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        // todo(iamEAP): Account for situations where this is attached via\n        // separate calls to attachComponentData().\n        const mountPoint = data?.['core.mountPoint'] \n\n;\n\n        return (\n          React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n            , React.createElement(PluginErrorBoundary, { app: app, plugin: plugin,}\n              , React.createElement(AnalyticsContext, {\n                attributes: {\n                  pluginId: plugin.getId(),\n                  ...(name && { extension: name }),\n                  ...(mountPoint && { routeRef: mountPoint.id }),\n                },}\n              \n                , React.createElement(Component, { ...props,} )\n              )\n            )\n          )\n        );\n      };\n\n      attachComponentData(Result, 'core.plugin', plugin);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Children,\n  Fragment,\n  isValidElement,\n\n\n  useMemo,\n} from 'react';\nimport { getComponentData } from './componentData';\nimport { useApi, featureFlagsApiRef } from '../apis';\n\nfunction selectChildren(\n  rootNode,\n  featureFlagsApi,\n  selector,\n  strictError,\n) {\n  return Children.toArray(rootNode).flatMap(node => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError,\n      );\n    }\n\n    if (getComponentData(node, 'core.featureFlagged')) {\n      const props = node.props ;\n      const isEnabled =\n        'with' in props\n          ? featureFlagsApi.isActive(props.with)\n          : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError,\n        );\n      }\n      return [];\n    }\n\n    if (selector === undefined || selector(node)) {\n      return [node];\n    }\n\n    if (strictError) {\n      throw new Error(strictError);\n    }\n\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError,\n    );\n  });\n}\n\n/**\n * A querying interface tailored to traversing a set of selected React elements\n * and extracting data.\n *\n * @remarks\n *\n * Methods prefixed with `selectBy` are used to narrow the set of selected elements.\n *\n * Methods prefixed with `find` return concrete data using a deep traversal of the set.\n *\n * Methods prefixed with `get` return concrete data using a shallow traversal of the set.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Collection  {\n  constructor(\n      node,\n      featureFlagsApi,\n  ) {;this.node = node;this.featureFlagsApi = featureFlagsApi;}\n\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      node => getComponentData(node, query.key) !== undefined,\n      query.withStrictError,\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      node => getComponentData(node, query.key) !== undefined,\n    );\n    return selection\n      .map(node => getComponentData(node, query.key))\n      .filter((data) => data !== undefined);\n  }\n\n  getElements()\n\n {\n    return selectChildren(this.node, this.featureFlagsApi) \n\n;\n  }\n}\n\n/**\n * useElementFilter is a utility that helps you narrow down and retrieve data\n * from a React element tree, typically operating on the `children` property\n * passed in to a component.\n *\n * @remarks\n *\n * A common use-case is to construct declarative APIs\n * where a React component defines its behavior based on its children, such as\n * the relationship between `Routes` and `Route` in `react-router`.\n *\n * The purpose of this hook is similar to `React.Children.map`, and it expands upon\n * it to also handle traversal of fragments and Backstage specific things like the\n * `FeatureFlagged` component.\n *\n * The return value of the hook is computed by the provided filter function, but\n * with added memoization based on the input `node`. If further memoization\n * dependencies are used in the filter function, they should be added to the\n * third `dependencies` argument, just like `useMemo`, `useEffect`, etc.\n *\n * @public\n */\nexport function useElementFilter(\n  node,\n  filterFn,\n  dependencies = [],\n) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @internal\n */\nexport class PluginImpl\n\n\n\n{\n  constructor(  config) {;this.config = config;}\n\n  getId() {\n    return this.config.id;\n  }\n\n  getApis() {\n    return this.config.apis ?? [];\n  }\n\n  getFeatureFlags() {\n    return this.config.featureFlags?.slice() ?? [];\n  }\n\n  get routes() {\n    return this.config.routes ?? ({} );\n  }\n\n  get externalRoutes() {\n    return this.config.externalRoutes ?? ({} );\n  }\n\n  provide(extension) {\n    return extension.expose(this);\n  }\n\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\n\n/**\n * Creates Backstage Plugin from config.\n *\n * @param config - Plugin configuration.\n * @public\n */\nexport function createPlugin\n\n\n(\n  config,\n) {\n  return new PluginImpl(config);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n/**\n * Catch-all type for route params.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This symbol is what we use at runtime to determine whether a given object\n * is a type of RouteRef or not. It doesn't work well in TypeScript though since\n * the `unique symbol` will refer to different values between package versions.\n * For that reason we use the marker $$routeRefType to represent the symbol at\n * compile-time instead of using the symbol directly.\n *\n * @internal\n */\nexport const routeRefType = getOrCreateGlobalSingleton(\n  'route-ref-type',\n  () => Symbol('route-ref-type'),\n);\n\n/**\n * Absolute route reference.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#routing-system}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  routeRefType,\n\n\n\n} from './types';\n\n/**\n * @internal\n */\nexport class RouteRefImpl\n\n{\n  // The marker is used for type checking while the symbol is used at runtime.\n  ;\n   [routeRefType] = 'absolute';\n\n  constructor(\n      id,\n     params,\n  ) {;this.id = id;this.params = params;}\n\n  get title() {\n    return this.id;\n  }\n\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n\n/**\n * Create a {@link RouteRef} from a route descriptor.\n *\n * @param config - Description of the route reference to be created.\n * @public\n */\nexport function createRouteRef\n\n\n\n\n\n\n\n(config\n\n\n\n\n) {\n  return new RouteRefImpl(\n    config.id,\n    (config.params ?? []) ,\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n\n\n  routeRefType,\n\n} from './types';\n\n// Should match the pattern in react-router\nconst PARAM_PATTERN = /^\\w+$/;\n\n/**\n * @internal\n */\nexport class SubRouteRefImpl\n\n{\n  // The marker is used for type checking while the symbol is used at runtime.\n  ;\n   [routeRefType] = 'sub';\n\n  constructor(\n      id,\n     path,\n     parent,\n     params,\n  ) {;this.id = id;this.path = path;this.parent = parent;this.params = params;}\n\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n\n/**\n * Used in {@link PathParams} type declaration.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Create a {@link SubRouteRef} from a route descriptor.\n *\n * @param config - Description of the route reference to be created.\n * @public\n */\nexport function createSubRouteRef\n\n\n(config\n\n\n\n) {\n  const { id, path, parent } = config;\n  \n\n  // Collect runtime parameters from the path, e.g. ['bar', 'baz'] from '/foo/:bar/:baz'\n  const pathParams = path\n    .split('/')\n    .filter(p => p.startsWith(':'))\n    .map(p => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n\n  if (parent.params.some(p => pathParams.includes(p ))) {\n    throw new Error(\n      'SubRouteRef may not have params that overlap with its parent',\n    );\n  }\n  if (!path.startsWith('/')) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith('/')) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n\n  // We ensure that the type of the return type is sane here\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params ,\n  ) ;\n\n  // But skip type checking of the return value itself, because the conditional\n  // type checking of the parent parameter overlap is tricky to express.\n  return subRouteRef ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  routeRefType,\n\n\n\n} from './types';\n\n/**\n * @internal\n */\nexport class ExternalRouteRefImpl\n\n\n\n{\n  // The marker is used for type checking while the symbol is used at runtime.\n  ;\n   [routeRefType] = 'external';\n\n  constructor(\n      id,\n     params,\n     optional,\n  ) {;this.id = id;this.params = params;this.optional = optional;}\n\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n\n/**\n * Creates a route descriptor, to be later bound to a concrete route by the app. Used to implement cross-plugin route references.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#routing-system}.\n *\n * @param options - Description of the route reference to be created.\n * @public\n */\nexport function createExternalRouteRef\n\n\n\n(options\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n) {\n  return new ExternalRouteRefImpl(\n    options.id,\n    (options.params ?? []) ,\n    Boolean(options.optional) ,\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useVersionedContext } from '@backstage/version-bridge';\n\n\n\n\n\n\n\n\n/**\n * @internal\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * React hook for constructing URLs to routes.\n *\n * @remarks\n *\n * See {@link https://backstage.io/docs/plugins/composability#routing-system}\n *\n * @param routeRef - The ref to route that should be converted to URL.\n * @returns A function that will in turn return the concrete URL of the `routeRef`.\n * @public\n */\nexport function useRouteRef(\n  routeRef\n\n\n,\n) {\n  const sourceLocation = useLocation();\n  const versionedContext = useVersionedContext(\n    'routing-context',\n  );\n  if (!versionedContext) {\n    throw new Error('Routing context is not available');\n  }\n\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, sourceLocation),\n    [resolver, routeRef, sourceLocation],\n  );\n\n  if (!versionedContext) {\n    throw new Error('useRouteRef used outside of routing context');\n  }\n  if (!resolver) {\n    throw new Error('RoutingContext v1 not available');\n  }\n\n  const isOptional = 'optional' in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n\n  return routeFunc;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useParams } from 'react-router-dom';\n\n\n/**\n * React hook for retrieving dynamic params from the current URL.\n * @param _routeRef - Ref of the current route.\n * @public\n */\nexport function useRouteRefParams(\n  _routeRef,\n) {\n  return useParams() ;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * An object that is shaped like an `Error`.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * Checks whether an unknown value is an {@link ErrorLike} object, which guarantees that it's\n * an object that has at least two string properties: a non-empty `name` and `message`.\n *\n * @public\n * @param value - an unknown value\n * @returns true if the value is an {@link ErrorLike} object, false otherwise\n */\nexport function isError(value) {\n  if (typeof value !== 'object' || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value ;\n  if (typeof maybe.name !== 'string' || maybe.name === '') {\n    return false;\n  }\n  if (typeof maybe.message !== 'string') {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Asserts that an unknown value is an {@link ErrorLike} object, which guarantees that it's\n * an object that has at least two string properties: a non-empty `name` and `message`.\n *\n * If the value is not an {@link ErrorLike} object, an error is thrown.\n *\n * @public\n * @param value - an unknown value\n */\nexport function assertError(value) {\n  if (typeof value !== 'object' || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value ;\n  if (typeof maybe.name !== 'string' || maybe.name === '') {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== 'string') {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`,\n    );\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  deserializeError as deserializeErrorInternal,\n  serializeError as serializeErrorInternal,\n} from 'serialize-error';\nimport { isError } from '../errors';\n\n/**\n * The serialized form of an Error.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Serializes an error object to a JSON friendly form.\n *\n * @public\n * @param error - The error.\n * @param options - Optional serialization options.\n */\nexport function serializeError(\n  error,\n  options\n\n\n,\n) {\n  const serialized = serializeErrorInternal(error);\n  const result = {\n    name: 'Unknown',\n    message: '<no reason given>',\n    ...serialized,\n  };\n\n  if (!options?.includeStack) {\n    delete result.stack;\n  }\n\n  return result;\n}\n\n/**\n * Deserializes a serialized error object back to an Error.\n *\n * @public\n */\nexport function deserializeError(\n  data,\n) {\n  const result = deserializeErrorInternal(data) ;\n  if (!data.stack) {\n    result.stack = undefined;\n  }\n  return result;\n}\n\n/**\n * Stringifies an error, including its name and message where available.\n *\n * @param error - The error.\n * @public\n */\nexport function stringifyError(error) {\n  if (isError(error)) {\n    // Prefer error.toString, but if it's not implemented we use a nicer fallback\n    const str = String(error);\n    return str !== '[object Object]' ? str : `${error.name}: ${error.message}`;\n  }\n\n  return `unknown error '${error}'`;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyError } from '../serialization';\nimport { isError } from './assertion';\n\n/**\n * A base class that custom Error classes can inherit from.\n *\n * @public\n * @example\n *```ts\n * class MyCustomError extends CustomErrorBase {}\n *\n * const e = new MyCustomError('Some message', cause);\n * // e.name === 'MyCustomError'\n * // e.message === 'Some message'\n * // e.cause === cause\n * // e.stack is set if the runtime supports it\n * ```\n */\nexport class CustomErrorBase extends Error {\n  /**\n   * An inner error that caused this error to be thrown, if any.\n   */\n   cause;\n\n  constructor(message, cause) {\n    let fullMessage = message;\n    if (cause !== undefined) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n\n    super(fullMessage);\n\n    Error.captureStackTrace?.(this, this.constructor);\n\n    this.name = this.constructor.name;\n    this.cause = isError(cause) ? cause : undefined;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isError } from './assertion';\nimport { CustomErrorBase } from './CustomErrorBase';\n\n/*\n * A set of common business logic errors.\n *\n * A backend error handler middleware would understand these and translate them\n * to well formed HTTP responses.\n *\n * While these are intentionally analogous to HTTP errors, they are not\n * intended to be thrown by the request handling layer. In those places, please\n * use e.g. the http-errors library.\n */\n\n/**\n * The given inputs are malformed and cannot be processed.\n *\n * @public\n */\nexport class InputError extends CustomErrorBase {}\n\n/**\n * The request requires authentication, which was not properly supplied.\n *\n * @public\n */\nexport class AuthenticationError extends CustomErrorBase {}\n\n/**\n * The authenticated caller is not allowed to perform this request.\n *\n * @public\n */\nexport class NotAllowedError extends CustomErrorBase {}\n\n/**\n * The requested resource could not be found.\n *\n * Note that this error usually is used to indicate that an entity with a given\n * ID does not exist, rather than signalling that an entire route is missing.\n *\n * @public\n */\nexport class NotFoundError extends CustomErrorBase {}\n\n/**\n * The request could not complete due to a conflict in the current state of the\n * resource.\n *\n * @public\n */\nexport class ConflictError extends CustomErrorBase {}\n\n/**\n * The requested resource has not changed since last request.\n *\n * @public\n */\nexport class NotModifiedError extends CustomErrorBase {}\n\n/**\n * An error that forwards an underlying cause with additional context in the message.\n *\n * The `name` property of the error will be inherited from the `cause` if\n * possible, and will otherwise be set to `'Error'`.\n *\n * @public\n */\nexport class ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n\n    this.name = isError(cause) ? cause.name : 'Error';\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A standard shape of JSON data returned as the body of backend errors.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Attempts to construct an ErrorResponseBody out of a failed server request.\n * Assumes that the response has already been checked to be not ok. This\n * function consumes the body of the response, and assumes that it hasn't\n * been consumed before.\n *\n * The code is forgiving, and constructs a useful synthetic body as best it can\n * if the response body wasn't on the expected form.\n *\n * @public\n * @param response - The response of a failed request\n */\nexport async function parseErrorResponseBody(\n  response,\n) {\n  try {\n    const text = await response.text();\n    if (text) {\n      if (\n        response.headers.get('content-type')?.startsWith('application/json')\n      ) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n          // ignore\n        }\n      }\n\n      return {\n        error: {\n          name: 'Error',\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`,\n        },\n        response: {\n          statusCode: response.status,\n        },\n      };\n    }\n  } catch {\n    // ignore\n  }\n\n  return {\n    error: {\n      name: 'Error',\n      message: `Request failed with status ${response.status} ${response.statusText}`,\n    },\n    response: {\n      statusCode: response.status,\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deserializeError } from '../serialization';\nimport {\n\n  parseErrorResponseBody,\n} from '../serialization/response';\n\n/**\n * An error thrown as the result of a failed server request.\n *\n * The server is expected to respond on the ErrorResponseBody format.\n *\n * @public\n */\nexport class ResponseError extends Error {\n  /**\n   * The actual response, as seen by the client.\n   *\n   * Note that the body of this response is always consumed. Its parsed form is\n   * in the `body` field.\n   */\n   response;\n\n  /**\n   * The parsed JSON error body, as sent by the server.\n   */\n   body;\n\n  /**\n   * The Error cause, as seen by the remote server. This is parsed out of the\n   * JSON error body.\n   *\n   * This error always has the plain Error constructor, however all\n   * serializable enumerable fields on the remote error including its name are\n   * preserved. Therefore, if you want to check the error type, use its name\n   * property rather than checking typeof or its constructor or prototype.\n   */\n   cause;\n\n  /**\n   * Constructs a ResponseError based on a failed response.\n   *\n   * Assumes that the response has already been checked to be not ok. This\n   * function consumes the body of the response, and assumes that it hasn't\n   * been consumed before.\n   */\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause,\n    });\n  }\n\n   constructor(props\n\n\n\n\n) {\n    super(props.message);\n    this.name = 'ResponseError';\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  createApiRef,\n\n} from '@backstage/core-plugin-api';\n\n/**\n * The options that control a {@link ScmAuthApi.getCredentials} call.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The ApiRef for the ScmAuthApi.\n *\n * @public\n */\nexport const scmAuthApiRef = createApiRef({\n  id: 'core.scmauth',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  bitbucketAuthApiRef,\n  createApiFactory,\n  githubAuthApiRef,\n  gitlabAuthApiRef,\n  microsoftAuthApiRef,\n\n} from '@backstage/core-plugin-api';\nimport {\n\n  scmAuthApiRef,\n\n\n} from './ScmAuthApi';\n\n\n\n\n\n\n\n\n\n\n\nclass ScmAuthMux  {\n  #providers;\n\n  constructor(providers) {\n    this.#providers = providers;\n  }\n\n  async getCredentials(\n    options,\n  ) {\n    const url = new URL(options.url);\n    const provider = this.#providers.find(p => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(\n        `No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`,\n      );\n    }\n\n    return provider.getCredentials(options);\n  }\n}\n\n/**\n * An implementation of the ScmAuthApi that merges together OAuthApi instances\n * to form a single instance that can handles authentication for multiple providers.\n *\n * @public\n *\n * @example\n * ```\n * // Supports authentication towards both public GitHub and GHE:\n * createApiFactory({\n *   api: scmAuthApiRef,\n *   deps: {\n *     gheAuthApi: gheAuthApiRef,\n *     githubAuthApi: githubAuthApiRef,\n *   },\n *   factory: ({ githubAuthApi, gheAuthApi }) =>\n *     ScmAuth.merge(\n *       ScmAuth.forGithub(githubAuthApi),\n *       ScmAuth.forGithub(gheAuthApi, {\n *         host: 'ghe.example.com',\n *       }),\n *     )\n * })\n * ```\n */\nexport class ScmAuth  {\n  /**\n   * Creates an API factory that enables auth for each of the default SCM providers.\n   */\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef,\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) =>\n        ScmAuth.merge(\n          ScmAuth.forGithub(github),\n          ScmAuth.forGitlab(gitlab),\n          ScmAuth.forAzure(azure),\n          ScmAuth.forBitbucket(bitbucket),\n        ),\n    });\n  }\n\n  /**\n   * Creates a general purpose ScmAuth instance with a custom scope mapping.\n   */\n  static forAuthApi(\n    authApi,\n    options\n\n\n\n\n\n,\n  ) {\n    return new ScmAuth('generic', authApi, options.host, options.scopeMapping);\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitHub.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `github.com`.\n   *\n   * The default scopes are:\n   *\n   * `repo read:org read:user`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `gist`\n   */\n  static forGithub(\n    githubAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'github.com';\n    return new ScmAuth('github', githubAuthApi, host, {\n      default: ['repo', 'read:org', 'read:user'],\n      repoWrite: ['gist'],\n    });\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitLab.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `gitlab.com`.\n   *\n   * The default scopes are:\n   *\n   * `read_user read_api read_repository`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `write_repository api`\n   */\n  static forGitlab(\n    gitlabAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'gitlab.com';\n    return new ScmAuth('gitlab', gitlabAuthApi, host, {\n      default: ['read_user', 'read_api', 'read_repository'],\n      repoWrite: ['write_repository', 'api'],\n    });\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Azure.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `dev.azure.com`.\n   *\n   * The default scopes are:\n   *\n   * `vso.build vso.code vso.graph vso.project vso.profile`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `vso.code_manage`\n   */\n  static forAzure(\n    microsoftAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'dev.azure.com';\n    return new ScmAuth('azure', microsoftAuthApi, host, {\n      default: [\n        'vso.build',\n        'vso.code',\n        'vso.graph',\n        'vso.project',\n        'vso.profile',\n      ],\n      repoWrite: ['vso.code_manage'],\n    });\n  }\n\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Bitbucket.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `bitbucket.org`.\n   *\n   * The default scopes are:\n   *\n   * `account team pullrequest snippet issue`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `pullrequest:write snippet:write issue:write`\n   */\n  static forBitbucket(\n    bitbucketAuthApi,\n    options\n\n,\n  ) {\n    const host = options?.host ?? 'bitbucket.org';\n    return new ScmAuth('bitbucket', bitbucketAuthApi, host, {\n      default: ['account', 'team', 'pullrequest', 'snippet', 'issue'],\n      repoWrite: ['pullrequest:write', 'snippet:write', 'issue:write'],\n    });\n  }\n\n  /**\n   * Merges together multiple ScmAuth instances into one that\n   * routes requests to the correct instance based on the URL.\n   */\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n\n  #api;\n  #host;\n  #scopeMapping;\n  #providerName;\n\n   constructor(\n    providerName,\n    api,\n    host,\n    scopeMapping,\n  ) {\n    this.#api = api;\n    this.#host = host;\n    this.#scopeMapping = scopeMapping;\n    this.#providerName = providerName;\n  }\n\n  /**\n   * Checks whether the implementation is able to provide authentication for the given URL.\n   */\n  isUrlSupported(url) {\n    return url.host === this.#host;\n  }\n\n   getAdditionalScopesForProvider(\n    additionalScopes,\n  ) {\n    if (!additionalScopes?.customScopes || this.#providerName === 'generic') {\n      return [];\n    }\n\n    return additionalScopes.customScopes?.[this.#providerName] ?? [];\n  }\n\n  /**\n   * Fetches credentials for the given resource.\n   */\n  async getCredentials(\n    options,\n  ) {\n    const { url, additionalScope, ...restOptions } = options;\n\n    const scopes = this.#scopeMapping.default.slice();\n    if (additionalScope?.repoWrite) {\n      scopes.push(...this.#scopeMapping.repoWrite);\n    }\n\n    const additionalScopes =\n      this.getAdditionalScopesForProvider(additionalScope);\n\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n\n    const uniqueScopes = [...new Set(scopes)];\n\n    const token = await this.#api.getAccessToken(uniqueScopes, restOptions);\n\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n\n  ScmIntegrations,\n} from '@backstage/integration';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * Factory class for creating {@link @backstage/integration#ScmIntegrationRegistry} instances.\n *\n * @public\n */\nexport class ScmIntegrationsApi {\n  /**\n   * Instantiates an {@link @backstage/integration#ScmIntegrationRegistry}.\n   *\n   * @param config - The root of the config hierarchy.\n   */\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\n\n/**\n * The API that holds all configured SCM integrations.\n *\n * @public\n */\nexport const scmIntegrationsApiRef =\n  createApiRef({\n    id: 'integration.scmintegrations',\n  });\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\nimport { useApp } from '@backstage/core-plugin-api';\n\n/**\n * Props for {@link ScmIntegrationIcon}.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * An icon that represents a certain SCM integration.\n *\n * @public\n */\nexport const ScmIntegrationIcon = (props) => {\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? app.getSystemIcon(type) ?? DefaultIcon : DefaultIcon;\n  return React.createElement(Icon, null );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { trimEnd } from 'lodash';\n\n\n/** Checks whether the given argument is a valid URL hostname */\nexport function isValidHost(host) {\n  const check = new URL('http://example.com');\n  check.host = host;\n  return check.host === host;\n}\n\n/** Checks whether the given argument is a valid URL */\nexport function isValidUrl(url) {\n  try {\n    // eslint-disable-next-line no-new\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function basicIntegrations(\n  integrations,\n  getHost,\n) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === 'string' ? new URL(url) : url;\n        return integrations.find(i => getHost(i) === parsed.host);\n      } catch {\n        return undefined;\n      }\n    },\n    byHost(host) {\n      return integrations.find(i => getHost(i) === host);\n    },\n  };\n}\n\n/**\n * Default implementation of {@link ScmIntegration} `resolveUrl`, that only\n * works with URL pathname based providers.\n *\n * @public\n */\nexport function defaultScmResolveUrl(options\n\n\n\n) {\n  const { url, base, lineNumber } = options;\n\n  // If it is a fully qualified URL - then return it verbatim\n  try {\n    // eslint-disable-next-line no-new\n    new URL(url);\n    return url;\n  } catch {\n    // ignore intentionally\n  }\n\n  let updated;\n\n  if (url.startsWith('/')) {\n    // If it is an absolute path, move relative to the repo root\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(\n      updated.pathname.substring(0, updated.pathname.length - filepath.length),\n      '/',\n    );\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    // For relative URLs, just let the default URL constructor handle the\n    // resolving. Note that this essentially will treat the last segment of the\n    // base as a file - NOT a folder - unless the url ends in a slash.\n    updated = new URL(url, base);\n  }\n\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst AMAZON_AWS_HOST = 'amazonaws.com';\n\n/**\n * The configuration parameters for a single AWS S3 provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Aws S3 integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\n\nexport function readAwsS3IntegrationConfig(\n  config,\n) {\n  const endpoint = config.getOptionalString('endpoint');\n  const s3ForcePathStyle =\n    config.getOptionalBoolean('s3ForcePathStyle') ?? false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(\n        `invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`,\n      );\n    }\n    if (pathname !== '/') {\n      throw new Error(\n        `invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`,\n      );\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n\n  const accessKeyId = config.getOptionalString('accessKeyId');\n  const secretAccessKey = config.getOptionalString('secretAccessKey');\n  const roleArn = config.getOptionalString('roleArn');\n  const externalId = config.getOptionalString('externalId');\n\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId,\n  };\n}\n\n/**\n * Reads a set of AWS S3 integration configs, and inserts some defaults for\n * public Amazon AWS if not specified.\n *\n * @param configs - The config objects of the integrations\n * @public\n */\nexport function readAwsS3IntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readAwsS3IntegrationConfig);\n\n  // If no explicit amazonaws.com integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST,\n    });\n  }\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport { readAwsS3IntegrationConfigs } from './config';\n\n/**\n * Integrates with AWS S3 or compatible solutions.\n *\n * @public\n */\nexport class AwsS3Integration  {\n  static factory = ({ config }) => {\n    const configs = readAwsS3IntegrationConfigs(\n      config.getOptionalConfigArray('integrations.awsS3') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new AwsS3Integration(c)),\n      i => i.config.host,\n    );\n  };\n\n  get type() {\n    return 'awsS3';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n\n  resolveEditUrl(url) {\n    // TODO: Implement edit URL for awsS3\n    return url;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst VERSION_PREFIX_GIT_BRANCH = 'GB';\n\nexport class AzureUrl {\n  /**\n   * Parses an azure URL as copied from the browser address bar.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  static fromRepoUrl(repoUrl) {\n    const url = new URL(repoUrl);\n\n    let owner;\n    let project;\n    let repo;\n\n    const parts = url.pathname.split('/').map(part => decodeURIComponent(part));\n    if (parts[2] === '_git') {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === '_git') {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    } else if (parts[4] === '_git') {\n      owner = `${parts[1]}/${parts[2]}`;\n      project = parts[3];\n      repo = parts[5];\n    }\n\n    if (!owner || !project || !repo) {\n      throw new Error('Azure URL must point to a git repository');\n    }\n\n    const path = url.searchParams.get('path') ?? undefined;\n\n    let ref;\n    const version = url.searchParams.get('version');\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== 'GB') {\n        throw new Error('Azure URL version must point to a git branch');\n      }\n      ref = version.slice(2);\n    }\n\n    return new AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n\n  #origin;\n  #owner;\n  #project;\n  #repo;\n  #path;\n  #ref;\n\n   constructor(\n    origin,\n    owner,\n    project,\n    repo,\n    path,\n    ref,\n  ) {\n    this.#origin = origin;\n    this.#owner = owner;\n    this.#project = project;\n    this.#repo = repo;\n    this.#path = path;\n    this.#ref = ref;\n  }\n\n  #baseUrl = (...parts) => {\n    const url = new URL(this.#origin);\n    url.pathname = parts.map(part => encodeURIComponent(part)).join('/');\n    return url;\n  };\n\n  /**\n   * Returns a repo URL that can be used to navigate to the resource in azure.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  toRepoUrl() {\n    let url;\n    if (this.#project === this.#repo) {\n      url = this.#baseUrl(this.#owner, '_git', this.#repo);\n    } else {\n      url = this.#baseUrl(this.#owner, this.#project, '_git', this.#repo);\n    }\n\n    if (this.#path) {\n      url.searchParams.set('path', this.#path);\n    }\n    if (this.#ref) {\n      url.searchParams.set('version', VERSION_PREFIX_GIT_BRANCH + this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the file download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a file.\n   */\n  toFileUrl() {\n    if (!this.#path) {\n      throw new Error(\n        'Azure URL must point to a specific path to be able to download a file',\n      );\n    }\n\n    const url = this.#baseUrl(\n      this.#owner,\n      this.#project,\n      '_apis',\n      'git',\n      'repositories',\n      this.#repo,\n      'items',\n    );\n    url.searchParams.set('api-version', '6.0');\n    url.searchParams.set('path', this.#path);\n\n    if (this.#ref) {\n      url.searchParams.set('version', this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the archive download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a repo.\n   */\n  toArchiveUrl() {\n    const url = this.#baseUrl(\n      this.#owner,\n      this.#project,\n      '_apis',\n      'git',\n      'repositories',\n      this.#repo,\n      'items',\n    );\n    url.searchParams.set('recursionLevel', 'full');\n    url.searchParams.set('download', 'true');\n    url.searchParams.set('api-version', '6.0');\n\n    if (this.#path) {\n      url.searchParams.set('scopePath', this.#path);\n    }\n    if (this.#ref) {\n      url.searchParams.set('version', this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the API url for fetching commits from a branch for this azure resource.\n   *\n   * Throws an error if the URL does not point to a commit.\n   */\n  toCommitsUrl() {\n    const url = this.#baseUrl(\n      this.#owner,\n      this.#project,\n      '_apis',\n      'git',\n      'repositories',\n      this.#repo,\n      'commits',\n    );\n    url.searchParams.set('api-version', '6.0');\n\n    if (this.#ref) {\n      url.searchParams.set('searchCriteria.itemVersion.version', this.#ref);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Returns the name of the owner, a user or an organization.\n   */\n  getOwner() {\n    return this.#owner;\n  }\n\n  /**\n   * Returns the name of the project.\n   */\n  getProject() {\n    return this.#project;\n  }\n\n  /**\n   * Returns the name of the repo.\n   */\n  getRepo() {\n    return this.#repo;\n  }\n\n  /**\n   * Returns the file path within the repo if the URL contains one.\n   */\n  getPath() {\n    return this.#path;\n  }\n\n  /**\n   * Returns the git ref in the repo if the URL contains one.\n   */\n  getRef() {\n    return this.#ref;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { isValidHost } from '../helpers';\n\nconst AZURE_HOST = 'dev.azure.com';\n\n/**\n * The configuration parameters for a single Azure provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Azure integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readAzureIntegrationConfig(\n  config,\n) {\n  const host = config.getOptionalString('host') ?? AZURE_HOST;\n  const token = config.getOptionalString('token');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Azure integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  return { host, token };\n}\n\n/**\n * Reads a set of Azure integration configs, and inserts some defaults for\n * public Azure if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readAzureIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readAzureIntegrationConfig);\n\n  // If no explicit dev.azure.com integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, isValidUrl } from '../helpers';\n\nimport { AzureUrl } from './AzureUrl';\nimport { readAzureIntegrationConfigs } from './config';\n\n/**\n * Microsoft Azure based integration.\n *\n * @public\n */\nexport class AzureIntegration  {\n  static factory = ({ config }) => {\n    const configs = readAzureIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.azure') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new AzureIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'azure';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  /*\n   * Azure repo URLs on the form with a `path` query param are treated specially.\n   *\n   * Example base URL: https://dev.azure.com/organization/project/_git/repository?path=%2Fcatalog-info.yaml\n   */\n  resolveUrl(options\n\n\n\n) {\n    const { url, base } = options;\n\n    // If we can parse the url, it is absolute - then return it verbatim\n    if (isValidUrl(url)) {\n      return url;\n    }\n\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n\n      // We lean on the URL path resolution logic to resolve the path param\n      const mockBaseUrl = new URL(`https://a.com${azureUrl.getPath() ?? ''}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set('path', updatedPath);\n\n      if (options.lineNumber) {\n        newUrl.searchParams.set('line', String(options.lineNumber));\n        newUrl.searchParams.set('lineEnd', String(options.lineNumber + 1));\n        newUrl.searchParams.set('lineStartColumn', '1');\n        newUrl.searchParams.set('lineEndColumn', '1');\n      }\n\n      return newUrl.toString();\n    } catch {\n      // If not an actual file path within a repo, treat the URL as raw\n      return new URL(url, base).toString();\n    }\n  }\n\n  resolveEditUrl(url) {\n    // TODO: Implement edit URL for Azure, fallback to view url as I don't know\n    // how azure works.\n    return url;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AzureUrl } from './AzureUrl';\n\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * - from: `https://dev.azure.com/{organization}/{project}/_git/reponame?path={path}&version=GB{commitOrBranch}&_a=contents`\n * - to:   `https://dev.azure.com/{organization}/{project}/_apis/git/repositories/reponame/items?path={path}&version={commitOrBranch}`\n *\n * @param url - A URL pointing to a file\n * @public\n */\nexport function getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @public\n */\nexport function getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\n\n/**\n * Given a URL, return the API URL to fetch commits on the branch.\n *\n * @param url - A URL pointing to a repository or a sub-path\n * @public\n */\nexport function getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getAzureRequestOptions(\n  config,\n  additionalHeaders,\n) {\n  const headers = additionalHeaders\n    ? { ...additionalHeaders }\n    : {};\n\n  if (config.token) {\n    const buffer = Buffer.from(`:${config.token}`, 'utf8');\n    headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  }\n\n  return { headers };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost } from '../helpers';\n\nconst BITBUCKET_HOST = 'bitbucket.org';\nconst BITBUCKET_API_BASE_URL = 'https://api.bitbucket.org/2.0';\n\n/**\n * The configuration parameters for a single Bitbucket API provider.\n *\n * @public\n * @deprecated bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Bitbucket integration config.\n *\n * @param config - The config object of a single integration\n * @public\n * @deprecated bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function readBitbucketIntegrationConfig(\n  config,\n) {\n  const host = config.getOptionalString('host') ?? BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  const token = config.getOptionalString('token');\n  const username = config.getOptionalString('username');\n  const appPassword = config.getOptionalString('appPassword');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword,\n  };\n}\n\n/**\n * Reads a set of Bitbucket integration configs, and inserts some defaults for\n * public Bitbucket if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n * @deprecated bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function readBitbucketIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readBitbucketIntegrationConfig);\n\n  // If no explicit bitbucket.org integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL,\n    });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readBitbucketIntegrationConfigs,\n} from './config';\n\n/**\n * A Bitbucket based integration.\n *\n * @public\n * @deprecated replaced by the integrations bitbucketCloud and bitbucketServer.\n */\nexport class BitbucketIntegration  {\n  static factory = ({\n    config,\n  }) => {\n    const configs = readBitbucketIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.bitbucket') ?? [\n        // if integrations.bitbucket was not used assume the use was migrated to the new configs\n        // and backport for the deprecated integration to be usable for other parts of the system\n        // until these got migrated\n        ...(config.getOptionalConfigArray('integrations.bitbucketCloud') ?? []),\n        ...(config.getOptionalConfigArray('integrations.bitbucketServer') ??\n          []),\n      ],\n    );\n    return basicIntegrations(\n      configs.map(c => new BitbucketIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'bitbucket';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n\n    const url = new URL(resolved);\n\n    if (this.integrationConfig.host === 'bitbucket.org') {\n      // Bitbucket Cloud uses the syntax #lines-{start}[:{end}][,...]\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      // Bitbucket Server uses the syntax #{start}[-{end}][,...]\n      url.hash = `${options.lineNumber}`;\n    }\n\n    return url.toString();\n  }\n\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n\n    editUrl.searchParams.set('mode', 'edit');\n    // TODO: Not sure what spa=0 does, at least bitbucket.org doesn't support it\n    // but this is taken over from the initial implementation.\n    editUrl.searchParams.set('spa', '0');\n    editUrl.searchParams.set('at', urlData.ref);\n    return editUrl.toString();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fetch from 'cross-fetch';\nimport parseGitUrl from 'git-url-parse';\n\n\n/**\n * Given a URL pointing to a path on a provider, returns the default branch.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport async function getBitbucketDefaultBranch(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n\n  const isHosted = resource === 'bitbucket.org';\n  // Bitbucket Server https://docs.atlassian.com/bitbucket-server/rest/7.9.0/bitbucket-rest.html#idp184\n  let branchUrl = isHosted\n    ? `${config.apiBaseUrl}/repositories/${project}/${repoName}`\n    : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n\n  if (response.status === 404 && !isHosted) {\n    // First try the new format, and then if it gets specifically a 404 it should try the old format\n    // (to support old  Atlassian Bitbucket v5.11.1 format )\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. ` +\n        `Response ${response.status} ${response.json()}`,\n    );\n  }\n  return defaultBranch;\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport async function getBitbucketDownloadUrl(\n  url,\n  config,\n) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath,\n  } = parseGitUrl(url);\n\n  const isHosted = resource === 'bitbucket.org';\n\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  // path will limit the downloaded content\n  // /docs will only download the docs folder and everything below it\n  // /docs/index.md will download the docs folder and everything below it\n  const path = filepath ? `&path=${encodeURIComponent(filepath)}` : '';\n  const archiveUrl = isHosted\n    ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`\n    : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n\n  return archiveUrl;\n}\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://bitbucket.org/orgname/reponame/src/master/file.yaml\n * to:   https://api.bitbucket.org/2.0/repositories/orgname/reponame/src/master/file.yaml\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function getBitbucketFileFetchUrl(\n  url,\n  config,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (\n      !owner ||\n      !name ||\n      (filepathtype !== 'browse' &&\n        filepathtype !== 'raw' &&\n        filepathtype !== 'src')\n    ) {\n      throw new Error('Invalid Bitbucket URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n\n    if (config.host === 'bitbucket.org') {\n      if (!ref) {\n        throw new Error('Invalid Bitbucket URL or file path');\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n * @deprecated no longer in use, bitbucket integration replaced by integrations bitbucketCloud and bitbucketServer.\n */\nexport function getBitbucketRequestOptions(\n  config,\n) {\n  const headers = {};\n\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      'utf8',\n    );\n    headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  }\n\n  return {\n    headers,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst BITBUCKET_CLOUD_HOST = 'bitbucket.org';\nconst BITBUCKET_CLOUD_API_BASE_URL = 'https://api.bitbucket.org/2.0';\n\n/**\n * The configuration parameters for a single Bitbucket Cloud API provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Bitbucket Cloud integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readBitbucketCloudIntegrationConfig(\n  config,\n) {\n  const host = BITBUCKET_CLOUD_HOST;\n  const apiBaseUrl = BITBUCKET_CLOUD_API_BASE_URL;\n  // If config is provided, we assume authenticated access is desired\n  // (as the anonymous one is provided by default).\n  const username = config.getString('username');\n  const appPassword = config.getString('appPassword');\n\n  return {\n    host,\n    apiBaseUrl,\n    username,\n    appPassword,\n  };\n}\n\n/**\n * Reads a set of Bitbucket Cloud integration configs,\n * and inserts one for public Bitbucket Cloud if none specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readBitbucketCloudIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readBitbucketCloudIntegrationConfig);\n\n  // If no explicit bitbucket.org integration was added,\n  // put one in the list as a convenience\n  if (result.length === 0) {\n    result.push({\n      host: BITBUCKET_CLOUD_HOST,\n      apiBaseUrl: BITBUCKET_CLOUD_API_BASE_URL,\n    });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readBitbucketCloudIntegrationConfigs,\n} from './config';\n\n/**\n * A Bitbucket Cloud based integration.\n *\n * @public\n */\nexport class BitbucketCloudIntegration  {\n  static factory = ({\n    config,\n  }) => {\n    const configs = readBitbucketCloudIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.bitbucketCloud') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new BitbucketCloudIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(\n      integrationConfig,\n  ) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'bitbucketCloud';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n\n    // Bitbucket Cloud line numbers use the syntax #lines-42, rather than #L42\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n\n      url.hash = `lines-${options.lineNumber}`;\n      return url.toString();\n    }\n\n    return resolved;\n  }\n\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n\n    editUrl.searchParams.set('mode', 'edit');\n    editUrl.searchParams.set('at', urlData.ref);\n    return editUrl.toString();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fetch from 'cross-fetch';\nimport parseGitUrl from 'git-url-parse';\n\n\n/**\n * Given a URL pointing to a path on a provider, returns the default branch.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketCloudDefaultBranch(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n\n  const branchUrl = `${config.apiBaseUrl}/repositories/${project}/${repoName}`;\n  const response = await fetch(\n    branchUrl,\n    getBitbucketCloudRequestOptions(config),\n  );\n\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n\n  const repoInfo = await response.json();\n  const defaultBranch = repoInfo.mainbranch.name;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. ` +\n        `Response ${response.status} ${response.json()}`,\n    );\n  }\n  return defaultBranch;\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketCloudDownloadUrl(\n  url,\n  config,\n) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n  } = parseGitUrl(url);\n\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketCloudDefaultBranch(url, config);\n  }\n  return `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`;\n}\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://bitbucket.org/orgname/reponame/src/master/file.yaml\n * to:   https://api.bitbucket.org/2.0/repositories/orgname/reponame/src/master/file.yaml\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketCloudFileFetchUrl(\n  url,\n  config,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || (filepathtype !== 'src' && filepathtype !== 'raw')) {\n      throw new Error('Invalid Bitbucket Cloud URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n\n    if (!ref) {\n      throw new Error('Invalid Bitbucket Cloud URL or file path');\n    }\n    return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketCloudRequestOptions(\n  config,\n) {\n  const headers = {};\n\n  if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      'utf8',\n    );\n    headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  }\n\n  return {\n    headers,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost } from '../helpers';\n\n/**\n * The configuration parameters for a single Bitbucket Server API provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Bitbucket Server integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readBitbucketServerIntegrationConfig(\n  config,\n) {\n  const host = config.getString('host');\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  const token = config.getOptionalString('token');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket Server integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n\n  return {\n    host,\n    apiBaseUrl,\n    token,\n  };\n}\n\n/**\n * Reads a set of Bitbucket Server integration configs.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readBitbucketServerIntegrationConfigs(\n  configs,\n) {\n  // Read all the explicit integrations\n  // No default integration will be added\n  return configs.map(readBitbucketServerIntegrationConfig);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readBitbucketServerIntegrationConfigs,\n} from './config';\n\n/**\n * A Bitbucket Server based integration.\n *\n * @public\n */\nexport class BitbucketServerIntegration  {\n  static factory = ({\n    config,\n  }) => {\n    const configs = readBitbucketServerIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.bitbucketServer') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new BitbucketServerIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(\n      integrationConfig,\n  ) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'bitbucketServer';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const resolved = defaultScmResolveUrl(options);\n\n    // Bitbucket Server line numbers use the syntax #example.txt-42, rather than #L42\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n\n      const filename = url.pathname.split('/').slice(-1)[0];\n      url.hash = `${filename}-${options.lineNumber}`;\n      return url.toString();\n    }\n\n    return resolved;\n  }\n\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n\n    editUrl.searchParams.set('mode', 'edit');\n    // TODO: Not sure what spa=0 does, at least bitbucket.org doesn't support it\n    // but this is taken over from the initial implementation.\n    editUrl.searchParams.set('spa', '0');\n    editUrl.searchParams.set('at', urlData.ref);\n    return editUrl.toString();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fetch from 'cross-fetch';\nimport parseGitUrl from 'git-url-parse';\n\n\n/**\n * Given a URL pointing to a path on a provider, returns the default branch.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketServerDefaultBranch(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n\n  // Bitbucket Server https://docs.atlassian.com/bitbucket-server/rest/7.9.0/bitbucket-rest.html#idp184\n  let branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n\n  let response = await fetch(\n    branchUrl,\n    getBitbucketServerRequestOptions(config),\n  );\n\n  if (response.status === 404) {\n    // First try the new format, and then if it gets specifically a 404 it should try the old format\n    // (to support old  Atlassian Bitbucket Server v5.11.1 format )\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketServerRequestOptions(config));\n  }\n\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n\n  const { displayId } = await response.json();\n  const defaultBranch = displayId;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. ` +\n        `Response ${response.status} ${response.json()}`,\n    );\n  }\n  return defaultBranch;\n}\n\n/**\n * Given a URL pointing to a path on a provider, returns a URL that is suitable\n * for downloading the subtree.\n *\n * @param url - A URL pointing to a path\n * @param config - The relevant provider config\n * @public\n */\nexport async function getBitbucketServerDownloadUrl(\n  url,\n  config,\n) {\n  const { name: repoName, owner: project, ref, filepath } = parseGitUrl(url);\n\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketServerDefaultBranch(url, config);\n  }\n  // path will limit the downloaded content\n  // /docs will only download the docs folder and everything below it\n  // /docs/index.md will download the docs folder and everything below it\n  const path = filepath ? `&path=${encodeURIComponent(filepath)}` : '';\n  return `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n}\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://bitbucket.company.com/projectname/reponame/src/main/file.yaml\n * to:   https://bitbucket.company.com/rest/api/1.0/project/projectname/reponame/raw/file.yaml?at=main\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketServerFileFetchUrl(\n  url,\n  config,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (\n      !owner ||\n      !name ||\n      (filepathtype !== 'browse' &&\n        filepathtype !== 'raw' &&\n        filepathtype !== 'src')\n    ) {\n      throw new Error('Invalid Bitbucket Server URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getBitbucketServerRequestOptions(\n  config,\n) {\n  const headers = {};\n\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  }\n\n  return {\n    headers,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost, isValidUrl } from '../helpers';\n\n/**\n * The configuration parameters for a single Gerrit API provider.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single Gerrit integration config.\n *\n * @param config - The config object of a single integration\n *\n * @public\n */\nexport function readGerritIntegrationConfig(\n  config,\n) {\n  const host = config.getString('host');\n  let baseUrl = config.getOptionalString('baseUrl');\n  let cloneUrl = config.getOptionalString('cloneUrl');\n  let gitilesBaseUrl = config.getOptionalString('gitilesBaseUrl');\n  const username = config.getOptionalString('username');\n  const password = config.getOptionalString('password');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${host}' is not a valid host`,\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`,\n    );\n  } else if (cloneUrl && !isValidUrl(cloneUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${cloneUrl}' is not a valid cloneUrl`,\n    );\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`,\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, '/');\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, '/');\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  if (cloneUrl) {\n    cloneUrl = trimEnd(cloneUrl, '/');\n  } else {\n    cloneUrl = baseUrl;\n  }\n\n  return {\n    host,\n    baseUrl,\n    cloneUrl,\n    gitilesBaseUrl,\n    username,\n    password,\n  };\n}\n\n/**\n * Reads a set of Gerrit integration configs.\n *\n * @param configs - All of the integration config objects\n *\n * @public\n */\nexport function readGerritIntegrationConfigs(\n  configs,\n) {\n  return configs.map(readGerritIntegrationConfig);\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { trimStart } from 'lodash';\n\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\n\n/**\n * Parse a Gitiles URL and return branch, file path and project.\n *\n * @remarks\n *\n * Gerrit only handles code reviews so it does not have a native way to browse\n * or showing the content of gits. Image if Github only had the \"pull requests\"\n * tab.\n *\n * Any source code browsing is instead handled by optional services outside\n * Gerrit. The url format chosen for the Gerrit url reader is the one used by\n * the Gitiles project. Gerrit will work perfectly with Backstage without\n * having Gitiles installed but there are some places in the Backstage GUI\n * with links to the url used by the url reader. These will not work unless\n * the urls point to an actual Gitiles installation.\n *\n * Gitiles url:\n * https://g.com/optional_path/\\{project\\}/+/refs/heads/\\{branch\\}/\\{filePath\\}\n *\n *\n * @param url - An URL pointing to a file stored in git.\n * @public\n */\n\nexport function parseGerritGitilesUrl(\n  config,\n  url,\n) {\n  const urlPath = url.replace(config.gitilesBaseUrl, '');\n  const parts = urlPath.split('/').filter(p => !!p);\n\n  const projectEndIndex = parts.indexOf('+');\n\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join('/'), '/');\n\n  const branchIndex = parts.indexOf('heads');\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join('/');\n\n  return {\n    branch,\n    filePath: filePath === '' ? '/' : filePath,\n    project,\n  };\n}\n\n/**\n * Build a Gerrit Gitiles url that targets a specific path.\n *\n * @param config - A Gerrit provider config.\n * @param project - The name of the git project\n * @param branch - The branch we will target.\n * @param filePath - The absolute file path.\n * @public\n */\nexport function builldGerritGitilesUrl(\n  config,\n  project,\n  branch,\n  filePath,\n) {\n  return `${\n    config.gitilesBaseUrl\n  }/${project}/+/refs/heads/${branch}/${trimStart(filePath, '/')}`;\n}\n\n/**\n * Return the authentication prefix.\n *\n * @remarks\n *\n * To authenticate with a password the API url must be prefixed with \"/a/\".\n * If no password is set anonymous access (without the prefix) will\n * be used.\n *\n * @param config - A Gerrit provider config.\n * @public\n */\nexport function getAuthenticationPrefix(\n  config,\n) {\n  return config.password ? '/a/' : '/';\n}\n\n/**\n * Return the url to get branch info from the Gerrit API.\n *\n * @param config - A Gerrit provider config.\n * @param url - An url pointing to a file in git.\n * @public\n */\nexport function getGerritBranchApiUrl(\n  config,\n  url,\n) {\n  const { branch, project } = parseGerritGitilesUrl(config, url);\n\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config,\n  )}projects/${encodeURIComponent(project)}/branches/${branch}`;\n}\n\n/**\n * Return the url to clone the repo that is referenced by the url.\n *\n * @param url - An url pointing to a file in git.\n * @public\n */\nexport function getGerritCloneRepoUrl(\n  config,\n  url,\n) {\n  const { project } = parseGerritGitilesUrl(config, url);\n\n  return `${config.cloneUrl}${getAuthenticationPrefix(config)}${project}`;\n}\n\n/**\n * Return the url to fetch the contents of a file using the Gerrit API.\n *\n * @param config - A Gerrit provider config.\n * @param url - An url pointing to a file in git.\n * @public\n */\nexport function getGerritFileContentsApiUrl(\n  config,\n  url,\n) {\n  const { branch, filePath, project } = parseGerritGitilesUrl(config, url);\n\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config,\n  )}projects/${encodeURIComponent(\n    project,\n  )}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\n\n/**\n * Return the url to query available projects using the Gerrit API.\n *\n * @param config - A Gerrit provider config.\n * @public\n */\nexport function getGerritProjectsApiUrl(config) {\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/`;\n}\n\n/**\n * Return request headers for a Gerrit provider.\n *\n * @param config - A Gerrit provider config\n * @public\n */\nexport function getGerritRequestOptions(config)\n\n {\n  const headers = {};\n\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, 'utf8');\n  headers.Authorization = `Basic ${buffer.toString('base64')}`;\n  return {\n    headers,\n  };\n}\n\n/**\n * Parse the json response from Gerrit and strip the magic prefix.\n *\n * @remarks\n *\n * To prevent against XSSI attacks the JSON response body from Gerrit starts\n * with a magic prefix that must be stripped before it can be fed to a JSON\n * parser.\n *\n * @param response - An API response.\n * @public\n */\nexport async function parseGerritJsonResponse(\n  response,\n) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(\n        `Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`,\n      );\n    }\n  }\n  throw new Error(\n    `Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`,\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations } from '../helpers';\n\nimport {\n\n  readGerritIntegrationConfigs,\n} from './config';\nimport { parseGerritGitilesUrl, builldGerritGitilesUrl } from './core';\n\n/**\n * A Gerrit based integration.\n *\n * @public\n */\nexport class GerritIntegration  {\n  static factory = ({ config }) => {\n    const configs = readGerritIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.gerrit') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new GerritIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'gerrit';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url.startsWith('/')) {\n      const { branch, project } = parseGerritGitilesUrl(this.config, base);\n      return builldGerritGitilesUrl(this.config, project, branch, url);\n    }\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n\n  resolveEditUrl(url) {\n    // Not applicable for gerrit.\n    return url;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost } from '../helpers';\n\nconst GITHUB_HOST = 'github.com';\nconst GITHUB_API_BASE_URL = 'https://api.github.com';\nconst GITHUB_RAW_BASE_URL = 'https://raw.githubusercontent.com';\n\n/**\n * The configuration parameters for a single GitHub integration.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single GitHub integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readGitHubIntegrationConfig(\n  config,\n) {\n  const host = config.getOptionalString('host') ?? GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  let rawBaseUrl = config.getOptionalString('rawBaseUrl');\n  const token = config.getOptionalString('token');\n  const apps = config.getOptionalConfigArray('apps')?.map(c => ({\n    appId: c.getNumber('appId'),\n    clientId: c.getString('clientId'),\n    clientSecret: c.getString('clientSecret'),\n    webhookSecret: c.getString('webhookSecret'),\n    privateKey: c.getString('privateKey'),\n    allowedInstallationOwners: c.getOptionalStringArray(\n      'allowedInstallationOwners',\n    ),\n  }));\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitHub integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, '/');\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\n\n/**\n * Reads a set of GitHub integration configs, and inserts some defaults for\n * public GitHub if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readGitHubIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readGitHubIntegrationConfig);\n\n  // If no explicit github.com integration was added, put one in the list as\n  // a convenience\n  if (!result.some(c => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL,\n    });\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\n\n\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://github.com/a/b/blob/branchname/path/to/c.yaml\n * to:   https://api.github.com/repos/a/b/contents/path/to/c.yaml?ref=branchname\n * or:   https://raw.githubusercontent.com/a/b/branchname/c.yaml\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport function getGitHubFileFetchUrl(\n  url,\n  config,\n  credentials,\n) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (\n      !owner ||\n      !name ||\n      !ref ||\n      // GitHub is automatically redirecting tree urls to blob urls so it's\n      // fine to pass a tree url.\n      (filepathtype !== 'blob' &&\n        filepathtype !== 'raw' &&\n        filepathtype !== 'tree')\n    ) {\n      throw new Error('Invalid GitHub URL or file path');\n    }\n\n    const pathWithoutSlash = filepath.replace(/^\\//, '');\n    if (chooseEndpoint(config, credentials) === 'api') {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @deprecated This function is no longer used internally\n * @param config - The relevant provider config\n * @public\n */\nexport function getGitHubRequestOptions(\n  config,\n  credentials,\n) {\n  const headers = {};\n\n  if (chooseEndpoint(config, credentials) === 'api') {\n    headers.Accept = 'application/vnd.github.v3.raw';\n  }\n\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n\n  return { headers };\n}\n\nexport function chooseEndpoint(\n  config,\n  credentials,\n) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return 'api';\n  }\n  return 'raw';\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport parseGitUrl from 'git-url-parse';\n\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit, } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\n\n\n\n\n\n\n\n\n\n\nclass Cache {\n    tokenCache = new Map\n\n\n();\n\n  async getOrCreateToken(\n    key,\n    supplier,\n  ) {\n    const item = this.tokenCache.get(key);\n    if (item && this.isNotExpired(item.expiresAt)) {\n      return { accessToken: item.token };\n    }\n\n    const result = await supplier();\n    this.tokenCache.set(key, result);\n    return { accessToken: result.token };\n  }\n\n  // consider timestamps older than 50 minutes to be expired.\n   isNotExpired = (date) =>\n    date.diff(DateTime.local(), 'minutes').minutes > 50;\n}\n\n/**\n * This accept header is required when calling App APIs in GitHub Enterprise.\n * It has no effect on calls to github.com and can probably be removed entirely\n * once GitHub Apps is out of preview.\n */\nconst HEADERS = {\n  Accept: 'application/vnd.github.machine-man-preview+json',\n};\n\n/**\n * GithubAppManager issues and caches tokens for a specific GitHub App.\n */\nclass GithubAppManager {\n    appClient;\n    baseUrl;\n    baseAuthConfig;\n    cache = new Cache();\n    allowedInstallationOwners; // undefined allows all installations\n\n  constructor(config, baseUrl) {\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, '\\n'),\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig,\n    });\n  }\n\n  async getInstallationCredentials(\n    owner,\n    repo,\n  ) {\n    const { installationId, suspended } = await this.getInstallationData(owner);\n    if (this.allowedInstallationOwners) {\n      if (!this.allowedInstallationOwners?.includes(owner)) {\n        return { accessToken: undefined }; // An empty token allows anonymous access to public repos\n      }\n    }\n    if (suspended) {\n      throw new Error(`The GitHub application for ${owner} is suspended`);\n    }\n\n    const cacheKey = repo ? `${owner}/${repo}` : owner;\n\n    // Go and grab an access token for the app scoped to a repository if provided, if not use the organisation installation.\n    return this.cache.getOrCreateToken(cacheKey, async () => {\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS,\n      });\n      if (repo && result.data.repository_selection === 'selected') {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token,\n        });\n        const repos = await installationClient.paginate(\n          installationClient.apps.listReposAccessibleToInstallation,\n        );\n        const hasRepo = repos.some(repository => {\n          return repository.name === repo;\n        });\n        if (!hasRepo) {\n          throw new Error(\n            `The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`,\n          );\n        }\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at),\n      };\n    });\n  }\n\n  getInstallations()\n\n {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n\n   async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find(\n      inst =>\n        inst.account?.login?.toLocaleLowerCase('en-US') ===\n        owner.toLocaleLowerCase('en-US'),\n    );\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by),\n      };\n    }\n    const notFoundError = new Error(\n      `No app installation found for ${owner} in ${this.baseAuthConfig.appId}`,\n    );\n    notFoundError.name = 'NotFoundError';\n    throw notFoundError;\n  }\n}\n\n/**\n * Corresponds to a Github installation which internally could hold several GitHub Apps.\n *\n * @public\n */\nexport class GithubAppCredentialsMux {\n    apps;\n\n  constructor(config) {\n    this.apps =\n      config.apps?.map(ac => new GithubAppManager(ac, config.apiBaseUrl)) ?? [];\n  }\n\n  async getAllInstallations()\n\n {\n    if (!this.apps.length) {\n      return [];\n    }\n\n    const installs = await Promise.all(\n      this.apps.map(app => app.getInstallations()),\n    );\n\n    return installs.flat();\n  }\n\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return undefined;\n    }\n\n    const results = await Promise.all(\n      this.apps.map(app =>\n        app.getInstallationCredentials(owner, repo).then(\n          credentials => ({ credentials, error: undefined }),\n          error => ({ credentials: undefined, error }),\n        ),\n      ),\n    );\n\n    const result = results.find(resultItem => resultItem.credentials);\n    if (result) {\n      return result.credentials.accessToken;\n    }\n\n    const errors = results.map(r => r.error);\n    const notNotFoundError = errors.find(err => err.name !== 'NotFoundError');\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n\n    return undefined;\n  }\n}\n\n/**\n * Handles the creation and caching of credentials for GitHub integrations.\n *\n * @public\n * @remarks\n *\n * TODO: Possibly move this to a backend only package so that it's not used in the frontend by mistake\n */\nexport class SingleInstanceGithubCredentialsProvider\n  \n{\n  static create\n\n = config => {\n    return new SingleInstanceGithubCredentialsProvider(\n      new GithubAppCredentialsMux(config),\n      config.token,\n    );\n  };\n\n   constructor(\n      githubAppCredentialsMux,\n      token,\n  ) {;this.githubAppCredentialsMux = githubAppCredentialsMux;this.token = token;}\n\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'github.com/backstage/foobar'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : undefined;\n\n    let type = 'app';\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = 'token';\n      token = this.token;\n    }\n\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : undefined,\n      token,\n      type,\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SingleInstanceGithubCredentialsProvider } from './SingleInstanceGithubCredentialsProvider';\n\n/**\n * Handles the creation and caching of credentials for GitHub integrations.\n *\n * @public\n * @remarks\n *\n * TODO: Possibly move this to a backend only package so that it's not used in the frontend by mistake\n */\nexport class DefaultGithubCredentialsProvider\n  \n{\n  static fromIntegrations(integrations) {\n    const credentialsProviders =\n      new Map();\n\n    integrations.github.list().forEach(integration => {\n      const credentialsProvider =\n        SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n\n   constructor(\n      providers,\n  ) {;this.providers = providers;}\n\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage/foobar'\n   * })\n   *\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n\n    if (!provider) {\n      throw new Error(\n        `There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`,\n      );\n    }\n\n    return provider.getCredentials(opts);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readGitHubIntegrationConfigs,\n} from './config';\n\n/**\n * A GitHub based integration.\n *\n * @public\n */\nexport class GitHubIntegration  {\n  static factory = ({ config }) => {\n    const configs = readGitHubIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.github') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new GitHubIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'github';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    // GitHub uses blob URLs for files and tree urls for directory listings. But\n    // there is a redirect from tree to blob for files, so we can always return\n    // tree urls here.\n    return replaceGitHubUrlType(defaultScmResolveUrl(options), 'tree');\n  }\n\n  resolveEditUrl(url) {\n    return replaceGitHubUrlType(url, 'edit');\n  }\n}\n\n/**\n * Takes a GitHub URL and replaces the type part (blob, tree etc).\n *\n * @param url - The original URL\n * @param type - The desired type, e.g. \"blob\"\n * @public\n */\nexport function replaceGitHubUrlType(\n  url,\n  type,\n) {\n  return url.replace(\n    /\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//,\n    (_, host, owner, repo) => {\n      return `//${host}/${owner}/${repo}/${type}/`;\n    },\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { trimEnd } from 'lodash';\nimport { isValidHost, isValidUrl } from '../helpers';\n\nconst GITLAB_HOST = 'gitlab.com';\nconst GITLAB_API_BASE_URL = 'https://gitlab.com/api/v4';\n\n/**\n * The configuration parameters for a single GitLab integration.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Reads a single GitLab integration config.\n *\n * @param config - The config object of a single integration\n * @public\n */\nexport function readGitLabIntegrationConfig(\n  config,\n) {\n  const host = config.getString('host');\n  let apiBaseUrl = config.getOptionalString('apiBaseUrl');\n  const token = config.getOptionalString('token');\n  let baseUrl = config.getOptionalString('baseUrl');\n\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, '/');\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, '/');\n  } else {\n    baseUrl = `https://${host}`;\n  }\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${host}' is not a valid host`,\n    );\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`,\n    );\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`,\n    );\n  }\n\n  return { host, token, apiBaseUrl, baseUrl };\n}\n\n/**\n * Reads a set of GitLab integration configs, and inserts some defaults for\n * public GitLab if not specified.\n *\n * @param configs - All of the integration config objects\n * @public\n */\nexport function readGitLabIntegrationConfigs(\n  configs,\n) {\n  // First read all the explicit integrations\n  const result = configs.map(readGitLabIntegrationConfig);\n\n  // As a convenience we always make sure there's at least an unauthenticated\n  // reader for public gitlab repos.\n  if (!result.some(c => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`,\n    });\n  }\n\n  return result;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport fetch from 'cross-fetch';\nimport { InputError } from '@backstage/errors';\n\n/**\n * Given a URL pointing to a file on a provider, returns a URL that is suitable\n * for fetching the contents of the data.\n *\n * @remarks\n *\n * Converts\n * from: https://gitlab.example.com/a/b/blob/master/c.yaml\n * to:   https://gitlab.example.com/a/b/raw/master/c.yaml\n * -or-\n * from: https://gitlab.com/groupA/teams/teamA/subgroupA/repoA/-/blob/branch/filepath\n * to:   https://gitlab.com/api/v4/projects/projectId/repository/files/filepath?ref=branch\n *\n * @param url - A URL pointing to a file\n * @param config - The relevant provider config\n * @public\n */\nexport async function getGitLabFileFetchUrl(\n  url,\n  config,\n) {\n  // TODO(Rugvip): From the old GitlabReaderProcessor; used\n  // the existence of /-/blob/ to switch the logic. Don't know if this\n  // makes sense and it might require some more work.\n  if (url.includes('/-/blob/')) {\n    const projectID = await getProjectId(url, config);\n    return buildProjectUrl(url, projectID).toString();\n  }\n  return buildRawUrl(url).toString();\n}\n\n/**\n * Gets the request options necessary to make requests to a given provider.\n *\n * @param config - The relevant provider config\n * @public\n */\nexport function getGitLabRequestOptions(config)\n\n {\n  const { token = '' } = config;\n  return {\n    headers: {\n      'PRIVATE-TOKEN': token,\n    },\n  };\n}\n\n// Converts\n// from: https://gitlab.example.com/groupA/teams/repoA/blob/master/c.yaml\n// to:   https://gitlab.example.com/groupA/teams/repoA/raw/master/c.yaml\nexport function buildRawUrl(target) {\n  try {\n    const url = new URL(target);\n\n    const splitPath = url.pathname.split('/').filter(Boolean);\n\n    // Check blob existence\n    const blobIndex = splitPath.indexOf('blob', 2);\n    if (blobIndex < 2 || blobIndex === splitPath.length - 1) {\n      throw new InputError('Wrong GitLab URL');\n    }\n\n    // Take repo path\n    const repoPath = splitPath.slice(0, blobIndex);\n    const restOfPath = splitPath.slice(blobIndex + 1);\n\n    if (!restOfPath.join('/').match(/\\.(yaml|yml)$/)) {\n      throw new InputError('Wrong GitLab URL');\n    }\n\n    // Replace 'blob' with 'raw'\n    url.pathname = [...repoPath, 'raw', ...restOfPath].join('/');\n\n    return url;\n  } catch (e) {\n    throw new InputError(`Incorrect url: ${target}, ${e}`);\n  }\n}\n\n// Converts\n// from: https://gitlab.com/groupA/teams/teamA/subgroupA/repoA/-/blob/branch/filepath\n// to:   https://gitlab.com/api/v4/projects/projectId/repository/files/filepath?ref=branch\nexport function buildProjectUrl(target, projectID) {\n  try {\n    const url = new URL(target);\n\n    const branchAndFilePath = url.pathname.split('/-/blob/')[1];\n    const [branch, ...filePath] = branchAndFilePath.split('/');\n\n    url.pathname = [\n      '/api/v4/projects',\n      projectID,\n      'repository/files',\n      encodeURIComponent(decodeURIComponent(filePath.join('/'))),\n      'raw',\n    ].join('/');\n    url.search = `?ref=${branch}`;\n\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\n\n// Convert\n// from: https://gitlab.com/groupA/teams/teamA/subgroupA/repoA/-/blob/branch/filepath\n// to:   The project ID that corresponds to the URL\nexport async function getProjectId(\n  target,\n  config,\n) {\n  const url = new URL(target);\n\n  if (!url.pathname.includes('/-/blob/')) {\n    throw new Error('Please provide full path to yaml file from GitLab');\n  }\n\n  try {\n    const repo = url.pathname.split('/-/blob/')[0];\n\n    // Convert\n    // to: https://gitlab.com/api/v4/projects/groupA%2Fteams%2FsubgroupA%2FteamA%2Frepo\n    const repoIDLookup = new URL(\n      `${url.origin}/api/v4/projects/${encodeURIComponent(\n        repo.replace(/^\\//, ''),\n      )}`,\n    );\n    const response = await fetch(\n      repoIDLookup.toString(),\n      getGitLabRequestOptions(config),\n    );\n    const data = await response.json();\n\n    if (!response.ok) {\n      throw new Error(\n        `GitLab Error '${data.error}', ${data.error_description}`,\n      );\n    }\n\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\n\nimport {\n\n  readGitLabIntegrationConfigs,\n} from './config';\n\n/**\n * A GitLab based integration.\n *\n * @public\n */\nexport class GitLabIntegration  {\n  static factory = ({ config }) => {\n    const configs = readGitLabIntegrationConfigs(\n      config.getOptionalConfigArray('integrations.gitlab') ?? [],\n    );\n    return basicIntegrations(\n      configs.map(c => new GitLabIntegration(c)),\n      i => i.config.host,\n    );\n  };\n\n  constructor(  integrationConfig) {;this.integrationConfig = integrationConfig;}\n\n  get type() {\n    return 'gitlab';\n  }\n\n  get title() {\n    return this.integrationConfig.host;\n  }\n\n  get config() {\n    return this.integrationConfig;\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    return defaultScmResolveUrl(options);\n  }\n\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, 'edit');\n  }\n}\n\n/**\n * Takes a GitLab URL and replaces the type part (blob, tree etc).\n *\n * @param url - The original URL\n * @param type - The desired type, e.g. 'blob', 'tree', 'edit'\n * @public\n */\nexport function replaceGitLabUrlType(\n  url,\n  type,\n) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { AwsS3Integration } from './awsS3/AwsS3Integration';\nimport { AzureIntegration } from './azure/AzureIntegration';\nimport { BitbucketCloudIntegration } from './bitbucketCloud/BitbucketCloudIntegration';\nimport { BitbucketIntegration } from './bitbucket/BitbucketIntegration';\nimport { BitbucketServerIntegration } from './bitbucketServer/BitbucketServerIntegration';\nimport { GerritIntegration } from './gerrit/GerritIntegration';\nimport { GitHubIntegration } from './github/GitHubIntegration';\nimport { GitLabIntegration } from './gitlab/GitLabIntegration';\nimport { defaultScmResolveUrl } from './helpers';\n\n\n\n/**\n * The set of supported integrations.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Exposes the set of supported integrations.\n *\n * @public\n */\nexport class ScmIntegrations  {\n    byType;\n\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      bitbucketCloud: BitbucketCloudIntegration.factory({ config }),\n      bitbucketServer: BitbucketServerIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GitHubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config }),\n    });\n  }\n\n  constructor(integrationsByType) {\n    this.byType = integrationsByType;\n  }\n\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n\n  get azure() {\n    return this.byType.azure;\n  }\n\n  /**\n   * @deprecated in favor of `bitbucketCloud()` and `bitbucketServer()`\n   */\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n\n  get bitbucketCloud() {\n    return this.byType.bitbucketCloud;\n  }\n\n  get bitbucketServer() {\n    return this.byType.bitbucketServer;\n  }\n\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n\n  get github() {\n    return this.byType.github;\n  }\n\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n\n  list() {\n    return Object.values(this.byType).flatMap(\n      i => i.list() ,\n    );\n  }\n\n  byUrl(url) {\n    return Object.values(this.byType)\n      .map(i => i.byUrl(url))\n      .find(Boolean);\n  }\n\n  byHost(host) {\n    return Object.values(this.byType)\n      .map(i => i.byHost(host))\n      .find(Boolean);\n  }\n\n  resolveUrl(options\n\n\n\n) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n\n    return integration.resolveUrl(options);\n  }\n\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n\n    return integration.resolveEditUrl(url);\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The default predefined burst shapes.\n *\n * @public\n * @remarks\n *\n * How to add a shape:\n *\n * 1. Get the svg shape from figma, should be ~1400 wide, ~400 high\n *    and only the white-to-transparent mask, no colors.\n * 2. Run it through https://jakearchibald.github.io/svgomg/\n * 3. Run that through https://github.com/tigt/mini-svg-data-uri\n *    with something like https://npm.runkit.com/mini-svg-data-uri\n * 4. Wrap the output in `url(\"\")`\n * 5. Give it a name and paste it into the `shapes` object below.\n */\nexport const shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n};\n\n/**\n * The color range variants that are used in e.g. colorful bursts.\n *\n * @public\n */\nexport const colorVariants = {\n  darkGrey: ['#171717', '#383838'],\n  marineBlue: ['#006D8F', '#0049A1'],\n  veryBlue: ['#0027AF', '#270094'],\n  rubyRed: ['#98002B', '#8D1134'],\n  toastyOrange: ['#BE2200', '#A41D00'],\n  purpleSky: ['#8912CA', '#3E00EA'],\n  eveningSea: ['#00FFF2', '#035355'],\n  teal: ['#005B4B'],\n  pinkSea: ['#C8077A', '#C2297D'],\n};\n\n/**\n * Utility to not have to write colors and shapes twice.\n *\n * @public\n * @remarks\n *\n * As the background shapes and colors are decorative, we place them onto the\n * page as a css background-image instead of an html element of its own.\n */\nexport function genPageTheme(colors, shape) {\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(', ')})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n\n  return { colors, shape, backgroundImage };\n}\n\n/**\n * All of the builtin page themes.\n *\n * @public\n */\nexport const pageTheme = {\n  home: genPageTheme(colorVariants.teal, shapes.wave),\n  documentation: genPageTheme(colorVariants.pinkSea, shapes.wave2),\n  tool: genPageTheme(colorVariants.purpleSky, shapes.round),\n  service: genPageTheme(colorVariants.marineBlue, shapes.wave),\n  website: genPageTheme(colorVariants.veryBlue, shapes.wave),\n  library: genPageTheme(colorVariants.rubyRed, shapes.wave),\n  other: genPageTheme(colorVariants.darkGrey, shapes.wave),\n  app: genPageTheme(colorVariants.toastyOrange, shapes.wave),\n  apis: genPageTheme(colorVariants.teal, shapes.wave2),\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createTheme as createMuiTheme } from '@material-ui/core/styles';\nimport { darken, lighten } from '@material-ui/core/styles/colorManipulator';\n\n\n\n\n\n\nimport { pageTheme as defaultPageThemes } from './pageTheme';\n\nconst DEFAULT_FONT_FAMILY =\n  '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\n\n/**\n * A helper for creating theme options.\n *\n * @public\n */\nexport function createThemeOptions(\n  options,\n) {\n  const {\n    palette,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme,\n    pageTheme = defaultPageThemes,\n  } = options;\n\n  if (!pageTheme[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n\n  return {\n    palette,\n    props: {\n      MuiGrid: {\n        spacing: 2,\n      },\n      MuiSwitch: {\n        color: 'primary',\n      },\n    },\n    typography: {\n      fontFamily,\n      h5: {\n        fontWeight: 700,\n      },\n      h4: {\n        fontWeight: 700,\n        fontSize: 28,\n        marginBottom: 6,\n      },\n      h3: {\n        fontSize: 32,\n        fontWeight: 700,\n        marginBottom: 6,\n      },\n      h2: {\n        fontSize: 40,\n        fontWeight: 700,\n        marginBottom: 8,\n      },\n      h1: {\n        fontSize: 54,\n        fontWeight: 700,\n        marginBottom: 10,\n      },\n    },\n    page: pageTheme[defaultPageTheme],\n    getPageTheme: ({ themeId }) =>\n      pageTheme[themeId] ?? pageTheme[defaultPageTheme],\n  };\n}\n\n/**\n * A helper for creating theme overrides.\n *\n * @public\n */\nexport function createThemeOverrides(theme) {\n  return {\n    MuiCssBaseline: {\n      '@global': {\n        html: {\n          height: '100%',\n          fontFamily: theme.typography.fontFamily,\n        },\n        body: {\n          height: '100%',\n          fontFamily: theme.typography.fontFamily,\n          'overscroll-behavior-y': 'none',\n        },\n        a: {\n          color: 'inherit',\n          textDecoration: 'none',\n        },\n      },\n    },\n    MuiTableRow: {\n      // Alternating row backgrounds\n      root: {\n        '&:nth-of-type(odd)': {\n          backgroundColor: theme.palette.background.default,\n        },\n      },\n      // Use pointer for hoverable rows\n      hover: {\n        '&:hover': {\n          cursor: 'pointer',\n        },\n      },\n      // Alternating head backgrounds\n      head: {\n        '&:nth-of-type(odd)': {\n          backgroundColor: theme.palette.background.paper,\n        },\n      },\n    },\n    // Tables are more dense than default mui tables\n    MuiTableCell: {\n      root: {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        verticalAlign: 'middle',\n        lineHeight: '1',\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0,\n      },\n      sizeSmall: {\n        padding: theme.spacing(1.5, 2, 1.5, 2.5),\n      },\n      head: {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        color: 'rgb(179, 179, 179)',\n        fontWeight: 'normal',\n        lineHeight: '1',\n      },\n    },\n    MuiTabs: {\n      // Tabs are smaller than default mui tab rows\n      root: {\n        minHeight: 24,\n      },\n    },\n    MuiTab: {\n      // Tabs are smaller and have a hover background\n      root: {\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: 'initial',\n        letterSpacing: '0.07em',\n        '&:hover': {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95),\n        },\n        [theme.breakpoints.up('md')]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500,\n        },\n      },\n      textColorPrimary: {\n        color: theme.palette.link,\n      },\n    },\n    MuiTableSortLabel: {\n      // No color change on hover, just rely on the arrow showing up instead.\n      root: {\n        color: 'inherit',\n        '&:hover': {\n          color: 'inherit',\n        },\n        '&:focus': {\n          color: 'inherit',\n        },\n      },\n      // Bold font for highlighting selected column\n      active: {\n        fontWeight: 'bold',\n        color: 'inherit',\n      },\n    },\n    MuiListItemText: {\n      dense: {\n        // Default dense list items to adding ellipsis for really long str...\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n      },\n    },\n    MuiButton: {\n      text: {\n        // Text buttons have less padding by default, but we want to keep the original padding\n        padding: undefined,\n      },\n    },\n    MuiChip: {\n      root: {\n        backgroundColor: '#D9D9D9',\n        // By default there's no margin, but it's usually wanted, so we add some trailing margin\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        color: theme.palette.grey[900],\n      },\n      outlined: {\n        color: theme.palette.text.primary,\n      },\n      label: {\n        lineHeight: `${theme.spacing(2.5)}px`,\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: `${theme.spacing(1.75)}px`,\n      },\n      labelSmall: {\n        fontSize: `${theme.spacing(1.5)}px`,\n      },\n      deleteIcon: {\n        color: theme.palette.grey[500],\n        width: `${theme.spacing(3)}px`,\n        height: `${theme.spacing(3)}px`,\n        margin: `0 ${theme.spacing(0.75)}px 0 -${theme.spacing(0.75)}px`,\n      },\n      deleteIconSmall: {\n        width: `${theme.spacing(2)}px`,\n        height: `${theme.spacing(2)}px`,\n        margin: `0 ${theme.spacing(0.5)}px 0 -${theme.spacing(0.5)}px`,\n      },\n    },\n    MuiCard: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        display: 'flex',\n        flexDirection: 'column',\n      },\n    },\n    MuiCardHeader: {\n      root: {\n        // Reduce padding between header and content\n        paddingBottom: 0,\n      },\n    },\n    MuiCardContent: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        flexGrow: 1,\n        '&:last-child': {\n          paddingBottom: undefined,\n        },\n      },\n    },\n    MuiCardActions: {\n      root: {\n        // We default to putting the card actions at the end\n        justifyContent: 'flex-end',\n      },\n    },\n  };\n}\n\n/**\n * Creates a Backstage MUI theme using a palette. The theme is created with the\n * common Backstage options and component styles.\n *\n * @public\n */\nexport function createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createMuiTheme(themeOptions) ;\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createTheme } from './baseTheme';\nimport { pageTheme } from './pageTheme';\nimport { yellow } from '@material-ui/core/colors';\n\n/**\n * The default Backstage light theme.\n *\n * @public\n */\nexport const lightTheme = createTheme({\n  palette: {\n    type: 'light',\n    background: {\n      default: '#F8F8F8',\n    },\n    status: {\n      ok: '#1DB954',\n      warning: '#FF9800',\n      error: '#E22134',\n      running: '#2E77D0',\n      pending: '#FFED51',\n      aborted: '#757575',\n    },\n    bursts: {\n      fontColor: '#FEFEFE',\n      slackChannelText: '#ddd',\n      backgroundColor: {\n        default: '#7C3699',\n      },\n      gradient: {\n        linear: 'linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)',\n      },\n    },\n    primary: {\n      main: '#2E77D0',\n    },\n    banner: {\n      info: '#2E77D0',\n      error: '#E22134',\n      text: '#FFFFFF',\n      link: '#000000',\n      warning: '#FF9800',\n    },\n    border: '#E6E6E6',\n    textContrast: '#000000',\n    textVerySubtle: '#DDD',\n    textSubtle: '#6E6E6E',\n    highlight: '#FFFBCC',\n    errorBackground: '#FFEBEE',\n    warningBackground: '#F59B23',\n    infoBackground: '#ebf5ff',\n    errorText: '#CA001B',\n    infoText: '#004e8a',\n    warningText: '#000000',\n    linkHover: '#2196F3',\n    link: '#0A6EBE',\n    gold: yellow.A700,\n    navigation: {\n      background: '#171717',\n      indicator: '#9BF0E1',\n      color: '#b5b5b5',\n      selectedColor: '#FFF',\n      navItem: {\n        hoverBackground: '#404040',\n      },\n      submenu: {\n        background: '#404040',\n      },\n    },\n    pinSidebarButton: {\n      icon: '#181818',\n      background: '#BDBDBD',\n    },\n    tabbar: {\n      indicator: '#9BF0E1',\n    },\n  },\n  defaultPageTheme: 'home',\n  pageTheme,\n});\n\n/**\n * The default Backstage dark theme.\n *\n * @public\n */\nexport const darkTheme = createTheme({\n  palette: {\n    type: 'dark',\n    background: {\n      default: '#333333',\n    },\n    status: {\n      ok: '#71CF88',\n      warning: '#FFB84D',\n      error: '#F84C55',\n      running: '#3488E3',\n      pending: '#FEF071',\n      aborted: '#9E9E9E',\n    },\n    bursts: {\n      fontColor: '#FEFEFE',\n      slackChannelText: '#ddd',\n      backgroundColor: {\n        default: '#7C3699',\n      },\n      gradient: {\n        linear: 'linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)',\n      },\n    },\n    primary: {\n      main: '#9CC9FF',\n      dark: '#82BAFD',\n    },\n    secondary: {\n      main: '#FF88B2',\n    },\n    banner: {\n      info: '#2E77D0',\n      error: '#E22134',\n      text: '#FFFFFF',\n      link: '#000000',\n      warning: '#FF9800',\n    },\n    border: '#E6E6E6',\n    textContrast: '#FFFFFF',\n    textVerySubtle: '#727272',\n    textSubtle: '#CCCCCC',\n    highlight: '#FFFBCC',\n    errorBackground: '#FFEBEE',\n    warningBackground: '#F59B23',\n    infoBackground: '#ebf5ff',\n    errorText: '#CA001B',\n    infoText: '#004e8a',\n    warningText: '#000000',\n    linkHover: '#82BAFD',\n    link: '#9CC9FF',\n    gold: yellow.A700,\n    navigation: {\n      background: '#424242',\n      indicator: '#9BF0E1',\n      color: '#b5b5b5',\n      selectedColor: '#FFF',\n      navItem: {\n        hoverBackground: '#404040',\n      },\n      submenu: {\n        background: '#404040',\n      },\n    },\n    pinSidebarButton: {\n      icon: '#404040',\n      background: '#BDBDBD',\n    },\n    tabbar: {\n      indicator: '#9BF0E1',\n    },\n  },\n  defaultPageTheme: 'home',\n  pageTheme,\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nfunction getGlobalObject() {\n  if (typeof window !== 'undefined' && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== 'undefined' && self.Math === Math) {\n    return self;\n  }\n  // eslint-disable-next-line no-new-func\n  return Function('return this')();\n}\n\nconst globalObject = getGlobalObject();\n\nconst makeKey = (id) => `__@backstage/${id}__`;\n\n/**\n * Serializes access to a global singleton value, with the first caller creating the value.\n *\n * @public\n */\nexport function getOrCreateGlobalSingleton(\n  id,\n  supplier,\n) {\n  const key = makeKey(id);\n\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext, } from 'react';\nimport { getOrCreateGlobalSingleton } from './globalObject';\nimport { createVersionedValueMap, } from './VersionedValue';\n\n/**\n * Get the existing or create a new versioned React context that's\n * stored inside a global singleton.\n *\n * @param key - A key that uniquely identifies the context.\n * @public\n * @example\n *\n * ```ts\n * const MyContext = createVersionedContext<{ 1: string }>('my-context');\n *\n * const MyContextProvider = ({children}) => (\n *   <MyContext.Provider value={createVersionedValueMap({ 1: 'value-for-version-1' })}>\n *     {children}\n *   <MyContext.Provider>\n * )\n * ```\n */\nexport function createVersionedContext\n\n(key) {\n  return getOrCreateGlobalSingleton(key, () =>\n    createContext(undefined),\n  );\n}\n\n/**\n * A hook that simplifies the consumption of a versioned contexts that's\n * stored inside a global singleton.\n *\n * @param key - A key that uniquely identifies the context.\n * @public\n * @example\n *\n * ```ts\n * const versionedHolder = useVersionedContext<{ 1: string }>('my-context');\n *\n * if (!versionedHolder) {\n *   throw new Error('My context is not available!')\n * }\n *\n * const myValue = versionedHolder.atVersion(1);\n *\n * // ...\n * ```\n */\nexport function useVersionedContext\n\n(key) {\n  return useContext(createVersionedContext(key));\n}\n\n/**\n * Creates a helper for writing tests towards multiple different\n * combinations of versions provided from a context.\n *\n * @param key - A key that uniquely identifies the context.\n * @public\n * @example\n *\n * ```ts\n * const context = createVersionedContextForTesting('my-context');\n *\n * afterEach(() => {\n *   context.reset();\n * });\n *\n * it('should work when provided with version 1', () => {\n *   context.set({1: 'value-for-version-1'})\n *\n *   // ...\n * })\n * ```\n */\nexport function createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      (globalThis )[`__@backstage/${key}__`] = createContext(\n        createVersionedValueMap(versions),\n      );\n    },\n    reset() {\n      delete (globalThis )[`__@backstage/${key}__`];\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The versioned value interface is a container for a set of values that\n * can be looked up by version. It is intended to be used as a container\n * for values that can be versioned independently of package versions.\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * Creates a container for a map of versioned values that implements VersionedValue.\n *\n * @public\n */\nexport function createVersionedValueMap\n\n(versions) {\n  Object.freeze(versions);\n  return {\n    atVersion(version) {\n      return versions[version];\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef, } from '@backstage/core-plugin-api';\n\n\nexport const apacheAirflowApiRef = createApiRef({\n  id: 'plugin.apacheairflow.service',\n});\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport fetch from 'cross-fetch';\nimport qs from 'qs';\n\n\n\n\n\n\n\n\n\nexport class ApacheAirflowClient  {\n  discoveryApi;\n  baseUrl;\n\n  constructor({\n    discoveryApi,\n    baseUrl = 'http://localhost:8080',\n  }\n\n\n) {\n    this.discoveryApi = discoveryApi;\n    this.baseUrl = baseUrl.endsWith('/') ? baseUrl : `${baseUrl}/`;\n  }\n\n  /**\n   * List all DAGs in the Airflow instance\n   *\n   * @remarks\n   *\n   * All DAGs with a limit of 100 results per request are returned; this may be\n   * bogged-down for instances with many DAGs, in which case table pagination\n   * should be implemented\n   *\n   * @param objectsPerRequest - records returned per request in pagination\n   */\n  async listDags(options = { objectsPerRequest: 100 }) {\n    const dags = [];\n    const searchParams = {\n      limit: options.objectsPerRequest,\n      offset: 0,\n    };\n\n    for (;;) {\n      const response = await this.fetch(\n        `/dags?${qs.stringify(searchParams)}`,\n      );\n      dags.push(...response.dags);\n\n      if (dags.length >= response.total_entries) {\n        break;\n      }\n      if (typeof searchParams.offset !== 'undefined') {\n        searchParams.offset += options.objectsPerRequest;\n      }\n    }\n    return dags;\n  }\n\n  async updateDag(dagId, isPaused) {\n    const init = {\n      method: 'PATCH',\n      body: JSON.stringify({ is_paused: isPaused }),\n    };\n    return await this.fetch(`/dags/${dagId}`, init);\n  }\n\n  async getInstanceStatus() {\n    return await this.fetch('/health');\n  }\n\n  async getInstanceVersion() {\n    return await this.fetch('/version');\n  }\n\n   async fetch(input, init) {\n    const proxyUri = `${await this.discoveryApi.getBaseUrl('proxy')}/airflow`;\n    const response = await fetch(`${proxyUri}${input}`, init);\n    if (!response.ok) throw new Error(response.statusText);\n    return await response.json();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport React from 'react';\nimport { apiDocsConfigRef } from '../../config';\nimport { PlainApiDefinitionWidget } from '../PlainApiDefinitionWidget';\n\nimport { CardTab, TabbedCard } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const ApiDefinitionCard = () => {\n  const { entity } = useEntity();\n  const config = useApi(apiDocsConfigRef);\n  const { getApiDefinitionWidget } = config;\n\n  if (!entity) {\n    return React.createElement(Alert, { severity: \"error\",}, \"Could not fetch the API\"    );\n  }\n\n  const definitionWidget = getApiDefinitionWidget(entity);\n  const entityTitle = entity.metadata.title ?? entity.metadata.name;\n\n  if (definitionWidget) {\n    return (\n      React.createElement(TabbedCard, { title: entityTitle,}\n        , React.createElement(CardTab, { label: definitionWidget.title, key: \"widget\",}\n          , definitionWidget.component(entity.spec.definition)\n        )\n        , React.createElement(CardTab, { label: \"Raw\", key: \"raw\",}\n          , React.createElement(PlainApiDefinitionWidget, {\n            definition: entity.spec.definition,\n            language: definitionWidget.rawLanguage || entity.spec.type,}\n          )\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(TabbedCard, {\n      title: entityTitle,\n      children: [\n        // Has to be an array, otherwise typescript doesn't like that this has only a single child\n        React.createElement(CardTab, { label: entity.spec.type, key: \"raw\",}\n          , React.createElement(PlainApiDefinitionWidget, {\n            definition: entity.spec.definition,\n            language: entity.spec.type,}\n          )\n        ),\n      ],}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CodeSnippet } from '@backstage/core-components';\nimport { useTheme } from '@material-ui/core/styles';\n\n\n\n\n\n\nexport const GrpcApiDefinitionWidget = (\n  props,\n) => {\n  const theme = useTheme();\n  return (\n    React.createElement(CodeSnippet, {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: props.definition,\n      language: \"protobuf\",\n      showCopyCodeButton: true,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { AsyncApiDefinitionWidget } from '../AsyncApiDefinitionWidget';\nimport { GraphQlDefinitionWidget } from '../GraphQlDefinitionWidget';\nimport { OpenApiDefinitionWidget } from '../OpenApiDefinitionWidget';\nimport { GrpcApiDefinitionWidget } from '../GrpcApiDefinitionWidget';\n\n\n\n\n\n\n\n\nexport function defaultDefinitionWidgets() {\n  return [\n    {\n      type: 'openapi',\n      title: 'OpenAPI',\n      rawLanguage: 'yaml',\n      component: definition => (\n        React.createElement(OpenApiDefinitionWidget, { definition: definition,} )\n      ),\n    },\n    {\n      type: 'asyncapi',\n      title: 'AsyncAPI',\n      rawLanguage: 'yaml',\n      component: definition => (\n        React.createElement(AsyncApiDefinitionWidget, { definition: definition,} )\n      ),\n    },\n    {\n      type: 'graphql',\n      title: 'GraphQL',\n      rawLanguage: 'graphql',\n      component: definition => (\n        React.createElement(GraphQlDefinitionWidget, { definition: definition,} )\n      ),\n    },\n    {\n      type: 'grpc',\n      title: 'gRPC',\n      component: definition => (\n        React.createElement(GrpcApiDefinitionWidget, { definition: definition,} )\n      ),\n    },\n  ];\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React from 'react';\nimport { apiDocsConfigRef } from '../../config';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const ApiTypeTitle = ({ apiEntity }) => {\n  const config = useApi(apiDocsConfigRef);\n  const definition = config.getApiDefinitionWidget(apiEntity);\n  const type = definition ? definition.title : apiEntity.spec.type;\n\n  return React.createElement('span', null, type);\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  CreateButton,\n  PageWithHeader,\n  SupportButton,\n\n\n} from '@backstage/core-components';\nimport { configApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { CatalogTable, } from '@backstage/plugin-catalog';\nimport {\n  EntityKindPicker,\n  EntityLifecyclePicker,\n  EntityListProvider,\n  EntityOwnerPicker,\n  EntityTagPicker,\n  EntityTypePicker,\n\n  UserListPicker,\n  CatalogFilterLayout,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { registerComponentRouteRef } from '../../routes';\n\nconst defaultColumns = [\n  CatalogTable.columns.createNameColumn({ defaultKind: 'API' }),\n  CatalogTable.columns.createSystemColumn(),\n  CatalogTable.columns.createOwnerColumn(),\n  CatalogTable.columns.createSpecTypeColumn(),\n  CatalogTable.columns.createSpecLifecycleColumn(),\n  CatalogTable.columns.createMetadataDescriptionColumn(),\n  CatalogTable.columns.createTagsColumn(),\n];\n\n/**\n * DefaultApiExplorerPageProps\n * @public\n */\n\n\n\n\n\n\n/**\n * DefaultApiExplorerPage\n * @public\n */\nexport const DefaultApiExplorerPage = ({\n  initiallySelectedFilter = 'all',\n  columns,\n  actions,\n}) => {\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `${\n    configApi.getOptionalString('organization.name') ?? 'Backstage'\n  } API Explorer`;\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n\n  return (\n    React.createElement(PageWithHeader, {\n      themeId: \"apis\",\n      title: \"APIs\",\n      subtitle: generatedSubtitle,\n      pageTitleOverride: \"APIs\",}\n    \n      , React.createElement(Content, null\n        , React.createElement(ContentHeader, { title: \"\",}\n          , React.createElement(CreateButton, {\n            title: \"Register Existing API\"  ,\n            to: registerComponentLink?.(),}\n          )\n          , React.createElement(SupportButton, null, \"All your APIs\"  )\n        )\n        , React.createElement(EntityListProvider, null\n          , React.createElement(CatalogFilterLayout, null\n            , React.createElement(CatalogFilterLayout.Filters, null\n              , React.createElement(EntityKindPicker, { initialFilter: \"api\", hidden: true,} )\n              , React.createElement(EntityTypePicker, null )\n              , React.createElement(UserListPicker, { initialFilter: initiallySelectedFilter,} )\n              , React.createElement(EntityOwnerPicker, null )\n              , React.createElement(EntityLifecyclePicker, null )\n              , React.createElement(EntityTagPicker, null )\n            )\n            , React.createElement(CatalogFilterLayout.Content, null\n              , React.createElement(CatalogTable, {\n                columns: columns || defaultColumns,\n                actions: actions,}\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useOutlet } from 'react-router';\nimport {\n  DefaultApiExplorerPage,\n\n} from './DefaultApiExplorerPage';\n\n/**\n * ApiExplorerPage\n * @public\n */\nexport const ApiExplorerPage = (props) => {\n  const outlet = useOutlet();\n\n  return outlet || React.createElement(DefaultApiExplorerPage, { ...props,} );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { EntityTable } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { ApiTypeTitle } from '../ApiDefinitionCard';\n\n\nexport function createSpecApiTypeColumn() {\n  return {\n    title: 'Type',\n    field: 'spec.type',\n    render: entity => React.createElement(ApiTypeTitle, { apiEntity: entity,} ),\n  };\n}\n\n// TODO: This could be moved to plugin-catalog-react if we wouldn't have a\n// special createSpecApiTypeColumn. But this is required to use ApiTypeTitle to\n// resolve the display name of an entity. Is the display name really worth it?\n\nexport const apiEntityColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: 'API' }),\n  EntityTable.columns.createSystemColumn(),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn(),\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_CONSUMES_API } from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { apiEntityColumns } from './presets';\nimport {\n  CodeSnippet,\n  InfoCard,\n\n  Link,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\n\n\n\n\n\nexport const ConsumedApisCard = ({ variant = 'gridItem' }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_CONSUMES_API,\n  });\n\n  if (loading) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Consumed APIs\" ,}\n        , React.createElement(Progress, null )\n      )\n    );\n  }\n\n  if (error || !entities) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Consumed APIs\" ,}\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not load APIs\"   ,\n          message: React.createElement(CodeSnippet, { text: `${error}`, language: \"text\",} ),}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(EntityTable, {\n      title: \"Consumed APIs\" ,\n      variant: variant,\n      emptyContent: \n        React.createElement('div', { style: { textAlign: 'center' },}\n          , React.createElement(Typography, { variant: \"body1\",}, \"This \"\n             , entity.kind.toLocaleLowerCase('en-US'), \" does not consume any APIs.\"\n\n          )\n          , React.createElement(Typography, { variant: \"body2\",}\n            , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\",}, \"Learn how to change this.\"\n\n            )\n          )\n        )\n      ,\n      columns: apiEntityColumns,\n      entities: entities ,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_HAS_PART } from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { createSpecApiTypeColumn } from './presets';\nimport {\n  CodeSnippet,\n  InfoCard,\n\n  Link,\n  Progress,\n\n  WarningPanel,\n} from '@backstage/core-components';\n\n\n\n\n\nconst columns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: 'API' }),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn(),\n];\n\nexport const HasApisCard = ({ variant = 'gridItem' }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_HAS_PART,\n    kind: 'API',\n  });\n\n  if (loading) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"APIs\",}\n        , React.createElement(Progress, null )\n      )\n    );\n  }\n\n  if (error || !entities) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"APIs\",}\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not load APIs\"   ,\n          message: React.createElement(CodeSnippet, { text: `${error}`, language: \"text\",} ),}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(EntityTable, {\n      title: \"APIs\",\n      variant: variant,\n      emptyContent: \n        React.createElement('div', { style: { textAlign: 'center' },}\n          , React.createElement(Typography, { variant: \"body1\",}, \"This \"\n             , entity.kind.toLocaleLowerCase('en-US'), \" does not contain any APIs.\"\n\n          )\n          , React.createElement(Typography, { variant: \"body2\",}\n            , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api\",}, \"Learn how to change this.\"\n\n            )\n          )\n        )\n      ,\n      columns: columns,\n      entities: entities ,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_PROVIDES_API } from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { apiEntityColumns } from './presets';\nimport {\n  CodeSnippet,\n  InfoCard,\n\n  Link,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\n\n\n\n\n\nexport const ProvidedApisCard = ({ variant = 'gridItem' }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_PROVIDES_API,\n  });\n\n  if (loading) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Provided APIs\" ,}\n        , React.createElement(Progress, null )\n      )\n    );\n  }\n\n  if (error || !entities) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Provided APIs\" ,}\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not load APIs\"   ,\n          message: React.createElement(CodeSnippet, { text: `${error}`, language: \"text\",} ),}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(EntityTable, {\n      title: \"Provided APIs\" ,\n      variant: variant,\n      emptyContent: \n        React.createElement('div', { style: { textAlign: 'center' },}\n          , React.createElement(Typography, { variant: \"body1\",}, \"This \"\n             , entity.kind.toLocaleLowerCase('en-US'), \" does not provide any APIs.\"\n\n          )\n          , React.createElement(Typography, { variant: \"body2\",}\n            , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\",}, \"Learn how to change this.\"\n\n            )\n          )\n        )\n      ,\n      columns: apiEntityColumns,\n      entities: entities ,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Progress } from '@backstage/core-components';\nimport React, { Suspense } from 'react';\n\n// The asyncapi component and related CSS has a significant size, only load it\n// if the element is actually used.\nconst LazyAsyncApiDefinition = React.lazy(() =>\n  import('./AsyncApiDefinition').then(m => ({\n    default: m.AsyncApiDefinition,\n  })),\n);\n\n\n\n\n\nexport const AsyncApiDefinitionWidget = (\n  props,\n) => {\n  return (\n    React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n      , React.createElement(LazyAsyncApiDefinition, { ...props,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_API_CONSUMED_BY,\n} from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport {\n  CodeSnippet,\n  InfoCard,\n\n  Link,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\n\n\n\n\n\nexport const ConsumingComponentsCard = ({ variant = 'gridItem' }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_CONSUMED_BY,\n  });\n\n  if (loading) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Consumers\",}\n        , React.createElement(Progress, null )\n      )\n    );\n  }\n\n  if (error || !entities) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Consumers\",}\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not load components\"   ,\n          message: React.createElement(CodeSnippet, { text: `${error}`, language: \"text\",} ),}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(EntityTable, {\n      title: \"Consumers\",\n      variant: variant,\n      emptyContent: \n        React.createElement('div', { style: { textAlign: 'center' },}\n          , React.createElement(Typography, { variant: \"body1\",}, \"No component consumes this API.\"\n\n          )\n          , React.createElement(Typography, { variant: \"body2\",}\n            , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\",}, \"Learn how to change this.\"\n\n            )\n          )\n        )\n      ,\n      columns: EntityTable.componentEntityColumns,\n      entities: entities ,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_API_PROVIDED_BY,\n} from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport {\n  CodeSnippet,\n  InfoCard,\n\n  Link,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\n\n\n\n\n\nexport const ProvidingComponentsCard = ({ variant = 'gridItem' }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_PROVIDED_BY,\n  });\n\n  if (loading) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Providers\",}\n        , React.createElement(Progress, null )\n      )\n    );\n  }\n\n  if (error || !entities) {\n    return (\n      React.createElement(InfoCard, { variant: variant, title: \"Providers\",}\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not load components\"   ,\n          message: React.createElement(CodeSnippet, { text: `${error}`, language: \"text\",} ),}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(EntityTable, {\n      title: \"Providers\",\n      variant: variant,\n      emptyContent: \n        React.createElement('div', { style: { textAlign: 'center' },}\n          , React.createElement(Typography, { variant: \"body1\",}, \"No component provides this API.\"\n\n          )\n          , React.createElement(Typography, { variant: \"body2\",}\n            , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\",}, \"Learn how to change this.\"\n\n            )\n          )\n        )\n      ,\n      columns: EntityTable.componentEntityColumns,\n      entities: entities ,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Progress } from '@backstage/core-components';\nimport React, { Suspense } from 'react';\n\n// The graphql component, graphql and related CSS has a significant size, only\n// load it if the element is actually used.\nconst LazyGraphQlDefinition = React.lazy(() =>\n  import('./GraphQlDefinition').then(m => ({\n    default: m.GraphQlDefinition,\n  })),\n);\n\n\n\n\n\nexport const GraphQlDefinitionWidget = (\n  props,\n) => {\n  return (\n    React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n      , React.createElement(LazyGraphQlDefinition, { ...props,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Progress } from '@backstage/core-components';\nimport React, { Suspense } from 'react';\n\n// The swagger-ui component and related CSS has a significant size, only load it\n// if the element is actually used.\nconst LazyOpenApiDefinition = React.lazy(() =>\n  import('./OpenApiDefinition').then(m => ({\n    default: m.OpenApiDefinition,\n  })),\n);\n\n\n\n\n\nexport const OpenApiDefinitionWidget = (\n  props,\n) => {\n  return (\n    React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n      , React.createElement(LazyOpenApiDefinition, { ...props,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CodeSnippet } from '@backstage/core-components';\n\n\n\n\n\n\nexport const PlainApiDefinitionWidget = (\n  props,\n) => {\n  return (\n    React.createElement(CodeSnippet, {\n      text: props.definition,\n      language: props.language,\n      showCopyCodeButton: true,}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const apiDocsConfigRef = createApiRef({\n  id: 'plugin.api-docs.config',\n});\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createExternalRouteRef,\n  createRouteRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRoute = createRouteRef({\n  id: 'api-docs',\n});\n\nexport const registerComponentRouteRef = createExternalRouteRef({\n  id: 'register-component',\n  optional: true,\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport var BuildResult; (function (BuildResult) {\n  /**\n   * No result\n   */\n  const None = 0; BuildResult[BuildResult[\"None\"] = None] = \"None\";\n  /**\n   * The build completed successfully.\n   */\n  const Succeeded = 2; BuildResult[BuildResult[\"Succeeded\"] = Succeeded] = \"Succeeded\";\n  /**\n   * The build completed compilation successfully but had other errors.\n   */\n  const PartiallySucceeded = 4; BuildResult[BuildResult[\"PartiallySucceeded\"] = PartiallySucceeded] = \"PartiallySucceeded\";\n  /**\n   * The build completed unsuccessfully.\n   */\n  const Failed = 8; BuildResult[BuildResult[\"Failed\"] = Failed] = \"Failed\";\n  /**\n   * The build was canceled before starting.\n   */\n  const Canceled = 32; BuildResult[BuildResult[\"Canceled\"] = Canceled] = \"Canceled\";\n})(BuildResult || (BuildResult = {}));\n\nexport var BuildStatus; (function (BuildStatus) {\n  /**\n   * No status.\n   */\n  const None = 0; BuildStatus[BuildStatus[\"None\"] = None] = \"None\";\n  /**\n   * The build is currently in progress.\n   */\n  const InProgress = 1; BuildStatus[BuildStatus[\"InProgress\"] = InProgress] = \"InProgress\";\n  /**\n   * The build has completed.\n   */\n  const Completed = 2; BuildStatus[BuildStatus[\"Completed\"] = Completed] = \"Completed\";\n  /**\n   * The build is cancelling\n   */\n  const Cancelling = 4; BuildStatus[BuildStatus[\"Cancelling\"] = Cancelling] = \"Cancelling\";\n  /**\n   * The build is inactive in the queue.\n   */\n  const Postponed = 8; BuildStatus[BuildStatus[\"Postponed\"] = Postponed] = \"Postponed\";\n  /**\n   * The build has not yet started.\n   */\n  const NotStarted = 32; BuildStatus[BuildStatus[\"NotStarted\"] = NotStarted] = \"NotStarted\";\n  /**\n   * All status.\n   */\n  const All = 47; BuildStatus[BuildStatus[\"All\"] = All] = \"All\";\n})(BuildStatus || (BuildStatus = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport var PullRequestStatus; (function (PullRequestStatus) {\n  /**\n   * Status not set. Default state.\n   */\n  const NotSet = 0; PullRequestStatus[PullRequestStatus[\"NotSet\"] = NotSet] = \"NotSet\";\n  /**\n   * Pull request is active.\n   */\n  const Active = 1; PullRequestStatus[PullRequestStatus[\"Active\"] = Active] = \"Active\";\n  /**\n   * Pull request is abandoned.\n   */\n  const Abandoned = 2; PullRequestStatus[PullRequestStatus[\"Abandoned\"] = Abandoned] = \"Abandoned\";\n  /**\n   * Pull request is completed.\n   */\n  const Completed = 3; PullRequestStatus[PullRequestStatus[\"Completed\"] = Completed] = \"Completed\";\n  /**\n   * Used in pull request search criteria to include all statuses.\n   */\n  const All = 4; PullRequestStatus[PullRequestStatus[\"All\"] = All] = \"All\";\n})(PullRequestStatus || (PullRequestStatus = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Status of a policy which is running against a specific pull request.\n */\nexport var PolicyEvaluationStatus; (function (PolicyEvaluationStatus) {\n  /**\n   * The policy is either queued to run, or is waiting for some event before progressing.\n   */\n  const Queued = 0; PolicyEvaluationStatus[PolicyEvaluationStatus[\"Queued\"] = Queued] = \"Queued\";\n  /**\n   * The policy is currently running.\n   */\n  const Running = 1; PolicyEvaluationStatus[PolicyEvaluationStatus[\"Running\"] = Running] = \"Running\";\n  /**\n   * The policy has been fulfilled for this pull request.\n   */\n  const Approved = 2; PolicyEvaluationStatus[PolicyEvaluationStatus[\"Approved\"] = Approved] = \"Approved\";\n  /**\n   * The policy has rejected this pull request.\n   */\n  const Rejected = 3; PolicyEvaluationStatus[PolicyEvaluationStatus[\"Rejected\"] = Rejected] = \"Rejected\";\n  /**\n   * The policy does not apply to this pull request.\n   */\n  const NotApplicable = 4; PolicyEvaluationStatus[PolicyEvaluationStatus[\"NotApplicable\"] = NotApplicable] = \"NotApplicable\";\n  /**\n   * The policy has encountered an unexpected error.\n   */\n  const Broken = 5; PolicyEvaluationStatus[PolicyEvaluationStatus[\"Broken\"] = Broken] = \"Broken\";\n})(PolicyEvaluationStatus || (PolicyEvaluationStatus = {}));\n\nexport var PolicyType; (function (PolicyType) {\n  const Build = 'Build'; PolicyType[\"Build\"] = Build;\n  const Status = 'Status'; PolicyType[\"Status\"] = Status;\n  const MinimumReviewers = 'MinimumReviewers'; PolicyType[\"MinimumReviewers\"] = MinimumReviewers;\n  const Comments = 'Comments'; PolicyType[\"Comments\"] = Comments;\n  const RequiredReviewers = 'RequiredReviewers'; PolicyType[\"RequiredReviewers\"] = RequiredReviewers;\n  const MergeStrategy = 'MergeStrategy'; PolicyType[\"MergeStrategy\"] = MergeStrategy;\n})(PolicyType || (PolicyType = {}));\n\nexport var PolicyTypeId; (function (PolicyTypeId) {\n  /**\n   * This policy will require a successful build has been performed before updating protected refs.\n   */\n  const Build = '0609b952-1397-4640-95ec-e00a01b2c241'; PolicyTypeId[\"Build\"] = Build;\n  /**\n   * This policy will require a successful status to be posted before updating protected refs.\n   */\n  const Status = 'cbdc66da-9728-4af8-aada-9a5a32e4a226'; PolicyTypeId[\"Status\"] = Status;\n  /**\n   * This policy will ensure that a minimum number of reviewers have approved a pull request before completion.\n   */\n  const MinimumReviewers = 'fa4e907d-c16b-4a4c-9dfa-4906e5d171dd'; PolicyTypeId[\"MinimumReviewers\"] = MinimumReviewers;\n  /**\n   * Check if the pull request has any active comments.\n   */\n  const Comments = 'c6a1889d-b943-4856-b76f-9e46bb6b0df2'; PolicyTypeId[\"Comments\"] = Comments;\n  /**\n   * This policy will ensure that required reviewers are added for modified files matching specified patterns.\n   */\n  const RequiredReviewers = 'fd2167ab-b0be-447a-8ec8-39368250530e'; PolicyTypeId[\"RequiredReviewers\"] = RequiredReviewers;\n  /**\n   * This policy ensures that pull requests use a consistent merge strategy.\n   */\n  const MergeStrategy = 'fa4e907d-c16b-4a4c-9dfa-4916e5d171ab'; PolicyTypeId[\"MergeStrategy\"] = MergeStrategy;\n})(PolicyTypeId || (PolicyTypeId = {}));\n\nexport var PullRequestVoteStatus; (function (PullRequestVoteStatus) {\n  const Approved = 10; PullRequestVoteStatus[PullRequestVoteStatus[\"Approved\"] = Approved] = \"Approved\";\n  const ApprovedWithSuggestions = 5; PullRequestVoteStatus[PullRequestVoteStatus[\"ApprovedWithSuggestions\"] = ApprovedWithSuggestions] = \"ApprovedWithSuggestions\";\n  const NoVote = 0; PullRequestVoteStatus[PullRequestVoteStatus[\"NoVote\"] = NoVote] = \"NoVote\";\n  const WaitingForAuthor = -5; PullRequestVoteStatus[PullRequestVoteStatus[\"WaitingForAuthor\"] = WaitingForAuthor] = \"WaitingForAuthor\";\n  const Rejected = -10; PullRequestVoteStatus[PullRequestVoteStatus[\"Rejected\"] = Rejected] = \"Rejected\";\n})(PullRequestVoteStatus || (PullRequestVoteStatus = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const azureDevOpsApiRef = createApiRef({\n  id: 'plugin.azure-devops.service',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\n\nexport class AzureDevOpsClient  {\n    discoveryApi;\n    identityApi;\n\n   constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n   async getRepoBuilds(\n    projectName,\n    repoName,\n    options,\n  ) {\n    const queryString = new URLSearchParams();\n    if (options?.top) {\n      queryString.append('top', options.top.toString());\n    }\n    const urlSegment = `repo-builds/${encodeURIComponent(\n      projectName,\n    )}/${encodeURIComponent(repoName)}?${queryString}`;\n\n    const items = await this.get(urlSegment);\n    return { items };\n  }\n\n   async getGitTags(\n    projectName,\n    repoName,\n  ) {\n    const urlSegment = `git-tags/${encodeURIComponent(\n      projectName,\n    )}/${encodeURIComponent(repoName)}`;\n\n    const items = await this.get(urlSegment);\n    return { items };\n  }\n\n   async getPullRequests(\n    projectName,\n    repoName,\n    options,\n  ) {\n    const queryString = new URLSearchParams();\n    if (options?.top) {\n      queryString.append('top', options.top.toString());\n    }\n    if (options?.status) {\n      queryString.append('status', options.status.toString());\n    }\n    const urlSegment = `pull-requests/${encodeURIComponent(\n      projectName,\n    )}/${encodeURIComponent(repoName)}?${queryString}`;\n\n    const items = await this.get(urlSegment);\n    return { items };\n  }\n\n   getDashboardPullRequests(\n    projectName,\n  ) {\n    return this.get(\n      `dashboard-pull-requests/${projectName}?top=100`,\n    );\n  }\n\n   getAllTeams() {\n    return this.get('all-teams');\n  }\n\n   getUserTeamIds(userId) {\n    return this.get(`users/${userId}/team-ids`);\n  }\n\n   async getBuildRuns(\n    projectName,\n    repoName,\n    definitionName,\n    options,\n  ) {\n    const queryString = new URLSearchParams();\n    if (repoName) {\n      queryString.append('repoName', repoName);\n    }\n    if (definitionName) {\n      queryString.append('definitionName', definitionName);\n    }\n    if (options?.top) {\n      queryString.append('top', options.top.toString());\n    }\n    const urlSegment = `builds/${encodeURIComponent(\n      projectName,\n    )}?${queryString}`;\n    const items = await this.get(urlSegment);\n    return { items };\n  }\n\n   async get(path) {\n    const baseUrl = `${await this.discoveryApi.getBaseUrl('azure-devops')}/`;\n    const url = new URL(path, baseUrl);\n\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const response = await fetch(url.toString(), {\n      headers: idToken ? { Authorization: `Bearer ${idToken}` } : {},\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return response.json() ;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SvgIcon, } from '@material-ui/core';\n\nimport React from 'react';\n\nexport const AzurePullRequestsIcon = (props) => (\n  React.createElement(SvgIcon, { ...props, viewBox: \"0 0 512 512\"   ,}\n    , React.createElement('circle', {\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"32\",\n      cx: \"128\",\n      cy: \"416\",\n      r: \"48\",}\n    )\n    , React.createElement('path', {\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"32\",\n      d: \"M128 144v224M288 160l-64-64 64-64\"   ,}\n    )\n    , React.createElement('circle', {\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"32\",\n      cx: \"128\",\n      cy: \"96\",\n      r: \"48\",}\n    )\n    , React.createElement('circle', {\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"32\",\n      cx: \"384\",\n      cy: \"416\",\n      r: \"48\",}\n    )\n    , React.createElement('path', {\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"32\",\n      d: \"M240 96h84a60 60 0 0160 60v212\"     ,}\n    )\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function arrayHas(arr, value) {\n  return new Set(arr).has(value);\n}\n\nexport function stringArrayHas(\n  arr,\n  value,\n  ignoreCase = false,\n) {\n  if (ignoreCase) {\n    return arrayHas(\n      arr.map(a => a?.toLocaleLowerCase('en-US')),\n      value?.toLocaleLowerCase('en-US'),\n    );\n  }\n\n  return arrayHas(arr, value);\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function equalsIgnoreCase(str1, str2) {\n  return str1.toLocaleLowerCase('en-US') === str2.toLocaleLowerCase('en-US');\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { stringArrayHas } from '../../../../utils';\n\n\n\n\n\n\nexport function createAssignedToTeamFilter(\n  filter,\n) {\n  return (pullRequest) => {\n    const reviewerIds = pullRequest.reviewers?.map(reviewer => reviewer.id);\n\n    if (!reviewerIds) {\n      return false;\n    }\n\n    return stringArrayHas(reviewerIds, filter.teamId, true);\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FilterType, } from './types';\n\n\nimport { createAssignedToTeamFilter } from './assignedToTeamFilter';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createAssignedToTeamsFilter(\n  filter,\n) {\n  const teamIds = filter.teamIds;\n\n  return (pullRequest) => {\n    if (!teamIds) {\n      return false;\n    }\n\n    return teamIds.some(teamId => {\n      return createAssignedToTeamFilter({\n        type: FilterType.AssignedToTeam,\n        teamId,\n      })(pullRequest);\n    });\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { stringArrayHas } from '../../../../utils';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createAssignedToUserFilter(\n  filter,\n) {\n  const email = filter.email;\n\n  return (pullRequest) => {\n    const uniqueNames = pullRequest.reviewers?.map(\n      reviewer => reviewer.uniqueName,\n    );\n\n    if (!email || !uniqueNames) {\n      return false;\n    }\n\n    return stringArrayHas(uniqueNames, email, true);\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { stringArrayHas } from '../../../../utils';\n\n\n\n\n\n\nexport function createCreatedByTeamFilter(\n  filter,\n) {\n  return (pullRequest) => {\n    const [createdByTeams, team] =\n      'teamId' in filter\n        ? [pullRequest.createdBy?.teamIds, filter.teamId]\n        : [pullRequest.createdBy?.teamNames, filter.teamName];\n\n    if (!createdByTeams) {\n      return false;\n    }\n\n    return stringArrayHas(createdByTeams, team, true);\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FilterType, } from './types';\n\n\nimport { createCreatedByTeamFilter } from './createdByTeamFilter';\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createCreatedByTeamsFilter(\n  filter,\n) {\n  return (pullRequest) => {\n    if ('teamNames' in filter) {\n      const teamNames = filter.teamNames;\n\n      if (!teamNames) {\n        return false;\n      }\n\n      return teamNames.some(teamName => {\n        return createCreatedByTeamFilter({\n          type: FilterType.CreatedByTeam,\n          teamName,\n        })(pullRequest);\n      });\n    }\n\n    const teamIds = filter.teamIds;\n\n    if (!teamIds) {\n      return false;\n    }\n\n    return teamIds.some(teamId => {\n      return createCreatedByTeamFilter({\n        type: FilterType.CreatedByTeam,\n        teamId,\n      })(pullRequest);\n    });\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { equalsIgnoreCase } from '../../../../utils';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createCreatedByUserFilter(\n  filter,\n) {\n  const email = filter.email;\n\n  return (pullRequest) => {\n    const uniqueName = pullRequest.createdBy?.uniqueName;\n\n    if (!email || !uniqueName) {\n      return false;\n    }\n\n    return equalsIgnoreCase(email, uniqueName);\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AllFilter } from './allFilter';\nimport { AssignedToTeamFilter } from './assignedToTeamFilter';\nimport { AssignedToTeamsFilter } from './assignedToTeamsFilter';\nimport { AssignedToUserFilter } from './assignedToUserFilter';\nimport { CreatedByTeamFilter } from './createdByTeamFilter';\nimport { CreatedByTeamsFilter } from './createdByTeamsFilter';\nimport { CreatedByUserFilter } from './createdByUserFilter';\n\n\nexport var FilterType; (function (FilterType) {\n  const All = 'All'; FilterType[\"All\"] = All;\n\n  // Assigned To\n  const AssignedToUser = 'AssignedToUser'; FilterType[\"AssignedToUser\"] = AssignedToUser;\n  const AssignedToCurrentUser = 'AssignedToCurrentUser'; FilterType[\"AssignedToCurrentUser\"] = AssignedToCurrentUser;\n  const AssignedToTeam = 'AssignedToTeam'; FilterType[\"AssignedToTeam\"] = AssignedToTeam;\n  const AssignedToTeams = 'AssignedToTeams'; FilterType[\"AssignedToTeams\"] = AssignedToTeams;\n  const AssignedToCurrentUsersTeams = 'AssignedToCurrentUsersTeams'; FilterType[\"AssignedToCurrentUsersTeams\"] = AssignedToCurrentUsersTeams;\n\n  // Created By\n  const CreatedByUser = 'CreatedByUser'; FilterType[\"CreatedByUser\"] = CreatedByUser;\n  const CreatedByCurrentUser = 'CreatedByCurrentUser'; FilterType[\"CreatedByCurrentUser\"] = CreatedByCurrentUser;\n  const CreatedByTeam = 'CreatedByTeam'; FilterType[\"CreatedByTeam\"] = CreatedByTeam;\n  const CreatedByTeams = 'CreatedByTeams'; FilterType[\"CreatedByTeams\"] = CreatedByTeams;\n  const CreatedByCurrentUsersTeams = 'CreatedByCurrentUsersTeams'; FilterType[\"CreatedByCurrentUsersTeams\"] = CreatedByCurrentUsersTeams;\n})(FilterType || (FilterType = {}));\n\nexport const FilterTypes = [\n  FilterType.All,\n\n  FilterType.AssignedToUser,\n  FilterType.AssignedToCurrentUser,\n  FilterType.AssignedToTeam,\n  FilterType.AssignedToTeams,\n  FilterType.AssignedToCurrentUsersTeams,\n\n  FilterType.CreatedByUser,\n  FilterType.CreatedByCurrentUser,\n  FilterType.CreatedByTeam,\n  FilterType.CreatedByTeams,\n  FilterType.CreatedByCurrentUsersTeams,\n] ;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createAllFilter() {\n  return (_pullRequest) => true;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FilterType, } from './types';\n\n\nimport { createAllFilter } from './allFilter';\nimport { createAssignedToTeamFilter } from './assignedToTeamFilter';\nimport { createAssignedToTeamsFilter } from './assignedToTeamsFilter';\nimport { createAssignedToUserFilter } from './assignedToUserFilter';\nimport { createCreatedByTeamFilter } from './createdByTeamFilter';\nimport { createCreatedByTeamsFilter } from './createdByTeamsFilter';\nimport { createCreatedByUserFilter } from './createdByUserFilter';\n\nexport function createFilter(filters) {\n  const mapFilter = (filter) => {\n    switch (filter.type) {\n      case FilterType.AssignedToUser:\n      case FilterType.AssignedToCurrentUser:\n        return createAssignedToUserFilter(filter);\n\n      case FilterType.CreatedByUser:\n      case FilterType.CreatedByCurrentUser:\n        return createCreatedByUserFilter(filter);\n\n      case FilterType.AssignedToTeam:\n        return createAssignedToTeamFilter(filter);\n\n      case FilterType.CreatedByTeam:\n        return createCreatedByTeamFilter(filter);\n\n      case FilterType.AssignedToTeams:\n      case FilterType.AssignedToCurrentUsersTeams:\n        return createAssignedToTeamsFilter(filter);\n\n      case FilterType.CreatedByTeams:\n      case FilterType.CreatedByCurrentUsersTeams:\n        return createCreatedByTeamsFilter(filter);\n\n      case FilterType.All:\n        return createAllFilter();\n\n      default:\n        return _ => false;\n    }\n  };\n\n  if (Array.isArray(filters)) {\n    if (filters.length === 1) {\n      return mapFilter(filters[0]);\n    }\n\n    return (pullRequest) =>\n      filters.every(filter => mapFilter(filter)(pullRequest));\n  }\n\n  return mapFilter(filters);\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  PullRequestVoteStatus,\n\n} from '@backstage/plugin-azure-devops-common';\nimport { createFilter } from './filters';\n\n\n\n\n\n\n/**\n * Filters a reviewer based on vote status and if the reviewer is required.\n * @param reviewer - a reviewer to filter.\n * @returns whether or not to filter the `reviewer`.\n */\nexport function reviewerFilter(reviewer) {\n  return reviewer.voteStatus === PullRequestVoteStatus.NoVote\n    ? !!reviewer.isRequired\n    : !reviewer.isContainer;\n}\n\n/**\n * Removes values from the provided array and returns them.\n * @param arr - the array to extract values from.\n * @param filter - a filter used to extract values from the provided array.\n * @returns the values that were extracted from the array.\n *\n * @example\n * ```ts\n * const numbers = [1, 2, 3, 4, 5, 6];\n * const numberFilter = (num: number): boolean => num > 3;\n * const extractedNumbers = arrayExtract(numbers, numberFilter);\n * console.log(numbers); // [1, 2, 3]\n * console.log(extractedNumbers); // [4, 5, 6]\n * ```\n *\n * @example\n * ```ts\n * const numbers = [1, 2, 3, 4, 5, 6];\n * const numberFilter = (num: number): boolean => num % 2 === 0;\n * const extractedNumbers = arrayExtract(numbers, numberFilter);\n * console.log(numbers); // [1, 3, 5]\n * console.log(extractedNumbers); // [2, 4, 6]\n * ```\n */\nexport function arrayExtract(arr, filter) {\n  const extractedValues = [];\n\n  for (let i = 0; i - extractedValues.length < arr.length; i++) {\n    const offsetIndex = i - extractedValues.length;\n\n    const value = arr[offsetIndex];\n\n    if (filter(value)) {\n      arr.splice(offsetIndex, 1);\n      extractedValues.push(value);\n    }\n  }\n\n  return extractedValues;\n}\n\n/**\n * Creates groups of pull requests based on a list of `PullRequestGroupConfig`.\n * @param pullRequests - all pull requests to be split up into groups.\n * @param configs - the config used for splitting up the pull request groups.\n * @returns a list of pull request groups.\n */\nexport function getPullRequestGroups(\n  pullRequests,\n  configs,\n) {\n  if (!pullRequests) {\n    return undefined;\n  }\n\n  const remainingPullRequests = [...pullRequests];\n  const pullRequestGroups = [];\n\n  configs.forEach(({ title, filter: configFilter, simplified }) => {\n    const groupPullRequests = arrayExtract(remainingPullRequests, configFilter);\n\n    pullRequestGroups.push({\n      title,\n      pullRequests: groupPullRequests,\n      simplified,\n    });\n  });\n\n  return pullRequestGroups;\n}\n\nexport function getPullRequestGroupConfigs(\n  columnConfigs,\n  filterProcessor,\n) {\n  return columnConfigs.map(columnConfig => {\n    const filters = filterProcessor(columnConfig.filters);\n    return {\n      title: columnConfig.title,\n      filter: createFilter(filters),\n      simplified: columnConfig.simplified,\n    };\n  });\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n  root: (props) => ({\n    color: props.hasAutoComplete\n      ? theme.palette.success.main\n      : theme.palette.grey[400],\n  }),\n}));\n\nexport const AutoCompleteIcon = (props) => {\n  const classes = useStyles(props);\n  return React.createElement(DoneAllIcon, { className: classes.root,} );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  PolicyEvaluationStatus,\n  PolicyType,\n} from '@backstage/plugin-azure-devops-common';\nimport { styled, withStyles } from '@material-ui/core/styles';\n\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport React from 'react';\nimport WatchLaterIcon from '@material-ui/icons/WatchLater';\n\nconst PolicyRequiredIcon = withStyles(\n  theme => ({\n    root: {\n      color: theme.palette.info.main,\n    },\n  }),\n  { name: 'PolicyRequiredIcon' },\n)(WatchLaterIcon);\n\nconst PolicyIssueIcon = withStyles(\n  theme => ({\n    root: {\n      color: theme.palette.error.main,\n    },\n  }),\n  { name: 'PolicyIssueIcon' },\n)(CancelIcon);\n\nconst PolicyInProgressIcon = withStyles(\n  theme => ({\n    root: {\n      color: theme.palette.info.main,\n    },\n  }),\n  { name: 'PolicyInProgressIcon' },\n)(GroupWorkIcon);\n\nfunction getPolicyIcon(policy) {\n  switch (policy.type) {\n    case PolicyType.Build:\n      switch (policy.status) {\n        case PolicyEvaluationStatus.Running:\n          return React.createElement(PolicyInProgressIcon, null );\n        case PolicyEvaluationStatus.Rejected:\n          return React.createElement(PolicyIssueIcon, null );\n        case PolicyEvaluationStatus.Queued:\n          return React.createElement(PolicyRequiredIcon, null );\n        default:\n          return null;\n      }\n    case PolicyType.MinimumReviewers:\n    case PolicyType.RequiredReviewers:\n      return React.createElement(PolicyRequiredIcon, null );\n    case PolicyType.Status:\n    case PolicyType.Comments:\n      return React.createElement(PolicyIssueIcon, null );\n    default:\n      return null;\n  }\n}\n\nconst PullRequestCardPolicyContainer = styled('div')({\n  display: 'flex',\n  alignItems: 'center',\n  flexWrap: 'wrap',\n});\n\n\n\n\n\nexport const PullRequestCardPolicy = ({\n  policy,\n}) => (\n  React.createElement(PullRequestCardPolicyContainer, null\n    , getPolicyIcon(policy), \" \" , React.createElement('span', null, policy.text)\n  )\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { PullRequestCardPolicy } from './PullRequestCardPolicy';\nimport React from 'react';\n\n\n\n\n\n\nexport const PullRequestCardPolicies = ({\n  policies,\n  className,\n}) => (\n  React.createElement('div', { className: className,}\n    , policies.map(policy => (\n      React.createElement(PullRequestCardPolicy, { key: policy.id, policy: policy,} )\n    ))\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Avatar } from '@backstage/core-components';\nimport React from 'react';\n\n\n\n\n\n\nexport const PullRequestCardReviewer = ({\n  reviewer,\n}) => (\n  React.createElement(Avatar, {\n    displayName: reviewer.displayName,\n    picture: reviewer.imageUrl,\n    customStyles: {\n      width: '2.5rem',\n      height: '2.5rem',\n      fontSize: '1rem',\n      border: '0.3rem solid silver',\n    },}\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PullRequestCardReviewer } from './PullRequestCardReviewer';\nimport React from 'react';\n\nimport { reviewerFilter } from '../utils';\nimport { styled } from '@material-ui/core/styles';\n\nconst PullRequestCardReviewersContainer = styled('div')({\n  '& > *': {\n    marginTop: 4,\n    marginBottom: 4,\n  },\n});\n\n\n\n\n\nexport const PullRequestCardReviewers = ({\n  reviewers,\n}) => (\n  React.createElement(PullRequestCardReviewersContainer, null\n    , reviewers.filter(reviewerFilter).map(reviewer => (\n      React.createElement(PullRequestCardReviewer, { key: reviewer.id, reviewer: reviewer,} )\n    ))\n  )\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Avatar, Link } from '@backstage/core-components';\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\n\nimport { AutoCompleteIcon } from '../AutoCompleteIcon';\n\nimport { DateTime } from 'luxon';\nimport { PullRequestCardPolicies } from './PullRequestCardPolicies';\nimport { PullRequestCardReviewers } from './PullRequestCardReviewers';\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(\n  theme => ({\n    card: {\n      backgroundColor:\n        theme.palette.type === 'dark'\n          ? theme.palette.grey[700]\n          : theme.palette.common.white,\n    },\n    cardHeaderSimplified: {\n      paddingBottom: theme.spacing(2),\n    },\n    cardHeaderAction: {\n      display: 'flex',\n      alignSelf: 'center',\n      margin: 0,\n    },\n    content: {\n      display: 'flex',\n      flexDirection: 'row',\n    },\n    policies: {\n      flex: 1,\n    },\n  }),\n  { name: 'PullRequestCard' },\n);\n\n\n\n\n\n\nexport const PullRequestCard = ({\n  pullRequest,\n  simplified,\n}) => {\n  const title = (\n    React.createElement(Link, { to: pullRequest.link ?? '', title: pullRequest.description,}\n      , pullRequest.title\n    )\n  );\n\n  const repoLink = (\n    React.createElement(Link, { to: pullRequest.repository?.url ?? '', color: \"inherit\",}\n      , pullRequest.repository?.name\n    )\n  );\n\n  const creationDate = pullRequest.creationDate\n    ? DateTime.fromISO(pullRequest.creationDate).toRelative()\n    : undefined;\n\n  const subheader = (\n    React.createElement('span', null\n      , repoLink, \"  \"  , creationDate\n    )\n  );\n\n  const avatar = (\n    React.createElement(Avatar, {\n      displayName: pullRequest.createdBy?.displayName,\n      picture: pullRequest.createdBy?.imageUrl,\n      customStyles: { width: '2.5rem', height: '2.5rem', fontSize: '1rem' },}\n    )\n  );\n\n  const classes = useStyles();\n\n  return (\n    React.createElement(Card, {\n      classes: { root: classes.card },\n      'data-pull-request-id': pullRequest.pullRequestId,}\n    \n      , React.createElement(CardHeader, {\n        avatar: avatar,\n        title: title,\n        subheader: subheader,\n        action: \n          React.createElement(AutoCompleteIcon, { hasAutoComplete: pullRequest.hasAutoComplete,} )\n        ,\n        classes: {\n          ...(simplified && { root: classes.cardHeaderSimplified }),\n          action: classes.cardHeaderAction,\n        },}\n      )\n\n      , !simplified && (\n        React.createElement(CardContent, { className: classes.content,}\n          , pullRequest.policies && (\n            React.createElement(PullRequestCardPolicies, {\n              policies: pullRequest.policies,\n              className: classes.policies,}\n            )\n          )\n\n          , pullRequest.reviewers && (\n            React.createElement(PullRequestCardReviewers, { reviewers: pullRequest.reviewers,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Paper, Typography, styled, withStyles } from '@material-ui/core';\n\nimport { PullRequestCard } from '../PullRequestCard';\n\nimport React from 'react';\n\nconst ColumnPaper = withStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    padding: theme.spacing(2),\n    backgroundColor:\n      theme.palette.type === 'dark'\n        ? theme.palette.grey[800]\n        : theme.palette.grey[300],\n    height: '100%',\n  },\n}))(Paper);\n\nconst ColumnTitleDiv = styled('div')(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  marginBottom: theme.spacing(2),\n}));\n\nexport const PullRequestCardContainer = styled('div')(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  '& > *': {\n    marginBottom: theme.spacing(2),\n  },\n  '& > :last-of-type': {\n    marginBottom: 0,\n  },\n}));\n\n\n\n\n\nexport const PullRequestGridColumn = ({\n  pullRequestGroup,\n}) => {\n  const columnTitle = (\n    React.createElement(ColumnTitleDiv, null\n      , React.createElement(Typography, { variant: \"h5\",}, pullRequestGroup.title)\n    )\n  );\n\n  const pullRequests = (\n    React.createElement(PullRequestCardContainer, null\n      , pullRequestGroup.pullRequests.map(pullRequest => (\n        React.createElement(PullRequestCard, {\n          key: pullRequest.pullRequestId,\n          pullRequest: pullRequest,\n          simplified: pullRequestGroup.simplified,}\n        )\n      ))\n    )\n  );\n\n  return (\n    React.createElement(ColumnPaper, null\n      , columnTitle\n      , pullRequests\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PullRequestGridColumn } from '../PullRequestGridColumn';\n\nimport React from 'react';\nimport { styled } from '@material-ui/core';\n\nconst GridDiv = styled('div')(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'row',\n  justifyContent: 'space-between',\n  '& > *': {\n    marginRight: theme.spacing(2),\n  },\n  '& > :last-of-type': {\n    marginRight: 0,\n  },\n}));\n\n\n\n\n\nexport const PullRequestGrid = ({\n  pullRequestGroups,\n}) => {\n  return (\n    React.createElement(GridDiv, null\n      , pullRequestGroups.map((pullRequestGroup, index) => (\n        React.createElement(PullRequestGridColumn, {\n          key: index,\n          pullRequestGroup: pullRequestGroup,}\n        )\n      ))\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { azureDevOpsApiRef } from '../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\nexport function useAllTeams()\n\n\n\n {\n  const api = useApi(azureDevOpsApiRef);\n\n  const {\n    value: teams,\n    loading,\n    error,\n  } = useAsync(() => {\n    return api.getAllTeams();\n  }, [api]);\n\n  return {\n    teams,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport useInterval from 'react-use/lib/useInterval';\n\n\nimport { azureDevOpsApiRef } from '../api';\nimport { useCallback } from 'react';\n\nconst POLLING_INTERVAL = 10000;\n\nexport function useDashboardPullRequests(\n  project,\n  pollingInterval = POLLING_INTERVAL,\n)\n\n\n\n {\n  const api = useApi(azureDevOpsApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const getDashboardPullRequests = useCallback(async (\n\n) => {\n    if (!project) {\n      return Promise.reject(new Error('Missing project name'));\n    }\n\n    try {\n      return await api.getDashboardPullRequests(project);\n    } catch (error) {\n      if (error instanceof Error) {\n        errorApi.post(error);\n      }\n\n      return Promise.reject(error);\n    }\n  }, [project, api, errorApi]);\n\n  const {\n    value: pullRequests,\n    loading,\n    error,\n    retry,\n  } = useAsyncRetry(\n    () => getDashboardPullRequests(),\n    [getDashboardPullRequests],\n  );\n\n  useInterval(() => retry(), pollingInterval);\n\n  return {\n    pullRequests,\n    loading,\n    error,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { AZURE_DEVOPS_DEFAULT_TOP } from '../constants';\n\nimport { azureDevOpsApiRef } from '../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useProjectRepoFromEntity } from './useProjectRepoFromEntity';\n\nexport function useRepoBuilds(\n  entity,\n  defaultLimit,\n)\n\n\n\n {\n  const top = defaultLimit ?? AZURE_DEVOPS_DEFAULT_TOP;\n  const options = {\n    top: top,\n  };\n\n  const api = useApi(azureDevOpsApiRef);\n  const { project, repo } = useProjectRepoFromEntity(entity);\n\n  const { value, loading, error } = useAsync(() => {\n    return api.getRepoBuilds(project, repo, options);\n  }, [api, project, repo, entity]);\n\n  return {\n    items: value?.items,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\nexport function useUserEmail() {\n  const identityApi = useApi(identityApiRef);\n  const state = useAsync(() => identityApi.getProfileInfo(), [identityApi]);\n  return state.value?.email;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { azureDevOpsApiRef } from '../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\nexport function useUserTeamIds(userId)\n\n\n\n {\n  const api = useApi(azureDevOpsApiRef);\n\n  const {\n    value: teamIds,\n    loading,\n    error,\n  } = useAsync(() => {\n    return userId ? api.getUserTeamIds(userId) : Promise.resolve(undefined);\n  }, [api]);\n\n  return {\n    teamIds,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FilterType } from '../filters';\nimport { useUserEmail, useUserTeamIds } from '../../../../hooks';\n\nexport function useFilterProcessor() {\n  const userEmail = useUserEmail();\n  const { teamIds } = useUserTeamIds(userEmail);\n\n  return (filters) => {\n    for (const filter of filters) {\n      switch (filter.type) {\n        case FilterType.AssignedToCurrentUser:\n        case FilterType.CreatedByCurrentUser:\n          filter.email = userEmail;\n          break;\n\n        case FilterType.AssignedToCurrentUsersTeams:\n        case FilterType.CreatedByCurrentUsersTeams:\n          filter.teamIds = teamIds;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return filters;\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  Header,\n  Page,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\n\nimport React, { useState } from 'react';\nimport { getPullRequestGroupConfigs, getPullRequestGroups } from './lib/utils';\n\nimport { FilterType } from './lib/filters';\nimport { PullRequestGrid } from './lib/PullRequestGrid';\nimport { useDashboardPullRequests } from '../../hooks';\nimport { useFilterProcessor } from './lib/hooks';\n\n\n\n\n\n\n\nconst PullRequestsPageContent = ({\n  pullRequestGroups,\n  loading,\n  error,\n}) => {\n  if (loading && (!pullRequestGroups || pullRequestGroups.length <= 0)) {\n    return React.createElement(Progress, null );\n  }\n\n  if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  return React.createElement(PullRequestGrid, { pullRequestGroups: pullRequestGroups ?? [],} );\n};\n\nconst DEFAULT_COLUMN_CONFIGS = [\n  {\n    title: 'Created by me',\n    filters: [{ type: FilterType.CreatedByCurrentUser }],\n    simplified: false,\n  },\n  {\n    title: 'Other PRs',\n    filters: [{ type: FilterType.All }],\n    simplified: true,\n  },\n];\n\n\n\n\n\n\n\nexport const PullRequestsPage = ({\n  projectName,\n  pollingInterval,\n  defaultColumnConfigs,\n}) => {\n  const { pullRequests, loading, error } = useDashboardPullRequests(\n    projectName,\n    pollingInterval,\n  );\n\n  const [columnConfigs] = useState(\n    defaultColumnConfigs ?? DEFAULT_COLUMN_CONFIGS,\n  );\n\n  const filterProcessor = useFilterProcessor();\n\n  const pullRequestGroupConfigs = getPullRequestGroupConfigs(\n    columnConfigs,\n    filterProcessor,\n  );\n\n  const pullRequestGroups = getPullRequestGroups(\n    pullRequests,\n    pullRequestGroupConfigs,\n  );\n\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Header, { title: \"Azure Pull Requests\"  ,} )\n      , React.createElement(Content, null\n        , React.createElement(PullRequestsPageContent, {\n          pullRequestGroups: pullRequestGroups,\n          loading: loading,\n          error: error,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const AZURE_DEVOPS_BUILD_DEFINITION_ANNOTATION =\n  'dev.azure.com/build-definition';\nexport const AZURE_DEVOPS_PROJECT_ANNOTATION = 'dev.azure.com/project';\nexport const AZURE_DEVOPS_REPO_ANNOTATION = 'dev.azure.com/project-repo';\nexport const AZURE_DEVOPS_DEFAULT_TOP = 10;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { AZURE_DEVOPS_REPO_ANNOTATION } from '../constants';\n\nexport function useProjectRepoFromEntity(entity)\n\n\n {\n  const [project, repo] = (\n    entity.metadata.annotations?.[AZURE_DEVOPS_REPO_ANNOTATION] ?? ''\n  ).split('/');\n\n  if (!project && !repo) {\n    throw new Error(\n      'Value for annotation dev.azure.com/project-repo was not in the correct format: <project-name>/<repo-name>',\n    );\n  }\n\n  if (!project) {\n    throw new Error(\n      'Project Name for annotation dev.azure.com/project-repo was not found; expected format is: <project-name>/<repo-name>',\n    );\n  }\n\n  if (!repo) {\n    throw new Error(\n      'Repo Name for annotation dev.azure.com/project-repo was not found; expected format is: <project-name>/<repo-name>',\n    );\n  }\n\n  return { project, repo };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  PullRequestStatus,\n} from '@backstage/plugin-azure-devops-common';\n\nimport { AZURE_DEVOPS_DEFAULT_TOP } from '../constants';\n\nimport { azureDevOpsApiRef } from '../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useProjectRepoFromEntity } from './useProjectRepoFromEntity';\n\nexport function usePullRequests(\n  entity,\n  defaultLimit,\n  requestedStatus,\n)\n\n\n\n {\n  const top = defaultLimit ?? AZURE_DEVOPS_DEFAULT_TOP;\n  const status = requestedStatus ?? PullRequestStatus.Active;\n  const options = {\n    top,\n    status,\n  };\n\n  const api = useApi(azureDevOpsApiRef);\n  const { project, repo } = useProjectRepoFromEntity(entity);\n\n  const { value, loading, error } = useAsync(() => {\n    return api.getPullRequests(project, repo, options);\n  }, [api, project, repo, top, status]);\n\n  return {\n    items: value?.items,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\n\nexport const getDurationFromDates = (\n  startTime,\n  finishTime,\n) => {\n  if (!startTime || (!startTime && !finishTime)) {\n    return '';\n  }\n\n  const start = DateTime.fromISO(startTime);\n  const finish = finishTime ? DateTime.fromISO(finishTime) : DateTime.now();\n\n  const formatted = Interval.fromDateTimes(start, finish)\n    .toDuration()\n    .valueOf();\n\n  const shortEnglishHumanizer = humanizeDuration.humanizer({\n    language: 'shortEn',\n    languages: {\n      shortEn: {\n        y: () => 'y',\n        mo: () => 'mo',\n        w: () => 'w',\n        d: () => 'd',\n        h: () => 'h',\n        m: () => 'm',\n        s: () => 's',\n        ms: () => 'ms',\n      },\n    },\n  });\n\n  return shortEnglishHumanizer(formatted, {\n    largest: 2,\n    round: true,\n    spacer: '',\n  });\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { generatePath } from 'react-router';\nimport { ResponseError } from '@backstage/errors';\nimport { DEFAULT_NAMESPACE } from '@backstage/catalog-model';\n\n\n\nexport class BadgesClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n   async getEntityBadgeSpecs(entity) {\n    const entityBadgeSpecsUrl = await this.getEntityBadgeSpecsUrl(entity);\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(entityBadgeSpecsUrl, {\n      headers: token\n        ? {\n            Authorization: `Bearer ${token}`,\n          }\n        : undefined,\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n\n   async getEntityBadgeSpecsUrl(entity) {\n    const routeParams = this.getEntityRouteParams(entity);\n    const path = generatePath(`:namespace/:kind/:name`, routeParams);\n    return `${await this.discoveryApi.getBaseUrl(\n      'badges',\n    )}/entity/${path}/badge-specs`;\n  }\n\n   getEntityRouteParams(entity) {\n    return {\n      kind: entity.kind.toLocaleLowerCase('en-US'),\n      namespace:\n        entity.metadata.namespace?.toLocaleLowerCase('en-US') ??\n        DEFAULT_NAMESPACE,\n      name: entity.metadata.name,\n    };\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const badgesApiRef = createApiRef({\n  id: 'plugin.badges.client',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPermission,\n\n} from '@backstage/plugin-permission-common';\n\n/**\n * Permission resource type which corresponds to catalog entities.\n *\n * {@link https://backstage.io/docs/features/software-catalog/software-catalog-overview}\n * @alpha\n */\nexport const RESOURCE_TYPE_CATALOG_ENTITY = 'catalog-entity';\n\n/**\n * Convenience type for catalog entity\n * {@link @backstage/plugin-permission-common#ResourcePermission}s.\n * @alpha\n */\n\n\n\n\n/**\n * This permission is used to authorize actions that involve reading one or more\n * entities from the catalog.\n *\n * If this permission is not authorized, it will appear that the entity does not\n * exist in the catalog  both in the frontend and in API responses.\n * @alpha\n */\nexport const catalogEntityReadPermission = createPermission({\n  name: 'catalog.entity.read',\n  attributes: {\n    action: 'read',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n\n/**\n * This permission is used to authorize actions that involve creating a new\n * catalog entity. This includes registering an existing component into the\n * catalog.\n * @alpha\n */\nexport const catalogEntityCreatePermission = createPermission({\n  name: 'catalog.entity.create',\n  attributes: {\n    action: 'create',\n  },\n});\n\n/**\n * This permission is used to designate actions that involve removing one or\n * more entities from the catalog.\n * @alpha\n */\nexport const catalogEntityDeletePermission = createPermission({\n  name: 'catalog.entity.delete',\n  attributes: {\n    action: 'delete',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n\n/**\n * This permission is used to designate refreshing one or more entities from the\n * catalog.\n * @alpha\n */\nexport const catalogEntityRefreshPermission = createPermission({\n  name: 'catalog.entity.refresh',\n  attributes: {\n    action: 'update',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n\n/**\n * This permission is used to designate actions that involve reading one or more\n * locations from the catalog.\n *\n * If this permission is not authorized, it will appear that the location does\n * not exist in the catalog  both in the frontend and in API responses.\n * @alpha\n */\nexport const catalogLocationReadPermission = createPermission({\n  name: 'catalog.location.read',\n  attributes: {\n    action: 'read',\n  },\n});\n\n/**\n * This permission is used to designate actions that involve creating catalog\n * locations.\n * @alpha\n */\nexport const catalogLocationCreatePermission = createPermission({\n  name: 'catalog.location.create',\n  attributes: {\n    action: 'create',\n  },\n});\n\n/**\n * This permission is used to designate actions that involve deleting locations\n * from the catalog.\n * @alpha\n */\nexport const catalogLocationDeletePermission = createPermission({\n  name: 'catalog.location.delete',\n  attributes: {\n    action: 'delete',\n  },\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport React from 'react';\n\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles((theme) => ({\n  text: {\n    fill: theme.palette.textContrast,\n  },\n  secondary: {\n    fill: theme.palette.textSubtle,\n  },\n}));\n\nexport function CustomLabel({\n  edge: { relations },\n}) {\n  const classes = useStyles();\n  return (\n    React.createElement('text', { className: classes.text, textAnchor: \"middle\",}\n      , relations.map((r, i) => (\n        React.createElement('tspan', { key: r, className: classNames(i > 0 && classes.secondary),}\n          , i > 0 && React.createElement('tspan', null, \" / \"  )\n          , r\n        )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApp } from '@backstage/core-plugin-api';\nimport WorkIcon from '@material-ui/icons/Work';\nimport React from 'react';\n\nexport function EntityKindIcon({\n  kind,\n  ...props\n}\n\n\n\n\n\n\n) {\n  const app = useApp();\n  const Icon =\n    app.getSystemIcon(`kind:${kind.toLocaleLowerCase('en-US')}`) ?? WorkIcon;\n  return React.createElement(Icon, { ...props,} );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { humanizeEntityRef } from '@backstage/plugin-catalog-react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { useLayoutEffect, useRef, useState } from 'react';\nimport { EntityKindIcon } from './EntityKindIcon';\n\n\nconst useStyles = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n\n    '&.primary': {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light,\n    },\n    '&.secondary': {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light,\n    },\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n\n    '&.primary': {\n      fill: theme.palette.primary.contrastText,\n    },\n    '&.secondary': {\n      fill: theme.palette.secondary.contrastText,\n    },\n    '&.focused': {\n      fontWeight: 'bold',\n    },\n  },\n  clickable: {\n    cursor: 'pointer',\n  },\n}));\n\nexport function CustomNode({\n  node: {\n    id,\n    kind,\n    namespace,\n    name,\n    color = 'default',\n    focused,\n    title,\n    onClick,\n  },\n}) {\n  const classes = useStyles();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n\n  useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = kind ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  const displayTitle =\n    title ??\n    (kind && name && namespace\n      ? humanizeEntityRef({ kind, name, namespace })\n      : id);\n\n  return (\n    React.createElement('g', { onClick: onClick, className: classNames(onClick && classes.clickable),}\n      , React.createElement('rect', {\n        className: classNames(\n          classes.node,\n          color === 'primary' && 'primary',\n          color === 'secondary' && 'secondary',\n        ),\n        width: paddedWidth,\n        height: paddedHeight,\n        rx: 10,}\n      )\n      , kind && (\n        React.createElement(EntityKindIcon, {\n          kind: kind,\n          y: padding,\n          x: padding,\n          width: iconSize,\n          height: iconSize,\n          className: classNames(\n            classes.text,\n            focused && 'focused',\n            color === 'primary' && 'primary',\n            color === 'secondary' && 'secondary',\n          ),}\n        )\n      )\n      , React.createElement('text', {\n        ref: idRef,\n        className: classNames(\n          classes.text,\n          focused && 'focused',\n          color === 'primary' && 'primary',\n          color === 'secondary' && 'secondary',\n        ),\n        y: paddedHeight / 2,\n        x: paddedIconWidth + (width + padding * 2) / 2,\n        textAnchor: \"middle\",\n        alignmentBaseline: \"middle\",}\n      \n        , displayTitle\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  RELATION_API_CONSUMED_BY,\n  RELATION_API_PROVIDED_BY,\n  RELATION_CHILD_OF,\n  RELATION_CONSUMES_API,\n  RELATION_DEPENDENCY_OF,\n  RELATION_DEPENDS_ON,\n  RELATION_HAS_MEMBER,\n  RELATION_HAS_PART,\n  RELATION_MEMBER_OF,\n  RELATION_OWNED_BY,\n  RELATION_OWNER_OF,\n  RELATION_PARENT_OF,\n  RELATION_PART_OF,\n  RELATION_PROVIDES_API,\n} from '@backstage/catalog-model';\n\n/**\n * A pair of two relations that describe the opposite of each other. The first\n * relation is considered as the primary relation.\n *\n * @public\n */\n\n\n// TODO: This file only contains the pairs for the built-in relations.\n//  How to implement this when custom relations are used? Right now you can pass\n//  the relations everywhere.\n//  Another option is to move this into @backstage/catalog-model\n\n/**\n * A list of pairs of entity relations, used to define which relations are\n * merged together and which the primary relation is.\n *\n * @public\n */\nexport const ALL_RELATION_PAIRS = [\n  [RELATION_OWNER_OF, RELATION_OWNED_BY],\n  [RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY],\n  [RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API],\n  [RELATION_HAS_PART, RELATION_PART_OF],\n  [RELATION_PARENT_OF, RELATION_CHILD_OF],\n  [RELATION_HAS_MEMBER, RELATION_MEMBER_OF],\n  [RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF],\n];\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Additional Data for entities.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Render direction of the graph.\n *\n * @public\n */\nexport var Direction; (function (Direction) {\n  /**\n   * Top to bottom.\n   */\n  const TOP_BOTTOM = 'TB'; Direction[\"TOP_BOTTOM\"] = TOP_BOTTOM;\n  /**\n   * Bottom to top.\n   */\n  const BOTTOM_TOP = 'BT'; Direction[\"BOTTOM_TOP\"] = BOTTOM_TOP;\n  /**\n   * Left to right.\n   */\n  const LEFT_RIGHT = 'LR'; Direction[\"LEFT_RIGHT\"] = LEFT_RIGHT;\n  /**\n   * Right to left.\n   */\n  const RIGHT_LEFT = 'RL'; Direction[\"RIGHT_LEFT\"] = RIGHT_LEFT;\n})(Direction || (Direction = {}));\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport limiterFactory from 'p-limit';\nimport { useCallback, useRef, useState } from 'react';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\n\n// TODO: This is a good use case for a graphql API, once it is available in the\n// future.\n\nconst limiter = limiterFactory(10);\n\n/**\n * Ensures that a set of requested entities is loaded.\n */\nexport function useEntityStore()\n\n\n\n\n {\n  const catalogClient = useApi(catalogApiRef);\n  const state = useRef({\n    requestedEntities: new Set(),\n    outstandingEntities: new Map(),\n    cachedEntities: new Map(),\n  });\n  const [entities, setEntities] = useState\n\n({});\n\n  const updateEntities = useCallback(() => {\n    const { cachedEntities, requestedEntities } = state.current;\n    const filteredEntities = {};\n    requestedEntities.forEach(entityRef => {\n      const entity = cachedEntities.get(entityRef);\n\n      if (entity) {\n        filteredEntities[entityRef] = entity;\n      }\n    });\n    setEntities(filteredEntities);\n  }, [state, setEntities]);\n\n  const [asyncState, fetch] = useAsyncFn(async () => {\n    const { requestedEntities, outstandingEntities, cachedEntities } =\n      state.current;\n\n    await Promise.all(\n      Array.from(requestedEntities).map(entityRef =>\n        limiter(async () => {\n          if (cachedEntities.has(entityRef)) {\n            return;\n          }\n\n          if (outstandingEntities.has(entityRef)) {\n            await outstandingEntities.get(entityRef);\n            return;\n          }\n\n          const promise = catalogClient.getEntityByRef(entityRef);\n\n          outstandingEntities.set(entityRef, promise);\n\n          try {\n            const entity = await promise;\n\n            if (entity) {\n              cachedEntities.set(entityRef, entity);\n              updateEntities();\n            }\n          } finally {\n            outstandingEntities.delete(entityRef);\n          }\n        }),\n      ),\n    );\n  }, [state, updateEntities]);\n  const { loading, error } = asyncState;\n\n  const requestEntities = useCallback(\n    (entityRefs) => {\n      const n = new Set(entityRefs);\n      const { requestedEntities } = state.current;\n\n      if (\n        n.size !== requestedEntities.size ||\n        Array.from(n).some(e => !requestedEntities.has(e))\n      ) {\n        state.current.requestedEntities = n;\n        fetch();\n        updateEntities();\n      }\n    },\n    [state, fetch, updateEntities],\n  );\n\n  return {\n    entities,\n    loading,\n    error,\n    requestEntities,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useEffect } from 'react';\nimport { useEntityStore } from './useEntityStore';\n\n/**\n * Discover the graph of entities connected by relations, starting from a set of\n * root entities. Filters are used to select which relations to includes.\n * Returns all discovered entities once they are loaded.\n */\nexport function useEntityRelationGraph({\n  rootEntityRefs,\n  filter: { maxDepth = Number.POSITIVE_INFINITY, relations, kinds } = {},\n}\n\n\n\n\n\n\n)\n\n\n\n {\n  const { entities, loading, error, requestEntities } = useEntityStore();\n\n  useEffect(() => {\n    const expectedEntities = new Set([...rootEntityRefs]);\n    const processedEntityRefs = new Set();\n\n    let nextDepthRefQueue = [...rootEntityRefs];\n    let depth = 0;\n\n    while (\n      nextDepthRefQueue.length > 0 &&\n      (!isFinite(maxDepth) || depth < maxDepth)\n    ) {\n      const entityRefQueue = nextDepthRefQueue;\n      nextDepthRefQueue = [];\n\n      while (entityRefQueue.length > 0) {\n        const entityRef = entityRefQueue.shift();\n        const entity = entities[entityRef];\n\n        processedEntityRefs.add(entityRef);\n\n        if (entity && entity.relations) {\n          for (const rel of entity.relations) {\n            if (\n              (!relations || relations.includes(rel.type)) &&\n              (!kinds ||\n                kinds.some(kind =>\n                  rel.targetRef.startsWith(\n                    `${kind.toLocaleLowerCase('en-US')}:`,\n                  ),\n                ))\n            ) {\n              if (!processedEntityRefs.has(rel.targetRef)) {\n                nextDepthRefQueue.push(rel.targetRef);\n                expectedEntities.add(rel.targetRef);\n              }\n            }\n          }\n        }\n      }\n\n      ++depth;\n    }\n\n    requestEntities([...expectedEntities]);\n  }, [entities, rootEntityRefs, maxDepth, relations, kinds, requestEntities]);\n\n  return {\n    entities,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DEFAULT_NAMESPACE } from '@backstage/catalog-model';\nimport { useState } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { ALL_RELATION_PAIRS } from './relations';\n\nimport { useEntityRelationGraph } from './useEntityRelationGraph';\n\n/**\n * Generate nodes and edges to render the entity graph.\n */\nexport function useEntityRelationNodesAndEdges({\n  rootEntityRefs,\n  maxDepth = Number.POSITIVE_INFINITY,\n  unidirectional = true,\n  mergeRelations = true,\n  kinds,\n  relations,\n  onNodeClick,\n  relationPairs = ALL_RELATION_PAIRS,\n}\n\n\n\n\n\n\n\n\n)\n\n\n\n\n {\n  const [nodesAndEdges, setNodesAndEdges] = useState\n\n\n({});\n  const { entities, loading, error } = useEntityRelationGraph({\n    rootEntityRefs,\n    filter: {\n      maxDepth,\n      kinds,\n      relations,\n    },\n  });\n\n  useDebounce(\n    () => {\n      if (!entities || Object.keys(entities).length === 0) {\n        setNodesAndEdges({});\n        return;\n      }\n\n      const nodes = Object.entries(entities).map(([entityRef, entity]) => {\n        const focused = rootEntityRefs.includes(entityRef);\n        const node = {\n          id: entityRef,\n          title: entity.metadata?.title ?? undefined,\n          kind: entity.kind,\n          name: entity.metadata.name,\n          namespace: entity.metadata.namespace ?? DEFAULT_NAMESPACE,\n          focused,\n          color: focused ? 'secondary' : 'primary',\n        };\n\n        if (onNodeClick) {\n          node.onClick = event => onNodeClick(node, event);\n        }\n\n        return node;\n      });\n\n      const edges = [];\n      const visitedNodes = new Set();\n      const nodeQueue = [...rootEntityRefs];\n\n      while (nodeQueue.length > 0) {\n        const entityRef = nodeQueue.pop();\n        const entity = entities[entityRef];\n        visitedNodes.add(entityRef);\n\n        if (entity) {\n          entity?.relations?.forEach(rel => {\n            // Check if the related entity should be displayed, if not, ignore\n            // the relation too\n            if (!entities[rel.targetRef]) {\n              return;\n            }\n\n            if (relations && !relations.includes(rel.type)) {\n              return;\n            }\n\n            if (\n              kinds &&\n              !kinds.some(kind =>\n                rel.targetRef.startsWith(`${kind.toLocaleLowerCase('en-US')}:`),\n              )\n            ) {\n              return;\n            }\n\n            if (!unidirectional || !visitedNodes.has(rel.targetRef)) {\n              if (mergeRelations) {\n                const pair = relationPairs.find(\n                  ([l, r]) => l === rel.type || r === rel.type,\n                ) ?? [rel.type];\n                const [left] = pair;\n\n                edges.push({\n                  from: left === rel.type ? entityRef : rel.targetRef,\n                  to: left === rel.type ? rel.targetRef : entityRef,\n                  relations: pair,\n                  label: 'visible',\n                });\n              } else {\n                edges.push({\n                  from: entityRef,\n                  to: rel.targetRef,\n                  relations: [rel.type],\n                  label: 'visible',\n                });\n              }\n            }\n\n            if (!visitedNodes.has(rel.targetRef)) {\n              nodeQueue.push(rel.targetRef);\n              visitedNodes.add(rel.targetRef);\n            }\n          });\n        }\n      }\n\n      setNodesAndEdges({ nodes, edges });\n    },\n    100,\n    [\n      entities,\n      rootEntityRefs,\n      kinds,\n      relations,\n      unidirectional,\n      mergeRelations,\n      onNodeClick,\n      relationPairs,\n    ],\n  );\n\n  return {\n    loading,\n    error,\n    ...nodesAndEdges,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  DependencyGraph,\n  DependencyGraphTypes,\n} from '@backstage/core-components';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { CircularProgress, makeStyles, useTheme } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useEffect, useMemo } from 'react';\nimport { CustomLabel } from './CustomLabel';\nimport { CustomNode } from './CustomNode';\nimport { ALL_RELATION_PAIRS, } from './relations';\nimport { Direction, } from './types';\nimport { useEntityRelationNodesAndEdges } from './useEntityRelationNodesAndEdges';\n\nconst useStyles = makeStyles(theme => ({\n  progress: {\n    position: 'absolute',\n    left: '50%',\n    top: '50%',\n    marginLeft: '-20px',\n    marginTop: '-20px',\n  },\n  container: {\n    position: 'relative',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  graph: {\n    width: '100%',\n    flex: 1,\n    // Right now there is no good way to style edges between nodes, we have to\n    // fallback to these hacks:\n    '& path[marker-end]': {\n      transition: 'filter 0.1s ease-in-out',\n    },\n    '& path[marker-end]:hover': {\n      filter: `drop-shadow(2px 2px 4px ${theme.palette.primary.dark});`,\n    },\n    '& g[data-testid=label]': {\n      transition: 'transform 0s',\n    },\n  },\n}));\n\n/**\n * Core building block for custom entity relations diagrams.\n *\n * @public\n */\nexport const EntityRelationsGraph = (props\n\n\n\n\n\n\n\n\n\n\n\n\n\n) => {\n  const {\n    rootEntityNames,\n    maxDepth = Number.POSITIVE_INFINITY,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    onNodeClick,\n    relationPairs = ALL_RELATION_PAIRS,\n    className,\n    zoom = 'enabled',\n    renderNode,\n    renderLabel,\n  } = props;\n\n  const theme = useTheme();\n  const classes = useStyles();\n  const rootEntityRefs = useMemo(\n    () =>\n      (Array.isArray(rootEntityNames)\n        ? rootEntityNames\n        : [rootEntityNames]\n      ).map(e => stringifyEntityRef(e)),\n    [rootEntityNames],\n  );\n  const errorApi = useApi(errorApiRef);\n  const { loading, error, nodes, edges } = useEntityRelationNodesAndEdges({\n    rootEntityRefs,\n    maxDepth,\n    unidirectional,\n    mergeRelations,\n    kinds,\n    relations,\n    onNodeClick,\n    relationPairs,\n  });\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [errorApi, error]);\n\n  return (\n    React.createElement('div', { className: classNames(classes.container, className),}\n      , loading && React.createElement(CircularProgress, { className: classes.progress,} )\n      , nodes && edges && (\n        React.createElement(DependencyGraph, {\n          nodes: nodes,\n          edges: edges,\n          renderNode: renderNode || CustomNode,\n          renderLabel: renderLabel || CustomLabel,\n          direction: direction,\n          className: classes.graph,\n          paddingX: theme.spacing(4),\n          paddingY: theme.spacing(4),\n          labelPosition: DependencyGraphTypes.LabelPosition.RIGHT,\n          labelOffset: theme.spacing(1),\n          zoom: zoom,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createExternalRouteRef,\n  createRouteRef,\n} from '@backstage/core-plugin-api';\n\n/**\n * Route pointing to the standalone catalog graph page.\n *\n * @public\n */\nexport const catalogGraphRouteRef = createRouteRef({\n  id: 'catalog-graph',\n});\n\n/**\n * Route pointing to the entity page.\n * Used to navigate from the graph to an entity.\n *\n * @public\n * @deprecated This route is no longer used and can be removed\n */\nexport const catalogEntityRouteRef = createExternalRouteRef({\n  id: 'catalog-entity',\n  params: ['namespace', 'kind', 'name'],\n  optional: true,\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n/**\n * Utility API reference for the {@link CatalogImportApi}.\n *\n * @public\n */\nexport const catalogImportApiRef = createApiRef({\n  id: 'plugin.catalog-import.service',\n});\n\n/**\n * Result of the analysis.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport parseGitUrl from 'git-url-parse';\n\nexport const getGithubIntegrationConfig = (\n  scmIntegrationsApi,\n  location,\n) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return undefined;\n  }\n\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config,\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\n\n\nimport { getGithubIntegrationConfig } from './GitHub';\nimport { trimEnd } from 'lodash';\nimport { getBranchName, getCatalogFilename } from '../components/helpers';\n\n/**\n * The default implementation of the {@link CatalogImportApi}.\n *\n * @public\n */\nexport class CatalogImportClient  {\n    discoveryApi;\n    identityApi;\n    scmAuthApi;\n    scmIntegrationsApi;\n    catalogApi;\n    configApi;\n\n  constructor(options\n\n\n\n\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n\n  async analyzeUrl(url) {\n    if (\n      new URL(url).pathname.match(/\\.ya?ml$/) ||\n      new URL(url).searchParams.get('path')?.match(/.ya?ml$/)\n    ) {\n      const location = await this.catalogApi.addLocation({\n        type: 'url',\n        target: url,\n        dryRun: true,\n      });\n\n      return {\n        type: 'locations',\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map(e => ({\n              kind: e.kind,\n              namespace: e.metadata.namespace ?? 'default',\n              name: e.metadata.name,\n            })),\n          },\n        ],\n      };\n    }\n\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n\n      if (other) {\n        throw new Error(\n          `The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`,\n        );\n      }\n      throw new Error(\n        `This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`,\n      );\n    }\n\n    // TODO: this could be part of the analyze-location endpoint\n    const locations = await this.checkGitHubForExistingCatalogInfo({\n      ...ghConfig,\n      url,\n    });\n\n    if (locations.length > 0) {\n      return {\n        type: 'locations',\n        locations,\n      };\n    }\n\n    return {\n      type: 'repository',\n      integrationType: 'github',\n      url: url,\n      generatedEntities: await this.generateEntityDefinitions({\n        repo: url,\n      }),\n    };\n  }\n\n  async preparePullRequest()\n\n\n {\n    const appTitle =\n      this.configApi.getOptionalString('app.title') ?? 'Backstage';\n    const appBaseUrl = this.configApi.getString('app.baseUrl');\n    const catalogFilename = getCatalogFilename(this.configApi);\n\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** \\\nto this repository so that the component can be added to the \\\n[${appTitle} software catalog](${appBaseUrl}).\\n\\nAfter this pull request is merged, \\\nthe component will become available.\\n\\nFor more information, read an \\\n[overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`,\n    };\n  }\n\n  async submitPullRequest(options\n\n\n\n\n) {\n    const { repositoryUrl, fileContent, title, body } = options;\n\n    const ghConfig = getGithubIntegrationConfig(\n      this.scmIntegrationsApi,\n      repositoryUrl,\n    );\n\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body,\n      });\n    }\n\n    throw new Error('unimplemented!');\n  }\n\n  // TODO: this could be part of the catalog api\n   async generateEntityDefinitions(options\n\n) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(\n      `${await this.discoveryApi.getBaseUrl('catalog')}/analyze-location`,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token && { Authorization: `Bearer ${token}` }),\n        },\n        method: 'POST',\n        body: JSON.stringify({\n          location: { type: 'url', target: options.repo },\n        }),\n      },\n    ).catch(e => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(\n        `Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`,\n      );\n    }\n\n    const payload = await response.json();\n    return payload.generateEntities.map((x) => x.entity);\n  }\n\n  // TODO: this response should better be part of the analyze-locations response and scm-independent / implemented per scm\n   async checkGitHubForExistingCatalogInfo(options\n\n\n\n\n)\n\n\n\n\n {\n    const { url, owner, repo, githubIntegrationConfig } = options;\n\n    const { token } = await this.scmAuthApi.getCredentials({ url });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl,\n    });\n    const catalogFilename = getCatalogFilename(this.configApi);\n    const query = `repo:${owner}/${repo}+filename:${catalogFilename}`;\n\n    const searchResult = await octo.search.code({ q: query }).catch(e => {\n      throw new Error(\n        formatHttpErrorMessage(\n          \"Couldn't search repository for metadata file.\",\n          e,\n        ),\n      );\n    });\n    const exists = searchResult.data.total_count > 0;\n    if (exists) {\n      const repoInformation = await octo.repos.get({ owner, repo }).catch(e => {\n        throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n      });\n      const defaultBranch = repoInformation.data.default_branch;\n\n      return await Promise.all(\n        searchResult.data.items\n          .map(i => `${trimEnd(url, '/')}/blob/${defaultBranch}/${i.path}`)\n          .map(async target => {\n            const result = await this.catalogApi.addLocation({\n              type: 'url',\n              target,\n              dryRun: true,\n            });\n            return {\n              target,\n              exists: result.exists,\n              entities: result.entities.map(e => ({\n                kind: e.kind,\n                namespace: e.metadata.namespace ?? 'default',\n                name: e.metadata.name,\n              })),\n            };\n          }),\n      );\n    }\n\n    return [];\n  }\n\n  // TODO: extract this function and implement for non-github\n   async submitGitHubPrToRepo(options\n\n\n\n\n\n\n\n) {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig,\n    } = options;\n\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true,\n      },\n    });\n\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl,\n    });\n\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n\n    const repoData = await octo.repos\n      .get({\n        owner,\n        repo,\n      })\n      .catch(e => {\n        throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n      });\n\n    const parentRef = await octo.git\n      .getRef({\n        owner,\n        repo,\n        ref: `heads/${repoData.data.default_branch}`,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\"Couldn't fetch default branch data\", e),\n        );\n      });\n\n    await octo.git\n      .createRef({\n        owner,\n        repo,\n        ref: `refs/heads/${branchName}`,\n        sha: parentRef.data.object.sha,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\n            `Couldn't create a new branch with name '${branchName}'`,\n            e,\n          ),\n        );\n      });\n\n    await octo.repos\n      .createOrUpdateFileContents({\n        owner,\n        repo,\n        path: fileName,\n        message: title,\n        content: Base64.encode(fileContent),\n        branch: branchName,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\n            `Couldn't create a commit with ${fileName} file added`,\n            e,\n          ),\n        );\n      });\n\n    const pullRequestResponse = await octo.pulls\n      .create({\n        owner,\n        repo,\n        title,\n        head: branchName,\n        body,\n        base: repoData.data.default_branch,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\n            `Couldn't create a pull request for ${branchName} branch`,\n            e,\n          ),\n        );\n      });\n\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`,\n    };\n  }\n}\n\nfunction formatHttpErrorMessage(\n  message,\n  error,\n) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Button, CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { } from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    position: 'relative',\n  },\n  buttonProgress: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  },\n}));\n\nexport const NextButton = (\n  props,\n) => {\n  const { loading, ...buttonProps } = props;\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.wrapper,}\n      , React.createElement(Button, {\n        color: \"primary\",\n        variant: \"contained\",\n        ...buttonProps,\n        disabled: props.disabled || props.loading,}\n      )\n      , props.loading && (\n        React.createElement(CircularProgress, { size: \"1.5rem\", className: classes.buttonProgress,} )\n      )\n      , props.loading\n    )\n  );\n};\n\nexport const BackButton = (props) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Button, { variant: \"outlined\", className: classes.button, ...props,}\n      , props.children || 'Back'\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  Page,\n  SupportButton,\n} from '@backstage/core-components';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Grid } from '@material-ui/core';\nimport React from 'react';\nimport { ImportInfoCard } from '../ImportInfoCard';\nimport { ImportStepper } from '../ImportStepper';\n\n/**\n * The default catalog import page.\n *\n * @public\n */\nexport const DefaultImportPage = () => {\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, { title: \"Register an existing component\"   ,} )\n      , React.createElement(Content, null\n        , React.createElement(ContentHeader, { title: `Start tracking your component in ${appTitle}`,}\n          , React.createElement(SupportButton, null, \"Start tracking your component in \"\n                 , appTitle, \" by adding it to the software catalog.\"\n\n          )\n        )\n\n        , React.createElement(Grid, { container: true, spacing: 2, direction: \"row-reverse\",}\n          , React.createElement(Grid, { item: true, xs: 12, md: 4, lg: 6, xl: 8,}\n            , React.createElement(ImportInfoCard, null )\n          )\n\n          , React.createElement(Grid, { item: true, xs: 12, md: 8, lg: 6, xl: 4,}\n            , React.createElement(ImportStepper, null )\n          )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useApp } from '@backstage/core-plugin-api';\nimport {\n  EntityRefLink,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Collapse,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport WorkIcon from '@material-ui/icons/Work';\nimport React, { useState } from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n}));\n\nfunction sortEntities(entities) {\n  return entities.sort((a, b) =>\n    humanizeEntityRef(a).localeCompare(humanizeEntityRef(b)),\n  );\n}\n\n/**\n * Props for {@link EntityListComponent}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Shows a result list of entities.\n *\n * @public\n */\nexport const EntityListComponent = (props) => {\n  const {\n    locations,\n    collapsed = false,\n    locationListItemIcon,\n    onItemClick,\n    firstListItem,\n    withLinks = false,\n  } = props;\n\n  const app = useApp();\n  const classes = useStyles();\n\n  const [expandedUrls, setExpandedUrls] = useState([]);\n\n  const handleClick = (url) => {\n    setExpandedUrls(urls =>\n      urls.includes(url) ? urls.filter(u => u !== url) : urls.concat(url),\n    );\n  };\n\n  return (\n    React.createElement(List, null\n      , firstListItem\n      , locations.map(r => (\n        React.createElement(React.Fragment, { key: r.target,}\n          , React.createElement(ListItem, {\n            dense: true,\n            button: Boolean(onItemClick) ,\n            onClick: () => onItemClick?.call(this, r.target),}\n          \n            , React.createElement(ListItemIcon, null, locationListItemIcon(r.target))\n\n            , React.createElement(ListItemText, {\n              primary: r.target,\n              secondary: `Entities: ${r.entities.length}`,}\n            )\n\n            , collapsed && (\n              React.createElement(ListItemSecondaryAction, null\n                , React.createElement(IconButton, { edge: \"end\", onClick: () => handleClick(r.target),}\n                  , expandedUrls.includes(r.target) ? (\n                    React.createElement(ExpandLessIcon, null )\n                  ) : (\n                    React.createElement(ExpandMoreIcon, null )\n                  )\n                )\n              )\n            )\n          )\n\n          , React.createElement(Collapse, {\n            in: !collapsed || expandedUrls.includes(r.target),\n            timeout: \"auto\",\n            unmountOnExit: true,}\n          \n            , React.createElement(List, { component: \"div\", disablePadding: true, dense: true,}\n              , sortEntities(r.entities).map(entity => {\n                const Icon =\n                  app.getSystemIcon(\n                    `kind:${entity.kind.toLocaleLowerCase('en-US')}`,\n                  ) ?? WorkIcon;\n                return (\n                  React.createElement(ListItem, {\n                    key: humanizeEntityRef(entity),\n                    className: classes.nested,\n                    ...(withLinks\n                      ? {\n                          component: EntityRefLink,\n                          entityRef: entity,\n                          button: withLinks ,\n                        }\n                      : {}),}\n                  \n                    , React.createElement(ListItemIcon, null\n                      , React.createElement(Icon, null )\n                    )\n                    , React.createElement(ListItemText, { primary: humanizeEntityRef(entity),} )\n                  )\n                );\n              })\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard } from '@backstage/core-components';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Chip, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { catalogImportApiRef } from '../../api';\nimport { useCatalogFilename } from '../../hooks';\n\n/**\n * Props for {@link ImportInfoCard}.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Shows information about the import process.\n *\n * @public\n */\nexport const ImportInfoCard = (props) => {\n  const {\n    exampleLocationUrl = 'https://github.com/backstage/backstage/blob/master/catalog-info.yaml',\n    exampleRepositoryUrl = 'https://github.com/backstage/backstage',\n  } = props;\n\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n  const catalogImportApi = useApi(catalogImportApiRef);\n\n  const integrations = configApi.getConfig('integrations');\n  const hasGithubIntegration = integrations.has('github');\n\n  const catalogFilename = useCatalogFilename();\n\n  return (\n    React.createElement(InfoCard, {\n      title: \"Register an existing component\"   ,\n      titleTypographyProps: { component: 'h3' },\n      deepLink: {\n        title: 'Learn more about the Software Catalog',\n        link: 'https://backstage.io/docs/features/software-catalog/software-catalog-overview',\n      },}\n    \n      , React.createElement(Typography, { variant: \"body2\", paragraph: true,}, \"Enter the URL to your source code repository to add it to \"\n                    , appTitle, \".\"\n      )\n      , React.createElement(Typography, { component: \"h4\", variant: \"h6\",}, \"Link to an existing entity file\"\n\n      )\n      , React.createElement(Typography, { variant: \"subtitle2\", color: \"textSecondary\", paragraph: true,}, \"Example: \"\n         , React.createElement('code', null, exampleLocationUrl)\n      )\n      , React.createElement(Typography, { variant: \"body2\", paragraph: true,}, \"The wizard analyzes the file, previews the entities, and adds them to the \"\n\n         , appTitle, \" catalog.\"\n      )\n      , hasGithubIntegration && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, { component: \"h4\", variant: \"h6\",}, \"Link to a repository\"\n               , ' '\n            , React.createElement(Chip, { label: \"GitHub only\" , variant: \"outlined\", size: \"small\",} )\n          )\n          , React.createElement(Typography, { variant: \"subtitle2\", color: \"textSecondary\", paragraph: true,}, \"Example: \"\n             , React.createElement('code', null, exampleRepositoryUrl)\n          )\n          , React.createElement(Typography, { variant: \"body2\", paragraph: true,}, \"The wizard discovers all \"\n                , React.createElement('code', null, catalogFilename), \" files in the repository, previews the entities, and adds them to the \"\n                     , appTitle, ' ', \"catalog.\"\n\n          )\n          , catalogImportApi.preparePullRequest && (\n            React.createElement(Typography, { variant: \"body2\", paragraph: true,}, \"If no entities are found, the wizard will prepare a Pull Request that adds an example \"\n\n                  , React.createElement('code', null, catalogFilename), \" and prepares the \"\n               , appTitle, \" catalog to load all entities as soon as the Pull Request is merged.\"\n\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useReducer } from 'react';\n\n\n/**\n * The configuration of the stepper.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction init(initialUrl) {\n  return {\n    activeFlow: 'unknown',\n    activeState: 'analyze',\n    analysisUrl: initialUrl,\n    previousStates: [],\n  };\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'onAnalysis': {\n      if (state.activeState !== 'analyze') {\n        return state;\n      }\n\n      const { activeState, previousStates } = state;\n      const [activeFlow, analysisUrl, analyzeResult, opts] = action.args;\n\n      return {\n        ...state,\n        analysisUrl,\n        activeFlow,\n        analyzeResult,\n        prepareResult: opts?.prepareResult,\n\n        activeState: opts?.prepareResult === undefined ? 'prepare' : 'review',\n        previousStates: previousStates.concat(activeState),\n      };\n    }\n\n    case 'onPrepare': {\n      if (state.activeState !== 'prepare') {\n        return state;\n      }\n\n      const { activeState, previousStates } = state;\n      const [prepareResult, opts] = action.args;\n\n      return {\n        ...state,\n        prepareResult,\n\n        activeState: 'review',\n        previousStates: opts?.notRepeatable\n          ? []\n          : previousStates.concat(activeState),\n      };\n    }\n\n    case 'onReview': {\n      if (state.activeState !== 'review') {\n        return state;\n      }\n\n      const { activeState, previousStates } = state;\n      const [reviewResult] = action.args;\n\n      return {\n        ...state,\n        reviewResult,\n\n        activeState: 'finish',\n        previousStates: previousStates.concat(activeState),\n      };\n    }\n\n    case 'onGoBack': {\n      const { activeState, previousStates } = state;\n\n      return {\n        ...state,\n\n        activeState:\n          previousStates.length > 0\n            ? previousStates[previousStates.length - 1]\n            : activeState,\n        previousStates: previousStates.slice(0, previousStates.length - 1),\n      };\n    }\n\n    case 'onReset':\n      return {\n        ...init(action.initialUrl),\n\n        // we keep the old prepareResult since the form is animated and an\n        // undefined value might crash the last step.\n        prepareResult: state.prepareResult,\n      };\n\n    default:\n      throw new Error();\n  }\n}\n\n/**\n * A hook that manages the state machine of the form. It handles different flows\n * which each can implement up to four states:\n * 1. analyze\n * 2. preview (skippable from analyze->review)\n * 3. review\n * 4. finish\n *\n * @param options - options\n */\nexport const useImportState = (options\n\n) => {\n  const [state, dispatch] = useReducer(reducer, options?.initialUrl, init);\n\n  const { activeFlow, activeState, analysisUrl, previousStates } = state;\n\n  return {\n    activeFlow,\n    activeState,\n    activeStepNumber: ['analyze', 'prepare', 'review', 'finish'].indexOf(\n      activeState,\n    ),\n    analysisUrl: analysisUrl,\n\n    analyzeResult: state.analyzeResult,\n    prepareResult: state.prepareResult,\n    reviewResult: state.reviewResult,\n\n    onAnalysis: (flow, url, result, opts) =>\n      dispatch({\n        type: 'onAnalysis',\n        args: [flow, url, result, opts],\n      }),\n\n    onPrepare: (result, opts) =>\n      dispatch({\n        type: 'onPrepare',\n        args: [result, opts],\n      }),\n\n    onReview: result => dispatch({ type: 'onReview', args: [result] }),\n\n    onGoBack:\n      previousStates.length > 0\n        ? () => dispatch({ type: 'onGoBack' })\n        : undefined,\n\n    onReset: () =>\n      dispatch({ type: 'onReset', initialUrl: options?.initialUrl }),\n  };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Grid, Typography } from '@material-ui/core';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React from 'react';\nimport { BackButton } from '../Buttons';\nimport { EntityListComponent } from '../EntityListComponent';\n\nimport { Link } from '@backstage/core-components';\nimport partition from 'lodash/partition';\n\n\n\n\n\n\nexport const StepFinishImportLocation = ({ prepareResult, onReset }) => {\n  const continueButton = (\n    React.createElement(Grid, { container: true, spacing: 0,}\n      , React.createElement(BackButton, { onClick: onReset,}, \"Register another\" )\n    )\n  );\n\n  if (prepareResult.type === 'repository') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(Typography, { paragraph: true,}, \"The following Pull Request has been opened:\"\n                , ' '\n          , React.createElement(Link, {\n            to: prepareResult.pullRequest.url,\n            target: \"_blank\",\n            rel: \"noreferrer\",}\n          \n            , prepareResult.pullRequest.url\n          )\n        )\n\n        , React.createElement(Typography, { paragraph: true,}, \"Your entities will be imported as soon as the Pull Request is merged.\"\n\n        )\n\n        , continueButton\n      )\n    );\n  }\n\n  const [existingLocations, newLocations] = partition(\n    prepareResult.locations,\n    l => l.exists,\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , newLocations.length > 0 && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, null, \"The following entities have been added to the catalog:\"\n\n          )\n\n          , React.createElement(EntityListComponent, {\n            locations: newLocations,\n            locationListItemIcon: () => React.createElement(LocationOnIcon, null ),\n            withLinks: true,}\n          )\n        )\n      )\n      , existingLocations.length > 0 && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, null, \"A refresh was triggered for the following locations:\"\n\n          )\n\n          , React.createElement(EntityListComponent, {\n            locations: existingLocations,\n            locationListItemIcon: () => React.createElement(LocationOnIcon, null ),\n            withLinks: true,}\n          )\n        )\n      )\n      , continueButton\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Checkbox,\n  Grid,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React, { useCallback, useState } from 'react';\n\nimport { BackButton, NextButton } from '../Buttons';\nimport { EntityListComponent } from '../EntityListComponent';\n\nimport partition from 'lodash/partition';\n\n\n\n\n\n\n\n\n/**\n * A form that lets a user select one of a list of locations to import\n *\n * @param analyzeResult - the result of the analysis\n * @param prepareResult - the selectected locations from a previous step\n * @param onPrepare - called after the selection\n * @param onGoBack - called to go back to the previous step\n */\nexport const StepPrepareSelectLocations = ({\n  analyzeResult,\n  prepareResult,\n  onPrepare,\n  onGoBack,\n}) => {\n  const [selectedUrls, setSelectedUrls] = useState(\n    prepareResult?.locations.map(l => l.target) || [],\n  );\n\n  const [existingLocations, locations] = partition(\n    analyzeResult?.locations,\n    l => l.exists,\n  );\n\n  const handleResult = useCallback(async () => {\n    onPrepare({\n      type: 'locations',\n      locations: locations.filter((l) => selectedUrls.includes(l.target)),\n    });\n  }, [locations, onPrepare, selectedUrls]);\n\n  const onItemClick = (url) => {\n    setSelectedUrls(urls =>\n      urls.includes(url) ? urls.filter(u => u !== url) : urls.concat(url),\n    );\n  };\n\n  const onSelectAll = () => {\n    setSelectedUrls(urls =>\n      urls.length < locations.length ? locations.map(l => l.target) : [],\n    );\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , locations.length > 0 && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, null, \"Select one or more locations that are present in your git repository:\"\n\n\n          )\n          , React.createElement(EntityListComponent, {\n            firstListItem: \n              React.createElement(ListItem, { dense: true, button: true, onClick: onSelectAll,}\n                , React.createElement(ListItemIcon, null\n                  , React.createElement(Checkbox, {\n                    edge: \"start\",\n                    checked: selectedUrls.length === locations.length,\n                    indeterminate: \n                      selectedUrls.length > 0 &&\n                      selectedUrls.length < locations.length\n                    ,\n                    tabIndex: -1,\n                    disableRipple: true,}\n                  )\n                )\n                , React.createElement(ListItemText, { primary: \"Select All\" ,} )\n              )\n            ,\n            onItemClick: onItemClick,\n            locations: locations,\n            locationListItemIcon: target => (\n              React.createElement(Checkbox, {\n                edge: \"start\",\n                checked: selectedUrls.includes(target),\n                tabIndex: -1,\n                disableRipple: true,}\n              )\n            ),\n            collapsed: true,}\n          )\n        )\n      )\n\n      , existingLocations.length > 0 && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, null, \"These locations already exist in the catalog:\"      )\n          , React.createElement(EntityListComponent, {\n            locations: existingLocations,\n            locationListItemIcon: () => React.createElement(LocationOnIcon, null ),\n            withLinks: true,\n            collapsed: true,}\n          )\n        )\n      )\n\n      , React.createElement(Grid, { container: true, spacing: 0,}\n        , onGoBack && React.createElement(BackButton, { onClick: onGoBack,} )\n        , React.createElement(NextButton, { disabled: selectedUrls.length === 0, onClick: handleResult,}, \"Review\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { FormHelperText, Grid, Typography } from '@material-ui/core';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React, { useCallback, useState } from 'react';\nimport { BackButton, NextButton } from '../Buttons';\nimport { EntityListComponent } from '../EntityListComponent';\n\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Link } from '@backstage/core-components';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { assertError } from '@backstage/errors';\n\n\n\n\n\n\n\nexport const StepReviewLocation = ({\n  prepareResult,\n  onReview,\n  onGoBack,\n}) => {\n  const catalogApi = useApi(catalogApiRef);\n  const configApi = useApi(configApiRef);\n\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const exists =\n    prepareResult.type === 'locations' &&\n    prepareResult.locations.some(l => l.exists)\n      ? true\n      : false;\n  const handleClick = useCallback(async () => {\n    setSubmitted(true);\n    try {\n      let refreshed = new Array();\n      if (prepareResult.type === 'locations') {\n        refreshed = await Promise.all(\n          prepareResult.locations\n            .filter(l => l.exists)\n            .map(async l => {\n              const ref = stringifyEntityRef(l.entities[0] ?? l);\n              await catalogApi.refreshEntity(ref);\n              return { target: l.target };\n            }),\n        );\n      }\n\n      const locations = await Promise.all(\n        prepareResult.locations\n          .filter((l) => !(l ).exists)\n          .map(async l => {\n            const result = await catalogApi.addLocation({\n              type: 'url',\n              target: l.target,\n            });\n            return {\n              target: result.location.target,\n              entities: result.entities,\n            };\n          }),\n      );\n\n      onReview({\n        ...prepareResult,\n        ...{ refreshed },\n        locations,\n      });\n    } catch (e) {\n      assertError(e);\n      // TODO: this error should be handled differently. We add it as 'optional' and\n      //       it is not uncommon that a PR has not been merged yet.\n      if (\n        prepareResult.type === 'repository' &&\n        e.message.startsWith(\n          'Location was added but has no entities specified yet',\n        )\n      ) {\n        onReview({\n          ...prepareResult,\n          locations: prepareResult.locations.map(l => ({\n            target: l.target,\n            entities: [],\n          })),\n        });\n      } else {\n        setError(e.message);\n        setSubmitted(false);\n      }\n    }\n  }, [prepareResult, onReview, catalogApi]);\n\n  return (\n    React.createElement(React.Fragment, null\n      , prepareResult.type === 'repository' && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Typography, { paragraph: true,}, \"The following Pull Request has been opened:\"\n                  , ' '\n            , React.createElement(Link, {\n              to: prepareResult.pullRequest.url,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\" ,}\n            \n              , prepareResult.pullRequest.url\n            )\n          )\n\n          , React.createElement(Typography, { paragraph: true,}, \"You can already import the location and \"\n                   , appTitle, \" will fetch the entities as soon as the Pull Request is merged.\"\n\n          )\n        )\n      )\n\n      , React.createElement(Typography, null\n        , exists\n          ? 'The following locations already exist in the catalog:'\n          : 'The following entities will be added to the catalog:'\n      )\n\n      , React.createElement(EntityListComponent, {\n        locations: prepareResult.locations,\n        locationListItemIcon: () => React.createElement(LocationOnIcon, null ),}\n      )\n\n      , error && React.createElement(FormHelperText, { error: true,}, error)\n\n      , React.createElement(Grid, { container: true, spacing: 0,}\n        , onGoBack && React.createElement(BackButton, { onClick: onGoBack, disabled: submitted,} )\n        , React.createElement(NextButton, {\n          disabled: submitted,\n          loading: submitted,\n          onClick: () => handleClick(),}\n        \n          , exists ? 'Refresh' : 'Import'\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  FormHelperText,\n  StepLabel,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { BackButton } from '../Buttons';\nimport { asInputRef } from '../helpers';\nimport { StepFinishImportLocation } from '../StepFinishImportLocation';\nimport { StepInitAnalyzeUrl } from '../StepInitAnalyzeUrl';\nimport {\n  AutocompleteTextField,\n  StepPrepareCreatePullRequest,\n} from '../StepPrepareCreatePullRequest';\nimport { StepPrepareSelectLocations } from '../StepPrepareSelectLocations';\nimport { StepReviewLocation } from '../StepReviewLocation';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The default stepper generation function.\n *\n * Override this function to customize the import flow. Each flow should at\n * least override the prepare operation.\n *\n * @param flow - the name of the active flow\n * @param defaults - the default steps\n * @public\n */\nexport function defaultGenerateStepper(\n  flow,\n  defaults,\n) {\n  switch (flow) {\n    // the prepare step is skipped but the label of the step is updated\n    case 'single-location':\n      return {\n        ...defaults,\n        prepare: () => ({\n          stepLabel: (\n            React.createElement(StepLabel, {\n              optional: \n                React.createElement(Typography, { variant: \"caption\",}, \"Discovered Locations: 1\"\n\n                )\n              ,}\n            , \"Select Locations\"\n\n            )\n          ),\n          content: React.createElement(React.Fragment, null),\n        }),\n      };\n\n    // let the user select one or more of the discovered locations in the prepare step\n    case 'multiple-locations':\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== 'locations') {\n            return defaults.prepare(state, opts);\n          }\n\n          return {\n            stepLabel: (\n              React.createElement(StepLabel, {\n                optional: \n                  React.createElement(Typography, { variant: \"caption\",}, \"Discovered Locations: \"\n                      , state.analyzeResult.locations.length\n                  )\n                ,}\n              , \"Select Locations\"\n\n              )\n            ),\n            content: (\n              React.createElement(StepPrepareSelectLocations, {\n                analyzeResult: state.analyzeResult,\n                prepareResult: state.prepareResult,\n                onPrepare: state.onPrepare,\n                onGoBack: state.onGoBack,}\n              )\n            ),\n          };\n        },\n      };\n\n    case 'no-location':\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== 'repository') {\n            return defaults.prepare(state, opts);\n          }\n\n          return {\n            stepLabel: React.createElement(StepLabel, null, \"Create Pull Request\"  ),\n            content: (\n              React.createElement(StepPrepareCreatePullRequest, {\n                analyzeResult: state.analyzeResult,\n                onPrepare: state.onPrepare,\n                onGoBack: state.onGoBack,\n                renderFormFields: ({\n                  values,\n                  setValue,\n                  formState,\n                  groupsLoading,\n                  groups,\n                  register,\n                }) => (\n                  React.createElement(React.Fragment, null\n                    , React.createElement(Box, { marginTop: 2,}\n                      , React.createElement(Typography, { variant: \"h6\",}, \"Pull Request Details\"  )\n                    )\n\n                    , React.createElement(TextField, {\n                      ...asInputRef(\n                        register('title', {\n                          required: true,\n                        }),\n                      ),\n                      label: \"Pull Request Title\"  ,\n                      placeholder: \"Add Backstage catalog entity descriptor files\"     ,\n                      margin: \"normal\",\n                      variant: \"outlined\",\n                      fullWidth: true,\n                      error: Boolean(formState.errors.title),\n                      required: true,}\n                    )\n\n                    , React.createElement(TextField, {\n                      ...asInputRef(\n                        register('body', {\n                          required: true,\n                        }),\n                      ),\n                      label: \"Pull Request Body\"  ,\n                      placeholder: \"A describing text with Markdown support\"     ,\n                      margin: \"normal\",\n                      variant: \"outlined\",\n                      fullWidth: true,\n                      error: Boolean(formState.errors.body),\n                      multiline: true,\n                      required: true,}\n                    )\n\n                    , React.createElement(Box, { marginTop: 2,}\n                      , React.createElement(Typography, { variant: \"h6\",}, \"Entity Configuration\" )\n                    )\n\n                    , React.createElement(TextField, {\n                      ...asInputRef(\n                        register('componentName', { required: true }),\n                      ),\n                      label: \"Name of the created component\"    ,\n                      placeholder: \"my-component\",\n                      margin: \"normal\",\n                      variant: \"outlined\",\n                      fullWidth: true,\n                      error: Boolean(formState.errors.componentName),\n                      required: true,}\n                    )\n\n                    , !values.useCodeowners && (\n                      React.createElement(AutocompleteTextField, {\n                        name: \"owner\",\n                        errors: formState.errors,\n                        options: groups || [],\n                        loading: groupsLoading,\n                        loadingText: \"Loading groups\" ,\n                        helperText: \"Select an owner from the list or enter a reference to a Group or a User\"               ,\n                        errorHelperText: \"required value\" ,\n                        textFieldProps: {\n                          label: 'Entity Owner',\n                          placeholder: 'my-group',\n                        },\n                        rules: { required: true },\n                        required: true,}\n                      )\n                    )\n\n                    , React.createElement(FormControlLabel, {\n                      control: \n                        React.createElement(Checkbox, {\n                          ...asInputRef(register('useCodeowners')),\n                          onChange: (_, value) => {\n                            if (value) {\n                              setValue('owner', '');\n                            }\n                          },}\n                        )\n                      ,\n                      label: \n                        React.createElement(React.Fragment, null, \"Use \"\n                           , React.createElement('em', null, \"CODEOWNERS\"), \" file as Entity Owner\"\n                        )\n                      ,}\n                    )\n                    , React.createElement(FormHelperText, null, \"WARNING: This may fail if no CODEOWNERS file is found at the target location.\"\n\n\n                    )\n                  )\n                ),}\n              )\n            ),\n          };\n        },\n      };\n\n    default:\n      return defaults;\n  }\n}\n\nexport const defaultStepper = {\n  analyze: (state, { apis }) => ({\n    stepLabel: React.createElement(StepLabel, null, \"Select URL\" ),\n    content: (\n      React.createElement(StepInitAnalyzeUrl, {\n        key: \"analyze\",\n        analysisUrl: state.analysisUrl,\n        onAnalysis: state.onAnalysis,\n        disablePullRequest: !apis.catalogImportApi.preparePullRequest,}\n      )\n    ),\n  }),\n\n  prepare: state => ({\n    stepLabel: (\n      React.createElement(StepLabel, { optional: React.createElement(Typography, { variant: \"caption\",}, \"Optional\"),}, \"Import Actions\"\n\n      )\n    ),\n    content: React.createElement(BackButton, { onClick: state.onGoBack,} ),\n  }),\n\n  review: state => ({\n    stepLabel: React.createElement(StepLabel, null, \"Review\"),\n    content: (\n      React.createElement(StepReviewLocation, {\n        prepareResult: state.prepareResult,\n        onReview: state.onReview,\n        onGoBack: state.onGoBack,}\n      )\n    ),\n  }),\n\n  finish: state => ({\n    stepLabel: React.createElement(StepLabel, null, \"Finish\"),\n    content: (\n      React.createElement(StepFinishImportLocation, {\n        prepareResult: state.prepareResult,\n        onReset: state.onReset,}\n      )\n    ),\n  }),\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard, } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Step, StepContent, Stepper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useMemo } from 'react';\nimport { catalogImportApiRef } from '../../api';\nimport { useImportState } from '../useImportState';\nimport {\n  defaultGenerateStepper,\n  defaultStepper,\n\n\n} from './defaults';\n\nconst useStyles = makeStyles(() => ({\n  stepperRoot: {\n    padding: 0,\n  },\n}));\n\n/**\n * Props for {@link ImportStepper}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n/**\n * The stepper that holds the different import stages.\n *\n * @public\n */\nexport const ImportStepper = (props) => {\n  const {\n    initialUrl,\n    generateStepper = defaultGenerateStepper,\n    variant,\n  } = props;\n\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const classes = useStyles();\n  const state = useImportState({ initialUrl });\n\n  const states = useMemo(\n    () => generateStepper(state.activeFlow, defaultStepper),\n    [generateStepper, state.activeFlow],\n  );\n\n  const render = (step) => {\n    return (\n      React.createElement(Step, null\n        , step.stepLabel\n        , React.createElement(StepContent, null, step.content)\n      )\n    );\n  };\n\n  return (\n    React.createElement(InfoCard, { variant: variant,}\n      , React.createElement(Stepper, {\n        classes: { root: classes.stepperRoot },\n        activeStep: state.activeStepNumber,\n        orientation: \"vertical\",}\n      \n        , render(\n          states.analyze(\n            state ,\n            { apis: { catalogImportApi } },\n          ),\n        )\n        , render(\n          states.prepare(\n            state ,\n            { apis: { catalogImportApi } },\n          ),\n        )\n        , render(\n          states.review(\n            state ,\n            { apis: { catalogImportApi } },\n          ),\n        )\n        , render(\n          states.finish(\n            state ,\n            { apis: { catalogImportApi } },\n          ),\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { FormHelperText, Grid, TextField } from '@material-ui/core';\nimport React, { useCallback, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { catalogImportApiRef } from '../../api';\nimport { NextButton } from '../Buttons';\nimport { asInputRef } from '../helpers';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A form that lets the user input a url and analyze it for existing locations or potential entities.\n *\n * @param onAnalysis - is called when the analysis was successful\n * @param analysisUrl - a url that can be used as a default value\n * @param disablePullRequest - if true, repositories without entities will abort the wizard\n * @public\n */\nexport const StepInitAnalyzeUrl = (props) => {\n  const {\n    onAnalysis,\n    analysisUrl = '',\n    disablePullRequest = false,\n    exampleLocationUrl = 'https://github.com/backstage/backstage/blob/master/catalog-info.yaml',\n  } = props;\n\n  const errorApi = useApi(errorApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch,\n  } = useForm({\n    mode: 'onTouched',\n    defaultValues: {\n      url: analysisUrl,\n    },\n  });\n\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState(undefined);\n\n  const handleResult = useCallback(\n    async ({ url }) => {\n      setSubmitted(true);\n\n      try {\n        const analysisResult = await catalogImportApi.analyzeUrl(url);\n\n        switch (analysisResult.type) {\n          case 'repository':\n            if (\n              !disablePullRequest &&\n              analysisResult.generatedEntities.length > 0\n            ) {\n              onAnalysis('no-location', url, analysisResult);\n            } else {\n              setError(\"Couldn't generate entities for your repository\");\n              setSubmitted(false);\n            }\n            break;\n\n          case 'locations': {\n            if (analysisResult.locations.length === 1) {\n              onAnalysis('single-location', url, analysisResult, {\n                prepareResult: analysisResult,\n              });\n            } else if (analysisResult.locations.length > 1) {\n              onAnalysis('multiple-locations', url, analysisResult);\n            } else {\n              setError('There are no entities at this location');\n              setSubmitted(false);\n            }\n            break;\n          }\n\n          default: {\n            const err = `Received unknown analysis result of type ${\n              (analysisResult ).type\n            }. Please contact the support team.`;\n            setError(err);\n            setSubmitted(false);\n\n            errorApi.post(new Error(err));\n            break;\n          }\n        }\n      } catch (e) {\n        setError(e?.data?.error?.message ?? e.message);\n        setSubmitted(false);\n      }\n    },\n    [catalogImportApi, disablePullRequest, errorApi, onAnalysis],\n  );\n\n  return (\n    React.createElement('form', { onSubmit: handleSubmit(handleResult),}\n      , React.createElement(TextField, {\n        ...asInputRef(\n          register('url', {\n            required: true,\n            validate: {\n              httpsValidator: (value) =>\n                (typeof value === 'string' &&\n                  value.match(/^http[s]?:\\/\\//) !== null) ||\n                'Must start with http:// or https://.',\n            },\n          }),\n        ),\n        fullWidth: true,\n        id: \"url\",\n        label: \"Repository URL\" ,\n        placeholder: exampleLocationUrl,\n        helperText: \"Enter the full path to your entity file to start tracking your component\"            ,\n        margin: \"normal\",\n        variant: \"outlined\",\n        error: Boolean(errors.url),\n        required: true,}\n      )\n\n      , errors.url && (\n        React.createElement(FormHelperText, { error: true,}, errors.url.message)\n      )\n\n      , error && React.createElement(FormHelperText, { error: true,}, error)\n\n      , React.createElement(Grid, { container: true, spacing: 0,}\n        , React.createElement(NextButton, {\n          disabled: Boolean(errors.url) || !watch('url'),\n          loading: submitted,\n          type: \"submit\",}\n        , \"Analyze\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CircularProgress, TextField } from '@material-ui/core';\n\nimport { Autocomplete } from '@material-ui/lab';\nimport React from 'react';\nimport { Controller, } from 'react-hook-form';\n\n/**\n * Props for {@link AutocompleteTextField}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An autocompletion text field for the catalog import flows.\n *\n * @public\n */\nexport const AutocompleteTextField = (\n  props,\n) => {\n  const {\n    name,\n    options,\n    required,\n    errors,\n    rules,\n    loading = false,\n    loadingText,\n    helperText,\n    errorHelperText,\n    textFieldProps = {},\n  } = props;\n\n  return (\n    React.createElement(Controller, {\n      name: name,\n      rules: rules,\n      render: ({ field: { onChange } }) => (\n        React.createElement(Autocomplete, {\n          loading: loading,\n          loadingText: loadingText,\n          options: options || [],\n          autoSelect: true,\n          freeSolo: true,\n          onChange: (_event, value) =>\n            onChange(value)\n          ,\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              helperText: (errors?.[name] && errorHelperText) || helperText,\n              error: Boolean(errors?.[name]),\n              margin: \"normal\",\n              variant: \"outlined\",\n              required: required,\n              InputProps: {\n                ...params.InputProps,\n                endAdornment: (\n                  React.createElement(React.Fragment, null\n                    , loading ? (\n                      React.createElement(CircularProgress, { color: \"inherit\", size: \"1em\",} )\n                    ) : null\n                    , params.InputProps.endAdornment\n                  )\n                ),\n              },\n              ...textFieldProps,}\n            )\n          ),}\n        )\n      ),}\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  FormProvider,\n\n\n  useForm,\n\n\n} from 'react-hook-form';\n\n/**\n * Props for {@link PreparePullRequestForm}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A form wrapper that creates a form that is used to prepare a pull request. It\n * hosts the form logic.\n *\n * @param defaultValues - the default values of the form\n * @param onSubmit - a callback that is executed when the form is submitted\n *   (initiated by a button of type=\"submit\")\n * @param render - render the form elements\n * @public\n */\nexport const PreparePullRequestForm = \n\n(\n  props,\n) => {\n  const { defaultValues, onSubmit, render } = props;\n\n  const methods = useForm({ mode: 'onTouched', defaultValues });\n  const { handleSubmit, watch, control, register, formState, setValue } =\n    methods;\n\n  return (\n    React.createElement(FormProvider, { ...methods,}\n      , React.createElement('form', { onSubmit: handleSubmit(onSubmit),}\n        , render({ values: watch(), formState, register, control, setValue })\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\nimport React from 'react';\nimport YAML from 'yaml';\nimport { CodeSnippet } from '@backstage/core-components';\nimport { trimEnd } from 'lodash';\nimport { useCatalogFilename } from '../../hooks';\n\n/**\n * Props for {@link PreviewCatalogInfoComponent}.\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * Previews information about an entity to create.\n *\n * @public\n */\nexport const PreviewCatalogInfoComponent = (\n  props,\n) => {\n  const { repositoryUrl, entities, classes } = props;\n  const catalogFilename = useCatalogFilename();\n\n  return (\n    React.createElement(Card, { variant: \"outlined\", className: classes?.card,}\n      , React.createElement(CardHeader, {\n        title: \n          React.createElement('code', null, `${trimEnd(repositoryUrl, '/')}/${catalogFilename}`)\n        ,}\n      )\n\n      , React.createElement(CardContent, { className: classes?.cardContent,}\n        , React.createElement(CodeSnippet, {\n          text: entities\n            .map(e => YAML.stringify(e))\n            .join('---\\n')\n            .trim(),\n          language: \"yaml\",}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\nimport React from 'react';\nimport { MarkdownContent } from '@backstage/core-components';\n\n/**\n * Props for {@link PreviewPullRequestComponent}.\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * Previews a pull request.\n *\n * @public\n */\nexport const PreviewPullRequestComponent = (\n  props,\n) => {\n  const { title, description, classes } = props;\n  return (\n    React.createElement(Card, { variant: \"outlined\", className: classes?.card,}\n      , React.createElement(CardHeader, { title: title, subheader: \"Create a new Pull Request\"    ,} )\n      , React.createElement(CardContent, { className: classes?.cardContent,}\n        , React.createElement(MarkdownContent, { content: description,} )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { assertError } from '@backstage/errors';\nimport {\n  catalogApiRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport { Box, FormHelperText, Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport useAsync from 'react-use/lib/useAsync';\nimport YAML from 'yaml';\nimport { catalogImportApiRef } from '../../api';\nimport { useCatalogFilename } from '../../hooks';\n\nimport { BackButton, NextButton } from '../Buttons';\n\nimport { PreparePullRequestForm } from './PreparePullRequestForm';\nimport { PreviewCatalogInfoComponent } from './PreviewCatalogInfoComponent';\nimport { PreviewPullRequestComponent } from './PreviewPullRequestComponent';\n\nconst useStyles = makeStyles(theme => ({\n  previewCard: {\n    marginTop: theme.spacing(1),\n  },\n  previewCardContent: {\n    paddingTop: 0,\n  },\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function generateEntities(\n  entities,\n  componentName,\n  owner,\n) {\n  return entities.map(e => ({\n    ...e,\n    apiVersion: e.apiVersion,\n    kind: e.kind,\n    metadata: {\n      ...e.metadata,\n      name: componentName,\n    },\n    spec: {\n      ...e.spec,\n      ...(owner ? { owner } : {}),\n    },\n  }));\n}\n\n/**\n * Prepares a pull request.\n *\n * @public\n */\nexport const StepPrepareCreatePullRequest = (\n  props,\n) => {\n  const { analyzeResult, onPrepare, onGoBack, renderFormFields } = props;\n\n  const classes = useStyles();\n  const catalogApi = useApi(catalogApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n\n  const catalogFilename = useCatalogFilename();\n\n  const {\n    loading: prDefaultsLoading,\n    value: prDefaults,\n    error: prDefaultsError,\n  } = useAsync(\n    () => catalogImportApi.preparePullRequest(),\n    [catalogImportApi.preparePullRequest],\n  );\n\n  useEffect(() => {\n    if (prDefaultsError) {\n      errorApi.post(prDefaultsError);\n    }\n  }, [prDefaultsError, errorApi]);\n\n  const { loading: groupsLoading, value: groups } = useAsync(async () => {\n    const groupEntities = await catalogApi.getEntities({\n      filter: { kind: 'group' },\n    });\n\n    return groupEntities.items\n      .map(e => humanizeEntityRef(e, { defaultKind: 'group' }))\n      .sort();\n  });\n\n  const handleResult = useCallback(\n    async (data) => {\n      setSubmitted(true);\n\n      try {\n        const pr = await catalogImportApi.submitPullRequest({\n          repositoryUrl: analyzeResult.url,\n          title: data.title,\n          body: data.body,\n          fileContent: generateEntities(\n            analyzeResult.generatedEntities,\n            data.componentName,\n            data.owner,\n          )\n            .map(e => YAML.stringify(e))\n            .join('---\\n'),\n        });\n\n        onPrepare(\n          {\n            type: 'repository',\n            url: analyzeResult.url,\n            integrationType: analyzeResult.integrationType,\n            pullRequest: {\n              url: pr.link,\n            },\n            locations: [\n              {\n                target: pr.location,\n                entities: generateEntities(\n                  analyzeResult.generatedEntities,\n                  data.componentName,\n                  data.owner,\n                ).map(e => ({\n                  kind: e.kind,\n                  namespace: e.metadata.namespace,\n                  name: e.metadata.name,\n                })),\n              },\n            ],\n          },\n          { notRepeatable: true },\n        );\n      } catch (e) {\n        assertError(e);\n        setError(e.message);\n        setSubmitted(false);\n      }\n    },\n    [\n      analyzeResult.generatedEntities,\n      analyzeResult.integrationType,\n      analyzeResult.url,\n      catalogImportApi,\n      onPrepare,\n    ],\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Typography, null, \"You entered a link to a \"\n              , analyzeResult.integrationType, \" repository but a\"   , ' '\n        , React.createElement('code', null, catalogFilename), \" could not be found. Use this form to open a Pull Request that creates one.\"\n\n      )\n\n      , !prDefaultsLoading && (\n        React.createElement(PreparePullRequestForm, {\n          onSubmit: handleResult,\n          defaultValues: {\n            title: prDefaults?.title ?? '',\n            body: prDefaults?.body ?? '',\n            owner:\n              (analyzeResult.generatedEntities[0]?.spec?.owner ) || '',\n            componentName:\n              analyzeResult.generatedEntities[0]?.metadata?.name || '',\n            useCodeowners: false,\n          },\n          render: ({ values, formState, register, setValue }) => (\n            React.createElement(React.Fragment, null\n              , renderFormFields({\n                values,\n                formState,\n                register,\n                setValue,\n                groups: groups ?? [],\n                groupsLoading,\n              })\n\n              , React.createElement(Box, { marginTop: 2,}\n                , React.createElement(Typography, { variant: \"h6\",}, \"Preview Pull Request\"  )\n              )\n\n              , React.createElement(PreviewPullRequestComponent, {\n                title: values.title,\n                description: values.body,\n                classes: {\n                  card: classes.previewCard,\n                  cardContent: classes.previewCardContent,\n                },}\n              )\n\n              , React.createElement(Box, { marginTop: 2, marginBottom: 1,}\n                , React.createElement(Typography, { variant: \"h6\",}, \"Preview Entities\" )\n              )\n\n              , React.createElement(PreviewCatalogInfoComponent, {\n                entities: generateEntities(\n                  analyzeResult.generatedEntities,\n                  values.componentName,\n                  values.owner,\n                ),\n                repositoryUrl: analyzeResult.url,\n                classes: {\n                  card: classes.previewCard,\n                  cardContent: classes.previewCardContent,\n                },}\n              )\n\n              , error && React.createElement(FormHelperText, { error: true,}, error)\n\n              , React.createElement(Grid, { container: true, spacing: 0,}\n                , onGoBack && (\n                  React.createElement(BackButton, { onClick: onGoBack, disabled: submitted,} )\n                )\n                , React.createElement(NextButton, {\n                  type: \"submit\",\n                  disabled: Boolean(\n                    formState.errors.title ||\n                      formState.errors.body ||\n                      formState.errors.owner,\n                  ),\n                  loading: submitted,}\n                , \"Create PR\"\n\n                )\n              )\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A helper that converts the result of a render('name', opts) to make it compatible with material-ui.\n *\n * See also https://github.com/react-hook-form/react-hook-form/issues/4629#issuecomment-815840872\n * TODO: remove when updating to material-ui v5 (https://github.com/mui-org/material-ui/pull/23174)\n *\n * @param renderResult - the result of a render('name', opts)\n */\nexport function asInputRef(renderResult) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest,\n  };\n}\n\nexport function getCatalogFilename(config) {\n  return (\n    config.getOptionalString('catalog.import.entityFilename') ??\n    'catalog-info.yaml'\n  );\n}\n\nexport function getBranchName(config) {\n  return (\n    config.getOptionalString('catalog.import.pullRequestBranchName') ??\n    'backstage-integration'\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { getCatalogFilename } from '../components/helpers';\n\nexport function useCatalogFilename() {\n  const config = useApi(configApiRef);\n\n  return getCatalogFilename(config);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * The API reference for the {@link @backstage/catalog-client#CatalogApi}.\n * @public\n */\nexport const catalogApiRef = createApiRef({\n  id: 'plugin.catalog.service',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n/**\n * An API to store starred entities\n *\n * @public\n */\nexport const starredEntitiesApiRef = createApiRef({\n  id: 'catalog-react.starred-entities',\n});\n\n/**\n * An API to store and retrieve starred entities\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\n\n\n/**\n * An in-memory mock implementation of the StarredEntitiesApi.\n *\n * @public\n */\nexport class MockStarredEntitiesApi  {\n    starredEntities = new Set();\n    subscribers = new Set\n\n();\n\n    observable = new ObservableImpl(subscriber => {\n    subscriber.next(new Set(this.starredEntities));\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  Drawer,\n  Grid,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\n\n\n/** @public */\nexport const Filters = (props) => {\n  const isMidSizeScreen = useMediaQuery(theme =>\n    theme.breakpoints.down('md'),\n  );\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n\n  return isMidSizeScreen ? (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, {\n        style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n        onClick: () => setFilterDrawerOpen(true),\n        startIcon: React.createElement(FilterListIcon, null ),}\n      , \"Filters\"\n\n      )\n      , React.createElement(Drawer, {\n        open: filterDrawerOpen,\n        onClose: () => setFilterDrawerOpen(false),\n        anchor: \"left\",\n        disableAutoFocus: true,\n        keepMounted: true,\n        variant: \"temporary\",}\n      \n        , React.createElement(Box, { m: 2,}\n          , React.createElement(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            style: { marginBottom: theme.spacing(1) },}\n          , \"Filters\"\n\n          )\n          , props.children\n        )\n      )\n    )\n  ) : (\n    React.createElement(Grid, { item: true, lg: 2,}\n      , props.children\n    )\n  );\n};\n\n/** @public */\nexport const Content = (props) => {\n  return (\n    React.createElement(Grid, { item: true, xs: 12, lg: 10,}\n      , props.children\n    )\n  );\n};\n\n/** @public */\nexport const CatalogFilterLayout = (props) => {\n  return (\n    React.createElement(Grid, { container: true, style: { position: 'relative' },}\n      , props.children\n    )\n  );\n};\n\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n  useVersionedContext,\n} from '@backstage/version-bridge';\nimport React, { } from 'react';\n\n/** @public */\n\n\n\n\n\n\n\n// This context has support for multiple concurrent versions of this package.\n// It is currently used in parallel with the old context in order to provide\n// a smooth transition, but will eventually be the only context we use.\nconst NewEntityContext = createVersionedContext(\n  'entity-context',\n);\n\n/**\n * Properties for the AsyncEntityProvider component.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Provides a loaded entity to be picked up by the `useEntity` hook.\n *\n * @public\n */\nexport const AsyncEntityProvider = ({\n  children,\n  entity,\n  loading,\n  error,\n  refresh,\n}) => {\n  const value = { entity, loading, error, refresh };\n  // We provide both the old and the new context, since\n  // consumers might be doing things like `useContext(EntityContext)`\n  return (\n    React.createElement(NewEntityContext.Provider, { value: createVersionedValueMap({ 1: value }),}\n      , children\n    )\n  );\n};\n\n/**\n * Properties for the EntityProvider component.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Provides an entity to be picked up by the `useEntity` hook.\n *\n * @public\n */\nexport const EntityProvider = (props) => (\n  React.createElement(AsyncEntityProvider, {\n    entity: props.entity,\n    loading: !Boolean(props.entity),\n    error: undefined,\n    refresh: undefined,\n    children: props.children,}\n  )\n);\n\n/**\n * Grab the current entity from the context, throws if the entity has not yet been loaded\n * or is not available.\n *\n * @public\n */\nexport function useEntity()\n\n {\n  const versionedHolder = useVersionedContext(\n    'entity-context',\n  );\n\n  if (!versionedHolder) {\n    throw new Error('Entity context is not available');\n  }\n\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error('EntityContext v1 not available');\n  }\n\n  if (!value.entity) {\n    throw new Error(\n      'useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.',\n    );\n  }\n\n  return { entity: value.entity  };\n}\n\n/**\n * Grab the current entity from the context, provides loading state and errors, and the ability to refresh.\n *\n * @public\n */\nexport function useAsyncEntity\n\n() {\n  const versionedHolder = useVersionedContext(\n    'entity-context',\n  );\n\n  if (!versionedHolder) {\n    throw new Error('Entity context is not available');\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error('EntityContext v1 not available');\n  }\n\n  const { entity, loading, error, refresh } = value;\n  return { entity: entity , loading, error, refresh };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function reduceCatalogFilters(\n  filters,\n) {\n  return filters.reduce((compoundFilter, filter) => {\n    return {\n      ...compoundFilter,\n      ...(filter.getCatalogFilters ? filter.getCatalogFilters() : {}),\n    };\n  }, {} );\n}\n\nexport function reduceEntityFilters(\n  filters,\n) {\n  return (entity) =>\n    filters.every(\n      filter => !filter.filterEntity || filter.filterEntity(entity),\n    );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  parseEntityRef,\n} from '@backstage/catalog-model';\n\n// TODO(freben): This should be returning entity refs instead\n/**\n * Get the related entity references.\n *\n * @public\n */\nexport function getEntityRelations(\n  entity,\n  relationType,\n  filter,\n) {\n  let entityNames =\n    entity?.relations\n      ?.filter(r => r.type === relationType)\n      .map(r => parseEntityRef(r.targetRef)) || [];\n\n  if (filter?.kind) {\n    entityNames = entityNames.filter(\n      e =>\n        e.kind.toLocaleLowerCase('en-US') ===\n        filter.kind.toLocaleLowerCase('en-US'),\n    );\n  }\n\n  return entityNames;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ANNOTATION_SOURCE_LOCATION,\n\n  parseLocationRef,\n} from '@backstage/catalog-model';\n\n\n/** @public */\n\n\n\n\n\n/** @public */\nexport function getEntitySourceLocation(\n  entity,\n  scmIntegrationsApi,\n) {\n  const sourceLocation =\n    entity.metadata.annotations?.[ANNOTATION_SOURCE_LOCATION];\n\n  if (!sourceLocation) {\n    return undefined;\n  }\n\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration?.type,\n    };\n  } catch {\n    return undefined;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  getCompoundEntityRef,\n  RELATION_MEMBER_OF,\n  RELATION_OWNED_BY,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { getEntityRelations } from './getEntityRelations';\n\n/**\n * Returns true if the `owner` argument is a direct owner on the `entity` argument.\n *\n * @alpha\n * @remarks\n *\n * Note that this ownership is not the same as using the claims in the auth-resolver, it only will take into account ownership as expressed by direct entity relations.\n * It doesn't know anything about the additional groups that a user might belong to which the claims contain.\n */\nexport function isOwnerOf(owner, entity) {\n  const possibleOwners = new Set(\n    [\n      ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: 'group' }),\n      ...(owner ? [getCompoundEntityRef(owner)] : []),\n    ].map(stringifyEntityRef),\n  );\n\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(\n    stringifyEntityRef,\n  );\n\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { compact, isEqual } from 'lodash';\nimport qs from 'qs';\nimport React, {\n  createContext,\n\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n} from 'react';\nimport { useLocation } from 'react-router';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport { catalogApiRef } from '../api';\n\n\n\n\n\n\n\n\n\n\nimport { reduceCatalogFilters, reduceEntityFilters } from '../utils';\nimport { useApi } from '@backstage/core-plugin-api';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates new context for entity listing and filtering.\n * @public\n */\nexport const EntityListContext = createContext\n\n(undefined);\n\n\n\n\n\n\n\n/**\n * Provides entities and filters for a catalog listing.\n * @public\n */\nexport const EntityListProvider = ({\n  children,\n}) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState(\n    {} ,\n  );\n\n  // We use react-router's useLocation hook so updates from external sources trigger an update to\n  // the queryParameters in outputState. Updates from this hook use replaceState below and won't\n  // trigger a useLocation change; this would instead come from an external source, such as a manual\n  // update of the URL or two catalog sidebar links with different catalog filters.\n  const location = useLocation();\n  const queryParameters = useMemo(\n    () =>\n      (qs.parse(location.search, {\n        ignoreQueryPrefix: true,\n      }).filters ?? {}) ,\n    [location],\n  );\n\n  const [outputState, setOutputState] = useState(\n    () => {\n      return {\n        appliedFilters: {} ,\n        entities: [],\n        backendEntities: [],\n      };\n    },\n  );\n\n  // The main async filter worker. Note that while it has a lot of dependencies\n  // in terms of its implementation, the triggering only happens (debounced)\n  // based on the requested filters changing.\n  const [{ loading, error }, refresh] = useAsyncFn(\n    async () => {\n      const compacted = compact(Object.values(requestedFilters));\n      const entityFilter = reduceEntityFilters(compacted);\n      const backendFilter = reduceCatalogFilters(compacted);\n      const previousBackendFilter = reduceCatalogFilters(\n        compact(Object.values(outputState.appliedFilters)),\n      );\n\n      const queryParams = Object.keys(requestedFilters).reduce(\n        (params, key) => {\n          const filter =\n            requestedFilters[key ];\n          if (filter?.toQueryValue) {\n            params[key] = filter.toQueryValue();\n          }\n          return params;\n        },\n        {} ,\n      );\n\n      // TODO(mtlewis): currently entities will never be requested unless\n      // there's at least one filter, we should allow an initial request\n      // to happen with no filters.\n      if (!isEqual(previousBackendFilter, backendFilter)) {\n        // TODO(timbonicus): should limit fields here, but would need filter\n        // fields + table columns\n        const response = await catalogApi.getEntities({\n          filter: backendFilter,\n        });\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: response.items,\n          entities: response.items.filter(entityFilter),\n        });\n      } else {\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: outputState.backendEntities,\n          entities: outputState.backendEntities.filter(entityFilter),\n        });\n      }\n\n      if (isMounted()) {\n        const oldParams = qs.parse(location.search, {\n          ignoreQueryPrefix: true,\n        });\n        const newParams = qs.stringify(\n          { ...oldParams, filters: queryParams },\n          { addQueryPrefix: true, arrayFormat: 'repeat' },\n        );\n        const newUrl = `${window.location.pathname}${newParams}`;\n        // We use direct history manipulation since useSearchParams and\n        // useNavigate in react-router-dom cause unnecessary extra rerenders.\n        // Also make sure to replace the state rather than pushing, since we\n        // don't want there to be back/forward slots for every single filter\n        // change.\n        window.history?.replaceState(null, document.title, newUrl);\n      }\n    },\n    [catalogApi, queryParameters, requestedFilters, outputState],\n    { loading: true },\n  );\n\n  // Slight debounce on the refresh, since (especially on page load) several\n  // filters will be calling this in rapid succession.\n  useDebounce(refresh, 10, [requestedFilters]);\n\n  const updateFilters = useCallback(\n    (\n      update\n\n,\n    ) => {\n      setRequestedFilters(prevFilters => {\n        const newFilters =\n          typeof update === 'function' ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    [],\n  );\n\n  const value = useMemo(\n    () => ({\n      filters: outputState.appliedFilters,\n      entities: outputState.entities,\n      backendEntities: outputState.backendEntities,\n      updateFilters,\n      queryParameters,\n      loading,\n      error,\n    }),\n    [outputState, updateFilters, queryParameters, loading, error],\n  );\n\n  return (\n    React.createElement(EntityListContext.Provider, { value: value,}\n      , children\n    )\n  );\n};\n\n/**\n * Hook for interacting with the entity list context provided by the {@link EntityListProvider}.\n * @public\n */\nexport function useEntityList\n\n() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error('useEntityList must be used within EntityListProvider');\n  return context;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DEFAULT_NAMESPACE } from '@backstage/catalog-model';\nimport { createRouteRef } from '@backstage/core-plugin-api';\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\n/**\n * A stable route ref that points to the catalog page for an individual entity.\n *\n * This `RouteRef` can be imported and used directly, and does not need to be referenced\n * via an `ExternalRouteRef`.\n *\n * If you want to replace the `EntityPage` from `@backstage/catalog-plugin` in your app,\n * you need to use the `entityRouteRef` as the mount point instead of your own.\n * @public\n */\nexport const entityRouteRef = getOrCreateGlobalSingleton(\n  'catalog:entity-route-ref',\n  () =>\n    createRouteRef({\n      id: 'catalog:entity',\n      params: ['namespace', 'kind', 'name'],\n    }),\n);\n\n/**\n * Utility function to get suitable route params for entityRoute, given an\n * @public\n */\nexport function entityRouteParams(entity) {\n  return {\n    kind: entity.kind.toLocaleLowerCase('en-US'),\n    namespace:\n      entity.metadata.namespace?.toLocaleLowerCase('en-US') ??\n      DEFAULT_NAMESPACE,\n    name: entity.metadata.name,\n  } ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  DEFAULT_NAMESPACE,\n} from '@backstage/catalog-model';\n\n/** @public */\nexport function humanizeEntityRef(\n  entityRef,\n  opts,\n) {\n  const defaultKind = opts?.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n\n  if ('metadata' in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n\n  if (namespace === DEFAULT_NAMESPACE) {\n    namespace = undefined;\n  }\n\n  kind = kind.toLocaleLowerCase('en-US');\n  kind =\n    defaultKind && defaultKind.toLocaleLowerCase('en-US') === kind\n      ? undefined\n      : kind;\n  return `${kind ? `${kind}:` : ''}${namespace ? `${namespace}/` : ''}${name}`;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  DEFAULT_NAMESPACE,\n  parseEntityRef,\n} from '@backstage/catalog-model';\nimport React, { forwardRef } from 'react';\nimport { entityRouteRef } from '../../routes';\nimport { humanizeEntityRef } from './humanize';\nimport { Link, } from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { Tooltip } from '@material-ui/core';\n\n/**\n * Props for {@link EntityRefLink}.\n *\n * @public\n */\n\n\n\n\n\n\n\n/**\n * Shows a clickable link to an entity.\n *\n * @public\n */\nexport const EntityRefLink = forwardRef(\n  (props, ref) => {\n    const { entityRef, defaultKind, title, children, ...linkProps } = props;\n    const entityRoute = useRouteRef(entityRouteRef);\n\n    let kind;\n    let namespace;\n    let name;\n\n    if (typeof entityRef === 'string') {\n      const parsed = parseEntityRef(entityRef);\n      kind = parsed.kind;\n      namespace = parsed.namespace;\n      name = parsed.name;\n    } else if ('metadata' in entityRef) {\n      kind = entityRef.kind;\n      namespace = entityRef.metadata.namespace;\n      name = entityRef.metadata.name;\n    } else {\n      kind = entityRef.kind;\n      namespace = entityRef.namespace;\n      name = entityRef.name;\n    }\n\n    kind = kind.toLocaleLowerCase('en-US');\n    namespace = namespace?.toLocaleLowerCase('en-US') ?? DEFAULT_NAMESPACE;\n\n    const routeParams = { kind, namespace, name };\n    const formattedEntityRefTitle = humanizeEntityRef(\n      { kind, namespace, name },\n      { defaultKind },\n    );\n\n    const link = (\n      React.createElement(Link, { ...linkProps, ref: ref, to: entityRoute(routeParams),}\n        , children\n        , !children && (title ?? formattedEntityRefTitle)\n      )\n    );\n\n    return title ? (\n      React.createElement(Tooltip, { title: formattedEntityRefTitle,}, link)\n    ) : (\n      link\n    );\n  },\n) ;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React from 'react';\nimport { EntityRefLink } from './EntityRefLink';\n\n\n/**\n * Props for {@link EntityRefLink}.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Shows a list of clickable links to entities.\n *\n * @public\n */\nexport function EntityRefLinks(props) {\n  const { entityRefs, defaultKind, ...linkProps } = props;\n  return (\n    React.createElement(React.Fragment, null\n      , entityRefs.map((r, i) => (\n        React.createElement(React.Fragment, { key: i,}\n          , i > 0 && ', '\n          , React.createElement(EntityRefLink, {\n            ...linkProps,\n            entityRef: r,\n            defaultKind: defaultKind,}\n          )\n        )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { humanizeEntityRef } from './components/EntityRefLink';\n\nimport { getEntityRelations } from './utils';\n\n/**\n * Filter entities based on Kind.\n * @public\n */\nexport class EntityKindFilter  {\n  constructor( value) {;this.value = value;}\n\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n\n  toQueryValue() {\n    return this.value;\n  }\n}\n\n/**\n * Filters entities based on type\n * @public\n */\nexport class EntityTypeFilter  {\n  constructor( value) {;this.value = value;}\n\n  // Simplify `string | string[]` for consumers, always returns an array\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n\n  getCatalogFilters() {\n    return { 'spec.type': this.getTypes() };\n  }\n\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\n\n/**\n * Filters entities based on tag.\n * @public\n */\nexport class EntityTagFilter  {\n  constructor( values) {;this.values = values;}\n\n  filterEntity(entity) {\n    return this.values.every(v => (entity.metadata.tags ?? []).includes(v));\n  }\n\n  toQueryValue() {\n    return this.values;\n  }\n}\n\n/**\n * Filters entities where the text matches spec, title or tags.\n * @public\n */\nexport class EntityTextFilter  {\n  constructor( value) {;this.value = value;}\n\n  filterEntity(entity) {\n    const upperCaseValue = this.value.toLocaleUpperCase('en-US');\n\n    return (\n      entity.metadata.name\n        .toLocaleUpperCase('en-US')\n        .includes(upperCaseValue) ||\n      `${entity.metadata.title}`\n        .toLocaleUpperCase('en-US')\n        .includes(upperCaseValue) ||\n      entity.metadata.tags\n        ?.join('')\n        .toLocaleUpperCase('en-US')\n        .indexOf(upperCaseValue) !== -1\n    );\n  }\n}\n\n/**\n * Filter matching entities that are owned by group.\n * @public\n */\nexport class EntityOwnerFilter  {\n  constructor( values) {;this.values = values;}\n\n  filterEntity(entity) {\n    return this.values.some(v =>\n      getEntityRelations(entity, RELATION_OWNED_BY).some(\n        o => humanizeEntityRef(o, { defaultKind: 'group' }) === v,\n      ),\n    );\n  }\n\n  toQueryValue() {\n    return this.values;\n  }\n}\n\n/**\n * Filters entities on lifecycle.\n * @public\n */\nexport class EntityLifecycleFilter  {\n  constructor( values) {;this.values = values;}\n\n  filterEntity(entity) {\n    return this.values.some(v => entity.spec?.lifecycle === v);\n  }\n\n  toQueryValue() {\n    return this.values;\n  }\n}\n\n/**\n * Filters entities based on whatever the user has starred or owns them.\n * @public\n */\nexport class UserListFilter  {\n  constructor(\n     value,\n     isOwnedEntity,\n     isStarredEntity,\n  ) {;this.value = value;this.isOwnedEntity = isOwnedEntity;this.isStarredEntity = isStarredEntity;}\n\n  filterEntity(entity) {\n    switch (this.value) {\n      case 'owned':\n        return this.isOwnedEntity(entity);\n      case 'starred':\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n\n  toQueryValue() {\n    return this.value;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport isEqual from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '../api';\nimport { useEntityList } from './useEntityListProvider';\nimport { EntityTypeFilter } from '../filters';\n\n/**\n * A hook built on top of `useEntityList` for enabling selection of valid `spec.type` values\n * based on the selected EntityKindFilter.\n * @public\n */\nexport function useEntityTypeFilter()\n\n\n\n\n\n {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters,\n  } = useEntityList();\n\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean) ,\n    [typeParameter],\n  );\n\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length\n      ? flattenedQueryTypes\n      : typeFilter?.getTypes() ?? [],\n  );\n\n  // Set selected types on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter?.value, [kindFilter]);\n\n  // Load all valid spec.type values straight from the catalogApi, paying attention to only the\n  // kind filter for a complete list.\n  const {\n    error,\n    loading,\n    value: facets,\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi\n        .getEntityFacets({\n          filter: { kind },\n          facets: ['spec.type'],\n        })\n        .then(response => response.facets['spec.type'] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    // Delay processing hook until kind and facets load updates have settled to generate list of types;\n    // This prevents resetting the type filter due to saved type value from query params not matching the\n    // empty set of type values while values are still being loaded; also only run this hook on changes\n    // to facets\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n\n    // Sort by facet count descending, so the most common types appear on top\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, f => -f.count).map(f =>\n          f.value.toLocaleLowerCase('en-US'),\n        ),\n      ),\n    ];\n    setAvailableTypes(newTypes);\n\n    // Update type filter to only valid values when the list of available types has changed\n    const stillValidTypes = selectedTypes.filter(value =>\n      newTypes.includes(value),\n    );\n    if (!isEqual(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length\n        ? new EntityTypeFilter(selectedTypes)\n        : undefined,\n    });\n  }, [selectedTypes, updateFilters]);\n\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { chunk, groupBy } from 'lodash';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../api';\n\nconst BATCH_SIZE = 20;\n\n/** @public */\nexport function useRelatedEntities(\n  entity,\n  relationFilter,\n)\n\n\n\n {\n  const filterByTypeLower = relationFilter?.type?.toLocaleLowerCase('en-US');\n  const filterByKindLower = relationFilter?.kind?.toLocaleLowerCase('en-US');\n\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error,\n  } = useAsync(async () => {\n    const relations = entity.relations\n      ?.map(r => ({ type: r.type, target: parseEntityRef(r.targetRef) }))\n      .filter(\n        r =>\n          (!filterByTypeLower ||\n            r.type.toLocaleLowerCase('en-US') === filterByTypeLower) &&\n          (!filterByKindLower || r.target.kind === filterByKindLower),\n      );\n\n    if (!relations) {\n      return [];\n    }\n\n    // Group the relations by kind and namespace to reduce the size of the request query string.\n    // Without this grouping, the kind and namespace would need to be specified for each relation, e.g.\n    // `filter=kind=component,namespace=default,name=example1&filter=kind=component,namespace=default,name=example2`\n    // with grouping, we can generate a query a string like\n    // `filter=kind=component,namespace=default,name=example1,example2`\n    const relationsByKindAndNamespace = Object.values(\n      groupBy(relations, ({ target }) => {\n        return `${target.kind}:${target.namespace}`.toLocaleLowerCase('en-US');\n      }),\n    );\n\n    // Split the names within each group into batches to further reduce the query string length.\n    const batchedRelationsByKindAndNamespace\n\n\n\n = [];\n    for (const rs of relationsByKindAndNamespace) {\n      batchedRelationsByKindAndNamespace.push({\n        // All relations in a group have the same kind and namespace, so its arbitrary which we pick\n        kind: rs[0].target.kind,\n        namespace: rs[0].target.namespace,\n        nameBatches: chunk(\n          rs.map(r => r.target.name),\n          BATCH_SIZE,\n        ),\n      });\n    }\n\n    const results = await Promise.all(\n      batchedRelationsByKindAndNamespace.flatMap(rs => {\n        return rs.nameBatches.map(names => {\n          return catalogApi.getEntities({\n            filter: {\n              kind: rs.kind,\n              'metadata.namespace': rs.namespace,\n              'metadata.name': names,\n            },\n          });\n        });\n      }),\n    );\n\n    return results.flatMap(r => r.items);\n  }, [entity, filterByTypeLower, filterByKindLower]);\n\n  return {\n    entities,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useCallback } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\nimport { starredEntitiesApiRef } from '../apis';\n\nfunction getEntityRef(\n  entityOrRef,\n) {\n  return typeof entityOrRef === 'string'\n    ? entityOrRef\n    : stringifyEntityRef(entityOrRef);\n}\n\n/** @public */\nexport function useStarredEntities()\n\n\n\n\n\n\n\n {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n\n  const starredEntities = useObservable(\n    starredEntitiesApi.starredEntitie$(),\n    new Set(),\n  );\n\n  const isStarredEntity = useCallback(\n    (entityOrRef) =>\n      starredEntities.has(getEntityRef(entityOrRef)),\n    [starredEntities],\n  );\n\n  const toggleStarredEntity = useCallback(\n    (entityOrRef) =>\n      starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [starredEntitiesApi],\n  );\n\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useCallback, useEffect, useState } from 'react';\nimport { starredEntitiesApiRef } from '../apis';\n\nfunction getEntityRef(\n  entityOrRef,\n) {\n  return typeof entityOrRef === 'string'\n    ? entityOrRef\n    : stringifyEntityRef(entityOrRef);\n}\n\n/** @public */\nexport function useStarredEntity(\n  entityOrRef,\n)\n\n\n {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      },\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n\n  const toggleStarredEntity = useCallback(\n    () => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [entityOrRef, starredEntitiesApi],\n  );\n\n  return {\n    toggleStarredEntity,\n    isStarredEntity,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_OWNED_BY,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { getEntityRelations } from '../utils/getEntityRelations';\n\n/**\n * Returns a function that checks whether the currently signed-in user is an\n * owner of a given entity. When the hook is initially mounted, the loading\n * flag will be true and the results returned from the function will always be\n * false.\n *\n * @public\n *\n * @returns a function that checks if the signed in user owns an entity\n */\nexport function useEntityOwnership()\n\n\n {\n  const identityApi = useApi(identityApiRef);\n\n  // Trigger load only on mount\n  const { loading, value: refs } = useAsync(async () => {\n    const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n    return ownershipEntityRefs;\n  }, []);\n\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs ?? []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(\n        stringifyEntityRef,\n      );\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n\n  return useMemo(() => ({ loading, isOwnedEntity }), [loading, isOwnedEntity]);\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { useAsyncEntity } from './useEntity';\n\n/**\n * A thin wrapper around the\n * {@link @backstage/plugin-permission-react#usePermission} hook which uses the\n * current entity in context to make an authorization request for the given\n * {@link @backstage/plugin-catalog-common#CatalogEntityPermission}.\n *\n * Note: this hook blocks the permission request until the entity has loaded in\n * context. If you have the entityRef and need concurrent requests, use the\n * `usePermission` hook directly.\n * @alpha\n */\nexport function useEntityPermission(\n  // TODO(joeporpeglia) Replace with `CatalogEntityPermission` when the issue described in\n  // https://github.com/backstage/backstage/pull/10128 is fixed.\n  permission,\n)\n\n\n\n {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError,\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError,\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : undefined,\n  });\n\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { useEntityList } from '../../hooks';\nimport { EntityKindFilter } from '../../filters';\n\n/**\n * Props for {@link EntityKindPicker}.\n *\n * @public\n */\n\n\n\n\n\n/** @public */\nexport const EntityKindPicker = (props) => {\n  const { initialFilter, hidden } = props;\n\n  const {\n    updateFilters,\n    queryParameters: { kind: kindParameter },\n  } = useEntityList();\n  const [selectedKind] = useState([kindParameter].flat()[0] ?? initialFilter);\n\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : undefined,\n    });\n  }, [selectedKind, updateFilters]);\n\n  if (hidden) return null;\n\n  // TODO(timbonicus): This should load available kinds from the catalog-backend, similar to\n  // EntityTypePicker.\n\n  return React.createElement(Alert, { severity: \"warning\",}, \"Kind filter not yet available\"    );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityLifecycleFilter } from '../../filters';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  {\n    input: {},\n  },\n  {\n    name: 'CatalogReactEntityLifecyclePicker',\n  },\n);\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/** @public */\nexport const EntityLifecyclePicker = () => {\n  const classes = useStyles();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { lifecycles: lifecyclesParameter },\n  } = useEntityList();\n\n  const queryParamLifecycles = useMemo(\n    () => [lifecyclesParameter].flat().filter(Boolean) ,\n    [lifecyclesParameter],\n  );\n\n  const [selectedLifecycles, setSelectedLifecycles] = useState(\n    queryParamLifecycles.length\n      ? queryParamLifecycles\n      : filters.lifecycles?.values ?? [],\n  );\n\n  // Set selected lifecycles on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamLifecycles.length) {\n      setSelectedLifecycles(queryParamLifecycles);\n    }\n  }, [queryParamLifecycles]);\n\n  useEffect(() => {\n    updateFilters({\n      lifecycles: selectedLifecycles.length\n        ? new EntityLifecycleFilter(selectedLifecycles)\n        : undefined,\n    });\n  }, [selectedLifecycles, updateFilters]);\n\n  const availableLifecycles = useMemo(\n    () =>\n      [\n        ...new Set(\n          backendEntities\n            .map((e) => e.spec?.lifecycle)\n            .filter(Boolean) ,\n        ),\n      ].sort(),\n    [backendEntities],\n  );\n\n  if (!availableLifecycles.length) return null;\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\", component: \"label\",}, \"Lifecycle\"\n\n        , React.createElement(Autocomplete, {\n          multiple: true,\n          options: availableLifecycles,\n          value: selectedLifecycles,\n          onChange: (_, value) =>\n            setSelectedLifecycles(value)\n          ,\n          renderOption: (option, { selected }) => (\n            React.createElement(FormControlLabel, {\n              control: \n                React.createElement(Checkbox, {\n                  icon: icon,\n                  checkedIcon: checkedIcon,\n                  checked: selected,}\n                )\n              ,\n              label: option,}\n            )\n          ),\n          size: \"small\",\n          popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"lifecycle-picker-expand\",} ),\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              className: classes.input,\n              variant: \"outlined\",}\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityOwnerFilter } from '../../filters';\nimport { getEntityRelations } from '../../utils';\nimport { humanizeEntityRef } from '../EntityRefLink';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  {\n    input: {},\n  },\n  {\n    name: 'CatalogReactEntityOwnerPicker',\n  },\n);\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/** @public */\nexport const EntityOwnerPicker = () => {\n  const classes = useStyles();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { owners: ownersParameter },\n  } = useEntityList();\n\n  const queryParamOwners = useMemo(\n    () => [ownersParameter].flat().filter(Boolean) ,\n    [ownersParameter],\n  );\n\n  const [selectedOwners, setSelectedOwners] = useState(\n    queryParamOwners.length ? queryParamOwners : filters.owners?.values ?? [],\n  );\n\n  // Set selected owners on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      setSelectedOwners(queryParamOwners);\n    }\n  }, [queryParamOwners]);\n\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length\n        ? new EntityOwnerFilter(selectedOwners)\n        : undefined,\n    });\n  }, [selectedOwners, updateFilters]);\n\n  const availableOwners = useMemo(\n    () =>\n      [\n        ...new Set(\n          backendEntities\n            .flatMap((e) =>\n              getEntityRelations(e, RELATION_OWNED_BY).map(o =>\n                humanizeEntityRef(o, { defaultKind: 'group' }),\n              ),\n            )\n            .filter(Boolean) ,\n        ),\n      ].sort(),\n    [backendEntities],\n  );\n\n  if (!availableOwners.length) return null;\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\", component: \"label\",}, \"Owner\"\n\n        , React.createElement(Autocomplete, {\n          multiple: true,\n          options: availableOwners,\n          value: selectedOwners,\n          onChange: (_, value) => setSelectedOwners(value),\n          renderOption: (option, { selected }) => (\n            React.createElement(FormControlLabel, {\n              control: \n                React.createElement(Checkbox, {\n                  icon: icon,\n                  checkedIcon: checkedIcon,\n                  checked: selected,}\n                )\n              ,\n              label: option,}\n            )\n          ),\n          size: \"small\",\n          popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"owner-picker-expand\",} ),\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              className: classes.input,\n              variant: \"outlined\",}\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FormControl,\n  IconButton,\n  Input,\n  InputAdornment,\n  makeStyles,\n  Toolbar,\n} from '@material-ui/core';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport React, { useState } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityTextFilter } from '../../filters';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  _theme => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0,\n    },\n    input: {},\n  }),\n  {\n    name: 'CatalogReactEntitySearchBar',\n  },\n);\n\n/**\n * Renders search bar for filtering the entity list.\n * @public\n */\nexport const EntitySearchBar = () => {\n  const classes = useStyles();\n\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState(filters.text?.value ?? '');\n\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : undefined,\n      });\n    },\n    250,\n    [search, updateFilters],\n  );\n\n  return (\n    React.createElement(Toolbar, { className: classes.searchToolbar,}\n      , React.createElement(FormControl, null\n        , React.createElement(Input, {\n          'aria-label': \"search\",\n          id: \"input-with-icon-adornment\",\n          className: classes.input,\n          placeholder: \"Search\",\n          autoComplete: \"off\",\n          onChange: event => setSearch(event.target.value),\n          value: search,\n          startAdornment: \n            React.createElement(InputAdornment, { position: \"start\",}\n              , React.createElement(Search, null )\n            )\n          ,\n          endAdornment: \n            React.createElement(InputAdornment, { position: \"end\",}\n              , React.createElement(IconButton, {\n                'aria-label': \"clear search\" ,\n                onClick: () => setSearch(''),\n                edge: \"end\",\n                disabled: search.length === 0,}\n              \n                , React.createElement(Clear, null )\n              )\n            )\n          ,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  RELATION_OWNED_BY,\n  RELATION_PART_OF,\n} from '@backstage/catalog-model';\nimport { OverflowTooltip, } from '@backstage/core-components';\nimport React from 'react';\nimport { getEntityRelations } from '../../utils';\nimport {\n  EntityRefLink,\n  EntityRefLinks,\n  humanizeEntityRef,\n} from '../EntityRefLink';\n\n/** @public */\nexport const columnFactories = Object.freeze({\n  createEntityRefColumn(options\n\n) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      return (\n        entity.metadata?.title ||\n        humanizeEntityRef(entity, {\n          defaultKind,\n        })\n      );\n    }\n\n    return {\n      title: 'Name',\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        // TODO: We could implement this more efficiently, like searching over\n        // each field that is displayed individually (kind, namespace, name).\n        // but that might confuse the user as it will behave different than a\n        // simple text search.\n        // Another alternative would be to cache the values. But writing them\n        // into the entity feels bad too.\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        // TODO: We could implement this more efficiently by comparing field by field.\n        // This has similar issues as above.\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: entity => (\n        React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind: defaultKind,\n          title: entity.metadata?.title,}\n        )\n      ),\n    };\n  },\n  createEntityRelationColumn({\n    title,\n    relation,\n    defaultKind,\n    filter: entityFilter,\n  }\n\n\n\n\n) {\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n\n    function formatContent(entity) {\n      return getRelations(entity)\n        .map(r => humanizeEntityRef(r, { defaultKind }))\n        .join(', ');\n    }\n\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: entity => {\n        return (\n          React.createElement(EntityRefLinks, {\n            entityRefs: getRelations(entity),\n            defaultKind: defaultKind,}\n          )\n        );\n      },\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: 'Owner',\n      relation: RELATION_OWNED_BY,\n      defaultKind: 'group',\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: 'Domain',\n      relation: RELATION_PART_OF,\n      defaultKind: 'domain',\n      filter: {\n        kind: 'domain',\n      },\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: 'System',\n      relation: RELATION_PART_OF,\n      defaultKind: 'system',\n      filter: {\n        kind: 'system',\n      },\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: 'Description',\n      field: 'metadata.description',\n      render: entity => (\n        React.createElement(OverflowTooltip, {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",\n          line: 2,}\n        )\n      ),\n      width: 'auto',\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: 'Lifecycle',\n      field: 'spec.lifecycle',\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: 'Type',\n      field: 'spec.type',\n    };\n  },\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { columnFactories } from './columns';\n\nexport const systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: 'system' }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn(),\n];\n\nexport const componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: 'component' }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn(),\n];\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { makeStyles } from '@material-ui/core';\nimport React, { } from 'react';\nimport { columnFactories } from './columns';\nimport { componentEntityColumns, systemEntityColumns } from './presets';\nimport {\n\n  Table,\n\n} from '@backstage/core-components';\n\n/**\n * Props for {@link EntityTable}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    justifyContent: 'center',\n  },\n}));\n\n/**\n * A general entity table component, that can be used for composing more\n * specific entity tables.\n *\n * @public\n */\nexport const EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = 'gridItem',\n    columns,\n  } = props;\n\n  const classes = useStyles();\n  const tableStyle = {\n    minWidth: '0',\n    width: '100%',\n  };\n\n  if (variant === 'gridItem') {\n    tableStyle.height = 'calc(100% - 10px)';\n  }\n\n  return (\n    React.createElement(Table, {\n      columns: columns,\n      title: title,\n      style: tableStyle,\n      emptyContent: \n        emptyContent && React.createElement('div', { className: classes.empty,}, emptyContent)\n      ,\n      options: {\n        // TODO: Toolbar padding if off compared to other cards, should be: padding: 16px 24px;\n        search: false,\n        paging: false,\n        actionsColumnIndex: -1,\n        padding: 'dense',\n      },\n      data: entities,}\n    )\n  );\n};\n\nEntityTable.columns = columnFactories;\n\nEntityTable.systemEntityColumns = systemEntityColumns;\n\nEntityTable.componentEntityColumns = componentEntityColumns;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useEntityList } from '../../hooks/useEntityListProvider';\nimport { EntityTagFilter } from '../../filters';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../../api';\n\n/** @public */\n\n\nconst useStyles = makeStyles(\n  {\n    input: {},\n  },\n  {\n    name: 'CatalogReactEntityTagPicker',\n  },\n);\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/** @public */\nexport const EntityTagPicker = () => {\n  const classes = useStyles();\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { tags: tagsParameter },\n  } = useEntityList();\n\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableTags } = useAsync(async () => {\n    const facet = 'metadata.tags';\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: filters.kind?.getCatalogFilters(),\n    });\n\n    return facets[facet].map(({ value }) => value);\n  }, [filters.kind]);\n\n  const queryParamTags = useMemo(\n    () => [tagsParameter].flat().filter(Boolean) ,\n    [tagsParameter],\n  );\n\n  const [selectedTags, setSelectedTags] = useState(\n    queryParamTags.length ? queryParamTags : filters.tags?.values ?? [],\n  );\n\n  // Set selected tags on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamTags.length) {\n      setSelectedTags(queryParamTags);\n    }\n  }, [queryParamTags]);\n\n  useEffect(() => {\n    updateFilters({\n      tags: selectedTags.length ? new EntityTagFilter(selectedTags) : undefined,\n    });\n  }, [selectedTags, updateFilters]);\n\n  if (!availableTags?.length) return null;\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\", component: \"label\",}, \"Tags\"\n\n        , React.createElement(Autocomplete, {\n          multiple: true,\n          options: availableTags,\n          value: selectedTags,\n          onChange: (_, value) => setSelectedTags(value),\n          renderOption: (option, { selected }) => (\n            React.createElement(FormControlLabel, {\n              control: \n                React.createElement(Checkbox, {\n                  icon: icon,\n                  checkedIcon: checkedIcon,\n                  checked: selected,}\n                )\n              ,\n              label: option,}\n            )\n          ),\n          size: \"small\",\n          popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"tag-picker-expand\",} ),\n          renderInput: params => (\n            React.createElement(TextField, {\n              ...params,\n              className: classes.input,\n              variant: \"outlined\",}\n            )\n          ),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { Box } from '@material-ui/core';\nimport { useEntityTypeFilter } from '../../hooks/useEntityTypeFilter';\n\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Select } from '@backstage/core-components';\n\n/**\n * Props for {@link EntityTypePicker}.\n *\n * @public\n */\n\n\n\n\n\n/** @public */\nexport const EntityTypePicker = (props) => {\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } =\n    useEntityTypeFilter();\n\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: 'error',\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n\n  if (availableTypes.length === 0 || error) return null;\n\n  const items = [\n    { value: 'all', label: 'All' },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: capitalize(type),\n    })),\n  ];\n\n  return hidden ? null : (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Select, {\n        label: \"Type\",\n        items: items,\n        selected: (items.length > 1 ? selectedTypes[0] : undefined) ?? 'all',\n        onChange: value =>\n          setSelectedTypes(value === 'all' ? [] : [String(value)])\n        ,}\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { IconButton, Tooltip, withStyles } from '@material-ui/core';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport React, { } from 'react';\nimport { useStarredEntity } from '../../hooks/useStarredEntity';\n\n/** @public */\n\n\n\n\nconst YellowStar = withStyles({\n  root: {\n    color: '#f3ba37',\n  },\n})(Star);\n\n/**\n * IconButton for showing if a current entity is starred and adding/removing it from the favorite entities\n * @param props - MaterialUI IconButton props extended by required `entity` prop\n * @public\n */\nexport const FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(\n    props.entity,\n  );\n  return (\n    React.createElement(IconButton, {\n      'aria-label': \"favorite\",\n      color: \"inherit\",\n      ...props,\n      onClick: () => toggleStarredEntity(),}\n    \n      , React.createElement(Tooltip, {\n        title: isStarredEntity ? 'Remove from favorites' : 'Add to favorites',}\n      \n        , isStarredEntity ? React.createElement(YellowStar, null ) : React.createElement(StarBorder, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { useApp } from '@backstage/core-plugin-api';\nimport WorkIcon from '@material-ui/icons/Work';\nimport React from 'react';\n\nconst DEFAULT_ICON = WorkIcon;\n\nfunction getKind(\n  kind,\n  entityRef,\n) {\n  if (kind) {\n    return kind.toLocaleLowerCase('en-US');\n  }\n\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase('en-US');\n    } catch {\n      return undefined;\n    }\n  }\n\n  return undefined;\n}\n\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\n\nexport function EntityKindIcon(props\n\n\n\n\n\n\n\n) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return React.createElement(Icon, { ...otherProps,} );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  DEFAULT_NAMESPACE,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  DependencyGraph,\n  DependencyGraphTypes,\n  Link,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { Box, DialogContentText, makeStyles } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useLayoutEffect, useRef, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../../../api';\nimport { humanizeEntityRef } from '../../EntityRefLink';\nimport { entityRouteRef } from '../../../routes';\nimport { EntityKindIcon } from './EntityKindIcon';\n\nconst useStyles = makeStyles(theme => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    '&.primary': {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light,\n    },\n    '&.secondary': {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light,\n    },\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    '&.primary': {\n      fill: theme.palette.primary.contrastText,\n    },\n    '&.secondary': {\n      fill: theme.palette.secondary.contrastText,\n    },\n    '&.focused': {\n      fontWeight: 'bold',\n    },\n  },\n  clickable: {\n    cursor: 'pointer',\n  },\n}));\n\n\n\nfunction useAncestry(root)\n\n\n\n\n {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n\n  return {\n    loading,\n    error,\n    nodes: value?.nodes || [],\n    edges: value?.edges || [],\n  };\n}\n\nfunction CustomNode({ node }) {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n\n  useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = iconSize + padding;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  const displayTitle =\n    node.metadata.title ||\n    (node.kind && node.metadata.name && node.metadata.namespace\n      ? humanizeEntityRef({\n          kind: node.kind,\n          name: node.metadata.name,\n          namespace: node.metadata.namespace || '',\n        })\n      : node.id);\n\n  const onClick = () => {\n    navigate(\n      entityRoute({\n        kind: node.kind,\n        namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n        name: node.metadata.name,\n      }),\n    );\n  };\n\n  return (\n    React.createElement('g', { onClick: onClick, className: classes.clickable,}\n      , React.createElement('rect', {\n        className: classNames(\n          classes.node,\n          node.root ? 'secondary' : 'primary',\n        ),\n        width: paddedWidth,\n        height: paddedHeight,\n        rx: 10,}\n      )\n      , React.createElement(EntityKindIcon, {\n        kind: node.kind,\n        y: padding,\n        x: padding,\n        width: iconSize,\n        height: iconSize,\n        className: classNames(\n          classes.text,\n          node.root ? 'secondary' : 'primary',\n        ),}\n      )\n      , React.createElement('text', {\n        ref: idRef,\n        className: classNames(\n          classes.text,\n          node.root ? 'secondary' : 'primary',\n        ),\n        y: paddedHeight / 2,\n        x: paddedIconWidth + (width + padding * 2) / 2,\n        textAnchor: \"middle\",\n        alignmentBaseline: \"middle\",}\n      \n        , displayTitle\n      )\n    )\n  );\n}\n\nexport function AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Ancestry\")\n      , React.createElement(DialogContentText, { gutterBottom: true,}, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\"\n\n                , ' '\n        , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\",}, \"processors emitted\"\n\n        ), ' ', \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"\n\n\n      )\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(DependencyGraph, {\n          nodes: nodes,\n          edges: edges,\n          renderNode: CustomNode,\n          direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n          zoom: \"enable-on-click\",}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Link } from '@backstage/core-components';\nimport {\n  Box,\n  Card,\n  CardContent,\n  ListItem,\n  ListItemIcon,\n  ListItemText as MuiListItemText,\n  ListSubheader as MuiListSubheader,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  marginTop: {\n    marginTop: theme.spacing(2),\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled,\n  },\n  monospace: {\n    fontFamily: 'monospace',\n  },\n}));\n\nexport function ListItemText(props\n\n\n) {\n  const classes = useStyles();\n  return (\n    React.createElement(MuiListItemText, {\n      ...props,\n      primaryTypographyProps: { className: classes.monospace },\n      secondaryTypographyProps: { className: classes.monospace },}\n    )\n  );\n}\n\nexport function ListSubheader(props) {\n  const classes = useStyles();\n  return (\n    React.createElement(MuiListSubheader, { className: classes.monospace,}\n      , props.children\n    )\n  );\n}\n\nexport function Container(props\n\n\n\n) {\n  return (\n    React.createElement(Box, { mt: 2,}\n      , React.createElement(Card, { variant: \"outlined\",}\n        , React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"h6\", gutterBottom: true,}\n            , props.title\n            , props.helpLink && React.createElement(HelpIcon, { to: props.helpLink,} )\n          )\n          , props.children\n        )\n      )\n    )\n  );\n}\n\n// Extracts a link from a value, if possible\nfunction findLink(value) {\n  if (value.match(/^url:https?:\\/\\//)) {\n    return value.slice('url:'.length);\n  }\n  if (value.match(/^https?:\\/\\//)) {\n    return value;\n  }\n  return undefined;\n}\n\nexport function KeyValueListItem(props\n\n\n) {\n  const [key, value] = props.entry;\n  const link = findLink(value);\n\n  return (\n    React.createElement(ListItem, null\n      , props.indent && React.createElement(ListItemIcon, null )\n      , React.createElement(ListItemText, {\n        primary: key,\n        secondary: link ? React.createElement(Link, { to: link,}, value) : value,}\n      )\n    )\n  );\n}\n\nexport function HelpIcon(props) {\n  const classes = useStyles();\n  return (\n    React.createElement(Link, { to: props.to, className: classes.helpIcon,}\n      , React.createElement(HelpOutlineIcon, { fontSize: \"inherit\",} )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  ANNOTATION_LOCATION,\n  ANNOTATION_ORIGIN_LOCATION,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  DialogContentText,\n  List,\n  ListItem,\n  ListItemIcon,\n  makeStyles,\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '../../../api';\nimport { EntityRefLink } from '../../EntityRefLink';\nimport { KeyValueListItem, ListItemText } from './common';\nimport { EntityKindIcon } from './EntityKindIcon';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nfunction useColocated(entity)\n\n\n\n\n\n {\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = entity.metadata.annotations?.[ANNOTATION_LOCATION];\n  const origin = entity.metadata.annotations?.[ANNOTATION_ORIGIN_LOCATION];\n\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...(location\n          ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }]\n          : []),\n        ...(origin\n          ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }]\n          : []),\n      ],\n    });\n    return response.items;\n  }, [location, origin]);\n\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value?.filter(\n      colocated => stringifyEntityRef(colocated) !== currentEntityRef,\n    ),\n  };\n}\n\nfunction EntityList(props) {\n  return (\n    React.createElement(List, { dense: true,}\n      , props.header && React.createElement(KeyValueListItem, { key: \"header\", entry: props.header,} )\n      , props.entities.map(entity => (\n        React.createElement(ListItem, { key: stringifyEntityRef(entity),}\n          , React.createElement(ListItemIcon, null\n            , React.createElement(EntityKindIcon, { kind: entity.kind,} )\n          )\n          , React.createElement(ListItemText, { primary: React.createElement(EntityRefLink, { entityRef: entity,} ),} )\n        )\n      ))\n    )\n  );\n}\n\nfunction Contents(props) {\n  const { entity } = props;\n\n  const { loading, error, location, originLocation, colocatedEntities } =\n    useColocated(entity);\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  if (!location && !originLocation) {\n    return (\n      React.createElement(Alert, { severity: \"warning\",}, \"Entity had no location information.\"    )\n    );\n  } else if (!colocatedEntities?.length) {\n    return (\n      React.createElement(Alert, { severity: \"info\",}, \"There were no other entities on this location.\"\n\n      )\n    );\n  }\n\n  if (location === originLocation) {\n    return React.createElement(EntityList, { entities: colocatedEntities,} );\n  }\n\n  const atLocation = colocatedEntities.filter(\n    e => e.metadata.annotations?.[ANNOTATION_LOCATION] === location,\n  );\n  const atOrigin = colocatedEntities.filter(\n    e =>\n      e.metadata.annotations?.[ANNOTATION_ORIGIN_LOCATION] === originLocation,\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , atLocation.length > 0 && (\n        React.createElement(EntityList, {\n          entities: atLocation,\n          header: ['At the same location', location],}\n        )\n      )\n      , atOrigin.length > 0 && (\n        React.createElement(EntityList, {\n          entities: atOrigin,\n          header: ['At the same origin', originLocation],}\n        )\n      )\n    )\n  );\n}\n\nexport function ColocatedPage(props) {\n  const classes = useStyles();\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Colocated\")\n      , React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"\n\n\n\n      )\n      , React.createElement('div', { className: classes.root,}\n        , React.createElement(Contents, { entity: props.entity,} )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function sortKeys(data) {\n  // we could do something custom, but lexicographical sorting is actually a\n  // good choice at least for the default set of keys\n  return Object.fromEntries(\n    [...Object.entries(data)].sort((a, b) => (a[0] < b[0] ? -1 : 1)),\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { CodeSnippet } from '@backstage/core-components';\nimport { DialogContentText } from '@material-ui/core';\nimport React from 'react';\nimport { sortKeys } from './util';\n\nexport function JsonPage(props) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Entity as JSON\"  )\n      , React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"\n\n      )\n      , React.createElement(DialogContentText, null\n        , React.createElement('div', { style: { fontSize: '75%' }, 'data-testid': \"code-snippet\",}\n          , React.createElement(CodeSnippet, {\n            text: JSON.stringify(sortKeys(props.entity), undefined, 2),\n            language: \"json\",\n            showCopyCodeButton: true,}\n          )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  DialogContentText,\n  List,\n  ListItem,\n  ListItemIcon,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport React from 'react';\nimport { EntityRefLink } from '../../EntityRefLink';\nimport {\n  Container,\n  HelpIcon,\n  KeyValueListItem,\n  ListItemText,\n  ListSubheader,\n} from './common';\nimport { EntityKindIcon } from './EntityKindIcon';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nexport function OverviewPage(props) {\n  const classes = useStyles();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {},\n  } = props.entity;\n\n  const groupedRelations = groupBy(\n    sortBy(relations, r => r.targetRef),\n    'type',\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Overview\")\n      , React.createElement('div', { className: classes.root,}\n        , React.createElement(Container, { title: \"Identity\",}\n          , React.createElement(List, { dense: true,}\n            , React.createElement(ListItem, null\n              , React.createElement(ListItemText, { primary: \"apiVersion\", secondary: apiVersion,} )\n            )\n            , React.createElement(ListItem, null\n              , React.createElement(ListItemText, { primary: \"kind\", secondary: kind,} )\n            )\n            , spec?.type && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemText, { primary: \"spec.type\", secondary: spec.type,} )\n              )\n            )\n            , metadata.uid && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemText, { primary: \"uid\", secondary: metadata.uid,} )\n              )\n            )\n            , metadata.etag && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemText, { primary: \"etag\", secondary: metadata.etag,} )\n              )\n            )\n          )\n        )\n\n        , React.createElement(Container, { title: \"Metadata\",}\n          , !!Object.keys(metadata.annotations || {}).length && (\n            React.createElement(List, {\n              dense: true,\n              subheader: \n                React.createElement(ListSubheader, null, \"Annotations\"\n\n                  , React.createElement(HelpIcon, { to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\",} )\n                )\n              ,}\n            \n              , Object.entries(metadata.annotations).map(entry => (\n                React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry: entry,} )\n              ))\n            )\n          )\n          , !!Object.keys(metadata.labels || {}).length && (\n            React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"Labels\"),}\n              , Object.entries(metadata.labels).map(entry => (\n                React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry: entry,} )\n              ))\n            )\n          )\n          , !!metadata.tags?.length && (\n            React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"Tags\"),}\n              , metadata.tags.map((tag, index) => (\n                React.createElement(ListItem, { key: `${tag}-${index}`,}\n                  , React.createElement(ListItemIcon, null )\n                  , React.createElement(ListItemText, { primary: tag,} )\n                )\n              ))\n            )\n          )\n        )\n\n        , !!relations.length && (\n          React.createElement(Container, {\n            title: \"Relations\",\n            helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\",}\n          \n            , Object.entries(groupedRelations).map(\n              ([type, groupRelations], index) => (\n                React.createElement('div', { key: index,}\n                  , React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, type),}\n                    , groupRelations.map(group => (\n                      React.createElement(ListItem, { key: group.targetRef,}\n                        , React.createElement(ListItemIcon, null\n                          , React.createElement(EntityKindIcon, { entityRef: group.targetRef,} )\n                        )\n                        , React.createElement(ListItemText, {\n                          primary: \n                            React.createElement(EntityRefLink, { entityRef: group.targetRef,} )\n                          ,}\n                        )\n                      )\n                    ))\n                  )\n                )\n              ),\n            )\n          )\n        )\n\n        , !!status.items?.length && (\n          React.createElement(Container, {\n            title: \"Status\",\n            helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\",}\n          \n            , status.items.map((item, index) => (\n              React.createElement('div', { key: index,}\n                , React.createElement(Typography, null\n                  , item.level, \": \" , item.type\n                )\n                , React.createElement(Box, { ml: 2,}, item.message)\n              )\n            ))\n          )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { CodeSnippet } from '@backstage/core-components';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport React from 'react';\nimport YAML from 'yaml';\nimport { sortKeys } from './util';\n\nexport function YamlPage(props) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogContentText, { variant: \"h2\",}, \"Entity as YAML\"  )\n      , React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on YAML form.\"\n\n      )\n      , React.createElement(DialogContentText, null\n        , React.createElement('div', { style: { fontSize: '75%' }, 'data-testid': \"code-snippet\",}\n          , React.createElement(CodeSnippet, {\n            text: YAML.stringify(sortKeys(props.entity)),\n            language: \"yaml\",\n            showCopyCodeButton: true,}\n          )\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  Tab,\n  Tabs,\n} from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { AncestryPage } from './components/AncestryPage';\nimport { ColocatedPage } from './components/ColocatedPage';\nimport { JsonPage } from './components/JsonPage';\nimport { OverviewPage } from './components/OverviewPage';\nimport { YamlPage } from './components/YamlPage';\n\nconst useStyles = makeStyles(theme => ({\n  fullHeightDialog: {\n    height: 'calc(100% - 64px)',\n  },\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    width: '100%',\n    backgroundColor: theme.palette.background.paper,\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0,\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: 'auto',\n  },\n}));\n\nfunction TabPanel(props\n\n\n\n) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles();\n  return (\n    React.createElement('div', {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      'aria-labelledby': `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other,}\n    \n      , value === index && (\n        React.createElement(Box, { pl: 3, pr: 3,}\n          , children\n        )\n      )\n    )\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    'aria-controls': `vertical-tabpanel-${index}`,\n  };\n}\n\n/**\n * A dialog that lets users inspect the low level details of their entities.\n *\n * @public\n */\nexport function InspectEntityDialog(props\n\n\n\n) {\n  const classes = useStyles();\n  const [activeTab, setActiveTab] = React.useState(0);\n\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n\n  if (!props.entity) {\n    return null;\n  }\n\n  return (\n    React.createElement(Dialog, {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open: props.open,\n      onClose: props.onClose,\n      'aria-labelledby': \"entity-inspector-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog },}\n    \n      , React.createElement(DialogTitle, { id: \"entity-inspector-dialog-title\",}, \"Entity Inspector\"\n\n      )\n      , React.createElement(DialogContent, { dividers: true,}\n        , React.createElement('div', { className: classes.root,}\n          , React.createElement(Tabs, {\n            orientation: \"vertical\",\n            variant: \"scrollable\",\n            value: activeTab,\n            onChange: (_, newValue) => setActiveTab(newValue),\n            'aria-label': \"Inspector options\" ,\n            className: classes.tabs,}\n          \n            , React.createElement(Tab, { label: \"Overview\", ...a11yProps(0),} )\n            , React.createElement(Tab, { label: \"Ancestry\", ...a11yProps(1),} )\n            , React.createElement(Tab, { label: \"Colocated\", ...a11yProps(2),} )\n            , React.createElement(Tab, { label: \"Raw JSON\" , ...a11yProps(3),} )\n            , React.createElement(Tab, { label: \"Raw YAML\" , ...a11yProps(4),} )\n          )\n\n          , React.createElement(TabPanel, { value: activeTab, index: 0,}\n            , React.createElement(OverviewPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 1,}\n            , React.createElement(AncestryPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 2,}\n            , React.createElement(ColocatedPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 3,}\n            , React.createElement(JsonPage, { entity: props.entity,} )\n          )\n          , React.createElement(TabPanel, { value: activeTab, index: 4,}\n            , React.createElement(YamlPage, { entity: props.entity,} )\n          )\n        )\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, { onClick: props.onClose, color: \"primary\",}, \"Close\"\n\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  getCompoundEntityRef,\n  ANNOTATION_ORIGIN_LOCATION,\n} from '@backstage/catalog-model';\nimport { catalogApiRef } from '../../api';\nimport { useCallback } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useApi } from '@backstage/core-plugin-api';\n\n/**\n * Each distinct state that the dialog can be in at any given time.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Houses the main logic for unregistering entities and their locations.\n */\nexport function useUnregisterEntityDialogState(\n  entity,\n) {\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = entity.metadata.annotations?.[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === 'bootstrap:bootstrap';\n\n  // Load the prerequisite data: what entities that are colocated with us, and\n  // what location that spawned us\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi\n        .getEntities({\n          filter: { [locationAnnotationFilter]: locationRef },\n          fields: [\n            'kind',\n            'metadata.uid',\n            'metadata.name',\n            'metadata.namespace',\n          ],\n        })\n        .then(response => response.items);\n    }\n\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(\n      ([location, colocatedEntities]) => ({\n        location,\n        colocatedEntities,\n      }),\n    );\n  }, [catalogApi, entity]);\n\n  // Unregisters the underlying location which will remove all of the entities that are spawned from\n  // it. Can only ever be called when the prerequisites have finished loading successfully, and if\n  // there was a matching location.\n  const unregisterLocation = useCallback(\n    async function unregisterLocationFn() {\n      const { location } = prerequisites.value;\n      await catalogApi.removeLocationById(location.id);\n    },\n    [catalogApi, prerequisites],\n  );\n\n  // Just removes the entity, without affecting locations in any way.\n  const deleteEntity = useCallback(\n    async function deleteEntityFn() {\n      await catalogApi.removeEntityByUid(uid);\n    },\n    [catalogApi, uid],\n  );\n\n  // If this is a bootstrap location entity, don't even block on loading\n  // prerequisites. We know that all that we will do is to offer to remove the\n  // entity, and that doesn't require anything from the prerequisites.\n  if (isBootstrap) {\n    return { type: 'bootstrap', location: locationRef, deleteEntity };\n  }\n\n  // Return early if prerequisites still loading or failing\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: 'loading' };\n  } else if (error) {\n    return { type: 'error', error };\n  }\n\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: 'only-delete', deleteEntity };\n  }\n  return {\n    type: 'unregister',\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { EntityRefLink } from '../EntityRefLink';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Divider,\n  makeStyles,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { useCallback, useState } from 'react';\nimport { useUnregisterEntityDialogState } from './useUnregisterEntityDialogState';\n\nimport { alertApiRef, configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { assertError } from '@backstage/errors';\n\nconst useStyles = makeStyles({\n  advancedButton: {\n    fontSize: '0.7em',\n  },\n});\n\nconst Contents = ({\n  entity,\n  onConfirm,\n}\n\n\n) => {\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = configApi.getOptionalString('app.title') ?? 'Backstage';\n\n  const onUnregister = useCallback(\n    async function onUnregisterFn() {\n      if ('unregisterLocation' in state) {\n        setBusy(true);\n        try {\n          await state.unregisterLocation();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state],\n  );\n\n  const onDelete = useCallback(\n    async function onDeleteFn() {\n      if ('deleteEntity' in state) {\n        setBusy(true);\n        try {\n          await state.deleteEntity();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state],\n  );\n\n  if (state.type === 'loading') {\n    return React.createElement(Progress, null );\n  }\n\n  if (state.type === 'error') {\n    return React.createElement(ResponseErrorPanel, { error: state.error,} );\n  }\n\n  if (state.type === 'bootstrap') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(Alert, { severity: \"info\",}, \"You cannot unregister this entity, since it originates from a protected Backstage configuration (location \\\"\"\n\n              , state.location, \"\\\"). If you believe this is in error, please contact the \"\n                   , appTitle, ' ', \"integrator.\"\n\n        )\n\n        , React.createElement(Box, { marginTop: 2,}\n          , !showDelete && (\n            React.createElement(Button, {\n              variant: \"text\",\n              size: \"small\",\n              color: \"primary\",\n              className: classes.advancedButton,\n              onClick: () => setShowDelete(true),}\n            , \"Advanced Options\"\n\n            )\n          )\n\n          , showDelete && (\n            React.createElement(React.Fragment, null\n              , React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"\n\n\n\n\n\n              )\n              , React.createElement(Button, {\n                variant: \"contained\",\n                color: \"secondary\",\n                disabled: busy,\n                onClick: onDelete,}\n              , \"Delete Entity\"\n\n              )\n            )\n          )\n        )\n      )\n    );\n  }\n\n  if (state.type === 'only-delete') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"\n\n\n        )\n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          disabled: busy,\n          onClick: onDelete,}\n        , \"Delete Entity\"\n\n        )\n      )\n    );\n  }\n\n  if (state.type === 'unregister') {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"\n\n        )\n        , React.createElement(DialogContentText, { component: \"ul\",}\n          , state.colocatedEntities.map(e => (\n            React.createElement('li', { key: `${e.kind}:${e.namespace}/${e.name}`,}\n              , React.createElement(EntityRefLink, { entityRef: e,} )\n            )\n          ))\n        )\n        , React.createElement(DialogContentText, null, \"Located at the following location:\"\n\n        )\n        , React.createElement(DialogContentText, { component: \"ul\",}\n          , React.createElement('li', null, state.location)\n        )\n        , React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \"\n                 , appTitle, \".\"\n        )\n        , React.createElement(Box, { marginTop: 2,}\n          , React.createElement(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            disabled: busy,\n            onClick: onUnregister,}\n          , \"Unregister Location\"\n\n          )\n          , !showDelete && (\n            React.createElement(Box, { component: \"span\", marginLeft: 2,}\n              , React.createElement(Button, {\n                variant: \"text\",\n                size: \"small\",\n                color: \"primary\",\n                className: classes.advancedButton,\n                onClick: () => setShowDelete(true),}\n              , \"Advanced Options\"\n\n              )\n            )\n          )\n        )\n\n        , showDelete && (\n          React.createElement(React.Fragment, null\n            , React.createElement(Box, { paddingTop: 4, paddingBottom: 4,}\n              , React.createElement(Divider, null )\n            )\n            , React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"\n\n\n\n\n\n            )\n            , React.createElement(Button, {\n              variant: \"contained\",\n              color: \"secondary\",\n              disabled: busy,\n              onClick: onDelete,}\n            , \"Delete Entity\"\n\n            )\n          )\n        )\n      )\n    );\n  }\n\n  return React.createElement(Alert, { severity: \"error\",}, \"Internal error: Unknown state\"   );\n};\n\n/** @public */\n\n\n\n\n\n\n\n/** @public */\nexport const UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return (\n    React.createElement(Dialog, { open: open, onClose: onClose,}\n      , React.createElement(DialogTitle, { id: \"responsive-dialog-title\",}, \"Are you sure you want to unregister this entity?\"\n\n      )\n      , React.createElement(DialogContent, null\n        , React.createElement(Contents, { entity: entity, onConfirm: onConfirm,} )\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, { onClick: onClose, color: \"primary\",}, \"Cancel\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  configApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport {\n  Card,\n  List,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  makeStyles,\n  MenuItem,\n\n  Typography,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport StarIcon from '@material-ui/icons/Star';\nimport { compact } from 'lodash';\nimport React, { Fragment, useEffect, useMemo, useState } from 'react';\nimport { UserListFilter } from '../../filters';\nimport {\n  useEntityList,\n  useStarredEntities,\n  useEntityOwnership,\n} from '../../hooks';\n\nimport { reduceEntityFilters } from '../../utils';\n\n/** @public */\n\n\n\n\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      backgroundColor: 'rgba(0, 0, 0, .11)',\n      boxShadow: 'none',\n      margin: theme.spacing(1, 0, 1, 0),\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: 'uppercase',\n      fontSize: 12,\n      fontWeight: 'bold',\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary,\n    },\n    menuItem: {\n      minHeight: theme.spacing(6),\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1),\n    },\n  }),\n  {\n    name: 'CatalogReactUserListPicker',\n  },\n);\n\n\n\n\n\n\n\n\n\n\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: 'Personal',\n      items: [\n        {\n          id: 'owned',\n          label: 'Owned',\n          icon: SettingsIcon,\n        },\n        {\n          id: 'starred',\n          label: 'Starred',\n          icon: StarIcon,\n        },\n      ],\n    },\n    {\n      name: orgName ?? 'Company',\n      items: [\n        {\n          id: 'all',\n          label: 'All',\n        },\n      ],\n    },\n  ];\n}\n\n/** @public */\n\n\n\n\n\n/** @public */\nexport const UserListPicker = (props) => {\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const orgName = configApi.getOptionalString('organization.name') ?? 'Company';\n  const {\n    filters,\n    updateFilters,\n    backendEntities,\n    queryParameters: { kind: kindParameter, user: userParameter },\n    loading: loadingBackendEntities,\n  } = useEntityList();\n\n  // Remove group items that aren't in availableFilters and exclude\n  // any now-empty groups.\n  const userAndGroupFilterIds = ['starred', 'all'];\n  const filterGroups = getFilterGroups(orgName)\n    .map(filterGroup => ({\n      ...filterGroup,\n      items: filterGroup.items.filter(({ id }) =>\n        // TODO: avoid hardcoding kinds here\n        ['group', 'user'].some(kind => kind === kindParameter)\n          ? userAndGroupFilterIds.includes(id)\n          : !availableFilters || availableFilters.includes(id),\n      ),\n    }))\n    .filter(({ items }) => !!items.length);\n\n  const { isStarredEntity } = useStarredEntities();\n  const { isOwnedEntity, loading: loadingEntityOwnership } =\n    useEntityOwnership();\n\n  const loading = loadingBackendEntities || loadingEntityOwnership;\n\n  // Static filters; used for generating counts of potentially unselected kinds\n  const ownedFilter = useMemo(\n    () => new UserListFilter('owned', isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity],\n  );\n  const starredFilter = useMemo(\n    () => new UserListFilter('starred', isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity],\n  );\n\n  const queryParamUserFilter = useMemo(\n    () => [userParameter].flat()[0],\n    [userParameter],\n  );\n\n  const [selectedUserFilter, setSelectedUserFilter] = useState(\n    queryParamUserFilter ?? initialFilter,\n  );\n\n  // To show proper counts for each section, apply all other frontend filters _except_ the user\n  // filter that's controlled by this picker.\n  const entitiesWithoutUserFilter = useMemo(\n    () =>\n      backendEntities.filter(\n        reduceEntityFilters(\n          compact(Object.values({ ...filters, user: undefined })),\n        ),\n      ),\n    [filters, backendEntities],\n  );\n\n  const filterCounts = useMemo(\n    () => ({\n      all: entitiesWithoutUserFilter.length,\n      starred: entitiesWithoutUserFilter.filter(entity =>\n        starredFilter.filterEntity(entity),\n      ).length,\n      owned: entitiesWithoutUserFilter.filter(entity =>\n        ownedFilter.filterEntity(entity),\n      ).length,\n    }),\n    [entitiesWithoutUserFilter, starredFilter, ownedFilter],\n  );\n\n  // Set selected user filter on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter );\n    }\n  }, [queryParamUserFilter]);\n\n  useEffect(() => {\n    if (\n      !loading &&\n      !!selectedUserFilter &&\n      selectedUserFilter !== 'all' &&\n      filterCounts[selectedUserFilter] === 0\n    ) {\n      setSelectedUserFilter('all');\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n\n  useEffect(() => {\n    updateFilters({\n      user: selectedUserFilter\n        ? new UserListFilter(\n            selectedUserFilter ,\n            isOwnedEntity,\n            isStarredEntity,\n          )\n        : undefined,\n    });\n  }, [selectedUserFilter, isOwnedEntity, isStarredEntity, updateFilters]);\n\n  return (\n    React.createElement(Card, { className: classes.root,}\n      , filterGroups.map(group => (\n        React.createElement(Fragment, { key: group.name,}\n          , React.createElement(Typography, {\n            variant: \"subtitle2\",\n            component: \"span\",\n            className: classes.title,}\n          \n            , group.name\n          )\n          , React.createElement(Card, { className: classes.groupWrapper,}\n            , React.createElement(List, { disablePadding: true, dense: true, role: \"menu\", 'aria-label': group.name,}\n              , group.items.map(item => (\n                React.createElement(MenuItem, {\n                  role: \"none presentation\" ,\n                  key: item.id,\n                  button: true,\n                  divider: true,\n                  onClick: () => setSelectedUserFilter(item.id),\n                  selected: item.id === filters.user?.value,\n                  className: classes.menuItem,\n                  disabled: filterCounts[item.id] === 0,\n                  'data-testid': `user-picker-${item.id}`,\n                  tabIndex: 0,\n                  ContainerProps: { role: 'menuitem' },}\n                \n                  , item.icon && (\n                    React.createElement(ListItemIcon, { className: classes.listIcon,}\n                      , React.createElement(item.icon, { fontSize: \"small\",} )\n                    )\n                  )\n                  , React.createElement(ListItemText, null\n                    , React.createElement(Typography, { variant: \"body1\",}, item.label, \" \" )\n                  )\n                  , React.createElement(ListItemSecondaryAction, null\n                    , filterCounts[item.id] ?? '-'\n                  )\n                )\n              ))\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useCallback,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n\n  EntityListContext,\n\n} from '../hooks/useEntityListProvider';\n\n/** @public */\nexport const MockEntityListContextProvider = ({\n  children,\n  value,\n}\n\n) => {\n  // Provides a default implementation that stores filter state, for testing components that\n  // reflect filter state.\n  const [filters, setFilters] = useState(\n    value?.filters ?? {},\n  );\n\n  const updateFilters = useCallback(\n    (\n      update\n\n\n\n,\n    ) => {\n      setFilters(prevFilters => {\n        const newFilters =\n          typeof update === 'function' ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    [],\n  );\n\n  // Memoize the default values since pickers have useEffect triggers on these; naively defaulting\n  // below with `?? <X>` breaks referential equality on subsequent updates.\n  const defaultValues = useMemo(\n    () => ({\n      entities: [],\n      backendEntities: [],\n      queryParameters: {},\n    }),\n    [],\n  );\n\n  const resolvedValue = useMemo(\n    () => ({\n      entities: value?.entities ?? defaultValues.entities,\n      backendEntities: value?.backendEntities ?? defaultValues.backendEntities,\n      updateFilters: value?.updateFilters ?? updateFilters,\n      filters,\n      loading: value?.loading ?? false,\n      queryParameters: value?.queryParameters ?? defaultValues.queryParameters,\n      error: value?.error,\n    }),\n    [value, defaultValues, filters, updateFilters],\n  );\n\n  return (\n    React.createElement(EntityListContext.Provider, { value: resolvedValue,}\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  value: {\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    lineHeight: '24px',\n    wordBreak: 'break-word',\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: 'uppercase',\n    fontSize: '10px',\n    fontWeight: 'bold',\n    letterSpacing: 0.5,\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n  },\n}));\n\n/**\n * Props for {@link AboutField}.\n *\n * @public\n */\n\n\n\n\n\n\n\n/** @public */\nexport function AboutField(props) {\n  const { label, value, gridSizes, children } = props;\n  const classes = useStyles();\n\n  const childElements = useElementFilter(children, c => c.getElements());\n\n  // Content is either children or a string prop `value`\n  const content =\n    childElements.length > 0 ? (\n      childElements\n    ) : (\n      React.createElement(Typography, { variant: \"body2\", className: classes.value,}\n        , value || `unknown`\n      )\n    );\n  return (\n    React.createElement(Grid, { item: true, ...gridSizes,}\n      , React.createElement(Typography, { variant: \"h2\", className: classes.label,}\n        , label\n      )\n      , content\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_OWNED_BY,\n  RELATION_PART_OF,\n} from '@backstage/catalog-model';\nimport {\n  EntityRefLinks,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { Chip, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { AboutField } from './AboutField';\n\nconst useStyles = makeStyles({\n  description: {\n    wordBreak: 'break-word',\n  },\n});\n\n/**\n * Props for {@link AboutContent}.\n *\n * @public\n */\n\n\n\n\n/** @public */\nexport function AboutContent(props) {\n  const { entity } = props;\n  const classes = useStyles();\n  const isSystem = entity.kind.toLocaleLowerCase('en-US') === 'system';\n  const isResource = entity.kind.toLocaleLowerCase('en-US') === 'resource';\n  const isComponent = entity.kind.toLocaleLowerCase('en-US') === 'component';\n  const isAPI = entity.kind.toLocaleLowerCase('en-US') === 'api';\n  const isTemplate = entity.kind.toLocaleLowerCase('en-US') === 'template';\n  const isLocation = entity.kind.toLocaleLowerCase('en-US') === 'location';\n  const isGroup = entity.kind.toLocaleLowerCase('en-US') === 'group';\n\n  const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: 'system',\n  });\n  const partOfComponentRelations = getEntityRelations(\n    entity,\n    RELATION_PART_OF,\n    {\n      kind: 'component',\n    },\n  );\n  const partOfDomainRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: 'domain',\n  });\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n\n  return (\n    React.createElement(Grid, { container: true,}\n      , React.createElement(AboutField, { label: \"Description\", gridSizes: { xs: 12 },}\n        , React.createElement(Typography, { variant: \"body2\", paragraph: true, className: classes.description,}\n          , entity?.metadata?.description || 'No description'\n        )\n      )\n      , React.createElement(AboutField, {\n        label: \"Owner\",\n        value: \"No Owner\" ,\n        gridSizes: { xs: 12, sm: 6, lg: 4 },}\n      \n        , ownedByRelations.length > 0 && (\n          React.createElement(EntityRefLinks, { entityRefs: ownedByRelations, defaultKind: \"group\",} )\n        )\n      )\n      , (isSystem || partOfDomainRelations.length > 0) && (\n        React.createElement(AboutField, {\n          label: \"Domain\",\n          value: \"No Domain\" ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        \n          , partOfDomainRelations.length > 0 && (\n            React.createElement(EntityRefLinks, {\n              entityRefs: partOfDomainRelations,\n              defaultKind: \"domain\",}\n            )\n          )\n        )\n      )\n      , (isAPI ||\n        isComponent ||\n        isResource ||\n        partOfSystemRelations.length > 0) && (\n        React.createElement(AboutField, {\n          label: \"System\",\n          value: \"No System\" ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        \n          , partOfSystemRelations.length > 0 && (\n            React.createElement(EntityRefLinks, {\n              entityRefs: partOfSystemRelations,\n              defaultKind: \"system\",}\n            )\n          )\n        )\n      )\n      , isComponent && partOfComponentRelations.length > 0 && (\n        React.createElement(AboutField, {\n          label: \"Parent Component\" ,\n          value: \"No Parent Component\"  ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        \n          , React.createElement(EntityRefLinks, {\n            entityRefs: partOfComponentRelations,\n            defaultKind: \"component\",}\n          )\n        )\n      )\n      , (isAPI ||\n        isComponent ||\n        isResource ||\n        isTemplate ||\n        isGroup ||\n        isLocation ||\n        typeof entity?.spec?.type === 'string') && (\n        React.createElement(AboutField, {\n          label: \"Type\",\n          value: entity?.spec?.type ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        )\n      )\n      , (isAPI ||\n        isComponent ||\n        typeof entity?.spec?.lifecycle === 'string') && (\n        React.createElement(AboutField, {\n          label: \"Lifecycle\",\n          value: entity?.spec?.lifecycle ,\n          gridSizes: { xs: 12, sm: 6, lg: 4 },}\n        )\n      )\n      , React.createElement(AboutField, {\n        label: \"Tags\",\n        value: \"No Tags\" ,\n        gridSizes: { xs: 12, sm: 6, lg: 4 },}\n      \n        , (entity?.metadata?.tags || []).map(t => (\n          React.createElement(Chip, { key: t, size: \"small\", label: t,} )\n        ))\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ANNOTATION_EDIT_URL,\n  ANNOTATION_LOCATION,\n  DEFAULT_NAMESPACE,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  HeaderIconLinkRow,\n\n\n  Link,\n} from '@backstage/core-components';\nimport { alertApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport {\n  ScmIntegrationIcon,\n  scmIntegrationsApiRef,\n} from '@backstage/integration-react';\nimport {\n  catalogApiRef,\n  getEntitySourceLocation,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  IconButton,\n  makeStyles,\n} from '@material-ui/core';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport DocsIcon from '@material-ui/icons/Description';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React, { useCallback } from 'react';\nimport { viewTechDocRouteRef } from '../../routes';\nimport { AboutContent } from './AboutContent';\n\nconst useStyles = makeStyles({\n  gridItemCard: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: 'calc(100% - 10px)', // for pages without content header\n    marginBottom: '10px',\n  },\n  fullHeightCard: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  gridItemCardContent: {\n    flex: 1,\n  },\n  fullHeightCardContent: {\n    flex: 1,\n  },\n});\n\n/**\n * Props for {@link EntityAboutCard}.\n *\n * @public\n */\n\n\n\n\n/**\n * Exported publicly via the EntityAboutCard\n */\nexport function AboutCard(props) {\n  const { variant } = props;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const viewTechdocLink = useRouteRef(viewTechDocRouteRef);\n\n  const entitySourceLocation = getEntitySourceLocation(\n    entity,\n    scmIntegrationsApi,\n  );\n  const entityMetadataEditUrl =\n    entity.metadata.annotations?.[ANNOTATION_EDIT_URL];\n\n  const viewInSource = {\n    label: 'View Source',\n    disabled: !entitySourceLocation,\n    icon: React.createElement(ScmIntegrationIcon, { type: entitySourceLocation?.integrationType,} ),\n    href: entitySourceLocation?.locationTargetUrl,\n  };\n  const viewInTechDocs = {\n    label: 'View TechDocs',\n    disabled:\n      !entity.metadata.annotations?.['backstage.io/techdocs-ref'] ||\n      !viewTechdocLink,\n    icon: React.createElement(DocsIcon, null ),\n    href:\n      viewTechdocLink &&\n      viewTechdocLink({\n        namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n        kind: entity.kind,\n        name: entity.metadata.name,\n      }),\n  };\n\n  let cardClass = '';\n  if (variant === 'gridItem') {\n    cardClass = classes.gridItemCard;\n  } else if (variant === 'fullHeight') {\n    cardClass = classes.fullHeightCard;\n  }\n\n  let cardContentClass = '';\n  if (variant === 'gridItem') {\n    cardContentClass = classes.gridItemCardContent;\n  } else if (variant === 'fullHeight') {\n    cardContentClass = classes.fullHeightCardContent;\n  }\n\n  const entityLocation = entity.metadata.annotations?.[ANNOTATION_LOCATION];\n  // Limiting the ability to manually refresh to the less expensive locations\n  const allowRefresh =\n    entityLocation?.startsWith('url:') || entityLocation?.startsWith('file:');\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(entity));\n    alertApi.post({ message: 'Refresh scheduled', severity: 'info' });\n  }, [catalogApi, alertApi, entity]);\n\n  return (\n    React.createElement(Card, { className: cardClass,}\n      , React.createElement(CardHeader, {\n        title: \"About\",\n        action: \n          React.createElement(React.Fragment, null\n            , allowRefresh && (\n              React.createElement(IconButton, {\n                'aria-label': \"Refresh\",\n                title: \"Schedule entity refresh\"  ,\n                onClick: refreshEntity,}\n              \n                , React.createElement(CachedIcon, null )\n              )\n            )\n            , React.createElement(IconButton, {\n              component: Link,\n              'aria-label': \"Edit\",\n              disabled: !entityMetadataEditUrl,\n              title: \"Edit Metadata\" ,\n              to: entityMetadataEditUrl ?? '#',}\n            \n              , React.createElement(EditIcon, null )\n            )\n          )\n        ,\n        subheader: React.createElement(HeaderIconLinkRow, { links: [viewInSource, viewInTechDocs],} ),}\n      )\n      , React.createElement(Divider, null )\n      , React.createElement(CardContent, { className: cardContentClass,}\n        , React.createElement(AboutContent, { entity: entity,} )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState, useMemo } from 'react';\nimport {\n  capitalize,\n  createStyles,\n  InputBase,\n  makeStyles,\n  MenuItem,\n  Select,\n\n} from '@material-ui/core';\nimport {\n  catalogApiRef,\n  EntityKindFilter,\n  useEntityList,\n} from '@backstage/plugin-catalog-react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useApi } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      ...theme.typography.h4,\n    },\n  }),\n);\n\n/**\n * Props for {@link CatalogKindHeader}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport function CatalogKindHeader(props) {\n  const { initialFilter = 'component', allowedKinds } = props;\n  const classes = useStyles();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: allKinds } = useAsync(async () => {\n    return await catalogApi\n      .getEntityFacets({ facets: ['kind'] })\n      .then(response => response.facets.kind?.map(f => f.value).sort() || []);\n  });\n  const {\n    updateFilters,\n    queryParameters: { kind: kindParameter },\n  } = useEntityList();\n\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0]?.toLocaleLowerCase('en-US'),\n    [kindParameter],\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    queryParamKind ?? initialFilter,\n  );\n\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : undefined,\n    });\n  }, [selectedKind, updateFilters]);\n\n  // Set selected Kind on query parameter updates; this happens at initial page load and from\n  // external updates to the page location.\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n\n  // Before allKinds is loaded, or when a kind is entered manually in the URL, selectedKind may not\n  // be present in allKinds. It should still be shown in the dropdown, but may not have the nice\n  // enforced casing from the catalog-backend. This makes a key/value record for the Select options,\n  // including selectedKind if it's unknown - but allows the selectedKind to get clobbered by the\n  // more proper catalog kind if it exists.\n  const availableKinds = [capitalize(selectedKind)].concat(\n    allKinds?.filter(k =>\n      allowedKinds\n        ? allowedKinds.some(\n            a => a.toLocaleLowerCase('en-US') === k.toLocaleLowerCase('en-US'),\n          )\n        : true,\n    ) ?? [],\n  );\n  const options = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase('en-US')] = kind;\n    return acc;\n  }, {} );\n\n  return (\n    React.createElement(Select, {\n      input: React.createElement(InputBase, { value: selectedKind,} ),\n      value: selectedKind,\n      onChange: e => setSelectedKind(e.target.value ),\n      classes: classes,}\n    \n      , Object.keys(options).map(kind => (\n        React.createElement(MenuItem, { value: kind, key: kind,}\n          , `${options[kind]}s`\n        )\n      ))\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport {\n  humanizeEntityRef,\n  EntityRefLink,\n  EntityRefLinks,\n} from '@backstage/plugin-catalog-react';\nimport { Chip } from '@material-ui/core';\n\nimport { OverflowTooltip, } from '@backstage/core-components';\n\n\n// The columnFactories symbol is not directly exported, but through the\n// CatalogTable.columns field.\n/** @public */\nexport const columnFactories = Object.freeze({\n  createNameColumn(options\n\n) {\n    function formatContent(entity) {\n      return (\n        entity.metadata?.title ||\n        humanizeEntityRef(entity, {\n          defaultKind: options?.defaultKind,\n        })\n      );\n    }\n\n    return {\n      title: 'Name',\n      field: 'resolved.name',\n      highlight: true,\n      customSort({ entity: entity1 }, { entity: entity2 }) {\n        // TODO: We could implement this more efficiently by comparing field by field.\n        // This has similar issues as above.\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: ({ entity }) => (\n        React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind: options?.defaultKind || 'Component',\n          title: entity.metadata?.title,}\n        )\n      ),\n    };\n  },\n  createSystemColumn() {\n    return {\n      title: 'System',\n      field: 'resolved.partOfSystemRelationTitle',\n      render: ({ resolved }) => (\n        React.createElement(EntityRefLinks, {\n          entityRefs: resolved.partOfSystemRelations,\n          defaultKind: \"system\",}\n        )\n      ),\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: 'Owner',\n      field: 'resolved.ownedByRelationsTitle',\n      render: ({ resolved }) => (\n        React.createElement(EntityRefLinks, {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\",}\n        )\n      ),\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: 'Type',\n      field: 'entity.spec.type',\n      hidden: true,\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: 'Lifecycle',\n      field: 'entity.spec.lifecycle',\n    };\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: 'Description',\n      field: 'entity.metadata.description',\n      render: ({ entity }) => (\n        React.createElement(OverflowTooltip, {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",}\n        )\n      ),\n      width: 'auto',\n    };\n  },\n  createTagsColumn() {\n    return {\n      title: 'Tags',\n      field: 'entity.metadata.tags',\n      cellStyle: {\n        padding: '0px 16px 0px 20px',\n      },\n      render: ({ entity }) => (\n        React.createElement(React.Fragment, null\n          , entity.metadata.tags &&\n            entity.metadata.tags.map(t => (\n              React.createElement(Chip, {\n                key: t,\n                label: t,\n                size: \"small\",\n                variant: \"outlined\",\n                style: { marginBottom: '0px' },}\n              )\n            ))\n        )\n      ),\n    };\n  },\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  ANNOTATION_EDIT_URL,\n  ANNOTATION_VIEW_URL,\n  RELATION_OWNED_BY,\n  RELATION_PART_OF,\n} from '@backstage/catalog-model';\nimport {\n  humanizeEntityRef,\n  getEntityRelations,\n  useEntityList,\n  useStarredEntities,\n} from '@backstage/plugin-catalog-react';\nimport Edit from '@material-ui/icons/Edit';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport { capitalize } from 'lodash';\nimport React, { useMemo } from 'react';\nimport { columnFactories } from './columns';\n\nimport {\n  CodeSnippet,\n  Table,\n\n\n  WarningPanel,\n} from '@backstage/core-components';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { withStyles } from '@material-ui/core/styles';\nimport Star from '@material-ui/icons/Star';\nimport { Typography } from '@material-ui/core';\n\n/**\n * Props for {@link CatalogTable}.\n *\n * @public\n */\n\n\n\n\n\n\nconst YellowStar = withStyles({\n  root: {\n    color: '#f3ba37',\n  },\n})(Star);\n\n/** @public */\nexport const CatalogTable = (props) => {\n  const { columns, actions, tableOptions } = props;\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const { loading, error, entities, filters } = useEntityList();\n\n  const defaultColumns = useMemo(() => {\n    return [\n      columnFactories.createNameColumn({ defaultKind: filters.kind?.value }),\n      ...createEntitySpecificColumns(),\n      columnFactories.createMetadataDescriptionColumn(),\n      columnFactories.createTagsColumn(),\n    ];\n\n    function createEntitySpecificColumns() {\n      switch (filters.kind?.value) {\n        case 'user':\n          return [];\n        case 'domain':\n        case 'system':\n          return [columnFactories.createOwnerColumn()];\n        case 'group':\n        case 'location':\n        case 'template':\n          return [columnFactories.createSpecTypeColumn()];\n        default:\n          return [\n            columnFactories.createSystemColumn(),\n            columnFactories.createOwnerColumn(),\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecLifecycleColumn(),\n          ];\n      }\n    }\n  }, [filters.kind?.value]);\n\n  const showTypeColumn = filters.type === undefined;\n  // TODO(timbonicus): remove the title from the CatalogTable once using EntitySearchBar\n  const titlePreamble = capitalize(filters.user?.value ?? 'all');\n\n  if (error) {\n    return (\n      React.createElement('div', null\n        , React.createElement(WarningPanel, {\n          severity: \"error\",\n          title: \"Could not fetch catalog entities.\"    ,}\n        \n          , React.createElement(CodeSnippet, { language: \"text\", text: error.toString(),} )\n        )\n      )\n    );\n  }\n\n  const defaultActions = [\n    ({ entity }) => {\n      const url = entity.metadata.annotations?.[ANNOTATION_VIEW_URL];\n      const title = 'View';\n\n      return {\n        icon: () => (\n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"srOnly\",}, title)\n            , React.createElement(OpenInNew, { fontSize: \"small\",} )\n          )\n        ),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url) return;\n          window.open(url, '_blank');\n        },\n      };\n    },\n    ({ entity }) => {\n      const url = entity.metadata.annotations?.[ANNOTATION_EDIT_URL];\n      const title = 'Edit';\n\n      return {\n        icon: () => (\n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"srOnly\",}, title)\n            , React.createElement(Edit, { fontSize: \"small\",} )\n          )\n        ),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url) return;\n          window.open(url, '_blank');\n        },\n      };\n    },\n    ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      const title = isStarred ? 'Remove from favorites' : 'Add to favorites';\n\n      return {\n        cellStyle: { paddingLeft: '1em' },\n        icon: () => (\n          React.createElement(React.Fragment, null\n            , React.createElement(Typography, { variant: \"srOnly\",}, title)\n            , isStarred ? React.createElement(YellowStar, null ) : React.createElement(StarBorder, null )\n          )\n        ),\n        tooltip: title,\n        onClick: () => toggleStarredEntity(entity),\n      };\n    },\n  ];\n\n  const rows = entities.map(entity => {\n    const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n      kind: 'system',\n    });\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n\n    return {\n      entity,\n      resolved: {\n        name: humanizeEntityRef(entity, {\n          defaultKind: 'Component',\n        }),\n        ownedByRelationsTitle: ownedByRelations\n          .map(r => humanizeEntityRef(r, { defaultKind: 'group' }))\n          .join(', '),\n        ownedByRelations,\n        partOfSystemRelationTitle: partOfSystemRelations\n          .map(r =>\n            humanizeEntityRef(r, {\n              defaultKind: 'system',\n            }),\n          )\n          .join(', '),\n        partOfSystemRelations,\n      },\n    };\n  });\n\n  const typeColumn = (columns || defaultColumns).find(c => c.title === 'Type');\n  if (typeColumn) {\n    typeColumn.hidden = !showTypeColumn;\n  }\n  const showPagination = rows.length > 20;\n\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      columns: columns || defaultColumns,\n      options: {\n        paging: showPagination,\n        pageSize: 20,\n        actionsColumnIndex: -1,\n        loadingType: 'linear',\n        showEmptyDataSourceMessage: !loading,\n        padding: 'dense',\n        pageSizeOptions: [20, 50, 100],\n        ...tableOptions,\n      },\n      title: `${titlePreamble} (${entities.length})`,\n      data: rows,\n      actions: actions || defaultActions,}\n    )\n  );\n};\n\nCatalogTable.columns = columnFactories;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nimport { isArray, isString } from 'lodash';\n\n/**\n * Migrate the starred entities from the old format (entity:<kind>:<namespace>:<name>) from the\n * old storage location (/settings/starredEntities) to entity references in the new location\n * (/starredEntities/entityRefs).\n *\n * This will only be executed once since the old location is cleared.\n *\n * @param storageApi - the StorageApi to migrate\n */\nexport async function performMigrationToTheNewBucket({\n  storageApi,\n}\n\n) {\n  const source = storageApi.forBucket('settings');\n  const target = storageApi.forBucket('starredEntities');\n\n  const oldStarredEntities = source.snapshot('starredEntities').value;\n\n  if (!isArray(oldStarredEntities)) {\n    // nothing to do\n    return;\n  }\n  const targetEntities = new Set(\n    target.snapshot('entityRefs').value ?? [],\n  );\n\n  oldStarredEntities\n    .filter(isString)\n    // extract the old format 'entity:<kind>:<namespace>:<name>'\n    .map(old => old.split(':'))\n    // check if the format is valid\n    .filter(split => split.length === 4 && split[0] === 'entity')\n    // convert to entity references\n    .map(([_, kind, namespace, name]) =>\n      stringifyEntityRef({ kind, namespace, name }),\n    )\n    .forEach(e => targetEntities.add(e));\n\n  await target.set('entityRefs', Array.from(targetEntities));\n\n  await source.remove('starredEntities');\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ObservableImpl from 'zen-observable';\nimport { performMigrationToTheNewBucket } from './migration';\n\n/**\n * Default implementation of the StarredEntitiesApi that is backed by the StorageApi.\n *\n * @public\n */\nexport class DefaultStarredEntitiesApi  {\n    settingsStore;\n   starredEntities;\n\n  constructor(opts) {\n    // no need to await. The updated content will be caught by the observe$\n    performMigrationToTheNewBucket(opts).then();\n\n    this.settingsStore = opts.storageApi.forBucket('starredEntities');\n\n    this.starredEntities = new Set(\n      this.settingsStore.snapshot('entityRefs').value ?? [],\n    );\n\n    this.settingsStore.observe$('entityRefs').subscribe({\n      next: next => {\n        this.starredEntities = new Set(next.value ?? []);\n        this.notifyChanges();\n      },\n    });\n  }\n\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n\n    await this.settingsStore.set(\n      'entityRefs',\n      Array.from(this.starredEntities),\n    );\n  }\n\n  starredEntitie$() {\n    return this.observable;\n  }\n\n    subscribers = new Set\n\n();\n\n    observable = new ObservableImpl(subscriber => {\n    // forward the the latest value\n    subscriber.next(new Set(this.starredEntities));\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n   notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Box,\n  Chip,\n  Divider,\n  ListItem,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { Link } from '@backstage/core-components';\n\n\n\n\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: 'wrap',\n  },\n  itemText: {\n    width: '100%',\n    wordBreak: 'break-all',\n    marginBottom: '1rem',\n  },\n});\n\n/**\n * Props for {@link CatalogSearchResultListItem}.\n *\n * @public\n */\n\n\n\n\n\n/** @public */\nexport function CatalogSearchResultListItem(\n  props,\n) {\n  const result = props.result ;\n\n  const classes = useStyles();\n  return (\n    React.createElement(Link, { to: result.location,}\n      , React.createElement(ListItem, { alignItems: \"flex-start\", className: classes.flexContainer,}\n        , React.createElement(ListItemText, {\n          className: classes.itemText,\n          primaryTypographyProps: { variant: 'h6' },\n          primary: \n            props.highlight?.fields.title ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: props.highlight.fields.title,\n                preTag: props.highlight.preTag,\n                postTag: props.highlight.postTag,}\n              )\n            ) : (\n              result.title\n            )\n          ,\n          secondary: \n            props.highlight?.fields.text ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: props.highlight.fields.text,\n                preTag: props.highlight.preTag,\n                postTag: props.highlight.postTag,}\n              )\n            ) : (\n              result.text\n            )\n          ,}\n        )\n        , React.createElement(Box, null\n          , result.kind && React.createElement(Chip, { label: `Kind: ${result.kind}`, size: \"small\",} )\n          , result.lifecycle && (\n            React.createElement(Chip, { label: `Lifecycle: ${result.lifecycle}`, size: \"small\",} )\n          )\n        )\n      )\n      , React.createElement(Divider, { component: \"li\",} )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Divider,\n  IconButton,\n  ListItemIcon,\n  ListItemText,\n  MenuItem,\n  MenuList,\n  Popover,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport React, { useState } from 'react';\n\nimport { useEntityPermission } from '@backstage/plugin-catalog-react';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common';\n\n// TODO(freben): It should probably instead be the case that Header sets the theme text color to white inside itself unconditionally instead\nconst useStyles = makeStyles({\n  button: {\n    color: 'white',\n  },\n});\n\n// NOTE(freben): Intentionally not exported at this point, since it's part of\n// the unstable extra context menu items concept below\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function EntityContextMenu(props) {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity,\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles();\n  const unregisterPermission = useEntityPermission(\n    catalogEntityDeletePermission,\n  );\n\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const onClose = () => {\n    setAnchorEl(undefined);\n  };\n\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map(item => (\n      React.createElement(MenuItem, {\n        key: item.title,\n        onClick: () => {\n          onClose();\n          item.onClick();\n        },}\n      \n        , React.createElement(ListItemIcon, null\n          , React.createElement(item.Icon, { fontSize: \"small\",} )\n        )\n        , React.createElement(ListItemText, { primary: item.title,} )\n      )\n    )),\n    React.createElement(Divider, { key: \"the divider is here!\"   ,} ),\n  ];\n\n  const disableUnregister =\n    (!unregisterPermission.allowed ||\n      UNSTABLE_contextMenuOptions?.disableUnregister) ??\n    false;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(IconButton, {\n        'aria-label': \"more\",\n        'aria-controls': \"long-menu\",\n        'aria-haspopup': \"true\",\n        'aria-expanded': !!anchorEl,\n        role: \"button\",\n        onClick: onOpen,\n        'data-testid': \"menu-button\",\n        className: classes.button,\n        id: \"long-menu\",}\n      \n        , React.createElement(MoreVert, null )\n      )\n      , React.createElement(Popover, {\n        open: Boolean(anchorEl),\n        onClose: onClose,\n        anchorEl: anchorEl,\n        anchorOrigin: { vertical: 'bottom', horizontal: 'right' },\n        transformOrigin: { vertical: 'top', horizontal: 'right' },\n        'aria-labelledby': \"long-menu\",}\n      \n        , React.createElement(MenuList, null\n          , extraItems\n          , React.createElement(MenuItem, {\n            onClick: () => {\n              onClose();\n              onUnregisterEntity();\n            },\n            disabled: disableUnregister,}\n          \n            , React.createElement(ListItemIcon, null\n              , React.createElement(CancelIcon, { fontSize: \"small\",} )\n            )\n            , React.createElement(ListItemText, { primary: \"Unregister entity\" ,} )\n          )\n          , React.createElement(MenuItem, {\n            onClick: () => {\n              onClose();\n              onInspectEntity();\n            },}\n          \n            , React.createElement(ListItemIcon, null\n              , React.createElement(BugReportIcon, { fontSize: \"small\",} )\n            )\n            , React.createElement(ListItemText, { primary: \"Inspect entity\" ,} )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  DEFAULT_NAMESPACE,\n  RELATION_OWNED_BY,\n} from '@backstage/catalog-model';\nimport {\n  Content,\n  Header,\n  HeaderLabel,\n  Link,\n  Page,\n  Progress,\n  RoutedTabs,\n  WarningPanel,\n} from '@backstage/core-components';\nimport {\n  attachComponentData,\n\n  useElementFilter,\n  useRouteRefParams,\n} from '@backstage/core-plugin-api';\nimport {\n  EntityRefLinks,\n  entityRouteRef,\n  FavoriteEntity,\n  getEntityRelations,\n  InspectEntityDialog,\n  UnregisterEntityDialog,\n  useAsyncEntity,\n} from '@backstage/plugin-catalog-react';\nimport { Box, } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { EntityContextMenu } from '../EntityContextMenu/EntityContextMenu';\n\n/** @public */\n\n\n\n\n\n\n\n\nconst dataKey = 'plugin.catalog.entityLayoutRoute';\n\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, 'core.gatherMountPoints', true); // This causes all mount points that are discovered within this route to use the path of the route itself\n\nfunction EntityLayoutTitle(props\n\n\n) {\n  const { entity, title } = props;\n  return (\n    React.createElement(Box, { display: \"inline-flex\", alignItems: \"center\", height: \"1em\", maxWidth: \"100%\",}\n      , React.createElement(Box, {\n        component: \"span\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",}\n      \n        , title\n      )\n      , entity && React.createElement(FavoriteEntity, { entity: entity,} )\n    )\n  );\n}\n\nfunction headerProps(\n  paramKind,\n  paramNamespace,\n  paramName,\n  entity,\n) {\n  const kind = paramKind ?? entity?.kind ?? '';\n  const namespace = paramNamespace ?? entity?.metadata.namespace ?? '';\n  const name =\n    entity?.metadata.title ?? paramName ?? entity?.metadata.name ?? '';\n  return {\n    headerTitle: `${name}${\n      namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : ''\n    }`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase('en-US');\n      if (entity && entity.spec && 'type' in entity.spec) {\n        t += '  ';\n        t += (entity.spec ).type.toLocaleLowerCase('en-US');\n      }\n      return t;\n    })(),\n  };\n}\n\nfunction EntityLabels(props) {\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return (\n    React.createElement(React.Fragment, null\n      , ownedByRelations.length > 0 && (\n        React.createElement(HeaderLabel, {\n          label: \"Owner\",\n          value: \n            React.createElement(EntityRefLinks, {\n              entityRefs: ownedByRelations,\n              defaultKind: \"Group\",\n              color: \"inherit\",}\n            )\n          ,}\n        )\n      )\n      , entity.spec?.lifecycle && (\n        React.createElement(HeaderLabel, { label: \"Lifecycle\", value: entity.spec.lifecycle,} )\n      )\n    )\n  );\n}\n\n// NOTE(freben): Intentionally not exported at this point, since it's part of\n// the unstable extra context menu items concept below\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * EntityLayout is a compound component, which allows you to define a layout for\n * entities using a sub-navigation mechanism.\n *\n * Consists of two parts: EntityLayout and EntityLayout.Route\n *\n * @example\n * ```jsx\n * <EntityLayout>\n *   <EntityLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </EntityLayout.Route>\n * </EntityLayout>\n * ```\n *\n * @public\n */\nexport const EntityLayout = (props) => {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children,\n    NotFoundComponent,\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(\n    children,\n    elements =>\n      elements\n        .selectByComponentData({\n          key: dataKey,\n          withStrictError:\n            'Child of EntityLayout must be an EntityLayout.Route',\n        })\n        .getElements() // all nodes, element data, maintain structure or not?\n        .flatMap(({ props: elementProps }) => {\n          if (!entity) {\n            return [];\n          } else if (elementProps.if && !elementProps.if(entity)) {\n            return [];\n          }\n\n          return [\n            {\n              path: elementProps.path,\n              title: elementProps.title,\n              children: elementProps.children,\n              tabProps: elementProps.tabProps,\n            },\n          ];\n        }),\n    [entity],\n  );\n\n  const { headerTitle, headerType } = headerProps(\n    kind,\n    namespace,\n    name,\n    entity,\n  );\n\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate('/');\n  };\n\n  // Make sure to close the dialog if the user clicks links in it that navigate\n  // to another entity.\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.pathname]);\n\n  return (\n    React.createElement(Page, { themeId: entity?.spec?.type?.toString() ?? 'home',}\n      , React.createElement(Header, {\n        title: React.createElement(EntityLayoutTitle, { title: headerTitle, entity: entity,} ),\n        pageTitleOverride: headerTitle,\n        type: headerType,}\n      \n        , entity && (\n          React.createElement(React.Fragment, null\n            , React.createElement(EntityLabels, { entity: entity,} )\n            , React.createElement(EntityContextMenu, {\n              UNSTABLE_extraContextMenuItems: UNSTABLE_extraContextMenuItems,\n              UNSTABLE_contextMenuOptions: UNSTABLE_contextMenuOptions,\n              onUnregisterEntity: () => setConfirmationDialogOpen(true),\n              onInspectEntity: () => setInspectionDialogOpen(true),}\n            )\n          )\n        )\n      )\n\n      , loading && React.createElement(Progress, null )\n\n      , entity && React.createElement(RoutedTabs, { routes: routes,} )\n\n      , error && (\n        React.createElement(Content, null\n          , React.createElement(Alert, { severity: \"error\",}, error.toString())\n        )\n      )\n\n      , !loading && !error && !entity && (\n        React.createElement(Content, null\n          , NotFoundComponent ? (\n            NotFoundComponent\n          ) : (\n            React.createElement(WarningPanel, { title: \"Entity not found\"  ,}, \"There is no \"\n                 , kind, \" with the requested\"   , ' '\n              , React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/references\",}, \"kind, namespace, and name\"\n\n              ), \".\"\n\n            )\n          )\n        )\n      )\n\n      , React.createElement(UnregisterEntityDialog, {\n        open: confirmationDialogOpen,\n        entity: entity,\n        onConfirm: cleanUpAfterRemoval,\n        onClose: () => setConfirmationDialogOpen(false),}\n      )\n      , React.createElement(InspectEntityDialog, {\n        open: inspectionDialogOpen,\n        entity: entity,\n        onClose: () => setInspectionDialogOpen(false),}\n      )\n    )\n  );\n};\n\nEntityLayout.Route = Route;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { Button, Dialog, DialogActions, DialogTitle } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\nimport { assertError } from '@backstage/errors';\n\n\n\n\n\n\n\n\nexport function DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    React.createElement(Dialog, { open: open, onClose: onClose,}\n      , React.createElement(DialogTitle, { id: \"responsive-dialog-title\",}, \"Are you sure you want to delete this entity?\"\n\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          disabled: busy,\n          onClick: onDelete,}\n        , \"Delete\"\n\n        )\n        , React.createElement(Button, { onClick: onClose, color: \"primary\",}, \"Cancel\"\n\n        )\n      )\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport { DeleteEntityDialog } from './DeleteEntityDialog';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { rootRouteRef } from '../../routes';\n\n/**\n * Returns true if the given entity has the orphan annotation given by the\n * catalog.\n *\n * @public\n */\nexport function isOrphan(entity) {\n  return entity?.metadata?.annotations?.['backstage.io/orphan'] === 'true';\n}\n\n/**\n * Displays a warning alert if the entity is marked as orphan with the ability\n * to delete said entity.\n *\n * @public\n */\nexport function EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Alert, { severity: \"warning\", onClick: () => setConfirmationDialogOpen(true),}, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"\n\n\n      )\n      , React.createElement(DeleteEntityDialog, {\n        open: confirmationDialogOpen,\n        entity: entity,\n        onConfirm: cleanUpAfterRemoval,\n        onClose: () => setConfirmationDialogOpen(false),}\n      )\n    )\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  stringifyEntityRef,\n\n} from '@backstage/catalog-model';\nimport {\n  catalogApiRef,\n  EntityRefLink,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport { Box } from '@material-ui/core';\nimport React from 'react';\nimport { ResponseErrorPanel } from '@backstage/core-components';\nimport {\n\n  ENTITY_STATUS_CATALOG_PROCESSING_TYPE,\n} from '@backstage/catalog-client';\nimport { useApi, } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\n\nconst errorFilter = (i) =>\n  i.error &&\n  i.level === 'error' &&\n  i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\n\n\n\n\n\n\n\n\nasync function getOwnAndAncestorsErrors(\n  entityRef,\n  catalogApi,\n) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items\n    .map(item => {\n      const statuses = (item.entity ).status?.items ?? [];\n      const errors = statuses\n        .filter(errorFilter)\n        .map(e => e.error)\n        .filter((e) => Boolean(e));\n      return { errors: errors, entity: item.entity };\n    })\n    .filter(item => item.errors.length > 0);\n  return { items };\n}\n\n/**\n * Returns true if the given entity has any processing errors on it.\n *\n * @public\n */\nexport async function hasCatalogProcessingErrors(\n  entity,\n  context,\n) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n\n  const errors = await getOwnAndAncestorsErrors(\n    stringifyEntityRef(entity),\n    catalogApi,\n  );\n  return errors.items.length > 0;\n}\n\n/**\n * Displays a list of errors from the ancestors of the current entity.\n *\n * @public\n */\nexport function EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n\n  if (error) {\n    return (\n      React.createElement(Box, { mb: 1,}\n        , React.createElement(ResponseErrorPanel, { error: error,} )\n      )\n    );\n  }\n\n  if (loading || !value) {\n    return null;\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , value.items.map((ancestorError, index) => (\n        React.createElement(Box, { key: index, mb: 1,}\n          , stringifyEntityRef(entity) !==\n            stringifyEntityRef(ancestorError.entity) && (\n            React.createElement(Box, { p: 1,}, \"The error below originates from\"\n                  , ' '\n              , React.createElement(EntityRefLink, { entityRef: ancestorError.entity,} )\n            )\n          )\n          , ancestorError.errors.map((e, i) => (\n            React.createElement(ResponseErrorPanel, { key: i, error: e,} )\n          ))\n        )\n      ))\n    )\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useAsyncEntity } from '@backstage/plugin-catalog-react';\nimport React, { } from 'react';\nimport {\n  attachComponentData,\n  useApiHolder,\n  useElementFilter,\n\n} from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\nconst ENTITY_SWITCH_KEY = 'core.backstage.entitySwitch';\n\n/** @public */\n\n\n\n\n\n\n\n\nconst EntitySwitchCaseComponent = (_props) => null;\n\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport const EntitySwitch = (props) => {\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(\n    props.children,\n    collection =>\n      collection\n        .selectByComponentData({\n          key: ENTITY_SWITCH_KEY,\n          withStrictError: 'Child of EntitySwitch is not an EntitySwitch.Case',\n        })\n        .getElements()\n        .flatMap((element) => {\n          // Nothing is rendered while loading\n          if (loading) {\n            return [];\n          }\n\n          const { if: condition, children: elementsChildren } =\n            element.props ;\n\n          // If the entity is missing or there is an error, render the default page\n          if (!entity) {\n            return [\n              {\n                if: condition === undefined,\n                children: elementsChildren,\n              },\n            ];\n          }\n          return [\n            {\n              if: condition?.(entity, { apis }) ?? true,\n              children: elementsChildren,\n            },\n          ];\n        }),\n    [apis, entity, loading],\n  );\n  const hasAsyncCases = results.some(\n    r => typeof r.if === 'object' && 'then' in r.if,\n  );\n\n  if (hasAsyncCases) {\n    return React.createElement(AsyncEntitySwitch, { results: results,} );\n  }\n\n  return results.find(r => r.if)?.children ?? null;\n};\n\nfunction AsyncEntitySwitch({ results }) {\n  const { loading, value } = useAsync(async () => {\n    const promises = results.map(\n      async ({ if: condition, children: output }) => {\n        try {\n          if (await condition) {\n            return output;\n          }\n        } catch {\n          /* ignored */\n        }\n\n        return null;\n      },\n    );\n    return (await Promise.all(promises)).find(Boolean) ?? null;\n  }, [results]);\n\n  if (loading || !value) {\n    return null;\n  }\n\n  return value;\n}\n\nEntitySwitch.Case = EntitySwitchCaseComponent;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction strCmp(a, b) {\n  return Boolean(\n    a && a?.toLocaleLowerCase('en-US') === b?.toLocaleLowerCase('en-US'),\n  );\n}\n\nfunction strCmpAll(value, cmpValues) {\n  return typeof cmpValues === 'string'\n    ? strCmp(value, cmpValues)\n    : cmpValues.some(cmpVal => strCmp(value, cmpVal));\n}\n\n/**\n * For use in EntitySwitch.Case. Matches if the entity is of a given kind.\n * @public\n */\nexport function isKind(kinds) {\n  return (entity) => strCmpAll(entity.kind, kinds);\n}\n\n/**\n * For use in EntitySwitch.Case. Matches if the entity is a Component of a given spec.type.\n * @public\n */\nexport function isComponentType(types) {\n  return (entity) => {\n    if (!strCmp(entity.kind, 'component')) {\n      return false;\n    }\n    const componentEntity = entity ;\n    return strCmpAll(componentEntity.spec.type, types);\n  };\n}\n\n/**\n * For use in EntitySwitch.Case. Matches if the entity is in a given namespace.\n * @public\n */\nexport function isNamespace(namespaces) {\n  return (entity) => strCmpAll(entity.metadata?.namespace, namespaces);\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CatalogFilterLayout } from '@backstage/plugin-catalog-react';\n\n/**\n * @public\n * @deprecated Use `CatalogFilterLayout` from `@backstage/plugin-catalog-react` instead.\n */\nexport const FilteredEntityLayout = CatalogFilterLayout \n\n;\n\n/**\n * @public\n * @deprecated Use `CatalogFilterLayout.Filters` from `@backstage/plugin-catalog-react` instead.\n */\nexport const FilterContainer = CatalogFilterLayout.Filters;\n\n/**\n * @public\n * @deprecated Use `CatalogFilterLayout.Content` from `@backstage/plugin-catalog-react` instead.\n */\nexport const EntityListContainer = CatalogFilterLayout.Content;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CatalogClient } from '@backstage/catalog-client';\n\nimport {\n  catalogApiRef,\n  entityRouteRef,\n  starredEntitiesApiRef,\n} from '@backstage/plugin-catalog-react';\nimport { createComponentRouteRef, viewTechDocRouteRef } from './routes';\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  fetchApiRef,\n  storageApiRef,\n} from '@backstage/core-plugin-api';\nimport { DefaultStarredEntitiesApi } from './apis';\n\n\n\n\n\n\n\n\n\n\nimport { rootRouteRef } from './routes';\n\n/** @public */\nexport const catalogPlugin = createPlugin({\n  id: 'catalog',\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ discoveryApi, fetchApi }) =>\n        new CatalogClient({ discoveryApi, fetchApi }),\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) =>\n        new DefaultStarredEntitiesApi({ storageApi }),\n    }),\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef,\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef,\n  },\n});\n\n/** @public */\nexport const CatalogIndexPage =\n  catalogPlugin.provide(\n    createRoutableExtension({\n      name: 'CatalogIndexPage',\n      component: () =>\n        import('./components/CatalogPage').then(m => m.CatalogPage),\n      mountPoint: rootRouteRef,\n    }),\n  );\n\n/** @public */\nexport const CatalogEntityPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: 'CatalogEntityPage',\n    component: () =>\n      import('./components/CatalogEntityPage').then(m => m.CatalogEntityPage),\n    mountPoint: entityRouteRef,\n  }),\n);\n\n/** @public */\nexport const EntityAboutCard =\n  catalogPlugin.provide(\n    createComponentExtension({\n      name: 'EntityAboutCard',\n      component: {\n        lazy: () => import('./components/AboutCard').then(m => m.AboutCard),\n      },\n    }),\n  );\n\n/** @public */\nexport const EntityLinksCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLinksCard',\n    component: {\n      lazy: () =>\n        import('./components/EntityLinksCard').then(m => m.EntityLinksCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityHasSystemsCard =\n  catalogPlugin.provide(\n    createComponentExtension({\n      name: 'EntityHasSystemsCard',\n      component: {\n        lazy: () =>\n          import('./components/HasSystemsCard').then(m => m.HasSystemsCard),\n      },\n    }),\n  );\n\n/** @public */\nexport const EntityHasComponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/HasComponentsCard').then(m => m.HasComponentsCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityHasSubcomponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasSubcomponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/HasSubcomponentsCard').then(\n          m => m.HasSubcomponentsCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityHasResourcesCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityHasResourcesCard',\n    component: {\n      lazy: () =>\n        import('./components/HasResourcesCard').then(m => m.HasResourcesCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityDependsOnComponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityDependsOnComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/DependsOnComponentsCard').then(\n          m => m.DependsOnComponentsCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityDependencyOfComponentsCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityDependencyOfComponentsCard',\n    component: {\n      lazy: () =>\n        import('./components/DependencyOfComponentsCard').then(\n          m => m.DependencyOfComponentsCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityDependsOnResourcesCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'EntityDependsOnResourcesCard',\n    component: {\n      lazy: () =>\n        import('./components/DependsOnResourcesCard').then(\n          m => m.DependsOnResourcesCard,\n        ),\n    },\n  }),\n);\n\n/** @public */\nexport const RelatedEntitiesCard\n\n = catalogPlugin.provide(\n  createComponentExtension({\n    name: 'RelatedEntitiesCard',\n    component: {\n      lazy: () =>\n        import('./components/RelatedEntitiesCard').then(\n          m => m.RelatedEntitiesCard,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createExternalRouteRef,\n  createRouteRef,\n} from '@backstage/core-plugin-api';\n\nexport const createComponentRouteRef = createExternalRouteRef({\n  id: 'create-component',\n  optional: true,\n});\n\nexport const viewTechDocRouteRef = createExternalRouteRef({\n  id: 'view-techdoc',\n  optional: true,\n  params: ['namespace', 'kind', 'name'],\n});\n\nexport const rootRouteRef = createRouteRef({\n  id: 'catalog',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  getMe,\n  getBuildSummaries,\n  getFullBuild,\n  postBuildActions,\n  BuildAction,\n  BuildWithSteps,\n  BuildStepAction,\n  BuildSummary,\n  GitType,\n} from 'circleci-api';\nimport { createApiRef, } from '@backstage/core-plugin-api';\n\nexport { GitType };\n;\n\nexport const circleCIApiRef = createApiRef({\n  id: 'plugin.circleci.service',\n});\n\nconst DEFAULT_PROXY_PATH = '/circleci/api';\n\n\n\n\n\n\n\n\n\nexport class CircleCIApi {\n    discoveryApi;\n    proxyPath;\n\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.proxyPath = options.proxyPath ?? DEFAULT_PROXY_PATH;\n  }\n\n  async retry(buildNumber, options) {\n    return postBuildActions('', buildNumber, BuildAction.RETRY, {\n      circleHost: await this.getApiUrl(),\n      ...options.vcs,\n    });\n  }\n\n  async getBuilds(\n    { limit = 10, offset = 0 },\n    options,\n  ) {\n    return getBuildSummaries('', {\n      options: {\n        limit,\n        offset,\n      },\n      vcs: {},\n      circleHost: await this.getApiUrl(),\n      ...options,\n    });\n  }\n\n  async getUser(options) {\n    return getMe('', { circleHost: await this.getApiUrl(), ...options });\n  }\n\n  async getBuild(buildNumber, options) {\n    return getFullBuild('', buildNumber, {\n      circleHost: await this.getApiUrl(),\n      ...options.vcs,\n    });\n  }\n\n   async getApiUrl() {\n    const proxyUrl = await this.discoveryApi.getBaseUrl('proxy');\n    return proxyUrl + this.proxyPath;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\n\nexport function relativeTimeTo(dateTimeISOString) {\n  return dateTimeISOString\n    ? DateTime.fromISO(dateTimeISOString).toRelative()\n    : '';\n}\n\nexport function durationHumanized(\n  startDateTimeISOString,\n  endDateTimeISOString,\n) {\n  if (!startDateTimeISOString || !endDateTimeISOString) {\n    return '';\n  }\n\n  const startDateTime = DateTime.fromISO(startDateTimeISOString);\n  const endDateTime = DateTime.fromISO(endDateTimeISOString);\n  const duration = Interval.fromDateTimes(\n    startDateTime,\n    endDateTime,\n  ).toDuration();\n\n  return humanizeDuration(duration.as('milliseconds'), {\n    largest: 1,\n  });\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport React, { useEffect, useState } from 'react';\nimport { durationHumanized } from '../../../../util';\n\nconst useStyles = makeStyles({\n  accordionDetails: {\n    padding: 0,\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: '-20px',\n  },\n});\n\nexport const ActionOutput = ({\n  url,\n  name,\n  className,\n  action,\n}\n\n\n\n\n) => {\n  const classes = useStyles();\n\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    fetch(url)\n      .then(res => res.json())\n      .then(actionOutput => {\n        if (typeof actionOutput !== 'undefined') {\n          setMessages(\n            actionOutput.map(({ message }) => message),\n          );\n        }\n      });\n  }, [url]);\n\n  const timeElapsed = durationHumanized(action.start_time, action.end_time);\n\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, className: className,}\n      , React.createElement(AccordionSummary, {\n        expandIcon: React.createElement(ExpandMoreIcon, null ),\n        'aria-controls': `panel-${name}-content`,\n        id: `panel-${name}-header`,\n        IconButtonProps: {\n          className: classes.button,\n        },}\n      \n        , React.createElement(Typography, { variant: \"button\",}\n          , name, \" (\" , timeElapsed, \")\"\n        )\n      )\n      , React.createElement(AccordionDetails, { className: classes.accordionDetails,}\n        , messages.length === 0 ? (\n          'Nothing here...'\n        ) : (\n          React.createElement('div', { style: { height: '20vh', width: '100%' },}\n            , React.createElement(LogViewer, { text: messages.join('\\n'),} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef } from 'react';\n\nexport const useAsyncPolling = (\n  pollingFn,\n  interval,\n) => {\n  const isPolling = useRef(false);\n  const startPolling = async () => {\n    if (isPolling.current === true) return;\n    isPolling.current = true;\n\n    while (isPolling.current === true) {\n      await pollingFn();\n      await new Promise(resolve => setTimeout(resolve, interval));\n    }\n  };\n\n  const stopPolling = () => {\n    isPolling.current = false;\n  };\n  return { startPolling, stopPolling };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const CIRCLECI_ANNOTATION = 'circleci.com/project-slug';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { GitType } from 'circleci-api';\nimport { getOr } from 'lodash/fp';\nimport { useCallback, useEffect, useState } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { circleCIApiRef } from '../api';\n\nimport { CIRCLECI_ANNOTATION } from '../constants';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst makeReadableStatus = (status) => {\n  if (!status) return '';\n  return (\n    {\n      retried: 'Retried',\n      canceled: 'Canceled',\n      infrastructure_fail: 'Infra fail',\n      timedout: 'Timedout',\n      not_run: 'Not run',\n      running: 'Running',\n      failed: 'Failed',\n      queued: 'Queued',\n      scheduled: 'Scheduled',\n      not_running: 'Not running',\n      no_tests: 'No tests',\n      fixed: 'Fixed',\n      success: 'Success',\n    } \n  )[status];\n};\n\nconst mapWorkflowDetails = (buildData) => {\n  // Workflows should be an object: fixed in https://github.com/worldturtlemedia/circleci-api/pull/787\n  const { workflows } = (buildData ) ?? {};\n\n  return {\n    id: workflows?.workflow_id,\n    url: `${buildData.build_url}/workflows/${workflows?.workflow_id}`,\n    jobName: workflows?.job_name,\n    name: workflows?.workflow_name,\n  };\n};\n\nconst mapSourceDetails = (buildData) => {\n  const commitDetails = getOr({}, 'all_commit_details[0]', buildData);\n\n  return {\n    branchName: String(buildData.branch),\n    commit: {\n      hash: String(buildData.vcs_revision),\n      shortHash: String(buildData.vcs_revision).substr(0, 7),\n      committerName: buildData.committer_name,\n      url: commitDetails.commit_url,\n    },\n  };\n};\n\nconst mapUser = (buildData) => ({\n  isUser: buildData?.user?.is_user || false,\n  login: buildData?.user?.login || 'none',\n  name: (buildData?.user )?.name,\n  avatarUrl: (buildData?.user )?.avatar_url,\n});\n\nexport const transform = (\n  buildsData,\n  restartBuild,\n) => {\n  return buildsData.map(buildData => {\n    const tableBuildInfo = {\n      id: String(buildData.build_num),\n      buildName: buildData.subject\n        ? buildData.subject +\n          (buildData.retry_of ? ` (retry of #${buildData.retry_of})` : '')\n        : '',\n      startTime: buildData.start_time,\n      stopTime: buildData.stop_time,\n      onRestartClick: () =>\n        typeof buildData.build_num !== 'undefined' &&\n        restartBuild(buildData.build_num),\n      source: mapSourceDetails(buildData),\n      workflow: mapWorkflowDetails(buildData),\n      user: mapUser(buildData),\n      status: makeReadableStatus(buildData.status),\n      buildUrl: buildData.build_url,\n    };\n    return tableBuildInfo;\n  });\n};\n\nexport const useProjectSlugFromEntity = () => {\n  const { entity } = useEntity();\n  const [vcs, owner, repo] = (\n    entity.metadata.annotations?.[CIRCLECI_ANNOTATION] ?? ''\n  ).split('/');\n  return { vcs, owner, repo };\n};\n\nexport function mapVcsType(vcs) {\n  switch (vcs) {\n    case 'gh':\n    case 'github':\n      return GitType.GITHUB;\n    default:\n      return GitType.BITBUCKET;\n  }\n}\n\nexport function useBuilds() {\n  const { repo, owner, vcs } = useProjectSlugFromEntity();\n  const api = useApi(circleCIApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n\n  const getBuilds = useCallback(\n    async ({ limit, offset }) => {\n      if (owner === '' || repo === '' || vcs === '') {\n        return Promise.reject('No credentials provided');\n      }\n\n      try {\n        return await api.getBuilds(\n          { limit, offset },\n          {\n            vcs: {\n              owner: owner,\n              repo: repo,\n              type: mapVcsType(vcs),\n            },\n          },\n        );\n      } catch (e) {\n        errorApi.post(e);\n        return Promise.reject(e);\n      }\n    },\n    [repo, owner, vcs, api, errorApi],\n  );\n\n  const restartBuild = async (buildId) => {\n    try {\n      await api.retry(buildId, {\n        vcs: {\n          owner: owner,\n          repo: repo,\n          type: mapVcsType(vcs),\n        },\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n\n  useEffect(() => {\n    getBuilds({ limit: 1, offset: 0 }).then(b => setTotal(b?.[0].build_num));\n  }, [repo, getBuilds]);\n\n  const { loading, value, retry } = useAsyncRetry(\n    () =>\n      getBuilds({\n        offset: page * pageSize,\n        limit: pageSize,\n      }).then(builds => transform(builds ?? [], restartBuild)),\n    [page, pageSize, getBuilds],\n  );\n\n  const projectName = `${owner}/${repo}`;\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      value,\n      projectName,\n      total,\n    },\n    {\n      getBuilds,\n      setPage,\n      setPageSize,\n      restartBuild,\n      retry,\n    },\n  ] ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useCallback, useMemo } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { circleCIApiRef } from '../api';\nimport { useAsyncPolling } from './useAsyncPolling';\nimport { useProjectSlugFromEntity, mapVcsType } from './useBuilds';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst INTERVAL_AMOUNT = 1500;\nexport function useBuildWithSteps(buildId) {\n  const { vcs, repo, owner } = useProjectSlugFromEntity();\n  const api = useApi(circleCIApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const vcsOption = useMemo(\n    () => ({\n      owner: owner,\n      repo: repo,\n      type: mapVcsType(vcs),\n    }),\n    [owner, repo, vcs],\n  );\n\n  const getBuildWithSteps = useCallback(async () => {\n    if (owner === '' || repo === '' || vcs === '') {\n      return Promise.reject('No credentials provided');\n    }\n\n    try {\n      const options = {\n        vcs: vcsOption,\n      };\n      const build = await api.getBuild(buildId, options);\n      return Promise.resolve(build);\n    } catch (e) {\n      errorApi.post(e);\n      return Promise.reject(e);\n    }\n  }, [vcsOption, buildId, api, errorApi]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const restartBuild = async () => {\n    try {\n      await api.retry(buildId, {\n        vcs: vcsOption,\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuildWithSteps(),\n    [getBuildWithSteps],\n  );\n\n  const { startPolling, stopPolling } = useAsyncPolling(\n    getBuildWithSteps,\n    INTERVAL_AMOUNT,\n  );\n\n  return [\n    { loading, value, retry },\n    {\n      restartBuild,\n      getBuildWithSteps,\n      startPolling,\n      stopPolling,\n    },\n  ] ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  Grid,\n  Box,\n  IconButton,\n  Typography,\n\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ActionOutput } from './lib/ActionOutput/ActionOutput';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { useBuildWithSteps } from '../../state/useBuildWithSteps';\nimport {\n  Breadcrumbs,\n  InfoCard,\n  Progress,\n  Link,\n} from '@backstage/core-components';\n\nconst IconLink = IconButton ;\n\nconst BuildName = ({ build }) => (\n  React.createElement(Box, { display: \"flex\", alignItems: \"center\",}, \"#\"\n    , build?.build_num, \" - \"  , build?.subject\n    , React.createElement(IconLink, { href: build?.build_url, target: \"_blank\",}\n      , React.createElement(LaunchIcon, null )\n    )\n  )\n);\n\nconst useStyles = makeStyles(theme => ({\n  neutral: {},\n  failed: {\n    position: 'relative',\n    '&:after': {\n      pointerEvents: 'none',\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.error.main}`,\n    },\n  },\n  running: {\n    position: 'relative',\n    '&:after': {\n      pointerEvents: 'none',\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.info.main}`,\n    },\n  },\n  cardContent: {\n    backgroundColor: theme.palette.background.default,\n  },\n  success: {\n    position: 'relative',\n    '&:after': {\n      pointerEvents: 'none',\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.success.main}`,\n    },\n  },\n}));\n\nconst pickClassName = (\n  classes,\n  build = {} ,\n) => {\n  if (build.failed) return classes.failed;\n  if (['running', 'queued'].includes(build.status)) return classes.running;\n  if (build.status === 'success') return classes.success;\n\n  return classes.neutral;\n};\n\nconst ActionsList = ({\n  actions,\n}\n\n\n) => {\n  const classes = useStyles();\n  return (\n    React.createElement(React.Fragment, null\n      , actions.map((action) => (\n        React.createElement(ActionOutput, {\n          className: action.failed ? classes.failed : classes.success,\n          action: action,\n          name: action.name,\n          url: action.output_url || '',}\n        )\n      ))\n    )\n  );\n};\n\nconst BuildsList = ({ build }) => (\n  React.createElement(Box, null\n    , build &&\n      build.steps &&\n      build.steps.map(\n        ({ name, actions }) => (\n          React.createElement(ActionsList, { key: name, name: name, actions: actions,} )\n        ),\n      )\n  )\n);\n\nexport const BuildWithStepsPage = () => {\n  const { buildId = '' } = useParams();\n  const classes = useStyles();\n  const [{ loading, value }, { startPolling, stopPolling }] = useBuildWithSteps(\n    parseInt(buildId, 10),\n  );\n\n  useEffect(() => {\n    startPolling();\n    return () => stopPolling();\n  }, [buildId, startPolling, stopPolling]);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Box, { mb: 3,}\n        , React.createElement(Breadcrumbs, { 'aria-label': \"breadcrumb\",}\n          , React.createElement(Link, { to: \"..\",}, \"All builds\" )\n          , React.createElement(Typography, null, \"Build details\" )\n        )\n      )\n      , React.createElement(Grid, { container: true, spacing: 3, direction: \"column\",}\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(InfoCard, {\n            className: pickClassName(classes, value),\n            title: React.createElement(BuildName, { build: value,} ),\n            cardClassName: classes.cardContent,}\n          \n            , loading ? React.createElement(Progress, null ) : React.createElement(BuildsList, { build: value,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Avatar,\n  Typography,\n  Box,\n  IconButton,\n  makeStyles,\n} from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { durationHumanized, relativeTimeTo } from '../../../../util';\nimport { circleCIBuildRouteRef } from '../../../../route-refs';\nimport {\n  StatusError,\n  StatusWarning,\n  StatusOK,\n  StatusPending,\n  StatusRunning,\n  Table,\n\n  Link,\n} from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// retried, canceled, infrastructure_fail, timedout, not_run, running, failed, queued, scheduled, not_running, no_tests, fixed, success\nconst getStatusComponent = (status = '') => {\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n    case 'scheduled':\n      return React.createElement(StatusPending, null );\n    case 'running':\n      return React.createElement(StatusRunning, null );\n    case 'failed':\n      return React.createElement(StatusError, null );\n    case 'success':\n      return React.createElement(StatusOK, null );\n    case 'canceled':\n    default:\n      return React.createElement(StatusWarning, null );\n  }\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    '& > *': {\n      margin: theme.spacing(1),\n      verticalAlign: 'center',\n    },\n  },\n  small: {\n    width: theme.spacing(3),\n    height: theme.spacing(3),\n  },\n}));\n\nconst SourceInfo = ({ build }) => {\n  const classes = useStyles();\n  const { user, source } = build;\n\n  return (\n    React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root,}\n      , React.createElement(Avatar, { alt: user.name, src: user.avatarUrl, className: classes.small,} )\n      , React.createElement(Box, null\n        , React.createElement(Typography, { variant: \"button\",}, source?.branchName)\n        , React.createElement(Typography, { variant: \"body1\",}\n          , source?.commit?.url !== undefined ? (\n            React.createElement(Link, { to: source?.commit?.url,}, source?.commit.shortHash)\n          ) : (\n            source?.commit.shortHash\n          )\n        )\n      )\n    )\n  );\n};\n\nconst generatedColumns = [\n  {\n    title: 'ID',\n    field: 'id',\n    type: 'numeric',\n    width: '80px',\n  },\n  {\n    title: 'Build',\n    field: 'buildName',\n    highlight: true,\n    width: '20%',\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(circleCIBuildRouteRef);\n\n        return (\n          React.createElement(Link, {\n            component: RouterLink,\n            to: `${routeLink({\n              buildId: row.id,\n            })}`,}\n          \n            , row.buildName ? row.buildName : row?.workflow?.name\n          )\n        );\n      };\n\n      return React.createElement(LinkWrapper, null );\n    },\n  },\n  {\n    title: 'Job',\n    field: 'buildName',\n    highlight: true,\n    render: (row) => (\n      React.createElement(Link, { to: row?.buildUrl ?? '',}\n        , React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(LaunchIcon, { fontSize: \"small\", color: \"disabled\",} )\n          , React.createElement(Box, { mr: 1,} )\n          , row?.workflow?.jobName\n        )\n      )\n    ),\n  },\n  {\n    title: 'Source',\n    field: 'source.commit.hash',\n    highlight: true,\n    render: (row) => (\n      React.createElement(SourceInfo, { build: row ,} )\n    ),\n  },\n  {\n    title: 'Status',\n    field: 'status',\n    render: (row) => (\n      React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n        , getStatusComponent(row.status)\n        , React.createElement(Box, { mr: 1,} )\n        , React.createElement(Typography, { variant: \"button\",}, row.status)\n      )\n    ),\n  },\n  {\n    title: 'Time',\n    field: 'startTime',\n    render: (row) => (\n      React.createElement(React.Fragment, null\n        , React.createElement(Typography, { variant: \"body2\",}, \"run \"\n           , relativeTimeTo(row?.startTime)\n        )\n        , React.createElement(Typography, { variant: \"body2\",}, \"took \"\n           , durationHumanized(row?.startTime, row?.stopTime)\n        )\n      )\n    ),\n  },\n  {\n    title: 'Workflow',\n    field: 'workflow.name',\n  },\n  {\n    title: 'Actions',\n    width: '10%',\n    render: (row) => (\n      React.createElement(IconButton, { onClick: row.onRestartClick,}\n        , React.createElement(RetryIcon, null )\n      )\n    ),\n  },\n];\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const CITable = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  builds,\n  onChangePage,\n  onChangePageSize,\n  total,\n}) => {\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      options: {\n        paging: true,\n        pageSize,\n        padding: 'dense',\n        pageSizeOptions: [10, 20, 50],\n      },\n      totalCount: total,\n      page: page,\n      actions: [\n        {\n          icon: () => React.createElement(RetryIcon, null ),\n          tooltip: 'Refresh Data',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ],\n      data: builds,\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      title: \n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(GitHubIcon, null )\n          , React.createElement(Box, { mr: 1,} )\n          , React.createElement(Typography, { variant: \"h6\",}, projectName)\n        )\n      ,\n      columns: generatedColumns,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { CITable } from '../CITable';\nimport { useBuilds } from '../../../../state';\n\nexport const Builds = () => {\n  const [\n    { total, loading, value, projectName, page, pageSize },\n    { setPage, retry, setPageSize },\n  ] = useBuilds();\n  return (\n    React.createElement(CITable, {\n      total: total,\n      loading: loading,\n      retry: retry,\n      builds: value ?? [],\n      projectName: projectName,\n      page: page,\n      onChangePage: setPage,\n      pageSize: pageSize,\n      onChangePageSize: setPageSize,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Builds } from './lib/Builds';\nimport { Grid } from '@material-ui/core';\n\nexport const BuildsPage = () => (\n  React.createElement(Grid, { container: true, spacing: 3, direction: \"column\",}\n    , React.createElement(Grid, { item: true,}\n      , React.createElement(Builds, null )\n    )\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Routes, Route } from 'react-router';\nimport { circleCIBuildRouteRef } from '../route-refs';\nimport { BuildWithStepsPage } from './BuildWithStepsPage/';\nimport { BuildsPage } from './BuildsPage';\nimport { CIRCLECI_ANNOTATION } from '../constants';\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isCircleCIAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[CIRCLECI_ANNOTATION]);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (!isCircleCIAvailable(entity)) {\n    return React.createElement(MissingAnnotationEmptyState, { annotation: CIRCLECI_ANNOTATION,} );\n  }\n\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(BuildsPage, null ),} )\n      , React.createElement(Route, {\n        path: `${circleCIBuildRouteRef.path}`,\n        element: React.createElement(BuildWithStepsPage, null ),}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef, createSubRouteRef } from '@backstage/core-plugin-api';\n\nexport const circleCIRouteRef = createRouteRef({\n  id: 'circle-ci',\n});\n\nexport const circleCIBuildRouteRef = createSubRouteRef({\n  id: 'circle-ci/build',\n  parent: circleCIRouteRef,\n  path: '/:buildId',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const cloudbuildApiRef = createApiRef({\n  id: 'plugin.cloudbuild.service',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class CloudbuildClient  {\n  constructor(  googleAuthApi) {;this.googleAuthApi = googleAuthApi;}\n\n  async reRunWorkflow({\n    projectId,\n    runId,\n  }\n\n\n) {\n    await fetch(\n      `https://cloudbuild.googleapis.com/v1/projects/${encodeURIComponent(\n        projectId,\n      )}/builds/${encodeURIComponent(runId)}:retry`,\n      {\n        headers: new Headers({\n          Accept: '*/*',\n          Authorization: `Bearer ${await this.getToken()}`,\n        }),\n      },\n    );\n  }\n  async listWorkflowRuns({\n    projectId,\n  }\n\n) {\n    const workflowRuns = await fetch(\n      `https://cloudbuild.googleapis.com/v1/projects/${encodeURIComponent(\n        projectId,\n      )}/builds`,\n      {\n        headers: new Headers({\n          Accept: '*/*',\n          Authorization: `Bearer ${await this.getToken()}`,\n        }),\n      },\n    );\n\n    const builds =\n      await workflowRuns.json();\n\n    return builds;\n  }\n  async getWorkflow({\n    projectId,\n    id,\n  }\n\n\n) {\n    const workflow = await fetch(\n      `https://cloudbuild.googleapis.com/v1/projects/${encodeURIComponent(\n        projectId,\n      )}/builds/${encodeURIComponent(id)}`,\n      {\n        headers: new Headers({\n          Accept: '*/*',\n          Authorization: `Bearer ${await this.getToken()}`,\n        }),\n      },\n    );\n\n    const build = await workflow.json();\n\n    return build;\n  }\n  async getWorkflowRun({\n    projectId,\n    id,\n  }\n\n\n) {\n    const workflow = await fetch(\n      `https://cloudbuild.googleapis.com/v1/projects/${encodeURIComponent(\n        projectId,\n      )}/builds/${encodeURIComponent(id)}`,\n      {\n        headers: new Headers({\n          Accept: '*/*',\n          Authorization: `Bearer ${await this.getToken()}`,\n        }),\n      },\n    );\n    const build = await workflow.json();\n\n    return build;\n  }\n\n  async getToken() {\n    // NOTE(freben - gcp-projects): There's a .read-only variant of this scope that we could\n    // use for readonly operations, but that means we would ask the user for a\n    // second auth during creation and I decided to keep the wider scope for\n    // all ops for now\n    return this.googleAuthApi.getAccessToken(\n      'https://www.googleapis.com/auth/cloud-platform',\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useEffect } from 'react';\nimport { useWorkflowRuns, } from '../useWorkflowRuns';\nimport { WorkflowRunsTable } from '../WorkflowRunsTable';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\nimport { makeStyles, LinearProgress } from '@material-ui/core';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { CLOUDBUILD_ANNOTATION } from '../useProjectName';\n\nimport {\n  InfoCard,\n  Link,\n  StructuredMetadataTable,\n  WarningPanel,\n} from '@backstage/core-components';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n});\n\nconst WidgetContent = ({\n  error,\n  loading,\n  lastRun,\n  branch,\n}\n\n\n\n\n) => {\n  const classes = useStyles();\n  if (error)\n    return React.createElement(WarningPanel, null, \"Couldn't fetch latest \"   , branch, \" run\" );\n  if (loading) return React.createElement(LinearProgress, null );\n  return (\n    React.createElement(StructuredMetadataTable, {\n      metadata: {\n        status: (\n          React.createElement(React.Fragment, null\n            , React.createElement(WorkflowRunStatus, { status: lastRun.status,} )\n          )\n        ),\n        message: lastRun.message,\n        url: (\n          React.createElement(Link, { to: lastRun.googleUrl ?? '',}, \"See more on Google\"\n               , ' '\n            , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n          )\n        ),\n      },}\n    )\n  );\n};\n\nexport const LatestWorkflowRunCard = ({\n  branch = 'master',\n}\n\n) => {\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const projectId = entity?.metadata.annotations?.[CLOUDBUILD_ANNOTATION] || '';\n\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    projectId,\n  });\n  const lastRun = runs?.[0] ?? ({} );\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  return (\n    React.createElement(InfoCard, { title: `Last ${branch} build`,}\n      , React.createElement(WidgetContent, {\n        error: error,\n        loading: loading,\n        branch: branch,\n        lastRun: lastRun,}\n      )\n    )\n  );\n};\n\nexport const LatestWorkflowsForBranchCard = ({\n  branch = 'master',\n}\n\n) => {\n  const { entity } = useEntity();\n\n  return (\n    React.createElement(InfoCard, { title: `Last ${branch} build`,}\n      , React.createElement(WorkflowRunsTable, { entity: entity,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useParams } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { cloudbuildApiRef } from '../../api';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const useWorkflowRunsDetails = (projectId) => {\n  const api = useApi(cloudbuildApiRef);\n  const { id } = useParams();\n  const details = useAsync(async () => {\n    return projectId\n      ? api.getWorkflowRun({\n          projectId,\n          id: id,\n        })\n      : Promise.reject('No projectId provided');\n  }, [projectId, id]);\n  return details;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Box,\n  LinearProgress,\n  Link as MaterialLink,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n\n  Typography,\n} from '@material-ui/core';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport qs from 'qs';\nimport React from 'react';\nimport { useProjectName } from '../useProjectName';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\nimport { useWorkflowRunsDetails } from './useWorkflowRunsDetails';\nimport { Breadcrumbs, Link, WarningPanel } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2),\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0),\n  },\n  table: {\n    padding: theme.spacing(1),\n  },\n  accordionDetails: {\n    padding: 0,\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: '-20px',\n  },\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n}));\n\nexport const WorkflowRunDetails = ({ entity }) => {\n  const { value: projectName, loading, error } = useProjectName(entity);\n  const [projectId] = (projectName ?? '/').split('/');\n\n  const details = useWorkflowRunsDetails(projectId);\n\n  const classes = useStyles();\n  if (error) {\n    return (\n      React.createElement(WarningPanel, { title: \"Error:\",}, \"Failed to load build, \"\n            , error.message, \".\"\n      )\n    );\n  } else if (loading) {\n    return React.createElement(LinearProgress, null );\n  } else if (details.value?.logUrl === undefined) {\n    return React.createElement(LinearProgress, null );\n  }\n\n  const serviceAccount = qs.parse(new URL(details.value?.logUrl).search, {\n    ignoreQueryPrefix: true,\n  }).project;\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Box, { mb: 3,}\n        , React.createElement(Breadcrumbs, { 'aria-label': \"breadcrumb\",}\n          , React.createElement(Link, { to: \"..\",}, \"Build history\" )\n          , React.createElement(Typography, null, \"Build details\" )\n        )\n      )\n      , React.createElement(TableContainer, { component: Paper, className: classes.table,}\n        , React.createElement(Table, null\n          , React.createElement(TableBody, null\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Branch\")\n              )\n              , React.createElement(TableCell, null, details.value?.substitutions.BRANCH_NAME)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Message\")\n              )\n              , React.createElement(TableCell, null, details.value?.substitutions.REPO_NAME)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Commit ID\" )\n              )\n              , React.createElement(TableCell, null, details.value?.substitutions.COMMIT_SHA)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Status\")\n              )\n              , React.createElement(TableCell, null\n                , React.createElement(WorkflowRunStatus, { status: details.value?.status,} )\n              )\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Service Account\" )\n              )\n              , React.createElement(TableCell, null\n                , `${serviceAccount}`, \"@cloudbuild.gserviceaccount.com\"\n              )\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Links\")\n              )\n              , React.createElement(TableCell, null\n                , details.value?.logUrl && (\n                  React.createElement(MaterialLink, { target: \"_blank\", href: details.value.logUrl,}, \"Workflow runs on Google\"\n                       , ' '\n                    , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Routes, Route } from 'react-router';\nimport { buildRouteRef } from '../routes';\nimport { WorkflowRunDetails } from './WorkflowRunDetails';\nimport { WorkflowRunsTable } from './WorkflowRunsTable';\nimport { CLOUDBUILD_ANNOTATION } from './useProjectName';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isCloudbuildAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[CLOUDBUILD_ANNOTATION]);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (!isCloudbuildAvailable(entity)) {\n    // TODO(shmidt-i): move warning to a separate standardized component\n    return React.createElement(MissingAnnotationEmptyState, { annotation: CLOUDBUILD_ANNOTATION,} );\n  }\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(WorkflowRunsTable, { entity: entity,} ),} )\n      , React.createElement(Route, {\n        path: `${buildRouteRef.path}`,\n        element: React.createElement(WorkflowRunDetails, { entity: entity,} ),}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  StatusPending,\n  StatusRunning,\n  StatusOK,\n  StatusAborted,\n  StatusError,\n} from '@backstage/core-components';\n\nexport const WorkflowRunStatus = ({\n  status,\n}\n\n) => {\n  if (status === undefined) return null;\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusPending, null ), \" Queued\"\n        )\n      );\n    case 'working':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusRunning, null ), \" In progress\"\n        )\n      );\n    case 'success':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusOK, null ), \" Completed\"\n        )\n      );\n    case 'cancelled':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusAborted, null ), \" Cancelled\"\n        )\n      );\n    case 'failure':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusError, null ), \" Failed\"\n        )\n      );\n    default:\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusPending, null ), \" Pending\"\n        )\n      );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Link, Typography, Box, IconButton, Tooltip } from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GoogleIcon from '@material-ui/icons/CloudCircle';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useWorkflowRuns, } from '../useWorkflowRuns';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\nimport SyncIcon from '@material-ui/icons/Sync';\nimport { useProjectName } from '../useProjectName';\n\nimport { buildRouteRef } from '../../routes';\nimport { DateTime } from 'luxon';\nimport { Table, } from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\n\nconst generatedColumns = [\n  {\n    title: 'Status',\n    width: '150px',\n\n    render: (row) => (\n      React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n        , React.createElement(WorkflowRunStatus, { status: row.status,} )\n      )\n    ),\n  },\n  {\n    title: 'Build',\n    field: 'id',\n    type: 'numeric',\n    width: '150px',\n    render: (row) => (\n      React.createElement(Typography, { variant: \"body2\", noWrap: true,}\n        , row.id?.substring(0, 8)\n      )\n    ),\n  },\n  {\n    title: 'Source',\n    field: 'source',\n    highlight: true,\n    width: '200px',\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return (\n          React.createElement(Link, {\n            component: RouterLink,\n            'data-testid': \"cell-source\",\n            to: routeLink({ id: row.id }),}\n          \n            , row.message\n          )\n        );\n      };\n\n      return React.createElement(LinkWrapper, null );\n    },\n  },\n  {\n    title: 'Ref',\n    render: (row) => (\n      React.createElement(Typography, { variant: \"body2\", noWrap: true,}\n        , row.substitutions?.BRANCH_NAME\n      )\n    ),\n  },\n  {\n    title: 'Commit',\n    render: (row) => (\n      React.createElement(Typography, { variant: \"body2\", noWrap: true,}\n        , row.substitutions?.SHORT_SHA\n      )\n    ),\n  },\n  {\n    title: 'Created',\n    render: (row) => (\n      React.createElement(Typography, { 'data-testid': \"cell-created\", variant: \"body2\", noWrap: true,}\n        , DateTime.fromISO(row.createTime ?? DateTime.now().toISO()).toFormat(\n          'dd-MM-yyyy hh:mm:ss',\n        )\n      )\n    ),\n  },\n  {\n    title: 'Actions',\n    render: (row) => (\n      React.createElement(Tooltip, { title: \"Rerun workflow\" ,}\n        , React.createElement(IconButton, { 'data-testid': \"action-rerun\", onClick: row.rerun,}\n          , React.createElement(RetryIcon, null )\n        )\n      )\n    ),\n    width: '10%',\n  },\n];\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total,\n}) => {\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: 'dense' },\n      totalCount: total,\n      page: page,\n      actions: [\n        {\n          icon: () => React.createElement(SyncIcon, null ),\n          tooltip: 'Reload workflow runs',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ],\n      data: runs ?? [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      style: { width: '100%' },\n      title: \n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(GoogleIcon, null )\n          , React.createElement(Box, { mr: 1,} )\n          , React.createElement(Typography, { variant: \"h6\",}, projectName)\n        )\n      ,\n      columns: generatedColumns,}\n    )\n  );\n};\n\nexport const WorkflowRunsTable = ({ entity }) => {\n  const { value: projectName, loading } = useProjectName(entity);\n  const [projectId] = (projectName ?? '/').split('/');\n\n  const [tableProps, { retry, setPage, setPageSize }] = useWorkflowRuns({\n    projectId,\n  });\n\n  return (\n    React.createElement(WorkflowRunsTableView, {\n      ...tableProps,\n      loading: loading || tableProps.loading,\n      retry: retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync from 'react-use/lib/useAsync';\n\n\nexport const CLOUDBUILD_ANNOTATION = 'google.com/cloudbuild-project-slug';\n\nexport const useProjectName = (entity) => {\n  const { value, loading, error } = useAsync(async () => {\n    return entity?.metadata.annotations?.[CLOUDBUILD_ANNOTATION] ?? '';\n  });\n  return { value, loading, error };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { cloudbuildApiRef } from '../api/CloudbuildApi';\n\n\n\n\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\nexport function useWorkflowRuns({ projectId }) {\n  const api = useApi(cloudbuildApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(5);\n\n  const {\n    loading,\n    value: runs,\n    retry,\n    error,\n  } = useAsyncRetry(async () => {\n    return api\n      .listWorkflowRuns({\n        projectId,\n      })\n      .then(\n        (\n          workflowRunsData,\n        ) => {\n          setTotal(workflowRunsData.builds.length);\n          // Transformation here\n          return workflowRunsData.builds.map(run => ({\n            message: run.substitutions.REPO_NAME,\n            id: run.id,\n            rerun: async () => {\n              try {\n                await api.reRunWorkflow({\n                  projectId,\n                  runId: run.id,\n                });\n              } catch (e) {\n                errorApi.post(e);\n              }\n            },\n            substitutions: run.substitutions,\n            source: {\n              branchName: run.substitutions.REPO_NAME,\n              commit: {\n                hash: run.substitutions.COMMIT_SHA,\n                url: run.substitutions.REPO_NAME,\n              },\n            },\n            status: run.status,\n            url: run.logUrl,\n            googleUrl: run.logUrl,\n            createTime: run.createTime,\n          }));\n        },\n      );\n  }, [page, pageSize, projectId]);\n\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      projectName: `${projectId}`,\n      total,\n      error,\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry,\n    },\n  ] ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef, createSubRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'cloudbuild',\n});\n\nexport const buildRouteRef = createSubRouteRef({\n  id: 'cloudbuild/run',\n  path: '/:id',\n  parent: rootRouteRef,\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\n\nimport { createApiRef, } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const codeCoverageApiRef = createApiRef({\n  id: 'plugin.code-coverage.service',\n});\n\nexport class CodeCoverageRestApi  {\n  url = '';\n\n  constructor( discovery) {;this.discovery = discovery;}\n\n   async fetch(\n    path,\n    init,\n  ) {\n    if (!this.url) {\n      this.url = await this.discovery.getBaseUrl('code-coverage');\n    }\n    const resp = await fetch(`${this.url}${path}`, init);\n    if (!resp.ok) {\n      throw await ResponseError.fromResponse(resp);\n    }\n    if (resp.headers.get('content-type')?.includes('application/json')) {\n      return await resp.json();\n    }\n    return await resp.text();\n  }\n\n  async getCoverageForEntity(\n    entityName,\n  ) {\n    const entity = encodeURIComponent(stringifyEntityRef(entityName));\n    return (await this.fetch(\n      `/report?entity=${entity}`,\n    )) ;\n  }\n\n  async getFileContentFromEntity(\n    entityName,\n    filePath,\n  ) {\n    const entity = encodeURIComponent(stringifyEntityRef(entityName));\n    return await this.fetch(\n      `/file-content?entity=${entity}&path=${encodeURI(filePath)}`,\n    );\n  }\n\n  async getCoverageHistoryForEntity(\n    entityName,\n    limit,\n  ) {\n    const entity = encodeURIComponent(stringifyEntityRef(entityName));\n    const hasValidLimit = limit && limit > 0;\n    return (await this.fetch(\n      `/history?entity=${entity}${\n        hasValidLimit ? `&limit=${encodeURIComponent(String(limit))}` : ''\n      }`,\n    )) ;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\n\nimport {\n  Box,\n  Card,\n  CardContent,\n  CardHeader,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport TrendingDownIcon from '@material-ui/icons/TrendingDown';\nimport TrendingFlatIcon from '@material-ui/icons/TrendingFlat';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport { Alert } from '@material-ui/lab';\n\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  CartesianGrid,\n  Legend,\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from 'recharts';\nimport { codeCoverageApiRef } from '../../api';\n\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { DateTime } from 'luxon';\n\n\n\nconst useStyles = makeStyles(theme => ({\n  trendDown: {\n    color: theme.palette.status.warning,\n  },\n  trendUp: {\n    color: theme.palette.status.ok,\n  },\n}));\n\nconst getTrendIcon = (trend, classes) => {\n  switch (true) {\n    case trend > 0:\n      return React.createElement(TrendingUpIcon, { className: classes.trendUp,} );\n    case trend < 0:\n      return React.createElement(TrendingDownIcon, { className: classes.trendDown,} );\n    case trend === 0:\n    default:\n      return React.createElement(TrendingFlatIcon, null );\n  }\n};\n\n// convert timestamp to human friendly form\nfunction formatDateToHuman(timeStamp) {\n  return DateTime.fromMillis(Number(timeStamp)).toLocaleString(\n    DateTime.DATETIME_MED,\n  );\n}\n\nexport const CoverageHistoryChart = () => {\n  const { entity } = useEntity();\n  const codeCoverageApi = useApi(codeCoverageApiRef);\n  const {\n    loading: loadingHistory,\n    error: errorHistory,\n    value: valueHistory,\n  } = useAsync(\n    async () =>\n      await codeCoverageApi.getCoverageHistoryForEntity({\n        kind: entity.kind,\n        namespace: entity.metadata.namespace || 'default',\n        name: entity.metadata.name,\n      }),\n  );\n  const classes = useStyles();\n\n  if (loadingHistory) {\n    return React.createElement(Progress, null );\n  }\n  if (errorHistory) {\n    return React.createElement(ResponseErrorPanel, { error: errorHistory,} );\n  } else if (!valueHistory) {\n    return React.createElement(Alert, { severity: \"warning\",}, \"No history found.\"  );\n  }\n\n  if (!valueHistory.history.length) {\n    return (\n      React.createElement(Card, null\n        , React.createElement(CardHeader, { title: \"History\",} )\n        , React.createElement(CardContent, null, \"No coverage history found\"   )\n      )\n    );\n  }\n\n  const oldestCoverage = valueHistory.history[0];\n  const [latestCoverage] = valueHistory.history.slice(-1);\n\n  const getTrendForCoverage = (type) => {\n    if (!oldestCoverage[type].percentage) {\n      return 0;\n    }\n    return (\n      ((latestCoverage[type].percentage - oldestCoverage[type].percentage) /\n        oldestCoverage[type].percentage) *\n      100\n    );\n  };\n\n  const lineTrend = getTrendForCoverage('line');\n  const branchTrend = getTrendForCoverage('branch');\n\n  return (\n    React.createElement(Card, null\n      , React.createElement(CardHeader, { title: \"History\",} )\n      , React.createElement(CardContent, null\n        , React.createElement(Box, { px: 6, display: \"flex\",}\n          , React.createElement(Box, { display: \"flex\", mr: 4,}\n            , getTrendIcon(lineTrend, classes)\n            , React.createElement(Typography, null, \"Current line: \"\n                , latestCoverage.line.percentage, \"%\", React.createElement('br', null ), \"(\"\n              , Math.floor(lineTrend), \"% change over \"   , valueHistory.history.length, ' ', \"builds)\"\n\n            )\n          )\n          , React.createElement(Box, { display: \"flex\",}\n            , getTrendIcon(branchTrend, classes)\n            , React.createElement(Typography, null, \"Current branch: \"\n                , latestCoverage.branch.percentage, \"%\", React.createElement('br', null ), \"(\"\n              , Math.floor(branchTrend), \"% change over\"  , ' '\n              , valueHistory.history.length, \" builds)\"\n            )\n          )\n        )\n        , React.createElement(ResponsiveContainer, { width: \"100%\", height: 300,}\n          , React.createElement(LineChart, {\n            data: valueHistory.history,\n            margin: { right: 48, top: 32 },}\n          \n            , React.createElement(CartesianGrid, { strokeDasharray: \"3 3\" ,} )\n            , React.createElement(XAxis, {\n              dataKey: \"timestamp\",\n              tickFormatter: formatDateToHuman,\n              reversed: true,}\n            )\n            , React.createElement(YAxis, { dataKey: \"line.percentage\",} )\n            , React.createElement(YAxis, { dataKey: \"branch.percentage\",} )\n            , React.createElement(Tooltip, { labelFormatter: formatDateToHuman,} )\n            , React.createElement(Legend, null )\n            , React.createElement(Line, {\n              type: \"monotone\",\n              dataKey: \"branch.percentage\",\n              stroke: \"#8884d8\",}\n            )\n            , React.createElement(Line, { type: \"monotone\", dataKey: \"line.percentage\", stroke: \"#82ca9d\",} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  lineNumberCell: {\n    color: `${theme.palette.grey[500]}`,\n    fontSize: '90%',\n    borderRight: `1px solid ${theme.palette.grey[500]}`,\n    paddingRight: theme.spacing(1),\n    textAlign: 'right',\n  },\n  hitCountCell: {\n    width: '50px',\n    borderRight: `1px solid ${theme.palette.grey[500]}`,\n    textAlign: 'center',\n    color: 'white', // need to enforce this color since it needs to stand out against colored background\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  countRoundedRectangle: {\n    borderRadius: '45px',\n    fontSize: '90%',\n    padding: '1px 3px 1px 3px',\n    width: '50px',\n  },\n  hitCountRoundedRectangle: {\n    backgroundColor: `${theme.palette.success.main}`,\n  },\n  notHitCountRoundedRectangle: {\n    backgroundColor: `${theme.palette.error.main}`,\n  },\n  codeLine: {\n    paddingLeft: `${theme.spacing(1)}`,\n    whiteSpace: 'pre',\n    fontSize: '90%',\n  },\n  hitCodeLine: {\n    backgroundColor: `${theme.palette.success.main}`,\n  },\n  notHitCodeLine: {\n    backgroundColor: `${theme.palette.error.main}`,\n  },\n}));\n\n\n\n\n\n\n\nexport const CodeRow = ({\n  lineNumber,\n  lineContent,\n  lineHits = null,\n}) => {\n  const classes = useStyles();\n  const hitCountRoundedRectangleClass = [classes.countRoundedRectangle];\n  const lineContentClass = [classes.codeLine];\n\n  let hitRoundedRectangle = null;\n  if (lineHits !== null) {\n    if (lineHits > 0) {\n      hitCountRoundedRectangleClass.push(classes.hitCountRoundedRectangle);\n      lineContentClass.push(classes.hitCodeLine);\n    } else {\n      hitCountRoundedRectangleClass.push(classes.notHitCountRoundedRectangle);\n      lineContentClass.push(classes.notHitCodeLine);\n    }\n    hitRoundedRectangle = (\n      React.createElement('div', { className: hitCountRoundedRectangleClass.join(' '),}, lineHits)\n    );\n  }\n\n  return (\n    React.createElement('tr', null\n      , React.createElement('td', { className: classes.lineNumberCell,}, lineNumber)\n      , React.createElement('td', { className: classes.hitCountCell,}, hitRoundedRectangle)\n      , React.createElement('td', {\n        className: lineContentClass.join(' '),\n        dangerouslySetInnerHTML: { __html: lineContent },}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport 'highlight.js/styles/atom-one-dark.css';\nimport highlight from 'highlight.js';\n\n/*\n * Given a file extension, repo name, and array of code lines, return a Promise resolving\n * to an array of formatted lines with html/css formatting.\n *\n * @param fileExtension - The extension of the source file\n * @param lines - The source code lines\n *\n * @returns Promise of formatted lines\n *\n * @see http://highlightjs.readthedocs.io/en/latest/api.html#highlight-name-value-ignore-illegals-continuation\n */\nexport const highlightLines = (fileExtension, lines) => {\n  const formattedLines = [];\n  let state;\n  let fileformat = fileExtension;\n  if (fileExtension === 'm') {\n    fileformat = 'objectivec';\n  }\n  if (fileExtension === 'tsx') {\n    fileformat = 'typescript';\n  }\n  if (fileExtension === 'jsx') {\n    fileformat = 'javascript';\n  }\n  if (fileExtension === 'kt') {\n    fileformat = 'kotlin';\n  }\n\n  lines.forEach(line => {\n    const result = highlight.highlight(fileformat, line, true, state);\n    state = result.top;\n    formattedLines.push(result.value);\n  });\n  return formattedLines;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { makeStyles, Paper } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { codeCoverageApiRef } from '../../api';\n\nimport { CodeRow } from './CodeRow';\nimport { highlightLines } from './Highlighter';\n\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    margin: 'auto',\n    top: '2em',\n    width: '80%',\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: 'scroll',\n  },\n  coverageFileViewTable: {\n    borderSpacing: '0px',\n    width: '80%',\n    marginTop: theme.spacing(2),\n  },\n}));\n\n\n\n\n\nconst FormattedLines = ({\n  highlightedLines,\n  lineHits,\n}) => {\n  return (\n    React.createElement(React.Fragment, null\n      , highlightedLines.map((lineContent, idx) => {\n        const line = idx + 1;\n        return (\n          React.createElement(CodeRow, {\n            key: line,\n            lineNumber: line,\n            lineContent: lineContent,\n            lineHits: lineHits[line],}\n          )\n        );\n      })\n    )\n  );\n};\n\nexport const FileContent = ({ filename, coverage }) => {\n  const { entity } = useEntity();\n  const codeCoverageApi = useApi(codeCoverageApiRef);\n  const { loading, error, value } = useAsync(\n    async () =>\n      await codeCoverageApi.getFileContentFromEntity(\n        {\n          kind: entity.kind,\n          namespace: entity.metadata.namespace || 'default',\n          name: entity.metadata.name,\n        },\n        filename,\n      ),\n    [entity],\n  );\n\n  const classes = useStyles();\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n  if (!value) {\n    return (\n      React.createElement(Alert, { severity: \"warning\",}, \"Unable to retrieve file content for \"\n              , filename\n      )\n    );\n  }\n\n  const [language] = filename.split('.').slice(-1);\n  const highlightedLines = highlightLines(language, value.split('\\n'));\n\n  // List of formatted nodes containing highlighted code\n  // lineHits array where lineHits[i] is number of hits for line i + 1\n  const lineHits = Object.entries(coverage.lineHits).reduce(\n    (acc, next) => {\n      acc[next[0]] = next[1];\n      return acc;\n    },\n    {},\n  );\n\n  return (\n    React.createElement(Paper, { variant: \"outlined\", className: classes.paper,}\n      , React.createElement('table', { className: classes.coverageFileViewTable,}\n        , React.createElement('tbody', null\n          , React.createElement(FormattedLines, {\n            highlightedLines: highlightedLines,\n            lineHits: lineHits,}\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  CardHeader,\n  Modal,\n  Tooltip,\n} from '@material-ui/core';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport { Alert } from '@material-ui/lab';\nimport React, { Fragment, useEffect, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { codeCoverageApiRef } from '../../api';\n\nimport { FileContent } from './FileContent';\nimport {\n  Progress,\n  ResponseErrorPanel,\n  Table,\n\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const groupByPath = (files) => {\n  const acc = {};\n  files.forEach(file => {\n    const filename = file.filename;\n    if (!file.filename) return;\n    const pathArray = filename?.split('/').filter(el => el !== '');\n    if (pathArray) {\n      if (!acc.hasOwnProperty(pathArray[0])) {\n        acc[pathArray[0]] = [];\n      }\n      acc[pathArray[0]].push(file);\n    }\n  });\n  return acc;\n};\n\nconst removeVisitedPathGroup = (\n  files,\n  pathGroup,\n) => {\n  return files.map(file => {\n    return {\n      ...file,\n      filename: file.filename\n        ? file.filename.substring(\n            file.filename?.indexOf(pathGroup) + pathGroup.length + 1,\n          )\n        : file.filename,\n    };\n  });\n};\n\nexport const buildFileStructure = (row) => {\n  const dataGroupedByPath = groupByPath(row.files);\n  row.files = Object.keys(dataGroupedByPath).map(pathGroup => {\n    return buildFileStructure({\n      path: pathGroup,\n      files: dataGroupedByPath.hasOwnProperty('files')\n        ? removeVisitedPathGroup(dataGroupedByPath.files, pathGroup)\n        : removeVisitedPathGroup(dataGroupedByPath[pathGroup], pathGroup),\n      coverage:\n        dataGroupedByPath[pathGroup].reduce(\n          (acc, cur) => acc + cur.coverage,\n          0,\n        ) / dataGroupedByPath[pathGroup].length,\n      missing: dataGroupedByPath[pathGroup].reduce(\n        (acc, cur) => acc + cur.missing,\n        0,\n      ),\n      tracked: dataGroupedByPath[pathGroup].reduce(\n        (acc, cur) => acc + cur.tracked,\n        0,\n      ),\n    });\n  });\n  return row;\n};\n\nconst formatInitialData = (value) => {\n  return buildFileStructure({\n    path: '',\n    coverage: value.aggregate.line.percentage,\n    missing: value.aggregate.line.missed,\n    tracked: value.aggregate.line.available,\n    files: value.files.map((fc) => {\n      return {\n        path: '',\n        filename: fc.filename,\n        coverage: Math.floor(\n          (Object.values(fc.lineHits).filter((hits) => hits > 0)\n            .length /\n            Object.values(fc.lineHits).length) *\n            100,\n        ),\n        missing: Object.values(fc.lineHits).filter(hits => !hits).length,\n        tracked: Object.values(fc.lineHits).length,\n      };\n    }),\n  });\n};\n\nexport const getObjectsAtPath = (\n  curData,\n  path,\n) => {\n  let data = curData?.files;\n  for (const fragment of path) {\n    data = data?.find(d => d.path === fragment)?.files;\n  }\n  return data;\n};\n\nexport const FileExplorer = () => {\n  const { entity } = useEntity();\n  const [curData, setCurData] = useState();\n  const [tableData, setTableData] = useState();\n  const [curPath, setCurPath] = useState('');\n  const [modalOpen, setModalOpen] = useState(false);\n  const [curFile, setCurFile] = useState('');\n  const codeCoverageApi = useApi(codeCoverageApiRef);\n  const { loading, error, value } = useAsync(\n    async () =>\n      await codeCoverageApi.getCoverageForEntity({\n        kind: entity.kind,\n        namespace: entity.metadata.namespace || 'default',\n        name: entity.metadata.name,\n      }),\n  );\n\n  useEffect(() => {\n    if (!value) return;\n    const data = formatInitialData(value);\n    setCurData(data);\n    if (data.files) setTableData(data.files);\n  }, [value]);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n  if (!value) {\n    return (\n      React.createElement(Alert, { severity: \"warning\",}, \"No code coverage found for $\"     , entity)\n    );\n  }\n\n  const moveDownIntoPath = (path) => {\n    const nextPathData = tableData.find(\n      (d) => d.path === path,\n    );\n    if (nextPathData && nextPathData.files) {\n      setTableData(nextPathData.files);\n    }\n  };\n\n  const moveUpIntoPath = (idx) => {\n    const path = curPath.split('/').slice(0, idx + 1);\n    setCurPath(path.join('/'));\n    setTableData(getObjectsAtPath(curData, path.slice(1)));\n  };\n\n  const columns = [\n    {\n      title: 'Path',\n      type: 'string',\n      field: 'path',\n      render: (row) => {\n        if (row.files?.length) {\n          return (\n            React.createElement('div', {\n              role: \"button\",\n              tabIndex: row.tableData.id,\n              style: { color: 'lightblue', cursor: 'pointer' },\n              onKeyDown: () => {\n                setCurPath(`${curPath}/${row.path}`);\n                moveDownIntoPath(row.path);\n              },\n              onClick: () => {\n                setCurPath(`${curPath}/${row.path}`);\n                moveDownIntoPath(row.path);\n              },}\n            \n              , row.path\n            )\n          );\n        }\n\n        return (\n          React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n            , row.path\n            , React.createElement(Tooltip, { title: \"View file content\"  ,}\n              , React.createElement(DescriptionIcon, {\n                fontSize: \"small\",\n                style: { color: 'lightblue', cursor: 'pointer' },\n                onClick: () => {\n                  setCurFile(`${curPath.slice(1)}/${row.path}`);\n                  setModalOpen(true);\n                },}\n              )\n            )\n          )\n        );\n      },\n    },\n    {\n      title: 'Coverage',\n      type: 'numeric',\n      field: 'coverage',\n      render: (row) => `${row.coverage.toFixed(2)}%`,\n    },\n    {\n      title: 'Missing lines',\n      type: 'numeric',\n      field: 'missing',\n    },\n    {\n      title: 'Tracked lines',\n      type: 'numeric',\n      field: 'tracked',\n    },\n  ];\n\n  const pathArray = curPath.split('/');\n  const lastPathElementIndex = pathArray.length - 1;\n  const fileCoverage = value.files.find((f) =>\n    f.filename.endsWith(curFile),\n  );\n\n  if (!fileCoverage) {\n    return null;\n  }\n\n  return (\n    React.createElement(Card, null\n      , React.createElement(CardHeader, { title: \"Explore Files\" ,} )\n      , React.createElement(CardContent, null\n        , React.createElement(Box, { mb: 2, display: \"flex\",}\n          , pathArray.map((pathElement, idx) => (\n            React.createElement(Fragment, { key: pathElement || 'root',}\n              , React.createElement('div', {\n                role: \"button\",\n                tabIndex: idx,\n                style: {\n                  color: `${idx !== lastPathElementIndex && 'lightblue'}`,\n                  cursor: `${idx !== lastPathElementIndex && 'pointer'}`,\n                },\n                onKeyDown: () => moveUpIntoPath(idx),\n                onClick: () => moveUpIntoPath(idx),}\n              \n                , pathElement || 'root'\n              )\n              , React.createElement('div', null, '\\u00A0/\\u00A0')\n            )\n          ))\n        )\n        , React.createElement(Table, {\n          emptyContent: React.createElement(React.Fragment, null, \"No files found\"  ),\n          data: tableData || [],\n          columns: columns,}\n        )\n        , React.createElement(Modal, {\n          open: modalOpen,\n          onClick: event => event.stopPropagation(),\n          onClose: () => setModalOpen(false),\n          style: { overflow: 'scroll' },}\n        \n          , React.createElement(FileContent, { filename: curFile, coverage: fileCoverage,} )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { CoverageHistoryChart } from '../CoverageHistoryChart';\nimport { FileExplorer } from '../FileExplorer';\nimport { Content, ContentHeader, Page } from '@backstage/core-components';\n\nexport const CodeCoveragePage = () => {\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Content, null\n        , React.createElement(ContentHeader, { title: \"Code coverage\" ,} )\n        , React.createElement(CoverageHistoryChart, null )\n        , React.createElement(FileExplorer, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { CodeCoveragePage } from './CodeCoveragePage';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isCodeCoverageAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.['backstage.io/code-coverage']);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (!isCodeCoverageAvailable(entity)) {\n    return (\n      React.createElement(MissingAnnotationEmptyState, { annotation: \"backstage.io/code-coverage\",} )\n    );\n  }\n  return React.createElement(CodeCoveragePage, null );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ProjectGrowthAlertCard } from '../components/ProjectGrowthAlertCard';\n\n\n/**\n * The alert below is an example of an Alert implementation; the CostInsightsApi permits returning\n * any implementation of the Alert type, so adopters can create their own. The CostInsightsApi\n * fetches alert data from the backend, then creates Alert classes with the data.\n */\n\nexport class ProjectGrowthAlert  {\n  data;\n\n  constructor(data) {\n    this.data = data;\n  }\n\n  get url() {\n    return '/cost-insights/investigating-growth';\n  }\n\n  get title() {\n    return `Investigate cost growth in project ${this.data.project}`;\n  }\n\n  get subtitle() {\n    return 'Cost growth outpacing business growth is unsustainable long-term.';\n  }\n\n  get element() {\n    return React.createElement(ProjectGrowthAlertCard, { alert: this.data,} );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { UnlabeledDataflowAlertCard } from '../components/UnlabeledDataflowAlertCard';\n\n\n/**\n * The alert below is an example of an Alert implementation; the CostInsightsApi permits returning\n * any implementation of the Alert type, so adopters can create their own. The CostInsightsApi\n * fetches alert data from the backend, then creates Alert classes with the data.\n */\n\nexport class UnlabeledDataflowAlert  {\n  data;\n  status;\n\n  constructor(data) {\n    this.data = data;\n  }\n\n  get url() {\n    return '/cost-insights/labeling-jobs';\n  }\n\n  get title() {\n    return 'Add labels to workflows';\n  }\n\n  get subtitle() {\n    return 'Labels show in billing data, enabling cost insights for each workflow.';\n  }\n\n  get element() {\n    return React.createElement(UnlabeledDataflowAlertCard, { alert: this.data,} );\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const costInsightsApiRef = createApiRef({\n  id: 'plugin.costinsights.service',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport classnames from 'classnames';\nimport { Card, CardHeader } from '@material-ui/core';\nimport { useScroll } from '../../hooks';\n\nimport { useActionItemCardStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\nexport const ActionItemCard = ({\n  alert,\n  avatar,\n  number,\n  disableScroll = false,\n}) => {\n  const classes = useStyles();\n  const rootClasses = classnames(classes.root, {\n    [classes.activeRoot]: !disableScroll,\n  });\n  const [, setScroll] = useScroll();\n\n  const onActionItemClick = () => {\n    if (!disableScroll && number) {\n      setScroll(`alert-${number}`);\n    }\n  };\n\n  return (\n    React.createElement(Card, { className: classes.card, raised: false, onClick: onActionItemClick,}\n      , React.createElement(CardHeader, {\n        classes: {\n          root: rootClasses,\n          action: classes.action,\n          title: classes.title,\n        },\n        title: alert.title,\n        subheader: alert.subtitle,\n        avatar: avatar,}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { Fragment, } from 'react';\nimport {\n  Avatar,\n  Badge,\n  Box,\n\n  IconButton,\n  Paper,\n  Divider,\n  Tooltip,\n} from '@material-ui/core';\nimport { default as SnoozeIcon } from '@material-ui/icons/AccessTime';\nimport { default as AcceptIcon } from '@material-ui/icons/Check';\nimport { default as DismissIcon } from '@material-ui/icons/Delete';\nimport { ActionItemCard } from './ActionItemCard';\nimport { AlertStatus } from '../../types';\nimport { useScroll, ScrollType } from '../../hooks';\nimport { useActionItemCardStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\nconst AlertStatusButton = ({\n  title,\n  amount,\n  icon,\n  onClick,\n  ...buttonProps\n}) => (\n  React.createElement(Tooltip, { title: title,}\n    , React.createElement(IconButton, {\n      onClick: onClick,\n      role: \"button\",\n      'aria-hidden': false,\n      ...buttonProps,}\n    \n      , React.createElement(Badge, { badgeContent: amount,}, icon)\n    )\n  )\n);\n\n\n\n\n\n\n\n\nexport const ActionItems = ({\n  active,\n  snoozed,\n  accepted,\n  dismissed,\n}) => {\n  const classes = useStyles();\n  const [, setScroll] = useScroll();\n\n  const isSnoozedButtonDisplayed = !!snoozed.length;\n  const isAcceptedButtonDisplayed = !!accepted.length;\n  const isDismissedButtonDisplayed = !!dismissed.length;\n  const isStatusButtonGroupDisplayed = !!active.length;\n\n  const onStatusButtonClick = () =>\n    setScroll(ScrollType.AlertSummary);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Paper, null\n        , active.map((alert, index) => (\n          React.createElement(Fragment, { key: `alert-${index}`,}\n            , React.createElement(ActionItemCard, {\n              alert: alert,\n              number: index + 1,\n              avatar: React.createElement(Avatar, { className: classes.avatar,}, index + 1),}\n            )\n            , index < active.length - 1 && React.createElement(Divider, null )\n          )\n        ))\n      )\n      , isStatusButtonGroupDisplayed && (\n        React.createElement(Box, { display: \"flex\", justifyContent: \"flex-end\", mt: 2,}\n          , isAcceptedButtonDisplayed && (\n            React.createElement(AlertStatusButton, {\n              title: \"Accepted\",\n              'aria-label': AlertStatus.Accepted,\n              icon: React.createElement(AcceptIcon, null ),\n              amount: accepted.length,\n              onClick: onStatusButtonClick,}\n            )\n          )\n          , isSnoozedButtonDisplayed && (\n            React.createElement(AlertStatusButton, {\n              title: \"Snoozed\",\n              'aria-label': AlertStatus.Snoozed,\n              amount: snoozed.length,\n              icon: React.createElement(SnoozeIcon, null ),\n              onClick: onStatusButtonClick,}\n            )\n          )\n          , isDismissedButtonDisplayed && (\n            React.createElement(AlertStatusButton, {\n              title: \"Dismissed\",\n              'aria-label': AlertStatus.Dismissed,\n              icon: React.createElement(DismissIcon, null ),\n              amount: dismissed.length,\n              onClick: onStatusButtonClick,}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport {\n  capitalize,\n  Box,\n  Button,\n  Divider,\n  Dialog,\n  DialogActions,\n  IconButton,\n  DialogContent,\n  Typography,\n} from '@material-ui/core';\nimport { default as CloseIcon } from '@material-ui/icons/Close';\nimport { useAlertDialogStyles as useStyles } from '../../utils/styles';\n\nimport { choose, formOf } from '../../utils/alerts';\n\nconst DEFAULT_FORM_ID = 'alert-form';\n\n\n\n\n\n\n\n\n\n\nexport const AlertDialog = ({\n  open,\n  group,\n  alert,\n  status,\n  onClose,\n  onSubmit,\n}) => {\n  const classes = useStyles();\n  const [isSubmitDisabled, setSubmitDisabled] = useState(true);\n  const formRef = useRef(null);\n\n  useEffect(() => {\n    setSubmitDisabled(open);\n  }, [open]);\n\n  function disableSubmit(isDisabled) {\n    setSubmitDisabled(isDisabled);\n  }\n\n  function onDialogClose() {\n    onClose();\n    setSubmitDisabled(true);\n  }\n\n  const [action, actioned] = choose(\n    status,\n    [\n      ['snooze', 'snoozed'],\n      ['accept', 'accepted'],\n      ['dismiss', 'dismissed'],\n    ],\n    ['', ''],\n  );\n\n  const TransitionProps = {\n    mountOnEnter: true,\n    unmountOnExit: true,\n    onEntered() {\n      if (formRef.current) {\n        formRef.current.id = DEFAULT_FORM_ID;\n      }\n    },\n  };\n\n  const Form = formOf(alert, status);\n\n  return (\n    React.createElement(Dialog, {\n      open: open,\n      onClose: onDialogClose,\n      scroll: \"body\",\n      maxWidth: \"lg\",\n      TransitionProps: TransitionProps,}\n    \n      , React.createElement(Box, { display: \"flex\", justifyContent: \"flex-end\",}\n        , React.createElement(IconButton, {\n          className: classes.icon,\n          disableRipple: true,\n          'aria-label': \"Close\",\n          onClick: onDialogClose,}\n        \n          , React.createElement(CloseIcon, null )\n        )\n      )\n      , React.createElement(DialogContent, { className: classes.content,}\n        , React.createElement(Box, { mb: 1.5,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , React.createElement('b', null, capitalize(action), \" this action item?\"   )\n          )\n          , React.createElement(Typography, { variant: \"h6\", color: \"textSecondary\",}\n            , React.createElement('b', null, \"This action item will be \"\n                   , actioned, \" for all of \"    , group, \".\"\n            )\n          )\n        )\n        , React.createElement(Box, {\n          display: \"flex\",\n          flexDirection: \"column\",\n          bgcolor: \"alertBackground\",\n          p: 2,\n          mb: 1.5,\n          borderRadius: 4,}\n        \n          , React.createElement(Typography, null\n            , React.createElement('b', null, alert?.title)\n          )\n          , React.createElement(Typography, { color: \"textSecondary\",}, alert?.subtitle)\n        )\n        , Form && (\n          React.createElement(Form, {\n            ref: formRef,\n            alert: alert,\n            onSubmit: onSubmit,\n            disableSubmit: disableSubmit,}\n          )\n        )\n      )\n      , React.createElement(Divider, null )\n      , React.createElement(DialogActions, { className: classes.actions, disableSpacing: true,}\n        , Form ? (\n          React.createElement(Button, {\n            type: \"submit\",\n            color: \"primary\",\n            variant: \"contained\",\n            'aria-label': action,\n            form: DEFAULT_FORM_ID,\n            disabled: isSubmitDisabled,}\n          \n            , capitalize(action)\n          )\n        ) : (\n          React.createElement(Button, {\n            type: \"button\",\n            color: \"primary\",\n            variant: \"contained\",\n            'aria-label': action,\n            onClick: () => onSubmit(null),}\n          \n            , capitalize(action)\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Fragment } from 'react';\nimport { Avatar, Box, Collapse, Divider, Tooltip } from '@material-ui/core';\nimport { default as AcceptIcon } from '@material-ui/icons/Check';\nimport { default as DismissIcon } from '@material-ui/icons/Delete';\nimport { default as SnoozeIcon } from '@material-ui/icons/AccessTime';\nimport { ActionItemCard } from '../ActionItems';\nimport { AlertStatus } from '../../types';\nimport { useActionItemCardStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\nconst AlertGroup = ({ alerts, status, title, icon }) => {\n  const classes = useStyles();\n  return (\n    React.createElement(Box, { p: 1,}\n      , alerts.map((alert, index) => (\n        React.createElement(Fragment, { key: `alert-${status}-${index}`,}\n          , React.createElement(ActionItemCard, {\n            disableScroll: true,\n            alert: alert,\n            avatar: \n              React.createElement(Tooltip, { title: title,}\n                , React.createElement(Avatar, { className: classes.avatar,}, icon)\n              )\n            ,}\n          )\n          , index < alerts.length - 1 && React.createElement(Divider, null )\n        )\n      ))\n    )\n  );\n};\n\n\n\n\n\n\n\n\nexport const AlertStatusSummary = ({\n  open,\n  snoozed,\n  accepted,\n  dismissed,\n}) => {\n  const isSnoozedListDisplayed = !!snoozed.length;\n  const isAcceptedListDisplayed = !!accepted.length;\n  const isDismissedListDisplayed = !!dismissed.length;\n\n  return (\n    React.createElement(Collapse, { in: open,}\n      , isAcceptedListDisplayed && (\n        React.createElement(AlertGroup, {\n          title: \"Accepted\",\n          alerts: accepted,\n          status: AlertStatus.Accepted,\n          icon: \n            React.createElement(AcceptIcon, {\n              role: \"img\",\n              'aria-hidden': false,\n              'aria-label': AlertStatus.Accepted,}\n            )\n          ,}\n        )\n      )\n      , isSnoozedListDisplayed && (\n        React.createElement(AlertGroup, {\n          title: \"Snoozed\",\n          alerts: snoozed,\n          status: AlertStatus.Snoozed,\n          icon: \n            React.createElement(SnoozeIcon, {\n              role: \"img\",\n              'aria-hidden': false,\n              'aria-label': AlertStatus.Snoozed,}\n            )\n          ,}\n        )\n      )\n      , isDismissedListDisplayed && (\n        React.createElement(AlertGroup, {\n          title: \"Dismissed\",\n          alerts: dismissed,\n          status: AlertStatus.Dismissed,\n          icon: \n            React.createElement(DismissIcon, {\n              role: \"img\",\n              'aria-hidden': false,\n              'aria-label': AlertStatus.Dismissed,}\n            )\n          ,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, } from 'react';\nimport classnames from 'classnames';\nimport { Button } from '@material-ui/core';\nimport { default as ExpandMoreIcon } from '@material-ui/icons/ExpandMore';\nimport { useAlertStatusSummaryButtonStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\nexport const AlertStatusSummaryButton = ({\n  children,\n  onClick,\n}) => {\n  const classes = useStyles();\n  const [clicked, setClicked] = useState(false);\n  const iconClassName = classnames(classes.icon, {\n    [classes.clicked]: clicked,\n  });\n\n  const handleOnClick = e => {\n    setClicked(prevClicked => !prevClicked);\n    onClick(e);\n  };\n\n  return (\n    React.createElement(Button, {\n      variant: \"text\",\n      color: \"primary\",\n      disableElevation: true,\n      'aria-label': \"expand\",\n      endIcon: React.createElement(ExpandMoreIcon, { className: iconClassName,} ),\n      onClick: handleOnClick,}\n    \n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { useCostInsightsStyles as useStyles } from '../../utils/styles';\nimport { ScrollAnchor } from '../../utils/scroll';\nimport { DefaultNavigation } from '../../utils/navigation';\n\n\n\n\n\n\nexport const AlertInsightsHeader = ({\n  title,\n  subtitle,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Box, { mb: 6, position: \"relative\",}\n      , React.createElement(ScrollAnchor, { id: DefaultNavigation.AlertInsightsHeader,} )\n      , React.createElement(Typography, { variant: \"h4\", align: \"center\",}\n        , title, ' '\n        , React.createElement('span', { role: \"img\", 'aria-label': \"direct-hit\",}, \"\"\n\n        )\n      )\n      , React.createElement(Typography, { className: classes.h6Subtle, align: \"center\", gutterBottom: true,}\n        , subtitle\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Avatar, Box, Button, Grid, Typography } from '@material-ui/core';\nimport { useAlertInsightsSectionStyles as useStyles } from '../../utils/styles';\nimport { ScrollAnchor } from '../../utils/scroll';\n\n\n\n\n\n\n\nexport const AlertInsightsSectionHeader = ({\n  alert,\n  number,\n}) => {\n  const classes = useStyles();\n\n  const isViewInstructionsButtonDisplayed = !!alert.url;\n\n  return (\n    React.createElement(Box, { position: \"relative\", mb: 3, textAlign: \"left\",}\n      , React.createElement(ScrollAnchor, { id: `alert-${number}`,} )\n      , React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n            , React.createElement(Box, { mr: 2,}\n              , React.createElement(Avatar, { className: classes.button,}, number)\n            )\n            , React.createElement(Box, null\n              , React.createElement(Typography, { variant: \"h5\",}, alert.title)\n              , React.createElement(Typography, { gutterBottom: true,}, alert.subtitle)\n            )\n          )\n        )\n        , isViewInstructionsButtonDisplayed && (\n          React.createElement(Grid, { item: true,}\n            , React.createElement(Button, { variant: \"text\", color: \"primary\", href: alert.url,}\n              , alert.buttonText || 'View Instructions'\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Box, Button } from '@material-ui/core';\nimport { default as SnoozeIcon } from '@material-ui/icons/AccessTime';\nimport { default as AcceptIcon } from '@material-ui/icons/Check';\nimport { default as DismissIcon } from '@material-ui/icons/Delete';\nimport { AlertInsightsSectionHeader } from './AlertInsightsSectionHeader';\n\nimport {\n  isSnoozeEnabled,\n  isAcceptEnabled,\n  isDismissEnabled,\n} from '../../utils/alerts';\n\n\n\n\n\n\n\n\n\nexport const AlertInsightsSection = ({\n  alert,\n  number,\n  onSnooze,\n  onAccept,\n  onDismiss,\n}) => {\n  const isSnoozeButtonDisplayed = isSnoozeEnabled(alert);\n  const isAcceptButtonDisplayed = isAcceptEnabled(alert);\n  const isDismissButtonDisplayed = isDismissEnabled(alert);\n  const isButtonGroupDisplayed =\n    isSnoozeButtonDisplayed ||\n    isAcceptButtonDisplayed ||\n    isDismissButtonDisplayed;\n\n  return (\n    React.createElement(Box, { display: \"flex\", flexDirection: \"column\", mb: 6,}\n      , React.createElement(AlertInsightsSectionHeader, { alert: alert, number: number,} )\n      , isButtonGroupDisplayed && (\n        React.createElement(Box, { display: \"flex\", alignItems: \"center\", mb: 4,}\n          , isAcceptButtonDisplayed && (\n            React.createElement(Box, { mr: 1,}\n              , React.createElement(Button, {\n                color: \"primary\",\n                variant: \"contained\",\n                'aria-label': \"accept\",\n                onClick: () => onAccept(alert),\n                startIcon: React.createElement(AcceptIcon, null ),}\n              , \"Accept\"\n\n              )\n            )\n          )\n          , isSnoozeButtonDisplayed && (\n            React.createElement(Box, { mr: 1,}\n              , React.createElement(Button, {\n                color: \"default\",\n                variant: \"outlined\",\n                'aria-label': \"snooze\",\n                disableElevation: true,\n                onClick: () => onSnooze(alert),\n                startIcon: React.createElement(SnoozeIcon, null ),}\n              , \"Snooze\"\n\n              )\n            )\n          )\n          , isDismissButtonDisplayed && (\n            React.createElement(Button, {\n              color: \"secondary\",\n              variant: \"outlined\",\n              'aria-label': \"dismiss\",\n              disableElevation: true,\n              onClick: () => onDismiss(alert),\n              startIcon: React.createElement(DismissIcon, null ),}\n            , \"Dismiss\"\n\n            )\n          )\n        )\n      )\n      , alert.element\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport pluralize from 'pluralize';\nimport { Box, Grid, Snackbar } from '@material-ui/core';\nimport { default as MuiAlert } from '@material-ui/lab/Alert';\nimport { AlertDialog } from './AlertDialog';\nimport { AlertStatusSummary } from './AlertStatusSummary';\nimport { AlertStatusSummaryButton } from './AlertStatusSummaryButton';\nimport { AlertInsightsHeader } from './AlertInsightsHeader';\nimport { AlertInsightsSection } from './AlertInsightsSection';\nimport {\n  useScroll,\n  useLoading,\n  ScrollType,\n\n} from '../../hooks';\nimport { DefaultLoadingAction } from '../../utils/loading';\nimport { AlertStatus, } from '../../types';\nimport {\n  isStatusSnoozed,\n  isStatusAccepted,\n  isStatusDismissed,\n  sumOfAllAlerts,\n} from '../../utils/alerts';\nimport { ScrollAnchor } from '../../utils/scroll';\n\n\n\nconst mapLoadingToAlerts =\n  ({ dispatch }) =>\n  (isLoading) =>\n    dispatch({ [DefaultLoadingAction.CostInsightsAlerts]: isLoading });\n\n\n\n\n\n\n\n\n\n\nexport const AlertInsights = ({\n  group,\n  active,\n  snoozed,\n  accepted,\n  dismissed,\n  onChange,\n}) => {\n  const [scroll] = useScroll();\n  const [alert, setAlert] = useState(null);\n  const dispatchLoadingAlerts = useLoading(mapLoadingToAlerts);\n  const [status, setStatus] = useState(null);\n  // Allow users to pass null values for data.\n  const [data, setData] = useState(undefined);\n  const [error, setError] = useState(null);\n  const [isDialogOpen, setDialogOpen] = useState(false);\n  const [isSummaryOpen, setSummaryOpen] = useState(false);\n  const [isSnackbarOpen, setSnackbarOpen] = useState(false);\n\n  useEffect(() => {\n    async function callAlertHook(\n      options,\n      callback,\n    ) {\n      setAlert(null);\n      setStatus(null);\n      setData(undefined);\n      setDialogOpen(false);\n      dispatchLoadingAlerts(true);\n      try {\n        const alerts = await callback(options);\n        onChange(alerts);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingAlerts(false);\n      }\n    }\n\n    const options = { data, group };\n    const onSnoozed = alert?.onSnoozed?.bind(alert);\n    const onAccepted = alert?.onAccepted?.bind(alert);\n    const onDismissed = alert?.onDismissed?.bind(alert);\n\n    if (data !== undefined) {\n      if (isStatusSnoozed(status) && onSnoozed) {\n        callAlertHook(options, onSnoozed);\n      } else if (isStatusAccepted(status) && onAccepted) {\n        callAlertHook(options, onAccepted);\n      } else if (isStatusDismissed(status) && onDismissed) {\n        callAlertHook(options, onDismissed);\n      }\n    }\n  }, [group, data, alert, status, onChange, dispatchLoadingAlerts]);\n\n  useEffect(() => {\n    if (scroll === ScrollType.AlertSummary) {\n      setSummaryOpen(true);\n    }\n  }, [scroll]);\n\n  useEffect(() => {\n    setDialogOpen(!!status);\n  }, [status]);\n\n  useEffect(() => {\n    setSnackbarOpen(!!error);\n  }, [error]);\n\n  function onSnooze(alertToSnooze) {\n    setAlert(alertToSnooze);\n    setStatus(AlertStatus.Snoozed);\n  }\n\n  function onAccept(alertToAccept) {\n    setAlert(alertToAccept);\n    setStatus(AlertStatus.Accepted);\n  }\n\n  function onDismiss(alertToDismiss) {\n    setAlert(alertToDismiss);\n    setStatus(AlertStatus.Dismissed);\n  }\n\n  function onSnackbarClose() {\n    setError(null);\n  }\n\n  function onDialogClose() {\n    setAlert(null);\n    setStatus(null);\n  }\n\n  function onDialogFormSubmit(formData) {\n    setData(formData);\n  }\n\n  function onSummaryButtonClick() {\n    setSummaryOpen(prevOpen => !prevOpen);\n  }\n\n  const total = [accepted, snoozed, dismissed].reduce(sumOfAllAlerts, 0);\n\n  const isAlertStatusSummaryDisplayed = !!total;\n  const isAlertInsightSectionDisplayed = !!active.length;\n\n  return (\n    React.createElement(Grid, { container: true, direction: \"column\", spacing: 2,}\n      , React.createElement(Grid, { item: true,}\n        , React.createElement(AlertInsightsHeader, {\n          title: \"Your team's action items\"   ,\n          subtitle: \n            isAlertInsightSectionDisplayed\n              ? 'This section outlines suggested action items your team can address to improve cloud costs.'\n              : \"All of your team's action items are hidden. Maybe it's time to give them another look?\"\n          ,}\n        )\n      )\n      , isAlertInsightSectionDisplayed && (\n        React.createElement(Grid, { item: true, container: true, direction: \"column\", spacing: 4,}\n          , active.map((activeAlert, index) => (\n            React.createElement(Grid, { item: true, key: `alert-insights-section-${index}`,}\n              , React.createElement(AlertInsightsSection, {\n                alert: activeAlert,\n                number: index + 1,\n                onSnooze: onSnooze,\n                onAccept: onAccept,\n                onDismiss: onDismiss,}\n              )\n            )\n          ))\n        )\n      )\n      , isAlertStatusSummaryDisplayed && (\n        React.createElement(Grid, { item: true,}\n          , React.createElement(Box, { position: \"relative\", display: \"flex\", justifyContent: \"flex-end\",}\n            , React.createElement(ScrollAnchor, { id: ScrollType.AlertSummary,} )\n            , React.createElement(AlertStatusSummaryButton, { onClick: onSummaryButtonClick,}\n              , pluralize('Hidden Action Item', total)\n            )\n          )\n          , React.createElement(AlertStatusSummary, {\n            open: isSummaryOpen,\n            snoozed: snoozed,\n            accepted: accepted,\n            dismissed: dismissed,}\n          )\n        )\n      )\n      , React.createElement(AlertDialog, {\n        group: group,\n        open: isDialogOpen,\n        alert: alert,\n        status: status,\n        onClose: onDialogClose,\n        onSubmit: onDialogFormSubmit,}\n      )\n      , React.createElement(Snackbar, {\n        open: isSnackbarOpen,\n        autoHideDuration: 6_000,\n        anchorOrigin: { vertical: 'top', horizontal: 'center' },\n        onClose: onSnackbarClose,}\n      \n        , React.createElement(MuiAlert, { onClose: onSnackbarClose, severity: \"error\",}\n          , error?.message\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Box, Button, Container, makeStyles } from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport { CostInsightsThemeProvider } from '../CostInsightsPage/CostInsightsThemeProvider';\nimport { ConfigProvider, CurrencyProvider } from '../../hooks';\nimport { Header, Page } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n    padding: theme.spacing(4),\n  },\n}));\n\n\n\n\n\nexport const AlertInstructionsLayout = ({\n  title,\n  children,\n}) => {\n  const classes = useStyles();\n  return (\n    React.createElement(CostInsightsThemeProvider, null\n      , React.createElement(ConfigProvider, null\n        , React.createElement(CurrencyProvider, null\n          , React.createElement(Page, { themeId: \"tool\",}\n            , React.createElement(Header, {\n              title: \"Cost Insights\" ,\n              pageTitleOverride: title,\n              type: \"Tool\",}\n            )\n            , React.createElement(Container, { maxWidth: \"md\", disableGutters: true, className: classes.root,}\n              , React.createElement(Box, { mb: 3,}\n                , React.createElement(Button, {\n                  variant: \"outlined\",\n                  startIcon: React.createElement(ChevronLeftIcon, null ),\n                  href: \"/cost-insights\",}\n                , \"Back to Cost Insights\"\n\n                )\n              )\n              , children\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { useBarChartLabelStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\n\nexport const BarChartLabel = ({\n  x,\n  y,\n  height,\n  width,\n  details,\n  children,\n}) => {\n  const classes = useBarChartLabelStyles();\n  const translateX = width * -0.5;\n\n  return (\n    React.createElement('foreignObject', {\n      className: classes.foreignObject,\n      style: { transform: `translateX(${translateX}px)` },\n      x: x,\n      y: y,\n      height: height,\n      width: width,}\n    \n      , React.createElement(Box, { display: \"flex\", flexDirection: \"column\", justifyContent: \"center\",}\n        , React.createElement(Typography, { className: classes.label, gutterBottom: true,}\n          , children\n        )\n        , details\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BarChartLabel } from './BarChartLabel';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const BarChartTick = ({\n  x,\n  y,\n  height,\n  width,\n  payload,\n  visibleTicksCount,\n  details,\n}) => {\n  const gutterWidth = 5;\n  const labelWidth = width / visibleTicksCount - gutterWidth * 2;\n  return (\n    React.createElement(BarChartLabel, {\n      x: x,\n      y: y,\n      height: height,\n      width: labelWidth,\n      details: details,}\n    \n      , !payload.value ? 'Unlabeled' : payload.value\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { forwardRef, } from 'react';\nimport { ButtonBase, } from '@material-ui/core';\nimport { useBarChartStepperButtonStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\nexport const BarChartStepperButton = forwardRef(\n  (\n    {\n      name,\n      children,\n      ...buttonBaseProps\n    },\n    ref,\n  ) => {\n    const classes = useStyles();\n    return (\n      React.createElement(ButtonBase, {\n        ref: ref,\n        classes: classes,\n        disableRipple: true,\n        'data-testid': `bar-chart-stepper-button-${name}`,\n        ...buttonBaseProps,}\n      \n        , children\n      )\n    );\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ButtonBase } from '@material-ui/core';\nimport { useBarChartStepperStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\nexport const BarChartSteps = ({\n  steps,\n  activeStep,\n  onClick,\n}) => {\n  const classes = useStyles();\n  const handleOnClick =\n    (index) =>\n    (event) => {\n      event.preventDefault();\n      onClick(index);\n    };\n\n  return (\n    React.createElement('div', { className: classes.steps,}\n      , [...new Array(steps)].map((_, index) => (\n        React.createElement(ButtonBase, { key: index, centerRipple: true, onClick: handleOnClick(index),}\n          , React.createElement('div', {\n            'data-testid': \"bar-chart-step\",\n            className: `${classes.step} ${\n              index === activeStep ? classes.stepActive : ''\n            }`,}\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Paper, Slide } from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { BarChartStepperButton } from './BarChartStepperButton';\nimport { BarChartSteps } from './BarChartSteps';\nimport { useBarChartStepperStyles } from '../../utils/styles';\n\n\n\n\n\n\n\nexport const BarChartStepper = ({\n  steps,\n  disableScroll,\n  onChange,\n}) => {\n  const classes = useBarChartStepperStyles();\n  const [activeStep, setActiveStep] = useState(0);\n\n  /*\n   * This calc determines how many active steps to display in the stepper.\n   * If the chart is displaying a large amount of resources,\n   * the total dots are truncated to 10. As the user clicks forward,\n   * eventually, there might be resources \"left over\" in excess of the ten dot limit.\n   * Once the user has reached that threshold, the difference should appear constant\n   * as the user clicks through the remaining resources and no extra dots should be displayed.\n   */\n\n  const diff = steps % 10;\n  const stepsRemaining = steps - activeStep <= diff ? diff : steps;\n  const displayedStep = activeStep % 10;\n\n  useEffect(() => {\n    onChange(activeStep);\n  }, [activeStep, onChange]);\n\n  const handleNext = () => {\n    setActiveStep(prevStep => prevStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevStep => prevStep - 1);\n  };\n\n  const handleClick = (index) => {\n    setActiveStep(prevStep => {\n      const offset = index - (prevStep % 10);\n      return prevStep + offset;\n    });\n  };\n\n  return (\n    React.createElement(Paper, {\n      'data-testid': \"bar-chart-stepper\",\n      square: true,\n      elevation: 0,\n      className: classes.paper,}\n    \n      , React.createElement(Slide, {\n        direction: \"right\",\n        in: !disableScroll && activeStep !== 0,\n        mountOnEnter: true,\n        unmountOnExit: true,}\n      \n        , React.createElement(BarChartStepperButton, {\n          name: \"back\",\n          className: classes.backButton,\n          onClick: handleBack,}\n        \n          , React.createElement(ChevronLeftIcon, null )\n        )\n      )\n      , React.createElement(BarChartSteps, {\n        steps: Math.min(10, stepsRemaining),\n        activeStep: displayedStep,\n        onClick: handleClick,}\n      )\n      , React.createElement(Slide, {\n        direction: \"left\",\n        in: !disableScroll && activeStep < steps - 1,\n        mountOnEnter: true,\n        unmountOnExit: true,}\n      \n        , React.createElement(BarChartStepperButton, {\n          name: \"next\",\n          className: classes.nextButton,\n          onClick: handleNext,}\n        \n          , React.createElement(ChevronRightIcon, null )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport classnames from 'classnames';\nimport { Box, Divider, Typography } from '@material-ui/core';\nimport { useTooltipStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\n\nexport const BarChartTooltip = ({\n  title,\n  content,\n  subtitle,\n  topRight,\n  actions,\n  children,\n}) => {\n  const classes = useStyles();\n  const titleClassName = classnames(classes.truncate, {\n    [classes.maxWidth]: topRight === undefined,\n  });\n\n  return (\n    React.createElement(Box, { className: classes.tooltip, display: \"flex\", flexDirection: \"column\",}\n      , React.createElement(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"baseline\",\n        px: 2,\n        pt: 2,}\n      \n        , React.createElement(Box, { display: \"flex\", flexDirection: \"column\",}\n          , React.createElement(Typography, { className: titleClassName, variant: \"h6\",}\n            , title\n          )\n          , subtitle && (\n            React.createElement(Typography, { className: classes.subtitle, variant: \"subtitle1\",}\n              , subtitle\n            )\n          )\n        )\n        , topRight && React.createElement(Box, { ml: 2,}, topRight)\n      )\n      , content && (\n        React.createElement(Box, { px: 2, pt: 2, className: classes.maxWidth,}\n          , React.createElement(Typography, { variant: \"body1\", paragraph: true,}\n            , content\n          )\n        )\n      )\n      , React.createElement(Box, { display: \"flex\", flexDirection: \"column\", p: 2,}\n        , children\n      )\n      , actions && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Divider, { className: classes.divider, variant: \"fullWidth\",} )\n          , React.createElement(Box, { display: \"flex\", flexDirection: \"column\", p: 2,}\n            , actions\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { useTooltipStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\n\n\n\nexport const BarChartTooltipItem = ({ item }) => {\n  const classes = useStyles();\n  return (\n    React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      minHeight: 25,}\n    \n      , React.createElement(Box, { display: \"flex\", alignContent: \"center\", marginRight: \".5em\",}\n        , React.createElement(Box, { display: \"flex\", alignItems: \"center\", marginRight: \".5em\",}\n          , React.createElement(LensIcon, { className: classes.lensIcon, style: { fill: item.fill },} )\n        )\n        , React.createElement(Typography, null, item.label)\n      )\n      , React.createElement(Typography, { display: \"block\",}, item.value)\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\nimport {\n  Bar,\n  BarChart as RechartsBarChart,\n  CartesianGrid,\n\n\n\n  ResponsiveContainer,\n  Tooltip as RechartsTooltip,\n  XAxis,\n  YAxis,\n} from 'recharts';\nimport { Box, useTheme } from '@material-ui/core';\nimport { BarChartTick } from './BarChartTick';\nimport { BarChartStepper } from './BarChartStepper';\nimport { BarChartTooltip } from './BarChartTooltip';\nimport { BarChartTooltipItem } from './BarChartTooltipItem';\nimport { currencyFormatter } from '../../utils/formatters';\nimport {\n\n\n  DataKey,\n\n} from '../../types';\nimport { notEmpty } from '../../utils/assert';\nimport { useBarChartStyles } from '../../utils/styles';\nimport { resourceSort } from '../../utils/sort';\nimport { isInvalid, titleOf, tooltipItemOf } from '../../utils/graphs';\n\nexport const defaultTooltip = ({\n  label,\n  payload = [],\n}) => {\n  if (isInvalid({ label, payload })) return null;\n\n  const title = titleOf(label);\n  const items = payload.map(tooltipItemOf).filter(notEmpty);\n  return (\n    React.createElement(BarChartTooltip, { title: title,}\n      , items.map((item, index) => (\n        React.createElement(BarChartTooltipItem, { key: `${item.label}-${index}`, item: item,} )\n      ))\n    )\n  );\n};\n\n\n\n\n\n\n\n\n\n\n\nexport const BarChart = ({\n  resources,\n  responsive = true,\n  displayAmount = 6,\n  options = {},\n  tooltip = defaultTooltip,\n  onClick,\n  onMouseMove,\n}) => {\n  const theme = useTheme();\n  const styles = useBarChartStyles(theme);\n  const [activeChart, setActiveChart] = useState(false);\n  const [stepWindow, setStepWindow] = useState(() => [0, displayAmount]);\n\n  const data = Object.assign(\n    {\n      previousFill: theme.palette.lightBlue,\n      currentFill: theme.palette.darkBlue,\n      previousName: 'Previous',\n      currentName: 'Current',\n    },\n    options,\n  );\n\n  const [stepStart, stepEnd] = stepWindow;\n  const steps = Math.ceil(resources.length / displayAmount);\n  const disableStepper = resources.length <= displayAmount;\n\n  const sortedResources = resources\n    .sort(resourceSort)\n    .slice(stepStart, stepEnd);\n\n  // Pin the domain to the largest value in the series.\n  // Intentionally redundant - This could simply be derived from the first element in the already sorted list,\n  // but that may not be the case in the future when custom sorting is implemented.\n  const globalResourcesMax = resources.reduce(\n    (max, r) => Math.max(max, r.current, r.previous),\n    0,\n  );\n\n  const onStepChange = useCallback(\n    (activeStep) => {\n      const start = activeStep * displayAmount;\n      const end = start + displayAmount;\n      if (end > resources.length) {\n        setStepWindow([start, resources.length]);\n      } else {\n        setStepWindow([start, end]);\n      }\n    },\n    [setStepWindow, resources, displayAmount],\n  );\n\n  return (\n    React.createElement(Box, {\n      position: \"relative\",\n      onMouseLeave: () => setActiveChart(false),\n      onMouseEnter: () => setActiveChart(true),\n      'data-testid': \"bar-chart-wrapper\",}\n    \n      /* Setting fixed values for height and width generates a console warning in testing but enables ResponsiveContainer to render its children. */\n      , React.createElement(ResponsiveContainer, {\n        height: styles.container.height,\n        width: responsive ? '100%' : styles.container.width,}\n      \n        , React.createElement(RechartsBarChart, {\n          style: { cursor: onClick ? 'pointer' : null },\n          onClick: onClick,\n          onMouseMove: onMouseMove,\n          data: sortedResources,\n          margin: styles.barChart.margin,\n          barSize: 45,\n          'data-testid': \"bar-chart\",}\n        \n          , tooltip && (\n            React.createElement(RechartsTooltip, {\n              filterNull: true,\n              cursor: styles.cursor,\n              animationDuration: 100,\n              content: tooltip,}\n            )\n          )\n          , React.createElement(CartesianGrid, {\n            vertical: false,\n            stroke: styles.cartesianGrid.stroke,}\n          )\n          , React.createElement(XAxis, {\n            dataKey: DataKey.Name,\n            tickLine: false,\n            interval: 0,\n            height: styles.xAxis.height,\n            tick: BarChartTick,}\n          )\n          , React.createElement(YAxis, {\n            tickFormatter: currencyFormatter.format,\n            domain: [() => 0, globalResourcesMax],\n            tick: styles.axis,}\n          )\n          , React.createElement(Bar, {\n            dataKey: DataKey.Previous,\n            name: data.previousName,\n            fill: data.previousFill,\n            isAnimationActive: false,}\n          )\n          , React.createElement(Bar, {\n            dataKey: DataKey.Current,\n            name: data.currentName,\n            fill: data.currentFill,\n            isAnimationActive: false,}\n          )\n        )\n      )\n      , !disableStepper && (\n        React.createElement(BarChartStepper, {\n          steps: steps,\n          disableScroll: !activeChart,\n          onChange: onStepChange,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { LegendItem } from '../LegendItem';\nimport { currencyFormatter } from '../../utils/formatters';\n\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const BarChartLegend = ({\n  costStart,\n  costEnd,\n  options = {},\n  children,\n}) => {\n  const theme = useTheme();\n  const classes = useStyles();\n\n  const data = Object.assign(\n    {\n      previousName: 'Previous',\n      previousFill: theme.palette.lightBlue,\n      currentName: 'Current',\n      currentFill: theme.palette.darkBlue,\n    },\n    options,\n  );\n\n  return (\n    React.createElement(Box, { className: classes.legend, display: \"flex\", flexDirection: \"row\",}\n      , React.createElement(Box, { marginRight: 2,}\n        , React.createElement(LegendItem, {\n          title: data.previousName,\n          markerColor: options.hideMarker ? undefined : data.previousFill,}\n        \n          , currencyFormatter.format(costStart)\n        )\n      )\n      , React.createElement(Box, { marginRight: 2,}\n        , React.createElement(LegendItem, {\n          title: data.currentName,\n          markerColor: options.hideMarker ? undefined : data.currentFill,}\n        \n          , currencyFormatter.format(costEnd)\n        )\n      )\n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { Tooltip, IconButton } from '@material-ui/core';\nimport AssignmentOutlinedIcon from '@material-ui/icons/AssignmentOutlined';\nimport AssignmentTurnedInOutlinedIcon from '@material-ui/icons/AssignmentTurnedInOutlined';\nimport SentimentVeryDissatisfiedIcon from '@material-ui/icons/SentimentVeryDissatisfied';\n\nconst ClipboardMessage = {\n  default: 'Copy URL to clipboard',\n  success: 'Copied!',\n  error: \"Couldn't copy to clipboard\",\n};\n\nexport const CopyUrlToClipboard = () => {\n  const location = useLocation();\n  const [state, copyToClipboard] = useCopyToClipboard();\n  const [copied, setCopied] = useState(false);\n\n  const origin = window.location.origin;\n  const pathname = location.pathname;\n  const search = location.search;\n  const url = `${origin}${pathname}${search}`;\n\n  useEffect(() => {\n    if (state.error) {\n      setCopied(false);\n    } else if (state.value) {\n      setCopied(true);\n      setTimeout(setCopied, 1500, false);\n    }\n  }, [state]);\n\n  let text = ClipboardMessage.default;\n  let Icon = AssignmentOutlinedIcon;\n\n  if (state.error) {\n    text = ClipboardMessage.error;\n    Icon = SentimentVeryDissatisfiedIcon;\n  } else if (copied) {\n    text = ClipboardMessage.success;\n    Icon = AssignmentTurnedInOutlinedIcon;\n  }\n\n  return (\n    React.createElement(Tooltip, { title: text, arrow: true,}\n      , React.createElement(IconButton, { onClick: () => copyToClipboard(url),}\n        , React.createElement(Icon, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst vowels = {\n  a: 'A',\n  e: 'E',\n  i: 'I',\n  o: 'O',\n  u: 'U',\n};\n\nexport const indefiniteArticleOf = (\n  articles,\n  word,\n) => {\n  const firstChar = word.charAt(0).toLocaleLowerCase('en-US');\n  return firstChar in vowels\n    ? `${articles[1]} ${word}`\n    : `${articles[0]} ${word}`;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport {\n\n  CurrencyType,\n\n  EngineerThreshold,\n  GrowthType,\n} from '../../types';\nimport { rateOf } from '../../utils/currency';\nimport { growthOf } from '../../utils/change';\nimport { useCostGrowthStyles as useStyles } from '../../utils/styles';\nimport { formatPercent, formatCurrency } from '../../utils/formatters';\nimport { indefiniteArticleOf } from '../../utils/grammar';\nimport { useConfig, useCurrency } from '../../hooks';\nimport { notEmpty } from '../../utils/assert';\n\n\n\n\n\n\nexport const CostGrowth = ({ change, duration }) => {\n  const styles = useStyles();\n  const { engineerCost } = useConfig();\n  const [currency] = useCurrency();\n\n  // Only display costs in absolute values\n  const amount = Math.abs(change.amount);\n  const ratio = Math.abs(change.ratio ?? NaN);\n\n  const rate = rateOf(engineerCost, duration);\n  const engineers = amount / rate;\n  const converted = amount / (currency.rate ?? rate);\n\n  // If a ratio cannot be calculated, don't format.\n  const growth = notEmpty(change.ratio)\n    ? growthOf({ ratio: change.ratio, amount: engineers })\n    : null;\n  // Determine if growth is significant enough to highlight\n  const classes = classnames({\n    [styles.excess]: growth === GrowthType.Excess,\n    [styles.savings]: growth === GrowthType.Savings,\n  });\n\n  if (engineers < EngineerThreshold) {\n    return React.createElement('span', { className: classes,}, \"Negligible\");\n  }\n\n  if (currency.kind === CurrencyType.USD) {\n    // Do not display percentage if ratio cannot be calculated\n    if (isNaN(ratio)) {\n      return (\n        React.createElement('span', { className: classes,}, \"~\"\n          , currency.prefix\n          , formatCurrency(converted)\n        )\n      );\n    }\n\n    return (\n      React.createElement('span', { className: classes,}\n        , formatPercent(ratio), \" or ~\"  , currency.prefix\n        , formatCurrency(converted)\n      )\n    );\n  }\n\n  if (amount < 1) {\n    return (\n      React.createElement('span', { className: classes,}, \"less than \"\n          , indefiniteArticleOf(['a', 'an'], currency.unit)\n      )\n    );\n  }\n\n  // Do not display percentage if ratio cannot be calculated\n  if (isNaN(ratio)) {\n    return (\n      React.createElement('span', { className: classes,}, \"~\"\n        , formatCurrency(converted, currency.unit)\n      )\n    );\n  }\n\n  return (\n    React.createElement('span', { className: classes,}\n      , formatPercent(ratio), \" or ~\"  , formatCurrency(converted, currency.unit)\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport { Typography, } from '@material-ui/core';\nimport { default as ArrowDropUp } from '@material-ui/icons/ArrowDropUp';\nimport { default as ArrowDropDown } from '@material-ui/icons/ArrowDropDown';\nimport { growthOf } from '../../utils/change';\nimport { GrowthType, } from '../../types';\nimport { useCostGrowthStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\nexport const CostGrowthIndicator = ({\n  change,\n  formatter,\n  className,\n  ...props\n}) => {\n  const classes = useStyles();\n  const growth = growthOf(change);\n\n  const classNames = classnames(classes.indicator, className, {\n    [classes.excess]: growth === GrowthType.Excess,\n    [classes.savings]: growth === GrowthType.Savings,\n  });\n\n  return (\n    React.createElement(Typography, { className: classNames, component: \"span\", ...props,}\n      , formatter ? formatter(change) : change.ratio\n      , growth === GrowthType.Excess && React.createElement(ArrowDropUp, { 'aria-label': \"excess\",} )\n      , growth === GrowthType.Savings && React.createElement(ArrowDropDown, { 'aria-label': \"savings\",} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useCostInsightsStyles } from '../../utils/styles';\n\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\n\nfunction useDisplayName() {\n  const identityApi = useApi(identityApiRef);\n  const state = useAsync(() => identityApi.getProfileInfo(), [identityApi]);\n  return state.loading ? '' : state.value?.displayName || 'Mysterious Stranger';\n}\n\n\n\n\n\n\n\n\nconst CostInsightsHeaderNoData = ({\n  owner,\n  groups,\n}) => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n  const hasMultipleGroups = groups.length > 1;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Typography, { variant: \"h4\", align: \"center\", gutterBottom: true,}\n        , React.createElement('span', { role: \"img\", 'aria-label': \"flushed-face\",}, \"\"\n\n        ), ' ', \"Well this is awkward\"\n\n      )\n      , React.createElement(Typography, { className: classes.h6Subtle, align: \"center\", gutterBottom: true,}\n        , React.createElement('b', null, \"Hey, \" , displayName, \"!\"), \" \" , React.createElement('b', null, owner), \" doesn't seem to have any cloud costs.\"\n\n      )\n      , hasMultipleGroups && (\n        React.createElement(Typography, { align: \"center\", gutterBottom: true,}, \"Maybe we picked the wrong team, choose another from the menu above?\"\n\n        )\n      )\n    )\n  );\n};\n\nconst CostInsightsHeaderAlerts = ({\n  owner,\n  alerts,\n}) => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Typography, { variant: \"h4\", align: \"center\", gutterBottom: true,}\n        , React.createElement('span', { role: \"img\", 'aria-label': \"magnifying-glass\",}, \"\"\n\n        ), ' ', \"You have \"\n          , alerts, \" thing\" , alerts > 1 && 's', \" to look into\"\n      )\n      , React.createElement(Typography, { className: classes.h6Subtle, align: \"center\", gutterBottom: true,}\n        , React.createElement('b', null, \"Hey, \" , displayName, \"!\"), \" We've identified\"  , ' '\n        , alerts > 1 ? 'a few things ' : 'one thing '\n        , React.createElement('b', null, owner), \" should look into next.\"\n      )\n    )\n  );\n};\n\nconst CostInsightsHeaderNoAlerts = ({ owner }) => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Typography, { variant: \"h4\", gutterBottom: true, align: \"center\",}\n        , React.createElement('span', { role: \"img\", 'aria-label': \"thumbs-up\",}, \"\"\n\n        ), ' ', \"Your team is doing great\"\n\n      )\n      , React.createElement(Typography, { className: classes.h6Subtle, align: \"center\", gutterBottom: true,}\n        , React.createElement('b', null, \"Hey, \" , displayName, \"!\"), \" \" , React.createElement('b', null, owner), \" is doing well. No major changes this month.\"\n\n      )\n    )\n  );\n};\n\nexport const CostInsightsHeaderNoGroups = () => {\n  const displayName = useDisplayName();\n  const classes = useCostInsightsStyles();\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Typography, { variant: \"h4\", align: \"center\", gutterBottom: true,}\n        , React.createElement('span', { role: \"img\", 'aria-label': \"flushed-face\",}, \"\"\n\n        ), ' ', \"Well this is awkward\"\n\n      )\n      , React.createElement(Typography, { className: classes.h6Subtle, align: \"center\", gutterBottom: true,}\n        , React.createElement('b', null, \"Hey, \" , displayName, \"!\"), \" It doesn't look like you belong to any teams.\"\n      )\n    )\n  );\n};\n\nexport const CostInsightsHeader = (props) => {\n  if (!props.hasCostData) {\n    return React.createElement(CostInsightsHeaderNoData, { ...props,} );\n  }\n  if (props.alerts) {\n    return React.createElement(CostInsightsHeaderAlerts, { ...props,} );\n  }\n  return React.createElement(CostInsightsHeaderNoAlerts, { ...props,} );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport { CostInsightsTabs } from '../CostInsightsTabs';\nimport { Header, Page } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n  },\n  header: {\n    boxShadow: 'none',\n  },\n  content: {\n    padding: theme.spacing(4),\n  },\n}));\n\n\n\n\n\n\nexport const CostInsightsLayout = ({\n  groups,\n  children,\n}) => {\n  const classes = useStyles();\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Header, {\n        style: { boxShadow: 'none' },\n        title: \"Cost Insights\" ,\n        pageTitleOverride: \"Cost Insights\" ,\n        type: \"Tool\",}\n      )\n      , React.createElement('div', { className: classes.root,}\n        , React.createElement(CostInsightsTabs, { groups: groups,} )\n        , React.createElement('div', { className: classes.content,}, children)\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport {\n  Collapse,\n  MenuList,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Badge,\n} from '@material-ui/core';\nimport { useNavigationStyles as useStyles } from '../../utils/styles';\nimport { useConfig, useScroll } from '../../hooks';\nimport { findAlways } from '../../utils/assert';\nimport {\n  DefaultNavigation,\n\n  getDefaultNavigationItems,\n} from '../../utils/navigation';\n\n\n\n\n\n\n\nconst NavigationMenuItem = ({ navigation, icon, title }) => {\n  const classes = useStyles();\n  const [, setScroll] = useScroll();\n  return (\n    React.createElement(MenuItem, {\n      button: true,\n      'data-testid': `menu-item-${navigation}`,\n      className: classes.menuItem,\n      onClick: () => setScroll(navigation),}\n    \n      , React.createElement(ListItemIcon, { className: classes.listItemIcon,}, icon)\n      , React.createElement(ListItemText, {\n        primary: React.createElement(Typography, { className: classes.title,}, title),}\n      )\n    )\n  );\n};\n\nexport const CostInsightsNavigation = React.memo(\n  ({ alerts, products }) => {\n    const classes = useStyles();\n    const { icons } = useConfig();\n    const [isOpen, setOpen] = useState(false);\n\n    const defaultNavigationItems = getDefaultNavigationItems(alerts);\n    const productNavigationItems =\n      products?.map(product => ({\n        title: product.name,\n        navigation: product.kind,\n        icon: findAlways(icons, i => i.kind === product.kind).component,\n      })) ?? [];\n\n    useEffect(\n      function toggleProductMenuItems() {\n        if (products?.length) {\n          setOpen(true);\n        } else {\n          setOpen(false);\n        }\n      },\n      [products],\n    );\n\n    return (\n      React.createElement(MenuList, { className: classes.menuList,}\n        , defaultNavigationItems.map(item => (\n          React.createElement(NavigationMenuItem, {\n            key: `navigation-menu-item-${item.navigation}`,\n            navigation: item.navigation,\n            title: item.title,\n            icon: \n              item.navigation === DefaultNavigation.AlertInsightsHeader ? (\n                React.createElement(Badge, { badgeContent: alerts, color: \"secondary\",}\n                  , React.cloneElement(item.icon, {\n                    className: classes.navigationIcon,\n                  })\n                )\n              ) : (\n                React.cloneElement(item.icon, {\n                  className: classes.navigationIcon,\n                })\n              )\n            ,}\n          )\n        ))\n        , React.createElement(Collapse, { in: isOpen, timeout: 850,}\n          , productNavigationItems.map((item) => (\n            React.createElement(NavigationMenuItem, {\n              key: `navigation-menu-item-${item.navigation}`,\n              navigation: item.navigation,\n              icon: React.cloneElement(item.icon, {\n                className: classes.navigationIcon,\n              }),\n              title: item.title,}\n            )\n          ))\n        )\n      )\n    );\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport {\n  createTheme as createMuiTheme,\n  ThemeProvider,\n} from '@material-ui/core';\n\nimport {\n  costInsightsDarkTheme,\n  costInsightsLightTheme,\n} from '../../utils/styles';\n\n\nexport const CostInsightsThemeProvider = ({\n  children,\n}) => {\n  return (\n    React.createElement(ThemeProvider, {\n      theme: (theme) =>\n        createMuiTheme({\n          ...theme,\n          palette: {\n            ...theme.palette,\n            ...(theme.palette.type === 'dark'\n              ? costInsightsDarkTheme.palette\n              : costInsightsLightTheme.palette),\n          },\n        }) \n      ,}\n    \n      , children\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  getResetState,\n  DefaultLoadingAction,\n  getResetStateWithoutInitial,\n} from '../../utils/loading';\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapLoadingToProps\n\n = ({ state, actions, dispatch }) => ({\n  loadingActions: actions,\n  loadingGroups: state[DefaultLoadingAction.UserGroups],\n  loadingBillingDate: state[DefaultLoadingAction.LastCompleteBillingDate],\n  loadingInitial: state[DefaultLoadingAction.CostInsightsInitial],\n  dispatchInitial: (isLoading) =>\n    dispatch({ [DefaultLoadingAction.CostInsightsInitial]: isLoading }),\n  dispatchInsights: (isLoading) =>\n    dispatch({ [DefaultLoadingAction.CostInsightsPage]: isLoading }),\n  dispatchNone: (loadingActions) =>\n    dispatch(getResetState(loadingActions)),\n  dispatchReset: (loadingActions) =>\n    dispatch(getResetStateWithoutInitial(loadingActions)),\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  Box,\n  Collapse,\n  Container,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { default as MaterialAlert } from '@material-ui/lab/Alert';\nimport { costInsightsApiRef } from '../../api';\nimport { ActionItems } from '../ActionItems';\nimport { AlertInsights } from '../AlertInsights';\nimport { CostInsightsLayout } from '../CostInsightsLayout';\nimport { CopyUrlToClipboard } from '../CopyUrlToClipboard';\nimport { CurrencySelect } from '../CurrencySelect';\nimport { WhyCostsMatter } from '../WhyCostsMatter';\nimport {\n  CostInsightsHeader,\n  CostInsightsHeaderNoGroups,\n} from '../CostInsightsHeader';\nimport { CostInsightsNavigation } from '../CostInsightsNavigation';\nimport { CostOverviewCard } from '../CostOverviewCard';\nimport { ProductInsights } from '../ProductInsights';\n/* https://github.com/backstage/backstage/issues/2574 */\n// import { CostInsightsSupportButton } from '../CostInsightsSupportButton';\nimport {\n  useConfig,\n  useCurrency,\n  useFilters,\n  useGroups,\n  useLastCompleteBillingDate,\n  useLoading,\n} from '../../hooks';\n\nimport { mapLoadingToProps } from './selector';\nimport { ProjectSelect } from '../ProjectSelect';\nimport { intervalsOf } from '../../utils/duration';\nimport { useSubtleTypographyStyles } from '../../utils/styles';\nimport {\n  isAlertActive,\n  isAlertAccepted,\n  isAlertDismissed,\n  isAlertSnoozed,\n} from '../../utils/alerts';\n\nimport { Progress } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const CostInsightsPage = () => {\n  const classes = useSubtleTypographyStyles();\n  const client = useApi(costInsightsApiRef);\n  const config = useConfig();\n  const groups = useGroups();\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n  const [alerts, setAlerts] = useState([]);\n  const [currency, setCurrency] = useCurrency();\n  const [projects, setProjects] = useState(null);\n  const [products, setProducts] = useState(null);\n  const [dailyCost, setDailyCost] = useState(null);\n  const [metricData, setMetricData] = useState(null);\n  const [error, setError] = useState(null);\n\n  const { pageFilters, setPageFilters } = useFilters(p => p);\n\n  const active = useMemo(() => alerts.filter(isAlertActive), [alerts]);\n  const snoozed = useMemo(() => alerts.filter(isAlertSnoozed), [alerts]);\n  const accepted = useMemo(() => alerts.filter(isAlertAccepted), [alerts]);\n  const dismissed = useMemo(() => alerts.filter(isAlertDismissed), [alerts]);\n\n  const isActionItemsDisplayed = !!active.length;\n  const isAlertInsightsDisplayed = !!alerts.length;\n\n  const {\n    loadingActions,\n    loadingGroups,\n    loadingBillingDate,\n    loadingInitial,\n    dispatchInitial,\n    dispatchInsights,\n    dispatchNone,\n    dispatchReset,\n  } = useLoading(mapLoadingToProps);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  // The dispatchLoading functions are derived from loading state using mapLoadingToProps, to\n  // provide nicer props for the component. These are re-derived whenever loading state changes,\n  // which causes an infinite loop as product panels load and re-trigger the useEffect below.\n  // Since the functions don't change, we can memoize - but we trigger the same loop if we satisfy\n  // exhaustive-deps by including the function itself in dependencies.\n\n  const dispatchLoadingInitial = useCallback(dispatchInitial, []);\n  const dispatchLoadingInsights = useCallback(dispatchInsights, []);\n  const dispatchLoadingNone = useCallback(dispatchNone, []);\n  const dispatchLoadingReset = useCallback(dispatchReset, []);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const setProject = (project) =>\n    setPageFilters({\n      ...pageFilters,\n      project: project === 'all' ? null : project,\n    });\n\n  useEffect(() => {\n    async function getInsights() {\n      setError(null);\n      try {\n        if (pageFilters.group) {\n          dispatchLoadingInsights(true);\n          const intervals = intervalsOf(\n            pageFilters.duration,\n            lastCompleteBillingDate,\n          );\n          const [\n            fetchedProjects,\n            fetchedAlerts,\n            fetchedMetricData,\n            fetchedDailyCost,\n          ] = await Promise.all([\n            client.getGroupProjects(pageFilters.group),\n            client.getAlerts(pageFilters.group),\n            pageFilters.metric\n              ? client.getDailyMetricData(pageFilters.metric, intervals)\n              : null,\n            pageFilters.project\n              ? client.getProjectDailyCost(pageFilters.project, intervals)\n              : client.getGroupDailyCost(pageFilters.group, intervals),\n          ]);\n          setProjects(fetchedProjects);\n          setAlerts(fetchedAlerts);\n          setMetricData(fetchedMetricData);\n          setDailyCost(fetchedDailyCost);\n        } else {\n          dispatchLoadingNone(loadingActions);\n        }\n      } catch (e) {\n        setError(e);\n        dispatchLoadingNone(loadingActions);\n      } finally {\n        dispatchLoadingInitial(false);\n        dispatchLoadingInsights(false);\n      }\n    }\n\n    // Wait for metadata to finish loading\n    if (!(loadingGroups && loadingBillingDate)) {\n      getInsights();\n    }\n  }, [\n    client,\n    pageFilters,\n    loadingActions,\n    loadingGroups,\n    loadingBillingDate,\n    dispatchLoadingInsights,\n    dispatchLoadingInitial,\n    dispatchLoadingNone,\n    lastCompleteBillingDate,\n  ]);\n\n  if (loadingInitial) {\n    return React.createElement(Progress, null );\n  }\n\n  if (error) {\n    return React.createElement(MaterialAlert, { severity: \"error\",}, error.message);\n  }\n\n  // Loaded but no groups found for the user\n  if (!pageFilters.group) {\n    return (\n      React.createElement(CostInsightsLayout, { groups: groups,}\n        , React.createElement(Box, { textAlign: \"right\",}\n          , React.createElement(CopyUrlToClipboard, null )\n          /* <CostInsightsSupportButton /> */\n        )\n        , React.createElement(Container, { maxWidth: \"lg\",}\n          , React.createElement(CostInsightsHeaderNoGroups, null )\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(Container, { maxWidth: \"lg\",}\n          , React.createElement(WhyCostsMatter, null )\n        )\n      )\n    );\n  }\n\n  if (!dailyCost) {\n    return (\n      React.createElement(MaterialAlert, { severity: \"error\",}, `Error: Could not fetch cost insights data for team ${pageFilters.group}`)\n    );\n  }\n\n  const onProjectSelect = (project) => {\n    setProject(project);\n    dispatchLoadingReset(loadingActions);\n  };\n\n  const CostOverviewBanner = () => (\n    React.createElement(Box, {\n      px: 3,\n      pt: 6,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      minHeight: 40,}\n    \n      , React.createElement(Box, null\n        , React.createElement(Typography, { variant: \"h4\",}, \"Cost Overview\" )\n        , React.createElement(Typography, { classes: classes,}, \"Billing data as of \"\n              , lastCompleteBillingDate\n        )\n      )\n      , React.createElement(Box, { display: \"flex\",}\n        , React.createElement(Box, { mr: 1,}\n          , React.createElement(CurrencySelect, {\n            currency: currency,\n            currencies: config.currencies,\n            onSelect: setCurrency,}\n          )\n        )\n        , React.createElement(ProjectSelect, {\n          project: pageFilters.project,\n          projects: projects || [],\n          onSelect: onProjectSelect,}\n        )\n      )\n    )\n  );\n\n  return (\n    React.createElement(CostInsightsLayout, { groups: groups,}\n      , React.createElement(Grid, { container: true, wrap: \"nowrap\",}\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Box, { position: \"sticky\", top: 20,}\n            , React.createElement(CostInsightsNavigation, {\n              products: products,\n              alerts: active.length,}\n            )\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: true,}\n          , React.createElement(Box, {\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"flex-end\",\n            mb: 2,}\n          \n            , React.createElement(CopyUrlToClipboard, null )\n            /* <CostInsightsSupportButton /> */\n          )\n          , React.createElement(Container, { maxWidth: \"lg\", disableGutters: true,}\n            , React.createElement(Grid, { container: true, direction: \"column\",}\n              , React.createElement(Grid, { item: true, xs: true,}\n                , React.createElement(CostInsightsHeader, {\n                  owner: pageFilters.group,\n                  groups: groups,\n                  hasCostData: !!dailyCost.aggregation.length,\n                  alerts: active.length,}\n                )\n              )\n              , React.createElement(Collapse, { in: isActionItemsDisplayed, enter: false,}\n                , React.createElement(Grid, { item: true, xs: true,}\n                  , React.createElement(Box, { px: 3, py: 6,}\n                    , React.createElement(ActionItems, {\n                      active: active,\n                      snoozed: snoozed,\n                      accepted: accepted,\n                      dismissed: dismissed,}\n                    )\n                  )\n                )\n                , React.createElement(Divider, null )\n              )\n              , React.createElement(Grid, { item: true, xs: true,}\n                , React.createElement(CostOverviewBanner, null )\n              )\n              , React.createElement(Grid, { item: true, xs: true,}\n                , React.createElement(Box, { px: 3, py: 6,}\n                  , !!dailyCost.aggregation.length && (\n                    React.createElement(CostOverviewCard, {\n                      dailyCostData: dailyCost,\n                      metricData: metricData,}\n                    )\n                  )\n                  , React.createElement(WhyCostsMatter, null )\n                )\n              )\n              , React.createElement(Collapse, { in: isAlertInsightsDisplayed, enter: false,}\n                , React.createElement(Grid, { item: true, xs: true,}\n                  , React.createElement(Box, { px: 6, py: 6, mx: -3, bgcolor: \"alertBackground\",}\n                    , React.createElement(AlertInsights, {\n                      group: pageFilters.group,\n                      active: active,\n                      snoozed: snoozed,\n                      accepted: accepted,\n                      dismissed: dismissed,\n                      onChange: setAlerts,}\n                    )\n                  )\n                )\n              )\n              , !isAlertInsightsDisplayed && React.createElement(Divider, null )\n              , React.createElement(Grid, { item: true, xs: true,}\n                , React.createElement(Box, { px: 3, py: 6,}\n                  , React.createElement(ProductInsights, {\n                    group: pageFilters.group,\n                    project: pageFilters.project,\n                    products: config.products,\n                    onLoaded: setProducts,}\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CostInsightsPage } from './CostInsightsPage';\nimport { FilterProvider } from '../../hooks/useFilters';\nimport { LoadingProvider } from '../../hooks/useLoading';\nimport { GroupsProvider } from '../../hooks/useGroups';\nimport { CurrencyProvider } from '../../hooks/useCurrency';\nimport { ScrollProvider } from '../../hooks/useScroll';\nimport { ConfigProvider } from '../../hooks/useConfig';\nimport { BillingDateProvider } from '../../hooks/useLastCompleteBillingDate';\nimport { CostInsightsThemeProvider } from './CostInsightsThemeProvider';\n\nexport const CostInsightsPageRoot = () => (\n  React.createElement(CostInsightsThemeProvider, null\n    , React.createElement(ConfigProvider, null\n      , React.createElement(LoadingProvider, null\n        , React.createElement(GroupsProvider, null\n          , React.createElement(BillingDateProvider, null\n            , React.createElement(FilterProvider, null\n              , React.createElement(ScrollProvider, null\n                , React.createElement(CurrencyProvider, null\n                  , React.createElement(CostInsightsPage, null )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getResetStateWithoutInitial } from '../../utils/loading';\n\n\n\n\n\n\n\n\n\n\nexport const mapFiltersToProps\n\n = ({ pageFilters, setPageFilters }) => ({\n  ...pageFilters,\n  setGroup: (group) =>\n    setPageFilters({\n      ...pageFilters,\n      group: group.id,\n      project: null,\n    }),\n});\n\nexport const mapLoadingToProps\n\n = ({ actions, dispatch }) => ({\n  loadingActions: actions,\n  dispatchReset: (loadingActions) =>\n    dispatch(getResetStateWithoutInitial(loadingActions)),\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Menu, MenuItem, Tab, Tabs, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { mapLoadingToProps, mapFiltersToProps } from './selector';\n\nimport { useFilters, useLoading } from '../../hooks';\nimport { useCostInsightsTabsStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\nexport const CostInsightsTabs = ({ groups }) => {\n  const classes = useStyles();\n  const [index] = useState(0); // index is fixed for now until other tabs are added\n  const [groupMenuEl, setGroupMenuEl] = useState(null);\n  const { group, setGroup } = useFilters(mapFiltersToProps);\n  const { loadingActions, dispatchReset } = useLoading(mapLoadingToProps);\n\n  const openGroupMenu = (e) => setGroupMenuEl(e.currentTarget );\n\n  const closeGroupMenu = () => setGroupMenuEl(null);\n\n  const updateGroupFilterAndCloseMenu = (g) => () => {\n    dispatchReset(loadingActions);\n    closeGroupMenu();\n    setGroup(g);\n  };\n\n  const renderTabLabel = () => (\n    React.createElement('div', { className: classes.tabLabel,}\n      , React.createElement(Typography, { className: classes.tabLabelText, variant: \"overline\",}\n        , `${groups.length} teams`\n      )\n      , React.createElement(ExpandMoreIcon, { fontSize: \"small\",} )\n    )\n  );\n\n  const hasAtLeastTwoGroups = groups.length >= 2;\n\n  if (!hasAtLeastTwoGroups) return null;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Tabs, {\n        className: `cost-insights-tabs ${classes.tabs}`,\n        'data-testid': \"cost-insights-tabs\",\n        classes: { indicator: classes.indicator },\n        value: index,}\n      \n        , React.createElement(Tab, {\n          className: classes.tab,\n          'data-testid': \"cost-insights-groups-tab\",\n          key: \"cost-insights-groups-tab\",\n          label: renderTabLabel(),\n          onClick: openGroupMenu,\n          component: \"button\",}\n        )\n      )\n      , React.createElement(Menu, {\n        id: \"group-menu\",\n        'data-testid': \"group-menu\",\n        className: classes.menu,\n        getContentAnchorEl: null,\n        anchorEl: groupMenuEl,\n        keepMounted: true,\n        open: Boolean(groupMenuEl),\n        onClose: closeGroupMenu,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'left',\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'left',\n        },}\n      \n        , groups.map((g) => (\n          React.createElement(MenuItem, {\n            className: classes.menuItem,\n            classes: { selected: classes.menuItemSelected },\n            selected: g.id === group,\n            key: g.id,\n            'data-testid': g.id,\n            onClick: updateGroupFilterAndCloseMenu(g),}\n          \n            , g.id\n          )\n        ))\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function trendFrom(trendline, date) {\n  return trendline.slope * (date / 1000) + trendline.intercept;\n}\n\nexport function groupByDate(\n  acc,\n  entry,\n) {\n  return { ...acc, [entry.date]: entry.amount };\n}\n\nexport function toMaxCost(acc, entry) {\n  return acc.dailyCost > entry.dailyCost ? acc : entry;\n}\n\nexport function toDataMax(metric, data) {\n  return (\n    (data.reduce(toMaxCost).dailyCost / Math.abs(data[0].trend)) *\n    data[0][metric]\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapFiltersToProps = ({\n  pageFilters,\n  setPageFilters,\n}) => ({\n  ...pageFilters,\n  project: pageFilters.project || 'all',\n  setDuration: (duration) =>\n    setPageFilters({\n      ...pageFilters,\n      duration,\n    }),\n  setProject: (project) =>\n    setPageFilters({\n      ...pageFilters,\n      project: project === 'all' ? null : project,\n    }),\n  setMetric: (metric) =>\n    setPageFilters({\n      ...pageFilters,\n      metric: metric,\n    }),\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { LegendItem } from '../LegendItem';\n\n\n\n\n\n\n\nimport { useLastCompleteBillingDate, useFilters } from '../../hooks';\nimport { getComparedChange, choose } from '../../utils/change';\nimport { mapFiltersToProps } from './selector';\nimport { formatChange } from '../../utils/formatters';\nimport { CostGrowth } from '../CostGrowth';\n\n\n\n\n\n\n\nexport const CostOverviewLegend = ({\n  dailyCostData,\n  metric,\n  metricData,\n}) => {\n  const theme = useTheme();\n  const { duration } = useFilters(mapFiltersToProps);\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n\n  const comparedChange = metricData\n    ? getComparedChange(\n        dailyCostData,\n        metricData,\n        duration,\n        lastCompleteBillingDate,\n      )\n    : null;\n\n  return (\n    React.createElement(Box, { display: \"flex\", flexDirection: \"row\",}\n      , dailyCostData.change && (\n        React.createElement(Box, { mr: 2,}\n          , React.createElement(LegendItem, { title: \"Cost Trend\" , markerColor: theme.palette.blue,}\n            , formatChange(dailyCostData.change)\n          )\n        )\n      )\n      , metricData && metric && comparedChange && (\n        React.createElement(React.Fragment, null\n          , React.createElement(Box, { mr: 2,}\n            , React.createElement(LegendItem, {\n              title: `${metric.name} Trend`,\n              markerColor: theme.palette.magenta,}\n            \n              , formatChange(metricData.change)\n            )\n          )\n          , React.createElement(LegendItem, {\n            title: choose(['Your Savings', 'Your Excess'], comparedChange),}\n          \n            , React.createElement(CostGrowth, { change: comparedChange, duration: duration,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { useTheme, Box } from '@material-ui/core';\nimport {\n  ComposedChart,\n\n\n  XAxis,\n  YAxis,\n  Tooltip as RechartsTooltip,\n  CartesianGrid,\n  Area,\n  Line,\n  ResponsiveContainer,\n} from 'recharts';\nimport {\n\n\n  DEFAULT_DATE_FORMAT,\n\n\n\n\n} from '../../types';\nimport {\n  BarChartTooltip as Tooltip,\n  BarChartTooltipItem as TooltipItem,\n} from '../BarChart';\nimport {\n  overviewGraphTickFormatter,\n  formatGraphValue,\n  isInvalid,\n} from '../../utils/graphs';\nimport { useCostOverviewStyles as useStyles } from '../../utils/styles';\nimport { groupByDate, toDataMax, trendFrom } from '../../utils/charts';\nimport { aggregationSort } from '../../utils/sort';\nimport { CostOverviewLegend } from './CostOverviewLegend';\n\n\n\n\n\n\n\n\nexport const CostOverviewChart = ({\n  dailyCostData,\n  metric,\n  metricData,\n  responsive = true,\n}) => {\n  const theme = useTheme();\n  const styles = useStyles(theme);\n\n  const data = {\n    dailyCost: {\n      dataKey: 'dailyCost',\n      name: `Daily Cost`,\n      format: 'currency',\n      data: dailyCostData,\n    },\n    metric: {\n      dataKey: metric?.kind ?? 'Unknown',\n      name: metric?.name ?? 'Unknown',\n      format: metricData?.format ?? 'number',\n      data: metricData,\n    },\n  };\n\n  const metricsByDate = data.metric.data\n    ? data.metric.data.aggregation.reduce(groupByDate, {})\n    : {};\n\n  const chartData = data.dailyCost.data.aggregation\n    .slice()\n    .sort(aggregationSort)\n    .map(entry => ({\n      date: Date.parse(entry.date),\n      trend: trendFrom(data.dailyCost.data.trendline, Date.parse(entry.date)),\n      dailyCost: entry.amount,\n      ...(metric && data.metric.data\n        ? { [data.metric.dataKey]: metricsByDate[`${entry.date}`] }\n        : {}),\n    }));\n\n  const tooltipRenderer = ({\n    label,\n    payload = [],\n  }) => {\n    if (isInvalid({ label, payload })) return null;\n\n    const dataKeys = [data.dailyCost.dataKey, data.metric.dataKey];\n    const date =\n      typeof label === 'number'\n        ? DateTime.fromMillis(label)\n        : DateTime.fromISO(label);\n    const title = date.toUTC().toFormat(DEFAULT_DATE_FORMAT);\n    const items = payload\n      .filter(p => dataKeys.includes(p.dataKey ))\n      .map(p => ({\n        label:\n          p.dataKey === data.dailyCost.dataKey\n            ? data.dailyCost.name\n            : data.metric.name,\n        value:\n          p.dataKey === data.dailyCost.dataKey\n            ? formatGraphValue(p.value , data.dailyCost.format)\n            : formatGraphValue(p.value , data.metric.format),\n        fill:\n          p.dataKey === data.dailyCost.dataKey\n            ? theme.palette.blue\n            : theme.palette.magenta,\n      }));\n\n    return (\n      React.createElement(Tooltip, { title: title,}\n        , items.map((item, index) => (\n          React.createElement(TooltipItem, { key: `${item.label}-${index}`, item: item,} )\n        ))\n      )\n    );\n  };\n\n  return (\n    React.createElement(Box, { display: \"flex\", flexDirection: \"column\",}\n      , React.createElement(CostOverviewLegend, {\n        dailyCostData: dailyCostData,\n        metric: metric,\n        metricData: metricData,}\n      )\n      , React.createElement(ResponsiveContainer, {\n        width: responsive ? '100%' : styles.container.width,\n        height: styles.container.height,\n        className: \"cost-overview-chart\",}\n      \n        , React.createElement(ComposedChart, { margin: styles.chart.margin, data: chartData,}\n          , React.createElement(CartesianGrid, { stroke: styles.cartesianGrid.stroke,} )\n          , React.createElement(XAxis, {\n            dataKey: \"date\",\n            domain: ['dataMin', 'dataMax'],\n            tickFormatter: overviewGraphTickFormatter,\n            tickCount: 6,\n            type: \"number\",\n            stroke: styles.axis.fill,}\n          )\n          , React.createElement(YAxis, {\n            domain: [() => 0, 'dataMax'],\n            tick: { fill: styles.axis.fill },\n            tickFormatter: formatGraphValue,\n            width: styles.yAxis.width,\n            yAxisId: data.dailyCost.dataKey,}\n          )\n          , metric && (\n            React.createElement(YAxis, {\n              hide: true,\n              domain: [() => 0, toDataMax(data.metric.dataKey, chartData)],\n              width: styles.yAxis.width,\n              yAxisId: data.metric.dataKey,}\n            )\n          )\n          , React.createElement(Area, {\n            dataKey: data.dailyCost.dataKey,\n            isAnimationActive: false,\n            fill: theme.palette.blue,\n            fillOpacity: 0.4,\n            stroke: \"none\",\n            yAxisId: data.dailyCost.dataKey,}\n          )\n          , React.createElement(Line, {\n            activeDot: false,\n            dataKey: \"trend\",\n            dot: false,\n            isAnimationActive: false,\n            label: false,\n            strokeWidth: 2,\n            stroke: theme.palette.blue,\n            yAxisId: data.dailyCost.dataKey,}\n          )\n          , metric && (\n            React.createElement(Line, {\n              dataKey: data.metric.dataKey,\n              dot: false,\n              isAnimationActive: false,\n              label: false,\n              strokeWidth: 2,\n              stroke: theme.palette.magenta,\n              yAxisId: data.metric.dataKey,}\n            )\n          )\n          , React.createElement(RechartsTooltip, { content: tooltipRenderer, animationDuration: 100,} )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const aggregationSum = (aggregation) =>\n  aggregation.reduce((total, curAgg) => total + curAgg.amount, 0);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { DateTime } from 'luxon';\nimport {\n  useTheme,\n  Box,\n  Typography,\n  Divider,\n  emphasize,\n} from '@material-ui/core';\nimport { default as FullScreenIcon } from '@material-ui/icons/Fullscreen';\nimport {\n  AreaChart,\n\n\n  XAxis,\n  YAxis,\n  Tooltip as RechartsTooltip,\n  Area,\n  ResponsiveContainer,\n  CartesianGrid,\n} from 'recharts';\nimport { DEFAULT_DATE_FORMAT, } from '../../types';\nimport {\n  BarChartTooltip as Tooltip,\n  BarChartTooltipItem as TooltipItem,\n  BarChartLegend,\n} from '../BarChart';\nimport {\n  overviewGraphTickFormatter,\n  formatGraphValue,\n  isInvalid,\n} from '../../utils/graphs';\nimport { useCostOverviewStyles as useStyles } from '../../utils/styles';\nimport { useFilters, useLastCompleteBillingDate } from '../../hooks';\nimport { mapFiltersToProps } from './selector';\nimport { getPreviousPeriodTotalCost } from '../../utils/change';\nimport { formatPeriod } from '../../utils/formatters';\nimport { aggregationSum } from '../../utils/sum';\n\n\n\n\n\n\nconst LOW_COST_THRESHOLD = 0.1;\n\nexport const CostOverviewBreakdownChart = ({\n  costBreakdown,\n}) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n  const { duration } = useFilters(mapFiltersToProps);\n  const [isExpanded, setExpanded] = useState(false);\n\n  if (!costBreakdown) {\n    return null;\n  }\n\n  const flattenedAggregation = costBreakdown\n    .map(cost => cost.aggregation)\n    .flat();\n\n  const totalCost = aggregationSum(flattenedAggregation);\n\n  const previousPeriodTotal = getPreviousPeriodTotalCost(\n    flattenedAggregation,\n    duration,\n    lastCompleteBillingDate,\n  );\n  const currentPeriodTotal = totalCost - previousPeriodTotal;\n  const canExpand = costBreakdown.length >= 8;\n  const otherCategoryIds = [];\n\n  const breakdownsByDate = costBreakdown.reduce(\n    (breakdownByDate, breakdown) => {\n      const breakdownTotal = aggregationSum(breakdown.aggregation);\n      // Group breakdown items with less than 10% of the total cost into \"Other\" category if needed\n      const isOtherCategory =\n        canExpand && breakdownTotal < totalCost * LOW_COST_THRESHOLD;\n\n      const updatedBreakdownByDate = { ...breakdownByDate };\n      if (isOtherCategory) {\n        otherCategoryIds.push(breakdown.id);\n      }\n      breakdown.aggregation.forEach(curAggregation => {\n        const costsForDate = updatedBreakdownByDate[curAggregation.date] || {};\n\n        updatedBreakdownByDate[curAggregation.date] = {\n          ...costsForDate,\n          [breakdown.id]:\n            (costsForDate[breakdown.id] || 0) + curAggregation.amount,\n        };\n      });\n\n      return updatedBreakdownByDate;\n    },\n    {} ,\n  );\n\n  const chartData = Object.keys(breakdownsByDate).map(\n    date => {\n      const costsForDate = Object.keys(breakdownsByDate[date]).reduce(\n        (dateCosts, breakdown) => {\n          // Group costs for items that belong to 'Other' in the chart.\n          const cost = breakdownsByDate[date][breakdown];\n          const breakdownCost =\n            !isExpanded && otherCategoryIds.includes(breakdown)\n              ? { Other: (dateCosts.Other || 0) + cost }\n              : { [breakdown]: cost };\n          return { ...dateCosts, ...breakdownCost };\n        },\n        {} ,\n      );\n      return {\n        ...costsForDate,\n        date: Date.parse(date),\n      };\n    },\n  );\n\n  const sortedBreakdowns = costBreakdown.sort(\n    (a, b) => aggregationSum(a.aggregation) - aggregationSum(b.aggregation),\n  );\n\n  const renderAreas = () => {\n    const separatedBreakdowns = sortedBreakdowns\n      // Check that the breakdown is a separate group and hasn't been added to 'Other'\n      .filter(\n        breakdown =>\n          breakdown.id !== 'Other' && !otherCategoryIds.includes(breakdown.id),\n      )\n      .map(breakdown => breakdown.id);\n    // Keep 'Other' category at the bottom of the stack\n    const breakdownsToDisplay = isExpanded\n      ? sortedBreakdowns.map(breakdown => breakdown.id)\n      : ['Other', ...separatedBreakdowns];\n\n    return breakdownsToDisplay.map((breakdown, i) => {\n      // Logic to handle case where there are more items than data viz colors.\n      const color =\n        theme.palette.dataViz[\n          (breakdownsToDisplay.length - 1 - i) %\n            (theme.palette.dataViz.length - 1)\n        ];\n      return (\n        React.createElement(Area, {\n          key: breakdown,\n          dataKey: breakdown,\n          isAnimationActive: false,\n          stackId: \"1\",\n          stroke: color,\n          fill: color,\n          onClick: () => setExpanded(true),\n          style: {\n            cursor: breakdown === 'Other' && !isExpanded ? 'pointer' : null,\n          },}\n        )\n      );\n    });\n  };\n\n  const tooltipRenderer = ({\n    label,\n    payload = [],\n  }) => {\n    if (isInvalid({ label, payload })) return null;\n\n    const date =\n      typeof label === 'number'\n        ? DateTime.fromMillis(label)\n        : DateTime.fromISO(label);\n    const dateTitle = date.toUTC().toFormat(DEFAULT_DATE_FORMAT);\n    const items = payload.map(p => ({\n      label: p.dataKey ,\n      value: formatGraphValue(p.value ),\n      fill: p.fill,\n    }));\n    const expandText = (\n      React.createElement(Box, null\n        , React.createElement(Divider, {\n          style: {\n            backgroundColor: emphasize(theme.palette.divider, 1),\n            margin: '10px 0',\n          },}\n        )\n        , React.createElement(Box, { display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\",}\n          , React.createElement(FullScreenIcon, null )\n          , React.createElement(Typography, null, \"Click to expand\"  )\n        )\n      )\n    );\n    return (\n      React.createElement(Tooltip, { title: dateTitle,}\n        , items.reverse().map((item, index) => (\n          React.createElement(TooltipItem, { key: `${item.label}-${index}`, item: item,} )\n        ))\n        , canExpand && !isExpanded ? expandText : null\n      )\n    );\n  };\n\n  const options = {\n    previousName: formatPeriod(duration, lastCompleteBillingDate, false),\n    currentName: formatPeriod(duration, lastCompleteBillingDate, true),\n    hideMarker: true,\n  };\n\n  return (\n    React.createElement(Box, { display: \"flex\", flexDirection: \"column\",}\n      , React.createElement(Box, { display: \"flex\", flexDirection: \"row\",}\n        , React.createElement(BarChartLegend, {\n          costStart: previousPeriodTotal,\n          costEnd: currentPeriodTotal,\n          options: options,}\n        )\n      )\n      , React.createElement(ResponsiveContainer, {\n        width: classes.container.width,\n        height: classes.container.height,}\n      \n        , React.createElement(AreaChart, {\n          data: chartData,\n          margin: {\n            top: 16,\n            right: 30,\n            bottom: 40,\n          },}\n        \n          , React.createElement(CartesianGrid, { stroke: classes.cartesianGrid.stroke,} )\n          , React.createElement(XAxis, {\n            dataKey: \"date\",\n            domain: ['dataMin', 'dataMax'],\n            tickFormatter: overviewGraphTickFormatter,\n            tickCount: 6,\n            type: \"number\",\n            stroke: classes.axis.fill,}\n          )\n          , React.createElement(YAxis, {\n            domain: [() => 0, 'dataMax'],\n            tick: { fill: classes.axis.fill },\n            tickFormatter: formatGraphValue,\n            width: classes.yAxis.width,}\n          )\n          , renderAreas()\n          , React.createElement(RechartsTooltip, { content: tooltipRenderer, animationDuration: 100,} )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { Box, Typography } from '@material-ui/core';\n\n\n\n\n\n\nexport const CostOverviewHeader = ({\n  title,\n  subtitle,\n  children,\n}) => (\n  React.createElement(Box, {\n    mt: 2,\n    ml: 1,\n    mb: 1,\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",}\n  \n    , React.createElement(Box, { minHeight: 40, paddingRight: 5,}\n      , React.createElement(Typography, { variant: \"h5\", gutterBottom: true,}\n        , title\n      )\n      , !!subtitle && (\n        React.createElement(Typography, { variant: \"subtitle2\", color: \"textSecondary\", component: \"div\",}\n          , subtitle\n        )\n      )\n    )\n    , React.createElement(Box, { minHeight: 40, maxHeight: 60, display: \"flex\",}\n      , children\n    )\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport {\n  Box,\n  capitalize,\n  Card,\n  CardContent,\n  Divider,\n  Tab,\n  Tabs,\n  useTheme,\n} from '@material-ui/core';\nimport { CostOverviewChart } from './CostOverviewChart';\nimport { CostOverviewBreakdownChart } from './CostOverviewBreakdownChart';\nimport { CostOverviewHeader } from './CostOverviewHeader';\nimport { MetricSelect } from '../MetricSelect';\nimport { PeriodSelect } from '../PeriodSelect';\nimport { useConfig, useFilters } from '../../hooks';\nimport { mapFiltersToProps } from './selector';\nimport { DefaultNavigation } from '../../utils/navigation';\nimport { findAlways } from '../../utils/assert';\n\nimport { useOverviewTabsStyles } from '../../utils/styles';\nimport { ScrollAnchor } from '../../utils/scroll';\n\n\n\n\n\n\nexport const CostOverviewCard = ({\n  dailyCostData,\n  metricData,\n}) => {\n  const theme = useTheme();\n  const styles = useOverviewTabsStyles(theme);\n  const config = useConfig();\n  const [tabIndex, setTabIndex] = useState(0);\n  const { setDuration, setProject, setMetric, ...filters } =\n    useFilters(mapFiltersToProps);\n\n  // Reset tabIndex if breakdowns available change\n  useEffect(() => {\n    // Intentionally off-by-one to account for the overview tab\n    const lastIndex = Object.keys(dailyCostData.groupedCosts ?? {}).length;\n    if (tabIndex > lastIndex) {\n      setTabIndex(0);\n    }\n  }, [dailyCostData, tabIndex, setTabIndex]);\n\n  const metric = filters.metric\n    ? findAlways(config.metrics, m => m.kind === filters.metric)\n    : null;\n\n  const breakdownTabs = Object.keys(dailyCostData.groupedCosts ?? {}).map(\n    key => ({\n      id: key,\n      label: `Breakdown by ${key}`,\n      title: `Cloud Cost By ${capitalize(key)}`,\n    }),\n  );\n  const tabs = [\n    { id: 'overview', label: 'Total cost', title: 'Cloud Cost' },\n  ].concat(breakdownTabs);\n  // tabIndex can temporarily be invalid while the useEffect above processes\n  const safeTabIndex = tabIndex > tabs.length - 1 ? 0 : tabIndex;\n\n  const OverviewTabs = () => {\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement(Tabs, {\n          indicatorColor: \"primary\",\n          onChange: (_, index) => setTabIndex(index),\n          value: safeTabIndex,}\n        \n          , tabs.map((tab, index) => (\n            React.createElement(Tab, {\n              className: styles.default,\n              label: tab.label,\n              key: tab.id,\n              value: index,\n              classes: { selected: styles.selected },}\n            )\n          ))\n        )\n      )\n    );\n  };\n\n  // Metrics can only be selected on the total cost graph\n  const showMetricSelect = config.metrics.length && safeTabIndex === 0;\n\n  return (\n    React.createElement(Card, { style: { position: 'relative', overflow: 'visible' },}\n      , React.createElement(ScrollAnchor, { id: DefaultNavigation.CostOverviewCard,} )\n      , React.createElement(CardContent, null\n        , dailyCostData.groupedCosts && React.createElement(OverviewTabs, null )\n        , React.createElement(CostOverviewHeader, { title: tabs[safeTabIndex].title,}\n          , React.createElement(PeriodSelect, { duration: filters.duration, onSelect: setDuration,} )\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(Box, { ml: 2, my: 1, display: \"flex\", flexDirection: \"column\",}\n          , safeTabIndex === 0 ? (\n            React.createElement(CostOverviewChart, {\n              dailyCostData: dailyCostData,\n              metric: metric,\n              metricData: metricData,}\n            )\n          ) : (\n            React.createElement(CostOverviewBreakdownChart, {\n              costBreakdown: dailyCostData.groupedCosts[tabs[safeTabIndex].id],}\n            )\n          )\n        )\n        , React.createElement(Box, { display: \"flex\", justifyContent: \"flex-end\", alignItems: \"center\",}\n          , showMetricSelect && (\n            React.createElement(MetricSelect, {\n              metric: filters.metric,\n              metrics: config.metrics,\n              onSelect: setMetric,}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  InputLabel,\n  FormControl,\n  MenuItem,\n  Select,\n\n} from '@material-ui/core';\n\nimport { findAlways } from '../../utils/assert';\nimport { useSelectStyles as useStyles } from '../../utils/styles';\n\nconst NULL_VALUE = 'engineers';\n\n\n\n\n\n\n\nexport const CurrencySelect = ({\n  currency,\n  currencies,\n  onSelect,\n}) => {\n  const classes = useStyles();\n\n  const getOption = (value) => {\n    const kind = (value === NULL_VALUE ? null : value) ;\n    return findAlways(currencies, c => c.kind === kind);\n  };\n\n  const handleOnChange = e => {\n    const option = getOption(e.target.value);\n    onSelect(option);\n  };\n\n  const renderValue = value => {\n    const option = getOption(value);\n    return React.createElement('b', null, option.label);\n  };\n\n  return (\n    React.createElement(FormControl, { variant: \"outlined\",}\n      , React.createElement(InputLabel, { shrink: true,}, \"Convert to:\" )\n      , React.createElement(Select, {\n        className: classes.select,\n        variant: \"outlined\",\n        labelWidth: 100,\n        onChange: handleOnChange,\n        value: currency.kind || NULL_VALUE,\n        renderValue: renderValue,}\n      \n        , currencies.map((c) => (\n          React.createElement(MenuItem, {\n            className: classes.menuItem,\n            key: c.kind || NULL_VALUE,\n            value: c.kind || NULL_VALUE,}\n          \n            , React.createElement('span', { role: \"img\", 'aria-label': c.label,}\n              , c.label\n            )\n          )\n        ))\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { AlertInstructionsLayout } from '../AlertInstructionsLayout';\nimport { CodeSnippet, Link } from '@backstage/core-components';\n\nexport const LabelDataflowInstructionsPage = () => {\n  return (\n    React.createElement(AlertInstructionsLayout, { title: \"Investigating Growth\" ,}\n      , React.createElement(Typography, { variant: \"h1\",}, \"Labeling Dataflow Jobs\"  )\n      , React.createElement(Typography, { paragraph: true,}, \"Labels in Google Cloud Platform are key-value pairs that can be added to most types of cloud resources. Since these labels are also exported in billing data, adding labels allows a granular breakdown of cloud cost by software entity.\"\n\n\n\n\n      )\n      , React.createElement(Typography, { paragraph: true,}, \"In Cloud Dataflow, labels can be added to a job either programmatically or via the command-line when launching a job. Note that GCP has\"\n\n                   , ' '\n        , React.createElement(Link, { to: \"https://cloud.google.com/compute/docs/labeling-resources#restrictions\",}, \"restrictions\"\n\n        ), ' ', \"on the length and characters that can be used in labels.\"\n\n      )\n      , React.createElement(Typography, { paragraph: true,}, \"Labels are not retroactive, so cost tracking is only possible from when the labels are first added to a Dataflow job.\"\n\n\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"DataflowPipelineOptions\")\n        , React.createElement(Typography, { paragraph: true,}, \"Dataflow jobs using Beam's\"\n             , ' '\n          , React.createElement(Link, { to: \"https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/runners/dataflow/options/DataflowPipelineOptions.html\",}, \"DataflowPipelineOptions\"\n\n          ), ' ', \"directly can use the \"\n              , React.createElement('b', null, \"setLabels\"), \" function to add one or more labels:\"\n\n          , React.createElement(CodeSnippet, {\n            language: \"java\",\n            text: `private DataflowPipelineOptions options = PipelineOptionsFactory.fromArgs(args).as(DataflowPipelineOptionsImpl.class); \noptions.setLabels(ImmutableMap.of(\"job-id\", \"my-dataflow-job\"));`,}\n          )\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"Dataflow jobs using Scio can similarly set options on the ScioContext:\"\n\n          , React.createElement(CodeSnippet, {\n            language: \"scala\",\n            text: `val (sc: ScioContext, args: Args) = ContextAndArgs(cmdLineArgs)\nsc.optionsAs[DataflowPipelineOptions].setLabels(Map(\"job-id\" -> \"my-dataflow-job\").asJava)`,}\n          )\n        )\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"Command-line\")\n        , React.createElement(Typography, { paragraph: true,}, \"Dataflow jobs launched from the command-line can add labels as an argument:\"\n\n\n          , React.createElement(CodeSnippet, {\n            language: \"shell\",\n            text: `--labels={\"job-id\": \"my-dataflow-job\", \"date-argument\": \"2020-09-16\"}`,}\n          )\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"For more information on specifying options, see the\"\n                 , ' '\n          , React.createElement(Link, { to: \"https://cloud.google.com/dataflow/docs/guides/specifying-exec-params\",}, \"Dataflow documentation\"\n\n          ), ' ', \"or\"\n          , ' '\n          , React.createElement(Link, { to: \"https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html\",}, \"Scio Scaladoc\"\n\n          ), \".\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Box, Typography, Tooltip } from '@material-ui/core';\nimport LensIcon from '@material-ui/icons/Lens';\nimport HelpOutlineOutlinedIcon from '@material-ui/icons/HelpOutlineOutlined';\nimport { useCostGrowthLegendStyles } from '../../utils/styles';\n\n\n\n\n\n\n\nexport const LegendItem = ({\n  title,\n  tooltipText,\n  markerColor,\n  children,\n}) => {\n  const classes = useCostGrowthLegendStyles();\n  return (\n    React.createElement(Box, { display: \"flex\", flexDirection: \"column\",}\n      , React.createElement(Box, {\n        minHeight: 25,\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",}\n      \n        , markerColor && (\n          React.createElement('div', { className: classes.marker,}\n            , React.createElement(LensIcon, { style: { fontSize: '1em', fill: markerColor },} )\n          )\n        )\n        , React.createElement(Typography, { className: classes.title, variant: \"overline\",}\n          , title\n        )\n        , tooltipText && (\n          React.createElement(Tooltip, {\n            classes: { tooltip: classes.tooltip },\n            title: \n              React.createElement(Typography, { className: classes.tooltipText,}\n                , tooltipText\n              )\n            ,\n            placement: \"top-start\",}\n          \n            , React.createElement('span', { role: \"img\", 'aria-label': \"help\", className: classes.helpIcon,}\n              , React.createElement(HelpOutlineOutlinedIcon, { fontSize: \"small\",} )\n            )\n          )\n        )\n      )\n      , React.createElement(Box, { marginLeft: markerColor ? '1.5em' : 0,}\n        , React.createElement(Typography, { className: classes.h5, variant: \"h5\",}\n          , children\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { InputLabel, FormControl, Select, MenuItem } from '@material-ui/core';\n\nimport { useSelectStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\nexport const MetricSelect = ({\n  metric,\n  metrics,\n  onSelect,\n}) => {\n  const classes = useStyles();\n\n  function onChange(e) {\n    if (e.target.value === 'none') {\n      onSelect(null);\n    } else {\n      onSelect(e.target.value );\n    }\n  }\n\n  return (\n    React.createElement(FormControl, { variant: \"outlined\",}\n      , React.createElement(InputLabel, { shrink: true, id: \"metric-select-label\",}, \"Compare to:\"\n\n      )\n      , React.createElement(Select, {\n        id: \"metric-select\",\n        labelId: \"metric-select-label\",\n        labelWidth: 100,\n        className: classes.select,\n        value: metric ?? 'none',\n        onChange: onChange,}\n      \n        , React.createElement(MenuItem, { className: classes.menuItem, key: \"none\", value: \"none\",}\n          , React.createElement('em', null, \"None\")\n        )\n        , metrics.map((m) => (\n          React.createElement(MenuItem, { className: classes.menuItem, key: m.kind, value: m.kind,}\n            , React.createElement('b', null, m.name)\n          )\n        ))\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { MenuItem, Select, } from '@material-ui/core';\nimport { Duration } from '../../types';\nimport { formatLastTwoLookaheadQuarters } from '../../utils/formatters';\nimport { findAlways } from '../../utils/assert';\nimport { useSelectStyles as useStyles } from '../../utils/styles';\nimport { useLastCompleteBillingDate } from '../../hooks';\n\n\n\n\n\n\nexport function getDefaultOptions(\n  lastCompleteBillingDate,\n) {\n  return [\n    {\n      value: Duration.P90D,\n      label: 'Past 6 Months',\n    },\n    {\n      value: Duration.P30D,\n      label: 'Past 60 Days',\n    },\n    {\n      value: Duration.P3M,\n      label: formatLastTwoLookaheadQuarters(lastCompleteBillingDate),\n    },\n  ];\n}\n\n\n\n\n\n\n\nexport const PeriodSelect = ({\n  duration,\n  onSelect,\n  options,\n}) => {\n  const classes = useStyles();\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n  const optionsOrDefault =\n    options ?? getDefaultOptions(lastCompleteBillingDate);\n\n  const handleOnChange = e => {\n    onSelect(e.target.value );\n  };\n\n  const renderValue = value => {\n    const option = findAlways(optionsOrDefault, o => o.value === value);\n    return React.createElement('b', null, option.label);\n  };\n\n  return (\n    React.createElement(Select, {\n      className: classes.select,\n      variant: \"outlined\",\n      onChange: handleOnChange,\n      value: duration,\n      renderValue: renderValue,\n      'data-testid': \"period-select\",}\n    \n      , optionsOrDefault.map(option => (\n        React.createElement(MenuItem, {\n          className: classes.menuItem,\n          key: option.value,\n          value: option.value,\n          'data-testid': `period-select-option-${option.value}`,}\n        \n          , option.label\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, CircularProgress, Collapse } from '@material-ui/core';\nimport { ProductInsightsCard } from './ProductInsightsCard';\n\n\n\n\n\n\n\n\nexport const ProductInsightsCardList = ({\n  initialStates,\n  onSelectAsync,\n}) => {\n  if (!initialStates.length) {\n    return (\n      React.createElement(Box, { display: \"flex\", justifyContent: \"space-around\", alignItems: \"center\",}\n        , React.createElement(CircularProgress, null )\n      )\n    );\n  }\n\n  return (\n    React.createElement(Collapse, { in: true, timeout: 1000,}\n      , initialStates.map(({ product, entity, duration }) => (\n        React.createElement(Box, {\n          key: product.kind,\n          mb: 6,\n          position: \"relative\",\n          'data-testid': `product-list-item-${product.kind}`,}\n        \n          , React.createElement(ProductInsightsCard, {\n            product: product,\n            onSelectAsync: onSelectAsync,\n            initialState: { entity: entity, duration: duration },}\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { default as Alert } from '@material-ui/lab/Alert';\nimport { costInsightsApiRef } from '../../api';\nimport { ProductInsightsCardList } from '../ProductInsightsCard/ProductInsightsCardList';\n\nimport { intervalsOf, DEFAULT_DURATION } from '../../utils/duration';\nimport {\n  DefaultLoadingAction,\n  initialStatesOf,\n  settledResponseOf,\n\n} from '../../utils/loading';\nimport { totalAggregationSort } from '../../utils/sort';\nimport {\n  useLoading,\n  useLastCompleteBillingDate,\n\n} from '../../hooks';\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\nconst mapLoadingToProps =\n  ({ dispatch }) =>\n  (isLoading) =>\n    dispatch({ [DefaultLoadingAction.CostInsightsProducts]: isLoading });\n\n\n\n\n\n\n\n\nexport const ProductInsights = ({\n  group,\n  project,\n  products,\n  onLoaded,\n}) => {\n  const client = useApi(costInsightsApiRef);\n  const onceRef = useRef(false);\n  const [initialStates, setStates] = useState([]);\n  const [error, setError] = useState(null);\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n  const dispatchLoading = useLoading(mapLoadingToProps);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  // See @CostInsightsPage\n  const dispatchLoadingProducts = useCallback(dispatchLoading, []);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const onSelectAsyncMemo = useCallback(\n    async function onSelectAsync(\n      product,\n      duration,\n    ) {\n      return client.getProductInsights({\n        group: group,\n        project: project,\n        product: product.kind,\n        intervals: intervalsOf(duration, lastCompleteBillingDate),\n      });\n    },\n    [client, group, project, lastCompleteBillingDate],\n  );\n\n  useEffect(() => {\n    async function getAllProductInsights() {\n      try {\n        dispatchLoadingProducts(true);\n        const responses = await Promise.allSettled(\n          products.map(product =>\n            client.getProductInsights({\n              group: group,\n              project: project,\n              product: product.kind,\n              intervals: intervalsOf(DEFAULT_DURATION, lastCompleteBillingDate),\n            }),\n          ),\n        ).then(settledResponseOf);\n\n        const updatedInitialStates = initialStatesOf(products, responses).sort(\n          totalAggregationSort,\n        );\n        setStates(updatedInitialStates);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingProducts(false);\n      }\n    }\n\n    getAllProductInsights();\n  }, [\n    client,\n    group,\n    project,\n    products,\n    lastCompleteBillingDate,\n    dispatchLoadingProducts,\n  ]);\n\n  useEffect(\n    function handleOnLoaded() {\n      if (onceRef.current) {\n        const initialProducts = initialStates.map(state => state.product);\n        onLoaded(initialProducts);\n      } else {\n        onceRef.current = true;\n      }\n    },\n    [initialStates, onLoaded],\n  );\n\n  return (\n    React.createElement(Box, { px: 3, py: 6,}\n      , React.createElement(Box, { mt: 0, mb: 5, textAlign: \"center\",}\n        , React.createElement(Typography, { variant: \"h4\", gutterBottom: true,}, \"Your team's product usage\"\n\n        )\n      )\n      , error ? (\n        React.createElement(Alert, { severity: \"error\",}, error.message)\n      ) : (\n        React.createElement(ProductInsightsCardList, {\n          initialStates: initialStates,\n          onSelectAsync: onSelectAsyncMemo,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport pluralize from 'pluralize';\nimport { Typography } from '@material-ui/core';\nimport { default as Alert } from '@material-ui/lab/Alert';\nimport { PeriodSelect } from '../PeriodSelect';\nimport { ProductInsightsChart } from './ProductInsightsChart';\nimport { useProductInsightsCardStyles as useStyles } from '../../utils/styles';\nimport { DefaultLoadingAction } from '../../utils/loading';\n\nimport {\n\n  useLastCompleteBillingDate,\n  useLoading,\n} from '../../hooks';\nimport { findAnyKey } from '../../utils/assert';\nimport { ScrollAnchor } from '../../utils/scroll';\nimport { InfoCard } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapLoadingToProps =\n  ({ dispatch }) =>\n  (isLoading) =>\n    dispatch({ [DefaultLoadingAction.CostInsightsProducts]: isLoading });\n\nexport const ProductInsightsCard = ({\n  initialState,\n  product,\n  onSelectAsync,\n}) => {\n  const classes = useStyles();\n  const mountedRef = useRef(false);\n  const [error, setError] = useState(null);\n  const dispatchLoading = useLoading(mapLoadingToProps);\n  const lastCompleteBillingDate = useLastCompleteBillingDate();\n  const [entity, setEntity] = useState(initialState.entity);\n  const [duration, setDuration] = useState(initialState.duration);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const dispatchLoadingProduct = useCallback(dispatchLoading, []);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  useEffect(() => {\n    async function handleOnSelectAsync() {\n      dispatchLoadingProduct(true);\n      try {\n        const e = await onSelectAsync(product, duration);\n        setEntity(e);\n      } catch (e) {\n        setEntity(null);\n        setError(e);\n      } finally {\n        dispatchLoadingProduct(false);\n      }\n    }\n\n    if (mountedRef.current) {\n      handleOnSelectAsync();\n    } else {\n      mountedRef.current = true;\n    }\n  }, [product, duration, onSelectAsync, dispatchLoadingProduct]);\n\n  // Only a single entities Record for the root product entity is supported\n  const entityKey = findAnyKey(entity?.entities);\n  const entities = entityKey ? entity.entities[entityKey] : [];\n\n  const subheader =\n    entityKey && entities.length\n      ? `${pluralize(entityKey, entities.length, true)}, sorted by cost`\n      : null;\n  const headerProps = {\n    classes: classes,\n    action: React.createElement(PeriodSelect, { duration: duration, onSelect: setDuration,} ),\n  };\n\n  if (error || !entity) {\n    return (\n      React.createElement(InfoCard, { title: product.name, headerProps: headerProps,}\n        , React.createElement(ScrollAnchor, { id: product.kind,} )\n        , React.createElement(Alert, { severity: \"error\",}\n          , error\n            ? error.message\n            : `Error: Could not fetch product insights for ${product.name}`\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(InfoCard, {\n      title: product.name,\n      subheader: subheader,\n      headerProps: headerProps,}\n    \n      , React.createElement(ScrollAnchor, { id: product.kind,} )\n      , entities.length ? (\n        React.createElement(ProductInsightsChart, {\n          entity: entity,\n          duration: duration,\n          billingDate: lastCompleteBillingDate,}\n        )\n      ) : (\n        React.createElement(Typography, null, \"There are no \"\n             , product.name, \" costs within this time frame for your team's projects.\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport { Typography } from '@material-ui/core';\nimport { costFormatter, formatChange } from '../../utils/formatters';\nimport { useEntityDialogStyles as useStyles } from '../../utils/styles';\nimport { CostGrowthIndicator } from '../CostGrowth';\n\nimport { Table, } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction createRenderer(col, classes) {\n  return function render(rowData) {\n    const row = rowData ;\n    const rowStyles = classnames(classes.row, {\n      [classes.rowTotal]: row.id === 'total',\n      [classes.colFirst]: col === 'label',\n      [classes.colLast]: col === 'change',\n    });\n\n    switch (col) {\n      case 'previous':\n      case 'current':\n        return (\n          React.createElement(Typography, { className: rowStyles,}\n            , costFormatter.format(row[col])\n          )\n        );\n      case 'change':\n        return (\n          React.createElement(CostGrowthIndicator, {\n            className: rowStyles,\n            change: row.change,\n            formatter: formatChange,}\n          )\n        );\n      default:\n        return React.createElement(Typography, { className: rowStyles,}, row.label);\n    }\n  };\n}\n\n// material-table does not support fixed rows. Override the sorting algorithm\n// to force Total row to bottom by default or when a user sort toggles a column.\nfunction createSorter(field) {\n  return function rowSort(data1, data2) {\n    const a = data1 ;\n    const b = data2 ;\n    if (a.id === 'total') return 1;\n    if (b.id === 'total') return 1;\n    if (field === 'label') return a.label.localeCompare(b.label);\n    if (field === 'change') {\n      if (formatChange(a[field]) === '' || formatChange(b[field]) === '-')\n        return 1;\n      if (formatChange(a[field]) === '-' || formatChange(b[field]) === '')\n        return -1;\n      return a[field].ratio - b[field].ratio;\n    }\n\n    return b.previous + b.current - (a.previous + a.current);\n  };\n}\n\n\n\n\n\n\n\nexport const ProductEntityTable = ({\n  entityLabel,\n  entity,\n  options,\n}) => {\n  const classes = useStyles();\n  const entities = entity.entities[entityLabel];\n\n  const data = Object.assign(\n    {\n      previousName: 'Previous',\n      currentName: 'Current',\n    },\n    options,\n  );\n\n  const firstColClasses = classnames(classes.column, classes.colFirst);\n  const lastColClasses = classnames(classes.column, classes.colLast);\n\n  const columns = [\n    {\n      field: 'label',\n      title: React.createElement(Typography, { className: firstColClasses,}, entityLabel),\n      render: createRenderer('label', classes),\n      customSort: createSorter('label'),\n      width: '33.33%',\n    },\n    {\n      field: 'previous',\n      title: (\n        React.createElement(Typography, { className: classes.column,}, data.previousName)\n      ),\n      align: 'right',\n      render: createRenderer('previous', classes),\n      customSort: createSorter('previous'),\n    },\n    {\n      field: 'current',\n      title: (\n        React.createElement(Typography, { className: classes.column,}, data.currentName)\n      ),\n      align: 'right',\n      render: createRenderer('current', classes),\n      customSort: createSorter('current'),\n    },\n    {\n      field: 'change',\n      title: React.createElement(Typography, { className: lastColClasses,}, \"Change\"),\n      align: 'right',\n      render: createRenderer('change', classes),\n      customSort: createSorter('change'),\n    },\n  ];\n\n  const rowData = entities\n    .map(e => ({\n      id: e.id || 'Unknown',\n      label: e.id || 'Unknown',\n      previous: e.aggregation[0],\n      current: e.aggregation[1],\n      change: e.change,\n    }))\n    .concat({\n      id: 'total',\n      label: 'Total',\n      previous: entity.aggregation[0],\n      current: entity.aggregation[1],\n      change: entity.change,\n    })\n    .sort(createSorter());\n\n  return (\n    React.createElement(Table, {\n      columns: columns,\n      data: rowData,\n      title: entity.id || 'Unlabeled',\n      options: {\n        paging: false,\n        search: false,\n        hideFilterIcons: true,\n      },}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Dialog, IconButton } from '@material-ui/core';\nimport { default as CloseButton } from '@material-ui/icons/Close';\nimport { useEntityDialogStyles as useStyles } from '../../utils/styles';\n\nimport {\n  ProductEntityTable,\n\n} from './ProductEntityTable';\nimport { findAlways } from '../../utils/assert';\nimport { HeaderTabs } from '@backstage/core-components';\n\n\n\n\n\n\n\n\nexport const ProductEntityDialog = ({\n  open,\n  entity,\n  options = {},\n  onClose,\n}) => {\n  const classes = useStyles();\n  const labels = Object.keys(entity.entities);\n  const [selectedLabel, setSelectedLabel] = useState(\n    findAlways(labels, _ => true),\n  );\n\n  const tabs = labels.map((label, index) => ({\n    id: index.toString(),\n    label: `Breakdown by ${label}`,\n  }));\n\n  return (\n    React.createElement(Dialog, { open: open, onClose: onClose, scroll: \"body\", fullWidth: true, maxWidth: \"lg\",}\n      , React.createElement(IconButton, { className: classes.closeButton, onClick: onClose,}\n        , React.createElement(CloseButton, null )\n      )\n      , React.createElement(HeaderTabs, {\n        tabs: tabs,\n        onChange: index => setSelectedLabel(labels[index]),}\n      )\n      , React.createElement(ProductEntityTable, {\n        entityLabel: selectedLabel,\n        entity: entity,\n        options: options,}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo, useState } from 'react';\n\n\n\n\n\nimport pluralize from 'pluralize';\nimport { Box, Typography } from '@material-ui/core';\nimport { default as FullScreenIcon } from '@material-ui/icons/Fullscreen';\nimport { LegendItem } from '../LegendItem';\nimport { ProductEntityDialog } from './ProductEntityDialog';\nimport { CostGrowth, CostGrowthIndicator } from '../CostGrowth';\nimport {\n  BarChart,\n  BarChartLegend,\n  BarChartTooltip,\n  BarChartTooltipItem,\n\n} from '../BarChart';\nimport {\n  findAlways,\n  notEmpty,\n  isUndefined,\n  findAnyKey,\n  assertAlways,\n} from '../../utils/assert';\nimport { formatPeriod, formatChange } from '../../utils/formatters';\nimport {\n  titleOf,\n  tooltipItemOf,\n  resourceOf,\n  isInvalid,\n  isLabeled,\n  isUnlabeled,\n} from '../../utils/graphs';\nimport {\n  useProductInsightsChartStyles as useStyles,\n  useBarChartLayoutStyles as useLayoutStyles,\n} from '../../utils/styles';\n\nimport { choose } from '../../utils/change';\n\n\n\n\n\n\n\nexport const ProductInsightsChart = ({\n  billingDate,\n  entity,\n  duration,\n}) => {\n  const classes = useStyles();\n  const layoutClasses = useLayoutStyles();\n\n  // Only a single entities Record for the root product entity is supported\n  const entities = useMemo(() => {\n    const entityLabel = assertAlways(findAnyKey(entity.entities));\n    return entity.entities[entityLabel] ?? [];\n  }, [entity]);\n\n  const [activeLabel, setActive] = useState();\n  const [selectLabel, setSelected] = useState();\n  const isSelected = useMemo(() => !isUndefined(selectLabel), [selectLabel]);\n\n  const isClickable = useMemo(() => {\n    const breakdowns = Object.keys(\n      entities.find(e => e.id === activeLabel)?.entities ?? {},\n    );\n    return breakdowns.length > 0;\n  }, [entities, activeLabel]);\n\n  const costStart = entity.aggregation[0];\n  const costEnd = entity.aggregation[1];\n  const resources = entities.map(resourceOf);\n\n  const options = {\n    previousName: formatPeriod(duration, billingDate, false),\n    currentName: formatPeriod(duration, billingDate, true),\n  };\n\n  const onMouseMove = (\n    data,\n  ) => {\n    if (isLabeled(data)) {\n      setActive(data.activeLabel);\n    } else if (isUnlabeled(data)) {\n      setActive(null);\n    } else {\n      setActive(undefined);\n    }\n  };\n\n  const onClick = (data) => {\n    if (isLabeled(data)) {\n      setSelected(data.activeLabel);\n    } else if (isUnlabeled(data)) {\n      setSelected(null);\n    } else {\n      setSelected(undefined);\n    }\n  };\n\n  const renderProductInsightsTooltip = ({\n    label,\n    payload = [],\n  }) => {\n    /* Labels and payloads may be undefined or empty */\n    if (isInvalid({ label, payload })) return null;\n\n    /*\n     *  recharts coerces null values to strings\n     *  entity       -> resource       -> payload\n     *  { id: null } -> { name: null } -> { label: '' }\n     */\n    const id = label === '' ? null : label;\n\n    const title = titleOf(label);\n    const items = payload.map(tooltipItemOf).filter(notEmpty);\n\n    const activeEntity = findAlways(entities, e => e.id === id);\n    const breakdowns = Object.keys(activeEntity.entities);\n\n    if (breakdowns.length) {\n      const subtitle = breakdowns\n        .map(b => pluralize(b, activeEntity.entities[b].length, true))\n        .join(', ');\n      return (\n        React.createElement(BarChartTooltip, {\n          title: title,\n          subtitle: subtitle,\n          topRight: \n            !!activeEntity.change.ratio && (\n              React.createElement(CostGrowthIndicator, {\n                formatter: formatChange,\n                change: activeEntity.change,\n                className: classes.indicator,}\n              )\n            )\n          ,\n          actions: \n            React.createElement(Box, { className: classes.actions,}\n              , React.createElement(FullScreenIcon, null )\n              , React.createElement(Typography, null, \"Click for breakdown\"  )\n            )\n          ,}\n        \n          , items.map((item, index) => (\n            React.createElement(BarChartTooltipItem, { key: `${item.label}-${index}`, item: item,} )\n          ))\n        )\n      );\n    }\n\n    // If an entity doesn't have any sub-entities, there aren't any costs to break down.\n    return (\n      React.createElement(BarChartTooltip, {\n        title: title,\n        topRight: \n          !!activeEntity.change.ratio && (\n            React.createElement(CostGrowthIndicator, {\n              formatter: formatChange,\n              change: activeEntity.change,\n              className: classes.indicator,}\n            )\n          )\n        ,\n        content: \n          id\n            ? null\n            : \"This product has costs that are not labeled and therefore can't be attributed to a specific entity.\"\n        ,}\n      \n        , items.map((item, index) => (\n          React.createElement(BarChartTooltipItem, { key: `${item.label}-${index}`, item: item,} )\n        ))\n      )\n    );\n  };\n\n  const barChartProps = isClickable ? { onClick } : {};\n\n  return (\n    React.createElement(Box, { className: layoutClasses.wrapper,}\n      , React.createElement(BarChartLegend, { costStart: costStart, costEnd: costEnd, options: options,}\n        , React.createElement(LegendItem, {\n          title: choose(['Cost Savings', 'Cost Excess'], entity.change),}\n        \n          , React.createElement(CostGrowth, { change: entity.change, duration: duration,} )\n        )\n      )\n      , React.createElement(BarChart, {\n        resources: resources,\n        tooltip: renderProductInsightsTooltip,\n        onMouseMove: onMouseMove,\n        options: options,\n        ...barChartProps,}\n      )\n      , isSelected && entities.length && (\n        React.createElement(ProductEntityDialog, {\n          open: isSelected,\n          onClose: () => setSelected(undefined),\n          entity: findAlways(entities, e => e.id === selectLabel),\n          options: options,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Box } from '@material-ui/core';\nimport { BarChart, BarChartLegend, } from '../BarChart';\nimport { LegendItem } from '../LegendItem';\nimport { CostGrowth } from '../CostGrowth';\nimport { Duration, } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\nimport { resourceOf } from '../../utils/graphs';\n\n\n\n\n\nexport const ProjectGrowthAlertChart = ({\n  alert,\n}) => {\n  const classes = useStyles();\n\n  const costStart = alert.aggregation[0];\n  const costEnd = alert.aggregation[1];\n  const resourceData = alert.products.map(resourceOf);\n\n  const options = {\n    previousName: DateTime.fromFormat(alert.periodStart, \"yyyy-'Q'q\").toFormat(\n      \"'Q'q yyyy\",\n    ),\n    currentName: DateTime.fromFormat(alert.periodEnd, \"yyyy-'Q'q\").toFormat(\n      \"'Q'q yyyy\",\n    ),\n  };\n\n  return (\n    React.createElement(Box, { className: classes.wrapper,}\n      , React.createElement(BarChartLegend, { costStart: costStart, costEnd: costEnd, options: options,}\n        , React.createElement(LegendItem, { title: \"Cost Growth\" ,}\n          , React.createElement(CostGrowth, { change: alert.change, duration: Duration.P3M,} )\n        )\n      )\n      , React.createElement(BarChart, { resources: resourceData, options: options,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { ProjectGrowthAlertChart } from './ProjectGrowthAlertChart';\n\nimport { InfoCard } from '@backstage/core-components';\n\n\n\n\n\nexport const ProjectGrowthAlertCard = ({ alert }) => {\n  const subheader = `\n    ${pluralize('product', alert.products.length, true)}${\n    alert.products.length > 1 ? ', sorted by cost' : ''\n  }`;\n\n  return (\n    React.createElement(InfoCard, {\n      title: `Project growth for ${alert.project}`,\n      subheader: subheader,}\n    \n      , React.createElement(ProjectGrowthAlertChart, { alert: alert,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Box, Typography } from '@material-ui/core';\nimport { AlertInstructionsLayout } from '../AlertInstructionsLayout';\nimport { ProductInsightsChart } from '../ProductInsightsCard';\nimport {\n\n  DEFAULT_DATE_FORMAT,\n  Duration,\n\n\n\n} from '../../types';\nimport { ProjectGrowthAlert } from '../../alerts';\nimport { InfoCard } from '@backstage/core-components';\n\nconst today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n\nexport const ProjectGrowthInstructionsPage = () => {\n  const alertData = {\n    project: 'example-project',\n    periodStart: 'Q1 2020',\n    periodEnd: 'Q2 2020',\n    aggregation: [60000, 120000],\n    change: {\n      ratio: 1,\n      amount: 60000,\n    },\n    products: [\n      {\n        id: 'Compute Engine',\n        aggregation: [58000, 118000],\n      },\n      {\n        id: 'Cloud Dataflow',\n        aggregation: [1200, 1500],\n      },\n      {\n        id: 'Cloud Storage',\n        aggregation: [800, 500],\n      },\n    ],\n  };\n\n  const projectGrowthAlert = new ProjectGrowthAlert(alertData);\n\n  const product = {\n    kind: 'ComputeEngine',\n    name: 'Compute Engine',\n  };\n\n  const entity = {\n    id: 'example-id',\n    aggregation: [20_000, 60_000],\n    change: {\n      ratio: 3,\n      amount: 40_000,\n    },\n    entities: {\n      service: [\n        {\n          id: 'service-one',\n          aggregation: [18_200, 58_500],\n          entities: {},\n          change: { ratio: 2.21, amount: 40_300 },\n        },\n        {\n          id: 'service-two',\n          aggregation: [1200, 1300],\n          entities: {},\n          change: { ratio: 0.083, amount: 100 },\n        },\n        {\n          id: 'service-three',\n          aggregation: [600, 200],\n          entities: {},\n          change: { ratio: -0.666, amount: -400 },\n        },\n      ],\n    },\n  };\n\n  return (\n    React.createElement(AlertInstructionsLayout, { title: \"Investigating Growth\" ,}\n      , React.createElement(Typography, { variant: \"h1\",}, \"Investigating cloud cost growth\"   )\n      , React.createElement(Typography, { paragraph: true,}, \"Cost Insights shows an alert when costs for a particular billing entity, such as a GCP project, have grown at a rate faster than our alerting threshold. The responsible team should follow this guide to decide whether this warrants further investigation.\"\n\n\n\n\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"Is the growth expected?\"   )\n        , React.createElement(Typography, { paragraph: true,}, \"The first question to ask is whether growth is expected. Perhaps a new product has been deployed, or additional regions added for reliability.\"\n\n\n\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"Many services increase cost linearly with load. Has the demand increased? This may happen as you open new markets, or run marketing offers. Costs should be compared against a business metric, such as daily users, to normalize natural increases from business growth.\"\n\n\n\n\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"Seasonal variance may also cause cost growth; yearly campaigns, an increase in demand during certain times of year.\"\n\n\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"Cloud costs will often go up before they go down, in the case of migrations. Teams moving to new infrastructure may run in both the old and new environment during the migration.\"\n\n\n\n        )\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"Is the growth significant?\"   )\n        , React.createElement(Typography, { paragraph: true,}, \"Next, evaluate whether the growth is significant. This helps avoid premature optimization, where cost in engineering time is more than would be saved from the optimization over a reasonable time frame.\"\n\n\n\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"We recommend reframing the cost growth itself in terms of engineering time. How much engineering time, for an \"\n\n                 , React.createElement('i', null, \"average\"), \" fully-loaded engineer cost at the company, is being overspent each month? Compare this to expected engineering time for optimization to decide whether the optimization is worthwhile.\"\n\n\n\n        )\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"Identifying which cloud product contributed most\"\n\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"For projects meeting the alert threshold, Cost Insights shows a cost comparison of cloud products over the examined time period:\"\n\n\n        )\n        , React.createElement(Box, { mt: 2, mb: 2,}\n          , projectGrowthAlert.element\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"This allows you to quickly see which cloud products contributed to the growth in cloud costs.\"\n\n\n        )\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"Identifying the responsible workload\"\n\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"After identifying the cloud product, use the corresponding product panel in Cost Insights to find a particular workload (or \"\n\n                    , React.createElement('i', null, \"entity\"), \") that has grown in cost:\"\n\n        )\n        , React.createElement(Box, { mt: 2, mb: 2,}\n          , React.createElement(InfoCard, { title: product.name, subheader: \"3 entities, sorted by cost\"    ,}\n            , React.createElement(ProductInsightsChart, {\n              billingDate: today,\n              duration: Duration.P3M,\n              entity: entity,}\n            )\n          )\n        )\n        , React.createElement(Typography, { paragraph: true,}, \"From here, you can dig into commit history or deployment logs to find probable causes of an unexpected spike in cost.\"\n\n\n        )\n      )\n\n      , React.createElement(Box, { mt: 4,}\n        , React.createElement(Typography, { variant: \"h3\",}, \"Optimizing the workload\"  )\n        , React.createElement(Typography, { paragraph: true,}, \"Workload optimization varies between cloud products, but there are a few general optimization areas to consider:\"\n\n\n        )\n        , React.createElement(Typography, { variant: \"h5\",}, \"Retention\")\n        , React.createElement(Typography, { paragraph: true,}, \"Is the workload or storage necessary? Truly idle or unused resources can be cleaned up for immediate cost savings. For storage, how long do we need the data? Many cloud products support retention policies to automatically delete data after a certain time period.\"\n\n\n\n\n        )\n        , React.createElement(Typography, { variant: \"h5\",}, \"Efficiency\")\n        , React.createElement(Typography, { paragraph: true,}, \"Is the workload using cloud resources efficiently? For compute resources, do the utilization metrics look reasonable? Autoscaling infrastructure, such as Kubernetes, can run workloads more efficiently without compromising reliability.\"\n\n\n\n\n        )\n        , React.createElement(Typography, { variant: \"h5\",}, \"Lifecycle\")\n        , React.createElement(Typography, { paragraph: true,}, \"Is the workload using an optimal pricing model? Some cloud products offer better pricing for data that is accessed less frequently.\"\n\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { MenuItem, Select } from '@material-ui/core';\n\nimport { useSelectStyles as useStyles } from '../../utils/styles';\n\n\n\n\n\n\n\nexport const ProjectSelect = ({\n  project,\n  projects,\n  onSelect,\n}) => {\n  const classes = useStyles();\n\n  const projectOptions = projects\n    .filter(p => p.id)\n    .sort((a, b) =>\n      ((a.name ?? a.id) ).localeCompare((b.name ?? b.id) ),\n    );\n\n  const handleOnChange = (e) => {\n    onSelect(e.target.value );\n  };\n\n  const renderValue = (value) => {\n    const proj = value ;\n    const projectObj = projects.find(p => p.id === proj);\n    return (\n      React.createElement('b', { 'data-testid': `selected-${proj}`,}\n        , proj === 'all' ? 'All Projects' : projectObj?.name ?? proj\n      )\n    );\n  };\n\n  return (\n    React.createElement(Select, {\n      className: classes.select,\n      variant: \"outlined\",\n      value: project ?? 'all',\n      renderValue: renderValue,\n      onChange: handleOnChange,\n      'data-testid': \"project-filter-select\",}\n    \n      , [{ id: 'all' }, ...projectOptions].map(proj => (\n        React.createElement(MenuItem, {\n          className: `${classes.menuItem} compact`,\n          key: proj.id,\n          value: proj.id,\n          'data-testid': `option-${proj.id}`,}\n        \n          , proj.id === 'all' ? 'All Projects' : proj.name ?? proj.id\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { Box } from '@material-ui/core';\nimport { BarChart, BarChartLegend } from '../BarChart';\n\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\nimport { InfoCard } from '@backstage/core-components';\n\n\n\n\n\nexport const UnlabeledDataflowAlertCard = ({\n  alert,\n}) => {\n  const classes = useStyles();\n  const projects = pluralize('project', alert.projects.length, true);\n  const subheader = `\n    Showing costs from ${projects} with unlabeled Dataflow jobs in the last 30 days.\n  `;\n  const options = {\n    previousName: 'Unlabeled Cost',\n    currentName: 'Labeled Cost',\n  };\n\n  const resources = alert.projects.map(project => ({\n    name: project.id,\n    previous: project.unlabeledCost,\n    current: project.labeledCost,\n  }));\n\n  return (\n    React.createElement(InfoCard, { title: \"Label Dataflow\" , subheader: subheader,}\n      , React.createElement(Box, { className: classes.wrapper,}\n        , React.createElement(BarChartLegend, {\n          costStart: alert.unlabeledCost,\n          costEnd: alert.labeledCost,\n          options: options,}\n        )\n        , React.createElement(BarChart, { resources: resources, options: options,} )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography, Box, Grid, Container, Divider } from '@material-ui/core';\n\nexport const WhyCostsMatter = () => {\n  return (\n    React.createElement(Box, { mt: 10, mb: 4,}\n      , React.createElement(Container, { maxWidth: \"md\",}\n        , React.createElement(Box, { mt: 2, mb: 2,}\n          , React.createElement(Typography, { variant: \"h5\", align: \"center\", gutterBottom: true,}, \"Why cloud costs matter\"\n\n          )\n        )\n        , React.createElement(Grid, { container: true, alignContent: \"space-around\", spacing: 3, wrap: \"nowrap\",}\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Typography, { variant: \"h6\",}, \"Sustainability\"\n              , ' '\n              , React.createElement('span', { role: \"img\", 'aria-label': \"globe\",}, \"\"\n\n              )\n            )\n            , React.createElement(Typography, null, \"Reducing cloud usage improves our carbon footprint.\"\n\n            )\n          )\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Divider, { orientation: \"vertical\",} )\n          )\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Typography, { variant: \"h6\",}, \"Revenue\"\n              , ' '\n              , React.createElement('span', { role: \"img\", 'aria-label': \"money-with-wings\",}, \"\"\n\n              )\n            )\n            , React.createElement(Typography, null, \"Keeping cloud costs well-tuned prevents infrastructure from eating into revenue.\"\n\n\n            )\n          )\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Divider, { orientation: \"vertical\",} )\n          )\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Typography, { variant: \"h6\",}, \"Innovation\"\n              , ' '\n              , React.createElement('span', { role: \"img\", 'aria-label': \"medal\",}, \"\"\n\n              )\n            )\n            , React.createElement(Typography, null, \"The more we save, the more we can reinvest in speed and innovation.\"\n\n\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function validateMetrics(metrics) {\n  const defaults = metrics.filter(metric => metric.default);\n  if (defaults.length > 1) {\n    throw new Error(\n      `Only one default metric can be set at a time. Found ${defaults.length}`,\n    );\n  }\n}\n\nexport function validateCurrencies(currencies) {\n  const withoutKinds = currencies.filter(currency => currency.kind === null);\n  if (withoutKinds.length > 1) {\n    throw new Error(\n      `Only one currency can be without kind. Found ${withoutKinds.length}`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\n\n\nimport { getIcon } from '../utils/navigation';\nimport { validateCurrencies, validateMetrics } from '../utils/config';\nimport { defaultCurrencies } from '../utils/currency';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\n/*\n * Config schema 2021-08-05\n *\n * costInsights:\n *   engineerCost: 200000\n *   products:\n *     productA:\n *       name: Product A\n *       icon: storage\n *     productB:\n *       name: Product B\n *       icon: data\n *   metrics:\n *     metricA:\n *       name: Metric A\n *       default: true\n *     metricB:\n *       name: Metric B\n *   currencies:\n *     currencyA:\n *       label: Currency A\n *       unit: Unit A\n *     currencyB:\n *       label: Currency B\n *       kind: CURRENCY_B\n *       unit: Unit B\n *       prefix: B\n *       rate: 3.5\n */\n\n\n\n\n\n\n\n\n\nexport const ConfigContext = createContext(\n  undefined,\n);\n\nconst defaultState = {\n  metrics: [],\n  products: [],\n  icons: [],\n  engineerCost: 0,\n  currencies: defaultCurrencies,\n};\n\nexport const ConfigProvider = ({ children }) => {\n  const c = useApi(configApiRef);\n  const [config, setConfig] = useState(defaultState);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    function getProducts() {\n      const products = c.getConfig('costInsights.products');\n      return products.keys().map(key => ({\n        kind: key,\n        name: products.getString(`${key}.name`),\n        aggregation: [0, 0],\n      }));\n    }\n\n    function getMetrics() {\n      const metrics = c.getOptionalConfig('costInsights.metrics');\n      if (metrics) {\n        return metrics.keys().map(key => ({\n          kind: key,\n          name: metrics.getString(`${key}.name`),\n          default: metrics.getOptionalBoolean(`${key}.default`) ?? false,\n        }));\n      }\n\n      return [];\n    }\n\n    function getCurrencies() {\n      const currencies = c.getOptionalConfig('costInsights.currencies');\n      if (currencies) {\n        return currencies.keys().map(key => ({\n          label: currencies.getString(`${key}.label`),\n          unit: currencies.getString(`${key}.unit`),\n          kind: currencies.getOptionalString(`${key}.kind`) || null,\n          prefix: currencies.getOptionalString(`${key}.prefix`),\n          rate: currencies.getOptionalNumber(`${key}.rate`),\n        }));\n      }\n\n      return defaultCurrencies;\n    }\n\n    function getIcons() {\n      const products = c.getConfig('costInsights.products');\n      const keys = products.keys();\n\n      return keys.map(k => ({\n        kind: k,\n        component: getIcon(products.getOptionalString(`${k}.icon`)),\n      }));\n    }\n\n    function getEngineerCost() {\n      return c.getNumber('costInsights.engineerCost');\n    }\n\n    function getConfig() {\n      const products = getProducts();\n      const metrics = getMetrics();\n      const engineerCost = getEngineerCost();\n      const icons = getIcons();\n      const currencies = getCurrencies();\n\n      validateMetrics(metrics);\n      validateCurrencies(currencies);\n\n      setConfig(prevState => ({\n        ...prevState,\n        metrics,\n        products,\n        engineerCost,\n        icons,\n        currencies,\n      }));\n\n      setLoading(false);\n    }\n\n    getConfig();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (loading) {\n    return null;\n  }\n\n  return (\n    React.createElement(ConfigContext.Provider, { value: config,}, children)\n  );\n};\n\nexport function useConfig() {\n  const config = useContext(ConfigContext);\n  return config ? config : assertNever();\n}\n\nfunction assertNever() {\n  throw new Error('Cannot use useConfig outside of ConfigProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n\n\n  useState,\n  useContext,\n\n} from 'react';\n\nimport { useConfig } from './useConfig';\n\n\n\n\n\n\nexport const CurrencyContext = React.createContext\n\n(undefined);\n\nexport const CurrencyProvider = ({ children }) => {\n  const config = useConfig();\n  const currencies = config.currencies;\n  const engineers = currencies.find(currency => currency.kind === null);\n  const [currency, setCurrency] = useState(\n    engineers || currencies[0],\n  );\n  return (\n    React.createElement(CurrencyContext.Provider, { value: { currency, setCurrency },}\n      , children\n    )\n  );\n};\n\nexport function useCurrency() {\n  const context = useContext(CurrencyContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.currency, context.setCurrency];\n}\n\nfunction assertNever() {\n  throw Error('Cannot use useCurrency outside of CurrencyProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, } from '../types';\n\nexport function getDefaultPageFilters(groups) {\n  return {\n    group: groups.length ? groups[0].id : null,\n    project: null,\n    duration: Duration.P90D,\n    metric: null,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport qs from 'qs';\nimport * as yup from 'yup';\nimport { Duration, } from '../types';\nimport { getDefaultPageFilters } from '../utils/filters';\n\n\nconst schema = yup\n  .object()\n  .shape({\n    group: yup.string().nullable(),\n    project: yup.string().nullable(),\n  })\n  .required();\n\nexport const stringify = (queryParams) =>\n  qs.stringify(queryParams, { strictNullHandling: true });\n\nexport const parse = (queryString) =>\n  qs.parse(queryString, { ignoreQueryPrefix: true, strictNullHandling: true });\n\nexport const validate = (queryString) => {\n  return schema.validate(parse(queryString), {\n    stripUnknown: true,\n    strict: true,\n  }) ;\n};\n\nexport const getInitialPageState = (\n  groups,\n  queryParams = {},\n) => {\n  return {\n    ...getDefaultPageFilters(groups),\n    ...(queryParams.project ? { project: queryParams.project } : {}),\n    ...(queryParams.group ? { group: queryParams.group } : {}),\n  };\n};\n\nexport const getInitialProductState = (config) =>\n  config.products.map(product => ({\n    productType: product.kind,\n    duration: Duration.P30D,\n  }));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n\n\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Alert } from '@material-ui/lab';\n\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  stringify,\n  validate,\n  getInitialPageState,\n  getInitialProductState,\n} from '../utils/history';\nimport { useGroups } from './useGroups';\nimport { useConfig } from './useConfig';\n\n\n\n\n\n\n\n\n\n\nexport const FilterContext = React.createContext\n\n(undefined);\n\nexport const FilterProvider = ({ children }) => {\n  const config = useConfig();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const groups = useGroups();\n  const [error, setError] = useState(null);\n  const [pageFilters, setPageFilters] = useState(null);\n  const [productFilters, setProductFilters] =\n    useState(null);\n\n  useEffect(() => {\n    async function setPageFiltersFromLocation() {\n      try {\n        // strip extraneous parameters, validate and transform\n        const queryParams = await validate(location.search);\n        const defaultMetric = config.metrics.find(m => m.default)?.kind ?? null;\n\n        // Group or project parameters should override defaults\n        const initialPageState = getInitialPageState(groups, queryParams);\n        const initialProductState = getInitialProductState(config);\n\n        setProductFilters(initialProductState);\n        setPageFilters({ ...initialPageState, metric: defaultMetric });\n      } catch (e) {\n        setError(e);\n      }\n    }\n\n    setPageFiltersFromLocation();\n  }, [groups]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    function setLocationFromPageFilters(filters) {\n      const queryString = stringify({\n        group: filters.group,\n        ...(filters.project ? { project: filters.project } : {}),\n      });\n      // TODO Remove workaround once issue is resolved in react-router\n      // (https://github.com/ReactTraining/react-router/issues/7496)\n      // navigate({ ...location, search: queryString });\n      navigate({ ...location, search: `?${queryString}` });\n    }\n\n    if (pageFilters) {\n      setLocationFromPageFilters(pageFilters);\n    }\n  }, [pageFilters]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return React.createElement(Alert, { severity: \"error\",}, error.message);\n  }\n\n  // Wait for filters to load\n  if (!pageFilters || !productFilters) {\n    return null;\n  }\n\n  return (\n    React.createElement(FilterContext.Provider, {\n      value: { pageFilters, productFilters, setPageFilters, setProductFilters },}\n    \n      , children\n    )\n  );\n};\n\nexport function useFilters(mapFiltersToProps) {\n  const context = useContext(FilterContext);\n  return context ? mapFiltersToProps(context) : assertNever();\n}\n\nfunction assertNever() {\n  throw Error('Cannot use useFilters outside of FilterProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { costInsightsApiRef } from '../api';\nimport { useLoading } from './useLoading';\n\nimport { DefaultLoadingAction } from '../utils/loading';\nimport { useApi, identityApiRef } from '@backstage/core-plugin-api';\nimport { DEFAULT_NAMESPACE, parseEntityRef } from '@backstage/catalog-model';\n\n\n\n\n\nconst mapLoadingToProps = ({\n  dispatch,\n}) => ({\n  dispatchLoadingGroups: (isLoading) =>\n    dispatch({ [DefaultLoadingAction.UserGroups]: isLoading }),\n});\n\n\n\n\n\nexport const GroupsContext = React.createContext\n\n(undefined);\n\nexport const GroupsProvider = ({ children }) => {\n  const identityApi = useApi(identityApiRef);\n  const client = useApi(costInsightsApiRef);\n  const [error, setError] = useState(null);\n  const { dispatchLoadingGroups } = useLoading(mapLoadingToProps);\n\n  const [groups, setGroups] = useState(null);\n\n  useEffect(() => {\n    dispatchLoadingGroups(true);\n\n    async function getUserGroups() {\n      try {\n        const { userEntityRef } = await identityApi.getBackstageIdentity();\n        const { name: userId } = parseEntityRef(userEntityRef, {\n          defaultKind: 'User',\n          defaultNamespace: DEFAULT_NAMESPACE,\n        });\n        const g = await client.getUserGroups(userId);\n        setGroups(g);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingGroups(false);\n      }\n    }\n\n    getUserGroups();\n  }, [client]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return React.createElement(Alert, { severity: \"error\",}, error.message);\n  }\n\n  if (!groups) return null;\n\n  return (\n    React.createElement(GroupsContext.Provider, { value: { groups: groups },}\n      , children\n    )\n  );\n};\n\nexport function useGroups() {\n  const context = useContext(GroupsContext);\n  return context ? context.groups : assertNever();\n}\n\nfunction assertNever() {\n  throw Error('Cannot use useGroups outside of GroupsProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport * as yup from 'yup';\nimport { Alert } from '@material-ui/lab';\nimport { costInsightsApiRef } from '../api';\nimport { useLoading } from './useLoading';\nimport { DefaultLoadingAction } from '../utils/loading';\n\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\nconst mapLoadingToProps = ({\n  dispatch,\n}) => ({\n  dispatchLoadingBillingDate: (isLoading) =>\n    dispatch({ [DefaultLoadingAction.LastCompleteBillingDate]: isLoading }),\n});\n\n\n\n\n\nexport const BillingDateContext = React.createContext\n\n(undefined);\n\nexport const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\nconst dateFormatSchema = yup.string().matches(dateRegex, {\n  message:\n    'Unsupported billing date format: ${value}. Date should be in YYYY-MM-DD format.',\n  excludeEmptyString: true,\n});\n\nexport const BillingDateProvider = ({ children }) => {\n  const client = useApi(costInsightsApiRef);\n  const [error, setError] = useState(null);\n  const { dispatchLoadingBillingDate } = useLoading(mapLoadingToProps);\n\n  const [lastCompleteBillingDate, setLastCompeteBillingDate] =\n    useState(null);\n\n  useEffect(() => {\n    dispatchLoadingBillingDate(true);\n\n    async function getLastCompleteBillingDate() {\n      try {\n        const d = await client.getLastCompleteBillingDate();\n        const validDate = await dateFormatSchema.validate(d);\n        if (validDate) setLastCompeteBillingDate(validDate);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingBillingDate(false);\n      }\n    }\n\n    getLastCompleteBillingDate();\n  }, [client]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return React.createElement(Alert, { severity: \"error\",}, error.message);\n  }\n\n  if (!lastCompleteBillingDate) return null;\n\n  return (\n    React.createElement(BillingDateContext.Provider, {\n      value: \n        {\n          lastCompleteBillingDate: lastCompleteBillingDate,\n        } \n      ,}\n    \n      , children\n    )\n  );\n};\n\nexport function useLastCompleteBillingDate() {\n  const context = useContext(BillingDateContext);\n  return context ? context.lastCompleteBillingDate : assertNever();\n}\n\nfunction assertNever() {\n  throw Error(\n    'Cannot use useLastCompleteBillingDate outside of BillingDateProvider',\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n\n\n\n  useContext,\n  useEffect,\n  useReducer,\n  useState,\n} from 'react';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\n\nimport {\n  DefaultLoadingAction,\n  getDefaultState,\n  INITIAL_LOADING_ACTIONS,\n} from '../utils/loading';\nimport { useBackdropStyles as useStyles } from '../utils/styles';\n\n\n\n\n\n\n\n\n\nexport const LoadingContext = createContext(\n  undefined,\n);\n\nfunction reducer(prevState, action) {\n  return {\n    ...prevState,\n    ...action,\n  } ;\n}\n\nexport const LoadingProvider = ({ children }) => {\n  const classes = useStyles();\n  const actions = INITIAL_LOADING_ACTIONS;\n  const [state, dispatch] = useReducer(reducer, getDefaultState(actions));\n  const [isBackdropVisible, setBackdropVisible] = useState(false);\n\n  useEffect(() => {\n    function displayLoadingBackdrop() {\n      // Initial page loading is handled by progress bar\n      setBackdropVisible(\n        !state[DefaultLoadingAction.CostInsightsInitial] &&\n          Object.values(state).some(l => l),\n      );\n    }\n    displayLoadingBackdrop();\n  }, [state, setBackdropVisible]);\n\n  return (\n    React.createElement(LoadingContext.Provider, { value: { state, actions, dispatch },}\n      , children\n      , React.createElement(Backdrop, { open: isBackdropVisible, classes: classes,}\n        , React.createElement(CircularProgress, null )\n      )\n    )\n  );\n};\n\nexport function useLoading(mapLoadingToProps) {\n  const context = useContext(LoadingContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return mapLoadingToProps({\n    state: context.state,\n    actions: context.actions,\n    dispatch: context.dispatch,\n  });\n}\n\nfunction assertNever() {\n  throw Error('useLoading cannot be used outside of LoadingProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n\n\n  useState,\n  useContext,\n\n} from 'react';\n\n\n\n\n\n\n\n\n\nexport const ScrollContext = React.createContext\n\n(undefined);\n\nexport const ScrollProvider = ({ children }) => {\n  const [scroll, setScroll] = useState(null);\n  return (\n    React.createElement(ScrollContext.Provider, { value: { scroll, setScroll },}\n      , children\n    )\n  );\n};\n\nexport var ScrollType; (function (ScrollType) {\n  const AlertSummary = 'alert-status-summary'; ScrollType[\"AlertSummary\"] = AlertSummary;\n})(ScrollType || (ScrollType = {}));\n\nexport function useScroll() {\n  const context = useContext(ScrollContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.scroll, context.setScroll] ;\n}\n\nfunction assertNever() {\n  throw new Error(`Cannot use useScroll outside ScrollProvider`);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Time periods for cost comparison; slight abuse of ISO 8601 periods. We take P3M to mean\n * 'last completed quarter', and P30D/P90D to be '[month|quarter] relative to today'. So if\n * it's September 15, P3M represents costs for Q2 and P30D represents August 16 -\n * September 15.\n */\nexport var Duration; (function (Duration) {\n  const P7D = 'P7D'; Duration[\"P7D\"] = P7D;\n  const P30D = 'P30D'; Duration[\"P30D\"] = P30D;\n  const P90D = 'P90D'; Duration[\"P90D\"] = P90D;\n  const P3M = 'P3M'; Duration[\"P3M\"] = P3M;\n})(Duration || (Duration = {}));\n\nexport const DEFAULT_DATE_FORMAT = 'yyyy-LL-dd';\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Duration } from './Duration';\n\n\n/**\n * Generic alert type with required fields for display. The `element` field will be rendered in\n * the Cost Insights \"Action Items\" section. This should use data fetched in the CostInsightsApi\n * implementation to render an InfoCard or other visualization.\n *\n * The alert type exposes hooks which can be used to enable and access various events,\n * such as when a user dismisses or snoozes an alert. Default forms and buttons\n * will be rendered if a hook is defined.\n *\n * Each default form can be overridden with a custom component. It must be implemented using\n * React.forwardRef. See https://reactjs.org/docs/forwarding-refs\n *\n * Errors thrown within hooks will generate a snackbar error notification.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// TODO: Convert enum to literal\nexport var AlertStatus; (function (AlertStatus) {\n  const Snoozed = 'snoozed'; AlertStatus[\"Snoozed\"] = Snoozed;\n  const Accepted = 'accepted'; AlertStatus[\"Accepted\"] = Accepted;\n  const Dismissed = 'dismissed'; AlertStatus[\"Dismissed\"] = Dismissed;\n})(AlertStatus || (AlertStatus = {}));\n\n\n\n\n\n\n\n\n\n\n\n\nexport var AlertDismissReason; (function (AlertDismissReason) {\n  const Other = 'other'; AlertDismissReason[\"Other\"] = Other;\n  const Resolved = 'resolved'; AlertDismissReason[\"Resolved\"] = Resolved;\n  const Expected = 'expected'; AlertDismissReason[\"Expected\"] = Expected;\n  const Seasonal = 'seasonal'; AlertDismissReason[\"Seasonal\"] = Seasonal;\n  const Migration = 'migration'; AlertDismissReason[\"Migration\"] = Migration;\n  const NotApplicable = 'not-applicable'; AlertDismissReason[\"NotApplicable\"] = NotApplicable;\n})(AlertDismissReason || (AlertDismissReason = {}));\n\nexport const AlertDismissOptions = [\n  {\n    reason: AlertDismissReason.Resolved,\n    label: 'This action item is now resolved.',\n  },\n  {\n    reason: AlertDismissReason.Seasonal,\n    label: 'This is an expected increase at this time of year.',\n  },\n  {\n    reason: AlertDismissReason.Migration,\n    label: 'This increase is from a migration in process.',\n  },\n  {\n    reason: AlertDismissReason.Expected,\n    label: 'This is an expected increase due to our teams priorities.',\n  },\n  {\n    reason: AlertDismissReason.NotApplicable,\n    label: 'This action item doesnt make sense for my team.',\n  },\n  {\n    reason: AlertDismissReason.Other,\n    label: 'Other (please specify)',\n  },\n];\n\n\n\n\n\n\nexport const AlertSnoozeOptions = [\n  {\n    duration: Duration.P7D,\n    label: '1 Week',\n  },\n  {\n    duration: Duration.P30D,\n    label: '1 Month',\n  },\n  {\n    duration: Duration.P90D,\n    label: '1 Quarter',\n  },\n];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport var DataKey; (function (DataKey) {\n  const Previous = 'previous'; DataKey[\"Previous\"] = Previous;\n  const Current = 'current'; DataKey[\"Current\"] = Current;\n  const Name = 'name'; DataKey[\"Name\"] = Name;\n})(DataKey || (DataKey = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\n\nexport const EngineerThreshold = 0.5;\n\nexport var ChangeThreshold; (function (ChangeThreshold) {\n  const upper = 0.05; ChangeThreshold[ChangeThreshold[\"upper\"] = upper] = \"upper\";\n  const lower = -0.05; ChangeThreshold[ChangeThreshold[\"lower\"] = lower] = \"lower\";\n})(ChangeThreshold || (ChangeThreshold = {}));\n\nexport var GrowthType; (function (GrowthType) {\n  const Negligible = 0; GrowthType[GrowthType[\"Negligible\"] = Negligible] = \"Negligible\";\n  const Savings = Negligible + 1; GrowthType[GrowthType[\"Savings\"] = Savings] = \"Savings\";\n  const Excess = Savings + 1; GrowthType[GrowthType[\"Excess\"] = Excess] = \"Excess\";\n})(GrowthType || (GrowthType = {}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\nexport var CurrencyType; (function (CurrencyType) {\n  const USD = 'USD'; CurrencyType[\"USD\"] = USD;\n  const CarbonOffsetTons = 'CARBON_OFFSET_TONS'; CurrencyType[\"CarbonOffsetTons\"] = CarbonOffsetTons;\n  const Beers = 'BEERS'; CurrencyType[\"Beers\"] = Beers;\n  const IceCream = 'PINTS_OF_ICE_CREAM'; CurrencyType[\"IceCream\"] = IceCream;\n})(CurrencyType || (CurrencyType = {}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\nexport var IconType; (function (IconType) {\n  const Compute = 'compute'; IconType[\"Compute\"] = Compute;\n  const Data = 'data'; IconType[\"Data\"] = Data;\n  const Database = 'database'; IconType[\"Database\"] = Database;\n  const Storage = 'storage'; IconType[\"Storage\"] = Storage;\n  const Search = 'search'; IconType[\"Search\"] = Search;\n  const ML = 'ml'; IconType[\"ML\"] = ML;\n})(IconType || (IconType = {}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useState,\n  forwardRef,\n\n\n} from 'react';\nimport { Checkbox, FormControl, FormControlLabel } from '@material-ui/core';\n\n\n\n\nexport const AlertAcceptForm = forwardRef\n\n\n(({ onSubmit, disableSubmit }, ref) => {\n  const [checked, setChecked] = useState(false);\n\n  const onFormSubmit = e => {\n    e.preventDefault();\n    onSubmit(null);\n  };\n\n  const onChecked = (_, isChecked) => {\n    setChecked(isChecked);\n    disableSubmit(!isChecked);\n  };\n\n  return (\n    React.createElement('form', { ref: ref, onSubmit: onFormSubmit,}\n      , React.createElement(FormControl, { component: \"fieldset\", fullWidth: true,}\n        , React.createElement(FormControlLabel, {\n          label: \"My team can commit to making this change soon, or has already.\"           ,\n          value: checked,\n          control: \n            React.createElement(Checkbox, { color: \"primary\", checked: checked, onChange: onChecked,} )\n          ,}\n        )\n      )\n    )\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useEffect,\n  useState,\n  forwardRef,\n\n} from 'react';\nimport { DateTime } from 'luxon';\nimport {\n  Box,\n  FormControl,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  Typography,\n} from '@material-ui/core';\nimport {\n\n\n  Duration,\n  DEFAULT_DATE_FORMAT,\n\n\n  AlertSnoozeOptions,\n} from '../types';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\nimport { intervalsOf } from '../utils/duration';\n\n\n\nexport const AlertSnoozeForm = forwardRef\n\n\n(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [duration, setDuration] = useState(Duration.P7D);\n\n  useEffect(() => disableSubmit(false), [disableSubmit]);\n\n  const onFormSubmit = e => {\n    e.preventDefault();\n    if (duration) {\n      const repeatInterval = 1;\n      const today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n      onSubmit({\n        intervals: intervalsOf(duration, today, repeatInterval),\n      });\n    }\n  };\n\n  const onSnoozeDurationChange = (\n    _,\n    value,\n  ) => {\n    setDuration(value );\n  };\n\n  return (\n    React.createElement('form', { ref: ref, onSubmit: onFormSubmit,}\n      , React.createElement(FormControl, { component: \"fieldset\", fullWidth: true,}\n        , React.createElement(Typography, { color: \"textPrimary\",}\n          , React.createElement('b', null, \"For how long?\"  )\n        )\n        , React.createElement(Box, { mb: 1,}\n          , React.createElement(RadioGroup, {\n            name: \"snooze-alert-options\",\n            value: duration,\n            onChange: onSnoozeDurationChange,}\n          \n            , AlertSnoozeOptions.map(option => (\n              React.createElement(FormControlLabel, {\n                key: `snooze-alert-option-${option.duration}`,\n                label: option.label,\n                value: option.duration,\n                control: React.createElement(Radio, { className: classes.radio,} ),}\n              )\n            ))\n          )\n        )\n      )\n    )\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useEffect,\n  useState,\n  forwardRef,\n\n} from 'react';\nimport {\n  Box,\n  Collapse,\n  FormControl,\n  FormControlLabel,\n  TextField,\n  Typography,\n  Radio,\n  RadioGroup,\n} from '@material-ui/core';\nimport {\n\n\n  AlertDismissReason,\n  AlertDismissOptions,\n\n\n} from '../types';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\n\n\n\nexport const AlertDismissForm = forwardRef\n\n\n(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [other, setOther] = useState(null);\n  const [feedback, setFeedback] = useState(null);\n  const [reason, setReason] = useState(\n    AlertDismissReason.Resolved,\n  );\n\n  const onFormSubmit = e => {\n    e.preventDefault();\n    if (reason) {\n      onSubmit({\n        other: other,\n        reason: reason,\n        feedback: feedback,\n      });\n    }\n  };\n\n  const onReasonChange = (_, value) => {\n    if (other) {\n      setOther(null);\n    }\n    setReason(value );\n  };\n\n  const onOtherChange = (e) => {\n    return e.target.value\n      ? setOther(e.target.value )\n      : setOther(null);\n  };\n\n  const onFeedbackChange = (e) => {\n    return e.target.value\n      ? setFeedback(e.target.value )\n      : setFeedback(null);\n  };\n\n  useEffect(() => {\n    function validateDismissForm() {\n      if (reason === AlertDismissReason.Other) {\n        if (other) {\n          disableSubmit(false);\n        } else {\n          disableSubmit(true);\n        }\n      } else if (reason) {\n        disableSubmit(false);\n      } else {\n        disableSubmit(true);\n      }\n    }\n\n    validateDismissForm();\n  }, [reason, other, disableSubmit]);\n\n  return (\n    React.createElement('form', { ref: ref, onSubmit: onFormSubmit,}\n      , React.createElement(FormControl, { component: \"fieldset\", fullWidth: true,}\n        , React.createElement(Typography, { color: \"textPrimary\",}\n          , React.createElement('b', null, \"Reason for dismissing?\"  )\n        )\n        , React.createElement(Box, { mb: 1,}\n          , React.createElement(RadioGroup, {\n            name: \"dismiss-alert-reasons\",\n            value: reason,\n            onChange: onReasonChange,}\n          \n            , AlertDismissOptions.map(option => (\n              React.createElement(FormControlLabel, {\n                key: `dismiss-alert-option-${option.reason}`,\n                label: option.label,\n                value: option.reason,\n                control: React.createElement(Radio, { className: classes.radio,} ),}\n              )\n            ))\n          )\n          , React.createElement(Collapse, { in: reason === AlertDismissReason.Other,}\n            , React.createElement(Box, { ml: 4,}\n              , React.createElement(TextField, {\n                id: \"dismiss-alert-option-other\",\n                variant: \"outlined\",\n                multiline: true,\n                fullWidth: true,\n                rows: 4,\n                value: other ?? '',\n                onChange: onOtherChange,}\n              )\n            )\n          )\n        )\n        , React.createElement(Typography, { gutterBottom: true,}\n          , React.createElement('b', null, \"Any other feedback you can provide?\"     )\n        )\n        , React.createElement(TextField, {\n          id: \"dismiss-alert-feedback\",\n          variant: \"outlined\",\n          multiline: true,\n          rows: 4,\n          fullWidth: true,\n          value: feedback ?? '',\n          onChange: onFeedbackChange,}\n        )\n      )\n    )\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlertStatus, } from '../types';\nimport { AlertAcceptForm, AlertDismissForm, AlertSnoozeForm } from '../forms';\n\nconst createAlertHandler = (status) => (alert) =>\n  alert.status === status;\nexport const isAlertActive = (alert) => !hasProperty(alert, 'status');\nexport const isAlertSnoozed = createAlertHandler(AlertStatus.Snoozed);\nexport const isAlertAccepted = createAlertHandler(AlertStatus.Accepted);\nexport const isAlertDismissed = createAlertHandler(AlertStatus.Dismissed);\n\nconst createStatusHandler = (status) => (s) =>\n  s === status;\nexport const isStatusSnoozed = createStatusHandler(AlertStatus.Snoozed);\nexport const isStatusAccepted = createStatusHandler(AlertStatus.Accepted);\nexport const isStatusDismissed = createStatusHandler(AlertStatus.Dismissed);\n\nconst createAlertEventHandler =\n  (onEvent) =>\n  (alert) =>\n    hasProperty(alert, onEvent);\nexport const isSnoozeEnabled = createAlertEventHandler('onSnoozed');\nexport const isAcceptEnabled = createAlertEventHandler('onAccepted');\nexport const isDismissEnabled = createAlertEventHandler('onDismissed');\n\nconst createFormEnabledHandler =\n  (Form) =>\n  (alert) => {\n    if (!alert) return false;\n    if (alert[Form] === null) return false;\n    switch (Form) {\n      case 'SnoozeForm':\n        return isSnoozeEnabled(alert);\n      case 'AcceptForm':\n        return isAcceptEnabled(alert);\n      case 'DismissForm':\n        return isDismissEnabled(alert);\n      default:\n        return false;\n    }\n  };\nexport const isSnoozeFormEnabled = createFormEnabledHandler('SnoozeForm');\nexport const isAcceptFormEnabled = createFormEnabledHandler('AcceptForm');\nexport const isDismissFormEnabled = createFormEnabledHandler('DismissForm');\n\n/**\n * Utility for determining if a form is disabled.\n * When a form is disabled, the dialog button's type should convert from submit to button.\n * @param alert\n * @param status\n */\nexport const isFormDisabled = (\n  alert,\n  status,\n) => {\n  switch (status) {\n    case AlertStatus.Snoozed:\n      return alert?.SnoozeForm === null;\n    case AlertStatus.Accepted:\n      return alert?.AcceptForm === null;\n    case AlertStatus.Dismissed:\n      return alert?.DismissForm === null;\n    default:\n      return false;\n  }\n};\n\nexport function formOf(\n  alert,\n  status,\n) {\n  switch (status) {\n    case AlertStatus.Snoozed: {\n      const SnoozeForm = alert?.SnoozeForm ?? AlertSnoozeForm;\n      return isSnoozeFormEnabled(alert) ? SnoozeForm : null;\n    }\n    case AlertStatus.Accepted: {\n      const AcceptForm = alert?.AcceptForm ?? AlertAcceptForm;\n      return isAcceptFormEnabled(alert) ? AcceptForm : null;\n    }\n    case AlertStatus.Dismissed: {\n      const DismissForm = alert?.DismissForm ?? AlertDismissForm;\n      return isDismissFormEnabled(alert) ? DismissForm : null;\n    }\n    default:\n      return null;\n  }\n}\n\n/**\n * Utility for choosing from a fixed set of values for a given alert status.\n * @param status\n * @param values\n */\nexport function choose(\n  status,\n  values,\n  none,\n) {\n  switch (status) {\n    case AlertStatus.Snoozed:\n      return values[0];\n    case AlertStatus.Accepted:\n      return values[1];\n    case AlertStatus.Dismissed:\n      return values[2];\n    default:\n      return none;\n  }\n}\n\nexport function hasProperty(alert, prop) {\n  return prop in (alert ?? {});\n}\n\nexport const sumOfAllAlerts = (sum, alerts) =>\n  sum + alerts.length;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function notEmpty(\n  value,\n) {\n  return !isNull(value) && !isUndefined(value);\n}\n\nexport function isUndefined(value) {\n  return value === undefined;\n}\n\nexport function isNull(value) {\n  return value === null;\n}\n\n// Utility for exhaustiveness checking in switch statements\nexport function assertNever(x) {\n  throw new Error(`Exhaustiveness check failed: ${x}`);\n}\n\nexport function assertAlways(argument) {\n  if (argument === undefined) {\n    throw new TypeError(\n      'Expected to always find a value but received undefined',\n    );\n  }\n  return argument;\n}\n\n// Utility for working with static lists; asserts a value will always be found or\n// throws an error\nexport function findAlways(\n  collection,\n  callback,\n) {\n  return assertAlways(collection.find(callback));\n}\n\nexport function findAnyKey(\n  record,\n) {\n  return Object.keys(record ?? {}).find(_ => true);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n\n  ChangeThreshold,\n  EngineerThreshold,\n  GrowthType,\n\n\n\n} from '../types';\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport { inclusiveStartDateOf } from './duration';\nimport { notEmpty } from './assert';\n\n// Used for displaying status colors\nexport function growthOf(change) {\n  const exceedsEngineerThreshold = Math.abs(change.amount) >= EngineerThreshold;\n\n  if (notEmpty(change.ratio)) {\n    if (exceedsEngineerThreshold && change.ratio >= ChangeThreshold.upper) {\n      return GrowthType.Excess;\n    }\n\n    if (exceedsEngineerThreshold && change.ratio <= ChangeThreshold.lower) {\n      return GrowthType.Savings;\n    }\n  } else {\n    if (exceedsEngineerThreshold && change.amount > 0) return GrowthType.Excess;\n    if (exceedsEngineerThreshold && change.amount < 0)\n      return GrowthType.Savings;\n  }\n\n  return GrowthType.Negligible;\n}\n\n// Used by <CostOverviewCard /> for displaying engineer totals\nexport function getComparedChange(\n  dailyCost,\n  metricData,\n  duration,\n  lastCompleteBillingDate, // YYYY-MM-DD,\n) {\n  const dailyCostRatio = dailyCost.change?.ratio;\n  const metricDataRatio = metricData.change?.ratio;\n  const previousPeriodTotal = getPreviousPeriodTotalCost(\n    dailyCost.aggregation,\n    duration,\n    lastCompleteBillingDate,\n  );\n\n  // if either ratio cannot be calculated, no compared ratio can be calculated\n  if (!notEmpty(dailyCostRatio) || !notEmpty(metricDataRatio)) {\n    return {\n      amount: previousPeriodTotal,\n    };\n  }\n\n  return {\n    ratio: dailyCostRatio - metricDataRatio,\n    amount: previousPeriodTotal * (dailyCostRatio - metricDataRatio),\n  };\n}\n\nexport function getPreviousPeriodTotalCost(\n  aggregation,\n  duration,\n  inclusiveEndDate,\n) {\n  const luxonDuration = LuxonDuration.fromISO(duration);\n  const startDate = inclusiveStartDateOf(duration, inclusiveEndDate);\n  const nextPeriodStart = DateTime.fromISO(startDate).plus(luxonDuration);\n  // Add up costs that incurred before the start of the next period.\n  return aggregation.reduce((acc, costByDate) => {\n    return DateTime.fromISO(costByDate.date) < nextPeriodStart\n      ? acc + costByDate.amount\n      : acc;\n  }, 0);\n}\n\nexport function choose(\n  [savings, excess],\n  change,\n) {\n  const isSavings = (change.ratio ?? change.amount) <= 0;\n  return isSavings ? savings : excess;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CurrencyType, Duration } from '../types';\nimport { assertNever } from '../utils/assert';\n\nexport const rateOf = (cost, duration) => {\n  switch (duration) {\n    case Duration.P30D:\n      return cost / 12;\n    case Duration.P7D:\n    case Duration.P90D:\n    case Duration.P3M:\n      return cost / 4;\n    default:\n      return assertNever(duration);\n  }\n};\n\nexport const defaultCurrencies = [\n  {\n    kind: null,\n    label: 'Engineers ',\n    unit: 'engineer',\n  },\n  {\n    kind: CurrencyType.USD,\n    label: 'US Dollars ',\n    unit: 'dollar',\n    prefix: '$',\n    rate: 1,\n  },\n  {\n    kind: CurrencyType.CarbonOffsetTons,\n    label: 'Carbon Offset Tons s',\n    unit: 'carbon offset ton',\n    rate: 3.5,\n  },\n  {\n    kind: CurrencyType.Beers,\n    label: 'Beers ',\n    unit: 'beer',\n    rate: 4.5,\n  },\n  {\n    kind: CurrencyType.IceCream,\n    label: 'Pints of Ice Cream ',\n    unit: 'ice cream pint',\n    rate: 5.5,\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport { Duration, DEFAULT_DATE_FORMAT } from '../types';\nimport { assertNever } from './assert';\n\nexport const DEFAULT_DURATION = Duration.P30D;\n\n/**\n * Derive the start date of a given period, assuming two repeating intervals.\n *\n * @param duration - see comment on Duration enum\n * @param inclusiveEndDate - from CostInsightsApi.getLastCompleteBillingDate\n */\nexport function inclusiveStartDateOf(\n  duration,\n  inclusiveEndDate,\n) {\n  switch (duration) {\n    case Duration.P7D:\n    case Duration.P30D:\n    case Duration.P90D:\n      return DateTime.fromISO(inclusiveEndDate)\n        .minus(\n          LuxonDuration.fromISO(duration).plus(LuxonDuration.fromISO(duration)),\n        )\n        .toFormat(DEFAULT_DATE_FORMAT);\n    case Duration.P3M:\n      return DateTime.fromISO(inclusiveEndDate)\n        .startOf('quarter')\n        .minus(\n          LuxonDuration.fromISO(duration).plus(LuxonDuration.fromISO(duration)),\n        )\n        .toFormat(DEFAULT_DATE_FORMAT);\n    default:\n      return assertNever(duration);\n  }\n}\n\nexport function exclusiveEndDateOf(\n  duration,\n  inclusiveEndDate,\n) {\n  switch (duration) {\n    case Duration.P7D:\n    case Duration.P30D:\n    case Duration.P90D:\n      return DateTime.fromISO(inclusiveEndDate)\n        .plus({ days: 1 })\n        .toFormat(DEFAULT_DATE_FORMAT);\n    case Duration.P3M:\n      return DateTime.fromISO(quarterEndDate(inclusiveEndDate))\n        .plus({ days: 1 })\n        .toFormat(DEFAULT_DATE_FORMAT);\n    default:\n      return assertNever(duration);\n  }\n}\n\nexport function inclusiveEndDateOf(\n  duration,\n  inclusiveEndDate,\n) {\n  return DateTime.fromISO(exclusiveEndDateOf(duration, inclusiveEndDate))\n    .minus({ days: 1 })\n    .toFormat(DEFAULT_DATE_FORMAT);\n}\n\n// https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\nexport function intervalsOf(\n  duration,\n  inclusiveEndDate,\n  repeating = 2,\n) {\n  return `R${repeating}/${duration}/${exclusiveEndDateOf(\n    duration,\n    inclusiveEndDate,\n  )}`;\n}\n\nexport function quarterEndDate(inclusiveEndDate) {\n  const endDate = DateTime.fromISO(inclusiveEndDate);\n  const endOfQuarter = endDate.endOf('quarter').toFormat(DEFAULT_DATE_FORMAT);\n  if (endOfQuarter === inclusiveEndDate) {\n    return endDate.toFormat(DEFAULT_DATE_FORMAT);\n  }\n  return endDate\n    .startOf('quarter')\n    .minus({ days: 1 })\n    .toFormat(DEFAULT_DATE_FORMAT);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport pluralize from 'pluralize';\nimport { Duration } from '../types';\nimport { inclusiveEndDateOf, inclusiveStartDateOf } from '../utils/duration';\nimport { notEmpty } from './assert';\n\n\n\n\n\n\nexport const costFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nexport const currencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n});\n\nexport const lengthyCurrencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0,\n  minimumSignificantDigits: 2,\n  maximumSignificantDigits: 2,\n});\n\nexport const numberFormatter = new Intl.NumberFormat('en-US', {\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n});\n\nexport const monthFormatter = new Intl.DateTimeFormat('en-US', {\n  timeZone: 'UTC',\n  month: 'long',\n  year: 'numeric',\n});\n\nexport const dateFormatter = new Intl.DateTimeFormat('en-US', {\n  timeZone: 'UTC',\n  day: 'numeric',\n  month: 'short',\n});\n\nexport const monthOf = (date) => {\n  return monthFormatter.format(Date.parse(date));\n};\n\nexport const quarterOf = (date) => {\n  // Supports formatting yyyy-LL-dd and yyyy-'Q'q returned in alerts\n  const d = DateTime.fromISO(date).isValid\n    ? DateTime.fromISO(date)\n    : DateTime.fromFormat(date, \"yyyy-'Q'q\");\n  return d.toFormat(\"'Q'q yyyy\");\n};\n\nexport function formatCurrency(amount, currency) {\n  const n = Math.round(amount);\n  const numString = numberFormatter.format(n);\n\n  return currency ? `${numString} ${pluralize(currency, n)}` : numString;\n}\n\nexport function formatChange(change) {\n  if (notEmpty(change.ratio)) {\n    return formatPercent(Math.abs(change.ratio));\n  }\n  return change.amount >= 0 ? '' : '-';\n}\n\nexport function formatPercent(n) {\n  // Number.toFixed shows scientific notation for extreme numbers\n  if (isNaN(n) || Math.abs(n) < 0.01) {\n    return '0%';\n  }\n\n  if (Math.abs(n) > 10) {\n    return `>1000%`;\n  }\n\n  return `${(n * 100).toFixed(0)}%`;\n}\n\nexport function formatLastTwoLookaheadQuarters(inclusiveEndDate) {\n  const start = DateTime.fromISO(\n    inclusiveStartDateOf(Duration.P3M, inclusiveEndDate),\n  ).toFormat(\"'Q'q yyyy\");\n  const end = DateTime.fromISO(\n    inclusiveEndDateOf(Duration.P3M, inclusiveEndDate),\n  ).toFormat(\"'Q'q yyyy\");\n  return `${start} vs ${end}`;\n}\n\nconst formatRelativePeriod = (\n  duration,\n  date,\n  isEndDate,\n) => {\n  const periodStart = isEndDate ? inclusiveStartDateOf(duration, date) : date;\n  const periodEnd = isEndDate ? date : inclusiveEndDateOf(duration, date);\n  const days = LuxonDuration.fromISO(duration).days;\n  if (![periodStart, periodEnd].includes(date)) {\n    throw new Error(`Invalid relative date ${date} for duration ${duration}`);\n  }\n  return date === periodStart ? `First ${days} Days` : `Last ${days} Days`;\n};\n\nexport function formatPeriod(\n  duration,\n  date,\n  isEndDate,\n) {\n  switch (duration) {\n    case Duration.P3M:\n      return quarterOf(\n        isEndDate\n          ? inclusiveEndDateOf(duration, date)\n          : inclusiveStartDateOf(duration, date),\n      );\n    default:\n      return formatRelativePeriod(duration, date, isEndDate);\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { DataKey, } from '../types';\nimport {\n  currencyFormatter,\n  dateFormatter,\n  lengthyCurrencyFormatter,\n} from './formatters';\n\nexport function formatGraphValue(value, format) {\n  if (format === 'number') {\n    return value.toLocaleString();\n  }\n\n  if (value < 1) {\n    return lengthyCurrencyFormatter.format(value);\n  }\n\n  return currencyFormatter.format(value);\n}\n\nexport const overviewGraphTickFormatter = (millis) =>\n  typeof millis === 'number' ? dateFormatter.format(millis) : millis;\n\nexport const tooltipItemOf = (payload) => {\n  const value =\n    typeof payload.value === 'number'\n      ? currencyFormatter.format(payload.value)\n      : (payload.value );\n  const fill = payload.fill ;\n\n  switch (payload.dataKey) {\n    case DataKey.Current:\n    case DataKey.Previous:\n      return {\n        label: payload.name,\n        value: value,\n        fill: fill,\n      };\n    default:\n      return null;\n  }\n};\n\nexport const resourceOf = (entity) => ({\n  name: entity.id,\n  previous: entity.aggregation[0],\n  current: entity.aggregation[1],\n});\n\nexport const titleOf = (label) => {\n  return label ? String(label) : 'Unlabeled';\n};\n\nexport const isInvalid = ({ label, payload }) => {\n  // null labels are empty strings, which are valid\n  return label === undefined || !payload || !payload.length;\n};\n\nexport const isLabeled = (data) => {\n  return data?.activeLabel && data?.activeLabel !== '';\n};\n\nexport const isUnlabeled = (\n  data,\n) => {\n  return data?.activeLabel === '';\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { DEFAULT_DURATION } from './duration';\n\n\n\n\n\n\n\nexport var DefaultLoadingAction; (function (DefaultLoadingAction) {\n  const UserGroups = 'user-groups'; DefaultLoadingAction[\"UserGroups\"] = UserGroups;\n  const LastCompleteBillingDate = 'billing-date'; DefaultLoadingAction[\"LastCompleteBillingDate\"] = LastCompleteBillingDate;\n  const CostInsightsInitial = 'cost-insights-initial'; DefaultLoadingAction[\"CostInsightsInitial\"] = CostInsightsInitial;\n  const CostInsightsPage = 'cost-insights-page'; DefaultLoadingAction[\"CostInsightsPage\"] = CostInsightsPage;\n  const CostInsightsProducts = 'cost-insights-products'; DefaultLoadingAction[\"CostInsightsProducts\"] = CostInsightsProducts;\n  const CostInsightsAlerts = 'cost-insights-alerts'; DefaultLoadingAction[\"CostInsightsAlerts\"] = CostInsightsAlerts;\n})(DefaultLoadingAction || (DefaultLoadingAction = {}));\n\nexport const INITIAL_LOADING_ACTIONS = [\n  DefaultLoadingAction.UserGroups,\n  DefaultLoadingAction.CostInsightsInitial,\n  DefaultLoadingAction.CostInsightsProducts,\n];\n\nexport const getDefaultState = (loadingActions) => {\n  return loadingActions.reduce(\n    (defaultState, action) => ({ ...defaultState, [action]: true }),\n    {},\n  );\n};\n\nexport const getResetState = (loadingActions) => {\n  return loadingActions.reduce(\n    (defaultState, action) => ({ ...defaultState, [action]: false }),\n    {},\n  );\n};\n\nexport const getResetStateWithoutInitial = (\n  loadingActions,\n) => {\n  return loadingActions.reduce((defaultState, action) => {\n    const loadingActionState = (INITIAL_LOADING_ACTIONS ).includes(\n      action,\n    )\n      ? false\n      : true;\n    return { ...defaultState, [action]: loadingActionState };\n  }, {});\n};\n\nexport const settledResponseOf = (\n  responses,\n) => {\n  return responses.map(response =>\n    response.status === 'fulfilled' ? response.value : null,\n  );\n};\n\nexport const initialStatesOf = (\n  products,\n  responses,\n) => {\n  return products.map((product, index) => ({\n    entity: responses[index],\n    product: product,\n    duration: DEFAULT_DURATION,\n  }));\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport MoneyIcon from '@material-ui/icons/MonetizationOn';\nimport ActionIcon from '@material-ui/icons/Whatshot';\nimport Settings from '@material-ui/icons/Settings';\nimport AccountTree from '@material-ui/icons/AccountTree';\nimport Storage from '@material-ui/icons/Storage';\nimport Search from '@material-ui/icons/Search';\nimport CloudQueue from '@material-ui/icons/CloudQueue';\nimport School from '@material-ui/icons/School';\nimport ViewHeadline from '@material-ui/icons/ViewHeadline';\nimport { IconType } from '../types';\n\nexport var DefaultNavigation; (function (DefaultNavigation) {\n  const CostOverviewCard = 'cost-overview-card'; DefaultNavigation[\"CostOverviewCard\"] = CostOverviewCard;\n  const AlertInsightsHeader = 'alert-insights-header'; DefaultNavigation[\"AlertInsightsHeader\"] = AlertInsightsHeader;\n})(DefaultNavigation || (DefaultNavigation = {}));\n\n\n\n\n\n\n\nexport const getDefaultNavigationItems = (alerts) => {\n  const items = [\n    {\n      navigation: DefaultNavigation.CostOverviewCard,\n      icon: React.createElement(MoneyIcon, null ),\n      title: 'Cost Overview',\n    },\n  ];\n  if (alerts > 0) {\n    items.push({\n      navigation: DefaultNavigation.AlertInsightsHeader,\n      icon: React.createElement(ActionIcon, null ),\n      title: 'Action Items',\n    });\n  }\n  return items;\n};\n\nexport function getIcon(icon) {\n  switch (icon) {\n    case IconType.Compute:\n      return React.createElement(Settings, null );\n    case IconType.Data:\n      return React.createElement(AccountTree, null );\n    case IconType.Database:\n      return React.createElement(ViewHeadline, null );\n    case IconType.Storage:\n      return React.createElement(Storage, null );\n    case IconType.Search:\n      return React.createElement(Search, null );\n    case IconType.ML:\n      return React.createElement(School, null );\n    default:\n      return React.createElement(CloudQueue, null );\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useEffect, useRef } from 'react';\nimport { useScroll } from '../hooks/useScroll';\n\n/*\n  Utility component use in conjunction with useScroll that allows scrollable components to control behavior and offset.\n  1. ScrollAnchor must be a direct child of a scrollable component.\n  2. ScrollAnchor's parent position must be relative. \n  3. ScrollAnchor's id must be unique.\n*/\n\n\n\n\n\n\n\nexport const ScrollAnchor = ({\n  id,\n  left = 0,\n  top = -20,\n  block = 'start',\n  inline = 'nearest',\n  behavior = 'smooth',\n}) => {\n  const divRef = useRef(null);\n  const [scroll, setScroll] = useScroll();\n\n  useEffect(() => {\n    function scrollIntoView() {\n      if (divRef.current && scroll === id) {\n        divRef.current.scrollIntoView({\n          block,\n          inline,\n          behavior,\n        });\n        setScroll(null);\n      }\n    }\n\n    scrollIntoView();\n  }, [scroll, setScroll, id, behavior, block, inline]);\n\n  return (\n    React.createElement('div', {\n      ref: divRef,\n      style: { position: 'absolute', height: 0, width: 0, top, left },\n      'data-testid': `scroll-test-${id}`,}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const aggregationSort = (\n  a,\n  b,\n) => a.date.localeCompare(b.date);\n\nexport const resourceSort = (a, b) =>\n  b.previous + b.current - (a.previous + a.current);\n\nexport function totalAggregationSort(a, b) {\n  const [prevA, currA] = a.entity?.aggregation ?? [0, 0];\n  const [prevB, currB] = b.entity?.aggregation ?? [0, 0];\n  return prevB + currB - (prevA + currA);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createStyles,\n  emphasize,\n  darken,\n  getLuminance,\n  lighten,\n  makeStyles,\n} from '@material-ui/core';\n\n\n\nexport const costInsightsLightTheme = {\n  palette: {\n    blue: '#509AF5',\n    lightBlue: '#9BF0E1',\n    darkBlue: '#4101F5',\n    magenta: '#DC148C',\n    yellow: '#FFC864',\n    tooltip: {\n      background: '#171717',\n      color: '#DDD',\n    },\n    navigationText: '#b5b5b5',\n    alertBackground: 'rgba(219, 219, 219, 0.13)',\n    dataViz: [\n      '#509BF5',\n      '#4B917D',\n      '#FF6437',\n      '#F573A0',\n      '#F59B23',\n      '#B49BC8',\n      '#C39687',\n      '#A0C3D2',\n      '#FFC864',\n      '#BABABA',\n    ],\n  },\n} ;\n\n// Higher tonal values from light theme (Google recommends 600 -> 200)\n// https://material.io/design/color/the-color-system.html#tools-for-picking-colors\nexport const costInsightsDarkTheme = {\n  palette: {\n    blue: '#77b8f9',\n    lightBlue: '#d8f9f4',\n    darkBlue: '#b595fd',\n    magenta: '#ee93cd',\n    yellow: '#fff2da',\n    tooltip: {\n      background: '#EEE',\n      color: '#424242',\n    },\n    navigationText: '#b5b5b5',\n    alertBackground: 'rgba(32, 32, 32, 0.13)',\n    dataViz: [\n      '#8accff',\n      '#7bc2ac',\n      '#ff9664',\n      '#ffa5d1',\n      '#ffcc57',\n      '#e6ccfb',\n      '#f7c7b7',\n      '#d2f6ff',\n      '#fffb94',\n      '#ececec',\n    ],\n  },\n} ;\n\n// The opposite of MUI's emphasize function - darken darks, lighten lights\nexport function brighten(color, coefficient = 0.2) {\n  return getLuminance(color) > 0.5\n    ? lighten(color, coefficient)\n    : darken(color, coefficient);\n}\n\nexport const useCostOverviewStyles = (theme) => ({\n  axis: {\n    fill: theme.palette.text.primary,\n  },\n  container: {\n    height: 450,\n    width: 1200,\n  },\n  cartesianGrid: {\n    stroke: theme.palette.textVerySubtle,\n  },\n  chart: {\n    margin: {\n      right: 30,\n      top: 16,\n    },\n  },\n  yAxis: {\n    width: 75,\n  },\n});\n\nexport const useOverviewTabsStyles = makeStyles(\n  (theme) => ({\n    default: {\n      padding: theme.spacing(2),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary,\n      textTransform: 'uppercase',\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n  }),\n);\n\nexport const useBarChartStyles = (theme) => ({\n  axis: {\n    fill: theme.palette.text.primary,\n  },\n  barChart: {\n    margin: {\n      left: 16,\n      right: 16,\n    },\n  },\n  cartesianGrid: {\n    stroke: theme.palette.textVerySubtle,\n  },\n  cursor: {\n    fill: theme.palette.textVerySubtle,\n    fillOpacity: 0.3,\n  },\n  container: {\n    height: 400,\n    width: 1200,\n  },\n  infoIcon: {\n    marginLeft: 2,\n    fontSize: '1.25em',\n  },\n  xAxis: {\n    height: 50,\n  },\n});\n\nexport const useBarChartLayoutStyles = makeStyles(theme =>\n  createStyles({\n    wrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    legend: {\n      paddingBottom: theme.spacing(2),\n    },\n  }),\n);\n\nexport const useBarChartStepperButtonStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        ...theme.typography.button,\n        boxSizing: 'border-box',\n        transition: theme.transitions.create(\n          ['background-color', 'box-shadow', 'border'],\n          {\n            duration: theme.transitions.duration.short,\n          },\n        ),\n        borderRadius: '50%',\n        padding: 0,\n        width: 40,\n        height: 40,\n        boxShadow: theme.shadows[6],\n        '&:active': {\n          boxShadow: theme.shadows[12],\n        },\n        color: theme.palette.text.primary,\n        backgroundColor: lighten(theme.palette.background.default, 0.1),\n        '&:hover': {\n          backgroundColor: lighten(theme.palette.background.default, 0.2),\n          textDecoration: 'none',\n        },\n      },\n    }),\n);\n\nexport const useBarChartLabelStyles = makeStyles(theme =>\n  createStyles({\n    foreignObject: {\n      textAlign: 'center',\n    },\n    label: {\n      fontWeight: theme.typography.fontWeightBold,\n      display: 'block',\n      textDecoration: 'none',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n    },\n    infoIcon: {\n      marginLeft: 2,\n      fontSize: '1.25em',\n    },\n    button: {\n      textTransform: 'none',\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.fontSize,\n    },\n  }),\n);\n\nexport const useCostInsightsStyles = makeStyles(theme => ({\n  h6Subtle: {\n    ...theme.typography.h6,\n    fontWeight: 'normal',\n    color: theme.palette.textSubtle,\n  },\n}));\n\nexport const useCostInsightsTabsStyles = makeStyles(\n  (theme) => ({\n    tabs: {\n      borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n      backgroundColor: brighten(theme.palette.background.default),\n      padding: theme.spacing(0, 4),\n    },\n    tab: {\n      minHeight: 68,\n      minWidth: 180,\n      padding: theme.spacing(1, 4),\n      '&:hover': {\n        color: 'inherit',\n        backgroundColor: 'inherit',\n      },\n    },\n    indicator: {\n      backgroundColor: theme.palette.navigation.indicator,\n      height: 4,\n    },\n    tabLabel: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    tabLabelText: {\n      fontSize: theme.typography.fontSize,\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    menuItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      minWidth: 180,\n      padding: theme.spacing(2, 2),\n    },\n    menuItemSelected: {\n      backgroundColor: lighten(theme.palette.background.default, 0.3),\n    },\n  }),\n);\n\nexport const useAlertCardActionHeaderStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        paddingBottom: theme.spacing(2),\n        borderRadius: 'unset',\n      },\n      title: {\n        fontSize: theme.typography.fontSize,\n        fontWeight: theme.typography.fontWeightBold,\n        lineHeight: 1.5,\n      },\n      action: {\n        margin: 0,\n      },\n    }),\n);\n\nexport const useCostGrowthStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      excess: {\n        color: theme.palette.status.error,\n      },\n      savings: {\n        color: theme.palette.status.ok,\n      },\n      indicator: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n      },\n    }),\n);\n\nexport const useCostGrowthLegendStyles = makeStyles(theme => ({\n  h5: {\n    ...theme.typography.h5,\n    fontWeight: 500,\n    padding: 0,\n  },\n  marker: {\n    display: 'inherit',\n    marginRight: theme.spacing(1),\n  },\n  helpIcon: {\n    display: 'inherit',\n  },\n  title: {\n    ...theme.typography.overline,\n    fontWeight: 500,\n    lineHeight: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.textSubtle,\n  },\n  tooltip: {\n    display: 'block',\n    padding: theme.spacing(1),\n    backgroundColor: theme.palette.navigation.background,\n  },\n  tooltipText: {\n    color: theme.palette.background.default,\n    fontSize: theme.typography.fontSize,\n    lineHeight: 1.5,\n  },\n}));\n\nexport const useBarChartStepperStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      paper: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-around',\n        alignItems: 'center',\n        background: 'transparent',\n        padding: 8,\n      },\n      step: {\n        backgroundColor: theme.palette.action.disabled,\n        borderRadius: '50%',\n        width: 9,\n        height: 9,\n        margin: '0 2px',\n      },\n      stepActive: {\n        backgroundColor: theme.palette.primary.main,\n      },\n      steps: {\n        display: 'flex',\n        flexDirection: 'row',\n      },\n      backButton: {\n        position: 'absolute',\n        left: 0,\n        top: 'calc(50% - 60px)',\n        zIndex: 100,\n      },\n      nextButton: {\n        position: 'absolute',\n        right: 0,\n        top: 'calc(50% - 60px)',\n        zIndex: 100,\n      },\n    }),\n);\n\nexport const useNavigationStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      menuList: {\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: theme.palette.navigation.background,\n        minWidth: 250,\n      },\n      menuItem: {\n        background: 'transparent',\n        border: 0,\n        textTransform: 'none',\n        width: '100%',\n        minHeight: theme.spacing(6),\n        margin: theme.spacing(0.5, 2, 0.5, 0),\n      },\n      listItemIcon: {\n        minWidth: 40,\n      },\n      navigationIcon: {\n        fill: theme.palette.navigationText,\n      },\n      title: {\n        whiteSpace: 'nowrap',\n        lineHeight: 1,\n        color: theme.palette.navigationText,\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    }),\n);\n\nexport const useTooltipStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      tooltip: {\n        backgroundColor: theme.palette.tooltip.background,\n        borderRadius: theme.shape.borderRadius,\n        boxShadow: theme.shadows[1],\n        color: theme.palette.tooltip.color,\n        fontSize: theme.typography.fontSize,\n        minWidth: 300,\n      },\n      maxWidth: {\n        maxWidth: 300,\n      },\n      actions: {\n        padding: theme.spacing(2),\n      },\n      header: {\n        padding: theme.spacing(2),\n      },\n      content: {\n        padding: theme.spacing(2),\n      },\n      lensIcon: {\n        fontSize: `.75rem`,\n      },\n      divider: {\n        backgroundColor: emphasize(theme.palette.divider, 1),\n      },\n      truncate: {\n        maxWidth: 200,\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n      },\n      subtitle: {\n        fontStyle: 'italic',\n      },\n    }),\n);\n\nexport const useAlertInsightsSectionStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      button: {\n        backgroundColor: theme.palette.textVerySubtle,\n        color: theme.palette.text.primary,\n      },\n    }),\n);\n\nexport const useSelectStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      select: {\n        minWidth: 200,\n        textAlign: 'start',\n        backgroundColor: theme.palette.background.paper,\n      },\n      menuItem: {\n        minWidth: 200,\n        padding: theme.spacing(2),\n        '&.compact': {\n          padding: theme.spacing(1, 2),\n        },\n      },\n    }),\n);\n\nexport const useActionItemCardStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      card: {\n        boxShadow: 'none',\n      },\n      avatar: {\n        backgroundColor: theme.palette.textVerySubtle,\n        color: theme.palette.text.primary,\n      },\n      root: {\n        minHeight: 80,\n        paddingBottom: theme.spacing(2),\n        borderRadius: theme.shape.borderRadius,\n      },\n      activeRoot: {\n        cursor: 'pointer',\n        transition: theme.transitions.create('background', {\n          duration: theme.transitions.duration.short,\n        }),\n        '&:hover': {\n          background: theme.palette.alertBackground,\n        },\n      },\n      action: {\n        margin: 0,\n      },\n      title: {\n        fontSize: theme.typography.fontSize,\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    }),\n);\n\nexport const useProductInsightsCardStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        padding: theme.spacing(2, 2, 2, 2.5), // restore backstage default padding\n      },\n      action: {\n        margin: 0, // unset negative margins\n      },\n    }),\n);\n\nexport const useProductInsightsChartStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      indicator: {\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: '1.25rem',\n      },\n      actions: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      },\n    }),\n);\n\nexport const useBackdropStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        zIndex: theme.zIndex.modal,\n      },\n    }),\n);\n\nexport const useSubtleTypographyStyles = makeStyles(\n  (theme) =>\n    createStyles({\n      root: {\n        color: theme.palette.textSubtle,\n      },\n    }),\n);\n\nexport const useEntityDialogStyles = makeStyles(theme =>\n  createStyles({\n    dialogContent: {\n      padding: 0,\n    },\n    dialogTitle: {\n      padding: 0,\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n      zIndex: 100,\n    },\n    row: {\n      fontSize: theme.typography.fontSize * 1.25,\n    },\n    rowTotal: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    colFirst: {\n      paddingLeft: theme.spacing(2),\n    },\n    colLast: {\n      paddingRight: theme.spacing(2),\n    },\n    column: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    growth: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignContent: 'center',\n      justifyContent: 'flex-end',\n    },\n  }),\n);\n\nexport const useAlertDialogStyles = makeStyles((theme) =>\n  createStyles({\n    content: {\n      padding: theme.spacing(0, 5, 2, 5),\n    },\n    actions: {\n      padding: theme.spacing(2, 5),\n    },\n    radio: {\n      margin: theme.spacing(-0.5, 0, -0.5, 0),\n    },\n    icon: {\n      color: theme.palette.primary.dark,\n      margin: theme.spacing(2.5, 2.5, 0, 0),\n      padding: 0,\n    },\n  }),\n);\n\nexport const useAlertStatusSummaryButtonStyles = makeStyles(() => ({\n  icon: {\n    transform: 'transform 5s',\n  },\n  clicked: {\n    transform: 'rotate(180deg)',\n  },\n}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const exploreToolsConfigRef = createApiRef({\n  id: 'plugin.explore.toolsconfig',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport {\n  EntityRefLinks,\n  entityRouteParams,\n  getEntityRelations,\n  entityRouteRef,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Chip,\n} from '@material-ui/core';\nimport React from 'react';\n\nimport { Button, ItemCardHeader } from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\n\n\n\n\n\nexport const DomainCard = ({ entity }) => {\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  const url = catalogEntityRoute(entityRouteParams(entity));\n\n  const owner = (\n    React.createElement(EntityRefLinks, {\n      entityRefs: ownedByRelations,\n      defaultKind: \"group\",\n      color: \"inherit\",}\n    )\n  );\n\n  return (\n    React.createElement(Card, null\n      , React.createElement(CardMedia, null\n        , React.createElement(ItemCardHeader, { title: entity.metadata.name, subtitle: owner,} )\n      )\n      , React.createElement(CardContent, null\n        , entity.metadata.tags?.length ? (\n          React.createElement(Box, null\n            , entity.metadata.tags.map(tag => (\n              React.createElement(Chip, { size: \"small\", label: tag, key: tag,} )\n            ))\n          )\n        ) : null\n        , entity.metadata.description\n      )\n      , React.createElement(CardActions, null\n        , React.createElement(Button, { to: url, color: \"primary\",}, \"Explore\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Header, Page, RoutedTabs } from '@backstage/core-components';\nimport {\n  attachComponentData,\n  useElementFilter,\n} from '@backstage/core-plugin-api';\n\nimport { default as React } from 'react';\n\n// TODO: This layout could be a shared based component if it was possible to create custom TabbedLayouts\n//    A generalized version of createSubRoutesFromChildren, etc. would be required\n\n\n\n\n\n\n\n\nconst dataKey = 'plugin.explore.exploreLayoutRoute';\n\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\n\n// This causes all mount points that are discovered within this route to use the path of the route itself\nattachComponentData(Route, 'core.gatherMountPoints', true);\n\n\n\n\n\n\n\n/**\n * Explore is a compound component, which allows you to define a custom layout\n *\n * @example\n * ```jsx\n * <ExploreLayout title=\"Explore ACME's ecosystem\">\n *   <ExploreLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </ExploreLayout.Route>\n * </ExploreLayout>\n * ```\n */\nexport const ExploreLayout = ({\n  title,\n  subtitle,\n  children,\n}) => {\n  const routes = useElementFilter(children, elements =>\n    elements\n      .selectByComponentData({\n        key: dataKey,\n        withStrictError:\n          'Child of ExploreLayout must be an ExploreLayout.Route',\n      })\n      .getElements()\n      .map(child => child.props),\n  );\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        title: title ?? 'Explore our ecosystem',\n        subtitle: subtitle ?? 'Discover solutions available in our ecosystem',}\n      )\n      , React.createElement(RoutedTabs, { routes: routes,} )\n    )\n  );\n};\n\nExploreLayout.Route = Route;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef, } from '@backstage/core-plugin-api';\n\n\nimport { ResponseError } from '@backstage/errors';\n\n\n\n\n\n\nexport const gcalendarApiRef = createApiRef({\n  id: 'plugin.gcalendar.service',\n});\n\nexport class GCalendarApiClient {\n    authApi;\n    fetchApi;\n\n  constructor(options) {\n    this.authApi = options.authApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n   async get(\n    path,\n    params,\n  ) {\n    const query = new URLSearchParams(params);\n    const url = new URL(\n      `${path}?${query.toString()}`,\n      'https://www.googleapis.com',\n    );\n    const token = await this.authApi.getAccessToken();\n    const response = await this.fetchApi.fetch(url.toString(), {\n      headers: token ? { Authorization: `Bearer ${token}` } : {},\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return response.json() ;\n  }\n\n   async getCalendars(params) {\n    return this.get(\n      '/calendar/v3/users/me/calendarList',\n      params,\n    );\n  }\n\n   async getEvents(calendarId, params) {\n    return this.get(\n      `/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events`,\n      params,\n    );\n  }\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference types=\"@maxim_mazurok/gapi.client.calendar\" />\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport var ResponseStatus; (function (ResponseStatus) {\n  const needsAction = 'needsAction'; ResponseStatus[\"needsAction\"] = needsAction;\n  const accepted = 'accepted'; ResponseStatus[\"accepted\"] = accepted;\n  const declined = 'declined'; ResponseStatus[\"declined\"] = declined;\n  const maybe = 'tentative'; ResponseStatus[\"maybe\"] = maybe;\n})(ResponseStatus || (ResponseStatus = {}));\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'gcalendar',\n});\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  fetchApiRef,\n  googleAuthApiRef,\n} from '@backstage/core-plugin-api';\n\nimport { GCalendarApiClient, gcalendarApiRef } from './api';\nimport { rootRouteRef } from './routes';\n\nexport const gcalendarPlugin = createPlugin({\n  id: 'gcalendar',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: gcalendarApiRef,\n      deps: { authApi: googleAuthApiRef, fetchApi: fetchApiRef },\n      factory(deps) {\n        return new GCalendarApiClient(deps);\n      },\n    }),\n  ],\n});\n\nexport const HomePageCalendar = gcalendarPlugin.provide(\n  createComponentExtension({\n    name: 'HomePageCalendar',\n    component: {\n      lazy: () =>\n        import('./components/CalendarCard').then(m => m.HomePageCalendar),\n    },\n  }),\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const gcpApiRef = createApiRef({\n  id: 'plugin.gcpprojects.service',\n});\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst BASE_URL =\n  'https://content-cloudresourcemanager.googleapis.com/v1/projects';\n\nexport class GcpClient  {\n  constructor(  googleAuthApi) {;this.googleAuthApi = googleAuthApi;}\n\n  async listProjects() {\n    const response = await fetch(BASE_URL, {\n      headers: {\n        Accept: '*/*',\n        Authorization: `Bearer ${await this.getToken()}`,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(\n        `List request failed to ${BASE_URL} with ${response.status} ${response.statusText}`,\n      );\n    }\n\n    const { projects } = await response.json();\n    return projects;\n  }\n\n  async getProject(projectId) {\n    const url = `${BASE_URL}/${projectId}`;\n    const response = await fetch(url, {\n      headers: {\n        Authorization: `Bearer ${await this.getToken()}`,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(\n        `Get request failed to ${url} with ${response.status} ${response.statusText}`,\n      );\n    }\n\n    return await response.json();\n  }\n\n  async createProject(options\n\n\n) {\n    const newProject = {\n      name: options.projectName,\n      projectId: options.projectId,\n    };\n\n    const response = await fetch(BASE_URL, {\n      method: 'POST',\n      headers: {\n        Accept: '*/*',\n        Authorization: `Bearer ${await this.getToken()}`,\n      },\n      body: JSON.stringify(newProject),\n    });\n\n    if (!response.ok) {\n      throw new Error(\n        `Create request failed to ${BASE_URL} with ${response.status} ${response.statusText}`,\n      );\n    }\n\n    return await response.json();\n  }\n\n  async getToken() {\n    // NOTE(freben): There's a .read-only variant of this scope that we could\n    // use for readonly operations, but that means we would ask the user for a\n    // second auth during creation and I decided to keep the wider scope for\n    // all ops for now\n    return this.googleAuthApi.getAccessToken(\n      'https://www.googleapis.com/auth/cloud-platform',\n    );\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'gcp-projects',\n});\nexport const projectRouteRef = createRouteRef({\n  id: 'gcp-projects:project',\n});\nexport const newProjectRouteRef = createRouteRef({\n  id: 'gcp-projects:new',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const githubActionsApiRef = createApiRef({\n  id: 'plugin.githubactions.service',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\n\nimport { Octokit, } from '@octokit/rest';\n\n\nexport class GithubActionsClient  {\n    configApi;\n    githubAuthApi;\n\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.githubAuthApi = options.githubAuthApi;\n  }\n\n   async getOctokit(hostname) {\n    // TODO: Get access token for the specified hostname\n    const token = await this.githubAuthApi.getAccessToken(['repo']);\n    const configs = readGitHubIntegrationConfigs(\n      this.configApi.getOptionalConfigArray('integrations.github') ?? [],\n    );\n    const githubIntegrationConfig = configs.find(\n      v => v.host === hostname ?? 'github.com',\n    );\n    const baseUrl = githubIntegrationConfig?.apiBaseUrl;\n    return new Octokit({ auth: token, baseUrl });\n  }\n\n  async reRunWorkflow({\n    hostname,\n    owner,\n    repo,\n    runId,\n  }\n\n\n\n\n) {\n    const octokit = await this.getOctokit(hostname);\n    return octokit.actions.reRunWorkflow({\n      owner,\n      repo,\n      run_id: runId,\n    });\n  }\n  async listWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    pageSize = 100,\n    page = 0,\n    branch,\n  }\n\n\n\n\n\n\n)\n\n {\n    const octokit = await this.getOctokit(hostname);\n    const workflowRuns = await octokit.actions.listWorkflowRunsForRepo({\n      owner,\n      repo,\n      per_page: pageSize,\n      page,\n      ...(branch ? { branch } : {}),\n    });\n    return workflowRuns.data;\n  }\n  async getWorkflow({\n    hostname,\n    owner,\n    repo,\n    id,\n  }\n\n\n\n\n)\n\n {\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.getWorkflow({\n      owner,\n      repo,\n      workflow_id: id,\n    });\n    return workflow.data;\n  }\n  async getWorkflowRun({\n    hostname,\n    owner,\n    repo,\n    id,\n  }\n\n\n\n\n)\n\n {\n    const octokit = await this.getOctokit(hostname);\n    const run = await octokit.actions.getWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n    });\n    return run.data;\n  }\n  async listJobsForWorkflowRun({\n    hostname,\n    owner,\n    repo,\n    id,\n    pageSize = 100,\n    page = 0,\n  }\n\n\n\n\n\n\n)\n\n {\n    const octokit = await this.getOctokit(hostname);\n    const jobs = await octokit.actions.listJobsForWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n      per_page: pageSize,\n      page,\n    });\n    return jobs.data;\n  }\n  async downloadJobLogsForWorkflowRun({\n    hostname,\n    owner,\n    repo,\n    runId,\n  }\n\n\n\n\n)\n\n {\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.downloadJobLogsForWorkflowRun({\n      owner,\n      repo,\n      job_id: runId,\n    });\n    return workflow.data;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport var BuildStatus; (function (BuildStatus) {\n  const success = 0; BuildStatus[BuildStatus['success'] = success] = 'success';\n  const failure = success + 1; BuildStatus[BuildStatus['failure'] = failure] = 'failure';\n  const pending = failure + 1; BuildStatus[BuildStatus['pending'] = pending] = 'pending';\n  const running = pending + 1; BuildStatus[BuildStatus['running'] = running] = 'running';\n})(BuildStatus || (BuildStatus = {}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  LinearProgress,\n  makeStyles,\n\n  Typography,\n} from '@material-ui/core';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport React, { useEffect } from 'react';\nimport { GITHUB_ACTIONS_ANNOTATION } from '../getProjectNameFromEntity';\nimport { useWorkflowRuns, } from '../useWorkflowRuns';\nimport { WorkflowRunsTable } from '../WorkflowRunsTable';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\n\nimport { configApiRef, errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport {\n  InfoCard,\n\n  Link,\n  StructuredMetadataTable,\n} from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n});\n\nconst WidgetContent = ({\n  error,\n  loading,\n  lastRun,\n  branch,\n}\n\n\n\n\n) => {\n  const classes = useStyles();\n  if (error) return React.createElement(Typography, null, \"Couldn't fetch latest \"   , branch, \" run\" );\n  if (loading) return React.createElement(LinearProgress, null );\n  return (\n    React.createElement(StructuredMetadataTable, {\n      metadata: {\n        status: (\n          React.createElement(React.Fragment, null\n            , React.createElement(WorkflowRunStatus, {\n              status: lastRun.status,\n              conclusion: lastRun.conclusion,}\n            )\n          )\n        ),\n        message: lastRun.message,\n        url: (\n          React.createElement(Link, { to: lastRun.githubUrl ?? '',}, \"See more on GitHub\"\n               , ' '\n            , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n          )\n        ),\n      },}\n    )\n  );\n};\n\nexport const LatestWorkflowRunCard = ({\n  branch = 'master',\n  // Display the card full height suitable for\n  variant,\n}) => {\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const errorApi = useApi(errorApiRef);\n  // TODO: Get github hostname from metadata annotation\n  const hostname = readGitHubIntegrationConfigs(\n    config.getOptionalConfigArray('integrations.github') ?? [],\n  )[0].host;\n  const [owner, repo] = (\n    entity?.metadata.annotations?.[GITHUB_ACTIONS_ANNOTATION] ?? '/'\n  ).split('/');\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n  });\n  const lastRun = runs?.[0] ?? ({} );\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  return (\n    React.createElement(InfoCard, { title: `Last ${branch} build`, variant: variant,}\n      , React.createElement(WidgetContent, {\n        error: error,\n        loading: loading,\n        branch: branch,\n        lastRun: lastRun,}\n      )\n    )\n  );\n};\n\n\n\n\n\n\nexport const LatestWorkflowsForBranchCard = ({\n  branch = 'master',\n  variant,\n}) => {\n  const { entity } = useEntity();\n\n  return (\n    React.createElement(InfoCard, { title: `Last ${branch} build`, variant: variant,}\n      , React.createElement(WorkflowRunsTable, { branch: branch, entity: entity,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React, { useEffect } from 'react';\nimport { generatePath, Link as RouterLink } from 'react-router-dom';\nimport { GITHUB_ACTIONS_ANNOTATION } from '../getProjectNameFromEntity';\nimport { useWorkflowRuns } from '../useWorkflowRuns';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\nimport { Typography } from '@material-ui/core';\n\nimport { configApiRef, errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport {\n  InfoCard,\n\n  Link,\n  Table,\n} from '@backstage/core-components';\n\nconst firstLine = (message) => message.split('\\n')[0];\n\n\n\n\n\n\n\n\nexport const RecentWorkflowRunsCard = ({\n  branch,\n  dense = false,\n  limit = 5,\n  variant,\n}) => {\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const errorApi = useApi(errorApiRef);\n  // TODO: Get github hostname from metadata annotation\n  const hostname = readGitHubIntegrationConfigs(\n    config.getOptionalConfigArray('integrations.github') ?? [],\n  )[0].host;\n  const [owner, repo] = (\n    entity?.metadata.annotations?.[GITHUB_ACTIONS_ANNOTATION] ?? '/'\n  ).split('/');\n  const [{ runs = [], loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n    initialPageSize: limit,\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  const githubHost = hostname || 'github.com';\n\n  return (\n    React.createElement(InfoCard, {\n      title: \"Recent Workflow Runs\"  ,\n      subheader: branch ? `Branch: ${branch}` : 'All Branches',\n      noPadding: true,\n      variant: variant,}\n    \n      , !runs.length ? (\n        React.createElement('div', { style: { textAlign: 'center' },}\n          , React.createElement(Typography, { variant: \"body1\",}, \"This component has GitHub Actions enabled, but no workflows were found.\"\n\n\n          )\n          , React.createElement(Typography, { variant: \"body2\",}\n            , React.createElement(Link, { to: `https://${githubHost}/${owner}/${repo}/actions/new`,}, \"Create a new workflow\"\n\n            )\n          )\n        )\n      ) : (\n        React.createElement(Table, {\n          isLoading: loading,\n          options: {\n            search: false,\n            paging: false,\n            padding: dense ? 'dense' : 'default',\n            toolbar: false,\n          },\n          columns: [\n            {\n              title: 'Commit Message',\n              field: 'message',\n              render: data => (\n                React.createElement(Link, {\n                  component: RouterLink,\n                  to: generatePath('./ci-cd/:id', { id: data.id }),}\n                \n                  , firstLine(data.message)\n                )\n              ),\n            },\n            { title: 'Branch', field: 'source.branchName' },\n            { title: 'Status', field: 'status', render: WorkflowRunStatus },\n          ],\n          data: runs,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport useAsync from 'react-use/lib/useAsync';\nimport { githubActionsApiRef } from '../../api';\nimport { buildRouteRef } from '../../routes';\nimport { useApi, useRouteRefParams } from '@backstage/core-plugin-api';\n\nexport const useWorkflowRunJobs = ({\n  hostname,\n  owner,\n  repo,\n}\n\n\n\n) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const jobs = useAsync(async () => {\n    return repo && owner\n      ? api.listJobsForWorkflowRun({\n          hostname,\n          owner,\n          repo,\n          id: parseInt(id, 10),\n        })\n      : Promise.reject(new Error('No repo/owner provided'));\n  }, [repo, owner, id]);\n  return jobs;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport useAsync from 'react-use/lib/useAsync';\nimport { githubActionsApiRef } from '../../api';\nimport { buildRouteRef } from '../../routes';\nimport { useApi, useRouteRefParams } from '@backstage/core-plugin-api';\n\nexport const useWorkflowRunsDetails = ({\n  hostname,\n  owner,\n  repo,\n}\n\n\n\n) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const details = useAsync(async () => {\n    return repo && owner\n      ? api.getWorkflowRun({\n          hostname,\n          owner,\n          repo,\n          id: parseInt(id, 10),\n        })\n      : Promise.reject(new Error('No repo/owner provided'));\n  }, [repo, owner, id]);\n  return details;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync from 'react-use/lib/useAsync';\nimport { githubActionsApiRef } from '../../api';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const useDownloadWorkflowRunLogs = ({\n  hostname,\n  owner,\n  repo,\n  id,\n}\n\n\n\n\n) => {\n  const api = useApi(githubActionsApiRef);\n  const details = useAsync(async () => {\n    return repo && owner\n      ? api.downloadJobLogsForWorkflowRun({\n          hostname,\n          owner,\n          repo,\n          runId: id,\n        })\n      : Promise.reject('No repo/owner provided');\n  }, [repo, owner, id]);\n  return details;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { LogViewer } from '@backstage/core-components';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\nimport {\n  Accordion,\n  AccordionSummary,\n  CircularProgress,\n  Fade,\n  makeStyles,\n  Modal,\n\n  Tooltip,\n  Typography,\n  Zoom,\n} from '@material-ui/core';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\nimport { getProjectNameFromEntity } from '../getProjectNameFromEntity';\nimport { useDownloadWorkflowRunLogs } from './useDownloadWorkflowRunLogs';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: '-20px',\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    width: '85%',\n    height: '85%',\n    justifyContent: 'center',\n    margin: 'auto',\n  },\n  normalLogContainer: {\n    height: '75vh',\n    width: '100%',\n  },\n  modalLogContainer: {\n    height: '100%',\n    width: '100%',\n  },\n  log: {\n    background: theme.palette.background.default,\n  },\n}));\n\n/**\n * A component for Run Logs visualization.\n */\nexport const WorkflowRunLogs = ({\n  entity,\n  runId,\n  inProgress,\n}\n\n\n\n) => {\n  const config = useApi(configApiRef);\n  const classes = useStyles();\n  const projectName = getProjectNameFromEntity(entity);\n\n  // TODO: Get github hostname from metadata annotation\n  const hostname = readGitHubIntegrationConfigs(\n    config.getOptionalConfigArray('integrations.github') ?? [],\n  )[0].host;\n  const [owner, repo] = (projectName && projectName.split('/')) || [];\n  const jobLogs = useDownloadWorkflowRunLogs({\n    hostname,\n    owner,\n    repo,\n    id: runId,\n  });\n  const logText = jobLogs.value ? String(jobLogs.value) : undefined;\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, disabled: inProgress,}\n      , React.createElement(AccordionSummary, {\n        expandIcon: React.createElement(ExpandMoreIcon, null ),\n        'aria-controls': `panel-${name}-content`,\n        id: `panel-${name}-header`,\n        IconButtonProps: {\n          className: classes.button,\n        },}\n      \n        , React.createElement(Typography, { variant: \"button\",}\n          , jobLogs.loading ? React.createElement(CircularProgress, null ) : 'Job Log'\n        )\n        , React.createElement(Tooltip, { title: \"Open Log\" , TransitionComponent: Zoom, arrow: true,}\n          , React.createElement(DescriptionIcon, {\n            onClick: event => {\n              event.stopPropagation();\n              handleOpen();\n            },\n            style: { marginLeft: 'auto' },}\n          )\n        )\n        , React.createElement(Modal, {\n          className: classes.modal,\n          onClick: event => event.stopPropagation(),\n          open: open,\n          onClose: handleClose,}\n        \n          , React.createElement(Fade, { in: open,}\n            , React.createElement('div', { className: classes.modalLogContainer,}\n              , React.createElement(LogViewer, {\n                text: logText ?? 'No Values Found',\n                classes: { root: classes.log },}\n              )\n            )\n          )\n        )\n      )\n      , logText && (\n        React.createElement('div', { className: classes.normalLogContainer,}\n          , React.createElement(LogViewer, { text: logText, classes: { root: classes.log },} )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Box,\n  CircularProgress,\n  LinearProgress,\n  Link as MaterialLink,\n  ListItemText,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n\n  Typography,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime } from 'luxon';\nimport React from 'react';\n\nimport { getProjectNameFromEntity } from '../getProjectNameFromEntity';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\nimport { useWorkflowRunJobs } from './useWorkflowRunJobs';\nimport { useWorkflowRunsDetails } from './useWorkflowRunsDetails';\nimport { WorkflowRunLogs } from '../WorkflowRunLogs';\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Breadcrumbs, Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2),\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0),\n  },\n  table: {\n    padding: theme.spacing(1),\n  },\n  accordionDetails: {\n    padding: 0,\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: '-20px',\n  },\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n}));\n\nconst getElapsedTime = (start, end) => {\n  const startDate = DateTime.fromISO(start);\n  const endDate = end ? DateTime.fromISO(end) : DateTime.now();\n  const diff = endDate.diff(startDate);\n  const timeElapsed = diff.toFormat(`m 'minutes' s 'seconds'`);\n  return timeElapsed;\n};\n\nconst StepView = ({ step }) => {\n  return (\n    React.createElement(TableRow, null\n      , React.createElement(TableCell, null\n        , React.createElement(ListItemText, {\n          primary: step.name,\n          secondary: getElapsedTime(step.started_at, step.completed_at),}\n        )\n      )\n      , React.createElement(TableCell, null\n        , React.createElement(WorkflowRunStatus, {\n          status: step.status.toLocaleUpperCase('en-US'),\n          conclusion: step.conclusion?.toLocaleUpperCase('en-US'),}\n        )\n      )\n    )\n  );\n};\n\nconst JobListItem = ({\n  job,\n  className,\n  entity,\n}\n\n\n\n) => {\n  const classes = useStyles();\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, className: className,}\n      , React.createElement(AccordionSummary, {\n        expandIcon: React.createElement(ExpandMoreIcon, null ),\n        'aria-controls': `panel-${name}-content`,\n        id: `panel-${name}-header`,\n        IconButtonProps: {\n          className: classes.button,\n        },}\n      \n        , React.createElement(Typography, { variant: \"button\",}\n          , job.name, \" (\" , getElapsedTime(job.started_at, job.completed_at), \")\"\n        )\n      )\n      , React.createElement(AccordionDetails, { className: classes.accordionDetails,}\n        , React.createElement(TableContainer, null\n          , React.createElement(Table, null\n            , job.steps.map(step => (\n              React.createElement(StepView, { key: step.number, step: step,} )\n            ))\n          )\n        )\n      )\n      , job.status === 'queued' || job.status === 'in_progress' ? (\n        React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: true, entity: entity,} )\n      ) : (\n        React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: false, entity: entity,} )\n      )\n    )\n  );\n};\n\nconst JobsList = ({ jobs, entity }) => {\n  const classes = useStyles();\n  return (\n    React.createElement(Box, null\n      , jobs &&\n        jobs.total_count > 0 &&\n        jobs.jobs.map(job => (\n          React.createElement(JobListItem, {\n            key: job.id,\n            job: job,\n            className: \n              job.status !== 'success' ? classes.failed : classes.success\n            ,\n            entity: entity,}\n          )\n        ))\n    )\n  );\n};\n\nexport const WorkflowRunDetails = ({ entity }) => {\n  const config = useApi(configApiRef);\n  const projectName = getProjectNameFromEntity(entity);\n\n  // TODO: Get github hostname from metadata annotation\n  const hostname = readGitHubIntegrationConfigs(\n    config.getOptionalConfigArray('integrations.github') ?? [],\n  )[0].host;\n  const [owner, repo] = (projectName && projectName.split('/')) || [];\n  const details = useWorkflowRunsDetails({ hostname, owner, repo });\n  const jobs = useWorkflowRunJobs({ hostname, owner, repo });\n\n  const classes = useStyles();\n\n  if (details.error && details.error.message) {\n    return (\n      React.createElement(Typography, { variant: \"h6\", color: \"error\",}, \"Failed to load build, \"\n            , details.error.message\n      )\n    );\n  } else if (details.loading) {\n    return React.createElement(LinearProgress, null );\n  }\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Box, { mb: 3,}\n        , React.createElement(Breadcrumbs, { 'aria-label': \"breadcrumb\",}\n          , React.createElement(Link, { to: \"..\",}, \"Workflow runs\" )\n          , React.createElement(Typography, null, \"Workflow run details\"  )\n        )\n      )\n      , React.createElement(TableContainer, { component: Paper, className: classes.table,}\n        , React.createElement(Table, null\n          , React.createElement(TableBody, null\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Branch\")\n              )\n              , React.createElement(TableCell, null, details.value?.head_branch)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Message\")\n              )\n              , React.createElement(TableCell, null, details.value?.head_commit?.message)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Commit ID\" )\n              )\n              , React.createElement(TableCell, null, details.value?.head_commit?.id)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Workflow\")\n              )\n              , React.createElement(TableCell, null, details.value?.name)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Status\")\n              )\n              , React.createElement(TableCell, null\n                , React.createElement(WorkflowRunStatus, {\n                  status: details.value?.status || undefined,\n                  conclusion: details.value?.conclusion || undefined,}\n                )\n              )\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Author\")\n              )\n              , React.createElement(TableCell, null, `${details.value?.head_commit?.author?.name} (${details.value?.head_commit?.author?.email})`)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Links\")\n              )\n              , React.createElement(TableCell, null\n                , details.value?.html_url && (\n                  React.createElement(MaterialLink, { target: \"_blank\", href: details.value.html_url,}, \"Workflow runs on GitHub\"\n                       , ' '\n                    , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n                  )\n                )\n              )\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, { colSpan: 2,}\n                , React.createElement(Typography, { noWrap: true,}, \"Jobs\")\n                , jobs.loading ? (\n                  React.createElement(CircularProgress, null )\n                ) : (\n                  React.createElement(JobsList, { jobs: jobs.value, entity: entity,} )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Routes, Route } from 'react-router';\nimport { buildRouteRef } from '../routes';\nimport { WorkflowRunDetails } from './WorkflowRunDetails';\nimport { WorkflowRunsTable } from './WorkflowRunsTable';\nimport { GITHUB_ACTIONS_ANNOTATION } from './getProjectNameFromEntity';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isGithubActionsAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[GITHUB_ACTIONS_ANNOTATION]);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (!isGithubActionsAvailable(entity)) {\n    return (\n      React.createElement(MissingAnnotationEmptyState, { annotation: GITHUB_ACTIONS_ANNOTATION,} )\n    );\n  }\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(WorkflowRunsTable, { entity: entity,} ),} )\n      , React.createElement(Route, {\n        path: `${buildRouteRef.path}`,\n        element: React.createElement(WorkflowRunDetails, { entity: entity,} ),}\n      ), \")\"\n\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  StatusPending,\n  StatusRunning,\n  StatusOK,\n  StatusWarning,\n  StatusAborted,\n  StatusError,\n} from '@backstage/core-components';\n\nexport const WorkflowRunStatus = ({\n  status,\n  conclusion,\n}\n\n\n) => {\n  if (status === undefined) return null;\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusPending, null ), \" Queued\"\n        )\n      );\n    case 'in_progress':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusRunning, null ), \" In progress\"\n        )\n      );\n    case 'completed':\n      switch (conclusion?.toLocaleLowerCase('en-US')) {\n        case 'skipped' || 'canceled':\n          return (\n            React.createElement(React.Fragment, null\n              , React.createElement(StatusAborted, null ), \" Aborted\"\n            )\n          );\n        case 'timed_out':\n          return (\n            React.createElement(React.Fragment, null\n              , React.createElement(StatusWarning, null ), \" Timed out\"\n            )\n          );\n        case 'failure':\n          return (\n            React.createElement(React.Fragment, null\n              , React.createElement(StatusError, null ), \" Error\"\n            )\n          );\n        default:\n          return (\n            React.createElement(React.Fragment, null\n              , React.createElement(StatusOK, null ), \" Completed\"\n            )\n          );\n      }\n    default:\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusPending, null ), \" Pending\"\n        )\n      );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport {\n  Link,\n  Typography,\n  Box,\n  IconButton,\n  Tooltip,\n  Button,\n} from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useWorkflowRuns, } from '../useWorkflowRuns';\nimport { WorkflowRunStatus } from '../WorkflowRunStatus';\nimport SyncIcon from '@material-ui/icons/Sync';\nimport { buildRouteRef } from '../../routes';\nimport { getProjectNameFromEntity } from '../getProjectNameFromEntity';\n\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\n\nimport { EmptyState, Table, } from '@backstage/core-components';\nimport { configApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\n\nconst generatedColumns = [\n  {\n    title: 'ID',\n    field: 'id',\n    type: 'numeric',\n    width: '150px',\n  },\n  {\n    title: 'Message',\n    field: 'message',\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return (\n          React.createElement(Link, { component: RouterLink, to: routeLink({ id: row.id }),}\n            , row.message\n          )\n        );\n      };\n\n      return React.createElement(LinkWrapper, null );\n    },\n  },\n  {\n    title: 'Source',\n    render: (row) => (\n      React.createElement(Typography, { variant: \"body2\", noWrap: true,}\n        , React.createElement('p', null, row.source?.branchName)\n        , React.createElement('p', null, row.source?.commit.hash)\n      )\n    ),\n  },\n  {\n    title: 'Workflow',\n    field: 'workflowName',\n  },\n  {\n    title: 'Status',\n    width: '150px',\n\n    render: (row) => (\n      React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n        , React.createElement(WorkflowRunStatus, { status: row.status, conclusion: row.conclusion,} )\n      )\n    ),\n  },\n  {\n    title: 'Actions',\n    render: (row) => (\n      React.createElement(Tooltip, { title: \"Rerun workflow\" ,}\n        , React.createElement(IconButton, { onClick: row.onReRunClick,}\n          , React.createElement(RetryIcon, null )\n        )\n      )\n    ),\n    width: '10%',\n  },\n];\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total,\n}) => {\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: 'dense' },\n      totalCount: total,\n      page: page,\n      actions: [\n        {\n          icon: () => React.createElement(SyncIcon, null ),\n          tooltip: 'Reload workflow runs',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ],\n      data: runs ?? [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      style: { width: '100%' },\n      title: \n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(GitHubIcon, null )\n          , React.createElement(Box, { mr: 1,} )\n          , React.createElement(Typography, { variant: \"h6\",}, projectName)\n        )\n      ,\n      columns: generatedColumns,}\n    )\n  );\n};\n\nexport const WorkflowRunsTable = ({\n  entity,\n  branch,\n}\n\n\n) => {\n  const config = useApi(configApiRef);\n  const projectName = getProjectNameFromEntity(entity);\n  // TODO: Get github hostname from metadata annotation\n  const hostname = readGitHubIntegrationConfigs(\n    config.getOptionalConfigArray('integrations.github') ?? [],\n  )[0].host;\n  const [owner, repo] = (projectName ?? '/').split('/');\n  const [{ runs, ...tableProps }, { retry, setPage, setPageSize }] =\n    useWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      branch,\n    });\n\n  const githubHost = hostname || 'github.com';\n  const hasNoRuns = !tableProps.loading && !runs;\n\n  return hasNoRuns ? (\n    React.createElement(EmptyState, {\n      missing: \"data\",\n      title: \"No Workflow Data\"  ,\n      description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\"                        ,\n      action: \n        React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          href: `https://${githubHost}/${projectName}/actions/new`,}\n        , \"Create new Workflow\"\n\n        )\n      ,}\n    )\n  ) : (\n    React.createElement(WorkflowRunsTableView, {\n      ...tableProps,\n      runs: runs,\n      loading: tableProps.loading,\n      retry: retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage,}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const GITHUB_ACTIONS_ANNOTATION = 'github.com/project-slug';\n\nexport const getProjectNameFromEntity = (entity) =>\n  entity?.metadata.annotations?.[GITHUB_ACTIONS_ANNOTATION] ?? '';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { githubActionsApiRef } from '../api/GithubActionsApi';\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function useWorkflowRuns({\n  hostname,\n  owner,\n  repo,\n  branch,\n  initialPageSize = 5,\n}\n\n\n\n\n\n) {\n  const api = useApi(githubActionsApiRef);\n\n  const errorApi = useApi(errorApiRef);\n\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n\n  const {\n    loading,\n    value: runs,\n    retry,\n    error,\n  } = useAsyncRetry(async () => {\n    // GitHub API pagination count starts from 1\n    const workflowRunsData = await api.listWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      pageSize,\n      page: page + 1,\n      branch,\n    });\n    setTotal(workflowRunsData.total_count);\n    // Transformation here\n    return workflowRunsData.workflow_runs.map(run => ({\n      workflowName: run.name,\n      message: run.head_commit.message,\n      id: `${run.id}`,\n      onReRunClick: async () => {\n        try {\n          await api.reRunWorkflow({\n            hostname,\n            owner,\n            repo,\n            runId: run.id,\n          });\n        } catch (e) {\n          errorApi.post(e);\n        }\n      },\n      source: {\n        branchName: run.head_branch,\n        commit: {\n          hash: run.head_commit.id,\n          url: run.head_repository?.branches_url?.replace(\n            '{/branch}',\n            run.head_branch,\n          ),\n        },\n      },\n      status: run.status,\n      conclusion: run.conclusion,\n      url: run.url,\n      githubUrl: run.html_url,\n    }));\n  }, [page, pageSize, repo, owner]);\n\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      projectName: `${owner}/${repo}`,\n      total,\n      error,\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry,\n    },\n  ] ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef, createSubRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'github-actions',\n});\n\nexport const buildRouteRef = createSubRouteRef({\n  id: 'github-actions/build',\n  path: '/:id',\n  parent: rootRouteRef,\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport var GoCdBuildResultStatus; (function (GoCdBuildResultStatus) {\n  const running = 0; GoCdBuildResultStatus[GoCdBuildResultStatus[\"running\"] = running] = \"running\";\n  const successful = running + 1; GoCdBuildResultStatus[GoCdBuildResultStatus[\"successful\"] = successful] = \"successful\";\n  const warning = successful + 1; GoCdBuildResultStatus[GoCdBuildResultStatus[\"warning\"] = warning] = \"warning\";\n  const aborted = warning + 1; GoCdBuildResultStatus[GoCdBuildResultStatus[\"aborted\"] = aborted] = \"aborted\";\n  const error = aborted + 1; GoCdBuildResultStatus[GoCdBuildResultStatus[\"error\"] = error] = \"error\";\n  const pending = error + 1; GoCdBuildResultStatus[GoCdBuildResultStatus[\"pending\"] = pending] = \"pending\";\n})(GoCdBuildResultStatus || (GoCdBuildResultStatus = {}));\n\nexport const toBuildResultStatus = (status) => {\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'passed':\n      return GoCdBuildResultStatus.successful;\n    case 'failed':\n      return GoCdBuildResultStatus.error;\n    case 'aborted':\n      return GoCdBuildResultStatus.aborted;\n    case 'building':\n      return GoCdBuildResultStatus.running;\n    case 'pending':\n      return GoCdBuildResultStatus.pending;\n    default:\n      return GoCdBuildResultStatus.aborted;\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { getEntitySourceLocation } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport { Button } from '@material-ui/core';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport {\n\n  GoCdBuildResultStatus,\n  toBuildResultStatus,\n\n\n} from '../../api/gocdApi.model';\nimport { DateTime } from 'luxon';\nimport {\n  Table,\n\n  Link,\n  SubvalueCell,\n  StatusOK,\n  StatusWarning,\n  StatusAborted,\n  StatusError,\n  StatusRunning,\n  StatusPending,\n} from '@backstage/core-components';\n\n\n\n\n\n\n\n\nconst renderTrigger = (build) => {\n  const subvalue = (\n    React.createElement(React.Fragment, null\n      , build.pipeline\n      , React.createElement('br', null )\n      , build.author\n    )\n  );\n  return React.createElement(SubvalueCell, { value: build.message, subvalue: subvalue,} );\n};\n\nconst renderStages = (build) => {\n  return build.stages.map(s => {\n    switch (s.status) {\n      case GoCdBuildResultStatus.successful: {\n        return (\n          React.createElement(React.Fragment, null\n            , React.createElement(StatusOK, null, s.text)\n            , React.createElement('br', null )\n            , React.createElement('br', null )\n          )\n        );\n      }\n      case GoCdBuildResultStatus.error: {\n        return (\n          React.createElement(React.Fragment, null\n            , React.createElement(StatusError, null, s.text)\n            , React.createElement('br', null )\n            , React.createElement('br', null )\n          )\n        );\n      }\n      case GoCdBuildResultStatus.running: {\n        return (\n          React.createElement(React.Fragment, null\n            , React.createElement(StatusRunning, null, s.text)\n            , React.createElement('br', null )\n            , React.createElement('br', null )\n          )\n        );\n      }\n      case GoCdBuildResultStatus.aborted: {\n        return (\n          React.createElement(React.Fragment, null\n            , React.createElement(StatusAborted, null, s.text)\n            , React.createElement('br', null )\n            , React.createElement('br', null )\n          )\n        );\n      }\n      case GoCdBuildResultStatus.pending: {\n        return (\n          React.createElement(React.Fragment, null\n            , React.createElement(StatusPending, null, s.text)\n            , React.createElement('br', null )\n            , React.createElement('br', null )\n          )\n        );\n      }\n      default: {\n        return (\n          React.createElement(React.Fragment, null\n            , React.createElement(StatusWarning, null, s.text)\n            , React.createElement('br', null )\n            , React.createElement('br', null )\n          )\n        );\n      }\n    }\n  });\n};\n\nconst renderSource = (build) => {\n  return (\n    React.createElement(Button, {\n      href: build.source,\n      target: \"_blank\",\n      rel: \"noreferrer\",\n      startIcon: React.createElement(GitHubIcon, null ),}\n    \n      , build.commitHash\n    )\n  );\n};\n\nconst renderId = (\n  goCdBaseUrl,\n  build,\n) => {\n  const goCdBuildUrl = `${goCdBaseUrl}/go/pipelines/value_stream_map/${build.buildSlug}`;\n  return (\n    React.createElement(SubvalueCell, {\n      value: \n        React.createElement(Link, { to: goCdBuildUrl, target: \"_blank\", rel: \"noreferrer\",}\n          , build.id\n        )\n      ,\n      subvalue: \n        build.triggerTime &&\n        DateTime.fromMillis(build.triggerTime).toLocaleString(\n          DateTime.DATETIME_MED,\n        )\n      ,}\n    )\n  );\n};\n\nconst renderError = (error) => {\n  return React.createElement(Alert, { severity: \"error\",}, error.message);\n};\n\nconst toBuildResults = (\n  entity,\n  builds,\n) => {\n  // TODO(julioz): What if not git 'type'?\n  const entitySourceLocation =\n    getEntitySourceLocation(entity).target.split('/tree')[0];\n  return builds.map(build => ({\n    id: build.counter,\n    source: `${entitySourceLocation}/commit/${build.build_cause?.material_revisions[0]?.modifications[0].revision}`,\n    stages: build.stages.map(s => ({\n      status: toBuildResultStatus(s.status),\n      text: s.name,\n    })),\n    buildSlug: `${build.name}/${build.counter}`,\n    message:\n      build.build_cause?.material_revisions[0]?.modifications[0].comment ?? '',\n    pipeline: build.name,\n    author:\n      build.build_cause?.material_revisions[0]?.modifications[0].user_name,\n    commitHash: build.label,\n    triggerTime: build.scheduled_date,\n  }));\n};\n\nexport const GoCdBuildsTable = (props) => {\n  const { pipelineHistory, loading, error } = props;\n  const { entity } = useEntity();\n  const [, setSelectedSearchTerm] = useState('');\n\n  const columns = [\n    {\n      title: 'ID',\n      field: 'id',\n      highlight: true,\n      render: build => renderId(props.goCdBaseUrl, build),\n    },\n    {\n      title: 'Trigger',\n      customFilterAndSearch: (query, row) =>\n        `${row.message} ${row.pipeline} ${row.author}`\n          .toLocaleUpperCase('en-US')\n          .includes(query.toLocaleUpperCase('en-US')),\n      field: 'message',\n      highlight: true,\n      render: build => renderTrigger(build),\n    },\n    {\n      title: 'Stages',\n      field: 'status',\n      render: build => renderStages(build),\n    },\n    {\n      title: 'Source',\n      field: 'source',\n      render: build => renderSource(build),\n    },\n  ];\n\n  return (\n    React.createElement(React.Fragment, null\n      , error && renderError(error)\n      , !error && (\n        React.createElement(Table, {\n          title: \"GoCD builds\" ,\n          isLoading: loading,\n          options: {\n            search: true,\n            searchAutoFocus: true,\n            debounceInterval: 800,\n            paging: true,\n            padding: 'dense',\n            pageSizeOptions: [5, 10, 20, 50],\n            showFirstLastPageButtons: false,\n            pageSize: 20,\n          },\n          columns: columns,\n          data: \n            pipelineHistory\n              ? toBuildResults(entity, pipelineHistory.pipelines) || []\n              : []\n          ,\n          onSearchChange: (searchTerm) =>\n            setSelectedSearchTerm(searchTerm)\n          ,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { groupBy, mean } from 'lodash';\nimport {\n\n\n  toBuildResultStatus,\n  GoCdBuildResultStatus,\n} from '../../api/gocdApi.model';\nimport {\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  Tooltip,\n  Typography,\n} from '@material-ui/core';\nimport { DateTime, Duration } from 'luxon';\n\n\n\n\n\n\n\nfunction runFrequency(pipelineHistory) {\n  const lastMonth = DateTime.now().minus({ month: 1 });\n  const buildLastMonth = pipelineHistory.pipelines\n    .map(p => p.scheduled_date)\n    .filter((d) => !!d)\n    .map(d => DateTime.fromMillis(d))\n    .filter(d => d > lastMonth).length;\n  return `${buildLastMonth} last month`;\n}\n\nfunction meanTimeBetweenFailures(jobs) {\n  const timeBetweenFailures = [];\n  for (let index = 1; index < jobs.length; index++) {\n    const job = jobs[index];\n    if (!job.result) {\n      continue;\n    }\n    if (toBuildResultStatus(job.result) === GoCdBuildResultStatus.error) {\n      let previousFailedJob = null;\n      for (let j = index - 1; j >= 0; j--) {\n        const candidateJob = jobs[j];\n        if (!candidateJob.result) {\n          continue;\n        }\n        if (\n          toBuildResultStatus(candidateJob.result) ===\n          GoCdBuildResultStatus.error\n        ) {\n          previousFailedJob = candidateJob;\n          break;\n        }\n      }\n      if (\n        !previousFailedJob ||\n        !job.scheduled_date ||\n        !previousFailedJob.scheduled_date\n      ) {\n        continue;\n      }\n      const failedJobDate = DateTime.fromMillis(job.scheduled_date);\n      const previousFailedJobDate = DateTime.fromMillis(\n        previousFailedJob.scheduled_date,\n      );\n      const timeBetweenFailure = failedJobDate.diff(previousFailedJobDate);\n      timeBetweenFailures.push(timeBetweenFailure);\n    }\n  }\n  return formatMean(timeBetweenFailures);\n}\n\n/**\n * Imagine a sequence like:\n * S - S - S - F - S - F - F - S - S\n *\n * We iterate until finding a failure, and then iterate forward\n * until we find the first immediate success to then\n * calculate the time difference between the scheduling of the jobs.\n */\nfunction meanTimeToRecovery(jobs) {\n  const timeToRecoverIntervals = [];\n  for (let index = 0; index < jobs.length; index++) {\n    const job = jobs[index];\n    if (!job.result) {\n      continue;\n    }\n    if (toBuildResultStatus(job.result) === GoCdBuildResultStatus.error) {\n      let nextSuccessfulJob = null;\n      for (let j = index + 1; j < jobs.length; j++) {\n        const candidateJob = jobs[j];\n        if (!candidateJob.result) {\n          continue;\n        }\n        if (\n          toBuildResultStatus(candidateJob.result) ===\n          GoCdBuildResultStatus.successful\n        ) {\n          nextSuccessfulJob = candidateJob;\n          break;\n        }\n      }\n      if (\n        !nextSuccessfulJob ||\n        !job.scheduled_date ||\n        !nextSuccessfulJob.scheduled_date\n      ) {\n        continue;\n      }\n      const failedJobDate = DateTime.fromMillis(job.scheduled_date);\n      const successfulJobDate = DateTime.fromMillis(\n        nextSuccessfulJob.scheduled_date,\n      );\n      const timeToRecovery = successfulJobDate.diff(failedJobDate);\n      timeToRecoverIntervals.push(timeToRecovery);\n    }\n  }\n\n  return formatMean(timeToRecoverIntervals);\n}\n\nfunction formatMean(durations) {\n  if (durations.length === 0) {\n    return 'N/A';\n  }\n\n  const mttr = Duration.fromMillis(\n    mean(durations.map(i => i.milliseconds)),\n  );\n  return mttr.toFormat(\"d'd' h'h' m'm' s's'\");\n}\n\nfunction failureRate(jobs)\n\n\n {\n  const resultGroups = new Map(\n    Object.entries(groupBy(jobs, 'result')).map(([key, value]) => [\n      toBuildResultStatus(key),\n      value.flat(),\n    ]),\n  );\n  const failedJobs = resultGroups.get(GoCdBuildResultStatus.error);\n  if (!failedJobs) {\n    return {\n      title: '0',\n      subtitle: '(no failed jobs found)',\n    };\n  }\n\n  resultGroups.delete(GoCdBuildResultStatus.error);\n  const nonFailedJobs = Array.from(resultGroups.values()).flat();\n\n  const totalJobs = failedJobs.length + nonFailedJobs.length;\n  const percentage = (failedJobs.length / totalJobs) * 100;\n  const decimalPercentage = (Math.round(percentage * 100) / 100).toFixed(2);\n  return {\n    title: `${decimalPercentage}%`,\n    subtitle: `(${failedJobs.length} out of ${totalJobs} jobs)`,\n  };\n}\n\nexport const GoCdBuildsInsights = (\n  props,\n) => {\n  const { pipelineHistory, loading, error } = props;\n\n  if (loading || error || !pipelineHistory) {\n    return React.createElement(React.Fragment, null);\n  }\n\n  // We reverse the array to calculate insights to make sure jobs are ordered\n  // by their schedule date.\n  const stages = pipelineHistory.pipelines\n    .slice()\n    .reverse()\n    .map(p => p.stages)\n    .flat();\n  const jobs = stages.map(s => s.jobs).flat();\n\n  const failureRateObj = failureRate(jobs);\n\n  return (\n    React.createElement(Box, { 'data-testid': \"GoCdBuildsInsightsBox\", sx: { mb: 1 },}\n      , React.createElement(Grid, { container: true, spacing: 1,}\n        , React.createElement(Grid, { item: true, xs: 6, sm: 3,}\n          , React.createElement(Tooltip, { title: \"What is your deployment frequency?\"    ,}\n            , React.createElement(Card, null\n              , React.createElement(CardContent, null\n                , React.createElement(Typography, { variant: \"body2\",}, \"Run Frequency\" )\n                , React.createElement(Typography, { variant: \"h4\",}\n                  , runFrequency(pipelineHistory)\n                )\n              )\n            )\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: 6, sm: 3,}\n          , React.createElement(Tooltip, { title: \"How long does it take to fix a failure?\"        ,}\n            , React.createElement(Card, null\n              , React.createElement(CardContent, null\n                , React.createElement(Typography, { variant: \"body2\",}, \"Mean Time to Recovery\"   )\n                , React.createElement(Typography, { variant: \"h4\",}, meanTimeToRecovery(jobs))\n              )\n            )\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: 6, sm: 3,}\n          , React.createElement(Tooltip, { title: \"How often do changes fail?\"    ,}\n            , React.createElement(Card, null\n              , React.createElement(CardContent, null\n                , React.createElement(Typography, { variant: \"body2\",}, \"Mean Time Between Failures\"\n\n                )\n                , React.createElement(Typography, { variant: \"h4\",}\n                  , meanTimeBetweenFailures(jobs)\n                )\n              )\n            )\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: 6, sm: 3,}\n          , React.createElement(Tooltip, { title: \"What percentage of changes result in a failure?\"       ,}\n            , React.createElement(Card, null\n              , React.createElement(CardContent, null\n                , React.createElement(Typography, { variant: \"body2\",}, \"Failure Rate\" )\n                , React.createElement(Typography, { variant: \"h4\",}, failureRateObj.title)\n                , React.createElement(Typography, { variant: \"body2\",}\n                  , failureRateObj.subtitle\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { createStyles, makeStyles, } from '@material-ui/core/styles';\nimport React from 'react';\n\n\n\n\n\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120,\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\n\n\n\n\n\n\n\nconst renderItems = (items) => {\n  return items.map(item => {\n    return (\n      React.createElement(MenuItem, { value: item.value, key: item.label,}\n        , item.label\n      )\n    );\n  });\n};\n\nexport const SelectComponent = ({\n  value,\n  items,\n  label,\n  onChange,\n}) => {\n  const classes = useStyles();\n\n  const handleChange = (event) => {\n    const val = event.target.value ;\n    onChange(val);\n  };\n\n  return (\n    React.createElement(FormControl, {\n      variant: \"outlined\",\n      className: classes.formControl,\n      disabled: items.length === 0,}\n    \n      , React.createElement(InputLabel, null, label)\n      , React.createElement(Select, { label: label, value: value, onChange: handleChange,}\n        , renderItems(items)\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState } from 'react';\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  Content,\n  ContentHeader,\n  MissingAnnotationEmptyState,\n  EmptyState,\n  Page,\n} from '@backstage/core-components';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { gocdApiRef } from '../../plugin';\nimport { GoCdBuildsTable } from '../GoCdBuildsTable/GoCdBuildsTable';\nimport { GoCdBuildsInsights } from '../GoCdBuildsInsights/GoCdBuildsInsights';\n\nimport { Select } from '../Select';\n\n/**\n * Constant storing GoCD pipelines annotation.\n *\n * @public\n */\nexport const GOCD_PIPELINES_ANNOTATION = 'gocd.org/pipelines';\n\n/**\n * Returns true if GoCD annotation is present in the given entity.\n *\n * @public\n */\nexport const isGoCdAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[GOCD_PIPELINES_ANNOTATION]);\n\nexport const GoCdBuildsComponent = () => {\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const rawPipelines = (\n    entity.metadata.annotations?.[GOCD_PIPELINES_ANNOTATION] \n\n\n  )\n    ?.split(',')\n    .map(p => p.trim());\n  const gocdApi = useApi(gocdApiRef);\n\n  const [selectedPipeline, setSelectedPipeline] = useState(\n    rawPipelines ? rawPipelines[0] : '',\n  );\n\n  const {\n    value: pipelineHistory,\n    loading,\n    error,\n  } = useAsync(async () => {\n    return await gocdApi.getPipelineHistory(selectedPipeline);\n  }, [selectedPipeline]);\n\n  const onSelectedPipelineChanged = (pipeline) => {\n    setSelectedPipeline(pipeline);\n  };\n\n  const getSelectionItems = (pipelines) => {\n    return pipelines.map(p => ({ label: p, value: p }));\n  };\n\n  function isError(\n    apiResult,\n  ) {\n    return (apiResult )?.message !== undefined;\n  }\n\n  if (!rawPipelines) {\n    return (\n      React.createElement(MissingAnnotationEmptyState, { annotation: GOCD_PIPELINES_ANNOTATION,} )\n    );\n  }\n\n  if (isError(pipelineHistory)) {\n    return (\n      React.createElement(EmptyState, {\n        title: \"GoCD pipelines\" ,\n        description: `Could not fetch pipelines defined for entity ${entity.metadata.name}. Error: ${pipelineHistory.message}`,\n        missing: \"content\",}\n      )\n    );\n  }\n\n  if (!loading && !pipelineHistory) {\n    return (\n      React.createElement(EmptyState, {\n        title: \"GoCD pipelines\" ,\n        description: `We could not find pipelines defined for entity ${entity.metadata.name}.`,\n        missing: \"data\",}\n      )\n    );\n  }\n\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Content, { noPadding: true,}\n        , React.createElement(ContentHeader, { title: entity.metadata.name,}\n          , React.createElement(Select, {\n            value: selectedPipeline,\n            onChange: pipeline => onSelectedPipelineChanged(pipeline),\n            label: \"Pipeline\",\n            items: getSelectionItems(rawPipelines),}\n          )\n        )\n        , React.createElement(GoCdBuildsInsights, {\n          pipelineHistory: pipelineHistory,\n          loading: loading,\n          error: error,}\n        )\n        , React.createElement(GoCdBuildsTable, {\n          goCdBaseUrl: config.getString('gocd.baseUrl'),\n          pipelineHistory: pipelineHistory,\n          loading: loading,\n          error: error,}\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\n\nconst DEFAULT_PAGE_SIZE = 100;\n\nexport class GoCdClientApi  {\n  constructor(  discoveryApi) {;this.discoveryApi = discoveryApi;}\n\n  async getPipelineHistory(\n    pipelineName,\n  ) {\n    const baseUrl = await this.discoveryApi.getBaseUrl('proxy');\n    const pipelineHistoryResponse = await fetch(\n      `${baseUrl}/gocd/pipelines/${pipelineName}/history?page_size=${DEFAULT_PAGE_SIZE}`,\n      {\n        headers: {\n          Accept: 'application/vnd.go.cd+json',\n        },\n      },\n    );\n\n    if (!pipelineHistoryResponse.ok) {\n      throw await ResponseError.fromResponse(pipelineHistoryResponse);\n    }\n\n    return await pipelineHistoryResponse.json();\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { GoCdClientApi } from './api/gocdApi.client';\n\nimport {\n  discoveryApiRef,\n  createApiRef,\n  createApiFactory,\n  createPlugin,\n} from '@backstage/core-plugin-api';\n\nexport const gocdApiRef = createApiRef({\n  id: 'plugin.gocd.service',\n});\n\n/**\n * Plugin definition.\n *\n * @public\n */\nexport const gocdPlugin = createPlugin({\n  id: 'gocd',\n  apis: [\n    createApiFactory({\n      api: gocdApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => {\n        return new GoCdClientApi(discoveryApi);\n      },\n    }),\n  ],\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nexport class StorageBucket  {\n   static noPropAccessProxyHandler = {\n    get(target, prop) {\n      if (prop in target) {\n        return target[prop ];\n      }\n      throw new Error(\n        'Direct property access is not allowed for StorageBuckets',\n      );\n    },\n    set() {\n      throw new Error(\n        'Direct property access is not allowed for StorageBuckets',\n      );\n    },\n  };\n\n  static forStorage(storage, bucket) {\n    const storageBucket = new StorageBucket(storage, bucket);\n    return new Proxy(storageBucket, StorageBucket.noPropAccessProxyHandler);\n  }\n\n  static forLocalStorage(bucket) {\n    return StorageBucket.forStorage(localStorage, bucket);\n  }\n\n   constructor(\n      storage,\n      bucket,\n  ) {;this.storage = storage;this.bucket = bucket;}\n\n  \n\n  get length() {\n    throw new Error('Method not implemented.');\n  }\n\n  clear() {\n    this.storage.removeItem(this.bucket);\n  }\n\n  getItem(key) {\n    return this.read()?.[key] ?? null;\n  }\n\n  key() {\n    throw new Error('Method not implemented.');\n  }\n\n  removeItem(key) {\n    const data = this.read();\n    if (!data) {\n      return;\n    }\n\n    if (key in data) {\n      delete data[key];\n      this.write(data);\n    }\n  }\n\n  setItem(key, value) {\n    const data = this.read() ?? {};\n    data[key] = value;\n    this.write(data);\n  }\n\n   read() {\n    const bucketValue = this.storage.getItem(this.bucket);\n    if (!bucketValue) {\n      return undefined;\n    }\n\n    try {\n      return JSON.parse(bucketValue);\n    } catch {\n      return undefined;\n    }\n  }\n\n   write(data) {\n    this.storage.setItem(this.bucket, JSON.stringify(data));\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, Suspense } from 'react';\nimport { Tabs, Tab, makeStyles, Typography, Divider } from '@material-ui/core';\nimport 'graphiql/graphiql.css';\nimport { StorageBucket } from '../../lib/storage';\n\n\nimport { Progress } from '@backstage/core-components';\n\nconst GraphiQL = React.lazy(() => import('graphiql'));\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n  },\n  tabs: {\n    background: theme.palette.background.paper,\n  },\n  graphiQlWrapper: {\n    flex: 1,\n    '@global': {\n      '.graphiql-container': {\n        boxSizing: 'initial',\n      },\n    },\n  },\n}));\n\n\n\n\n\nexport const GraphiQLBrowser = (props) => {\n  const { endpoints } = props;\n\n  const classes = useStyles();\n  const [tabIndex, setTabIndex] = useState(0);\n\n  if (!endpoints.length) {\n    return React.createElement(Typography, { variant: \"h4\",}, \"No endpoints available\"  );\n  }\n\n  const { id, fetcher } = endpoints[tabIndex];\n  const storage = StorageBucket.forLocalStorage(`plugin/graphiql/data/${id}`);\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Suspense, { fallback: React.createElement(Progress, null ),}\n        , React.createElement(Tabs, {\n          classes: { root: classes.tabs },\n          value: tabIndex,\n          onChange: (_, value) => setTabIndex(value),\n          indicatorColor: \"primary\",}\n        \n          , endpoints.map(({ title }, index) => (\n            React.createElement(Tab, { key: index, label: title, value: index,} )\n          ))\n        )\n        , React.createElement(Divider, null )\n        , React.createElement('div', { className: classes.graphiQlWrapper,}\n          , React.createElement(GraphiQL, {\n            headerEditorEnabled: true,\n            key: tabIndex,\n            fetcher: fetcher,\n            storage: storage,}\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport 'graphiql/graphiql.css';\nimport { graphQlBrowseApiRef } from '../../lib/api';\nimport { GraphiQLBrowser } from '../GraphiQLBrowser';\nimport { Typography } from '@material-ui/core';\nimport {\n  Content,\n  Header,\n  HeaderLabel,\n  Page,\n  Progress,\n} from '@backstage/core-components';\n\n/** @public */\nexport const GraphiQLPage = () => {\n  const graphQlBrowseApi = useApi(graphQlBrowseApiRef);\n  const endpoints = useAsync(() => graphQlBrowseApi.getEndpoints());\n\n  let content;\n\n  if (endpoints.loading) {\n    content = (\n      React.createElement(Content, null\n        , React.createElement(Progress, null )\n      )\n    );\n  } else if (endpoints.error) {\n    content = (\n      React.createElement(Content, null\n        , React.createElement(Typography, { variant: \"h4\", color: \"error\",}\n          /* TODO: provide a proper error component */, \"Failed to load GraphQL endpoints, \"\n               , String(endpoints.error)\n        )\n      )\n    );\n  } else {\n    content = (\n      React.createElement(Content, { noPadding: true,}\n        , React.createElement(GraphiQLBrowser, { endpoints: endpoints.value,} )\n      )\n    );\n  }\n\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Header, { title: \"GraphiQL\",}\n        , React.createElement(HeaderLabel, { label: \"Owner\", value: \"Spotify\",} )\n        , React.createElement(HeaderLabel, { label: \"Lifecycle\", value: \"Alpha\",} )\n      )\n      , content\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Helper for generic http endpoints\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport class GraphQLEndpoints  {\n  // Create a support\n  static create(config) {\n    const { id, title, url, method = 'POST' } = config;\n    return {\n      id,\n      title,\n      fetcher: async (params, options = {}) => {\n        const body = JSON.stringify(params);\n        const headers = {\n          'Content-Type': 'application/json',\n          ...config.headers,\n          ...options.headers,\n        };\n        const res = await fetch(url, {\n          method,\n          headers,\n          body,\n        });\n        return res.json();\n      },\n    };\n  }\n\n  /**\n   * Creates a GitHub GraphQL endpoint that uses the GithubAuth API to authenticate requests.\n   *\n   * If a request requires more permissions than is granted by the existing session,\n   * the fetcher will automatically ask for the additional scopes that are required.\n   */\n  static github(config) {\n    const {\n      id,\n      title,\n      url = 'https://api.github.com/graphql',\n      errorApi,\n      githubAuthApi,\n    } = config;\n    \n\n\n\n    return {\n      id,\n      title,\n      fetcher: async (params, options = {}) => {\n        let retried = false;\n\n        const doRequest = async () => {\n          const res = await fetch(url, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              Authorization: `Bearer ${await githubAuthApi.getAccessToken()}`,\n              ...options.headers,\n            },\n            body: JSON.stringify(params),\n          });\n          if (!res.ok) {\n            throw new Error(\n              `Request failed with status ${res.status} ${res.statusText}`,\n            );\n          }\n          const data = (await res.json()) ;\n\n          if (!data.errors || retried) {\n            return data;\n          }\n          retried = true;\n\n          const missingScopes = data.errors\n            .filter(({ type }) => type === 'INSUFFICIENT_SCOPES')\n            .flatMap(({ message }) => {\n              const scopesMatch = message.match(\n                /one of the following scopes: (\\[.*?\\])/,\n              );\n              if (!scopesMatch) {\n                return [];\n              }\n              try {\n                const scopes = JSON.parse(scopesMatch[1].replace(/'/g, '\"'));\n                return scopes;\n              } catch (error) {\n                if (errorApi) {\n                  errorApi.post(\n                    new Error(\n                      `Failed to parse scope string \"${scopesMatch[1]}\", ${error}`,\n                    ),\n                  );\n                }\n                return [];\n              }\n            });\n\n          await githubAuthApi.getAccessToken(missingScopes);\n          return doRequest();\n        };\n\n        return await doRequest();\n      },\n    };\n  }\n\n  static from(endpoints) {\n    return new GraphQLEndpoints(endpoints);\n  }\n\n   constructor(  endpoints) {;this.endpoints = endpoints;}\n\n  async getEndpoints() {\n    return this.endpoints;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/** @public */\nexport const graphQlBrowseApiRef = createApiRef({\n  id: 'plugin.graphiql.browse',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { useOutlet } from 'react-router';\n\nexport const HomepageCompositionRoot = (props\n\n\n) => {\n  const outlet = useOutlet();\n  const children = props.children ?? outlet;\n  return React.createElement(React.Fragment, null, children);\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from '@material-ui/core';\n\nexport const SettingsModal = (props\n\n\n\n\n) => {\n  const { open, close, componentName, children } = props;\n\n  return (\n    React.createElement(Dialog, { open: open, onClose: () => close(),}\n      , React.createElement(DialogTitle, null, \"Settings - \"  , componentName)\n      , React.createElement(DialogContent, null, children)\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, { onClick: () => close(), color: \"primary\", variant: \"contained\",}, \"Close\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { HeaderLabel } from '@backstage/core-components';\n\nconst timeFormat = {\n  hour: '2-digit',\n  minute: '2-digit',\n};\n\n\n\n\n\n\n\n\n\n\n\nfunction getTimes(clockConfigs) {\n  const d = new Date();\n  const lang = window.navigator.language;\n\n  const clocks = [];\n\n  if (!clockConfigs) {\n    return clocks;\n  }\n\n  for (const clockConfig of clockConfigs) {\n    let label = clockConfig.label;\n\n    const options = {\n      timeZone: clockConfig.timeZone,\n      ...timeFormat,\n    };\n\n    try {\n      new Date().toLocaleString(lang, options);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `The timezone ${options.timeZone} is invalid. Defaulting to GMT`,\n      );\n      options.timeZone = 'GMT';\n      label = 'GMT';\n    }\n\n    const time = d.toLocaleTimeString(lang, options);\n    clocks.push({ time, label });\n  }\n\n  return clocks;\n}\n\n/** @public */\nexport const HeaderWorldClock = (props) => {\n  const { clockConfigs } = props;\n\n  const defaultTimes = [];\n  const [clocks, setTimes] = React.useState(defaultTimes);\n\n  React.useEffect(() => {\n    setTimes(getTimes(clockConfigs));\n\n    const intervalId = setInterval(() => {\n      setTimes(getTimes(clockConfigs));\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [clockConfigs]);\n\n  if (clocks.length !== 0) {\n    return (\n      React.createElement(React.Fragment, null\n        , clocks.map(clock => (\n          React.createElement(HeaderLabel, {\n            label: clock.label,\n            value: clock.time,\n            key: clock.label,}\n          )\n        ))\n      )\n    );\n  }\n  return null;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiRef,\n\n\n} from '@backstage/core-plugin-api';\n\nimport { ResponseError } from '@backstage/errors';\n\nexport const jenkinsApiRef = createApiRef({\n  id: 'plugin.jenkins.service2',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class JenkinsClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  async getProjects(options\n\n\n) {\n    const { entity, filter } = options;\n    const url = new URL(\n      `${await this.discoveryApi.getBaseUrl(\n        'jenkins',\n      )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n        entity.kind,\n      )}/${encodeURIComponent(entity.name)}/projects`,\n    );\n\n    if (filter.branch) {\n      url.searchParams.append('branch', filter.branch);\n    }\n\n    const idToken = await this.getToken();\n    const response = await fetch(url.href, {\n      method: 'GET',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    return (\n      (await response.json()).projects?.map((p) => ({\n        ...p,\n        onRestartClick: () => {\n          return this.retry({\n            entity,\n            jobFullName: p.fullName,\n            buildNumber: String(p.lastBuild.number),\n          });\n        },\n      })) || []\n    );\n  }\n\n  async getBuild(options\n\n\n\n) {\n    const { entity, jobFullName, buildNumber } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\n      'jenkins',\n    )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n      entity.kind,\n    )}/${encodeURIComponent(entity.name)}/job/${encodeURIComponent(\n      jobFullName,\n    )}/${encodeURIComponent(buildNumber)}`;\n\n    const idToken = await this.getToken();\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    return (await response.json()).build;\n  }\n\n  async retry(options\n\n\n\n) {\n    const { entity, jobFullName, buildNumber } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\n      'jenkins',\n    )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n      entity.kind,\n    )}/${encodeURIComponent(entity.name)}/job/${encodeURIComponent(\n      jobFullName,\n    )}/${encodeURIComponent(buildNumber)}:rebuild`;\n\n    const idToken = await this.getToken();\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n\n   async getToken() {\n    const { token } = await this.identityApi.getCredentials();\n    return token;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  StatusPending,\n  StatusRunning,\n  StatusOK,\n  StatusWarning,\n  StatusAborted,\n  StatusError,\n} from '@backstage/core-components';\n\nexport const JenkinsRunStatus = ({\n  status,\n}\n\n) => {\n  if (status === undefined) return null;\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n    case 'scheduled':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusPending, null ), \" Queued\"\n        )\n      );\n    case 'running':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusRunning, null ), \" In progress\"\n        )\n      );\n    case 'unstable':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusWarning, null ), \" Unstable\"\n        )\n      );\n    case 'failure':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusError, null ), \" Failed\"\n        )\n      );\n    case 'success':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusOK, null ), \" Completed\"\n        )\n      );\n    case 'aborted':\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusAborted, null ), \" Aborted\"\n        )\n      );\n    default:\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusWarning, null ), \" \" , status\n        )\n      );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { LinearProgress, makeStyles, } from '@material-ui/core';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime, Duration } from 'luxon';\nimport React from 'react';\nimport { JenkinsRunStatus } from '../BuildsPage/lib/Status';\nimport { ErrorType, useBuilds } from '../useBuilds';\nimport {\n  InfoCard,\n\n  Link,\n  StructuredMetadataTable,\n  WarningPanel,\n} from '@backstage/core-components';\n\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n});\n\nconst WidgetContent = ({\n  loading,\n  latestRun,\n}\n\n\n\n) => {\n  const classes = useStyles();\n  if (loading || !latestRun) return React.createElement(LinearProgress, null );\n  const displayDate = DateTime.fromMillis(\n    latestRun.lastBuild.timestamp,\n  ).toRelative();\n  const displayDuration =\n    (latestRun.lastBuild.building ? 'Running for ' : '') +\n    DateTime.local()\n      .minus(Duration.fromMillis(latestRun.lastBuild.duration))\n      .toRelative({ locale: 'en' })\n      ?.replace(' ago', '');\n\n  return (\n    React.createElement(StructuredMetadataTable, {\n      metadata: {\n        status: (\n          React.createElement(React.Fragment, null\n            , React.createElement(JenkinsRunStatus, { status: latestRun.lastBuild.status,} )\n          )\n        ),\n        build: latestRun.fullDisplayName,\n        'latest run': displayDate,\n        duration: displayDuration,\n        link: (\n          React.createElement(Link, { to: latestRun.lastBuild.url,}, \"See more on Jenkins\"\n               , ' '\n            , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n          )\n        ),\n      },}\n    )\n  );\n};\n\nconst JenkinsApiErrorPanel = ({\n  message,\n  errorType,\n}\n\n\n) => {\n  let title = undefined;\n  if (errorType === ErrorType.CONNECTION_ERROR) {\n    title = \"Can't connect to Jenkins\";\n  } else if (errorType === ErrorType.NOT_FOUND) {\n    title = \"Can't find Jenkins project\";\n  }\n\n  return React.createElement(WarningPanel, { severity: \"error\", title: title, message: message,} );\n};\n\nexport const LatestRunCard = ({\n  branch = 'master',\n  variant,\n}\n\n\n) => {\n  const [{ projects, loading, error }] = useBuilds({ branch });\n  const latestRun = projects?.[0];\n  return (\n    React.createElement(InfoCard, { title: `Latest ${branch} build`, variant: variant,}\n      , !error ? (\n        React.createElement(WidgetContent, {\n          loading: loading,\n          branch: branch,\n          latestRun: latestRun,}\n        )\n      ) : (\n        React.createElement(JenkinsApiErrorPanel, {\n          message: error.message,\n          errorType: error.errorType,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const JENKINS_ANNOTATION = 'jenkins.io/job-full-name';\n// @deprecated The legacy annotation used for identifying Jenkins jobs, use\n// JENKINS_ANNOTATION instead.\nexport const LEGACY_JENKINS_ANNOTATION = 'jenkins.io/github-folder';\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { RESOURCE_TYPE_CATALOG_ENTITY } from '@backstage/plugin-catalog-common';\nimport { createPermission } from '@backstage/plugin-permission-common';\n\n/**\n * This permission is used to determine if a user is allowed to execute an action in jenkins plugin\n *\n * @public\n */\nexport const jenkinsExecutePermission = createPermission({\n  name: 'jenkins.execute',\n  attributes: {\n    action: 'update',\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Link, Progress, Table, } from '@backstage/core-components';\nimport { alertApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { useEntityPermission } from '@backstage/plugin-catalog-react';\nimport { Box, IconButton, Tooltip, Typography } from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport { default as React, useState } from 'react';\n\nimport JenkinsLogo from '../../../../assets/JenkinsLogo.svg';\nimport { buildRouteRef } from '../../../../plugin';\nimport { useBuilds } from '../../../useBuilds';\nimport { JenkinsRunStatus } from '../Status';\nimport { jenkinsExecutePermission } from '@backstage/plugin-jenkins-common';\n\nconst FailCount = ({ count }) => {\n  if (count !== 0) {\n    return React.createElement(React.Fragment, null, count, \" failed\" );\n  }\n  return null;\n};\n\nconst SkippedCount = ({ count }) => {\n  if (count !== 0) {\n    return React.createElement(React.Fragment, null, count, \" skipped\" );\n  }\n  return null;\n};\n\nconst FailSkippedWidget = ({\n  skipped,\n  failed,\n}\n\n\n) => {\n  if (skipped === 0 && failed === 0) {\n    return null;\n  }\n\n  if (skipped !== 0 && failed !== 0) {\n    return (\n      React.createElement(React.Fragment, null\n        , ' ', \"(\"\n        , React.createElement(FailCount, { count: failed,} ), \", \" , React.createElement(SkippedCount, { count: skipped,} ), \")\"\n      )\n    );\n  }\n\n  if (failed !== 0) {\n    return (\n      React.createElement(React.Fragment, null\n        , ' ', \"(\"\n        , React.createElement(FailCount, { count: failed,} ), \")\"\n      )\n    );\n  }\n\n  if (skipped !== 0) {\n    return (\n      React.createElement(React.Fragment, null\n        , ' ', \"(\"\n        , React.createElement(SkippedCount, { count: skipped,} ), \")\"\n      )\n    );\n  }\n\n  return null;\n};\n\nconst generatedColumns = [\n  {\n    title: 'Timestamp',\n    defaultSort: 'desc',\n    hidden: true,\n    field: 'lastBuild.timestamp',\n  },\n  {\n    title: 'Build',\n    field: 'fullName',\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        if (!row.fullName || !row.lastBuild?.number) {\n          return (\n            React.createElement(React.Fragment, null\n              , row.fullName ||\n                row.fullDisplayName ||\n                row.displayName ||\n                'Unknown'\n            )\n          );\n        }\n\n        return (\n          React.createElement(Link, {\n            to: routeLink({\n              jobFullName: encodeURIComponent(row.fullName),\n              buildNumber: String(row.lastBuild?.number),\n            }),}\n          \n            , row.fullDisplayName\n          )\n        );\n      };\n\n      return React.createElement(LinkWrapper, null );\n    },\n  },\n  {\n    title: 'Source',\n    field: 'lastBuild.source.branchName',\n    render: (row) => (\n      React.createElement(React.Fragment, null\n        , React.createElement('p', null\n          , React.createElement(Link, { to: row.lastBuild?.source?.url ?? '',}\n            , row.lastBuild?.source?.branchName\n          )\n        )\n        , React.createElement('p', null, row.lastBuild?.source?.commit?.hash)\n      )\n    ),\n  },\n  {\n    title: 'Status',\n    field: 'status',\n    render: (row) => {\n      return (\n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(JenkinsRunStatus, { status: row.status,} )\n        )\n      );\n    },\n  },\n  {\n    title: 'Tests',\n    sorting: false,\n    render: (row) => {\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement('p', null\n            , row.lastBuild?.tests && (\n              React.createElement(Link, { to: row.lastBuild?.tests.testUrl ?? '',}\n                , row.lastBuild?.tests.passed, \" / \"  , row.lastBuild?.tests.total, ' ', \"passed\"\n\n                , React.createElement(FailSkippedWidget, {\n                  skipped: row.lastBuild?.tests.skipped,\n                  failed: row.lastBuild?.tests.failed,}\n                )\n              )\n            )\n\n            , !row.lastBuild?.tests && 'n/a'\n          )\n        )\n      );\n    },\n  },\n  {\n    title: 'Actions',\n    sorting: false,\n    render: (row) => {\n      const ActionWrapper = () => {\n        const [isLoadingRebuild, setIsLoadingRebuild] = useState(false);\n        const { allowed, loading } = useEntityPermission(\n          jenkinsExecutePermission,\n        );\n\n        const alertApi = useApi(alertApiRef);\n\n        const onRebuild = async () => {\n          if (row.onRestartClick) {\n            setIsLoadingRebuild(true);\n            try {\n              await row.onRestartClick();\n              alertApi.post({\n                message: 'Jenkins re-build has successfully executed',\n                severity: 'success',\n              });\n            } catch (e) {\n              alertApi.post({\n                message: `Jenkins re-build has failed. Error: ${e.message}`,\n                severity: 'error',\n              });\n            } finally {\n              setIsLoadingRebuild(false);\n            }\n          }\n        };\n\n        return (\n          React.createElement(Tooltip, { title: \"Rerun build\" ,}\n            , React.createElement(React.Fragment, null\n              , isLoadingRebuild && React.createElement(Progress, null )\n              , !isLoadingRebuild && (\n                React.createElement(IconButton, { onClick: onRebuild, disabled: loading || !allowed,}\n                  , React.createElement(RetryIcon, null )\n                )\n              )\n            )\n          )\n        );\n      };\n      return React.createElement(ActionWrapper, null );\n    },\n    width: '10%',\n  },\n];\n\n\n\n\n\n\n\n\n\n\n\n\nexport const CITableView = ({\n  loading,\n  pageSize,\n  page,\n  retry,\n  projects,\n  onChangePage,\n  onChangePageSize,\n  total,\n}) => {\n  const projectsInPage = projects?.slice(\n    page * pageSize,\n    Math.min(projects.length, (page + 1) * pageSize),\n  );\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: 'dense' },\n      totalCount: total,\n      page: page,\n      actions: [\n        {\n          icon: () => React.createElement(RetryIcon, null ),\n          tooltip: 'Refresh Data',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ],\n      data: projectsInPage ?? [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      title: \n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement('img', { src: JenkinsLogo, alt: \"Jenkins logo\" , height: \"50px\",} )\n          , React.createElement(Box, { mr: 2,} )\n          , React.createElement(Typography, { variant: \"h6\",}, \"Projects\")\n        )\n      ,\n      columns: generatedColumns,}\n    )\n  );\n};\n\nexport const CITable = () => {\n  const [tableProps, { setPage, retry, setPageSize }] = useBuilds();\n\n  return (\n    React.createElement(CITableView, {\n      ...tableProps,\n      retry: retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef } from 'react';\n\nexport const useAsyncPolling = (\n  pollingFn,\n  interval,\n) => {\n  const isPolling = useRef(false);\n  const startPolling = async () => {\n    if (isPolling.current === true) return;\n    isPolling.current = true;\n\n    while (isPolling.current === true) {\n      await pollingFn();\n      await new Promise(resolve => setTimeout(resolve, interval));\n    }\n  };\n\n  const stopPolling = () => {\n    isPolling.current = false;\n  };\n  return { startPolling, stopPolling };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useCallback } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { jenkinsApiRef } from '../api';\nimport { useAsyncPolling } from './useAsyncPolling';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\nconst INTERVAL_AMOUNT = 1500;\n\n/**\n * Hook to expose a specific build.\n * @param jobFullName - the full name of the project (job with builds, not a folder). e.g. \"department-A/team-1/project-foo/master\"\n * @param buildNumber - the number of the build. e.g. \"13\"\n */\nexport function useBuildWithSteps({\n  jobFullName,\n  buildNumber,\n}\n\n\n) {\n  const api = useApi(jenkinsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const { entity } = useEntity();\n\n  const getBuildWithSteps = useCallback(async () => {\n    try {\n      const entityName = await getCompoundEntityRef(entity);\n      return api.getBuild({ entity: entityName, jobFullName, buildNumber });\n    } catch (e) {\n      errorApi.post(e);\n      return Promise.reject(e);\n    }\n  }, [buildNumber, jobFullName, entity, api, errorApi]);\n\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuildWithSteps(),\n    [getBuildWithSteps],\n  );\n\n  const { startPolling, stopPolling } = useAsyncPolling(\n    getBuildWithSteps,\n    INTERVAL_AMOUNT,\n  );\n\n  return [\n    { loading, value, retry },\n    {\n      getBuildWithSteps,\n      startPolling,\n      stopPolling,\n    },\n  ] ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Box,\n  Link as MaterialLink,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport React from 'react';\nimport { buildRouteRef } from '../../plugin';\nimport { JenkinsRunStatus } from '../BuildsPage/lib/Status';\nimport { useBuildWithSteps } from '../useBuildWithSteps';\n\nimport { Breadcrumbs, Content, Link } from '@backstage/core-components';\nimport { useRouteRefParams } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 720,\n  },\n  table: {\n    padding: theme.spacing(1),\n  },\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n}));\n\nconst BuildWithStepsView = () => {\n  // TODO: Add a test that react-router decodes this (even though `generatePath` doesn't encode it for you!)\n  const { jobFullName, buildNumber } = useRouteRefParams(buildRouteRef);\n  const classes = useStyles();\n\n  const [{ value }] = useBuildWithSteps({ jobFullName, buildNumber });\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Breadcrumbs, { 'aria-label': \"breadcrumb\",}\n        /* TODO: don't hardcode this link */\n        , React.createElement(Link, { to: \"../../..\",}, \"Projects\")\n        , React.createElement(Typography, null, \"Run\")\n      )\n      , React.createElement(Box, { m: 2,} )\n      , React.createElement(TableContainer, { component: Paper, className: classes.table,}\n        , React.createElement(Table, null\n          , React.createElement(TableBody, null\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Branch\")\n              )\n              , React.createElement(TableCell, null, value?.source?.branchName)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Message\")\n              )\n              , React.createElement(TableCell, null, value?.source?.displayName)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Commit ID\" )\n              )\n              , React.createElement(TableCell, null, value?.source?.commit?.hash)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Status\")\n              )\n              , React.createElement(TableCell, null\n                , React.createElement(JenkinsRunStatus, { status: value?.status,} )\n              )\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Author\")\n              )\n              , React.createElement(TableCell, null, value?.source?.author)\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                , React.createElement(Typography, { noWrap: true,}, \"Jenkins\")\n              )\n              , React.createElement(TableCell, null\n                , React.createElement(MaterialLink, { target: \"_blank\", href: value?.url,}, \"View on Jenkins\"\n                    , ' '\n                  , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n                )\n              )\n            )\n            , React.createElement(TableRow, null\n              , React.createElement(TableCell, null\n                /* TODO: be SCM agnostic */\n                , React.createElement(Typography, { noWrap: true,}, \"GitHub\")\n              )\n              , React.createElement(TableCell, null\n                , React.createElement(MaterialLink, { target: \"_blank\", href: value?.source?.url,}, \"View on GitHub\"\n                    , ' '\n                  , React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon,} )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\nconst Page = () => (\n  React.createElement(Content, null\n    , React.createElement(BuildWithStepsView, null )\n  )\n);\n\nexport default Page;\nexport { BuildWithStepsView as BuildWithSteps };\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { Route, Routes } from 'react-router';\nimport { JENKINS_ANNOTATION, LEGACY_JENKINS_ANNOTATION } from '../constants';\nimport { buildRouteRef } from '../plugin';\nimport { CITable } from './BuildsPage/lib/CITable';\nimport { DetailedViewPage } from './BuildWithStepsPage/';\n\nexport const isJenkinsAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[JENKINS_ANNOTATION]) ||\n  Boolean(entity.metadata.annotations?.[LEGACY_JENKINS_ANNOTATION]);\n\n\n\nexport const Router = (_props) => {\n  const { entity } = useEntity();\n\n  if (!isJenkinsAvailable(entity)) {\n    return React.createElement(MissingAnnotationEmptyState, { annotation: JENKINS_ANNOTATION,} );\n  }\n\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(CITable, null ),} )\n      , React.createElement(Route, { path: `/${buildRouteRef.path}`, element: React.createElement(DetailedViewPage, null ),} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { jenkinsApiRef } from '../api';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\nexport var ErrorType; (function (ErrorType) {\n  const CONNECTION_ERROR = 0; ErrorType[ErrorType[\"CONNECTION_ERROR\"] = CONNECTION_ERROR] = \"CONNECTION_ERROR\";\n  const NOT_FOUND = CONNECTION_ERROR + 1; ErrorType[ErrorType[\"NOT_FOUND\"] = NOT_FOUND] = \"NOT_FOUND\";\n})(ErrorType || (ErrorType = {}));\n\n/**\n * Hook to expose the latest build for all the pipelines/projects for an entity.\n * If `branch` is provided, the latest build for only that branch will be given (but still as a list)\n *\n * TODO: deprecate branch and add a generic filter concept.\n */\nexport function useBuilds({ branch } = {}) {\n  const { entity } = useEntity();\n  const entityName = getCompoundEntityRef(entity);\n  const api = useApi(jenkinsApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(5);\n  const [error, setError] = useState\n\n\n();\n\n  const restartBuild = async (jobFullName, buildNumber) => {\n    try {\n      await api.retry({ entity: entityName, jobFullName, buildNumber });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n\n  const {\n    loading,\n    value: projects,\n    retry,\n  } = useAsyncRetry(async () => {\n    try {\n      const build = await api.getProjects({\n        entity: getCompoundEntityRef(entity),\n        filter: { branch },\n      });\n\n      setTotal(build.length);\n\n      return build;\n    } catch (e) {\n      const errorType = e.notFound\n        ? ErrorType.NOT_FOUND\n        : ErrorType.CONNECTION_ERROR;\n      setError({ message: e.message, errorType });\n      throw e;\n    }\n  }, [api, errorApi, entity, branch]);\n\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      projects,\n      total,\n      error,\n    },\n    {\n      setPage,\n      setPageSize,\n      restartBuild,\n      retry, // fetch data again\n    },\n  ] ;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  createSubRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { JenkinsClient, jenkinsApiRef } from './api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'jenkins',\n});\n\nexport const buildRouteRef = createSubRouteRef({\n  id: 'jenkins/builds',\n  path: '/builds/:jobFullName/:buildNumber',\n  parent: rootRouteRef,\n});\n\nexport const jenkinsPlugin = createPlugin({\n  id: 'jenkins',\n  apis: [\n    createApiFactory({\n      api: jenkinsApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new JenkinsClient({ discoveryApi, identityApi }),\n    }),\n  ],\n  routes: {\n    entityContent: rootRouteRef,\n  },\n});\n\nexport const EntityJenkinsContent = jenkinsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityJenkinsContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\nexport const EntityLatestJenkinsRunCard = jenkinsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLatestJenkinsRunCard',\n    component: {\n      lazy: () => import('./components/Cards').then(m => m.LatestRunCard),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const KAFKA_CONSUMER_GROUP_ANNOTATION =\n  'kafka.apache.org/consumer-groups';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { useMemo } from 'react';\nimport { KAFKA_CONSUMER_GROUP_ANNOTATION } from '../../constants';\n\nexport const useConsumerGroupsForEntity = () => {\n  const { entity } = useEntity();\n  const annotation =\n    entity.metadata.annotations?.[KAFKA_CONSUMER_GROUP_ANNOTATION] ?? '';\n\n  const consumerList = useMemo(() => {\n    return annotation.split(',').map(consumer => {\n      const [clusterId, consumerGroup] = consumer.split('/');\n\n      if (!clusterId || !consumerGroup) {\n        throw new Error(\n          `Failed to parse kafka consumer group annotation: got \"${annotation}\"`,\n        );\n      }\n      return {\n        clusterId: clusterId.trim(),\n        consumerGroup: consumerGroup.trim(),\n      };\n    });\n  }, [annotation]);\n\n  return consumerList;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { kafkaApiRef } from '../../api/types';\nimport { useConsumerGroupsForEntity } from './useConsumerGroupsForEntity';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nexport const useConsumerGroupsOffsetsForEntity = () => {\n  const consumers = useConsumerGroupsForEntity();\n  const api = useApi(kafkaApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const {\n    loading,\n    value: consumerGroupsTopics,\n    retry,\n  } = useAsyncRetry(async () => {\n    try {\n      return await Promise.all(\n        consumers.map(async ({ clusterId, consumerGroup }) => {\n          const response = await api.getConsumerGroupOffsets(\n            clusterId,\n            consumerGroup,\n          );\n          return { clusterId, consumerGroup, topics: response.offsets };\n        }),\n      );\n    } catch (e) {\n      errorApi.post(e);\n      throw e;\n    }\n  }, [consumers, api, errorApi]);\n\n  return [\n    {\n      loading,\n      consumerGroupsTopics,\n    },\n    {\n      retry,\n    },\n  ] ;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Box, Grid, Typography } from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport React from 'react';\nimport { useConsumerGroupsOffsetsForEntity } from './useConsumerGroupsOffsetsForEntity';\nimport { Table, } from '@backstage/core-components';\n\n\n\n\n\n\n\n\nconst generatedColumns = [\n  {\n    title: 'Topic',\n    field: 'topic',\n    highlight: true,\n    render: (row) => {\n      return React.createElement(React.Fragment, null, row.topic ?? '');\n    },\n  },\n  {\n    title: 'Partition',\n    field: 'partitionId',\n    render: (row) => {\n      return React.createElement(React.Fragment, null, row.partitionId ?? '');\n    },\n  },\n  {\n    title: 'Topic Offset',\n    field: 'topicOffset',\n    render: (row) => {\n      return React.createElement(React.Fragment, null, row.topicOffset ?? '');\n    },\n  },\n  {\n    title: 'Group Offset',\n    field: 'groupOffset',\n    render: (row) => {\n      return React.createElement(React.Fragment, null, row.groupOffset ?? '');\n    },\n  },\n  {\n    title: 'Lag',\n    field: 'lag',\n    render: (row) => {\n      let lag = undefined;\n      if (row.topicOffset && row.groupOffset) {\n        lag = +row.topicOffset - +row.groupOffset;\n      }\n      return React.createElement(React.Fragment, null, lag ?? '');\n    },\n  },\n];\n\n\n\n\n\n\n\n\n\nexport const ConsumerGroupOffsets = ({\n  loading,\n  topics,\n  clusterId,\n  consumerGroup,\n  retry,\n}) => {\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      actions: [\n        {\n          icon: () => React.createElement(RetryIcon, null ),\n          tooltip: 'Refresh Data',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ],\n      data: topics ?? [],\n      title: \n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(Typography, { variant: \"h6\",}, \"Consumed Topics for \"\n               , consumerGroup, \" (\" , clusterId, \")\"\n          )\n        )\n      ,\n      columns: generatedColumns,}\n    )\n  );\n};\n\nexport const KafkaTopicsForConsumer = () => {\n  const [tableProps, { retry }] = useConsumerGroupsOffsetsForEntity();\n  return (\n    React.createElement(Grid, null\n      , tableProps.consumerGroupsTopics?.map(consumerGroup => (\n        React.createElement(ConsumerGroupOffsets, {\n          ...consumerGroup,\n          loading: tableProps.loading,\n          retry: retry,}\n        )\n      ))\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React from 'react';\nimport { Route, Routes } from 'react-router';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { KAFKA_CONSUMER_GROUP_ANNOTATION } from './constants';\nimport { KafkaTopicsForConsumer } from './components/ConsumerGroupOffsets/ConsumerGroupOffsets';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isPluginApplicableToEntity = (entity) =>\n  Boolean(entity.metadata.annotations?.[KAFKA_CONSUMER_GROUP_ANNOTATION]);\n\n\n\nexport const Router = (_props) => {\n  const { entity } = useEntity();\n\n  if (!isPluginApplicableToEntity(entity)) {\n    return (\n      React.createElement(MissingAnnotationEmptyState, {\n        annotation: KAFKA_CONSUMER_GROUP_ANNOTATION,}\n      )\n    );\n  }\n\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(KafkaTopicsForConsumer, null ),} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const kafkaApiRef = createApiRef({\n  id: 'plugin.kafka.service',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Route, Routes } from 'react-router-dom';\nimport { KubernetesContent } from './components/KubernetesContent';\nimport { Button } from '@material-ui/core';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nconst KUBERNETES_ANNOTATION = 'backstage.io/kubernetes-id';\nconst KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION =\n  'backstage.io/kubernetes-label-selector';\n\nexport const isKubernetesAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[KUBERNETES_ANNOTATION]) ||\n  Boolean(\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION],\n  );\n\nexport const Router = (props) => {\n  const { entity } = useEntity();\n\n  const kubernetesAnnotationValue =\n    entity.metadata.annotations?.[KUBERNETES_ANNOTATION];\n\n  const kubernetesLabelSelectorQueryAnnotationValue =\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION];\n\n  if (\n    kubernetesAnnotationValue ||\n    kubernetesLabelSelectorQueryAnnotationValue\n  ) {\n    return (\n      React.createElement(Routes, null\n        , React.createElement(Route, {\n          path: \"/\",\n          element: \n            React.createElement(KubernetesContent, {\n              entity: entity,\n              refreshIntervalMs: props.refreshIntervalMs,}\n            )\n          ,}\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(MissingAnnotationEmptyState, { annotation: KUBERNETES_ANNOTATION,} )\n      , React.createElement('h1', null, \"Or use a label selector query, which takes precedence over the previous annotation.\"\n\n\n      )\n      , React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity\",}\n      , \"Read Kubernetes Plugin Docs\"\n\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const kubernetesApiRef = createApiRef({\n  id: 'plugin.kubernetes.service',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { renderCondition } from '../../utils/pod';\nimport { Typography, Grid, Chip } from '@material-ui/core';\n\nexport const DeploymentDrawer = ({\n  deployment,\n  expanded,\n}\n\n\n) => {\n  const namespace = deployment.metadata?.namespace;\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: deployment,\n      expanded: expanded,\n      kind: \"Deployment\",\n      renderObject: (deploymentObj) => {\n        const conditions = (deploymentObj.status?.conditions ?? [])\n          .map(renderCondition)\n          .reduce((accum, next) => {\n            accum[next[0]] = next[1];\n            return accum;\n          }, {} );\n\n        return {\n          strategy: deploymentObj.spec?.strategy ?? '???',\n          minReadySeconds: deploymentObj.spec?.minReadySeconds ?? '???',\n          progressDeadlineSeconds:\n            deploymentObj.spec?.progressDeadlineSeconds ?? '???',\n          ...conditions,\n        };\n      },}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , deployment.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Deployment\"\n\n          )\n        )\n        , namespace && (\n          React.createElement(Grid, { item: true,}\n            , React.createElement(Chip, { size: \"small\", label: `namespace: ${namespace}`,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\n\n\n\nimport { PodsTable } from '../Pods';\nimport { DeploymentDrawer } from './DeploymentDrawer';\nimport { HorizontalPodAutoscalerDrawer } from '../HorizontalPodAutoscalers';\nimport {\n  getOwnedPodsThroughReplicaSets,\n  getMatchingHpa,\n} from '../../utils/owner';\nimport {\n  GroupedResponsesContext,\n  PodNamesWithErrorsContext,\n} from '../../hooks';\nimport { StatusError, StatusOK } from '@backstage/core-components';\nimport { READY_COLUMNS, RESOURCE_COLUMNS } from '../Pods/PodsTable';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DeploymentSummary = ({\n  deployment,\n  numberOfCurrentPods,\n  numberOfPodsWithErrors,\n  hpa,\n}) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(DeploymentDrawer, { deployment: deployment,} )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n      , hpa && (\n        React.createElement(Grid, { item: true, xs: 3,}\n          , React.createElement(HorizontalPodAutoscalerDrawer, { hpa: hpa,}\n            , React.createElement(Grid, {\n              item: true,\n              container: true,\n              direction: \"column\",\n              justifyContent: \"flex-start\",\n              alignItems: \"flex-start\",\n              spacing: 0,}\n            \n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"min replicas \"\n                    , hpa.spec?.minReplicas ?? '?', \" / max replicas\"   , ' '\n                  , hpa.spec?.maxReplicas ?? '?'\n                )\n              )\n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"current CPU usage:\"\n                    , ' '\n                  , hpa.status?.currentCPUUtilizationPercentage ?? '?', \"%\"\n                )\n              )\n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"target CPU usage:\"\n                    , ' '\n                  , hpa.spec?.targetCPUUtilizationPercentage ?? '?', \"%\"\n                )\n              )\n            )\n          )\n        )\n      )\n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        xs: 3,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(StatusOK, null, numberOfCurrentPods, \" pods\" )\n        )\n        , React.createElement(Grid, { item: true,}\n          , numberOfPodsWithErrors > 0 ? (\n            React.createElement(StatusError, null\n              , numberOfPodsWithErrors, \" pod\"\n              , numberOfPodsWithErrors > 1 ? 's' : '', \" with errors\"\n            )\n          ) : (\n            React.createElement(StatusOK, null, \"No pods with errors\"   )\n          )\n        )\n      )\n    )\n  );\n};\n\nconst DeploymentAccordion = ({\n  deployment,\n  ownedPods,\n  matchingHpa,\n}) => {\n  const podNamesWithErrors = useContext(PodNamesWithErrorsContext);\n\n  const podsWithErrors = ownedPods.filter(p =>\n    podNamesWithErrors.has(p.metadata?.name ?? ''),\n  );\n\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(DeploymentSummary, {\n          deployment: deployment,\n          numberOfCurrentPods: ownedPods.length,\n          numberOfPodsWithErrors: podsWithErrors.length,\n          hpa: matchingHpa,}\n        )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement(PodsTable, {\n          pods: ownedPods,\n          extraColumns: [READY_COLUMNS, RESOURCE_COLUMNS],}\n        )\n      )\n    )\n  );\n};\n\nexport const DeploymentsAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , groupedResponses.deployments.map((deployment, i) => (\n        React.createElement(Grid, { container: true, item: true, key: i, xs: true,}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(DeploymentAccordion, {\n              matchingHpa: getMatchingHpa(\n                {\n                  name: deployment.metadata?.name,\n                  namespace: deployment.metadata?.namespace,\n                  kind: 'deployment',\n                },\n                groupedResponses.horizontalPodAutoscalers,\n              ),\n              ownedPods: getOwnedPodsThroughReplicaSets(\n                deployment,\n                groupedResponses.replicaSets,\n                groupedResponses.pods,\n              ),\n              deployment: deployment,}\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { renderCondition } from '../../utils/pod';\nimport { Typography, Grid, Chip } from '@material-ui/core';\n\nexport const StatefulSetDrawer = ({\n  statefulset,\n  expanded,\n}\n\n\n) => {\n  const namespace = statefulset.metadata?.namespace;\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: statefulset,\n      expanded: expanded,\n      kind: \"StatefulSet\",\n      renderObject: (statefulsetObj) => {\n        const conditions = (statefulsetObj.status?.conditions ?? [])\n          .map(renderCondition)\n          .reduce((accum, next) => {\n            accum[next[0]] = next[1];\n            return accum;\n          }, {} );\n\n        return {\n          updateStrategy: statefulset.spec?.updateStrategy ?? '???',\n          podManagementPolicy: statefulset.spec?.podManagementPolicy ?? '???',\n          serviceName: statefulset.spec?.serviceName ?? '???',\n          selector: statefulset.spec?.selector ?? '???',\n          revisionHistoryLimit: statefulset.spec?.revisionHistoryLimit ?? '???',\n          ...conditions,\n        };\n      },}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , statefulset.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Stateful Set\"\n\n          )\n        )\n        , namespace && (\n          React.createElement(Grid, { item: true,}\n            , React.createElement(Chip, { size: \"small\", label: `namespace: ${namespace}`,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\n\n\n\nimport { PodsTable } from '../Pods';\nimport { StatefulSetDrawer } from './StatefulSetDrawer';\nimport { HorizontalPodAutoscalerDrawer } from '../HorizontalPodAutoscalers';\nimport { getMatchingHpa, getOwnedResources } from '../../utils/owner';\nimport {\n  GroupedResponsesContext,\n  PodNamesWithErrorsContext,\n} from '../../hooks';\nimport { StatusError, StatusOK } from '@backstage/core-components';\nimport { READY_COLUMNS, RESOURCE_COLUMNS } from '../Pods/PodsTable';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst StatefulSetSummary = ({\n  statefulset,\n  numberOfCurrentPods,\n  numberOfPodsWithErrors,\n  hpa,\n}) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(StatefulSetDrawer, { statefulset: statefulset,} )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n      , hpa && (\n        React.createElement(Grid, { item: true, xs: 3,}\n          , React.createElement(HorizontalPodAutoscalerDrawer, { hpa: hpa,}\n            , React.createElement(Grid, {\n              item: true,\n              container: true,\n              direction: \"column\",\n              justifyContent: \"flex-start\",\n              alignItems: \"flex-start\",\n              spacing: 0,}\n            \n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"min replicas \"\n                    , hpa.spec?.minReplicas ?? '?', \" / max replicas\"   , ' '\n                  , hpa.spec?.maxReplicas ?? '?'\n                )\n              )\n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"current CPU usage:\"\n                    , ' '\n                  , hpa.status?.currentCPUUtilizationPercentage ?? '?', \"%\"\n                )\n              )\n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"target CPU usage:\"\n                    , ' '\n                  , hpa.spec?.targetCPUUtilizationPercentage ?? '?', \"%\"\n                )\n              )\n            )\n          )\n        )\n      )\n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        xs: 3,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(StatusOK, null, numberOfCurrentPods, \" pods\" )\n        )\n        , React.createElement(Grid, { item: true,}\n          , numberOfPodsWithErrors > 0 ? (\n            React.createElement(StatusError, null\n              , numberOfPodsWithErrors, \" pod\"\n              , numberOfPodsWithErrors > 1 ? 's' : '', \" with errors\"\n            )\n          ) : (\n            React.createElement(StatusOK, null, \"No pods with errors\"   )\n          )\n        )\n      )\n    )\n  );\n};\n\nconst StatefulSetAccordion = ({\n  statefulset,\n  ownedPods,\n  matchingHpa,\n}) => {\n  const podNamesWithErrors = useContext(PodNamesWithErrorsContext);\n\n  const podsWithErrors = ownedPods.filter(p =>\n    podNamesWithErrors.has(p.metadata?.name ?? ''),\n  );\n\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(StatefulSetSummary, {\n          statefulset: statefulset,\n          numberOfCurrentPods: ownedPods.length,\n          numberOfPodsWithErrors: podsWithErrors.length,\n          hpa: matchingHpa,}\n        )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement(PodsTable, {\n          pods: ownedPods,\n          extraColumns: [READY_COLUMNS, RESOURCE_COLUMNS],}\n        )\n      )\n    )\n  );\n};\n\nexport const StatefulSetsAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , groupedResponses.statefulsets.map((statefulset, i) => (\n        React.createElement(Grid, { container: true, item: true, key: i, xs: true,}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(StatefulSetAccordion, {\n              matchingHpa: getMatchingHpa(\n                {\n                  name: statefulset.metadata?.name,\n                  namespace: statefulset.metadata?.namespace,\n                  kind: 'statefulset',\n                },\n                groupedResponses.horizontalPodAutoscalers,\n              ),\n              ownedPods: getOwnedResources(statefulset, groupedResponses.pods),\n              statefulset: statefulset,}\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\n\n\n\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { DeploymentsAccordions } from '../DeploymentsAccordions';\nimport { StatefulSetsAccordions } from '../StatefulSetsAccordions';\nimport { groupResponses } from '../../utils/response';\nimport { IngressesAccordions } from '../IngressesAccordions';\nimport { ServicesAccordions } from '../ServicesAccordions';\nimport { CronJobsAccordions } from '../CronJobsAccordions';\nimport { CustomResources } from '../CustomResources';\nimport {\n  ClusterContext,\n  GroupedResponsesContext,\n  PodNamesWithErrorsContext,\n} from '../../hooks';\n\nimport { StatusError, StatusOK } from '@backstage/core-components';\nimport { PodNamesWithMetricsContext } from '../../hooks/PodNamesWithMetrics';\n\n\n\n\n\n\n\n\nconst ClusterSummary = ({\n  clusterName,\n  totalNumberOfPods,\n  numberOfPodsWithErrors,\n}) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , React.createElement(Grid, {\n        xs: 4,\n        item: true,\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true, xs: true,}\n          , React.createElement(Typography, { variant: \"h3\",}, clusterName)\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Cluster\"\n\n          )\n        )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '4em' }, orientation: \"vertical\",} )\n      )\n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        xs: 3,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(StatusOK, null, totalNumberOfPods, \" pods\" )\n        )\n        , React.createElement(Grid, { item: true,}\n          , numberOfPodsWithErrors > 0 ? (\n            React.createElement(StatusError, null, numberOfPodsWithErrors, \" pods with errors\"   )\n          ) : (\n            React.createElement(StatusOK, null, \"No pods with errors\"   )\n          )\n        )\n      )\n    )\n  );\n};\n\n\n\n\n\n\n\nexport const Cluster = ({ clusterObjects, podsWithErrors }) => {\n  const groupedResponses = groupResponses(clusterObjects.resources);\n  const podNameToMetrics = clusterObjects.podMetrics\n    .flat()\n    .reduce((accum, next) => {\n      const name = next.pod.metadata?.name;\n      if (name !== undefined) {\n        accum.set(name, next);\n      }\n      return accum;\n    }, new Map());\n  return (\n    React.createElement(ClusterContext.Provider, { value: clusterObjects.cluster,}\n      , React.createElement(GroupedResponsesContext.Provider, { value: groupedResponses,}\n        , React.createElement(PodNamesWithMetricsContext.Provider, { value: podNameToMetrics,}\n          , React.createElement(PodNamesWithErrorsContext.Provider, { value: podsWithErrors,}\n            , React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n              , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n                , React.createElement(ClusterSummary, {\n                  clusterName: clusterObjects.cluster.name,\n                  totalNumberOfPods: groupedResponses.pods.length,\n                  numberOfPodsWithErrors: podsWithErrors.size,}\n                )\n              )\n              , React.createElement(AccordionDetails, null\n                , React.createElement(Grid, { container: true, direction: \"column\",}\n                  , React.createElement(Grid, { item: true,}\n                    , React.createElement(CustomResources, null )\n                  )\n                  , React.createElement(Grid, { item: true,}\n                    , React.createElement(DeploymentsAccordions, null )\n                  )\n                  , React.createElement(Grid, { item: true,}\n                    , React.createElement(StatefulSetsAccordions, null )\n                  )\n                  , React.createElement(Grid, { item: true,}\n                    , React.createElement(IngressesAccordions, null )\n                  )\n                  , React.createElement(Grid, { item: true,}\n                    , React.createElement(ServicesAccordions, null )\n                  )\n                  , React.createElement(Grid, { item: true,}\n                    , React.createElement(CronJobsAccordions, null )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { Typography, Grid, Chip } from '@material-ui/core';\n\nexport const CronJobDrawer = ({\n  cronJob,\n  expanded,\n}\n\n\n) => {\n  const namespace = cronJob.metadata?.namespace;\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: cronJob,\n      expanded: expanded,\n      kind: \"CronJob\",\n      renderObject: (cronJobObj) => ({\n        schedule: cronJobObj.spec?.schedule ?? '???',\n        startingDeadlineSeconds:\n          cronJobObj.spec?.startingDeadlineSeconds ?? '???',\n        concurrencyPolicy: cronJobObj.spec?.concurrencyPolicy ?? '???',\n        lastScheduleTime: cronJobObj.status?.lastScheduleTime ?? '???',\n      }),}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , cronJob.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"CronJob\"\n\n          )\n        )\n        , namespace && (\n          React.createElement(Grid, { item: true,}\n            , React.createElement(Chip, { size: \"small\", label: `namespace: ${namespace}`,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { JobsAccordions } from '../JobsAccordions';\nimport { CronJobDrawer } from './CronJobsDrawer';\nimport { getOwnedResources } from '../../utils/owner';\nimport { GroupedResponsesContext } from '../../hooks';\nimport { StatusError, StatusOK } from '@backstage/core-components';\nimport cronstrue from 'cronstrue';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst CronJobSummary = ({ cronJob }) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(CronJobDrawer, { cronJob: cronJob,} )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        xs: 5,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , cronJob.spec?.suspend ? (\n            React.createElement(StatusError, null, \"Suspended\")\n          ) : (\n            React.createElement(StatusOK, null, \"Active\")\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"body1\",}, \"Schedule:\"\n            , ' '\n            , cronJob.spec?.schedule\n              ? `${cronJob.spec.schedule} (${cronstrue.toString(\n                  cronJob.spec.schedule,\n                )})`\n              : 'N/A'\n          )\n        )\n      )\n    )\n  );\n};\n\nconst CronJobAccordion = ({ cronJob, ownedJobs }) => {\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(CronJobSummary, { cronJob: cronJob,} )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement(JobsAccordions, { jobs: ownedJobs.reverse(),} )\n      )\n    )\n  );\n};\n\nexport const CronJobsAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , groupedResponses.cronJobs.map((cronJob, i) => (\n        React.createElement(Grid, { container: true, item: true, key: i, xs: true,}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(CronJobAccordion, {\n              ownedJobs: getOwnedResources(cronJob, groupedResponses.jobs),\n              cronJob: cronJob,}\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { KubernetesDrawer } from '../../KubernetesDrawer/KubernetesDrawer';\nimport { Typography, Grid } from '@material-ui/core';\n\nexport const RolloutDrawer = ({\n  rollout,\n  expanded,\n}\n\n\n) => {\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: rollout,\n      expanded: expanded,\n      kind: \"Rollout\",\n      renderObject: () => ({}),}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , rollout.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Rollout\"\n\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Step, StepLabel, Stepper } from '@material-ui/core';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst isSetWeightStep = (step) =>\n  step.hasOwnProperty('setWeight');\n\nconst isPauseStep = (step) =>\n  step.hasOwnProperty('pause');\n\nconst isAnalysisStep = (step) =>\n  step.hasOwnProperty('analysis');\n\nconst createLabelForStep = (step) => {\n  if (isSetWeightStep(step)) {\n    return `setWeight ${step.setWeight}%`;\n  } else if (isPauseStep(step)) {\n    return step.pause.duration === undefined\n      ? 'infinite pause'\n      : `pause for ${step.pause.duration}`;\n  } else if (isAnalysisStep(step)) {\n    return (\n      React.createElement('div', null\n        , React.createElement('p', null, \"analysis templates:\" )\n        , step.analysis.templates.map((t, i) => (\n          React.createElement('p', { key: i,}, `${t.templateName}${\n            t.clusterScope ? ' (cluster scoped)' : ''\n          }`)\n        ))\n      )\n    );\n  }\n  return 'unknown step';\n};\n\nexport const StepsProgress = ({\n  currentStepIndex,\n  aborted,\n  steps,\n}) => {\n  // If the activeStep is greater/equal to the number of steps\n  // Then the canary is being promoted\n  // Increase the step index to mark the 'canary promoted' step as done also\n  const activeStepIndex =\n    currentStepIndex >= steps.length ? currentStepIndex + 1 : currentStepIndex;\n\n  /*\n   *  When the Rollout is aborted set the active step to -1\n   *  otherwise it appears to always be on the first step\n   */\n  return (\n    React.createElement(Stepper, { activeStep: aborted ? -1 : activeStepIndex, alternativeLabel: true,}\n      , steps\n        .map((step, i) => (\n          React.createElement(Step, { key: i,}\n            , React.createElement(StepLabel, { 'data-testid': `step-${i}`,}\n              , createLabelForStep(step)\n            )\n          )\n        ))\n        .concat(\n          React.createElement(Step, { key: \"-1\",}\n            , React.createElement(StepLabel, { 'data-testid': \"step--1\",}, \"Canary promoted\" )\n          ),\n        )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { PodsTable } from '../../Pods';\nimport { HorizontalPodAutoscalerDrawer } from '../../HorizontalPodAutoscalers';\nimport { RolloutDrawer } from './RolloutDrawer';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport { DateTime } from 'luxon';\nimport { StepsProgress } from './StepsProgress';\nimport {\n  PodNamesWithErrorsContext,\n  GroupedResponsesContext,\n} from '../../../hooks';\nimport {\n  getMatchingHpa,\n  getOwnedPodsThroughReplicaSets,\n} from '../../../utils/owner';\nimport { StatusError, StatusOK } from '@backstage/core-components';\nimport { READY_COLUMNS, RESOURCE_COLUMNS } from '../../Pods/PodsTable';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst AbortedTitle = (\n  React.createElement('div', {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      flexWrap: 'wrap',\n    },}\n  \n    , React.createElement(ErrorOutlineIcon, null )\n    , React.createElement(Typography, { variant: \"subtitle1\",}, \"Aborted\")\n  )\n);\n\nconst findAbortedMessage = (rollout) =>\n  rollout.status?.conditions?.find(\n    (c) =>\n      c.type === 'Progressing' &&\n      c.status === 'False' &&\n      c.reason === 'RolloutAborted',\n  )?.message;\n\nconst RolloutSummary = ({\n  rollout,\n  numberOfCurrentPods,\n  numberOfPodsWithErrors,\n  hpa,\n}) => {\n  const pauseTime = rollout.status?.pauseConditions?.find(\n    (p) => p.reason === 'CanaryPauseStep',\n  )?.startTime;\n  const abortedMessage = findAbortedMessage(rollout);\n\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(RolloutDrawer, { rollout: rollout,} )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n      , hpa && (\n        React.createElement(Grid, { item: true, xs: 3,}\n          , React.createElement(HorizontalPodAutoscalerDrawer, { hpa: hpa,}\n            , React.createElement(Grid, {\n              item: true,\n              container: true,\n              direction: \"column\",\n              justifyContent: \"flex-start\",\n              alignItems: \"flex-start\",\n              spacing: 0,}\n            \n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"min replicas \"\n                    , hpa.spec?.minReplicas ?? '?', \" / max replicas\"   , ' '\n                  , hpa.spec?.maxReplicas ?? '?'\n                )\n              )\n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"current CPU usage:\"\n                    , ' '\n                  , hpa.status?.currentCPUUtilizationPercentage ?? '?', \"%\"\n                )\n              )\n              , React.createElement(Grid, { item: true,}\n                , React.createElement(Typography, { variant: \"subtitle2\",}, \"target CPU usage:\"\n                    , ' '\n                  , hpa.spec?.targetCPUUtilizationPercentage ?? '?', \"%\"\n                )\n              )\n            )\n          )\n        )\n      )\n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        xs: 3,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(StatusOK, null, numberOfCurrentPods, \" pods\" )\n        )\n        , React.createElement(Grid, { item: true,}\n          , numberOfPodsWithErrors > 0 ? (\n            React.createElement(StatusError, null\n              , numberOfPodsWithErrors, \" pod\"\n              , numberOfPodsWithErrors > 1 ? 's' : '', \" with errors\"\n            )\n          ) : (\n            React.createElement(StatusOK, null, \"No pods with errors\"   )\n          )\n        )\n      )\n      , pauseTime && (\n        React.createElement(Grid, { item: true, xs: 3,}\n          , React.createElement('div', {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              flexWrap: 'wrap',\n            },}\n          \n            , React.createElement(PauseIcon, null )\n            , React.createElement(Typography, { variant: \"subtitle1\",}, \"Paused (\"\n               , DateTime.fromISO(pauseTime).toRelative({ locale: 'en' }), \")\"\n\n            )\n          )\n        )\n      )\n      , abortedMessage && (\n        React.createElement(Grid, { item: true, xs: 3,}\n          , AbortedTitle\n        )\n      )\n    )\n  );\n};\n\nconst RolloutAccordion = ({\n  rollout,\n  ownedPods,\n  matchingHpa,\n  defaultExpanded,\n}) => {\n  const podNamesWithErrors = useContext(PodNamesWithErrorsContext);\n\n  const podsWithErrors = ownedPods.filter(p =>\n    podNamesWithErrors.has(p.metadata?.name ?? ''),\n  );\n\n  const currentStepIndex = rollout.status?.currentStepIndex ?? 0;\n  const abortedMessage = findAbortedMessage(rollout);\n\n  return (\n    React.createElement(Accordion, {\n      defaultExpanded: defaultExpanded,\n      TransitionProps: { unmountOnExit: true },}\n    \n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(RolloutSummary, {\n          rollout: rollout,\n          numberOfCurrentPods: ownedPods.length,\n          numberOfPodsWithErrors: podsWithErrors.length,\n          hpa: matchingHpa,}\n        )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement('div', { style: { width: '100%' },}\n          , React.createElement('div', null\n            , React.createElement(Typography, { variant: \"h6\",}, \"Rollout status\" )\n          )\n          , React.createElement('div', { style: { margin: '1rem' },}\n            , abortedMessage && (\n              React.createElement(React.Fragment, null\n                , AbortedTitle\n                , React.createElement(Typography, { variant: \"subtitle2\",}, abortedMessage)\n              )\n            )\n            , React.createElement(StepsProgress, {\n              aborted: abortedMessage !== undefined,\n              steps: rollout.spec?.strategy?.canary?.steps ?? [],\n              currentStepIndex: currentStepIndex,}\n            )\n          )\n          , React.createElement('div', null\n            , React.createElement(PodsTable, {\n              pods: ownedPods,\n              extraColumns: [READY_COLUMNS, RESOURCE_COLUMNS],}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n\nexport const RolloutAccordions = ({\n  rollouts,\n  defaultExpanded = false,\n}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , rollouts.map((rollout, i) => (\n        React.createElement(Grid, { container: true, item: true, key: i, xs: true,}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(RolloutAccordion, {\n              defaultExpanded: defaultExpanded,\n              matchingHpa: getMatchingHpa(\n                {\n                  name: rollout.metadata?.name,\n                  namespace: rollout.metadata?.namespace,\n                  kind: 'rollout',\n                },\n                groupedResponses.horizontalPodAutoscalers,\n              ),\n              ownedPods: getOwnedPodsThroughReplicaSets(\n                rollout,\n                groupedResponses.replicaSets,\n                groupedResponses.pods,\n              ),\n              rollout: rollout,}\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { Typography, Grid } from '@material-ui/core';\n\nconst capitalize = (str) =>\n  str.charAt(0).toLocaleUpperCase('en-US') + str.slice(1);\n\nexport const DefaultCustomResourceDrawer = ({\n  customResource,\n  customResourceName,\n  expanded,\n}\n\n\n\n) => {\n  const capitalizedName = capitalize(customResourceName);\n\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: customResource,\n      expanded: expanded,\n      kind: capitalizedName,\n      renderObject: cr => cr,}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , customResource.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}\n            , capitalizedName\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { DefaultCustomResourceDrawer } from './DefaultCustomResourceDrawer';\nimport { StructuredMetadataTable } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DefaultCustomResourceSummary = ({\n  customResource,\n  customResourceName,\n}) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(DefaultCustomResourceDrawer, {\n          customResource: customResource,\n          customResourceName: customResourceName,}\n        )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n    )\n  );\n};\n\nconst DefaultCustomResourceAccordion = ({\n  customResource,\n  customResourceName,\n  defaultExpanded,\n}) => {\n  return (\n    React.createElement(Accordion, {\n      defaultExpanded: defaultExpanded,\n      TransitionProps: { unmountOnExit: true },}\n    \n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(DefaultCustomResourceSummary, {\n          customResource: customResource,\n          customResourceName: customResourceName,}\n        )\n      )\n      , React.createElement(AccordionDetails, null\n        , customResource.hasOwnProperty('status') && (\n          React.createElement(StructuredMetadataTable, { metadata: customResource.status,} )\n        )\n      )\n    )\n  );\n};\n\nexport const DefaultCustomResourceAccordions = ({\n  customResources,\n  customResourceName,\n  defaultExpanded = false,\n}) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , customResources.map((cr, i) => (\n        React.createElement(Grid, { container: true, item: true, key: i, xs: true,}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(DefaultCustomResourceAccordion, {\n              defaultExpanded: defaultExpanded,\n              customResource: cr,\n              customResourceName: customResourceName,}\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\nimport lodash, { } from 'lodash';\nimport { RolloutAccordions } from './ArgoRollouts';\nimport { DefaultCustomResourceAccordions } from './DefaultCustomResource';\nimport { GroupedResponsesContext } from '../../hooks';\n\n\n\n\n\nconst kindToResource = (customResources) => {\n  return lodash.groupBy(customResources, value => {\n    return value.kind;\n  });\n};\n\nexport const CustomResources = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  const kindToResourceMap = kindToResource(groupedResponses.customResources);\n\n  return (\n    React.createElement(React.Fragment, null\n      , Object.entries(kindToResourceMap).map(([kind, resources], i) => {\n        switch (kind) {\n          case 'Rollout':\n            return React.createElement(RolloutAccordions, { key: i, rollouts: resources,} );\n          default:\n            return (\n              React.createElement(DefaultCustomResourceAccordions, {\n                key: i,\n                customResources: resources,\n                customResourceName: kind,}\n              )\n            );\n        }\n      })\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\n\nimport { WarningPanel } from '@backstage/core-components';\n\nconst clustersWithErrorsToErrorMessage = (\n  clustersWithErrors,\n) => {\n  return clustersWithErrors.map((c, i) => {\n    return (\n      React.createElement('div', { key: i,}\n        , React.createElement(Typography, { variant: \"body2\",}, `Cluster: ${c.cluster.name}`)\n        , c.errors.map((e, j) => {\n          return (\n            React.createElement(Typography, { variant: \"body2\", key: j,}\n              , `Error fetching Kubernetes resource: '${e.resourcePath}', error: ${e.errorType}, status code: ${e.statusCode}`\n            )\n          );\n        })\n        , React.createElement('br', null )\n      )\n    );\n  });\n};\n\n\n\n\n\n\n\n\nexport const ErrorPanel = ({\n  entityName,\n  errorMessage,\n  clustersWithErrors,\n}) => (\n  React.createElement(WarningPanel, {\n    title: \"There was a problem retrieving Kubernetes objects\"      ,\n    message: `There was a problem retrieving some Kubernetes resources for the entity: ${entityName}. This could mean that the Error Reporting card is not completely accurate.`,}\n  \n    , clustersWithErrors && (\n      React.createElement('div', null, \"Errors: \" , clustersWithErrorsToErrorMessage(clustersWithErrors))\n    )\n    , errorMessage && (\n      React.createElement(Typography, { variant: \"body2\",}, \"Errors: \" , errorMessage)\n    )\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from 'react';\n\nimport { Chip, Typography, Grid } from '@material-ui/core';\nimport EmptyStateImage from '../../assets/emptystate.svg';\nimport { Table, InfoCard } from '@backstage/core-components';\n\n\n\n\n\nconst columns = [\n  {\n    title: 'cluster',\n    width: '15%',\n    render: (detectedError) => detectedError.cluster,\n  },\n  {\n    title: 'kind',\n    width: '15%',\n    render: (detectedError) => detectedError.kind,\n  },\n  {\n    title: 'name',\n    width: '30%',\n    render: (detectedError) => {\n      const errorCount = detectedError.names.length;\n\n      if (errorCount === 0) {\n        // This shouldn't happen\n        return null;\n      }\n\n      const displayName = detectedError.names[0];\n\n      const otherErrorCount = errorCount - 1;\n\n      return (\n        React.createElement(React.Fragment, null\n          , displayName, ' '\n          , otherErrorCount > 0 && (\n            React.createElement(Chip, {\n              label: `+ ${otherErrorCount} other${\n                otherErrorCount > 1 ? 's' : ''\n              }`,\n              size: \"small\",}\n            )\n          )\n        )\n      );\n    },\n  },\n  {\n    title: 'messages',\n    width: '40%',\n    render: (detectedError) => (\n      React.createElement(React.Fragment, null\n        , detectedError.message.map((m, i) => (\n          React.createElement('div', { key: i,}, m)\n        ))\n      )\n    ),\n  },\n];\n\nconst sortBySeverity = (a, b) => {\n  if (a.severity < b.severity) {\n    return 1;\n  } else if (b.severity < a.severity) {\n    return -1;\n  }\n  return 0;\n};\n\nexport const ErrorEmptyState = () => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      justifyContent: \"space-around\",\n      direction: \"row\",\n      alignItems: \"center\",\n      spacing: 2,}\n    \n      , React.createElement(Grid, { item: true, xs: 4,}\n        , React.createElement(Typography, { variant: \"h5\",}, \"Nice! There are no errors to report!\"\n\n        )\n      )\n      , React.createElement(Grid, { item: true, xs: 4,}\n        , React.createElement('img', {\n          src: EmptyStateImage,\n          alt: \"EmptyState\",\n          'data-testid': \"emptyStateImg\",}\n        )\n      )\n    )\n  );\n};\n\nexport const ErrorReporting = ({ detectedErrors }) => {\n  const errors = Array.from(detectedErrors.values())\n    .flat()\n    .sort(sortBySeverity);\n\n  return (\n    React.createElement(React.Fragment, null\n      , errors.length === 0 ? (\n        React.createElement(InfoCard, { title: \"Error Reporting\" ,}\n          , React.createElement(ErrorEmptyState, null )\n        )\n      ) : (\n        React.createElement(Table, {\n          title: \"Error Reporting\" ,\n          data: errors,\n          columns: columns,\n          options: { paging: true, search: false },}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\n\nexport const HorizontalPodAutoscalerDrawer = ({\n  hpa,\n  expanded,\n  children,\n}\n\n\n\n) => {\n  return (\n    React.createElement(KubernetesDrawer, {\n      kind: \"HorizontalPodAutoscaler\",\n      object: hpa,\n      expanded: expanded,\n      renderObject: (hpaObject) => {\n        return {\n          targetCPUUtilizationPercentage:\n            hpaObject.spec?.targetCPUUtilizationPercentage,\n          currentCPUUtilizationPercentage:\n            hpaObject.status?.currentCPUUtilizationPercentage,\n          minReplicas: hpaObject.spec?.minReplicas,\n          maxReplicas: hpaObject.spec?.maxReplicas,\n          currentReplicas: hpaObject.status?.currentReplicas,\n          desiredReplicas: hpaObject.status?.desiredReplicas,\n        };\n      },}\n    \n      , children\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { Typography, Grid } from '@material-ui/core';\n\nexport const IngressDrawer = ({\n  ingress,\n  expanded,\n}\n\n\n) => {\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: ingress,\n      expanded: expanded,\n      kind: \"Ingress\",\n      renderObject: (ingressObject) => {\n        return ingressObject.spec || {};\n      },}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , ingress.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Ingress\"\n\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { IngressDrawer } from './IngressDrawer';\nimport { GroupedResponsesContext } from '../../hooks';\nimport { StructuredMetadataTable } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\n\n\nconst IngressSummary = ({ ingress }) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(IngressDrawer, { ingress: ingress,} )\n      )\n\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n    )\n  );\n};\n\n\n\n\n\nconst IngressCard = ({ ingress }) => {\n  return (\n    React.createElement(StructuredMetadataTable, {\n      metadata: {\n        ...ingress.spec,\n      },}\n    )\n  );\n};\n\nconst IngressAccordion = ({ ingress }) => {\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(IngressSummary, { ingress: ingress,} )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement(IngressCard, { ingress: ingress,} )\n      )\n    )\n  );\n};\nexport const IngressesAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , groupedResponses.ingresses.map((ingress, i) => (\n        React.createElement(Grid, { item: true, key: i, xs: true,}\n          , React.createElement(IngressAccordion, { ingress: ingress,} )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { Typography, Grid } from '@material-ui/core';\n\nexport const JobDrawer = ({\n  job,\n  expanded,\n}\n\n\n) => {\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: job,\n      expanded: expanded,\n      kind: \"Job\",\n      renderObject: (jobObj) => {\n        return {\n          parallelism: jobObj.spec?.parallelism ?? '???',\n          completions: jobObj.spec?.completions ?? '???',\n          backoffLimit: jobObj.spec?.backoffLimit ?? '???',\n          startTime: jobObj.status?.startTime ?? '???',\n        };\n      },}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h6\",}\n            , job.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Job\"\n\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { PodsTable } from '../Pods';\nimport { JobDrawer } from './JobsDrawer';\nimport { getOwnedResources } from '../../utils/owner';\nimport { GroupedResponsesContext } from '../../hooks';\nimport {\n  StatusError,\n  StatusOK,\n  StatusPending,\n} from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst JobSummary = ({ job }) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(JobDrawer, { job: job,} )\n      )\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        xs: 8,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",}\n      \n        , React.createElement(Grid, { item: true,}\n          , job.status?.succeeded && React.createElement(StatusOK, null, \"Succeeded\")\n          , job.status?.active && React.createElement(StatusPending, null, \"Running\")\n          , job.status?.failed && React.createElement(StatusError, null, \"Failed\")\n        )\n        , React.createElement(Grid, { item: true,}, \"Start time: \"  , job.status?.startTime?.toString())\n        , job.status?.completionTime && (\n          React.createElement(Grid, { item: true,}, \"Completion time: \"\n              , job.status.completionTime.toString()\n          )\n        )\n      )\n    )\n  );\n};\n\nconst JobAccordion = ({ job, ownedPods }) => {\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(JobSummary, { job: job,} )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement(PodsTable, { pods: ownedPods,} )\n      )\n    )\n  );\n};\n\nexport const JobsAccordions = ({ jobs }) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , jobs.map((job, i) => (\n        React.createElement(Grid, { container: true, item: true, key: i, xs: true,}\n          , React.createElement(Grid, { item: true, xs: true,}\n            , React.createElement(JobAccordion, {\n              ownedPods: getOwnedResources(job, groupedResponses.pods),\n              job: job,}\n            )\n          )\n        )\n      ))\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Run through the each error mapper for each object\n// returning a deduplicated (mostly) result\nexport const detectErrorsInObjects = (\n  objects,\n  kind,\n  clusterName,\n  errorMappers,\n) => {\n  // Build up a map of errors\n  // key: the joined message produced by an error\n  // value: the error\n  const errors = new Map();\n\n  for (const object of objects) {\n    for (const errorMapper of errorMappers) {\n      if (errorMapper.errorExists(object)) {\n        const message = errorMapper.messageAccessor(object);\n\n        // TODO This is not perfect as errors with uuid/hashes/date/times will not be caught by this\n        const dedupKey = message.join('');\n\n        const value = errors.get(dedupKey);\n\n        const name = object.metadata?.name ?? 'unknown';\n\n        if (value !== undefined) {\n          // This gets translated into the Chip \"+5 others\"\n          // in the ErrorReporting component\n          // but we need to keep the names so we can easily\n          // find which objects owns the error later\n          value.names.push(name);\n          errors.set(dedupKey, value);\n        } else {\n          errors.set(dedupKey, {\n            cluster: clusterName,\n            kind: kind,\n            names: [name],\n            message: message,\n            severity: errorMapper.severity,\n          });\n        }\n      }\n    }\n  }\n\n  return Array.from(errors.values());\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { totalRestarts } from '../utils/pod';\n\nimport { detectErrorsInObjects } from './common';\n\nconst podErrorMappers = [\n  {\n    severity: 5,\n    errorExplanation: 'status-message',\n    errorExists: pod => {\n      return pod.status?.message !== undefined;\n    },\n    messageAccessor: pod => {\n      return [pod.status?.message ?? ''];\n    },\n  },\n  {\n    severity: 4,\n    errorExplanation: 'containers-restarting',\n    errorExists: pod => {\n      // TODO magic number\n      return totalRestarts(pod) > 3;\n    },\n    messageAccessor: pod => {\n      return (pod.status?.containerStatuses ?? [])\n        .filter(cs => cs.restartCount > 0)\n        .map(cs => `container=${cs.name} restarted ${cs.restartCount} times`);\n    },\n  },\n  {\n    severity: 5,\n    errorExplanation: 'condition-message-present',\n    errorExists: pod => {\n      return (pod.status?.conditions ?? []).some(c => c.message !== undefined);\n    },\n    messageAccessor: pod => {\n      return (pod.status?.conditions ?? [])\n        .filter(c => c.message !== undefined)\n        .map(c => c.message ?? '');\n    },\n  },\n  {\n    severity: 6,\n    errorExplanation: 'container-waiting',\n    errorExists: pod => {\n      return (pod.status?.containerStatuses ?? []).some(\n        cs => cs.state?.waiting?.message !== undefined,\n      );\n    },\n    messageAccessor: pod => {\n      return (pod.status?.containerStatuses ?? [])\n        .filter(cs => cs.state?.waiting?.message !== undefined)\n        .map(cs => cs.state?.waiting?.message ?? '');\n    },\n  },\n  {\n    severity: 4,\n    errorExplanation: 'container-last-state-error',\n    errorExists: pod => {\n      return (pod.status?.containerStatuses ?? []).some(\n        cs => (cs.lastState?.terminated?.reason ?? '') === 'Error',\n      );\n    },\n    messageAccessor: pod => {\n      return (pod.status?.containerStatuses ?? [])\n        .filter(cs => (cs.lastState?.terminated?.reason ?? '') === 'Error')\n        .map(\n          cs =>\n            `container=${cs.name} exited with error code (${cs.lastState?.terminated?.exitCode})`,\n        );\n    },\n  },\n];\n\nexport const detectErrorsInPods = (\n  pods,\n  clusterName,\n) =>\n  detectErrorsInObjects(pods, 'Pod', clusterName, podErrorMappers);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { detectErrorsInObjects } from './common';\n\nconst deploymentErrorMappers = [\n  {\n    // this is probably important\n    severity: 6,\n    errorExplanation: 'condition-message-present',\n    errorExists: deployment => {\n      return (deployment.status?.conditions ?? [])\n        .filter(c => c.status === 'False')\n        .some(c => c.message !== undefined);\n    },\n    messageAccessor: deployment => {\n      return (deployment.status?.conditions ?? [])\n        .filter(c => c.status === 'False')\n        .filter(c => c.message !== undefined)\n        .map(c => c.message ?? '');\n    },\n  },\n];\n\nexport const detectErrorsInDeployments = (\n  deployments,\n  clusterName,\n) =>\n  detectErrorsInObjects(\n    deployments,\n    'Deployment',\n    clusterName,\n    deploymentErrorMappers,\n  );\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { detectErrorsInObjects } from './common';\n\nconst hpaErrorMappers = [\n  {\n    // this is probably important\n    severity: 8,\n    errorExplanation: 'hpa-max-current-replicas',\n    errorExists: hpa => {\n      return (hpa.spec?.maxReplicas ?? -1) === hpa.status?.currentReplicas;\n    },\n    messageAccessor: hpa => {\n      return [\n        `Current number of replicas (${\n          hpa.status?.currentReplicas\n        }) is equal to the configured max number of replicas (${\n          hpa.spec?.maxReplicas ?? -1\n        })`,\n      ];\n    },\n  },\n];\n\nexport const detectErrorsInHpa = (\n  hpas,\n  clusterName,\n) =>\n  detectErrorsInObjects(\n    hpas,\n    'HorizontalPodAutoscaler',\n    clusterName,\n    hpaErrorMappers,\n  );\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { groupResponses } from '../utils/response';\nimport { detectErrorsInPods } from './pods';\nimport { detectErrorsInDeployments } from './deployments';\nimport { detectErrorsInHpa } from './hpas';\n\n// For each cluster try to find errors in each of the object types provided\n// returning a map of cluster names to errors in that cluster\nexport const detectErrors = (\n  objects,\n) => {\n  const errors = new Map();\n\n  for (const clusterResponse of objects.items) {\n    let clusterErrors = [];\n\n    const groupedResponses = groupResponses(clusterResponse.resources);\n\n    clusterErrors = clusterErrors.concat(\n      detectErrorsInPods(groupedResponses.pods, clusterResponse.cluster.name),\n    );\n\n    clusterErrors = clusterErrors.concat(\n      detectErrorsInDeployments(\n        groupedResponses.deployments,\n        clusterResponse.cluster.name,\n      ),\n    );\n\n    clusterErrors = clusterErrors.concat(\n      detectErrorsInHpa(\n        groupedResponses.horizontalPodAutoscalers,\n        clusterResponse.cluster.name,\n      ),\n    );\n\n    errors.set(clusterResponse.cluster.name, clusterErrors);\n  }\n\n  return errors;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Divider, Grid, Typography } from '@material-ui/core';\n\nimport { ErrorPanel } from './ErrorPanel';\nimport { ErrorReporting } from './ErrorReporting';\nimport { detectErrors } from '../error-detection';\nimport { Cluster } from './Cluster';\nimport EmptyStateImage from '../assets/emptystate.svg';\nimport { useKubernetesObjects } from '../hooks';\nimport { Content, Page, Progress } from '@backstage/core-components';\n\n\n\n\n\n\n\nexport const KubernetesContent = ({\n  entity,\n  refreshIntervalMs,\n}) => {\n  const { kubernetesObjects, error } = useKubernetesObjects(\n    entity,\n    refreshIntervalMs,\n  );\n\n  const clustersWithErrors =\n    kubernetesObjects?.items.filter(r => r.errors.length > 0) ?? [];\n\n  const detectedErrors =\n    kubernetesObjects !== undefined\n      ? detectErrors(kubernetesObjects)\n      : new Map();\n\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Content, null\n        , kubernetesObjects === undefined && error === undefined && React.createElement(Progress, null )\n\n        /* errors retrieved from the kubernetes clusters */\n        , clustersWithErrors.length > 0 && (\n          React.createElement(Grid, { container: true, spacing: 3, direction: \"column\",}\n            , React.createElement(Grid, { item: true,}\n              , React.createElement(ErrorPanel, {\n                entityName: entity.metadata.name,\n                clustersWithErrors: clustersWithErrors,}\n              )\n            )\n          )\n        )\n\n        /* other errors */\n        , error !== undefined && (\n          React.createElement(Grid, { container: true, spacing: 3, direction: \"column\",}\n            , React.createElement(Grid, { item: true,}\n              , React.createElement(ErrorPanel, {\n                entityName: entity.metadata.name,\n                errorMessage: error,}\n              )\n            )\n          )\n        )\n\n        , kubernetesObjects && (\n          React.createElement(Grid, { container: true, spacing: 3, direction: \"column\",}\n            , React.createElement(Grid, { item: true,}\n              , React.createElement(ErrorReporting, { detectedErrors: detectedErrors,} )\n            )\n            , React.createElement(Grid, { item: true,}\n              , React.createElement(Divider, null )\n            )\n            , React.createElement(Grid, { item: true,}\n              , React.createElement(Typography, { variant: \"h3\",}, \"Your Clusters\" )\n            )\n            , React.createElement(Grid, { item: true, container: true,}\n              , kubernetesObjects?.items.length <= 0 && (\n                React.createElement(Grid, {\n                  container: true,\n                  justifyContent: \"space-around\",\n                  direction: \"row\",\n                  alignItems: \"center\",\n                  spacing: 2,}\n                \n                  , React.createElement(Grid, { item: true, xs: 4,}\n                    , React.createElement(Typography, { variant: \"h5\",}, \"No resources on any known clusters for\"\n                            , ' '\n                      , entity.metadata.name\n                    )\n                  )\n                  , React.createElement(Grid, { item: true, xs: 4,}\n                    , React.createElement('img', {\n                      src: EmptyStateImage,\n                      alt: \"EmptyState\",\n                      'data-testid': \"emptyStateImg\",}\n                    )\n                  )\n                )\n              )\n              , kubernetesObjects?.items.length > 0 &&\n                kubernetesObjects?.items.map((item, i) => {\n                  const podsWithErrors = new Set(\n                    detectedErrors\n                      .get(item.cluster.name)\n                      ?.filter(de => de.kind === 'Pod')\n                      .map(de => de.names)\n                      .flat() ?? [],\n                  );\n\n                  return (\n                    React.createElement(Grid, { item: true, key: i, xs: 12,}\n                      , React.createElement(Cluster, {\n                        clusterObjects: item,\n                        podsWithErrors: podsWithErrors,}\n                      )\n                    )\n                  );\n                })\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext, useState } from 'react';\nimport {\n  Button,\n  Typography,\n  makeStyles,\n  IconButton,\n  createStyles,\n\n  Drawer,\n  Switch,\n  FormControlLabel,\n  Grid,\n} from '@material-ui/core';\nimport Close from '@material-ui/icons/Close';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport jsYaml from 'js-yaml';\nimport {\n  Button as BackstageButton,\n  CodeSnippet,\n  StructuredMetadataTable,\n  WarningPanel,\n} from '@backstage/core-components';\nimport { ClusterContext } from '../../hooks';\nimport { formatClusterLink } from '../../utils/clusterLinks';\n\n\n\nconst useDrawerStyles = makeStyles((theme) =>\n  createStyles({\n    paper: {\n      width: '50%',\n      justifyContent: 'space-between',\n      padding: theme.spacing(2.5),\n    },\n  }),\n);\n\nconst useDrawerContentStyles = makeStyles((_) =>\n  createStyles({\n    header: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n    },\n    errorMessage: {\n      marginTop: '1em',\n      marginBottom: '1em',\n    },\n    options: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n    },\n    icon: {\n      fontSize: 20,\n    },\n    content: {\n      height: '80%',\n    },\n  }),\n);\n\nconst PodDrawerButton = withStyles({\n  root: {\n    padding: '6px 5px',\n  },\n  label: {\n    textTransform: 'none',\n  },\n})(Button);\n\n\n\n\n\n\n\nexport const ErrorPanel = ({ cluster, errorMessage }) => (\n  React.createElement(WarningPanel, {\n    title: \"There was a problem formatting the link to the Kubernetes dashboard\"          ,\n    message: `Could not format the link to the dashboard of your cluster named '${\n      cluster.name\n    }'. Its dashboardApp property has been set to '${\n      cluster.dashboardApp || 'standard'\n    }.'`,}\n  \n    , errorMessage && (\n      React.createElement(Typography, { variant: \"body2\",}, \"Errors: \" , errorMessage)\n    )\n  )\n);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction replaceNullsWithUndefined(someObj) {\n  const replacer = (_, value) =>\n    String(value) === 'null' || String(value) === 'undefined'\n      ? undefined\n      : value;\n\n  return JSON.parse(JSON.stringify(someObj, replacer));\n}\n\nfunction tryFormatClusterLink(options) {\n  try {\n    return {\n      clusterLink: formatClusterLink(options),\n      errorMessage: '',\n    };\n  } catch (err) {\n    return {\n      clusterLink: '',\n      errorMessage: err.message || err.toString(),\n    };\n  }\n}\n\nconst KubernetesDrawerContent = ({\n  toggleDrawer,\n  object,\n  renderObject,\n  kind,\n}) => {\n  const [isYaml, setIsYaml] = useState(false);\n\n  const classes = useDrawerContentStyles();\n  const cluster = useContext(ClusterContext);\n  const { clusterLink, errorMessage } = tryFormatClusterLink({\n    dashboardUrl: cluster.dashboardUrl,\n    dashboardApp: cluster.dashboardApp,\n    dashboardParameters: cluster.dashboardParameters,\n    object,\n    kind,\n  });\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('div', { className: classes.header,}\n        , React.createElement(Grid, {\n          container: true,\n          direction: \"column\",\n          justifyContent: \"flex-start\",\n          alignItems: \"flex-start\",}\n        \n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Typography, { variant: \"h5\",}\n              , object.metadata?.name ?? 'unknown name'\n            )\n          )\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}\n              , kind\n            )\n          )\n        )\n        , React.createElement(IconButton, {\n          key: \"dismiss\",\n          title: \"Close the drawer\"  ,\n          onClick: e => toggleDrawer(e, false),\n          color: \"inherit\",}\n        \n          , React.createElement(Close, { className: classes.icon,} )\n        )\n      )\n      , errorMessage && (\n        React.createElement('div', { className: classes.errorMessage,}\n          , React.createElement(ErrorPanel, { cluster: cluster, errorMessage: errorMessage,} )\n        )\n      )\n      , React.createElement('div', { className: classes.options,}\n        , React.createElement('div', null\n          , clusterLink && (\n            React.createElement(BackstageButton, {\n              variant: \"outlined\",\n              color: \"primary\",\n              size: \"small\",\n              to: clusterLink,\n              endIcon: React.createElement(OpenInNewIcon, null ),}\n            , \"Open Kubernetes Dashboard\"\n\n            )\n          )\n        )\n        , React.createElement(FormControlLabel, {\n          control: \n            React.createElement(Switch, {\n              checked: isYaml,\n              onChange: event => {\n                setIsYaml(event.target.checked);\n              },\n              name: \"YAML\",}\n            )\n          ,\n          label: \"YAML\",}\n        )\n      )\n      , React.createElement('div', { className: classes.content,}\n        , isYaml && React.createElement(CodeSnippet, { language: \"yaml\", text: jsYaml.dump(object),} )\n        , !isYaml && (\n          React.createElement(StructuredMetadataTable, {\n            metadata: renderObject(replaceNullsWithUndefined(object)),}\n          )\n        )\n      )\n    )\n  );\n};\n\n\n\n\n\n\n\n\n\nexport const KubernetesDrawer = ({\n  object,\n  renderObject,\n  kind,\n  buttonVariant = 'subtitle2',\n  expanded = false,\n  children,\n}) => {\n  const [isOpen, setIsOpen] = useState(expanded);\n  const classes = useDrawerStyles();\n\n  const toggleDrawer = (e, newValue) => {\n    e.stopPropagation();\n    setIsOpen(newValue);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(PodDrawerButton, {\n        onClick: e => toggleDrawer(e, true),\n        onFocus: event => event.stopPropagation(),}\n      \n        , children === undefined ? (\n          React.createElement(Typography, { variant: buttonVariant,}\n            , object.metadata?.name ?? 'unknown object'\n          )\n        ) : (\n          children\n        )\n      )\n      , React.createElement(Drawer, {\n        classes: {\n          paper: classes.paper,\n        },\n        anchor: \"right\",\n        open: isOpen,\n        onClose: (e) => toggleDrawer(e, false),\n        onClick: event => event.stopPropagation(),}\n      \n        , React.createElement(KubernetesDrawerContent, {\n          kind: kind,\n          toggleDrawer: toggleDrawer,\n          object: object,\n          renderObject: renderObject,}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport {\n  containersReady,\n  containerStatuses,\n  totalRestarts,\n  imageChips,\n  renderCondition,\n} from '../../utils/pod';\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\n\nexport const PodDrawer = ({\n  pod,\n  expanded,\n}\n\n\n) => {\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: pod,\n      expanded: expanded,\n      kind: \"Pod\",\n      renderObject: (podObject) => {\n        const phase = podObject.status?.phase ?? 'unknown';\n\n        const ports =\n          podObject.spec?.containers?.map(c => {\n            return {\n              [c.name]: c.ports,\n            };\n          }) ?? 'N/A';\n\n        const conditions = (podObject.status?.conditions ?? [])\n          .map(renderCondition)\n          .reduce((accum, next) => {\n            accum[next[0]] = next[1];\n            return accum;\n          }, {} );\n\n        return {\n          images: imageChips(podObject),\n          phase: phase,\n          'Containers Ready': containersReady(podObject),\n          'Total Restarts': totalRestarts(podObject),\n          'Container Statuses': containerStatuses(podObject),\n          ...conditions,\n          'Exposed ports': ports,\n        };\n      },}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\n\nimport { PodDrawer } from './PodDrawer';\nimport {\n  containersReady,\n  containerStatuses,\n  podStatusToCpuUtil,\n  podStatusToMemoryUtil,\n  totalRestarts,\n} from '../../utils/pod';\nimport { Table, } from '@backstage/core-components';\nimport { PodNamesWithMetricsContext } from '../../hooks/PodNamesWithMetrics';\n\nexport const READY_COLUMNS = 'READY';\nexport const RESOURCE_COLUMNS = 'RESOURCE';\n\n\n\n\n\n\n\n\nconst DEFAULT_COLUMNS = [\n  {\n    title: 'name',\n    highlight: true,\n    render: (pod) => React.createElement(PodDrawer, { pod: pod,} ),\n  },\n  {\n    title: 'phase',\n    render: (pod) => pod.status?.phase ?? 'unknown',\n  },\n  {\n    title: 'status',\n    render: containerStatuses,\n  },\n];\n\nconst READY = [\n  {\n    title: 'containers ready',\n    align: 'center',\n    render: containersReady,\n  },\n  {\n    title: 'total restarts',\n    align: 'center',\n    render: totalRestarts,\n    type: 'numeric',\n  },\n];\n\nexport const PodsTable = ({ pods, extraColumns = [] }) => {\n  const podNamesWithMetrics = useContext(PodNamesWithMetricsContext);\n  const columns = [...DEFAULT_COLUMNS];\n\n  if (extraColumns.includes(READY_COLUMNS)) {\n    columns.push(...READY);\n  }\n  if (extraColumns.includes(RESOURCE_COLUMNS)) {\n    const resourceColumns = [\n      {\n        title: 'CPU usage %',\n        render: (pod) => {\n          const metrics = podNamesWithMetrics.get(pod.metadata?.name ?? '');\n\n          if (!metrics) {\n            return 'unknown';\n          }\n\n          return podStatusToCpuUtil(metrics);\n        },\n      },\n      {\n        title: 'Memory usage %',\n        render: (pod) => {\n          const metrics = podNamesWithMetrics.get(pod.metadata?.name ?? '');\n\n          if (!metrics) {\n            return 'unknown';\n          }\n\n          return podStatusToMemoryUtil(metrics);\n        },\n      },\n    ];\n    columns.push(...resourceColumns);\n  }\n\n  const tableStyle = {\n    minWidth: '0',\n    width: '100%',\n  };\n\n  return (\n    React.createElement('div', { style: tableStyle,}\n      , React.createElement(Table, {\n        options: { paging: true, search: false },\n        data: pods,\n        columns: columns,}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { KubernetesDrawer } from '../KubernetesDrawer/KubernetesDrawer';\nimport { Typography, Grid } from '@material-ui/core';\n\nexport const ServiceDrawer = ({\n  service,\n  expanded,\n}\n\n\n) => {\n  return (\n    React.createElement(KubernetesDrawer, {\n      object: service,\n      expanded: expanded,\n      kind: \"Service\",\n      renderObject: (serviceObject) => {\n        return serviceObject.spec || {};\n      },}\n    \n      , React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 0,}\n      \n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { variant: \"h5\",}\n            , service.metadata?.name ?? 'unknown object'\n          )\n        )\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\",}, \"Service\"\n\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Divider,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { ServiceDrawer } from './ServiceDrawer';\nimport { GroupedResponsesContext } from '../../hooks';\nimport { StructuredMetadataTable } from '@backstage/core-components';\n\n\n\n\n\nconst ServiceSummary = ({ service }) => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { xs: 3, item: true,}\n        , React.createElement(ServiceDrawer, { service: service,} )\n      )\n\n      , React.createElement(Grid, { item: true, xs: 1,}\n        , React.createElement(Divider, { style: { height: '5em' }, orientation: \"vertical\",} )\n      )\n\n      , React.createElement(Grid, { item: true,}\n        , React.createElement(Typography, { variant: \"subtitle2\",}, \"Type: \"\n           , service.spec?.type ?? '?'\n        )\n      )\n    )\n  );\n};\n\n\n\n\n\nconst ServiceCard = ({ service }) => {\n  const metadata = {};\n\n  if (service.status?.loadBalancer?.ingress?.length ?? -1 > 0) {\n    metadata.loadbalancer = service.status?.loadBalancer;\n  }\n\n  if (service.spec?.type === 'ClusterIP') {\n    metadata.clusterIP = service.spec.clusterIP;\n  }\n  if (service.spec?.type === 'ExternalName') {\n    metadata.externalName = service.spec.externalName;\n  }\n\n  return (\n    React.createElement(StructuredMetadataTable, {\n      metadata: {\n        type: service.spec?.type,\n        ports: service.spec?.ports,\n        ...metadata,\n      },}\n    )\n  );\n};\n\n\n\n\n\n\n\nconst ServiceAccordion = ({ service }) => {\n  return (\n    React.createElement(Accordion, { TransitionProps: { unmountOnExit: true },}\n      , React.createElement(AccordionSummary, { expandIcon: React.createElement(ExpandMoreIcon, null ),}\n        , React.createElement(ServiceSummary, { service: service,} )\n      )\n      , React.createElement(AccordionDetails, null\n        , React.createElement(ServiceCard, { service: service,} )\n      )\n    )\n  );\n};\n\nexport const ServicesAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",}\n    \n      , groupedResponses.services.map((service, i) => (\n        React.createElement(Grid, { item: true, key: i, xs: true,}\n          , React.createElement(ServiceAccordion, { service: service,} )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\n\nexport const PodNamesWithMetricsContext = React.createContext\n\n(new Map());\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { kubernetesApiRef } from '../api/types';\nimport { kubernetesAuthProvidersApiRef } from '../kubernetes-auth-provider/types';\nimport { useEffect, useState } from 'react';\nimport useInterval from 'react-use/lib/useInterval';\n\n\n\n\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\n\nexport const useKubernetesObjects = (\n  entity,\n  intervalMs = 10000,\n) => {\n  const kubernetesApi = useApi(kubernetesApiRef);\n  const kubernetesAuthProvidersApi = useApi(kubernetesAuthProvidersApiRef);\n  const [kubernetesObjects, setKubernetesObjects] = useState\n\n(undefined);\n\n  const [error, setError] = useState(undefined);\n\n  const getObjects = async () => {\n    let clusters = [];\n\n    try {\n      clusters = await kubernetesApi.getClusters();\n    } catch (e) {\n      setError(e.message);\n      return;\n    }\n\n    const authProviders = [\n      ...new Set(\n        clusters.map(\n          c =>\n            `${c.authProvider}${\n              c.oidcTokenProvider ? `.${c.oidcTokenProvider}` : ''\n            }`,\n        ),\n      ),\n    ];\n\n    // For each auth type, invoke decorateRequestBodyForAuth on corresponding KubernetesAuthProvider\n    let requestBody = {\n      entity,\n    };\n    for (const authProviderStr of authProviders) {\n      // Multiple asyncs done sequentially instead of all at once to prevent same requestBody from being modified simultaneously\n      try {\n        requestBody =\n          await kubernetesAuthProvidersApi.decorateRequestBodyForAuth(\n            authProviderStr,\n            requestBody,\n          );\n      } catch (e) {\n        setError(e.message);\n        return;\n      }\n    }\n\n    try {\n      setKubernetesObjects(await kubernetesApi.getObjectsByEntity(requestBody));\n    } catch (e) {\n      setError(e.message);\n      return;\n    }\n  };\n\n  useEffect(() => {\n    getObjects();\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, [entity.metadata.name, kubernetesApi, kubernetesAuthProvidersApi]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  useInterval(() => {\n    getObjects();\n  }, intervalMs);\n\n  return {\n    kubernetesObjects,\n    error,\n  };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nexport const PodNamesWithErrorsContext = React.createContext(\n  new Set(),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\n\nexport const GroupedResponsesContext = React.createContext({\n  pods: [],\n  replicaSets: [],\n  deployments: [],\n  services: [],\n  configMaps: [],\n  horizontalPodAutoscalers: [],\n  ingresses: [],\n  jobs: [],\n  cronJobs: [],\n  customResources: [],\n  statefulsets: [],\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\n\nexport const ClusterContext = React.createContext({\n  name: '',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\nexport const kubernetesAuthProvidersApiRef =\n  createApiRef({\n    id: 'plugin.kubernetes-auth-providers.service',\n  });\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst kindMappings = {\n  deployment: 'deployment',\n  pod: 'pod',\n  ingress: 'ingress',\n  service: 'service',\n  horizontalpodautoscaler: 'deployment',\n  statefulset: 'statefulset',\n};\n\nexport function standardFormatter(options) {\n  if (!options.dashboardUrl) {\n    throw new Error('standard dashboard requires a dashboardUrl option');\n  }\n  const result = new URL(options.dashboardUrl.href);\n  const name = encodeURIComponent(options.object.metadata?.name ?? '');\n  const namespace = encodeURIComponent(\n    options.object.metadata?.namespace ?? '',\n  );\n  const validKind = kindMappings[options.kind.toLocaleLowerCase('en-US')];\n  if (!result.pathname.endsWith('/')) {\n    result.pathname += '/';\n  }\n  if (validKind && name && namespace) {\n    result.hash = `/${validKind}/${namespace}/${name}`;\n  } else if (namespace) {\n    result.hash = '/workloads';\n  }\n  if (namespace) {\n    // Note that Angular SPA requires a hash and the query parameter should be part of it\n    result.hash += `?namespace=${namespace}`;\n  }\n  return result;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst kindMappings = {\n  deployment: 'apps.deployment',\n  ingress: 'networking.k8s.io.ingress',\n  service: 'service',\n  horizontalpodautoscaler: 'autoscaling.horizontalpodautoscaler',\n};\n\nexport function rancherFormatter(options) {\n  if (!options.dashboardUrl) {\n    throw new Error('Rancher dashboard requires a dashboardUrl option');\n  }\n  const basePath = new URL(options.dashboardUrl.href);\n  const name = encodeURIComponent(options.object.metadata?.name ?? '');\n  const namespace = encodeURIComponent(\n    options.object.metadata?.namespace ?? '',\n  );\n  const validKind = kindMappings[options.kind.toLocaleLowerCase('en-US')];\n  if (!basePath.pathname.endsWith('/')) {\n    // a dashboard url with a path should end with a slash otherwise\n    // the new combined URL will replace the last segment with the appended path!\n    // https://foobar.com/abc/def + explorer/service/test  --> https://foobar.com/abc/explorer/service/test\n    // https://foobar.com/abc/def/ + explorer/service/test --> https://foobar.com/abc/def/explorer/service/test\n    basePath.pathname += '/';\n  }\n  let path = '';\n  if (validKind && name && namespace) {\n    path = `explorer/${validKind}/${namespace}/${name}`;\n  } else if (namespace) {\n    path = 'explorer/workload';\n  }\n  return new URL(path, basePath);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst kindMappings = {\n  deployment: 'deployments',\n  ingress: 'ingresses',\n  service: 'services',\n  horizontalpodautoscaler: 'horizontalpodautoscalers',\n  persistentvolume: 'persistentvolumes',\n};\n\nexport function openshiftFormatter(options) {\n  if (!options.dashboardUrl) {\n    throw new Error('OpenShift dashboard requires a dashboardUrl option');\n  }\n  const basePath = new URL(options.dashboardUrl.href);\n  const name = encodeURIComponent(options.object.metadata?.name ?? '');\n  const namespace = encodeURIComponent(\n    options.object.metadata?.namespace ?? '',\n  );\n  const validKind = kindMappings[options.kind.toLocaleLowerCase('en-US')];\n  if (!basePath.pathname.endsWith('/')) {\n    // a dashboard url with a path should end with a slash otherwise\n    // the new combined URL will replace the last segment with the appended path!\n    // https://foobar.com/abc/def + k8s/cluster/projects/test  --> https://foobar.com/abc/k8s/cluster/projects/test\n    // https://foobar.com/abc/def/ + k8s/cluster/projects/test --> https://foobar.com/abc/def/k8s/cluster/projects/test\n    basePath.pathname += '/';\n  }\n  let path = '';\n  if (namespace) {\n    if (name && validKind) {\n      path = `k8s/ns/${namespace}/${validKind}/${name}`;\n    } else {\n      path = `k8s/cluster/projects/${namespace}`;\n    }\n  } else if (validKind) {\n    path = `k8s/cluster/${validKind}`;\n    if (name) {\n      path += `/${name}`;\n    }\n  }\n  return new URL(path, basePath);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst basePath =\n  'https://portal.azure.com/#blade/Microsoft_Azure_ContainerService/AksK8ResourceMenuBlade/overview-Deployment/aksClusterId';\n\nconst requiredParams = ['subscriptionId', 'resourceGroup', 'clusterName'];\n\nexport function aksFormatter(options) {\n  if (!options.dashboardParameters) {\n    throw new Error('AKS dashboard requires a dashboardParameters option');\n  }\n  const args = options.dashboardParameters;\n  for (const param of requiredParams) {\n    if (typeof args[param] !== 'string') {\n      throw new Error(\n        `AKS dashboard requires a \"${param}\" of type string in the dashboardParameters option`,\n      );\n    }\n  }\n\n  const path = `/subscriptions/${args.subscriptionId}/resourceGroups/${args.resourceGroup}/providers/Microsoft.ContainerService/managedClusters/${args.clusterName}`;\n\n  const { name, namespace, uid } = options.object.metadata;\n  const { selector } = options.object.spec;\n  const params = {\n    kind: options.kind,\n    metadata: { name, namespace, uid },\n    spec: {\n      selector,\n    },\n  };\n\n  return new URL(\n    `${basePath}/${encodeURIComponent(path)}/resource/${encodeURIComponent(\n      JSON.stringify(params),\n    )}`,\n  );\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function eksFormatter(_options) {\n  throw new Error('EKS formatter is not yet implemented. Please, contribute!');\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst kindMappings = {\n  deployment: 'deployment',\n  pod: 'pod',\n  ingress: 'ingress',\n  service: 'service',\n  horizontalpodautoscaler: 'deployment',\n};\n\nexport function gkeFormatter(options) {\n  if (!options.dashboardParameters) {\n    throw new Error('GKE dashboard requires a dashboardParameters option');\n  }\n  const args = options.dashboardParameters;\n  if (typeof args.projectId !== 'string') {\n    throw new Error(\n      'GKE dashboard requires a \"projectId\" of type string in the dashboardParameters option',\n    );\n  }\n  if (typeof args.region !== 'string') {\n    throw new Error(\n      'GKE dashboard requires a \"region\" of type string in the dashboardParameters option',\n    );\n  }\n  if (typeof args.clusterName !== 'string') {\n    throw new Error(\n      'GKE dashboard requires a \"clusterName\" of type string in the dashboardParameters option',\n    );\n  }\n  const basePath = new URL('https://console.cloud.google.com/');\n  const region = encodeURIComponent(args.region);\n  const clusterName = encodeURIComponent(args.clusterName);\n  const name = encodeURIComponent(options.object.metadata?.name ?? '');\n  const namespace = encodeURIComponent(\n    options.object.metadata?.namespace ?? '',\n  );\n  const validKind = kindMappings[options.kind.toLocaleLowerCase('en-US')];\n  let path = '';\n  if (namespace && name && validKind) {\n    const kindsWithDetails = ['ingress', 'pod'];\n    const landingPage = kindsWithDetails.includes(validKind)\n      ? 'details'\n      : 'overview';\n    path = `kubernetes/${validKind}/${region}/${clusterName}/${namespace}/${name}/${landingPage}`;\n  } else {\n    path = `kubernetes/clusters/details/${region}/${clusterName}/details`;\n  }\n  const result = new URL(path, basePath);\n  result.searchParams.set('project', args.projectId);\n  return result;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { standardFormatter } from './standard';\nimport { rancherFormatter } from './rancher';\nimport { openshiftFormatter } from './openshift';\nimport { aksFormatter } from './aks';\nimport { eksFormatter } from './eks';\nimport { gkeFormatter } from './gke';\n\nexport const clusterLinksFormatters = {\n  standard: standardFormatter,\n  rancher: rancherFormatter,\n  openshift: openshiftFormatter,\n  aks: aksFormatter,\n  eks: eksFormatter,\n  gke: gkeFormatter,\n};\nexport const defaultFormatterName = 'standard';\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defaultFormatterName, clusterLinksFormatters } from './formatters';\n\n\n\n\n\n\n\n\n\nexport function formatClusterLink(options) {\n  if (!options.dashboardUrl && !options.dashboardParameters) {\n    return undefined;\n  }\n  if (options.dashboardUrl && !options.object) {\n    return options.dashboardUrl;\n  }\n  const app = options.dashboardApp || defaultFormatterName;\n  const formatter = clusterLinksFormatters[app];\n  if (!formatter) {\n    throw new Error(`Could not find Kubernetes dashboard app named '${app}'`);\n  }\n  const url = formatter({\n    dashboardUrl: options.dashboardUrl\n      ? new URL(options.dashboardUrl)\n      : undefined,\n    dashboardParameters: options.dashboardParameters,\n    object: options.object,\n    kind: options.kind,\n  });\n  return url.toString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function getOwnedResources(\n  potentialOwner,\n  possiblyOwned,\n) {\n  return possiblyOwned.filter(\n    p =>\n      p.metadata?.ownerReferences?.some(\n        o => o.uid === potentialOwner.metadata?.uid,\n      ) ?? false,\n  );\n}\n\nexport const getOwnedPodsThroughReplicaSets = (\n  potentialOwner,\n  replicaSets,\n  pods,\n) => {\n  return getOwnedResources(\n    potentialOwner,\n    replicaSets.filter(rs => rs.status && rs.status.replicas > 0),\n  ).reduce((accum, rs) => {\n    return accum.concat(getOwnedResources(rs, pods));\n  }, [] );\n};\n\n\n\n\n\n\n\nexport const getMatchingHpa = (\n  owner,\n  hpas,\n) => {\n  return hpas.find(hpa => {\n    return (\n      (hpa.spec?.scaleTargetRef?.kind ?? '').toLocaleLowerCase('en-US') ===\n        owner.kind.toLocaleLowerCase('en-US') &&\n      (hpa.metadata?.namespace ?? '') ===\n        (owner.namespace ?? 'unknown-namespace') &&\n      (hpa.spec?.scaleTargetRef?.name ?? '') ===\n        (owner.name ?? 'unknown-deployment')\n    );\n  });\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React, { Fragment, } from 'react';\nimport { Chip } from '@material-ui/core';\nimport {\n  StatusAborted,\n  StatusError,\n  StatusOK,\n  SubvalueCell,\n} from '@backstage/core-components';\n\n\nexport const imageChips = (pod) => {\n  const containerStatuses = pod.status?.containerStatuses ?? [];\n  const images = containerStatuses.map((cs, i) => {\n    return React.createElement(Chip, { key: i, label: `${cs.name}=${cs.image}`, size: \"small\",} );\n  });\n\n  return React.createElement('div', null, images);\n};\n\nexport const containersReady = (pod) => {\n  const containerStatuses = pod.status?.containerStatuses ?? [];\n  const containersReadyItem = containerStatuses.filter(cs => cs.ready).length;\n\n  return `${containersReadyItem}/${containerStatuses.length}`;\n};\n\nexport const totalRestarts = (pod) => {\n  const containerStatuses = pod.status?.containerStatuses ?? [];\n  return containerStatuses?.reduce((a, b) => a + b.restartCount, 0);\n};\n\nexport const containerStatuses = (pod) => {\n  const containerStatusesItem = pod.status?.containerStatuses ?? [];\n  const errors = containerStatusesItem.reduce((accum, next) => {\n    if (next.state === undefined) {\n      return accum;\n    }\n\n    const waiting = next.state.waiting;\n    const terminated = next.state.terminated;\n\n    const renderCell = (reason) => (\n      React.createElement(Fragment, { key: `${pod.metadata?.name}-${next.name}`,}\n        , React.createElement(SubvalueCell, {\n          value: \n            reason === 'Completed' ? (\n              React.createElement(StatusOK, null, \"Container: \" , next.name)\n            ) : (\n              React.createElement(StatusError, null, \"Container: \" , next.name)\n            )\n          ,\n          subvalue: reason,}\n        )\n        , React.createElement('br', null )\n      )\n    );\n\n    if (waiting) {\n      accum.push(renderCell(waiting.reason));\n    }\n\n    if (terminated) {\n      accum.push(renderCell(terminated.reason));\n    }\n\n    return accum;\n  }, [] );\n\n  if (errors.length === 0) {\n    return React.createElement(StatusOK, null, \"OK\");\n  }\n\n  return errors;\n};\n\nexport const renderCondition = (\n  condition,\n) => {\n  const status = condition.status;\n\n  if (status === 'True') {\n    return [condition.type, React.createElement(StatusOK, null, \"True\")];\n  } else if (status === 'False') {\n    return [\n      condition.type,\n      React.createElement(SubvalueCell, {\n        value: React.createElement(StatusError, null, \"False\"),\n        subvalue: condition.message ?? '',}\n      ),\n    ];\n  }\n  return [condition.type, React.createElement(StatusAborted, null )];\n};\n\n// visible for testing\nexport const currentToDeclaredResourceToPerc = (\n  current,\n  resource,\n) => {\n  if (Number(resource) === 0) return `0%`;\n\n  if (typeof current === 'number' && typeof resource === 'number') {\n    return `${Math.round((current / resource) * 100)}%`;\n  }\n\n  const numerator = BigInt(current);\n  const denominator = BigInt(resource);\n\n  return `${(numerator * BigInt(100)) / denominator}%`;\n};\n\nconst formatMilicores = (value) => {\n  return `${parseFloat(value.toString()) * 1000}m`;\n};\n\nexport const podStatusToCpuUtil = (podStatus) => {\n  const cpuUtil = podStatus.cpu;\n\n  let currentUsage = cpuUtil.currentUsage;\n\n  // current usage number for CPU is a different unit than request/limit total\n  // this might be a bug in the k8s library\n  if (typeof cpuUtil.currentUsage === 'number') {\n    currentUsage = cpuUtil.currentUsage / 10;\n  }\n\n  return (\n    React.createElement(SubvalueCell, {\n      value: `requests: ${currentToDeclaredResourceToPerc(\n        currentUsage,\n        cpuUtil.requestTotal,\n      )} of ${formatMilicores(cpuUtil.requestTotal)}`,\n      subvalue: `limits: ${currentToDeclaredResourceToPerc(\n        currentUsage,\n        cpuUtil.limitTotal,\n      )} of ${formatMilicores(cpuUtil.limitTotal)}`,}\n    )\n  );\n};\n\nconst bytesToMiB = (value) => {\n  return `${parseFloat(value.toString()) / 1024 / 1024}MiB`;\n};\n\nexport const podStatusToMemoryUtil = (\n  podStatus,\n) => {\n  const memUtil = podStatus.memory;\n\n  return (\n    React.createElement(SubvalueCell, {\n      value: `requests: ${currentToDeclaredResourceToPerc(\n        memUtil.currentUsage,\n        memUtil.requestTotal,\n      )} of ${bytesToMiB(memUtil.requestTotal)}`,\n      subvalue: `limits: ${currentToDeclaredResourceToPerc(\n        memUtil.currentUsage,\n        memUtil.limitTotal,\n      )} of ${bytesToMiB(memUtil.limitTotal)}`,}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// TODO this could probably be a lodash groupBy\nexport const groupResponses = (\n  fetchResponse,\n) => {\n  return fetchResponse.reduce(\n    (prev, next) => {\n      switch (next.type) {\n        case 'deployments':\n          prev.deployments.push(...next.resources);\n          break;\n        case 'pods':\n          prev.pods.push(...next.resources);\n          break;\n        case 'replicasets':\n          prev.replicaSets.push(...next.resources);\n          break;\n        case 'services':\n          prev.services.push(...next.resources);\n          break;\n        case 'configmaps':\n          prev.configMaps.push(...next.resources);\n          break;\n        case 'horizontalpodautoscalers':\n          prev.horizontalPodAutoscalers.push(...next.resources);\n          break;\n        case 'ingresses':\n          prev.ingresses.push(...next.resources);\n          break;\n        case 'jobs':\n          prev.jobs.push(...next.resources);\n          break;\n        case 'cronjobs':\n          prev.cronJobs.push(...next.resources);\n          break;\n        case 'customresources':\n          prev.customResources.push(...next.resources);\n          break;\n        case 'statefulsets':\n          prev.statefulsets.push(...next.resources);\n          break;\n        default:\n      }\n      return prev;\n    },\n    {\n      pods: [],\n      replicaSets: [],\n      deployments: [],\n      services: [],\n      configMaps: [],\n      horizontalPodAutoscalers: [],\n      ingresses: [],\n      jobs: [],\n      cronJobs: [],\n      customResources: [],\n      statefulsets: [],\n    } ,\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const LIGHTHOUSE_WEBSITE_URL_ANNOTATION = 'lighthouse.com/website-url';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useLocation } from 'react-router-dom';\n\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport function formatTime(timestamp) {\n  let date;\n  if (timestamp instanceof Date) {\n    date = timestamp;\n  } else {\n    date = new Date(timestamp);\n  }\n  return date.toUTCString();\n}\n\nexport const CATEGORIES = [\n  'accessibility',\n  'performance',\n  'seo',\n  'best-practices',\n];\n\nexport const CATEGORY_LABELS = {\n  accessibility: 'Accessibility',\n  performance: 'Performance',\n  seo: 'SEO',\n  'best-practices': 'Best Practices',\n  pwa: 'Progressive Web App',\n};\n\n\nexport function buildSparklinesDataForItem(\n  item,\n) {\n  return item.audits\n    .filter(\n      (audit) => audit.status === 'COMPLETED',\n    )\n    .reduce((scores, audit) => {\n      Object.values(audit.categories).forEach(category => {\n        scores[category.id] = scores[category.id] || [];\n        scores[category.id].unshift(category.score);\n      });\n\n      // edge case: if only one audit exists, force a \"flat\" sparkline\n      Object.values(scores).forEach(arr => {\n        if (arr.length === 1) arr.push(arr[0]);\n      });\n\n      return scores;\n    }, {} );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { SupportButton } from '@backstage/core-components';\n\nexport default function LighthouseSupportButton() {\n  return (\n    React.createElement(SupportButton, null, \"Lighthouse audits run for any web domain, stored over time.\"\n\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Button, Grid, makeStyles, Tab, Tabs } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { useState } from 'react';\nimport useLocalStorage from 'react-use/lib/useLocalStorage';\nimport LighthouseSupportButton from '../SupportButton';\nimport {\n  ContentHeader,\n  InfoCard,\n  MarkdownContent,\n} from '@backstage/core-components';\n\n// TODO(freben): move all of this out of index\n\nexport const LIGHTHOUSE_INTRO_LOCAL_STORAGE =\n  '@backstage/lighthouse-plugin/intro-dismissed';\n\nconst USE_CASES = `\nGoogle's [Lighthouse](https://developers.google.com/web/tools/lighthouse) auditing tool for websites\nis a great open-source resource for benchmarking and improving the accessibility, performance, SEO, and best practices of your site.\nAt Spotify, we keep track of Lighthouse audit scores over time to look at trends and overall areas for investment.\n\nThis plugin allows you to generate on-demand Lighthouse audits for websites, and to track the trends for the\ntop-level categories of Lighthouse at a glance.\n\nIn the future, we hope to add support for scheduling audits (which we do internally), as well as allowing\ncustom runs of Lighthouse to be ingested (for auditing sites that require authentication or some session state).\n`;\n\nconst SETUP = `\nTo get started, you will need a running instance of [lighthouse-audit-service](https://github.com/spotify/lighthouse-audit-service).\n_It's likely you will need to enable CORS when running lighthouse-audit-service. Initialize the app\nwith the environment variable \\`LAS_CORS\\` set to \\`true\\`._\n\nWhen you have an instance running that Backstage can hook into, first install the plugin into your app:\n\n\\`\\`\\`sh\ncd packages/app\nyarn add @backstage/plugin-lighthouse\n\\`\\`\\`\n\nModify your app routes in \\`App.tsx\\` to include the \\`LighthousePage\\` component exported from the plugin, for example:\n\n\\`\\`\\`tsx\n// At the top imports\nimport { LighthousePage } from '@backstage/plugin-lighthouse';\n\n<FlatRoutes>\n  // ...\n  <Route path=\"/lighthouse\" element={<LighthousePage />} />\n  // ...\n</FlatRoutes>;\n\\`\\`\\`\n\nThen configure the \\`lighthouse-audit-service\\` URL in your [\\`app-config.yaml\\`](https://github.com/backstage/backstage/blob/master/app-config.yaml).\n\n\\`\\`\\`yaml\nlighthouse:\n  baseUrl: http://your-service-url\n\\`\\`\\`\n`;\n\nconst useStyles = makeStyles(theme => ({\n  tabs: { marginBottom: -18 },\n  tab: { minWidth: 72, paddingLeft: 1, paddingRight: 1 },\n  content: { marginBottom: theme.spacing(2) },\n  closeButtonContainer: { height: '100%' },\n  closeButtonItem: { paddingBottom: 0 },\n}));\n\nfunction GettingStartedCard() {\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  return (\n    React.createElement(InfoCard, {\n      title: \"Get started\" ,\n      subheader: \n        React.createElement(Tabs, {\n          value: value,\n          indicatorColor: \"primary\",\n          textColor: \"primary\",\n          onChange: (_ev, newValue) => setValue(newValue),\n          'aria-label': \"get started tabs\"  ,\n          className: classes.tabs,}\n        \n          , React.createElement(Tab, { className: classes.tab, label: \"Use cases\" ,} )\n          , React.createElement(Tab, { className: classes.tab, label: \"Setup\",} )\n        )\n      ,\n      divider: true,\n      actions: \n        React.createElement(React.Fragment, null\n          , React.createElement(Grid, { container: true, direction: \"row\", justifyContent: \"flex-end\",}\n            , React.createElement(Grid, { item: true,}\n              , React.createElement(Button, {\n                component: \"a\",\n                href: \"https://github.com/spotify/lighthouse-audit-service\",\n                size: \"small\",\n                target: \"_blank\",}\n              , \"Check out the README\"\n\n              )\n            )\n          )\n        )\n      ,}\n    \n      , value === 0 && React.createElement(MarkdownContent, { content: USE_CASES,} )\n      , value === 1 && React.createElement(MarkdownContent, { content: SETUP,} )\n    )\n  );\n}\n\n\n\n\n\nexport default function LighthouseIntro({ onDismiss = () => {} }) {\n  const classes = useStyles();\n  const [dismissed, setDismissed] = useLocalStorage(\n    LIGHTHOUSE_INTRO_LOCAL_STORAGE,\n    false,\n  );\n\n  if (dismissed) return null;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(ContentHeader, { title: \"Welcome to Lighthouse in Backstage!\"    ,}\n        , React.createElement(LighthouseSupportButton, null )\n      )\n      , React.createElement(Grid, { className: classes.content, container: true, spacing: 3, direction: \"row\",}\n        , React.createElement(Grid, { item: true, xs: 12, sm: 6, md: 4,}\n          , React.createElement(GettingStartedCard, null )\n        )\n        /* TODO add link and image for blog post here */\n        /* <Grid item xs={12} sm={6} md={4}>\n          <InfoCard>Blog</InfoCard>\n        </Grid> */\n        , React.createElement(Grid, { item: true, xs: 12, sm: 6, md: 8,}\n          , React.createElement(Grid, {\n            container: true,\n            justifyContent: \"flex-end\",\n            alignItems: \"flex-end\",\n            className: classes.closeButtonContainer,}\n          \n            , React.createElement(Grid, { item: true, className: classes.closeButtonItem,}\n              , React.createElement(Button, {\n                variant: \"text\",\n                onClick: () => {\n                  onDismiss();\n                  setDismissed(true);\n                },}\n              \n                , React.createElement(CloseIcon, null ), \" Hide intro\"\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { lighthouseApiRef } from '../../api';\nimport useInterval from 'react-use/lib/useInterval';\nimport {\n  formatTime,\n  CATEGORIES,\n  CATEGORY_LABELS,\n  buildSparklinesDataForItem,\n} from '../../utils';\nimport { generatePath } from 'react-router-dom';\nimport AuditStatusIcon from '../AuditStatusIcon';\n\nimport {\n  Link,\n  Table,\n\n  TrendLine,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nconst columns = [\n  {\n    title: 'Website URL',\n    field: 'websiteUrl',\n  },\n  ...CATEGORIES.map(category => ({\n    title: CATEGORY_LABELS[category],\n    field: category,\n  })),\n  {\n    title: 'Last Report',\n    field: 'lastReport',\n    cellStyle: {\n      whiteSpace: 'nowrap',\n    },\n  },\n  {\n    title: 'Last Audit Triggered',\n    field: 'lastAuditTriggered',\n    cellStyle: {\n      minWidth: 120,\n    },\n  },\n];\n\nexport const AuditListTable = ({ items }) => {\n  const [websiteState, setWebsiteState] = useState(items);\n  const lighthouseApi = useApi(lighthouseApiRef);\n\n  useEffect(() => {\n    setWebsiteState(items);\n  }, [items]);\n\n  const runRefresh = (websites) => {\n    websites.forEach(async website => {\n      const response = await lighthouseApi.getWebsiteForAuditId(\n        website.lastAudit.id,\n      );\n      const auditStatus = response.lastAudit.status;\n      if (auditStatus === 'COMPLETED' || auditStatus === 'FAILED') {\n        const newWebsiteData = websiteState.slice(0);\n        newWebsiteData[newWebsiteData.findIndex(w => w.url === response.url)] =\n          response;\n        setWebsiteState(newWebsiteData);\n      }\n    });\n  };\n\n  const runningWebsiteAudits = websiteState\n    ? websiteState.filter(website => website.lastAudit.status === 'RUNNING')\n    : [];\n\n  useInterval(\n    () => runRefresh(runningWebsiteAudits),\n    runningWebsiteAudits.length > 0 ? 5000 : null,\n  );\n\n  const data = websiteState.map(website => {\n    const trendlineData = buildSparklinesDataForItem(website);\n    const trendlines = {};\n    CATEGORIES.forEach(category => {\n      trendlines[category] = (\n        React.createElement(TrendLine, {\n          title: `trendline for ${CATEGORY_LABELS[category]} category of ${website.url}`,\n          data: trendlineData[category] || [],}\n        )\n      );\n    });\n\n    return {\n      websiteUrl: (\n        React.createElement(Link, { to: generatePath('audit/:id', { id: website.lastAudit.id }),}\n          , website.url\n        )\n      ),\n      ...trendlines,\n      lastReport: (\n        React.createElement(React.Fragment, null\n          , React.createElement(AuditStatusIcon, { audit: website.lastAudit,} ), ' '\n          , React.createElement('span', null, website.lastAudit.status.toLocaleUpperCase('en-US'))\n        )\n      ),\n      lastAuditTriggered: formatTime(website.lastAudit.timeCreated),\n    };\n  });\n\n  return (\n    React.createElement(Table, {\n      options: {\n        paging: false,\n        toolbar: false,\n      },\n      columns: columns,\n      data: data,}\n    )\n  );\n};\n\nexport default AuditListTable;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Button, Grid } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React, { useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport useLocalStorage from 'react-use/lib/useLocalStorage';\nimport { lighthouseApiRef } from '../../api';\nimport { useQuery } from '../../utils';\nimport LighthouseIntro, { LIGHTHOUSE_INTRO_LOCAL_STORAGE } from '../Intro';\nimport LighthouseSupportButton from '../SupportButton';\nimport AuditListTable from './AuditListTable';\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  HeaderLabel,\n  InfoCard,\n  Page,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\n\nimport { useApi } from '@backstage/core-plugin-api';\n\n// TODO(freben): move all of this out of index\n\nexport const LIMIT = 10;\n\nconst AuditList = () => {\n  const [dismissedStored] = useLocalStorage(LIGHTHOUSE_INTRO_LOCAL_STORAGE);\n  const [dismissed, setDismissed] = useState(dismissedStored);\n\n  const query = useQuery();\n  const page = query.get('page')\n    ? parseInt(query.get('page') , 10) || 1\n    : 1;\n\n  const lighthouseApi = useApi(lighthouseApiRef);\n  const { value, loading, error } = useAsync(\n    async () =>\n      await lighthouseApi.getWebsiteList({\n        limit: LIMIT,\n        offset: (page - 1) * LIMIT,\n      }),\n    [page],\n  );\n\n  const pageCount = useMemo(() => {\n    if (value?.total && value?.limit)\n      return Math.ceil(value?.total / value?.limit);\n    return 0;\n  }, [value?.total, value?.limit]);\n\n  const navigate = useNavigate();\n\n  let content = null;\n  if (value) {\n    content = (\n      React.createElement(React.Fragment, null\n        , React.createElement(AuditListTable, { items: value?.items || [],} )\n        , pageCount > 1 && (\n          React.createElement(Pagination, {\n            page: page,\n            count: pageCount,\n            onChange: (_event, newPage) => {\n              navigate(`?page=${newPage}`);\n            },}\n          )\n        )\n      )\n    );\n  } else if (loading) {\n    content = React.createElement(Progress, null );\n  } else if (error) {\n    content = (\n      React.createElement(WarningPanel, { severity: \"error\", title: \"Could not load audit list.\"    ,}\n        , error.message\n      )\n    );\n  }\n\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Header, {\n        title: \"Lighthouse\",\n        subtitle: \"Website audits powered by Lighthouse\"    ,}\n      \n        , React.createElement(HeaderLabel, { label: \"Owner\", value: \"Spotify\",} )\n        , React.createElement(HeaderLabel, { label: \"Lifecycle\", value: \"Alpha\",} )\n      )\n      , React.createElement(Content, null\n        , React.createElement(LighthouseIntro, { onDismiss: () => setDismissed(true),} )\n        , React.createElement(ContentHeader, {\n          title: \"Audits\",\n          description: \"View all audits run for your website through Backstage here. Track the trend of your most recent audits.\"                 ,}\n        \n          , React.createElement(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: () => navigate('create-audit'),}\n          , \"Create Audit\"\n\n          )\n          , dismissed && React.createElement(LighthouseSupportButton, null )\n        )\n        , React.createElement(Grid, { container: true, spacing: 3, direction: \"column\",}\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(InfoCard, { noPadding: true,}, content)\n          )\n        )\n      )\n    )\n  );\n};\n\nexport default AuditList;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Button,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { useEffect, useState } from 'react';\nimport {\n  generatePath,\n  Link,\n  resolvePath,\n  useNavigate,\n  useParams,\n} from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { lighthouseApiRef, } from '../../api';\nimport { formatTime } from '../../utils';\nimport AuditStatusIcon from '../AuditStatusIcon';\nimport LighthouseSupportButton from '../SupportButton';\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  HeaderLabel,\n  InfoCard,\n  Page,\n  Progress,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\n// TODO(freben): move all of this out of index\n\nconst useStyles = makeStyles({\n  contentGrid: {\n    height: '100%',\n  },\n  iframe: {\n    border: '0',\n    width: '100%',\n    height: '100%',\n  },\n  errorOutput: { whiteSpace: 'pre' },\n});\n\n\n\n\n\nconst AuditLinkList = ({ audits = [], selectedId }) => (\n  React.createElement(List, {\n    'data-testid': \"audit-sidebar\",\n    component: \"nav\",\n    'aria-label': \"lighthouse audit history\"  ,}\n  \n    , audits.map(audit => (\n      React.createElement(ListItem, {\n        key: audit.id,\n        selected: audit.id === selectedId,\n        button: true,\n        component: Link,\n        replace: true,\n        to: resolvePath(generatePath('audit/:id', { id: audit.id }), '../../'),}\n      \n        , React.createElement(ListItemIcon, null\n          , React.createElement(AuditStatusIcon, { audit: audit,} )\n        )\n        , React.createElement(ListItemText, { primary: formatTime(audit.timeCreated),} )\n      )\n    ))\n  )\n);\n\nconst AuditView = ({ audit }) => {\n  const classes = useStyles();\n  const params = useParams() ;\n  const { url: lighthouseUrl } = useApi(lighthouseApiRef);\n\n  if (audit?.status === 'RUNNING') return React.createElement(Progress, null );\n  if (audit?.status === 'FAILED')\n    return (\n      React.createElement(Alert, { severity: \"error\",}, \"This audit failed when attempting to run after several retries. Check that your instance of lighthouse-audit-service can successfully connect to your website and try again.\"\n\n\n\n      )\n    );\n\n  return (\n    React.createElement(InfoCard, { variant: \"fullHeight\",}\n      , React.createElement('iframe', {\n        className: classes.iframe,\n        title: `Lighthouse audit${audit?.url ? ` for ${audit.url}` : ''}`,\n        src: `${lighthouseUrl}/v1/audits/${encodeURIComponent(params.id)}`,}\n      )\n    )\n  );\n};\n\nexport const AuditViewContent = () => {\n  const lighthouseApi = useApi(lighthouseApiRef);\n  const params = useParams() ;\n  const classes = useStyles();\n  const navigate = useNavigate();\n\n  const {\n    loading,\n    error,\n    value: nextValue,\n  } = useAsync(\n    async () => await lighthouseApi.getWebsiteForAuditId(params.id),\n    [params.id],\n  );\n  const [value, setValue] = useState();\n  useEffect(() => {\n    if (!!nextValue && nextValue.url !== value?.url) {\n      setValue(nextValue);\n    }\n  }, [value, nextValue, setValue]);\n\n  let content = null;\n  if (value) {\n    content = (\n      React.createElement(Grid, { container: true, alignItems: \"stretch\", className: classes.contentGrid,}\n        , React.createElement(Grid, { item: true, xs: 3,}\n          , React.createElement(AuditLinkList, { audits: value?.audits, selectedId: params.id,} )\n        )\n        , React.createElement(Grid, { item: true, xs: 9,}\n          , React.createElement(AuditView, { audit: value?.audits.find(a => a.id === params.id),} )\n        )\n      )\n    );\n  } else if (loading) {\n    content = React.createElement(Progress, null );\n  } else if (error) {\n    content = (\n      React.createElement(Alert, {\n        'data-testid': \"error-message\",\n        severity: \"error\",\n        className: classes.errorOutput,}\n      \n        , error.message\n      )\n    );\n  }\n\n  let createAuditButtonUrl = 'create-audit';\n  if (value?.url) {\n    createAuditButtonUrl += `?url=${encodeURIComponent(value.url)}`;\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(ContentHeader, {\n        title: value?.url || 'Audit',\n        description: \"See a history of all Lighthouse audits for your website run through Backstage.\"            ,}\n      \n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => navigate(`../../${createAuditButtonUrl}`),}\n        , \"Create New Audit\"\n\n        )\n        , React.createElement(LighthouseSupportButton, null )\n      )\n      , content\n    )\n  );\n};\n\nconst ConnectedAuditView = () => (\n  React.createElement(Page, { themeId: \"tool\",}\n    , React.createElement(Header, { title: \"Lighthouse\", subtitle: \"Website audits powered by Lighthouse\"    ,}\n      , React.createElement(HeaderLabel, { label: \"Owner\", value: \"Spotify\",} )\n      , React.createElement(HeaderLabel, { label: \"Lifecycle\", value: \"Alpha\",} )\n    )\n    , React.createElement(Content, { stretch: true,}\n      , React.createElement(AuditViewContent, null )\n    )\n  )\n);\n\nexport default ConnectedAuditView;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Button,\n  Grid,\n  List,\n  ListItem,\n  makeStyles,\n  MenuItem,\n  TextField,\n} from '@material-ui/core';\nimport React, { useCallback, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { lighthouseApiRef } from '../../api';\nimport { useQuery } from '../../utils';\nimport LighthouseSupportButton from '../SupportButton';\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  HeaderLabel,\n  InfoCard,\n  Page,\n} from '@backstage/core-components';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\n// TODO(freben): move all of this out of index\n\nconst useStyles = makeStyles(theme => ({\n  input: {\n    minWidth: 300,\n    [theme.breakpoints.down('xs')]: {\n      minWidth: '100%',\n    },\n  },\n  buttonList: {\n    marginLeft: theme.spacing(-1),\n    marginRight: theme.spacing(-1),\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n    [theme.breakpoints.down('xs')]: {\n      marginLeft: 0,\n      marginRight: 0,\n      flexDirection: 'column',\n      '& > *': {\n        width: '100%',\n      },\n    },\n  },\n}));\n\nexport const CreateAuditContent = () => {\n  const errorApi = useApi(errorApiRef);\n  const lighthouseApi = useApi(lighthouseApiRef);\n  const classes = useStyles();\n  const query = useQuery();\n  const navigate = useNavigate();\n  const [submitting, setSubmitting] = useState(false);\n  const [url, setUrl] = useState(query.get('url') || '');\n  const [emulatedFormFactor, setEmulatedFormFactor] = useState('mobile');\n\n  const triggerAudit = useCallback(async () => {\n    setSubmitting(true);\n    try {\n      // TODO use the id from the response to redirect to the audit page for that id when\n      // FAILED and RUNNING audits are supported\n      await lighthouseApi.triggerAudit({\n        url: url.replace(/\\/$/, ''),\n        options: {\n          lighthouseConfig: {\n            settings: {\n              emulatedFormFactor,\n            },\n          },\n        },\n      });\n      navigate('..');\n    } catch (err) {\n      errorApi.post(err);\n    } finally {\n      setSubmitting(false);\n    }\n  }, [\n    url,\n    emulatedFormFactor,\n    lighthouseApi,\n    setSubmitting,\n    errorApi,\n    navigate,\n  ]);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(ContentHeader, {\n        title: \"Trigger a new audit\"   ,\n        description: \"Submitting this form will immediately trigger and store a new Lighthouse audit. Trigger audits to track your website's accessibility, performance, SEO, and best practices over time.\"                         ,}\n      \n        , React.createElement(LighthouseSupportButton, null )\n      )\n      , React.createElement(Grid, { container: true, direction: \"column\",}\n        , React.createElement(Grid, { item: true, xs: 12, sm: 6,}\n          , React.createElement(InfoCard, null\n            , React.createElement('form', {\n              onSubmit: ev => {\n                ev.preventDefault();\n                triggerAudit();\n              },}\n            \n              , React.createElement(List, null\n                , React.createElement(ListItem, null\n                  , React.createElement(TextField, {\n                    name: \"lighthouse-create-audit-url-tf\",\n                    className: classes.input,\n                    label: \"URL\",\n                    placeholder: \"https://spotify.com\",\n                    helperText: \"The target URL for Lighthouse to use.\"      ,\n                    required: true,\n                    disabled: submitting,\n                    onChange: ev => setUrl(ev.target.value),\n                    value: url,\n                    inputProps: { 'aria-label': 'URL' },}\n                  )\n                )\n                , React.createElement(ListItem, null\n                  , React.createElement(TextField, {\n                    name: \"lighthouse-create-audit-emulated-form-factor-tf\",\n                    className: classes.input,\n                    label: \"Emulated Form Factor\"  ,\n                    helperText: \"Device to simulate when auditing\"    ,\n                    select: true,\n                    required: true,\n                    disabled: submitting,\n                    onChange: ev => setEmulatedFormFactor(ev.target.value),\n                    value: emulatedFormFactor,\n                    inputProps: { 'aria-label': 'Emulated form factor' },}\n                  \n                    , React.createElement(MenuItem, { value: \"mobile\",}, \"Mobile\")\n                    , React.createElement(MenuItem, { value: \"desktop\",}, \"Desktop\")\n                  )\n                )\n                , React.createElement(ListItem, { className: classes.buttonList,}\n                  , React.createElement(Button, {\n                    variant: \"outlined\",\n                    color: \"primary\",\n                    onClick: () => navigate('..'),\n                    disabled: submitting,}\n                  , \"Cancel\"\n\n                  )\n                  , React.createElement(Button, {\n                    variant: \"contained\",\n                    color: \"primary\",\n                    type: \"submit\",\n                    disabled: submitting,}\n                  , \"Create Audit\"\n\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n\nconst CreateAudit = () => (\n  React.createElement(Page, { themeId: \"tool\",}\n    , React.createElement(Header, { title: \"Lighthouse\", subtitle: \"Website audits powered by Lighthouse\"    ,}\n      , React.createElement(HeaderLabel, { label: \"Owner\", value: \"Spotify\",} )\n      , React.createElement(HeaderLabel, { label: \"Lifecycle\", value: \"Alpha\",} )\n    )\n    , React.createElement(Content, null\n      , React.createElement(CreateAuditContent, null )\n    )\n  )\n);\n\nexport default CreateAudit;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { AuditListTable } from './AuditListTable';\nimport { useWebsiteForEntity } from '../../hooks/useWebsiteForEntity';\nimport { Progress } from '@backstage/core-components';\n\nexport const AuditListForEntity = () => {\n  const { value, loading, error } = useWebsiteForEntity();\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error || !value) {\n    return null;\n  }\n\n  return React.createElement(AuditListTable, { 'data-test-id': \"AuditListTable\", items: [value],} );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport AuditList from './components/AuditList';\nimport AuditView, { AuditViewContent } from './components/AuditView';\nimport CreateAudit, { CreateAuditContent } from './components/CreateAudit';\n\nimport { LIGHTHOUSE_WEBSITE_URL_ANNOTATION } from '../constants';\nimport { AuditListForEntity } from './components/AuditList/AuditListForEntity';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isLighthouseAvailable = (entity) =>\n  Boolean(entity.metadata.annotations?.[LIGHTHOUSE_WEBSITE_URL_ANNOTATION]);\n\nexport const Router = () => (\n  React.createElement(Routes, null\n    , React.createElement(Route, { path: \"/\", element: React.createElement(AuditList, null ),} )\n    , React.createElement(Route, { path: \"/audit/:id\", element: React.createElement(AuditView, null ),} )\n    , React.createElement(Route, { path: \"/create-audit\", element: React.createElement(CreateAudit, null ),} )\n  )\n);\n\n\n\nexport const EmbeddedRouter = (_props) => {\n  const { entity } = useEntity();\n\n  if (!isLighthouseAvailable(entity)) {\n    return (\n      React.createElement(MissingAnnotationEmptyState, {\n        annotation: LIGHTHOUSE_WEBSITE_URL_ANNOTATION,}\n      )\n    );\n  }\n\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(AuditListForEntity, null ),} )\n      , React.createElement(Route, { path: \"/audit/:id\", element: React.createElement(AuditViewContent, null ),} )\n      , React.createElement(Route, { path: \"/create-audit\", element: React.createElement(CreateAuditContent, null ),} )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class FetchError extends Error {\n  get name() {\n    return this.constructor.name;\n  }\n\n  static async forResponse(resp) {\n    return new FetchError(\n      `Request failed with status code ${\n        resp.status\n      }.\\nReason: ${await resp.text()}`,\n    );\n  }\n}\n\n\n\n\n\n\n\n\n\nexport const lighthouseApiRef = createApiRef({\n  id: 'plugin.lighthouse.service',\n});\n\nexport class LighthouseRestApi  {\n  static fromConfig(config) {\n    return new LighthouseRestApi(config.getString('lighthouse.baseUrl'));\n  }\n\n  constructor( url) {;this.url = url;}\n\n   async fetch(input, init) {\n    const resp = await fetch(`${this.url}${input}`, init);\n    if (!resp.ok) throw await FetchError.forResponse(resp);\n    return await resp.json();\n  }\n\n  async getWebsiteList({\n    limit,\n    offset,\n  } = {}) {\n    const params = new URLSearchParams();\n    if (typeof limit === 'number') params.append('limit', limit.toString());\n    if (typeof offset === 'number') params.append('offset', offset.toString());\n    return await this.fetch(\n      `/v1/websites?${params.toString()}`,\n    );\n  }\n\n  async getWebsiteForAuditId(auditId) {\n    return await this.fetch(\n      `/v1/audits/${encodeURIComponent(auditId)}/website`,\n    );\n  }\n\n  async triggerAudit(payload) {\n    return await this.fetch('/v1/audits', {\n      method: 'POST',\n      body: JSON.stringify(payload),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n  }\n\n  async getWebsiteByUrl(websiteUrl) {\n    return this.fetch(\n      `/v1/websites/${encodeURIComponent(websiteUrl)}`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport {\n  StatusError,\n  StatusOK,\n  StatusPending,\n} from '@backstage/core-components';\n\n// TODO(freben): move all of this out of index\n\nconst AuditStatusIcon = ({ audit }) => {\n  if (audit.status === 'FAILED') return React.createElement(StatusError, null );\n  if (audit.status === 'COMPLETED') return React.createElement(StatusOK, null );\n  return React.createElement(StatusPending, null );\n};\n\nexport default AuditStatusIcon;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { useWebsiteForEntity } from '../../hooks/useWebsiteForEntity';\nimport AuditStatusIcon from '../AuditStatusIcon';\nimport {\n  InfoCard,\n\n  Progress,\n  StatusError,\n  StatusOK,\n  StatusWarning,\n  StructuredMetadataTable,\n} from '@backstage/core-components';\n\nconst LighthouseCategoryScoreStatus = ({ score }) => {\n  const scoreAsPercentage = Math.round(score * 100);\n  switch (true) {\n    case scoreAsPercentage >= 90:\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusOK, null )\n          , scoreAsPercentage, \"%\"\n        )\n      );\n    case scoreAsPercentage >= 50 && scoreAsPercentage < 90:\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusWarning, null )\n          , scoreAsPercentage, \"%\"\n        )\n      );\n    case scoreAsPercentage < 50:\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement(StatusError, null )\n          , scoreAsPercentage, \"%\"\n        )\n      );\n    default:\n      return React.createElement('span', null, \"N/A\");\n  }\n};\n\nconst LighthouseAuditStatus = ({ audit }) => (\n  React.createElement(React.Fragment, null\n    , React.createElement(AuditStatusIcon, { audit: audit,} )\n    , audit.status.toLocaleUpperCase('en-US')\n  )\n);\n\nconst LighthouseAuditSummary = ({\n  audit,\n  dense = false,\n}\n\n\n) => {\n  const { url } = audit;\n  const flattenedCategoryData = {};\n  if (audit.status === 'COMPLETED') {\n    const categories = (audit ).categories;\n    const categoryIds = Object.keys(categories) ;\n    categoryIds.forEach((id) => {\n      const { title, score } = categories[id];\n\n      flattenedCategoryData[title] = (\n        React.createElement(LighthouseCategoryScoreStatus, { score: score,} )\n      );\n    });\n  }\n  const tableData = {\n    url,\n    status: React.createElement(LighthouseAuditStatus, { audit: audit,} ),\n    ...flattenedCategoryData,\n  };\n\n  return React.createElement(StructuredMetadataTable, { metadata: tableData, dense: dense,} );\n};\n\nexport const LastLighthouseAuditCard = ({\n  dense = false,\n  variant,\n}\n\n\n) => {\n  const { value: website, loading, error } = useWebsiteForEntity();\n\n  let content;\n  if (loading) {\n    content = React.createElement(Progress, null );\n  }\n  if (error) {\n    content = null;\n  }\n  if (website) {\n    content = (\n      React.createElement(LighthouseAuditSummary, { audit: website.lastAudit, dense: dense,} )\n    );\n  }\n  return (\n    React.createElement(InfoCard, { title: \"Lighthouse Audit\" , variant: variant,}\n      , content\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { LIGHTHOUSE_WEBSITE_URL_ANNOTATION } from '../../constants';\nimport { lighthouseApiRef } from '../api';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\n// For the sake of simplicity we assume that an entity has only one website url. This is to avoid encoding a list\n// type in an annotation which is a plain string.\nexport const useWebsiteForEntity = () => {\n  const { entity } = useEntity();\n  const websiteUrl =\n    entity.metadata.annotations?.[LIGHTHOUSE_WEBSITE_URL_ANNOTATION] ?? '';\n  const lighthouseApi = useApi(lighthouseApiRef);\n  const errorApi = useApi(errorApiRef);\n  const response = useAsync(\n    () => lighthouseApi.getWebsiteByUrl(websiteUrl),\n    [websiteUrl],\n  );\n  if (response.error) {\n    errorApi.post(response.error);\n  }\n  return response;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { Grid, Tab, Tabs, makeStyles } from '@material-ui/core';\nimport { newRelicDashboardApiRef } from '../../../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Progress, ErrorPanel } from '@backstage/core-components';\nimport { DashboardSnapshot } from './DashboardSnapshot';\n\n\n\n\n\n\n\n\n\nfunction TabPanel(props) {\n  const { children, value1, index, ...other } = props;\n\n  return (\n    React.createElement('div', {\n      role: \"tabpanel\",\n      hidden: value1 !== index,\n      id: `simple-tabpanel-${index}`,\n      'aria-labelledby': `simple-tab-${index}`,\n      ...other,}\n    \n      , children\n    )\n  );\n}\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\n\n\nconst useStyles = makeStyles(\n  theme => ({\n    tabsWrapper: {\n      gridArea: 'pageSubheader',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n    },\n    defaultTab: {\n      padding: theme.spacing(3, 3),\n      ...theme.typography.caption,\n      textTransform: 'uppercase',\n      fontWeight: 'bold',\n      color: theme.palette.text.secondary,\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n    tabRoot: {\n      '&:hover': {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary,\n      },\n    },\n  }),\n  { name: 'DashboardHeaderTabs' },\n);\nexport const DashboardSnapshotList = ({ guid }) => {\n  const styles = useStyles();\n  const newRelicDashboardAPI = useApi(newRelicDashboardApiRef);\n  const { value, loading, error } = useAsync(async (\n\n) => {\n    const dashboardObject =\n      newRelicDashboardAPI.getDashboardEntity(guid);\n    return dashboardObject;\n  }, [guid]);\n  const [value1, setValue1] = useState(0);\n  const handleChange = ({}, newValue) => {\n    setValue1(newValue);\n  };\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error) {\n    return React.createElement(ErrorPanel, { title: error.name, defaultExpanded: true, error: error,} );\n  }\n  return (\n    React.createElement(Grid, { container: true, direction: \"column\",}\n      , React.createElement(Tabs, {\n        selectionFollowsFocus: true,\n        indicatorColor: \"primary\",\n        textColor: \"inherit\",\n        variant: \"scrollable\",\n        scrollButtons: \"auto\",\n        'aria-label': \"scrollable auto tabs example\"   ,\n        onChange: handleChange,\n        value: value1,\n        style: { width: '100%' },}\n      \n        , value?.getDashboardEntity?.data?.actor.entitySearch.results.entities?.map(\n          (Entity, index) => {\n            return (\n              React.createElement(Tab, {\n                label: Entity.name,\n                className: styles.defaultTab,\n                classes: {\n                  selected: styles.selected,\n                  root: styles.tabRoot,\n                },\n                ...a11yProps(index),}\n              )\n            );\n          },\n        )\n      )\n      , value?.getDashboardEntity?.data?.actor.entitySearch.results.entities?.map(\n        (Entity, index) => {\n          return (\n            React.createElement(TabPanel, { value1: value1, index: index,}\n              , React.createElement(DashboardSnapshot, {\n                name: Entity.name,\n                permalink: Entity.permalink,\n                guid: Entity.guid,\n                duration: 26297430000,}\n              )\n            )\n          );\n        },\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Grid } from '@material-ui/core';\nimport { Page, Content } from '@backstage/core-components';\nimport { DashboardEntityList } from './DashboardEntityList';\nimport { DashboardSnapshotList } from './DashboardSnapshotList';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { NEWRELIC_GUID_ANNOTATION } from '../../constants';\n\nexport const NewRelicDashboard = () => {\n  const { entity } = useEntity();\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Content, null\n        , React.createElement(Grid, { container: true, spacing: 6, direction: \"row\", alignItems: \"stretch\",}\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(DashboardEntityList, null )\n          )\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(DashboardSnapshotList, {\n              guid: String(\n                entity.metadata.annotations?.[NEWRELIC_GUID_ANNOTATION],\n              ),}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React from 'react';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { Button } from '@material-ui/core';\nimport { NewRelicDashboard } from './components/NewRelicDashboard';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { NEWRELIC_GUID_ANNOTATION } from './constants';\n\nexport const isNewRelicDashboardAvailable = (entity) =>\n  Boolean(entity?.metadata?.annotations?.[NEWRELIC_GUID_ANNOTATION]);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (isNewRelicDashboardAvailable(entity)) {\n    return React.createElement(NewRelicDashboard, null );\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(MissingAnnotationEmptyState, { annotation: NEWRELIC_GUID_ANNOTATION,} )\n      , React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://github.com/backstage/backstage/tree/master/plugins/newrelic-dashboard\",}\n      , \"Read New Relic Dashboard Plugin Docs\"\n\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const newRelicDashboardApiRef = createApiRef({\n  id: 'plugin.newrelicdashboard.service',\n});\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const getDashboardParentGuidQuery =\n  'query ($query: String) {\\n  actor {\\n    entitySearch(query: $query) {\\n      results {\\n        entities {\\n          name\\n          ... on DashboardEntityOutline {\\n            name\\n            dashboardParentGuid\\n          guid\\n          }\\n          permalink\\n        }\\n      }\\n    }\\n  }\\n}\\n';\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const getDashboardSnapshotQuery =\n  'mutation($guid: EntityGuid! , ,$duration: Milliseconds) {\\n  dashboardCreateSnapshotUrl(guid: $guid , params: {timeWindow: {duration: $duration}})\\n}';\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getDashboardParentGuidQuery } from '../queries/getDashboardParentGuidQuery';\nimport { getDashboardSnapshotQuery } from '../queries/getDashboardSnapshotQuery';\nimport { ResponseError } from '@backstage/errors';\n\nexport class NewRelicDashboardClient  {\n    discoveryApi;\n    fetchApi;\n\n  constructor({\n    discoveryApi,\n    fetchApi,\n  }\n\n\n\n) {\n    this.discoveryApi = discoveryApi;\n    this.fetchApi = fetchApi;\n  }\n\n   async callApi(\n    query,\n    variables,\n  ) {\n    const myHeaders = new Headers();\n    myHeaders.append('Content-Type', 'application/json');\n    const graphql = JSON.stringify({\n      query: query,\n      variables: variables,\n    });\n    const requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: graphql,\n      redirect: 'follow',\n    };\n\n    const apiUrl = `${await this.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/newrelic/api/graphql`;\n    const response = await this.fetchApi.fetch(apiUrl, requestOptions);\n    if (response.status === 200) {\n      return (await response.json()) ;\n    }\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    } else {\n      return undefined;\n    }\n  }\n\n  async getDashboardEntity(\n    guid,\n  ) {\n    const DashboardEntityList = await this.callApi(\n      getDashboardParentGuidQuery,\n      {\n        query: `id ='${guid}' OR parentId ='${guid}'`,\n      },\n    );\n    if (\n      DashboardEntityList &&\n      DashboardEntityList?.data?.actor.entitySearch.results.entities?.length > 1\n    ) {\n      DashboardEntityList.data.actor.entitySearch.results.entities =\n        DashboardEntityList?.data.actor.entitySearch.results.entities.filter(\n          entity => entity?.dashboardParentGuid !== null,\n        );\n    }\n    return {\n      getDashboardEntity: DashboardEntityList,\n    };\n  }\n\n  async getDashboardSnapshot(\n    guid,\n    duration,\n  ) {\n    const DashboardSnapshotValue = await this.callApi(\n      getDashboardSnapshotQuery,\n      {\n        guid: guid,\n        duration: duration,\n      },\n    );\n    return {\n      getDashboardSnapshot: DashboardSnapshotValue,\n    };\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Box, makeStyles, Typography } from '@material-ui/core';\nimport { newRelicDashboardApiRef } from '../../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  Progress,\n  InfoCard,\n  Link,\n  ErrorPanel,\n} from '@backstage/core-components';\nimport DesktopMac from '@material-ui/icons/DesktopMac';\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { NEWRELIC_GUID_ANNOTATION } from './../../constants';\n\nconst useStyles = makeStyles({\n  svgIcon: {\n    display: 'inline-block',\n    '& svg': {\n      display: 'inline-block',\n      fontSize: 'inherit',\n      verticalAlign: 'baseline',\n    },\n  },\n});\nexport const DashboardEntityList = () => {\n  const { entity } = useEntity();\n  const classes = useStyles();\n  const newRelicDashboardAPI = useApi(newRelicDashboardApiRef);\n  const { value, loading, error } = useAsync(async (\n\n) => {\n    const dashboardObject =\n      newRelicDashboardAPI.getDashboardEntity(\n        String(entity.metadata.annotations?.[NEWRELIC_GUID_ANNOTATION]),\n      );\n    return dashboardObject;\n  }, [entity.metadata.annotations?.[NEWRELIC_GUID_ANNOTATION]]);\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error) {\n    return React.createElement(ErrorPanel, { title: error.name, defaultExpanded: true, error: error,} );\n  }\n  return (\n    React.createElement(InfoCard, { title: \"New Relic Dashboard Pages\"   , variant: \"gridItem\",}\n      , value?.getDashboardEntity === undefined &&\n        'Unauthorized Request , please check API Key'\n      , value?.getDashboardEntity !== undefined &&\n        value?.getDashboardEntity?.data.actor.entitySearch.results?.entities\n          ?.length <= 0 && (\n          React.createElement(React.Fragment, null, \"No Dashboard Pages found with the specified Dashboard GUID\"        )\n        )\n      , value?.getDashboardEntity?.data.actor.entitySearch.results.entities?.map(\n        (entityResult) => {\n          return (\n            React.createElement(Box, { style: { margin: '10px' }, display: \"flex\",}\n              , React.createElement(Box, { mr: 1, className: classes.svgIcon,}\n                , React.createElement(Typography, { component: \"div\",}\n                  , React.createElement(DesktopMac, null )\n                )\n              )\n              , React.createElement(Box, { flexGrow: \"1\",}\n                , React.createElement(Link, { to: entityResult.permalink,}, entityResult.name)\n              )\n            )\n          );\n        },\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Box, Grid } from '@material-ui/core';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  InfoCard,\n  Progress,\n  ErrorPanel,\n  Link,\n} from '@backstage/core-components';\nimport { newRelicDashboardApiRef } from '../../../api';\n\n\n\n\n\n\n\n\n\nexport const DashboardSnapshot = ({\n  guid,\n  name,\n  permalink,\n  duration,\n}) => {\n  const newRelicDashboardAPI = useApi(newRelicDashboardApiRef);\n  const { value, loading, error } = useAsync(async (\n\n) => {\n    const dashboardObject =\n      newRelicDashboardAPI.getDashboardSnapshot(guid, duration);\n    return dashboardObject;\n  }, [guid, duration]);\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error) {\n    return React.createElement(ErrorPanel, { title: error.name, defaultExpanded: true, error: error,} );\n  }\n  const url =\n    value?.getDashboardSnapshot?.data?.dashboardCreateSnapshotUrl?.replace(\n      /\\pdf$/i,\n      'png',\n    );\n  return (\n    React.createElement(Grid, { container: true, style: { marginTop: '30px' },}\n      , React.createElement(InfoCard, { variant: \"gridItem\", title: name,}\n        , React.createElement(Box, { display: \"flex\",}\n          , React.createElement(Box, { flexGrow: \"1\",}\n            , React.createElement(Link, { to: permalink,}\n              , url ? (\n                React.createElement('img', {\n                  alt: `${name} Dashbord`,\n                  style: { border: 'solid 1px black' },\n                  src: url,}\n                )\n              ) : (\n                'Dashboard loading... , click here to open if it did not render correctly'\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const NEWRELIC_GUID_ANNOTATION = 'newrelic.com/dashboard-guid';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef, } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const newRelicApiRef = createApiRef({\n  id: 'plugin.newrelic.service',\n});\n\nconst DEFAULT_PROXY_PATH_BASE = '/newrelic';\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class NewRelicClient  {\n    discoveryApi;\n    proxyPathBase;\n\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.proxyPathBase = options.proxyPathBase ?? DEFAULT_PROXY_PATH_BASE;\n  }\n\n  async getApplications() {\n    const url = await this.getApiUrl('apm', 'applications.json');\n    const response = await fetch(url);\n    let responseJson;\n\n    try {\n      responseJson = await response.json();\n    } catch (e) {\n      responseJson = { applications: [] };\n    }\n\n    if (response.status !== 200) {\n      throw new Error(\n        `Error communicating with New Relic: ${\n          responseJson?.error?.title || response.statusText\n        }`,\n      );\n    }\n\n    return responseJson;\n  }\n\n   async getApiUrl(product, path) {\n    const proxyUrl = await this.discoveryApi.getBaseUrl('proxy');\n    return `${proxyUrl}${this.proxyPathBase}/${product}/api/${path}`;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DEFAULT_NAMESPACE,\n\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  catalogApiRef,\n  entityRouteParams,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  createStyles,\n  Grid,\n  makeStyles,\n\n  Typography,\n} from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React from 'react';\nimport { generatePath } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\n\nimport {\n  Avatar,\n  InfoCard,\n  Progress,\n  ResponseErrorPanel,\n  Link,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: '4px',\n      overflow: 'visible',\n      position: 'relative',\n      margin: theme.spacing(4, 1, 1),\n      flex: '1',\n      minWidth: '0px',\n    },\n    email: {\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n      display: 'inline-block',\n      maxWidth: '100%',\n      '&:hover': {\n        overflow: 'visible',\n        whiteSpace: 'normal',\n      },\n    },\n  }),\n);\n\nconst MemberComponent = (props) => {\n  const classes = useStyles();\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile },\n  } = props.member;\n  const displayName = profile?.displayName ?? metaName;\n\n  return (\n    React.createElement(Grid, { item: true, container: true, xs: 12, sm: 6, md: 4, xl: 2,}\n      , React.createElement(Box, { className: classes.card,}\n        , React.createElement(Box, {\n          display: \"flex\",\n          flexDirection: \"column\",\n          m: 3,\n          alignItems: \"center\",\n          justifyContent: \"center\",}\n        \n          , React.createElement(Avatar, {\n            displayName: displayName,\n            picture: profile?.picture,\n            customStyles: {\n              position: 'absolute',\n              top: '-2rem',\n            },}\n          )\n          , React.createElement(Box, {\n            pt: 2,\n            sx: {\n              maxWidth: '100%',\n            },\n            textAlign: \"center\",}\n          \n            , React.createElement(Typography, { variant: \"h5\",}\n              , React.createElement(Link, {\n                to: generatePath(\n                  `/catalog/:namespace/user/${metaName}`,\n                  entityRouteParams(props.member),\n                ),}\n              \n                , displayName\n              )\n            )\n            , profile?.email && (\n              React.createElement(Link, { className: classes.email, to: `mailto:${profile.email}`,}\n                , profile.email\n              )\n            )\n            , description && (\n              React.createElement(Typography, { variant: \"subtitle2\",}, description)\n            )\n          )\n        )\n      )\n    )\n  );\n};\n\n/** @public */\nexport const MembersListCard = (props\n\n\n) => {\n  const { memberDisplayTitle = 'Members', pageSize = 50 } = props;\n\n  const { entity: groupEntity } = useEntity();\n  const {\n    metadata: { name: groupName, namespace: grpNamespace },\n    spec: { profile },\n  } = groupEntity;\n  const catalogApi = useApi(catalogApiRef);\n\n  const displayName = profile?.displayName ?? groupName;\n\n  const groupNamespace = grpNamespace || DEFAULT_NAMESPACE;\n\n  const [page, setPage] = React.useState(1);\n  const pageChange = (_, pageIndex) => {\n    setPage(pageIndex);\n  };\n\n  const {\n    loading,\n    error,\n    value: members,\n  } = useAsync(async () => {\n    const membersList = await catalogApi.getEntities({\n      filter: {\n        kind: 'User',\n        'relations.memberof': [\n          stringifyEntityRef({\n            kind: 'group',\n            namespace: groupNamespace.toLocaleLowerCase('en-US'),\n            name: groupName.toLocaleLowerCase('en-US'),\n          }),\n        ],\n      },\n    });\n\n    return membersList.items ;\n  }, [catalogApi, groupEntity]);\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  const nbPages = Math.ceil((members?.length || 0) / pageSize);\n  const paginationLabel = nbPages < 2 ? '' : `, page ${page} of ${nbPages}`;\n\n  const pagination = (\n    React.createElement(Pagination, {\n      count: nbPages,\n      page: page,\n      onChange: pageChange,\n      showFirstButton: true,\n      showLastButton: true,}\n    )\n  );\n\n  return (\n    React.createElement(Grid, { item: true,}\n      , React.createElement(InfoCard, {\n        title: `${memberDisplayTitle} (${\n          members?.length || 0\n        }${paginationLabel})`,\n        subheader: `of ${displayName}`,\n        ...(nbPages <= 1 ? {} : { actions: pagination }),}\n      \n        , React.createElement(Grid, { container: true, spacing: 3,}\n          , members && members.length > 0 ? (\n            members\n              .slice(pageSize * (page - 1), pageSize * page)\n              .map(member => (\n                React.createElement(MemberComponent, { member: member, key: member.metadata.uid,} )\n              ))\n          ) : (\n            React.createElement(Box, { p: 2,}\n              , React.createElement(Typography, null, \"This group has no \"\n                    , memberDisplayTitle.toLocaleLowerCase(), \".\"\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_CHILD_OF,\n  RELATION_PARENT_OF,\n  ANNOTATION_LOCATION,\n  stringifyEntityRef,\n  ANNOTATION_EDIT_URL,\n} from '@backstage/catalog-model';\nimport {\n  catalogApiRef,\n  EntityRefLinks,\n  getEntityRelations,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  IconButton,\n} from '@material-ui/core';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { useCallback } from 'react';\nimport {\n  Avatar,\n  InfoCard,\n\n  Link,\n} from '@backstage/core-components';\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst CardTitle = (props) => (\n  React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n    , React.createElement(GroupIcon, { fontSize: \"inherit\",} )\n    , React.createElement(Box, { ml: 1,}, props.title)\n  )\n);\n\n/** @public */\nexport const GroupProfileCard = (props) => {\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { entity: group } = useEntity();\n\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(group));\n    alertApi.post({ message: 'Refresh scheduled', severity: 'info' });\n  }, [catalogApi, alertApi, group]);\n\n  if (!group) {\n    return React.createElement(Alert, { severity: \"error\",}, \"Group not found\"  );\n  }\n\n  const {\n    metadata: { name, description, annotations },\n    spec: { profile },\n  } = group;\n\n  const childRelations = getEntityRelations(group, RELATION_PARENT_OF, {\n    kind: 'Group',\n  });\n  const parentRelations = getEntityRelations(group, RELATION_CHILD_OF, {\n    kind: 'group',\n  });\n\n  const entityLocation = annotations?.[ANNOTATION_LOCATION];\n  const allowRefresh =\n    entityLocation?.startsWith('url:') || entityLocation?.startsWith('file:');\n\n  const entityMetadataEditUrl =\n    group.metadata.annotations?.[ANNOTATION_EDIT_URL];\n\n  const displayName = profile?.displayName ?? name;\n  const emailHref = profile?.email ? `mailto:${profile.email}` : '#';\n  const infoCardAction = entityMetadataEditUrl ? (\n    React.createElement(IconButton, {\n      'aria-label': \"Edit\",\n      title: \"Edit Metadata\" ,\n      component: Link,\n      to: entityMetadataEditUrl,}\n    \n      , React.createElement(EditIcon, null )\n    )\n  ) : (\n    React.createElement(IconButton, { 'aria-label': \"Edit\", disabled: true, title: \"Edit Metadata\" ,}\n      , React.createElement(EditIcon, null )\n    )\n  );\n\n  return (\n    React.createElement(InfoCard, {\n      title: React.createElement(CardTitle, { title: displayName,} ),\n      subheader: description,\n      variant: props.variant,\n      action: \n        React.createElement(React.Fragment, null\n          , allowRefresh && (\n            React.createElement(IconButton, {\n              'aria-label': \"Refresh\",\n              title: \"Schedule entity refresh\"  ,\n              onClick: refreshEntity,}\n            \n              , React.createElement(CachedIcon, null )\n            )\n          )\n          , infoCardAction\n        )\n      ,}\n    \n      , React.createElement(Grid, { container: true, spacing: 3,}\n        , React.createElement(Grid, { item: true, xs: 12, sm: 2, xl: 1,}\n          , React.createElement(Avatar, { displayName: displayName, picture: profile?.picture,} )\n        )\n        , React.createElement(Grid, { item: true, md: 10, xl: 11,}\n          , React.createElement(List, null\n            , profile?.email && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemIcon, null\n                  , React.createElement(Tooltip, { title: \"Email\",}\n                    , React.createElement(EmailIcon, null )\n                  )\n                )\n                , React.createElement(ListItemText, null\n                  , React.createElement(Link, { to: emailHref,}, profile.email)\n                )\n              )\n            )\n\n            , parentRelations.length ? (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemIcon, null\n                  , React.createElement(Tooltip, { title: \"Parent Group\" ,}\n                    , React.createElement(AccountTreeIcon, null )\n                  )\n                )\n                , React.createElement(ListItemText, null\n                  , React.createElement(EntityRefLinks, {\n                    entityRefs: parentRelations,\n                    defaultKind: \"Group\",}\n                  )\n                )\n              )\n            ) : null\n\n            , childRelations.length ? (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemIcon, null\n                  , React.createElement(Tooltip, { title: \"Child Groups\" ,}\n                    , React.createElement(GroupIcon, null )\n                  )\n                )\n                , React.createElement(ListItemText, null\n                  , React.createElement(EntityRefLinks, {\n                    entityRefs: childRelations,\n                    defaultKind: \"Group\",}\n                  )\n                )\n              )\n            ) : null\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_MEMBER_OF, } from '@backstage/catalog-model';\nimport {\n  EntityRefLinks,\n  getEntityRelations,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n} from '@material-ui/core';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport PersonIcon from '@material-ui/icons/Person';\nimport Alert from '@material-ui/lab/Alert';\nimport React from 'react';\nimport {\n  Avatar,\n  InfoCard,\n\n  Link,\n} from '@backstage/core-components';\n\nconst CardTitle = (props) =>\n  props.title ? (\n    React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n      , React.createElement(PersonIcon, { fontSize: \"inherit\",} )\n      , React.createElement(Box, { ml: 1,}, props.title)\n    )\n  ) : null;\n\n/** @public */\nexport const UserProfileCard = (props) => {\n  const { entity: user } = useEntity();\n  if (!user) {\n    return React.createElement(Alert, { severity: \"error\",}, \"User not found\"  );\n  }\n\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile },\n  } = user;\n  const displayName = profile?.displayName ?? metaName;\n  const emailHref = profile?.email ? `mailto:${profile.email}` : undefined;\n  const memberOfRelations = getEntityRelations(user, RELATION_MEMBER_OF, {\n    kind: 'Group',\n  });\n\n  return (\n    React.createElement(InfoCard, {\n      title: React.createElement(CardTitle, { title: displayName,} ),\n      subheader: description,\n      variant: props.variant,}\n    \n      , React.createElement(Grid, { container: true, spacing: 3, alignItems: \"flex-start\",}\n        , React.createElement(Grid, { item: true, xs: 12, sm: 2, xl: 1,}\n          , React.createElement(Avatar, { displayName: displayName, picture: profile?.picture,} )\n        )\n\n        , React.createElement(Grid, { item: true, md: 10, xl: 11,}\n          , React.createElement(List, null\n            , profile?.email && (\n              React.createElement(ListItem, null\n                , React.createElement(ListItemIcon, null\n                  , React.createElement(Tooltip, { title: \"Email\",}\n                    , React.createElement(EmailIcon, null )\n                  )\n                )\n                , React.createElement(ListItemText, null\n                  , React.createElement(Link, { to: emailHref ?? '',}, profile.email)\n                )\n              )\n            )\n\n            , React.createElement(ListItem, null\n              , React.createElement(ListItemIcon, null\n                , React.createElement(Tooltip, { title: \"Member of\" ,}\n                  , React.createElement(GroupIcon, null )\n                )\n              )\n              , React.createElement(ListItemText, null\n                , React.createElement(EntityRefLinks, {\n                  entityRefs: memberOfRelations,\n                  defaultKind: \"Group\",}\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n\n  RELATION_MEMBER_OF,\n  RELATION_PARENT_OF,\n  parseEntityRef,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n\n  catalogApiRef,\n  getEntityRelations,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport limiterFactory from 'p-limit';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport qs from 'qs';\n\nconst limiter = limiterFactory(10);\n\n\n\n\n\n\n\nconst getQueryParams = (\n  ownersEntityRef,\n  selectedEntity,\n) => {\n  const { kind, type } = selectedEntity;\n  const owners = ownersEntityRef.map(owner =>\n    humanizeEntityRef(parseEntityRef(owner), { defaultKind: 'group' }),\n  );\n  const filters = {\n    kind,\n    type,\n    owners,\n    user: 'all',\n  };\n  return qs.stringify({ filters }, { arrayFormat: 'repeat' });\n};\n\nconst getOwnersEntityRef = (owner) => {\n  let owners = [stringifyEntityRef(owner)];\n  if (owner.kind === 'User') {\n    const ownerGroups = getEntityRelations(owner, RELATION_MEMBER_OF, {\n      kind: 'Group',\n    });\n    const ownerGroupsName = ownerGroups.map(ownerGroup =>\n      stringifyEntityRef({\n        kind: ownerGroup.kind,\n        namespace: ownerGroup.namespace,\n        name: ownerGroup.name,\n      }),\n    );\n    owners = [...owners, ...ownerGroupsName];\n  }\n  return owners;\n};\n\nconst getAggregatedOwnersEntityRef = async (\n  parentGroup,\n  catalogApi,\n) => {\n  const requestedEntities = [];\n  const outstandingEntities = new Map();\n  const processedEntities = new Set();\n  requestedEntities.push(parentGroup);\n  let currentEntity = parentGroup;\n\n  while (requestedEntities.length > 0) {\n    const childRelations = getEntityRelations(\n      currentEntity,\n      RELATION_PARENT_OF,\n      {\n        kind: 'Group',\n      },\n    );\n\n    await Promise.all(\n      childRelations.map(childGroup =>\n        limiter(async () => {\n          const promise = catalogApi.getEntityByRef(childGroup);\n          outstandingEntities.set(childGroup.name, promise);\n          try {\n            const processedEntity = await promise;\n            if (processedEntity) {\n              requestedEntities.push(processedEntity);\n            }\n          } finally {\n            outstandingEntities.delete(childGroup.name);\n          }\n        }),\n      ),\n    );\n    requestedEntities.shift();\n    processedEntities.add(\n      stringifyEntityRef({\n        kind: currentEntity.kind,\n        namespace: currentEntity.metadata.namespace,\n        name: currentEntity.metadata.name,\n      }),\n    );\n    // always set currentEntity to the first element of array requestedEntities\n    currentEntity = requestedEntities[0];\n  }\n\n  return Array.from(processedEntities);\n};\n\nexport function useGetEntities(\n  entity,\n  relationsType,\n  isGroup,\n  entityFilterKind,\n)\n\n\n\n\n\n\n\n\n\n\n {\n  const catalogApi = useApi(catalogApiRef);\n  const kinds = entityFilterKind ?? ['Component', 'API', 'System'];\n\n  const {\n    loading,\n    error,\n    value: componentsWithCounters,\n  } = useAsync(async () => {\n    const owners =\n      relationsType === 'aggregated' && isGroup\n        ? await getAggregatedOwnersEntityRef(entity, catalogApi)\n        : getOwnersEntityRef(entity);\n    const ownedEntitiesList = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: kinds,\n          'relations.ownedBy': owners,\n        },\n      ],\n      fields: [\n        'kind',\n        'metadata.name',\n        'metadata.namespace',\n        'spec.type',\n        'relations',\n      ],\n    });\n\n    const counts = ownedEntitiesList.items.reduce(\n      (acc, ownedEntity) => {\n        const match = acc.find(\n          x =>\n            x.kind === ownedEntity.kind &&\n            x.type === (ownedEntity.spec?.type ?? ownedEntity.kind),\n        );\n        if (match) {\n          match.count += 1;\n        } else {\n          acc.push({\n            kind: ownedEntity.kind,\n            type: ownedEntity.spec?.type?.toString() ?? ownedEntity.kind,\n            count: 1,\n          });\n        }\n        return acc;\n      },\n      [],\n    );\n\n    // Return top N (six) entities to be displayed in ownership boxes\n    const topN = counts.sort((a, b) => b.count - a.count).slice(0, 6);\n\n    return topN.map(topOwnedEntity => ({\n      counter: topOwnedEntity.count,\n      type: topOwnedEntity.type,\n      name: topOwnedEntity.type.toLocaleUpperCase('en-US'),\n      queryParams: getQueryParams(owners, topOwnedEntity),\n    })) \n\n\n\n\n;\n  }, [catalogApi, entity, relationsType]);\n\n  return {\n    componentsWithCounters,\n    loading,\n    error,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Link, Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\n\nimport {\n  Box,\n  createStyles,\n  Grid,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { catalogIndexRouteRef } from '../../../routes';\nimport { useGetEntities } from './useGetEntities';\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: '4px',\n      padding: theme.spacing(2),\n      color: '#fff',\n      transition: `${theme.transitions.duration.standard}ms`,\n      '&:hover': {\n        boxShadow: theme.shadows[4],\n      },\n    },\n    bold: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    entityTypeBox: {\n      background: (props) =>\n        theme.getPageTheme({ themeId: props.type }).backgroundImage,\n    },\n  }),\n);\n\nconst EntityCountTile = ({\n  counter,\n  type,\n  name,\n  url,\n}\n\n\n\n\n) => {\n  const classes = useStyles({ type });\n\n  return (\n    React.createElement(Link, { to: url, variant: \"body2\",}\n      , React.createElement(Box, {\n        className: `${classes.card} ${classes.entityTypeBox}`,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",}\n      \n        , React.createElement(Typography, { className: classes.bold, variant: \"h6\",}\n          , counter\n        )\n        , React.createElement(Typography, { className: classes.bold, variant: \"h6\",}\n          , pluralize(name, counter)\n        )\n      )\n    )\n  );\n};\n\nexport const ComponentsGrid = ({\n  entity,\n  relationsType,\n  isGroup,\n  entityFilterKind,\n}\n\n\n\n\n) => {\n  const catalogLink = useRouteRef(catalogIndexRouteRef);\n  const { componentsWithCounters, loading, error } = useGetEntities(\n    entity,\n    relationsType,\n    isGroup,\n    entityFilterKind,\n  );\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  } else if (error) {\n    return React.createElement(ResponseErrorPanel, { error: error,} );\n  }\n\n  return (\n    React.createElement(Grid, { container: true,}\n      , componentsWithCounters?.map(c => (\n        React.createElement(Grid, { item: true, xs: 6, md: 6, lg: 4, key: c.name,}\n          , React.createElement(EntityCountTile, {\n            counter: c.counter,\n            type: c.type,\n            name: c.name,\n            url: `${catalogLink()}/?${c.queryParams}`,}\n          )\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard, } from '@backstage/core-components';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  makeStyles,\n  Switch,\n  Tooltip,\n} from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { ComponentsGrid } from './ComponentsGrid';\n\nconst useStyles = makeStyles(theme => ({\n  list: {\n    [theme.breakpoints.down('xs')]: {\n      padding: `0 0 12px`,\n    },\n  },\n  listItemText: {\n    [theme.breakpoints.down('xs')]: {\n      paddingRight: 0,\n      paddingLeft: 0,\n    },\n  },\n  listItemSecondaryAction: {\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      top: 'auto',\n      right: 'auto',\n      position: 'relative',\n      transform: 'unset',\n    },\n  },\n}));\n\n/** @public */\nexport const OwnershipCard = (props\n\n\n\n\n) => {\n  const { variant, entityFilterKind, hideRelationsToggle, relationsType } =\n    props;\n  const relationsToggle =\n    hideRelationsToggle === undefined ? false : hideRelationsToggle;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const isGroup = entity.kind === 'Group';\n  const [getRelationsType, setRelationsType] = useState(\n    relationsType || 'direct',\n  );\n\n  return (\n    React.createElement(InfoCard, { title: \"Ownership\", variant: variant,}\n      , !relationsToggle && (\n        React.createElement(List, { dense: true,}\n          , React.createElement(ListItem, { className: classes.list,}\n            , React.createElement(ListItemText, { className: classes.listItemText,} )\n            , React.createElement(ListItemSecondaryAction, {\n              className: classes.listItemSecondaryAction,}\n            , \"Direct Relations\"\n\n              , React.createElement(Tooltip, {\n                placement: \"top\",\n                arrow: true,\n                title: `${\n                  getRelationsType === 'direct' ? 'Direct' : 'Aggregated'\n                } Relations`,}\n              \n                , React.createElement(Switch, {\n                  color: \"primary\",\n                  checked: getRelationsType !== 'direct',\n                  onChange: () =>\n                    getRelationsType === 'direct'\n                      ? setRelationsType('aggregated')\n                      : setRelationsType('direct')\n                  ,\n                  name: \"pin\",\n                  inputProps: { 'aria-label': 'Ownership Type Switch' },\n                  disabled: !isGroup,}\n                )\n              ), \"Aggregated Relations\"\n\n            )\n          )\n        )\n      )\n      , React.createElement(ComponentsGrid, {\n        entity: entity,\n        relationsType: getRelationsType,\n        isGroup: isGroup,\n        entityFilterKind: entityFilterKind,}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport {\n  SidebarItem,\n  SidebarSubmenu,\n  SidebarSubmenuItem,\n} from '@backstage/core-components';\nimport {\n\n  identityApiRef,\n  useApi,\n  useRouteRef,\n} from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  catalogApiRef,\n\n  entityRouteRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\n/**\n * MyGroupsSidebarItem can be added to your sidebar providing quick access to groups the logged in user is a member of\n *\n * @public\n */\nexport const MyGroupsSidebarItem = (props\n\n\n\n\n) => {\n  const { singularTitle, pluralTitle, icon, filter } = props;\n\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n\n    const response = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: 'group',\n          'relations.hasMember': profile.userEntityRef,\n          ...(filter ?? {}),\n        },\n      ],\n      fields: ['metadata', 'kind'],\n    });\n\n    return response.items;\n  }, []);\n\n  // Not a member of any groups\n  if (!groups?.length) {\n    return null;\n  }\n\n  // Only member of one group\n  if (groups.length === 1) {\n    const group = groups[0];\n    return (\n      React.createElement(SidebarItem, {\n        text: singularTitle,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon: icon,}\n      )\n    );\n  }\n\n  // Member of more than one group\n  return (\n    React.createElement(SidebarItem, { icon: icon, text: pluralTitle,}\n      , React.createElement(SidebarSubmenu, { title: pluralTitle,}\n        , groups?.map(function groupsMap(group) {\n          return (\n            React.createElement(SidebarSubmenuItem, {\n              title: \n                group.metadata.title ||\n                humanizeEntityRef(group, { defaultKind: 'group' })\n              ,\n              to: catalogEntityRoute(getCompoundEntityRef(group)),\n              icon: icon,\n              key: stringifyEntityRef(group),}\n            )\n          );\n        })\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createExternalRouteRef } from '@backstage/core-plugin-api';\n\nexport const catalogIndexRouteRef = createExternalRouteRef({\n  id: 'catalog-index',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  createApiRef,\n\n\n\n} from '@backstage/core-plugin-api';\n\nexport class UnauthorizedError extends Error {}\n\nexport const pagerDutyApiRef = createApiRef({\n  id: 'plugin.pagerduty.api',\n});\n\nexport class PagerDutyClient  {\n  static fromConfig(\n    configApi,\n    discoveryApi,\n    identityApi,\n  ) {\n    const eventsBaseUrl =\n      configApi.getOptionalString('pagerDuty.eventsBaseUrl') ??\n      'https://events.pagerduty.com/v2';\n    return new PagerDutyClient({\n      eventsBaseUrl,\n      discoveryApi,\n      identityApi,\n    });\n  }\n  constructor(  config) {;this.config = config;}\n\n  async getServiceByIntegrationKey(integrationKey) {\n    const params = `time_zone=UTC&include[]=integrations&include[]=escalation_policies&query=${integrationKey}`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/services?${params}`;\n    const { services } = await this.getByUrl(url);\n\n    return services;\n  }\n\n  async getIncidentsByServiceId(serviceId) {\n    const params = `time_zone=UTC&sort_by=created_at&statuses[]=triggered&statuses[]=acknowledged&service_ids[]=${serviceId}`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/incidents?${params}`;\n    const { incidents } = await this.getByUrl(url);\n\n    return incidents;\n  }\n\n  async getChangeEventsByServiceId(serviceId) {\n    const params = `limit=5&time_zone=UTC&sort_by=timestamp`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/services/${serviceId}/change_events?${params}`;\n\n    const { change_events } = await this.getByUrl(url);\n\n    return change_events;\n  }\n\n  async getOnCallByPolicyId(policyId) {\n    const params = `time_zone=UTC&include[]=users&escalation_policy_ids[]=${policyId}`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/oncalls?${params}`;\n    const { oncalls } = await this.getByUrl(url);\n\n    return oncalls;\n  }\n\n  triggerAlarm(request) {\n    const { integrationKey, source, description, userName } = request;\n\n    const body = JSON.stringify({\n      event_action: 'trigger',\n      routing_key: integrationKey,\n      client: 'Backstage',\n      client_url: source,\n      payload: {\n        summary: description,\n        source: source,\n        severity: 'error',\n        class: 'manual trigger',\n        custom_details: {\n          user: userName,\n        },\n      },\n    });\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n        Accept: 'application/json, text/plain, */*',\n      },\n      body,\n    };\n\n    const url = this.config.eventsBaseUrl ?? 'https://events.pagerduty.com/v2';\n\n    return this.request(`${url}/enqueue`, options);\n  }\n\n   async getByUrl(url) {\n    const { token: idToken } = await this.config.identityApi.getCredentials();\n    const options = {\n      method: 'GET',\n      headers: {\n        Accept: 'application/vnd.pagerduty+json;version=2',\n        'Content-Type': 'application/json',\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    };\n    const response = await this.request(url, options);\n    return response.json();\n  }\n\n   async request(\n    url,\n    options,\n  ) {\n    const response = await fetch(url, options);\n    if (response.status === 401) {\n      throw new UnauthorizedError();\n    }\n    if (!response.ok) {\n      const payload = await response.json();\n      const errors = payload.errors.map((error) => error).join(' ');\n      const message = `Request failed with ${response.status}, ${errors}`;\n      throw new Error(message);\n    }\n    return response;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Link,\n  Typography,\n  Chip,\n} from '@material-ui/core';\nimport Done from '@material-ui/icons/Done';\nimport Warning from '@material-ui/icons/Warning';\nimport { DateTime, Duration } from 'luxon';\n\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\n\n\nconst useStyles = makeStyles(theme => ({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n  warning: {\n    borderColor: theme.palette.status.warning,\n    color: theme.palette.status.warning,\n    '& *': {\n      color: theme.palette.status.warning,\n    },\n  },\n  error: {\n    borderColor: theme.palette.status.error,\n    color: theme.palette.status.error,\n    '& *': {\n      color: theme.palette.status.error,\n    },\n  },\n}));\n\n\n\n\n\nexport const IncidentListItem = ({ incident }) => {\n  const classes = useStyles();\n  const duration =\n    new Date().getTime() - new Date(incident.created_at).getTime();\n  const createdAt = DateTime.local()\n    .minus(Duration.fromMillis(duration))\n    .toRelative({ locale: 'en' });\n  const user = incident.assignments[0]?.assignee;\n\n  return (\n    React.createElement(ListItem, { dense: true, key: incident.id,}\n      , React.createElement(ListItemText, {\n        primary: \n          React.createElement(React.Fragment, null\n            , React.createElement(Chip, {\n              'data-testid': `chip-${incident.status}`,\n              label: incident.status,\n              size: \"small\",\n              variant: \"outlined\",\n              icon: incident.status === 'acknowledged' ? React.createElement(Done, null ) : React.createElement(Warning, null ),\n              className: \n                incident.status === 'triggered'\n                  ? classes.error\n                  : classes.warning\n              ,}\n            )\n            , incident.title\n          )\n        ,\n        primaryTypographyProps: {\n          variant: 'body1',\n          className: classes.listItemPrimary,\n        },\n        secondary: \n          React.createElement(Typography, { noWrap: true, variant: \"body2\", color: \"textSecondary\",}, \"Created \"\n             , createdAt, \" and assigned to\"   , ' '\n            , React.createElement(Link, {\n              href: user?.html_url ?? '#',\n              target: \"_blank\",\n              rel: \"noopener noreferrer\" ,}\n            \n              , user?.summary ?? 'nobody'\n            )\n          )\n        ,}\n      )\n      , React.createElement(ListItemSecondaryAction, null\n        , React.createElement(Tooltip, { title: \"View in PagerDuty\"  , placement: \"top\",}\n          , React.createElement(IconButton, {\n            href: incident.html_url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\" ,\n            color: \"primary\",}\n          \n            , React.createElement(OpenInBrowserIcon, null )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport EmptyStateImage from '../../assets/emptystate.svg';\n\nexport const IncidentsEmptyState = () => {\n  return (\n    React.createElement(Grid, {\n      container: true,\n      justifyContent: \"center\",\n      direction: \"column\",\n      alignItems: \"center\",}\n    \n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement(Typography, { variant: \"h5\",}, \"Nice! No incidents found!\"   )\n      )\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement('img', {\n          src: EmptyStateImage,\n          alt: \"EmptyState\",\n          'data-testid': \"emptyStateImg\",}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { List, ListSubheader } from '@material-ui/core';\nimport { IncidentListItem } from './IncidentListItem';\nimport { IncidentsEmptyState } from './IncidentEmptyState';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { pagerDutyApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\n\n\n\n\n\n\nexport const Incidents = ({ serviceId, refreshIncidents }) => {\n  const api = useApi(pagerDutyApiRef);\n\n  const [{ value: incidents, loading, error }, getIncidents] = useAsyncFn(\n    async () => await api.getIncidentsByServiceId(serviceId),\n  );\n\n  useEffect(() => {\n    getIncidents();\n  }, [refreshIncidents, getIncidents]);\n\n  if (error) {\n    return (\n      React.createElement(Alert, { severity: \"error\",}, \"Error encountered while fetching information. \"\n             , error.message\n      )\n    );\n  }\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  if (!incidents?.length) {\n    return React.createElement(IncidentsEmptyState, null );\n  }\n\n  return (\n    React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"INCIDENTS\"),}\n      , incidents.map((incident, index) => (\n        React.createElement(IncidentListItem, { key: incident.id + index, incident: incident,} )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { StatusWarning } from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport const EscalationUsersEmptyState = () => {\n  const classes = useStyles();\n  return (\n    React.createElement(ListItem, null\n      , React.createElement(ListItemIcon, null\n        , React.createElement('div', { className: classes.denseListIcon,}\n          , React.createElement(StatusWarning, null )\n        )\n      )\n      , React.createElement(ListItemText, { primary: \"Empty escalation policy\"  ,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmailIcon from '@material-ui/icons/Email';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\n\n\nconst useStyles = makeStyles({\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n});\n\n\n\n\n\nexport const EscalationUser = ({ user }) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(ListItem, null\n      , React.createElement(ListItemIcon, null\n        , React.createElement(Avatar, { alt: \"User\",} )\n      )\n      , React.createElement(ListItemText, {\n        primary: \n          React.createElement(Typography, { className: classes.listItemPrimary,}\n            , user.name\n          )\n        ,\n        secondary: user.email,}\n      )\n      , React.createElement(ListItemSecondaryAction, null\n        , React.createElement(Tooltip, { title: \"Send e-mail to user\"   , placement: \"top\",}\n          , React.createElement(IconButton, { href: `mailto:${user.email}`,}\n            , React.createElement(EmailIcon, { color: \"primary\",} )\n          )\n        )\n        , React.createElement(Tooltip, { title: \"View in PagerDuty\"  , placement: \"top\",}\n          , React.createElement(IconButton, {\n            href: user.html_url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\" ,\n            color: \"primary\",}\n          \n            , React.createElement(OpenInBrowserIcon, null )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { List, ListSubheader } from '@material-ui/core';\nimport { EscalationUsersEmptyState } from './EscalationUsersEmptyState';\nimport { EscalationUser } from './EscalationUser';\nimport useAsync from 'react-use/lib/useAsync';\nimport { pagerDutyApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\n\n\n\n\n\nexport const EscalationPolicy = ({ policyId }) => {\n  const api = useApi(pagerDutyApiRef);\n\n  const {\n    value: users,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const oncalls = await api.getOnCallByPolicyId(policyId);\n    const usersItem = oncalls\n      .sort((a, b) => a.escalation_level - b.escalation_level)\n      .map(oncall => oncall.user);\n\n    return usersItem;\n  });\n\n  if (error) {\n    return (\n      React.createElement(Alert, { severity: \"error\",}, \"Error encountered while fetching information. \"\n             , error.message\n      )\n    );\n  }\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  if (!users?.length) {\n    return React.createElement(EscalationUsersEmptyState, null );\n  }\n\n  return (\n    React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"ON CALL\" ),}\n      , users.map((user, index) => (\n        React.createElement(EscalationUser, { key: index, user: user,} )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Button } from '@material-ui/core';\nimport { EmptyState } from '@backstage/core-components';\n\nexport const MissingTokenError = () => (\n  React.createElement(EmptyState, {\n    missing: \"info\",\n    title: \"Missing or invalid PagerDuty Token\"    ,\n    description: \"The request to fetch data needs a valid token. See README for more details.\"             ,\n    action: \n      React.createElement(Button, {\n        color: \"primary\",\n        variant: \"contained\",\n        href: \"https://github.com/backstage/backstage/blob/master/plugins/pagerduty/README.md\",}\n      , \"Read More\"\n\n      )\n    ,}\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Link } from '@backstage/core-components';\nimport {\n  ListItem,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport { DateTime, Duration } from 'luxon';\n\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\n\n\nconst useStyles = makeStyles({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n});\n\n\n\n\n\nexport const ChangeEventListItem = ({ changeEvent }) => {\n  const classes = useStyles();\n  const duration =\n    new Date().getTime() - new Date(changeEvent.timestamp).getTime();\n  const changedAt = DateTime.local()\n    .minus(Duration.fromMillis(duration))\n    .toRelative({ locale: 'en' });\n  let externalLinkElem = null;\n  if (changeEvent.links.length > 0) {\n    const text = changeEvent.links[0].text;\n    externalLinkElem = (\n      React.createElement(Tooltip, { title: text, placement: \"top\",}\n        , React.createElement(IconButton, {\n          component: Link,\n          to: changeEvent.links[0].href,\n          color: \"primary\",}\n        \n          , React.createElement(OpenInBrowserIcon, null )\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(ListItem, { dense: true, key: changeEvent.id,}\n      , React.createElement(ListItemText, {\n        primary: React.createElement(React.Fragment, null, changeEvent.summary),\n        primaryTypographyProps: {\n          variant: 'body1',\n          className: classes.listItemPrimary,\n        },\n        secondary: \n          React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\",}, \"Triggered from \"\n              , changeEvent.source, \" \" , changedAt, \".\"\n          )\n        ,}\n      )\n      , React.createElement(ListItemSecondaryAction, null\n        , externalLinkElem\n        , changeEvent.html_url === undefined ? null : (\n          React.createElement(Tooltip, { title: \"View in PagerDuty\"  , placement: \"top\",}\n            , React.createElement(IconButton, {\n              component: Link,\n              to: changeEvent.html_url,\n              color: \"primary\",}\n            \n              , React.createElement(OpenInBrowserIcon, null )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport EmptyStateImage from '../../assets/emptystate.svg';\n\nexport const ChangeEventEmptyState = () => {\n  return (\n    React.createElement(Grid, { container: true, justify: \"center\", direction: \"column\", alignItems: \"center\",}\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement(Typography, { variant: \"h5\",}, \"No change events to display yet.\"     )\n      )\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement('img', {\n          src: EmptyStateImage,\n          alt: \"EmptyState\",\n          'data-testid': \"emptyStateImg\",}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { List, ListSubheader } from '@material-ui/core';\nimport { ChangeEventListItem } from './ChangeEventListItem';\nimport { ChangeEventEmptyState } from './ChangeEventEmptyState';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { pagerDutyApiRef } from '../../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\nimport { Alert } from '@material-ui/lab';\n\n\n\n\n\n\nexport const ChangeEvents = ({ serviceId, refreshEvents }) => {\n  const api = useApi(pagerDutyApiRef);\n\n  const [{ value: changeEvents, loading, error }, getChangeEvents] = useAsyncFn(\n    async () => await api.getChangeEventsByServiceId(serviceId),\n  );\n\n  useEffect(() => {\n    getChangeEvents();\n  }, [refreshEvents, getChangeEvents]);\n\n  if (error) {\n    return (\n      React.createElement(Alert, { severity: \"error\",}, \"Error encountered while fetching information. \"\n             , error.message\n      )\n    );\n  }\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  if (!changeEvents?.length) {\n    return React.createElement(ChangeEventEmptyState, null );\n  }\n\n  return (\n    React.createElement(List, { dense: true, subheader: React.createElement(ListSubheader, null, \"CHANGE EVENTS\" ),}\n      , changeEvents.map((changeEvent, index) => (\n        React.createElement(ChangeEventListItem, {\n          key: changeEvent.id + index,\n          changeEvent: changeEvent,}\n        )\n      ))\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState, useCallback } from 'react';\n\nimport { Card, CardHeader, Divider, CardContent } from '@material-ui/core';\nimport { Incidents } from '../Incident';\nimport { EscalationPolicy } from '../Escalation';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Alert } from '@material-ui/lab';\nimport { pagerDutyApiRef, UnauthorizedError } from '../../api';\nimport AlarmAddIcon from '@material-ui/icons/AlarmAdd';\nimport { MissingTokenError } from '../Errors/MissingTokenError';\nimport WebIcon from '@material-ui/icons/Web';\nimport DateRangeIcon from '@material-ui/icons/DateRange';\nimport { usePagerdutyEntity } from '../../hooks';\nimport { PAGERDUTY_INTEGRATION_KEY } from '../constants';\nimport { TriggerDialog } from '../TriggerDialog';\nimport { ChangeEvents } from '../ChangeEvents';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  Progress,\n  HeaderIconLinkRow,\n\n  TabbedCard,\n  CardTab,\n} from '@backstage/core-components';\n\nexport const isPluginApplicableToEntity = (entity) =>\n  Boolean(entity.metadata.annotations?.[PAGERDUTY_INTEGRATION_KEY]);\n\nexport const PagerDutyCard = () => {\n  const { integrationKey } = usePagerdutyEntity();\n  const api = useApi(pagerDutyApiRef);\n  const [refreshIncidents, setRefreshIncidents] = useState(false);\n  const [refreshChangeEvents, setRefreshChangeEvents] =\n    useState(false);\n  const [dialogShown, setDialogShown] = useState(false);\n\n  const showDialog = useCallback(() => {\n    setDialogShown(true);\n  }, [setDialogShown]);\n  const hideDialog = useCallback(() => {\n    setDialogShown(false);\n  }, [setDialogShown]);\n\n  const handleRefresh = useCallback(() => {\n    setRefreshIncidents(x => !x);\n    setRefreshChangeEvents(x => !x);\n  }, []);\n\n  const {\n    value: service,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const services = await api.getServiceByIntegrationKey(\n      integrationKey ,\n    );\n\n    return {\n      id: services[0].id,\n      name: services[0].name,\n      url: services[0].html_url,\n      policyId: services[0].escalation_policy.id,\n      policyLink: services[0].escalation_policy.html_url,\n    };\n  });\n\n  if (error instanceof UnauthorizedError) {\n    return React.createElement(MissingTokenError, null );\n  }\n\n  if (error) {\n    return (\n      React.createElement(Alert, { severity: \"error\",}, \"Error encountered while fetching information. \"\n             , error.message\n      )\n    );\n  }\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  const serviceLink = {\n    label: 'Service Directory',\n    href: service.url,\n    icon: React.createElement(WebIcon, null ),\n  };\n\n  const triggerLink = {\n    label: 'Create Incident',\n    onClick: showDialog,\n    icon: React.createElement(AlarmAddIcon, null ),\n    color: 'secondary',\n  };\n\n  const escalationPolicyLink = {\n    label: 'Escalation Policy',\n    href: service.policyLink,\n    icon: React.createElement(DateRangeIcon, null ),\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Card, { 'data-testid': \"pagerduty-card\",}\n        , React.createElement(CardHeader, {\n          title: \"PagerDuty\",\n          subheader: \n            React.createElement(HeaderIconLinkRow, {\n              links: [serviceLink, triggerLink, escalationPolicyLink],}\n            )\n          ,}\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(CardContent, null\n          , React.createElement(TabbedCard, null\n            , React.createElement(CardTab, { label: \"Incidents\",}\n              , React.createElement(Incidents, {\n                serviceId: service.id,\n                refreshIncidents: refreshIncidents,}\n              )\n            )\n            , React.createElement(CardTab, { label: \"Change Events\" ,}\n              , React.createElement(ChangeEvents, {\n                serviceId: service.id,\n                refreshEvents: refreshChangeEvents,}\n              )\n            )\n          )\n          , React.createElement(EscalationPolicy, { policyId: service.policyId,} )\n        )\n      )\n      , React.createElement(TriggerDialog, {\n        'data-testid': \"trigger-dialog\",\n        showDialog: dialogShown,\n        handleDialog: hideDialog,\n        onIncidentCreated: handleRefresh,}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  TextField,\n  DialogActions,\n  Button,\n  DialogContent,\n  Typography,\n  CircularProgress,\n} from '@material-ui/core';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { pagerDutyApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport { usePagerdutyEntity } from '../../hooks';\nimport {\n  useApi,\n  alertApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { DEFAULT_NAMESPACE, parseEntityRef } from '@backstage/catalog-model';\n\n\n\n\n\n\n\nexport const TriggerDialog = ({\n  showDialog,\n  handleDialog,\n  onIncidentCreated: onIncidentCreated,\n}) => {\n  const { name, integrationKey } = usePagerdutyEntity();\n  const alertApi = useApi(alertApiRef);\n  const identityApi = useApi(identityApiRef);\n  const api = useApi(pagerDutyApiRef);\n  const [description, setDescription] = useState('');\n\n  const [{ value, loading, error }, handleTriggerAlarm] = useAsyncFn(\n    async (descriptions) => {\n      const { userEntityRef } = await identityApi.getBackstageIdentity();\n      const { name: userName } = parseEntityRef(userEntityRef, {\n        defaultKind: 'User',\n        defaultNamespace: DEFAULT_NAMESPACE,\n      });\n      return await api.triggerAlarm({\n        integrationKey: integrationKey ,\n        source: window.location.toString(),\n        description: descriptions,\n        userName,\n      });\n    },\n  );\n\n  const descriptionChanged = (\n    event,\n  ) => {\n    setDescription(event.target.value);\n  };\n\n  useEffect(() => {\n    if (value) {\n      (async () => {\n        alertApi.post({\n          message: `Alarm successfully triggered`,\n        });\n\n        handleDialog();\n\n        // The pager duty API isn't always returning the newly created alarm immediately\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        onIncidentCreated?.();\n      })();\n    }\n  }, [value, alertApi, handleDialog, onIncidentCreated]);\n\n  if (error) {\n    alertApi.post({\n      message: `Failed to trigger alarm. ${error.message}`,\n      severity: 'error',\n    });\n  }\n\n  return (\n    React.createElement(Dialog, { maxWidth: \"md\", open: showDialog, onClose: handleDialog, fullWidth: true,}\n      , React.createElement(DialogTitle, null, \"This action will trigger an incident for \"\n               , React.createElement('strong', null, \"\\\"\", name, \"\\\"\"), \".\"\n      )\n      , React.createElement(DialogContent, null\n        , React.createElement(Alert, { severity: \"info\",}\n          , React.createElement(Typography, { variant: \"body1\", align: \"justify\",}, \"If the issue you are seeing does not need urgent attention, please get in touch with the responsible team using their preferred communications channel. You can find information about the owner of this entity in the \\\"About\\\" card. If the issue is urgent, please don't hesitate to trigger the alert.\"\n\n\n\n\n\n          )\n        )\n        , React.createElement(Typography, {\n          variant: \"body1\",\n          style: { marginTop: '1em' },\n          gutterBottom: true,\n          align: \"justify\",}\n        , \"Please describe the problem you want to report. Be as descriptive as possible. Your signed in user and a reference to the current page will automatically be amended to the alarm so that the receiver can reach out to you if necessary.\"\n\n\n\n\n        )\n        , React.createElement(TextField, {\n          inputProps: { 'data-testid': 'trigger-input' },\n          id: \"description\",\n          multiline: true,\n          fullWidth: true,\n          rows: \"4\",\n          margin: \"normal\",\n          label: \"Problem description\" ,\n          variant: \"outlined\",\n          onChange: descriptionChanged,}\n        )\n      )\n      , React.createElement(DialogActions, null\n        , React.createElement(Button, {\n          'data-testid': \"trigger-button\",\n          id: \"trigger\",\n          color: \"secondary\",\n          disabled: !description || loading,\n          variant: \"contained\",\n          onClick: () => handleTriggerAlarm(description),\n          endIcon: loading && React.createElement(CircularProgress, { size: 16,} ),}\n        , \"Trigger Incident\"\n\n        )\n        , React.createElement(Button, { id: \"close\", color: \"primary\", onClick: handleDialog,}, \"Close\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const PAGERDUTY_INTEGRATION_KEY = 'pagerduty.com/integration-key';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\n\nimport { PAGERDUTY_INTEGRATION_KEY } from '../components/constants';\n\nexport function usePagerdutyEntity() {\n  const { entity } = useEntity();\n  const integrationKey =\n    entity.metadata.annotations?.[PAGERDUTY_INTEGRATION_KEY];\n  const name = entity.metadata.name;\n\n  return { integrationKey, name };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A request with a UUID identifier, so that batched responses can be matched up with the original\n * requests.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * The result of an authorization request.\n * @public\n */\nexport var AuthorizeResult; (function (AuthorizeResult) {\n  /**\n   * The authorization request is denied.\n   */\n  const DENY = 'DENY'; AuthorizeResult[\"DENY\"] = DENY;\n  /**\n   * The authorization request is allowed.\n   */\n  const ALLOW = 'ALLOW'; AuthorizeResult[\"ALLOW\"] = ALLOW;\n  /**\n   * The authorization request is allowed if the provided conditions are met.\n   */\n  const CONDITIONAL = 'CONDITIONAL'; AuthorizeResult[\"CONDITIONAL\"] = CONDITIONAL;\n})(AuthorizeResult || (AuthorizeResult = {}));\n\n/**\n * A definitive decision returned by the {@link @backstage/plugin-permission-node#PermissionPolicy}.\n *\n * @remarks\n *\n * This indicates that the policy unconditionally allows (or denies) the request.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Check if the two parameters are equivalent permissions.\n * @public\n */\nexport function isPermission(\n  permission,\n  comparedPermission,\n) {\n  return permission.name === comparedPermission.name;\n}\n\n/**\n * Check if a given permission is a {@link ResourcePermission}. When\n * `resourceType` is supplied as the second parameter, also checks if\n * the permission has the specified resource type.\n * @public\n */\nexport function isResourcePermission(\n  permission,\n  resourceType,\n) {\n  if (!('resourceType' in permission)) {\n    return false;\n  }\n\n  return !resourceType || permission.resourceType === resourceType;\n}\n\n/**\n * Check if a given permission is related to a create action.\n * @public\n */\nexport function isCreatePermission(permission) {\n  return permission.attributes.action === 'create';\n}\n\n/**\n * Check if a given permission is related to a read action.\n * @public\n */\nexport function isReadPermission(permission) {\n  return permission.attributes.action === 'read';\n}\n\n/**\n * Check if a given permission is related to an update action.\n * @public\n */\nexport function isUpdatePermission(permission) {\n  return permission.attributes.action === 'update';\n}\n\n/**\n * Check if a given permission is related to a delete action.\n * @public\n */\nexport function isDeletePermission(permission) {\n  return permission.attributes.action === 'delete';\n}\n\n/**\n * Convert {@link PermissionAuthorizer} to {@link PermissionEvaluator}.\n *\n * @public\n */\nexport function toPermissionEvaluator(\n  permissionAuthorizer,\n) {\n  return {\n    authorize: async (\n      requests,\n      options,\n    ) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n\n      return response ;\n    },\n    authorizeConditional(\n      requests,\n      options,\n    ) {\n      const parsedRequests =\n        requests ;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    },\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Utility function for creating a valid {@link ResourcePermission}, inferring\n * the appropriate type and resource type parameter.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function createPermission({\n  name,\n  attributes,\n  resourceType,\n}\n\n\n\n) {\n  if (resourceType) {\n    return {\n      type: 'resource',\n      name,\n      attributes,\n      resourceType,\n    };\n  }\n\n  return {\n    type: 'basic',\n    name,\n    attributes,\n  };\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\nimport {\n  AuthorizeResult,\n\n\n\n\n\n\n\n\n\n} from './types/api';\n\n\n\nconst permissionCriteriaSchema\n\n = z.lazy(() =>\n  z\n    .object({\n      rule: z.string(),\n      resourceType: z.string(),\n      params: z.array(z.unknown()),\n    })\n    .or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() }))\n    .or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() }))\n    .or(z.object({ not: permissionCriteriaSchema })),\n);\n\nconst authorizePermissionResponseSchema =\n  z.object({\n    result: z\n      .literal(AuthorizeResult.ALLOW)\n      .or(z.literal(AuthorizeResult.DENY)),\n  });\n\nconst queryPermissionResponseSchema =\n  z.union([\n    z.object({\n      result: z\n        .literal(AuthorizeResult.ALLOW)\n        .or(z.literal(AuthorizeResult.DENY)),\n    }),\n    z.object({\n      result: z.literal(AuthorizeResult.CONDITIONAL),\n      pluginId: z.string(),\n      resourceType: z.string(),\n      conditions: permissionCriteriaSchema,\n    }),\n  ]);\n\nconst responseSchema = (\n  itemSchema,\n  ids,\n) =>\n  z.object({\n    items: z\n      .array(\n        z.intersection(\n          z.object({\n            id: z.string(),\n          }),\n          itemSchema,\n        ),\n      )\n      .refine(\n        items =>\n          items.length === ids.size && items.every(({ id }) => ids.has(id)),\n        {\n          message: 'Items in response do not match request',\n        },\n      ),\n  });\n\n/**\n * An isomorphic client for requesting authorization for Backstage permissions.\n * @public\n */\nexport class PermissionClient  {\n    enabled;\n    discovery;\n\n  constructor(options) {\n    this.discovery = options.discovery;\n    this.enabled =\n      options.config.getOptionalBoolean('permission.enabled') ?? false;\n  }\n\n  /**\n   * {@inheritdoc PermissionEvaluator.authorize}\n   */\n  async authorize(\n    requests,\n    options,\n  ) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options,\n    );\n  }\n\n  /**\n   * {@inheritdoc PermissionEvaluator.authorizeConditional}\n   */\n  async authorizeConditional(\n    queries,\n    options,\n  ) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n\n   async makeRequest(\n    queries,\n    itemSchema,\n    options,\n  ) {\n    if (!this.enabled) {\n      return queries.map(_ => ({ result: AuthorizeResult.ALLOW  }));\n    }\n\n    const request = {\n      items: queries.map(query => ({\n        id: uuid.v4(),\n        ...query,\n      })),\n    };\n\n    const permissionApi = await this.discovery.getBaseUrl('permission');\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: 'POST',\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options?.token),\n        'content-type': 'application/json',\n      },\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    const responseBody = await response.json();\n\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id)),\n    ).parse(responseBody);\n\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {} );\n\n    return request.items.map(query => responsesById[query.id]);\n  }\n\n   getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * This API is used by various frontend utilities that allow developers to implement authorization within their frontend\n * plugins. A plugin developer will likely not have to interact with this API or its implementations directly, but\n * rather with the aforementioned utility components/hooks.\n * @public\n */\n\n\n\n\n\n\n/**\n * A Backstage ApiRef for the Permission API. See https://backstage.io/docs/api/utility-apis for more information on\n * Backstage ApiRefs.\n * @public\n */\nexport const permissionApiRef = createApiRef({\n  id: 'plugin.permission.api',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n\n\n  PermissionClient,\n} from '@backstage/plugin-permission-common';\n\n\n/**\n * The default implementation of the PermissionApi, which simply calls the authorize method of the given\n * {@link @backstage/plugin-permission-common#PermissionClient}.\n * @public\n */\nexport class IdentityPermissionApi  {\n   constructor(\n      permissionClient,\n      identityApi,\n  ) {;this.permissionClient = permissionClient;this.identityApi = identityApi;}\n\n  static create(options\n\n\n\n) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n\n  async authorize(\n    request,\n  ) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials(),\n    );\n    return response[0];\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { permissionApiRef } from '../apis';\nimport {\n  AuthorizeResult,\n  isResourcePermission,\n\n\n} from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\n/** @public */\n\n\n\n\n\n\n/**\n * React hook utility for authorization. Given either a non-resource\n * {@link @backstage/plugin-permission-common#Permission} or a\n * {@link @backstage/plugin-permission-common#ResourcePermission} and an\n * optional resourceRef, it will return whether or not access is allowed (for\n * the given resource, if resourceRef is provided). See\n * {@link @backstage/plugin-permission-common/PermissionClient#authorize} for\n * more details.\n *\n * The resourceRef field is optional to allow calling this hook with an\n * entity that might be loading asynchronously, but when resourceRef is not\n * supplied, the value of `allowed` will always be false.\n *\n * Note: This hook uses stale-while-revalidate to help avoid flicker in UI\n * elements that would be conditionally rendered based on the `allowed` result\n * of this hook.\n * @public\n */\nexport function usePermission(\n  input\n\n\n\n\n\n\n\n,\n) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    // We could make the resourceRef parameter required to avoid this check, but\n    // it would make using this hook difficult in situations where the entity\n    // must be asynchronously loaded, so instead we short-circuit to a deny when\n    // no resourceRef is supplied, on the assumption that the resourceRef is\n    // still loading outside the hook.\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === undefined) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Route } from 'react-router';\nimport { useApp } from '@backstage/core-plugin-api';\nimport { usePermission } from '../hooks';\nimport {\n  isResourcePermission,\n\n\n} from '@backstage/plugin-permission-common';\n\n/**\n * Returns a React Router Route which only renders the element when authorized. If unauthorized, the Route will render a\n * NotFoundErrorPage (see {@link @backstage/core-app-api#AppComponents}).\n *\n * @public\n */\nexport const PermissionedRoute = (\n  props\n\n\n\n\n\n\n\n\n\n\n,\n) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n\n  const permissionResult = usePermission(\n    isResourcePermission(permission)\n      ? { permission, resourceRef }\n      : { permission },\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n\n  let shownElement =\n    errorComponent === undefined ? React.createElement(NotFoundErrorPage, null ) : errorComponent;\n\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n\n  return React.createElement(Route, { ...otherProps, element: shownElement,} );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const rollbarApiRef = createApiRef({\n  id: 'plugin.rollbar.service',\n});\n\n\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ROLLBAR_ANNOTATION } from '../constants';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\nexport function useProjectSlugFromEntity(entity) {\n  const configApi = useApi(configApiRef);\n\n  const [project, organization] = (\n    entity?.metadata?.annotations?.[ROLLBAR_ANNOTATION] ?? ''\n  )\n    .split('/')\n    .reverse();\n\n  return {\n    project,\n    organization:\n      organization ??\n      configApi.getOptionalString('rollbar.organization') ??\n      configApi.getString('organization.name'),\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync from 'react-use/lib/useAsync';\n\nimport { rollbarApiRef } from '../api';\n\nimport { useProjectSlugFromEntity } from './useProject';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport function useTopActiveItems(entity) {\n  const api = useApi(rollbarApiRef);\n  const { organization, project } = useProjectSlugFromEntity(entity);\n  const { value, loading, error } = useAsync(() => {\n    if (!project) {\n      return Promise.resolve([]);\n    }\n\n    return api\n      .getTopActiveItems(project, 168)\n      .then(data =>\n        data.sort((a, b) => b.item.occurrences - a.item.occurrences),\n      );\n  }, [api, organization, project, entity]);\n\n  return {\n    items: value ,\n    organization,\n    project,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO: Make this shared/dry with backend\n\n\n\n\nexport var RollbarLevel; (function (RollbarLevel) {\n  const debug = 10; RollbarLevel[RollbarLevel[\"debug\"] = debug] = \"debug\";\n  const info = 20; RollbarLevel[RollbarLevel[\"info\"] = info] = \"info\";\n  const warning = 30; RollbarLevel[RollbarLevel[\"warning\"] = warning] = \"warning\";\n  const error = 40; RollbarLevel[RollbarLevel[\"error\"] = error] = \"error\";\n  const critical = 50; RollbarLevel[RollbarLevel[\"critical\"] = critical] = \"critical\";\n})(RollbarLevel || (RollbarLevel = {}));\n\nexport var RollbarFrameworkId; (function (RollbarFrameworkId) {\n  const unknown = 0; RollbarFrameworkId[RollbarFrameworkId['unknown'] = unknown] = 'unknown';\n  const rails = 1; RollbarFrameworkId[RollbarFrameworkId['rails'] = rails] = 'rails';\n  const django = 2; RollbarFrameworkId[RollbarFrameworkId['django'] = django] = 'django';\n  const pyramid = 3; RollbarFrameworkId[RollbarFrameworkId['pyramid'] = pyramid] = 'pyramid';\n  RollbarFrameworkId[RollbarFrameworkId['node-js'] = 4] = 'node-js';\n  const pylons = 5; RollbarFrameworkId[RollbarFrameworkId['pylons'] = pylons] = 'pylons';\n  const php = 6; RollbarFrameworkId[RollbarFrameworkId['php'] = php] = 'php';\n  RollbarFrameworkId[RollbarFrameworkId['browser-js'] = 7] = 'browser-js';\n  RollbarFrameworkId[RollbarFrameworkId['rollbar-system'] = 8] = 'rollbar-system';\n  const android = 9; RollbarFrameworkId[RollbarFrameworkId['android'] = android] = 'android';\n  const ios = 10; RollbarFrameworkId[RollbarFrameworkId['ios'] = ios] = 'ios';\n  const mailgun = 11; RollbarFrameworkId[RollbarFrameworkId['mailgun'] = mailgun] = 'mailgun';\n  const logentries = 12; RollbarFrameworkId[RollbarFrameworkId['logentries'] = logentries] = 'logentries';\n  const python = 13; RollbarFrameworkId[RollbarFrameworkId['python'] = python] = 'python';\n  const ruby = 14; RollbarFrameworkId[RollbarFrameworkId['ruby'] = ruby] = 'ruby';\n  const sidekiq = 15; RollbarFrameworkId[RollbarFrameworkId['sidekiq'] = sidekiq] = 'sidekiq';\n  const flask = 16; RollbarFrameworkId[RollbarFrameworkId['flask'] = flask] = 'flask';\n  const celery = 17; RollbarFrameworkId[RollbarFrameworkId['celery'] = celery] = 'celery';\n  const rq = 18; RollbarFrameworkId[RollbarFrameworkId['rq'] = rq] = 'rq';\n})(RollbarFrameworkId || (RollbarFrameworkId = {}));\n\nexport var RollbarPlatformId; (function (RollbarPlatformId) {\n  const unknown = 0; RollbarPlatformId[RollbarPlatformId['unknown'] = unknown] = 'unknown';\n  const browser = 1; RollbarPlatformId[RollbarPlatformId['browser'] = browser] = 'browser';\n  const flash = 2; RollbarPlatformId[RollbarPlatformId['flash'] = flash] = 'flash';\n  const android = 3; RollbarPlatformId[RollbarPlatformId['android'] = android] = 'android';\n  const ios = 4; RollbarPlatformId[RollbarPlatformId['ios'] = ios] = 'ios';\n  const heroku = 5; RollbarPlatformId[RollbarPlatformId['heroku'] = heroku] = 'heroku';\n  RollbarPlatformId[RollbarPlatformId['google-app-engine'] = 6] = 'google-app-engine';\n  const client = 7; RollbarPlatformId[RollbarPlatformId['client'] = client] = 'client';\n})(RollbarPlatformId || (RollbarPlatformId = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const buildProjectUrl = (org, id) =>\n  `https://rollbar.com/${org}/all/items/?projects=${id}`;\n\nexport const buildItemUrl = (org, project, id) =>\n  `https://rollbar.com/${org}/${project}/items/${id}`;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Sparklines, SparklinesBars } from 'react-sparklines';\n\n\n\n\n\nexport const TrendGraph = ({ counts }) => {\n  return (\n    React.createElement(Sparklines, { data: counts, svgHeight: 48, min: 0, margin: 4,}\n      , React.createElement(SparklinesBars, { barWidth: 2,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Box, Link, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React from 'react';\nimport {\n  RollbarFrameworkId,\n  RollbarLevel,\n\n} from '../../api/types';\nimport { buildItemUrl } from '../../utils';\nimport { TrendGraph } from '../TrendGraph/TrendGraph';\nimport { Table, } from '@backstage/core-components';\n\nconst columns = [\n  {\n    title: 'ID',\n    field: 'item.counter',\n    type: 'string',\n    align: 'left',\n    width: '70px',\n    render: (data) => (\n      React.createElement(Link, {\n        href: buildItemUrl(data.org, data.project, data.item.counter),\n        target: \"_blank\",\n        rel: \"noreferrer\",}\n      \n        , data.item.counter\n      )\n    ),\n  },\n  {\n    title: 'Title',\n    field: 'item.title',\n    type: 'string',\n    align: 'left',\n  },\n  {\n    title: 'Trend',\n    sorting: false,\n    render: (data) => React.createElement(TrendGraph, { counts: data.counts,} ),\n  },\n  {\n    title: 'Occurrences',\n    field: 'item.occurrences',\n    type: 'numeric',\n    align: 'right',\n  },\n  {\n    title: 'Environment',\n    field: 'item.environment',\n    type: 'string',\n  },\n  {\n    title: 'Level',\n    field: 'item.level',\n    type: 'string',\n    render: data => RollbarLevel[(data ).item.level],\n  },\n  {\n    title: 'Framework',\n    field: 'item.framework',\n    type: 'string',\n    render: data =>\n      RollbarFrameworkId[(data ).item.framework],\n  },\n  {\n    title: 'Last Occurrence',\n    field: 'item.lastOccurrenceTimestamp',\n    type: 'datetime',\n    render: data =>\n      new Date(\n        (data ).item.lastOccurrenceTimestamp * 1000,\n      ).toLocaleDateString(),\n  },\n];\n\n\n\n\n\n\n\n\n\nexport const RollbarTopItemsTable = ({\n  items,\n  organization,\n  project,\n  loading,\n  error,\n}) => {\n  if (error) {\n    return (\n      React.createElement('div', null\n        , React.createElement(Alert, { severity: \"error\",}, \"Error encountered while fetching rollbar top items. \"\n                 , error.toString()\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(Table, {\n      isLoading: loading,\n      columns: columns,\n      options: {\n        padding: 'dense',\n        search: true,\n        paging: true,\n        pageSize: 5,\n        showEmptyDataSourceMessage: !loading,\n      },\n      title: \n        React.createElement(Box, { display: \"flex\", alignItems: \"center\",}\n          , React.createElement(Box, { mr: 1,} )\n          , React.createElement(Typography, { variant: \"h6\",}, \"Top Active Items / \"    , project)\n        )\n      ,\n      data: items.map(i => ({ org: organization, project, ...i })),}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React from 'react';\nimport { useTopActiveItems } from '../../hooks/useTopActiveItems';\nimport { RollbarTopItemsTable } from '../RollbarTopItemsTable/RollbarTopItemsTable';\n\n\n\n\n\nexport const RollbarProject = ({ entity }) => {\n  const { items, organization, project, loading, error } =\n    useTopActiveItems(entity);\n\n  return (\n    React.createElement(RollbarTopItemsTable, {\n      organization: organization,\n      project: project,\n      items: items || [],\n      loading: loading,\n      error: error,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { RollbarProject } from '../RollbarProject/RollbarProject';\n\nexport const EntityPageRollbar = () => {\n  const { entity } = useEntity();\n\n  return React.createElement(RollbarProject, { entity: entity,} );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { Route, Routes } from 'react-router';\nimport { ROLLBAR_ANNOTATION } from '../constants';\nimport { EntityPageRollbar } from './EntityPageRollbar/EntityPageRollbar';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isPluginApplicableToEntity = (entity) =>\n  Boolean(entity.metadata.annotations?.[ROLLBAR_ANNOTATION]);\n\n\n\nexport const Router = (_props) => {\n  const { entity } = useEntity();\n\n  if (!isPluginApplicableToEntity(entity)) {\n    React.createElement(MissingAnnotationEmptyState, { annotation: ROLLBAR_ANNOTATION,} );\n  }\n\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(EntityPageRollbar, null ),} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ROLLBAR_ANNOTATION = 'rollbar.com/project-slug';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport {\n  createApiRef,\n\n\n\n} from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\n\n\nimport qs from 'qs';\nimport ObservableImpl from 'zen-observable';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport queryString from 'qs';\n\n/**\n * Utility API reference for the {@link ScaffolderApi}.\n *\n * @public\n */\nexport const scaffolderApiRef = createApiRef({\n  id: 'plugin.scaffolder.service',\n});\n\n/**\n * An API to interact with the scaffolder backend.\n *\n * @public\n */\nexport class ScaffolderClient  {\n    discoveryApi;\n    scmIntegrationsApi;\n    fetchApi;\n    identityApi;\n    useLongPollingLogs;\n\n  constructor(options\n\n\n\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi ?? { fetch };\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.useLongPollingLogs = options.useLongPollingLogs ?? false;\n    this.identityApi = options.identityApi;\n  }\n\n  async listTasks(options\n\n) {\n    if (!this.identityApi) {\n      throw new Error(\n        'IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method',\n      );\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl('scaffolder');\n    const { userEntityRef } = await this.identityApi.getBackstageIdentity();\n\n    const query = queryString.stringify(\n      options.filterByOwnership === 'owned' ? { createdBy: userEntityRef } : {},\n    );\n\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/tasks?${query}`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n\n  async getIntegrationsList(\n    options,\n  ) {\n    const integrations = [\n      ...this.scmIntegrationsApi.azure.list(),\n      ...this.scmIntegrationsApi.bitbucket\n        .list()\n        .filter(\n          item =>\n            !this.scmIntegrationsApi.bitbucketCloud.byHost(item.config.host) &&\n            !this.scmIntegrationsApi.bitbucketServer.byHost(item.config.host),\n        ),\n      ...this.scmIntegrationsApi.bitbucketCloud.list(),\n      ...this.scmIntegrationsApi.bitbucketServer.list(),\n      ...this.scmIntegrationsApi.gerrit.list(),\n      ...this.scmIntegrationsApi.github.list(),\n      ...this.scmIntegrationsApi.gitlab.list(),\n    ]\n      .map(c => ({ type: c.type, title: c.title, host: c.config.host }))\n      .filter(c => options.allowedHosts.includes(c.host));\n\n    return {\n      integrations,\n    };\n  }\n\n  async getTemplateParameterSchema(\n    templateRef,\n  ) {\n    const { namespace, kind, name } = parseEntityRef(templateRef, {\n      defaultKind: 'template',\n    });\n\n    const baseUrl = await this.discoveryApi.getBaseUrl('scaffolder');\n    const templatePath = [namespace, kind, name]\n      .map(s => encodeURIComponent(s))\n      .join('/');\n\n    const url = `${baseUrl}/v2/templates/${templatePath}/parameter-schema`;\n\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    const schema = await response.json();\n    return schema;\n  }\n\n  /**\n   * Executes the scaffolding of a component, given a template and its\n   * parameter values.\n   *\n   * @param options - The {@link ScaffolderScaffoldOptions} the scaffolding.\n   */\n  async scaffold(\n    options,\n  ) {\n    const { templateRef, values, secrets = {} } = options;\n    const url = `${await this.discoveryApi.getBaseUrl('scaffolder')}/v2/tasks`;\n    const response = await this.fetchApi.fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        templateRef,\n        values: { ...values },\n        secrets,\n      }),\n    });\n\n    if (response.status !== 201) {\n      const status = `${response.status} ${response.statusText}`;\n      const body = await response.text();\n      throw new Error(`Backend request failed, ${status} ${body.trim()}`);\n    }\n\n    const { id } = (await response.json()) ;\n    return { taskId: id };\n  }\n\n  async getTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl('scaffolder');\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}`;\n\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n\n  streamLogs(options) {\n    if (this.useLongPollingLogs) {\n      return this.streamLogsPolling(options);\n    }\n\n    return this.streamLogsEventStream(options);\n  }\n\n  async dryRun(\n    options,\n  ) {\n    const baseUrl = await this.discoveryApi.getBaseUrl('scaffolder');\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/dry-run`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        template: options.template,\n        values: options.values,\n        secrets: options.secrets,\n        directoryContents: options.directoryContents,\n      }),\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return response.json();\n  }\n\n   streamLogsEventStream({\n    taskId,\n    after,\n  }\n\n\n) {\n    return new ObservableImpl(subscriber => {\n      const params = new URLSearchParams();\n      if (after !== undefined) {\n        params.set('after', String(Number(after)));\n      }\n\n      this.discoveryApi.getBaseUrl('scaffolder').then(\n        baseUrl => {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId,\n          )}/eventstream`;\n          const eventSource = new EventSource(url, { withCredentials: true });\n          eventSource.addEventListener('log', (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n          });\n          eventSource.addEventListener('completion', (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n            eventSource.close();\n            subscriber.complete();\n          });\n          eventSource.addEventListener('error', event => {\n            subscriber.error(event);\n          });\n        },\n        error => {\n          subscriber.error(error);\n        },\n      );\n    });\n  }\n\n   streamLogsPolling({\n    taskId,\n    after: inputAfter,\n  }\n\n\n) {\n    let after = inputAfter;\n\n    return new ObservableImpl(subscriber => {\n      this.discoveryApi.getBaseUrl('scaffolder').then(async baseUrl => {\n        while (!subscriber.closed) {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId,\n          )}/events?${qs.stringify({ after })}`;\n          const response = await this.fetchApi.fetch(url);\n\n          if (!response.ok) {\n            // wait for one second to not run into an\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            continue;\n          }\n\n          const logs = (await response.json()) ;\n\n          for (const event of logs) {\n            after = Number(event.id);\n\n            subscriber.next(event);\n\n            if (event.type === 'completion') {\n              subscriber.complete();\n              return;\n            }\n          }\n        }\n      });\n    });\n  }\n\n  async listActions() {\n    const baseUrl = await this.discoveryApi.getBaseUrl('scaffolder');\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/actions`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return await response.json();\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useImmerReducer } from 'use-immer';\nimport { useEffect } from 'react';\nimport { scaffolderApiRef } from '../../api';\n\n\n\n\n\n\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction reducer(draft, action) {\n  switch (action.type) {\n    case 'INIT': {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: 'open', id: next.id };\n        return current;\n      }, {} );\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {} );\n      draft.loading = false;\n      draft.error = undefined;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n\n    case 'LOGS': {\n      const entries = action.data;\n      const logLines = [];\n\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        logLines.push(logLine);\n\n        if (!entry.body.stepId || !draft.steps?.[entry.body.stepId]) {\n          continue;\n        }\n\n        const currentStepLog = draft.stepLogs?.[entry.body.stepId];\n        const currentStep = draft.steps?.[entry.body.stepId];\n\n        if (entry.body.status && entry.body.status !== currentStep.status) {\n          currentStep.status = entry.body.status;\n\n          if (currentStep.status === 'processing') {\n            currentStep.startedAt = entry.createdAt;\n          }\n\n          if (\n            ['cancelled', 'failed', 'completed'].includes(currentStep.status)\n          ) {\n            currentStep.endedAt = entry.createdAt;\n          }\n        }\n\n        currentStepLog?.push(logLine);\n      }\n\n      return;\n    }\n\n    case 'COMPLETED': {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      return;\n    }\n\n    case 'ERROR': {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n\n    default:\n      return;\n  }\n}\n\nexport const useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    loading: true,\n    completed: false,\n    stepLogs: {} ,\n    steps: {} ,\n  });\n\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n\n    scaffolderApi.getTask(taskId).then(\n      task => {\n        if (didCancel) {\n          return;\n        }\n        dispatch({ type: 'INIT', data: task });\n\n        // TODO(blam): Use a normal fetch to fetch the current log for the event stream\n        // and use that for an INIT_EVENTs dispatch event, and then\n        // use the last event ID to subscribe using after option to\n        // stream logs. Without this, if you have a lot of logs, it can look like the\n        // task is being rebuilt on load as it progresses through the steps at a slower\n        // rate whilst it builds the status from the event logs\n        const observable = scaffolderApi.streamLogs({ taskId });\n\n        const collectedLogEvents = new Array();\n\n        function emitLogs() {\n          if (collectedLogEvents.length) {\n            const logs = collectedLogEvents.splice(\n              0,\n              collectedLogEvents.length,\n            );\n            dispatch({ type: 'LOGS', data: logs });\n          }\n        }\n\n        logPusher = setInterval(emitLogs, 500);\n\n        subscription = observable.subscribe({\n          next: event => {\n            switch (event.type) {\n              case 'log':\n                return collectedLogEvents.push(event);\n              case 'completion':\n                emitLogs();\n                dispatch({ type: 'COMPLETED', data: event });\n                return undefined;\n              default:\n                throw new Error(\n                  `Unhandled event type ${event.type} in observer`,\n                );\n            }\n          },\n          error: error => {\n            emitLogs();\n            dispatch({ type: 'ERROR', data: error });\n          },\n        });\n      },\n      error => {\n        if (!didCancel) {\n          dispatch({ type: 'ERROR', data: error });\n        }\n      },\n    );\n\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n\n  return state;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport {\n  Content,\n  ErrorPage,\n  Header,\n  Page,\n  LogViewer,\n  Progress,\n} from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\n\nimport {\n  Button,\n  CircularProgress,\n  Paper,\n  StepButton,\n\n} from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Stepper from '@material-ui/core/Stepper';\nimport { createStyles, makeStyles, } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Check from '@material-ui/icons/Check';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport classNames from 'classnames';\nimport { DateTime, Interval } from 'luxon';\nimport qs from 'qs';\nimport React, { memo, useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router';\nimport useInterval from 'react-use/lib/useInterval';\nimport { rootRouteRef, selectedTemplateRouteRef } from '../../routes';\n\nimport { useTaskEventStream } from '../hooks/useEventStream';\nimport { TaskPageLinks } from './TaskPageLinks';\n\n// typings are wrong for this library, so fallback to not parsing types.\nconst humanizeDuration = require('humanize-duration');\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n    },\n    button: {\n      marginBottom: theme.spacing(2),\n      marginLeft: theme.spacing(2),\n    },\n    actionsContainer: {\n      marginBottom: theme.spacing(2),\n    },\n    resetContainer: {\n      padding: theme.spacing(3),\n    },\n    labelWrapper: {\n      display: 'flex',\n      flex: 1,\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n    },\n    stepWrapper: {\n      width: '100%',\n    },\n  }),\n);\n\n\n\n\n\n\n\n\n\nconst StepTimeTicker = ({ step }) => {\n  const [time, setTime] = useState('');\n\n  useInterval(() => {\n    if (!step.startedAt) {\n      setTime('');\n      return;\n    }\n\n    const end = step.endedAt\n      ? DateTime.fromISO(step.endedAt)\n      : DateTime.local();\n\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end)\n      .toDuration()\n      .valueOf();\n\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, 1000);\n\n  return React.createElement(Typography, { variant: \"caption\",}, time);\n};\n\nconst useStepIconStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      color: theme.palette.text.disabled,\n      display: 'flex',\n      height: 22,\n      alignItems: 'center',\n    },\n    completed: {\n      color: theme.palette.status.ok,\n    },\n    error: {\n      color: theme.palette.status.error,\n    },\n  }),\n);\n\nfunction TaskStepIconComponent(props) {\n  const classes = useStepIconStyles();\n  const { active, completed, error } = props;\n\n  const getMiddle = () => {\n    if (active) {\n      return React.createElement(CircularProgress, { size: \"24px\",} );\n    }\n    if (completed) {\n      return React.createElement(Check, null );\n    }\n    if (error) {\n      return React.createElement(Cancel, null );\n    }\n    return React.createElement(FiberManualRecordIcon, null );\n  };\n\n  return (\n    React.createElement('div', {\n      className: classNames(classes.root, {\n        [classes.completed]: completed,\n        [classes.error]: error,\n      }),}\n    \n      , getMiddle()\n    )\n  );\n}\n\nexport const TaskStatusStepper = memo(\n  (props\n\n\n\n\n\n\n) => {\n    const { steps, currentStepId, onUserStepChange } = props;\n    const classes = useStyles(props);\n\n    return (\n      React.createElement('div', { className: classes.root,}\n        , React.createElement(Stepper, {\n          activeStep: steps.findIndex(s => s.id === currentStepId),\n          orientation: \"vertical\",\n          nonLinear: true,}\n        \n          , steps.map((step, index) => {\n            const isCompleted = step.status === 'completed';\n            const isFailed = step.status === 'failed';\n            const isActive = step.status === 'processing';\n            const isSkipped = step.status === 'skipped';\n\n            return (\n              React.createElement(Step, { key: String(index), expanded: true,}\n                , React.createElement(StepButton, { onClick: () => onUserStepChange(step.id),}\n                  , React.createElement(StepLabel, {\n                    StepIconProps: {\n                      completed: isCompleted,\n                      error: isFailed,\n                      active: isActive,\n                    },\n                    StepIconComponent: TaskStepIconComponent,\n                    className: classes.stepWrapper,}\n                  \n                    , React.createElement('div', { className: classes.labelWrapper,}\n                      , React.createElement(Typography, { variant: \"subtitle2\",}, step.name)\n                      , isSkipped ? (\n                        React.createElement(Typography, { variant: \"caption\",}, \"Skipped\")\n                      ) : (\n                        React.createElement(StepTimeTicker, { step: step,} )\n                      )\n                    )\n                  )\n                )\n              )\n            );\n          })\n        )\n      )\n    );\n  },\n);\n\nconst hasLinks = ({ links = [] }) =>\n  links.length > 0;\n\n/**\n * TaskPageProps for constructing a TaskPage\n * @param loadingText - Optional loading text shown before a task begins executing.\n *\n * @public\n */\n\n\n\n\n/**\n * TaskPage for showing the status of the taskId provided as a param\n * @param loadingText - Optional loading text shown before a task begins executing.\n *\n * @public\n */\nexport const TaskPage = ({ loadingText }) => {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const rootPath = useRouteRef(rootRouteRef);\n  const templateRoute = useRouteRef(selectedTemplateRouteRef);\n  const [userSelectedStepId, setUserSelectedStepId] = useState\n\n(undefined);\n  const [lastActiveStepId, setLastActiveStepId] = useState(\n    undefined,\n  );\n  const { taskId } = useParams();\n  const taskStream = useTaskEventStream(taskId);\n  const completed = taskStream.completed;\n  const steps = useMemo(\n    () =>\n      taskStream.task?.spec.steps.map(step => ({\n        ...step,\n        ...taskStream?.steps?.[step.id],\n      })) ?? [],\n    [taskStream],\n  );\n\n  useEffect(() => {\n    const mostRecentFailedOrActiveStep = steps.find(step =>\n      ['failed', 'processing'].includes(step.status),\n    );\n    if (completed && !mostRecentFailedOrActiveStep) {\n      setLastActiveStepId(steps[steps.length - 1]?.id);\n      return;\n    }\n\n    setLastActiveStepId(mostRecentFailedOrActiveStep?.id);\n  }, [steps, completed]);\n\n  const currentStepId = userSelectedStepId ?? lastActiveStepId;\n\n  const logAsString = useMemo(() => {\n    if (!currentStepId) {\n      return loadingText ? loadingText : 'Loading...';\n    }\n    const log = taskStream.stepLogs[currentStepId];\n\n    if (!log?.length) {\n      return 'Waiting for logs...';\n    }\n    return log.join('\\n');\n  }, [taskStream.stepLogs, currentStepId, loadingText]);\n\n  const taskNotFound =\n    taskStream.completed === true &&\n    taskStream.loading === false &&\n    !taskStream.task;\n\n  const { output } = taskStream;\n\n  const handleStartOver = () => {\n    if (!taskStream.task || !taskStream.task?.spec.templateInfo?.entityRef) {\n      navigate(rootPath());\n      return;\n    }\n\n    const formData = taskStream.task.spec.parameters;\n\n    const { name } = parseEntityRef(\n      taskStream.task.spec.templateInfo?.entityRef,\n    );\n\n    navigate(\n      `${templateRoute({ templateName: name })}?${qs.stringify({\n        formData: JSON.stringify(formData),\n      })}`,\n    );\n  };\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, {\n        pageTitleOverride: `Task ${taskId}`,\n        title: \"Task Activity\" ,\n        subtitle: `Activity for task: ${taskId}`,}\n      )\n      , React.createElement(Content, null\n        , taskNotFound ? (\n          React.createElement(ErrorPage, {\n            status: \"404\",\n            statusMessage: \"Task not found\"  ,\n            additionalInfo: \"No task found with this ID\"     ,}\n          )\n        ) : (\n          React.createElement('div', null\n            , React.createElement(Grid, { container: true,}\n              , React.createElement(Grid, { item: true, xs: 3,}\n                , React.createElement(Paper, null\n                  , React.createElement(TaskStatusStepper, {\n                    steps: steps,\n                    currentStepId: currentStepId,\n                    onUserStepChange: setUserSelectedStepId,}\n                  )\n                  , output && hasLinks(output) && (\n                    React.createElement(TaskPageLinks, { output: output,} )\n                  )\n                  , React.createElement(Button, {\n                    className: classes.button,\n                    onClick: handleStartOver,\n                    disabled: !completed,\n                    variant: \"contained\",\n                    color: \"primary\",}\n                  , \"Start Over\"\n\n                  )\n                )\n              )\n              , React.createElement(Grid, { item: true, xs: 9,}\n                , !currentStepId && React.createElement(Progress, null )\n\n                , React.createElement('div', { style: { height: '80vh' },}\n                  , React.createElement(LogViewer, { text: logAsString,} )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport LanguageIcon from '@material-ui/icons/Language';\n\n\nimport { Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  svgIcon: {\n    display: 'inline-block',\n    '& svg': {\n      display: 'inline-block',\n      fontSize: 'inherit',\n      verticalAlign: 'baseline',\n    },\n  },\n});\n\nexport const IconLink = (\n  props\n\n\n\n,\n) => {\n  const { href, text, Icon, ...linkProps } = props;\n\n  const classes = useStyles();\n\n  return (\n    React.createElement(Grid, { container: true, direction: \"row\", spacing: 1,}\n      , React.createElement(Grid, { item: true,}\n        , React.createElement(Typography, { component: \"div\", className: classes.svgIcon,}\n          , Icon ? React.createElement(Icon, null ) : React.createElement(LanguageIcon, null )\n        )\n      )\n      , React.createElement(Grid, { item: true,}\n        , React.createElement(Link, { to: href, ...linkProps,}\n          , text || href\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { Box } from '@material-ui/core';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport React from 'react';\n\nimport { IconLink } from './IconLink';\nimport { useApp, useRouteRef } from '@backstage/core-plugin-api';\n\n\n\n\n\nexport const TaskPageLinks = ({ output }) => {\n  const { links = [] } = output;\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n\n  const iconResolver = (key) =>\n    key ? app.getSystemIcon(key) ?? LanguageIcon : LanguageIcon;\n\n  return (\n    React.createElement(Box, { px: 3, pb: 3,}\n      , links\n        .filter(({ url, entityRef }) => url || entityRef)\n        .map(({ url, entityRef, title, icon }) => {\n          if (entityRef) {\n            const entityName = parseEntityRef(entityRef, {\n              defaultKind: '<unknown>',\n              defaultNamespace: '<unknown>',\n            });\n            const target = entityRoute(entityName);\n            return { title, icon, url: target };\n          }\n          return { title, icon, url: url };\n        })\n        .map(({ url, title, icon }, i) => (\n          React.createElement(IconLink, {\n            key: `output-link-${i}`,\n            href: url,\n            text: title ?? url,\n            Icon: iconResolver(icon),\n            target: \"_blank\",}\n          )\n        ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { Progress } from '@backstage/core-components';\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport { useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst icon = React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\",} );\nconst checkedIcon = React.createElement(CheckBoxIcon, { fontSize: \"small\",} );\n\n/**\n * The component to select the `type` of `Template` that you will see in the table.\n *\n * @public\n */\nexport const TemplateTypePicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } =\n    useEntityTypeFilter();\n\n  if (loading) return React.createElement(Progress, null );\n\n  if (!availableTypes) return null;\n\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types`,\n      severity: 'error',\n    });\n    return null;\n  }\n\n  return (\n    React.createElement(Box, { pb: 1, pt: 1,}\n      , React.createElement(Typography, { variant: \"button\",}, \"Categories\")\n      , React.createElement(Autocomplete, {\n        multiple: true,\n        'aria-label': \"Categories\",\n        options: availableTypes,\n        value: selectedTypes,\n        onChange: (_, value) => setSelectedTypes(value),\n        renderOption: (option, { selected }) => (\n          React.createElement(FormControlLabel, {\n            control: \n              React.createElement(Checkbox, {\n                icon: icon,\n                checkedIcon: checkedIcon,\n                checked: selected,}\n              )\n            ,\n            label: capitalize(option),}\n          )\n        ),\n        size: \"small\",\n        popupIcon: React.createElement(ExpandMoreIcon, { 'data-testid': \"categories-picker-expand\",} ),\n        renderInput: params => React.createElement(TextField, { ...params, variant: \"outlined\",} ),}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { TextField } from '@material-ui/core';\n\n/**\n * EntityName Picker\n */\nexport const EntityNamePicker = (\n  props,\n) => {\n  const {\n    onChange,\n    required,\n    schema: { title = 'Name', description = 'Unique name of the component' },\n    rawErrors,\n    formData,\n    uiSchema: { 'ui:autofocus': autoFocus },\n    idSchema,\n    placeholder,\n  } = props;\n\n  return (\n    React.createElement(TextField, {\n      id: idSchema?.$id,\n      label: title,\n      placeholder: placeholder,\n      helperText: description,\n      required: required,\n      value: formData ?? '',\n      onChange: ({ target: { value } }) => onChange(value),\n      margin: \"normal\",\n      error: rawErrors?.length > 0 && !formData,\n      inputProps: { autoFocus },}\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { KubernetesValidatorFunctions } from '@backstage/catalog-model';\n\nexport const entityNamePickerValidation = (\n  value,\n  validation,\n) => {\n  if (!KubernetesValidatorFunctions.isValidObjectName(value)) {\n    validation.addError(\n      'must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.',\n    );\n  }\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  catalogApiRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport { TextField } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useCallback, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `EntityPicker` field extension.\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * The underlying component that is rendered in the form for the `EntityPicker`\n * field extension.\n *\n * @public\n */\nexport const EntityPicker = (\n  props,\n) => {\n  const {\n    onChange,\n    schema: { title = 'Entity', description = 'An entity from the catalog' },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema,\n  } = props;\n  const allowedKinds = uiSchema['ui:options']?.allowedKinds;\n  const defaultKind = uiSchema['ui:options']?.defaultKind;\n\n  const catalogApi = useApi(catalogApiRef);\n\n  const { value: entities, loading } = useAsync(() =>\n    catalogApi.getEntities(\n      allowedKinds ? { filter: { kind: allowedKinds } } : undefined,\n    ),\n  );\n\n  const entityRefs = entities?.items.map(e =>\n    humanizeEntityRef(e, { defaultKind }),\n  );\n\n  const onSelect = useCallback(\n    (_, value) => {\n      onChange(value || '');\n    },\n    [onChange],\n  );\n\n  useEffect(() => {\n    if (entityRefs?.length === 1) {\n      onChange(entityRefs[0]);\n    }\n  }, [entityRefs, onChange]);\n\n  return (\n    React.createElement(FormControl, {\n      margin: \"normal\",\n      required: required,\n      error: rawErrors?.length > 0 && !formData,}\n    \n      , React.createElement(Autocomplete, {\n        disabled: entityRefs?.length === 1,\n        id: idSchema?.$id,\n        value: (formData ) || '',\n        loading: loading,\n        onChange: onSelect,\n        options: entityRefs || [],\n        autoSelect: true,\n        freeSolo: uiSchema['ui:options']?.allowArbitraryValues ?? true,\n        renderInput: params => (\n          React.createElement(TextField, {\n            ...params,\n            label: title,\n            margin: \"normal\",\n            helperText: description,\n            variant: \"outlined\",\n            required: required,\n            InputProps: params.InputProps,}\n          )\n        ),}\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\n\nimport { makeValidator } from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { FormControl, TextField } from '@material-ui/core';\nimport { Autocomplete } from '@material-ui/lab';\n\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `EntityTagsPicker` field extension.\n *\n * @public\n */\n\n\n\n\n/**\n * The underlying component that is rendered in the form for the `EntityTagsPicker`\n * field extension.\n *\n * @public\n */\nexport const EntityTagsPicker = (\n  props,\n) => {\n  const { formData, onChange, uiSchema } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const [inputValue, setInputValue] = useState('');\n  const [inputError, setInputError] = useState(false);\n  const tagValidator = makeValidator().isValidTag;\n  const kinds = uiSchema['ui:options']?.kinds;\n\n  const { loading, value: existingTags } = useAsync(async () => {\n    const tagsRequest = { fields: ['metadata.tags'] };\n    if (kinds) {\n      tagsRequest.filter = { kind: kinds };\n    }\n\n    const entities = await catalogApi.getEntities(tagsRequest);\n\n    return [\n      ...new Set(\n        entities.items\n          .flatMap((e) => e.metadata?.tags)\n          .filter(Boolean) ,\n      ),\n    ].sort();\n  });\n\n  const setTags = (_, values) => {\n    // Reset error state in case all tags were removed\n    let hasError = false;\n    let addDuplicate = false;\n    const currentTags = formData || [];\n\n    // If adding a new tag\n    if (values?.length && currentTags.length < values.length) {\n      const newTag = (values[values.length - 1] = values[values.length - 1]\n        .toLocaleLowerCase('en-US')\n        .trim());\n      hasError = !tagValidator(newTag);\n      addDuplicate = currentTags.indexOf(newTag) !== -1;\n    }\n\n    setInputError(hasError);\n    setInputValue(!hasError ? '' : inputValue);\n    if (!hasError && !addDuplicate) {\n      onChange(values || []);\n    }\n  };\n\n  // Initialize field to always return an array\n  useEffectOnce(() => onChange(formData || []));\n\n  return (\n    React.createElement(FormControl, { margin: \"normal\",}\n      , React.createElement(Autocomplete, {\n        multiple: true,\n        freeSolo: true,\n        filterSelectedOptions: true,\n        onChange: setTags,\n        value: formData || [],\n        inputValue: inputValue,\n        loading: loading,\n        options: existingTags || [],\n        ChipProps: { size: 'small' },\n        renderInput: params => (\n          React.createElement(TextField, {\n            ...params,\n            label: \"Tags\",\n            onChange: e => setInputValue(e.target.value),\n            error: inputError,\n            helperText: \"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters\"                   ,}\n          )\n        ),}\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\nimport {\n  catalogApiRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport { TextField } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\n\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `OwnedEntityPicker` field extension.\n *\n * @public\n */\n\n\n\n\n\n/**\n * The underlying component that is rendered in the form for the `OwnedEntityPicker`\n * field extension.\n *\n * @public\n */\nexport const OwnedEntityPicker = (\n  props,\n) => {\n  const {\n    onChange,\n    schema: { title = 'Entity', description = 'An entity from the catalog' },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema,\n  } = props;\n\n  const allowedKinds = uiSchema['ui:options']?.allowedKinds;\n  const defaultKind = uiSchema['ui:options']?.defaultKind;\n  const { ownedEntities, loading } = useOwnedEntities(allowedKinds);\n\n  const entityRefs = ownedEntities?.items\n    .map(e => humanizeEntityRef(e, { defaultKind }))\n    .filter(n => n);\n\n  const onSelect = (_, value) => {\n    onChange(value || '');\n  };\n\n  return (\n    React.createElement(FormControl, {\n      margin: \"normal\",\n      required: required,\n      error: rawErrors?.length > 0 && !formData,}\n    \n      , React.createElement(Autocomplete, {\n        id: idSchema?.$id,\n        value: (formData ) || '',\n        loading: loading,\n        onChange: onSelect,\n        options: entityRefs || [],\n        autoSelect: true,\n        freeSolo: true,\n        renderInput: params => (\n          React.createElement(TextField, {\n            ...params,\n            label: title,\n            margin: \"normal\",\n            helperText: description,\n            variant: \"outlined\",\n            required: required,\n            InputProps: params.InputProps,}\n          )\n        ),}\n      )\n    )\n  );\n};\n\n/**\n * Takes the relevant parts of the Backstage identity, and translates them into\n * a list of entities which are owned by the user. Takes an optional parameter\n * to filter the entities based on allowedKinds\n *\n *\n * @param allowedKinds - Array of allowed kinds to filter the entities\n */\nfunction useOwnedEntities(allowedKinds)\n\n\n {\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n\n  const { loading, value: refs } = useAsync(async () => {\n    const identity = await identityApi.getBackstageIdentity();\n    const identityRefs = identity.ownershipEntityRefs;\n    const catalogs = await catalogApi.getEntities(\n      allowedKinds\n        ? {\n            filter: {\n              kind: allowedKinds,\n              [`relations.${RELATION_OWNED_BY}`]: identityRefs || [],\n            },\n          }\n        : {\n            filter: {\n              [`relations.${RELATION_OWNED_BY}`]: identityRefs || [],\n            },\n          },\n    );\n    return catalogs;\n  }, []);\n\n  const ownedEntities = useMemo(() => {\n    return refs;\n  }, [refs]);\n\n  return useMemo(() => ({ loading, ownedEntities }), [loading, ownedEntities]);\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { EntityPicker } from '../EntityPicker/EntityPicker';\n\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `OwnerPicker` field extension.\n *\n * @public\n */\n\n\n\n\n/**\n * The underlying component that is rendered in the form for the `OwnerPicker`\n * field extension.\n *\n * @public\n */\nexport const OwnerPicker = (\n  props,\n) => {\n  const {\n    schema: { title = 'Owner', description = 'The owner of the component' },\n    uiSchema,\n    ...restProps\n  } = props;\n\n  const ownerUiSchema = {\n    ...uiSchema,\n    'ui:options': {\n      allowedKinds: (uiSchema['ui:options']?.allowedKinds || [\n        'Group',\n        'User',\n      ]) ,\n      defaultKind: 'Group',\n    },\n  };\n\n  return (\n    React.createElement(EntityPicker, {\n      ...restProps,\n      schema: { title, description },\n      uiSchema: ownerUiSchema,}\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, } from '@backstage/core-components';\n\n\nexport const GithubRepoPicker = (props\n\n\n\n\n) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners\n    ? allowedOwners.map(i => ({ label: i, value: i }))\n    : [{ label: 'Loading...', value: 'loading' }];\n\n  const { owner, repoName } = state;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !owner,}\n      \n        , allowedOwners?.length ? (\n          React.createElement(Select, {\n            native: true,\n            label: \"Owner Available\" ,\n            onChange: s =>\n              onChange({ owner: String(Array.isArray(s) ? s[0] : s) })\n            ,\n            disabled: allowedOwners.length === 1,\n            selected: owner,\n            items: ownerItems,}\n          )\n        ) : (\n          React.createElement(React.Fragment, null\n            , React.createElement(InputLabel, { htmlFor: \"ownerInput\",}, \"Owner\")\n            , React.createElement(Input, {\n              id: \"ownerInput\",\n              onChange: e => onChange({ owner: e.target.value }),\n              value: owner,}\n            )\n          )\n        )\n        , React.createElement(FormHelperText, null, \"The organization, user or project that this repo will belong to\"\n\n        )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !repoName,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"repoNameInput\",}, \"Repository\")\n        , React.createElement(Input, {\n          id: \"repoNameInput\",\n          onChange: e => onChange({ repoName: e.target.value }),\n          value: repoName,}\n        )\n        , React.createElement(FormHelperText, null, \"The name of the repository\"    )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, } from '@backstage/core-components';\n\n\nexport const GitlabRepoPicker = (props\n\n\n\n\n) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners\n    ? allowedOwners.map(i => ({ label: i, value: i }))\n    : [{ label: 'Loading...', value: 'loading' }];\n\n  const { owner, repoName } = state;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !owner,}\n      \n        , allowedOwners?.length ? (\n          React.createElement(Select, {\n            native: true,\n            label: \"Owner Available\" ,\n            onChange: selected =>\n              onChange({\n                owner: String(Array.isArray(selected) ? selected[0] : selected),\n              })\n            ,\n            disabled: allowedOwners.length === 1,\n            selected: owner,\n            items: ownerItems,}\n          )\n        ) : (\n          React.createElement(React.Fragment, null\n            , React.createElement(InputLabel, { htmlFor: \"ownerInput\",}, \"Owner\")\n            , React.createElement(Input, {\n              id: \"ownerInput\",\n              onChange: e => onChange({ owner: e.target.value }),\n              value: owner,}\n            )\n          )\n        )\n        , React.createElement(FormHelperText, null, \"The organization, groups, subgroups, user, project (also known as namespaces in gitlab), that this repo will belong to\"\n\n\n        )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !repoName,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"repoNameInput\",}, \"Repository\")\n        , React.createElement(Input, {\n          id: \"repoNameInput\",\n          onChange: e => onChange({ repoName: e.target.value }),\n          value: repoName,}\n        )\n        , React.createElement(FormHelperText, null, \"The name of the repository\"    )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\n\n\nexport const AzureRepoPicker = (props\n\n\n\n) => {\n  const { rawErrors, state, onChange } = props;\n  const { organization, repoName, owner } = state;\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !organization,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"orgInput\",}, \"Organization\")\n        , React.createElement(Input, {\n          id: \"orgInput\",\n          onChange: e => onChange({ organization: e.target.value }),\n          value: organization,}\n        )\n        , React.createElement(FormHelperText, null, \"The organization that this repo will belong to\"\n\n        )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !owner,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"ownerInput\",}, \"Owner\")\n        , React.createElement(Input, {\n          id: \"ownerInput\",\n          onChange: e => onChange({ owner: e.target.value }),\n          value: owner,}\n        )\n        , React.createElement(FormHelperText, null, \"The Owner that this repo will belong to\"       )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !repoName,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"repoNameInput\",}, \"Repository\")\n        , React.createElement(Input, {\n          id: \"repoNameInput\",\n          onChange: e => onChange({ repoName: e.target.value }),\n          value: repoName,}\n        )\n        , React.createElement(FormHelperText, null, \"The name of the repository\"    )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\n\n\nexport const BitbucketRepoPicker = (props\n\n\n\n) => {\n  const { onChange, rawErrors, state } = props;\n  const { host, workspace, project, repoName } = state;\n  return (\n    React.createElement(React.Fragment, null\n      , host === 'bitbucket.org' && (\n        React.createElement(FormControl, {\n          margin: \"normal\",\n          required: true,\n          error: rawErrors?.length > 0 && !workspace,}\n        \n          , React.createElement(InputLabel, { htmlFor: \"workspaceInput\",}, \"Workspace\")\n          , React.createElement(Input, {\n            id: \"workspaceInput\",\n            onChange: e => onChange({ workspace: e.target.value }),\n            value: workspace,}\n          )\n          , React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\"\n\n          )\n        )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !project,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"projectInput\",}, \"Project\")\n        , React.createElement(Input, {\n          id: \"projectInput\",\n          onChange: e => onChange({ project: e.target.value }),\n          value: project,}\n        )\n        , React.createElement(FormHelperText, null, \"The Project that this repo will belong to\"\n\n        )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !repoName,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"repoNameInput\",}, \"Repository\")\n        , React.createElement(Input, {\n          id: \"repoNameInput\",\n          onChange: e => onChange({ repoName: e.target.value }),\n          value: repoName,}\n        )\n        , React.createElement(FormHelperText, null, \"The name of the repository\"    )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\n\n\nexport const GerritRepoPicker = (props\n\n\n\n) => {\n  const { onChange, rawErrors, state } = props;\n  const { workspace, repoName, owner } = state;\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !workspace,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"ownerInput\",}, \"Owner\")\n        , React.createElement(Input, {\n          id: \"ownerInput\",\n          onChange: e => onChange({ owner: e.target.value }),\n          value: owner,}\n        )\n        , React.createElement(FormHelperText, null, \"The owner of the project\"    )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !workspace,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"parentInput\",}, \"Parent\")\n        , React.createElement(Input, {\n          id: \"parentInput\",\n          onChange: e => onChange({ workspace: e.target.value }),\n          value: workspace,}\n        )\n        , React.createElement(FormHelperText, null, \"The project parent that the repo will belong to\"\n\n        )\n      )\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !repoName,}\n      \n        , React.createElement(InputLabel, { htmlFor: \"repoNameInput\",}, \"Repository\")\n        , React.createElement(Input, {\n          id: \"repoNameInput\",\n          onChange: e => onChange({ repoName: e.target.value }),\n          value: repoName,}\n        )\n        , React.createElement(FormHelperText, null, \"The name of the repository\"    )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useEffect } from 'react';\nimport { Progress, Select, } from '@backstage/core-components';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { scaffolderApiRef } from '../../../api';\nimport useAsync from 'react-use/lib/useAsync';\n\nexport const RepoUrlPickerHost = (props\n\n\n\n\n) => {\n  const { host, hosts, onChange, rawErrors } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n\n  const { value: { integrations } = { integrations: [] }, loading } = useAsync(\n    async () => {\n      return await scaffolderApi.getIntegrationsList({\n        allowedHosts: hosts ?? [],\n      });\n    },\n  );\n\n  useEffect(() => {\n    // If there is no host chosen currently\n    if (!host) {\n      // Set the first of the allowedHosts option if that available\n      if (hosts?.length) {\n        onChange(hosts[0]);\n        // if there's no hosts provided, fallback to using the first integration\n      } else if (integrations?.length) {\n        onChange(integrations[0].host);\n      }\n    }\n  }, [hosts, host, onChange, integrations]);\n\n  // If there are no allowedHosts provided, then show all integrations. Otherwise, only show integrations\n  // that are provided in the dropdown for the user to choose from.\n  const hostsOptions = integrations\n    ? integrations\n        .filter(i => (hosts?.length ? hosts?.includes(i.host) : true))\n        .map(i => ({ label: i.title, value: i.host }))\n    : [{ label: 'Loading...', value: 'loading' }];\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        error: rawErrors?.length > 0 && !host,}\n      \n        , React.createElement(Select, {\n          native: true,\n          disabled: hosts?.length === 1 ?? false,\n          label: \"Host\",\n          onChange: s => onChange(String(Array.isArray(s) ? s[0] : s)),\n          selected: host,\n          items: hostsOptions,\n          'data-testid': \"host-select\",}\n        )\n\n        , React.createElement(FormHelperText, null, \"The host where the repository will be created\"\n\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function serializeRepoPickerUrl(data) {\n  if (!data.host) {\n    return undefined;\n  }\n\n  const params = new URLSearchParams();\n  if (data.owner) {\n    params.set('owner', data.owner);\n  }\n  if (data.repoName) {\n    params.set('repo', data.repoName);\n  }\n  if (data.organization) {\n    params.set('organization', data.organization);\n  }\n  if (data.workspace) {\n    params.set('workspace', data.workspace);\n  }\n  if (data.project) {\n    params.set('project', data.project);\n  }\n\n  return `${data.host}?${params.toString()}`;\n}\n\nexport function parseRepoPickerUrl(\n  url,\n) {\n  let host = '';\n  let owner = '';\n  let repoName = '';\n  let organization = '';\n  let workspace = '';\n  let project = '';\n\n  try {\n    if (url) {\n      const parsed = new URL(`https://${url}`);\n      host = parsed.host;\n      owner = parsed.searchParams.get('owner') || '';\n      repoName = parsed.searchParams.get('repo') || '';\n      organization = parsed.searchParams.get('organization') || '';\n      workspace = parsed.searchParams.get('workspace') || '';\n      project = parsed.searchParams.get('project') || '';\n    }\n  } catch {\n    /* ok */\n  }\n\n  return { host, owner, repoName, organization, workspace, project };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  scmIntegrationsApiRef,\n  scmAuthApiRef,\n} from '@backstage/integration-react';\nimport React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport { GithubRepoPicker } from './GithubRepoPicker';\nimport { GitlabRepoPicker } from './GitlabRepoPicker';\nimport { AzureRepoPicker } from './AzureRepoPicker';\nimport { BitbucketRepoPicker } from './BitbucketRepoPicker';\nimport { GerritRepoPicker } from './GerritRepoPicker';\n\nimport { RepoUrlPickerHost } from './RepoUrlPickerHost';\nimport { parseRepoPickerUrl, serializeRepoPickerUrl } from './utils';\n\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useTemplateSecrets } from '../../secrets';\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `RepoUrlPicker` field extension.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The underlying component that is rendered in the form for the `RepoUrlPicker`\n * field extension.\n *\n * @public\n */\nexport const RepoUrlPicker = (\n  props,\n) => {\n  const { uiSchema, onChange, rawErrors, formData } = props;\n  const [state, setState] = useState(\n    parseRepoPickerUrl(formData),\n  );\n  const integrationApi = useApi(scmIntegrationsApiRef);\n  const scmAuthApi = useApi(scmAuthApiRef);\n  const { setSecrets } = useTemplateSecrets();\n  const allowedHosts = useMemo(\n    () => uiSchema?.['ui:options']?.allowedHosts ?? [],\n    [uiSchema],\n  );\n  const allowedOwners = useMemo(\n    () => uiSchema?.['ui:options']?.allowedOwners ?? [],\n    [uiSchema],\n  );\n\n  useEffect(() => {\n    onChange(serializeRepoPickerUrl(state));\n  }, [state, onChange]);\n\n  /* we deal with calling the repo setting here instead of in each components for ease */\n  useEffect(() => {\n    if (allowedOwners.length === 1) {\n      setState(prevState => ({ ...prevState, owner: allowedOwners[0] }));\n    }\n  }, [setState, allowedOwners]);\n\n  const updateLocalState = useCallback(\n    (newState) => {\n      setState(prevState => ({ ...prevState, ...newState }));\n    },\n    [setState],\n  );\n\n  useDebounce(\n    async () => {\n      const { requestUserCredentials } = uiSchema?.['ui:options'] ?? {};\n\n      if (\n        !requestUserCredentials ||\n        !(state.host && state.owner && state.repoName)\n      ) {\n        return;\n      }\n\n      const [host, owner, repoName] = [\n        state.host,\n        state.owner,\n        state.repoName,\n      ].map(encodeURIComponent);\n\n      // user has requested that we use the users credentials\n      // so lets grab them using the scmAuthApi and pass through\n      // any additional scopes from the ui:options\n      const { token } = await scmAuthApi.getCredentials({\n        url: `https://${host}/${owner}/${repoName}`,\n        additionalScope: {\n          repoWrite: true,\n          customScopes: requestUserCredentials.additionalScopes,\n        },\n      });\n\n      // set the secret using the key provided in the the ui:options for use\n      // in the templating the manifest with ${{ secrets[secretsKey] }}\n      setSecrets({ [requestUserCredentials.secretsKey]: token });\n    },\n    500,\n    [state, uiSchema],\n  );\n\n  const hostType =\n    (state.host && integrationApi.byHost(state.host)?.type) ?? null;\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(RepoUrlPickerHost, {\n        host: state.host,\n        hosts: allowedHosts,\n        onChange: host => setState(prevState => ({ ...prevState, host })),\n        rawErrors: rawErrors,}\n      )\n      , hostType === 'github' && (\n        React.createElement(GithubRepoPicker, {\n          allowedOwners: allowedOwners,\n          rawErrors: rawErrors,\n          state: state,\n          onChange: updateLocalState,}\n        )\n      )\n      , hostType === 'gitlab' && (\n        React.createElement(GitlabRepoPicker, {\n          allowedOwners: allowedOwners,\n          rawErrors: rawErrors,\n          state: state,\n          onChange: updateLocalState,}\n        )\n      )\n      , hostType === 'bitbucket' && (\n        React.createElement(BitbucketRepoPicker, {\n          rawErrors: rawErrors,\n          state: state,\n          onChange: updateLocalState,}\n        )\n      )\n      , hostType === 'azure' && (\n        React.createElement(AzureRepoPicker, {\n          rawErrors: rawErrors,\n          state: state,\n          onChange: updateLocalState,}\n        )\n      )\n      , hostType === 'gerrit' && (\n        React.createElement(GerritRepoPicker, {\n          rawErrors: rawErrors,\n          state: state,\n          onChange: updateLocalState,}\n        )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\n\n/**\n * The validation function for the `repoUrl` that is returned from the\n * field extension. Ensures that you have all the required fields filled for\n * the different providers that exist.\n *\n * @public\n */\nexport const repoPickerValidation = (\n  value,\n  validation,\n  context,\n) => {\n  try {\n    const { host, searchParams } = new URL(`https://${value}`);\n\n    const integrationApi = context.apiHolder.get(scmIntegrationsApiRef);\n\n    if (!host) {\n      validation.addError(\n        'Incomplete repository location provided, host not provided',\n      );\n    } else {\n      if (integrationApi?.byHost(host)?.type === 'bitbucket') {\n        // workspace is only applicable for bitbucket cloud\n        if (host === 'bitbucket.org' && !searchParams.get('workspace')) {\n          validation.addError(\n            'Incomplete repository location provided, workspace not provided',\n          );\n        }\n\n        if (!searchParams.get('project')) {\n          validation.addError(\n            'Incomplete repository location provided, project not provided',\n          );\n        }\n      }\n      // For anything other than bitbucket\n      else {\n        if (!searchParams.get('owner')) {\n          validation.addError(\n            'Incomplete repository location provided, owner not provided',\n          );\n        }\n      }\n\n      // Do this for all hosts\n      if (!searchParams.get('repo')) {\n        validation.addError(\n          'Incomplete repository location provided, repo not provided',\n        );\n      }\n    }\n  } catch {\n    validation.addError('Unable to parse the Repository URL');\n  }\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  useState,\n  useCallback,\n  useContext,\n  createContext,\n\n} from 'react';\n\n\n\n\n\n\n/**\n * The actual context object.\n */\nexport const SecretsContext = createContext(\n  undefined,\n);\n\n/**\n * The Context Provider that holds the state for the secrets.\n *\n * @public\n */\nexport const SecretsContextProvider = ({ children }) => {\n  const [secrets, setSecrets] = useState({});\n\n  return (\n    React.createElement(SecretsContext.Provider, { value: { secrets, setSecrets },}\n      , children\n    )\n  );\n};\n\n/**\n * The return type from the useTemplateSecrets hook.\n * @public\n */\n\n\n\n\n/**\n * Hook to access the secrets context.\n * @public\n */\nexport const useTemplateSecrets = () => {\n  const value = useContext(SecretsContext);\n  if (!value) {\n    throw new Error(\n      'useTemplateSecrets must be used within a SecretsContextProvider',\n    );\n  }\n\n  const { setSecrets: updateSecrets } = value;\n\n  const setSecrets = useCallback(\n    (input) => {\n      updateSecrets(currentSecrets => ({ ...currentSecrets, ...input }));\n    },\n    [updateSecrets],\n  );\n\n  return { setSecrets };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EntityPicker } from '../components/fields/EntityPicker/EntityPicker';\nimport { EntityNamePicker } from '../components/fields/EntityNamePicker/EntityNamePicker';\nimport { entityNamePickerValidation } from '../components/fields/EntityNamePicker/validation';\nimport { EntityTagsPicker } from '../components/fields/EntityTagsPicker/EntityTagsPicker';\nimport { OwnerPicker } from '../components/fields/OwnerPicker/OwnerPicker';\nimport { RepoUrlPicker } from '../components/fields/RepoUrlPicker/RepoUrlPicker';\nimport { repoPickerValidation } from '../components/fields/RepoUrlPicker/validation';\nimport { OwnedEntityPicker } from '../components/fields/OwnedEntityPicker/OwnedEntityPicker';\n\nexport const DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS = [\n  {\n    component: EntityPicker,\n    name: 'EntityPicker',\n  },\n  {\n    component: EntityNamePicker,\n    name: 'EntityNamePicker',\n    validation: entityNamePickerValidation,\n  },\n  {\n    component: EntityTagsPicker,\n    name: 'EntityTagsPicker',\n  },\n  {\n    component: RepoUrlPicker,\n    name: 'RepoUrlPicker',\n    validation: repoPickerValidation,\n  },\n  {\n    component: OwnerPicker,\n    name: 'OwnerPicker',\n  },\n  {\n    component: OwnedEntityPicker,\n    name: 'OwnedEntityPicker',\n  },\n];\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  CustomFieldValidator,\n  FieldExtensionOptions,\n  FieldExtensionComponentProps,\n} from './types';\nimport { attachComponentData } from '@backstage/core-plugin-api';\n\nexport const FIELD_EXTENSION_WRAPPER_KEY = 'scaffolder.extensions.wrapper.v1';\nexport const FIELD_EXTENSION_KEY = 'scaffolder.extensions.field.v1';\n\n/**\n * A type used to wrap up the FieldExtension to embed the ReturnValue and the InputProps\n *\n * @public\n */\n\n\n/**\n * Method for creating field extensions that can be used in the scaffolder\n * frontend form.\n * @public\n */\nexport function createScaffolderFieldExtension\n\n\n(\n  options,\n) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options,\n      );\n\n      return FieldExtensionDataHolder;\n    },\n  };\n}\n\n/**\n * The Wrapping component for defining fields extensions inside\n *\n * @public\n */\nexport const ScaffolderFieldExtensions =\n  () => null;\n\nattachComponentData(\n  ScaffolderFieldExtensions,\n  FIELD_EXTENSION_WRAPPER_KEY,\n  true,\n);\n\n\n\n\n\n;\n\nexport { DEFAULT_SCAFFOLDER_FIELD_EXTENSIONS } from './default';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createExternalRouteRef,\n  createRouteRef,\n  createSubRouteRef,\n} from '@backstage/core-plugin-api';\n\nexport const registerComponentRouteRef = createExternalRouteRef({\n  id: 'register-component',\n  optional: true,\n});\n\nexport const rootRouteRef = createRouteRef({\n  id: 'scaffolder',\n});\n\nexport const selectedTemplateRouteRef = createSubRouteRef({\n  id: 'scaffolder/selected-template',\n  parent: rootRouteRef,\n  path: '/templates/:templateName',\n});\n\nexport const scaffolderTaskRouteRef = createSubRouteRef({\n  id: 'scaffolder/task',\n  parent: rootRouteRef,\n  path: '/tasks/:taskId',\n});\n\nexport const scaffolderListTaskRouteRef = createSubRouteRef({\n  id: 'scaffolder/list-tasks',\n  parent: rootRouteRef,\n  path: '/tasks',\n});\n\nexport const actionsRouteRef = createSubRouteRef({\n  id: 'scaffolder/actions',\n  parent: rootRouteRef,\n  path: '/actions',\n});\n\nexport const editRouteRef = createSubRouteRef({\n  id: 'scaffolder/edit',\n  parent: rootRouteRef,\n  path: '/edit',\n});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * @public\n */\nexport const searchApiRef = createApiRef({\n  id: 'plugin.search.queryservice',\n});\n\n/**\n * @public\n */\n\n\n\n\n/**\n * @public\n *\n * Search Api Mock that can be used in tests and storybooks\n */\nexport class MockSearchApi  {\n  constructor( mockedResults) {;this.mockedResults = mockedResults;}\n\n  query() {\n    return Promise.resolve(this.mockedResults || { results: [] });\n  }\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(\n  () => ({\n    highlight: {},\n  }),\n  { name: 'BackstageHighlightedSearchResultText' },\n);\n\n/**\n * @public\n */\n\n\n\n\n\n\n/**\n * @public\n */\nexport const HighlightedSearchResultText = ({\n  text,\n  preTag,\n  postTag,\n}) => {\n  const classes = useStyles();\n  const terms = useMemo(\n    () => text.split(new RegExp(`(${preTag}.+?${postTag})`)),\n    [postTag, preTag, text],\n  );\n  return (\n    React.createElement(React.Fragment, null\n      , terms.map((t, idx) =>\n        t.includes(preTag) ? (\n          React.createElement('mark', { className: classes.highlight, key: idx,}\n            , t.replace(new RegExp(`${preTag}|${postTag}`, 'g'), '')\n          )\n        ) : (\n          t\n        ),\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useApi, AnalyticsContext } from '@backstage/core-plugin-api';\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, {\n\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport useAsync, { } from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { searchApiRef } from '../api';\n\n/**\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SearchContext = createVersionedContext\n\n('search-context');\n\n/**\n * @public\n *\n * React hook which provides the search context\n */\nexport const useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error('useSearch must be used within a SearchContextProvider');\n  }\n\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error('No SearchContext v1 found');\n  }\n  return value;\n};\n\n/**\n * @public\n *\n * React hook which checks for an existing search context\n */\nexport const useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== undefined;\n};\n\n/**\n * The initial state of `SearchContextProvider`.\n *\n */\nconst searchInitialState = {\n  term: '',\n  pageCursor: undefined,\n  filters: {},\n  types: [],\n};\n\n/**\n * Props for {@link SearchContextProvider}\n *\n * @public\n */\n\n\n\n\n/**\n * @public\n *\n * Search context provider which gives you access to shared state between search components\n */\nexport const SearchContextProvider = (props) => {\n  const { initialState = searchInitialState, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const [pageCursor, setPageCursor] = useState(\n    initialState.pageCursor,\n  );\n  const [filters, setFilters] = useState(initialState.filters);\n  const [term, setTerm] = useState(initialState.term);\n  const [types, setTypes] = useState(initialState.types);\n\n  const prevTerm = usePrevious(term);\n\n  const result = useAsync(\n    () =>\n      searchApi.query({\n        term,\n        filters,\n        pageCursor,\n        types,\n      }),\n    [term, filters, types, pageCursor],\n  );\n\n  const hasNextPage =\n    !result.loading && !result.error && result.value?.nextPageCursor;\n  const hasPreviousPage =\n    !result.loading && !result.error && result.value?.previousPageCursor;\n  const fetchNextPage = useCallback(() => {\n    setPageCursor(result.value?.nextPageCursor);\n  }, [result.value?.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    setPageCursor(result.value?.previousPageCursor);\n  }, [result.value?.previousPageCursor]);\n\n  useEffect(() => {\n    // Any time a term is reset, we want to start from page 0.\n    if (term && prevTerm && term !== prevTerm) {\n      setPageCursor(undefined);\n    }\n  }, [term, prevTerm, initialState.pageCursor]);\n\n  const value = {\n    result,\n    filters,\n    setFilters,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : undefined,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : undefined,\n  };\n\n  const versionedValue = createVersionedValueMap({ 1: value });\n\n  return (\n    React.createElement(AnalyticsContext, { attributes: { searchTypes: types.sort().join(',') },}\n      , React.createElement(SearchContext.Provider, { value: versionedValue, children: children,} )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\n\n\n\n\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Divider,\n} from '@material-ui/core';\nimport { Link } from '@backstage/core-components';\n\n\n\n\n\n\n\n\n\nexport const DefaultResultListItem = ({\n  result,\n  highlight,\n  icon,\n  secondaryAction,\n  lineClamp = 5,\n}) => {\n  return (\n    React.createElement(Link, { to: result.location,}\n      , React.createElement(ListItem, { alignItems: \"center\",}\n        , icon && React.createElement(ListItemIcon, null, icon)\n        , React.createElement(ListItemText, {\n          primaryTypographyProps: { variant: 'h6' },\n          primary: \n            highlight?.fields.title ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: highlight.fields.title,\n                preTag: highlight.preTag,\n                postTag: highlight.postTag,}\n              )\n            ) : (\n              result.title\n            )\n          ,\n          secondary: \n            React.createElement('span', {\n              style: {\n                display: '-webkit-box',\n                WebkitBoxOrient: 'vertical',\n                WebkitLineClamp: lineClamp,\n                overflow: 'hidden',\n              },}\n            \n              , highlight?.fields.text ? (\n                React.createElement(HighlightedSearchResultText, {\n                  text: highlight.fields.text,\n                  preTag: highlight.preTag,\n                  postTag: highlight.postTag,}\n                )\n              ) : (\n                result.text\n              )\n            )\n          ,}\n        )\n        , secondaryAction && React.createElement(Box, { alignItems: \"flex-end\",}, secondaryAction)\n      )\n      , React.createElement(Divider, null )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport { useSearch } from '@backstage/plugin-search-react';\n\n/**\n * Capture search event on term change.\n */\nexport const TrackSearch = ({ children }) => {\n  const analytics = useAnalytics();\n  const { term } = useSearch();\n\n  useEffect(() => {\n    if (term) {\n      // Capture analytics search event with search term provided as value\n      analytics.captureEvent('search', term);\n    }\n  }, [analytics, term]);\n\n  return React.createElement(React.Fragment, null, children);\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n\n  useState,\n  useEffect,\n  useCallback,\n} from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport {\n  InputBase,\n\n  InputAdornment,\n  IconButton,\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearButton from '@material-ui/icons/Clear';\n\nimport {\n  SearchContextProvider,\n  useSearch,\n  useSearchContextCheck,\n} from '@backstage/plugin-search-react';\nimport { TrackSearch } from '../SearchTracker';\n\n/**\n * Props for {@link SearchBarBase}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * All search boxes exported by the search plugin are based on the <SearchBarBase />,\n * and this one is based on the <InputBase /> component from Material UI.\n * Recommended if you don't use Search Provider or Search Context.\n *\n * @public\n */\nexport const SearchBarBase = ({\n  onChange,\n  onKeyDown,\n  onSubmit,\n  debounceTime = 200,\n  clearButton = true,\n  fullWidth = true,\n  value: defaultValue,\n  inputProps: defaultInputProps = {},\n  endAdornment: defaultEndAdornment,\n  ...props\n}) => {\n  const configApi = useApi(configApiRef);\n  const [value, setValue] = useState(defaultValue );\n  const hasSearchContext = useSearchContextCheck();\n\n  useEffect(() => {\n    setValue(prevValue =>\n      prevValue !== defaultValue ? (defaultValue ) : prevValue,\n    );\n  }, [defaultValue]);\n\n  useDebounce(() => onChange(value), debounceTime, [value]);\n\n  const handleChange = useCallback(\n    (e) => {\n      setValue(e.target.value);\n    },\n    [setValue],\n  );\n\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (onKeyDown) onKeyDown(e);\n      if (onSubmit && e.key === 'Enter') {\n        onSubmit();\n      }\n    },\n    [onKeyDown, onSubmit],\n  );\n\n  const handleClear = useCallback(() => {\n    onChange('');\n  }, [onChange]);\n\n  const placeholder = `Search in ${\n    configApi.getOptionalString('app.title') || 'Backstage'\n  }`;\n\n  const startAdornment = (\n    React.createElement(InputAdornment, { position: \"start\",}\n      , React.createElement(IconButton, { 'aria-label': \"Query\", disabled: true,}\n        , React.createElement(SearchIcon, null )\n      )\n    )\n  );\n\n  const endAdornment = (\n    React.createElement(InputAdornment, { position: \"end\",}\n      , React.createElement(IconButton, { 'aria-label': \"Clear\", onClick: handleClear,}\n        , React.createElement(ClearButton, null )\n      )\n    )\n  );\n\n  const searchBar = (\n    React.createElement(TrackSearch, null\n      , React.createElement(InputBase, {\n        'data-testid': \"search-bar-next\",\n        value: value,\n        placeholder: placeholder,\n        startAdornment: startAdornment,\n        endAdornment: clearButton ? endAdornment : defaultEndAdornment,\n        inputProps: { 'aria-label': 'Search', ...defaultInputProps },\n        fullWidth: fullWidth,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        ...props,}\n      )\n    )\n  );\n\n  return hasSearchContext ? (\n    searchBar\n  ) : (\n    React.createElement(SearchContextProvider, null, searchBar)\n  );\n};\n\n/**\n * Props for {@link SearchBar}.\n *\n * @public\n */\n\n\n/**\n * Recommended search bar when you use the Search Provider or Search Context.\n *\n * @public\n */\nexport const SearchBar = ({ onChange, ...props }) => {\n  const { term, setTerm } = useSearch();\n\n  const handleChange = useCallback(\n    (newValue) => {\n      if (onChange) {\n        onChange(newValue);\n      } else {\n        setTerm(newValue);\n      }\n    },\n    [onChange, setTerm],\n  );\n\n  return React.createElement(SearchBarBase, { value: term, onChange: handleChange, ...props,} );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Grid,\n  List,\n  Paper,\n  useTheme,\n} from '@material-ui/core';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SearchBar } from '../SearchBar';\nimport { DefaultResultListItem } from '../DefaultResultListItem';\nimport { SearchResult } from '../SearchResult';\nimport {\n  SearchContextProvider,\n  useSearch,\n} from '@backstage/plugin-search-react';\nimport { SearchResultPager } from '../SearchResultPager';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { Link, useContent } from '@backstage/core-components';\nimport { rootRouteRef } from '../../plugin';\n\n/**\n * @public\n **/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    borderRadius: 30,\n    display: 'flex',\n    height: '2.4em',\n  },\n  input: {\n    flex: 1,\n  },\n  // Reduces default height of the modal, keeping a gap of 128px between the top and bottom of the page.\n  paperFullWidth: { height: 'calc(100% - 128px)' },\n  dialogActionsContainer: { padding: theme.spacing(1, 3) },\n  viewResultsLink: { verticalAlign: '0.5em' },\n}));\n\nexport const Modal = ({ toggleModal }) => {\n  const getSearchLink = useRouteRef(rootRouteRef);\n  const classes = useStyles();\n\n  const { term } = useSearch();\n  const { focusContent } = useContent();\n  const { transitions } = useTheme();\n\n  const handleResultClick = () => {\n    toggleModal();\n    setTimeout(focusContent, transitions.duration.leavingScreen);\n  };\n\n  const handleKeyPress = () => {\n    handleResultClick();\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(DialogTitle, null\n        , React.createElement(Paper, { className: classes.container,}\n          , React.createElement(SearchBar, { className: classes.input,} )\n        )\n      )\n      , React.createElement(DialogContent, null\n        , React.createElement(Grid, {\n          container: true,\n          direction: \"row-reverse\",\n          justifyContent: \"flex-start\",\n          alignItems: \"center\",}\n        \n          , React.createElement(Grid, { item: true,}\n            , React.createElement(Link, {\n              onClick: () => {\n                toggleModal();\n                setTimeout(focusContent, transitions.duration.leavingScreen);\n              },\n              to: `${getSearchLink()}?query=${term}`,}\n            \n              , React.createElement('span', { className: classes.viewResultsLink,}, \"View Full Results\"  )\n              , React.createElement(LaunchIcon, { color: \"primary\",} )\n            )\n          )\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(SearchResult, null\n          , ({ results }) => (\n            React.createElement(List, null\n              , results.map(({ document, highlight }) => (\n                React.createElement('div', {\n                  role: \"button\",\n                  tabIndex: 0,\n                  key: `${document.location}-btn`,\n                  onClick: handleResultClick,\n                  onKeyPress: handleKeyPress,}\n                \n                  , React.createElement(DefaultResultListItem, {\n                    key: document.location,\n                    result: document,\n                    highlight: highlight,}\n                  )\n                )\n              ))\n            )\n          )\n        )\n      )\n      , React.createElement(DialogActions, { className: classes.dialogActionsContainer,}\n        , React.createElement(Grid, { container: true, direction: \"row\",}\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(SearchResultPager, null )\n          )\n        )\n      )\n    )\n  );\n};\n\nexport const SearchModal = ({\n  open = true,\n  hidden,\n  toggleModal,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Dialog, {\n      classes: {\n        paperFullWidth: classes.paperFullWidth,\n      },\n      onClose: toggleModal,\n      'aria-labelledby': \"search-modal-title\",\n      fullWidth: true,\n      maxWidth: \"lg\",\n      open: open,\n      hidden: hidden,}\n    \n      , open && (\n        React.createElement(SearchContextProvider, null\n          , (children && children({ toggleModal })) ?? (\n            React.createElement(Modal, { toggleModal: toggleModal,} )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback, useContext, useState } from 'react';\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\n\n/**\n * The state of the search modal, as well as functions for changing the modal's\n * visibility.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\nconst SearchModalContext = createVersionedContext\n\n('search-modal-context');\n\n/**\n * Props for the SearchModalProvider.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A context provider responsible for storing and managing state related to the\n * search modal.\n *\n * @remarks\n * If you need to control visibility of the search toggle outside of the modal\n * itself, you can optionally place this higher up in the react tree where your\n * custom code and the search modal share the same context.\n *\n * @example\n * ```tsx\n * import {\n *   SearchModalProvider,\n *   SidebarSearchModal,\n * } from '@backstage/plugin-search';\n *\n * // ...\n *\n * <SearchModalProvider>\n *   <KeyboardShortcutSearchToggler />\n *   <SidebarSearchModal>\n *     {({ toggleModal }) => <SearchModal toggleModal={toggleModal} />}\n *   </SidebarSearchModal>\n * </SearchModalProvider>\n * ```\n *\n * @public\n */\nexport const SearchModalProvider = ({\n  children,\n  showInitially,\n}) => {\n  const value = useSearchModal(showInitially);\n  const versionedValue = createVersionedValueMap({ 1: value });\n  return (\n    React.createElement(SearchModalContext.Provider, { value: versionedValue,}\n      , children\n    )\n  );\n};\n\n/**\n * Use this hook to manage the state of {@link SearchModal}\n * and change its visibility.\n *\n * @public\n *\n * @param initialState - pass `true` to make the modal initially visible\n * @returns an object containing the state of the modal together with\n * functions for changing the visibility of the modal.\n */\nexport function useSearchModal(initialState = false) {\n  // Check for any existing parent context.\n  const parentContext = useContext(SearchModalContext);\n  const parentContextValue = parentContext?.atVersion(1);\n\n  const [state, setState] = useState({\n    hidden: !initialState,\n    open: initialState,\n  });\n\n  const toggleModal = useCallback(\n    () =>\n      setState(prevState => ({\n        open: true,\n        hidden: !prevState.hidden,\n      })),\n    [],\n  );\n\n  const setOpen = useCallback(\n    (open) =>\n      setState(prevState => ({\n        open: prevState.open || open,\n        hidden: !open,\n      })),\n    [],\n  );\n\n  // Inherit from parent context, if set.\n  return parentContextValue?.state\n    ? parentContextValue\n    : { state, toggleModal, setOpen };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearButton from '@material-ui/icons/Clear';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  input: {\n    flex: 1,\n  },\n}));\n\n\n\n\n\n\n\nexport const SearchBar = ({\n  searchQuery,\n  handleSearch,\n  handleClearSearchBar,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Paper, {\n      component: \"form\",\n      onSubmit: e => handleSearch(e),\n      className: classes.root,}\n    \n      , React.createElement(IconButton, { disabled: true, type: \"submit\", 'aria-label': \"search\",}\n        , React.createElement(SearchIcon, null )\n      )\n      , React.createElement(InputBase, {\n        className: classes.input,\n        placeholder: \"Search in Backstage\"  ,\n        value: searchQuery,\n        onChange: e => handleSearch(e),\n        inputProps: { 'aria-label': 'search backstage' },}\n      )\n      , React.createElement(IconButton, { 'aria-label': \"search\", onClick: () => handleClearSearchBar(),}\n        , React.createElement(ClearButton, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { makeStyles, IconButton, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    width: '250px',\n    display: 'flex',\n  },\n  icon: {\n    margin: theme.spacing(-1, 0, 0, 0),\n  },\n}));\n\n\n\n\n\n\nexport const FiltersButton = ({\n  numberOfSelectedFilters,\n  handleToggleFilters,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.filters,}\n      , React.createElement(IconButton, {\n        className: classes.icon,\n        'aria-label': \"settings\",\n        onClick: handleToggleFilters,}\n      \n        , React.createElement(FilterListIcon, null )\n      )\n      , React.createElement(Typography, { variant: \"h6\",}, \"Filters (\"\n         , numberOfSelectedFilters ? numberOfSelectedFilters : 0, \")\"\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  makeStyles,\n  Typography,\n  Divider,\n  Card,\n  CardHeader,\n  Button,\n  CardContent,\n  Select,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemText,\n  MenuItem,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    background: 'transparent',\n    boxShadow: '0px 0px 0px 0px',\n  },\n  checkbox: {\n    padding: theme.spacing(0, 1, 0, 1),\n  },\n  dropdown: {\n    width: '100%',\n  },\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const Filters = ({\n  filters,\n  filterOptions,\n  resetFilters,\n  updateSelected,\n  updateChecked,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement(Card, { className: classes.filters,}\n      , React.createElement(CardHeader, {\n        title: React.createElement(Typography, { variant: \"h6\",}, \"Filters\"),\n        action: \n          React.createElement(Button, { color: \"primary\", onClick: () => resetFilters(),}, \"CLEAR ALL\"\n\n          )\n        ,}\n      )\n      , React.createElement(Divider, null )\n      , filterOptions.kind.length === 0 && filterOptions.lifecycle.length === 0 && (\n        React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"subtitle2\",}, \"Filters cannot be applied to available results\"\n\n          )\n        )\n      )\n      , filterOptions.kind.length > 0 && (\n        React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"subtitle2\",}, \"Kind\")\n          , React.createElement(Select, {\n            id: \"outlined-select\",\n            onChange: (e) =>\n              updateSelected(e?.target?.value)\n            ,\n            variant: \"outlined\",\n            className: classes.dropdown,\n            value: filters.selected,}\n          \n            , filterOptions.kind.map(filter => (\n              React.createElement(MenuItem, {\n                selected: filter === '',\n                dense: true,\n                key: filter,\n                value: filter,}\n              \n                , filter\n              )\n            ))\n          )\n        )\n      )\n      , filterOptions.lifecycle.length > 0 && (\n        React.createElement(CardContent, null\n          , React.createElement(Typography, { variant: \"subtitle2\",}, \"Lifecycle\")\n          , React.createElement(List, { disablePadding: true, dense: true,}\n            , filterOptions.lifecycle.map(filter => (\n              React.createElement(ListItem, {\n                key: filter,\n                dense: true,\n                button: true,\n                onClick: () => updateChecked(filter),}\n              \n                , React.createElement(Checkbox, {\n                  edge: \"start\",\n                  disableRipple: true,\n                  className: classes.checkbox,\n                  color: \"primary\",\n                  checked: filters.checked.includes(filter),\n                  tabIndex: -1,\n                  value: filter,\n                  name: filter,}\n                )\n                , React.createElement(ListItemText, { id: filter, primary: filter,} )\n              )\n            ))\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useEffect, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\n\nimport { Filters, FiltersButton, } from './Filters';\nimport { DEFAULT_NAMESPACE } from '@backstage/catalog-model';\n\nimport {\n  EmptyState,\n  Link,\n  Progress,\n  Table,\n\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  searchQuery: {\n    color: theme.palette.text.primary,\n    background: theme.palette.background.default,\n    borderRadius: '10%',\n  },\n  tableHeader: {\n    margin: theme.spacing(1, 0, 0, 0),\n    display: 'flex',\n  },\n  divider: {\n    width: '1px',\n    margin: theme.spacing(0, 2),\n    padding: theme.spacing(2, 0),\n  },\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n// TODO: move out column to make the search result component more generic\nconst columns = [\n  {\n    title: 'Name',\n    field: 'name',\n    highlight: true,\n    render: (result) => (\n      React.createElement(Link, { to: result.url || '',}, result.name)\n    ),\n  },\n  {\n    title: 'Description',\n    field: 'description',\n  },\n  {\n    title: 'Owner',\n    field: 'owner',\n  },\n  {\n    title: 'Kind',\n    field: 'kind',\n  },\n  {\n    title: 'LifeCycle',\n    field: 'lifecycle',\n  },\n];\n\nconst TableHeader = ({\n  searchQuery,\n  numberOfSelectedFilters,\n  numberOfResults,\n  handleToggleFilters,\n}) => {\n  const classes = useStyles();\n\n  return (\n    React.createElement('div', { className: classes.tableHeader,}\n      , React.createElement(FiltersButton, {\n        numberOfSelectedFilters: numberOfSelectedFilters,\n        handleToggleFilters: handleToggleFilters,}\n      )\n      , React.createElement(Divider, { className: classes.divider, orientation: \"vertical\",} )\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , searchQuery ? (\n          React.createElement(Typography, { variant: \"h6\",}\n            , `${numberOfResults} `\n            , numberOfResults > 1 ? `results for ` : `result for `\n            , React.createElement('span', { className: classes.searchQuery,}, \"\\\"\", searchQuery, \"\\\"\"), ' '\n          )\n        ) : (\n          React.createElement(Typography, { variant: \"h6\",}, `${numberOfResults} results`)\n        )\n      )\n    )\n  );\n};\n\nexport const SearchResult = ({ searchQuery }) => {\n  const catalogApi = useApi(catalogApiRef);\n\n  const [showFilters, toggleFilters] = useState(false);\n  const [selectedFilters, setSelectedFilters] = useState({\n    selected: '',\n    checked: [],\n  });\n\n  const [filteredResults, setFilteredResults] = useState([]);\n\n  const {\n    loading,\n    error,\n    value: results,\n  } = useAsync(async () => {\n    const entities = await catalogApi.getEntities();\n    return entities.items.map((entity) => ({\n      name: entity.metadata.name,\n      description: entity.metadata.description,\n      owner:\n        typeof entity.spec?.owner === 'string' ? entity.spec?.owner : undefined,\n      kind: entity.kind,\n      lifecycle:\n        typeof entity.spec?.lifecycle === 'string'\n          ? entity.spec?.lifecycle\n          : undefined,\n      url: `/catalog/${\n        entity.metadata.namespace?.toLocaleLowerCase('en-US') ||\n        DEFAULT_NAMESPACE\n      }/${entity.kind.toLocaleLowerCase('en-US')}/${entity.metadata.name}`,\n    }));\n  }, []);\n\n  useEffect(() => {\n    if (results) {\n      let withFilters = results;\n\n      // apply filters\n\n      // filter on selected\n      if (selectedFilters.selected !== '') {\n        withFilters = results.filter((result) =>\n          selectedFilters.selected.includes(result.kind),\n        );\n      }\n\n      // filter on checked\n      if (selectedFilters.checked.length > 0) {\n        withFilters = withFilters.filter(\n          (result) =>\n            result.lifecycle &&\n            selectedFilters.checked.includes(result.lifecycle),\n        );\n      }\n\n      // filter on searchQuery\n      if (searchQuery) {\n        withFilters = withFilters.filter(\n          (result) =>\n            result.name?.toLocaleLowerCase('en-US').includes(searchQuery) ||\n            result.name\n              ?.toLocaleLowerCase('en-US')\n              .includes(searchQuery.split(' ').join('-')) ||\n            result.description\n              ?.toLocaleLowerCase('en-US')\n              .includes(searchQuery),\n        );\n      }\n\n      setFilteredResults(withFilters);\n    }\n  }, [selectedFilters, searchQuery, results]);\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error) {\n    return (\n      React.createElement(Alert, { severity: \"error\",}, \"Error encountered while fetching search results. \"\n              , error.toString()\n      )\n    );\n  }\n  if (!results || results.length === 0) {\n    return React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\"    ,} );\n  }\n\n  const resetFilters = () => {\n    setSelectedFilters({\n      selected: '',\n      checked: [],\n    });\n  };\n\n  const updateSelected = (filter) => {\n    setSelectedFilters(prevState => ({\n      ...prevState,\n      selected: filter,\n    }));\n  };\n\n  const updateChecked = (filter) => {\n    if (selectedFilters.checked.includes(filter)) {\n      setSelectedFilters(prevState => ({\n        ...prevState,\n        checked: prevState.checked.filter(item => item !== filter),\n      }));\n      return;\n    }\n\n    setSelectedFilters(prevState => ({\n      ...prevState,\n      checked: [...prevState.checked, filter],\n    }));\n  };\n\n  const filterOptions = results.reduce(\n    (acc, curr) => {\n      if (curr.kind && acc.kind.indexOf(curr.kind) < 0) {\n        acc.kind.push(curr.kind);\n      }\n      if (curr.lifecycle && acc.lifecycle.indexOf(curr.lifecycle) < 0) {\n        acc.lifecycle.push(curr.lifecycle);\n      }\n      return acc;\n    },\n    {\n      kind: [] ,\n      lifecycle: [] ,\n    },\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Grid, { container: true,}\n        , showFilters && (\n          React.createElement(Grid, { item: true, xs: 3,}\n            , React.createElement(Filters, {\n              filters: selectedFilters,\n              filterOptions: filterOptions,\n              resetFilters: resetFilters,\n              updateSelected: updateSelected,\n              updateChecked: updateChecked,}\n            )\n          )\n        )\n        , React.createElement(Grid, { item: true, xs: showFilters ? 9 : 12,}\n          , React.createElement(Table, {\n            options: { paging: true, pageSize: 20, search: false },\n            data: filteredResults,\n            columns: columns,\n            title: \n              React.createElement(TableHeader, {\n                searchQuery: searchQuery,\n                numberOfResults: filteredResults.length,\n                numberOfSelectedFilters: \n                  (selectedFilters.selected !== '' ? 1 : 0) +\n                  selectedFilters.checked.length\n                ,\n                handleToggleFilters: () => toggleFilters(!showFilters),}\n              )\n            ,}\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Grid } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { SearchBar } from './LegacySearchBar';\nimport { SearchResult } from './LegacySearchResult';\nimport {\n  Content,\n  Header,\n  Page,\n  useQueryParamState,\n} from '@backstage/core-components';\n\n/**\n * @deprecated This SearchPage, powered directly by the Catalog API, will be\n * removed from a future release of this plugin.\n */\nexport const LegacySearchPage = () => {\n  const [queryString, setQueryString] = useQueryParamState('query');\n  const [searchQuery, setSearchQuery] = useState(queryString ?? '');\n\n  const handleSearch = (event) => {\n    event.preventDefault();\n    setSearchQuery(event.target.value);\n  };\n\n  useEffect(() => setSearchQuery(queryString ?? ''), [queryString]);\n\n  useDebounce(\n    () => {\n      setQueryString(searchQuery);\n    },\n    200,\n    [searchQuery],\n  );\n\n  const handleClearSearchBar = () => {\n    setSearchQuery('');\n  };\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , React.createElement(Header, { title: \"Search\",} )\n      , React.createElement(Content, null\n        , React.createElement(Grid, { container: true, direction: \"row\",}\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(SearchBar, {\n              handleSearch: handleSearch,\n              handleClearSearchBar: handleClearSearchBar,\n              searchQuery: searchQuery,}\n            )\n          )\n          , React.createElement(Grid, { item: true, xs: 12,}\n            , React.createElement(SearchResult, {\n              searchQuery: (queryString ?? '').toLocaleLowerCase('en-US'),}\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport qs from 'qs';\nimport { useLocation, useOutlet } from 'react-router';\nimport {\n  SearchContextProvider,\n  useSearch,\n} from '@backstage/plugin-search-react';\n\nimport { LegacySearchPage } from '../LegacySearchPage';\n\nexport const UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters,\n  } = useSearch();\n\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    // Only respond to changes to url query params\n    if (location.search === prevQueryParams) {\n      return;\n    }\n\n    const query =\n      qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n\n    if (query.filters) {\n      setFilters(query.filters );\n    }\n\n    if (query.query) {\n      setTerm(query.query );\n    }\n\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor );\n    }\n\n    if (query.types) {\n      setTypes(query.types );\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters,\n      },\n      { arrayFormat: 'brackets' },\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n\n    // We directly manipulate window history here in order to not re-render\n    // infinitely (state => location => state => etc). The intention of this\n    // code is just to ensure the right query/filters are loaded when a user\n    // clicks the \"back\" button after clicking a result.\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n\n  return null;\n};\n\nexport const SearchPage = () => {\n  const outlet = useOutlet();\n\n  return (\n    React.createElement(SearchContextProvider, null\n      , React.createElement(UrlUpdater, null )\n      , outlet || React.createElement(LegacySearchPage, null )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  EmptyState,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\n\nimport React from 'react';\nimport { useSearch } from '@backstage/plugin-search-react';\n\n\n\n\n\nexport const SearchResultComponent = ({ children }) => {\n  const {\n    result: { loading, error, value },\n  } = useSearch();\n\n  if (loading) {\n    return React.createElement(Progress, null );\n  }\n  if (error) {\n    return (\n      React.createElement(ResponseErrorPanel, {\n        title: \"Error encountered while fetching search results\"     ,\n        error: error,}\n      )\n    );\n  }\n\n  if (!value?.results.length) {\n    return React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\"    ,} );\n  }\n\n  return React.createElement(React.Fragment, null, children({ results: value.results }));\n};\n\nexport { SearchResultComponent as SearchResult };\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Button, makeStyles } from '@material-ui/core';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport React from 'react';\nimport { useSearch } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0),\n  },\n}));\n\nexport const SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles();\n\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return React.createElement(React.Fragment, null);\n  }\n\n  return (\n    React.createElement('nav', { 'arial-label': \"pagination navigation\" , className: classes.root,}\n      , React.createElement(Button, {\n        'aria-label': \"previous page\" ,\n        disabled: !fetchPreviousPage,\n        onClick: fetchPreviousPage,\n        startIcon: React.createElement(ArrowBackIosIcon, null ),}\n      , \"Previous\"\n\n      )\n\n      , React.createElement(Button, {\n        'aria-label': \"next page\" ,\n        disabled: !fetchNextPage,\n        onClick: fetchNextPage,\n        endIcon: React.createElement(ArrowForwardIosIcon, null ),}\n      , \"Next\"\n\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ResponseError } from '@backstage/errors';\n\n\n\nimport qs from 'qs';\n\nexport class SearchClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options\n\n\n) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  async query(query) {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\n      'search/query',\n    )}?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {},\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return response.json();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SearchClient } from './apis';\nimport { searchApiRef } from '@backstage/plugin-search-react';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  createRoutableExtension,\n  discoveryApiRef,\n  createComponentExtension,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'search',\n});\n\nexport const rootNextRouteRef = createRouteRef({\n  id: 'search:next',\n});\n\nexport const searchPlugin = createPlugin({\n  id: 'search',\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      },\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n    nextRoot: rootNextRouteRef,\n  },\n});\n\nexport const SearchPage = searchPlugin.provide(\n  createRoutableExtension({\n    name: 'SearchPage',\n    component: () => import('./components/SearchPage').then(m => m.SearchPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchPage /> component instead. This component will be removed in an\n * upcoming release.\n */\nexport const SearchPageNext = searchPlugin.provide(\n  createRoutableExtension({\n    name: 'SearchPageNext',\n    component: () => import('./components/SearchPage').then(m => m.SearchPage),\n    mountPoint: rootNextRouteRef,\n  }),\n);\n\nexport const SearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchBar',\n    component: {\n      lazy: () => import('./components/SearchBar').then(m => m.SearchBar),\n    },\n  }),\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchBar /> component instead. This component will be removed in an\n * upcoming release.\n */\nexport const SearchBarNext = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchBarNext',\n    component: {\n      lazy: () => import('./components/SearchBar').then(m => m.SearchBar),\n    },\n  }),\n);\n\nexport const SearchResult = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchResult',\n    component: {\n      lazy: () => import('./components/SearchResult').then(m => m.SearchResult),\n    },\n  }),\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchResult /> component instead. This component will be removed in an\n * upcoming release.\n */\nexport const SearchResultNext = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchResultNext',\n    component: {\n      lazy: () => import('./components/SearchResult').then(m => m.SearchResult),\n    },\n  }),\n);\n\nexport const SidebarSearchModal = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SidebarSearchModal',\n    component: {\n      lazy: () =>\n        import('./components/SidebarSearchModal').then(\n          m => m.SidebarSearchModal,\n        ),\n    },\n  }),\n);\n\nexport const DefaultResultListItem = searchPlugin.provide(\n  createComponentExtension({\n    name: 'DefaultResultListItem',\n    component: {\n      lazy: () =>\n        import('./components/DefaultResultListItem').then(\n          m => m.DefaultResultListItem,\n        ),\n    },\n  }),\n);\n\nexport const HomePageSearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: 'HomePageSearchBar',\n    component: {\n      lazy: () =>\n        import('./components/HomePageComponent').then(m => m.HomePageSearchBar),\n    },\n  }),\n);\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport mockData from './sentry-issue-mock.json';\n\nfunction getMockIssue() {\n  const randomizedStats = {\n    '24h': new Array(24)\n      .fill(0)\n      .map(() => [0, Math.floor(Math.random() * 100)]),\n  };\n  return {\n    ...mockData,\n    userCount: Math.floor(Math.random() * 1000),\n    stats: randomizedStats,\n  };\n}\nfunction getMockIssues(number) {\n  return new Array(number).fill(0).map(getMockIssue);\n}\nexport class MockSentryApi  {\n  fetchIssues() {\n    return new Promise(resolve => {\n      setTimeout(() => resolve(getMockIssues(14)), 800);\n    });\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const sentryApiRef = createApiRef({\n  id: 'plugin.sentry.service',\n});\n\n\n\n\n\n\n\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class ProductionSentryApi  {\n  constructor(\n      discoveryApi,\n      organization,\n      identityApi,\n  ) {;this.discoveryApi = discoveryApi;this.organization = organization;this.identityApi = identityApi;}\n\n  async fetchIssues(\n    project,\n    statsFor,\n    query,\n  ) {\n    if (!project) {\n      return [];\n    }\n\n    const apiUrl = `${await this.discoveryApi.getBaseUrl('proxy')}/sentry/api`;\n    const options = await this.authOptions();\n\n    const queryPart = query ? `&query=${query}` : '';\n\n    const response = await fetch(\n      `${apiUrl}/0/projects/${this.organization}/${project}/issues/?statsPeriod=${statsFor}${queryPart}`,\n      options,\n    );\n\n    if (response.status >= 400 && response.status < 600) {\n      throw new Error('Failed fetching Sentry issues');\n    }\n\n    return (await response.json()) ;\n  }\n\n   async authOptions() {\n    if (!this.identityApi) {\n      return {};\n    }\n    const { token } = await this.identityApi.getCredentials();\n    return {\n      headers: {\n        authorization: `Bearer ${token}`,\n      },\n    };\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Link } from '@backstage/core-components';\n\nfunction stripText(text, maxLength) {\n  return text.length > maxLength ? `${text.substr(0, maxLength)}...` : text;\n}\nconst useStyles = makeStyles(theme => ({\n  root: {\n    minWidth: 260,\n    position: 'relative',\n    '&::before': {\n      left: -16,\n      position: 'absolute',\n      width: '4px',\n      height: '100%',\n      content: '\"\"',\n      backgroundColor: theme.palette.status.error,\n      borderRadius: 2,\n    },\n  },\n  text: {\n    marginBottom: 0,\n  },\n}));\n\nexport const ErrorCell = ({ sentryIssue }) => {\n  const classes = useStyles();\n  let issueType = '[No Type]';\n  if (sentryIssue.metadata.type) {\n    issueType = sentryIssue.metadata.type;\n  } else if (sentryIssue.title) {\n    issueType = sentryIssue.title;\n  }\n\n  return (\n    React.createElement('div', { className: classes.root,}\n      , React.createElement(Link, { to: sentryIssue.permalink,}\n        , React.createElement(Typography, { variant: \"body1\", gutterBottom: true, className: classes.text,}\n          , stripText(issueType, 28)\n        )\n      )\n      , React.createElement(Typography, {\n        variant: \"caption\",\n        display: \"block\",\n        gutterBottom: true,\n        className: classes.text,}\n      \n        , sentryIssue.metadata.value &&\n          stripText(sentryIssue.metadata.value, 48)\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { Sparklines, SparklinesBars } from 'react-sparklines';\n\nexport const ErrorGraph = ({ sentryIssue }) => {\n  const data =\n    '14d' in sentryIssue.stats\n      ? sentryIssue.stats['14d']\n      : sentryIssue.stats['24h'];\n\n  return (\n    React.createElement(Sparklines, { data: data?.map(([, val]) => val), svgHeight: 48, margin: 4,}\n      , React.createElement(SparklinesBars, null )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { DateTime } from 'luxon';\nimport { ErrorCell } from '../ErrorCell/ErrorCell';\nimport { ErrorGraph } from '../ErrorGraph/ErrorGraph';\nimport { Table, } from '@backstage/core-components';\n\n\nconst columns = [\n  {\n    title: 'Error',\n    render: data => React.createElement(ErrorCell, { sentryIssue: data ,} ),\n  },\n  {\n    title: 'Graph',\n    render: data => React.createElement(ErrorGraph, { sentryIssue: data ,} ),\n  },\n  {\n    title: 'First seen',\n    field: 'firstSeen',\n    render: data => {\n      const { firstSeen } = data ;\n\n      return DateTime.fromISO(firstSeen).toRelative({ locale: 'en' });\n    },\n  },\n  {\n    title: 'Last seen',\n    field: 'lastSeen',\n    render: data => {\n      const { lastSeen } = data ;\n      return DateTime.fromISO(lastSeen).toRelative({ locale: 'en' });\n    },\n  },\n  {\n    title: 'Events',\n    field: 'count',\n  },\n  {\n    title: 'Users',\n    field: 'userCount',\n  },\n];\n\n\n\n\n\n\n\nconst SentryIssuesTable = ({\n  sentryIssues,\n  statsFor,\n  tableOptions,\n}) => {\n  return (\n    React.createElement(Table, {\n      columns: columns,\n      options: tableOptions,\n      title: \"Sentry issues\" ,\n      subtitle: statsFor ? `Last ${statsFor}` : undefined,\n      data: sentryIssues,}\n    )\n  );\n};\n\nexport default SentryIssuesTable;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const SENTRY_PROJECT_SLUG_ANNOTATION = 'sentry.io/project-slug';\n\nexport const useProjectSlug = (entity) => {\n  return entity?.metadata.annotations?.[SENTRY_PROJECT_SLUG_ANNOTATION] ?? '';\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React, { useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { sentryApiRef } from '../../api';\nimport SentryIssuesTable from '../SentryIssuesTable/SentryIssuesTable';\nimport {\n  SENTRY_PROJECT_SLUG_ANNOTATION,\n  useProjectSlug,\n} from '../useProjectSlug';\n\nimport {\n  EmptyState,\n  InfoCard,\n\n  MissingAnnotationEmptyState,\n  Progress,\n} from '@backstage/core-components';\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\n\nexport const SentryIssuesWidget = ({\n  entity,\n  statsFor,\n  tableOptions,\n  variant = 'gridItem',\n  query = '',\n}\n\n\n\n\n\n) => {\n  const errorApi = useApi(errorApiRef);\n  const sentryApi = useApi(sentryApiRef);\n\n  const projectId = useProjectSlug(entity);\n\n  const { loading, value, error } = useAsync(\n    () => sentryApi.fetchIssues(projectId, statsFor, query),\n    [sentryApi, statsFor, projectId, query],\n  );\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  if (loading || !projectId || error) {\n    return (\n      React.createElement(InfoCard, { title: \"Sentry issues\" , variant: variant,}\n        , loading && React.createElement(Progress, null )\n\n        , !loading && !projectId && (\n          React.createElement(MissingAnnotationEmptyState, {\n            annotation: SENTRY_PROJECT_SLUG_ANNOTATION,}\n          )\n        )\n\n        , !loading && error && (\n          React.createElement(EmptyState, {\n            missing: \"info\",\n            title: \"No information to display\"   ,\n            description: `There is no Sentry project with id '${projectId}'.`,}\n          )\n        )\n      )\n    );\n  }\n\n  return (\n    React.createElement(SentryIssuesTable, {\n      sentryIssues: value || [],\n      statsFor: statsFor,\n      tableOptions: tableOptions,}\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { pageTheme } from '@backstage/theme';\nimport ObservableImpl from 'zen-observable';\nimport { v4 as uuid } from 'uuid';\n\n\n\n\n/**\n * Implementation of the ShortcutApi that uses the StorageApi to store shortcuts.\n */\nexport class LocalStoredShortcuts  {\n  constructor(  storageApi) {;this.storageApi = storageApi;}\n\n  shortcut$() {\n    return this.observable;\n  }\n\n  async add(shortcut) {\n    const shortcuts = this.get();\n    shortcuts.push({ ...shortcut, id: uuid() });\n\n    await this.storageApi.set('items', shortcuts);\n    this.notify();\n  }\n\n  async remove(id) {\n    const shortcuts = this.get().filter(s => s.id !== id);\n\n    await this.storageApi.set('items', shortcuts);\n    this.notify();\n  }\n\n  async update(shortcut) {\n    const shortcuts = this.get().filter(s => s.id !== shortcut.id);\n    shortcuts.push(shortcut);\n\n    await this.storageApi.set('items', shortcuts);\n    this.notify();\n  }\n\n  getColor(url) {\n    const type = url.split('/')[1];\n    const theme =\n      this.THEME_MAP[type] ??\n      (Object.keys(pageTheme).includes(type) ? type : 'tool');\n\n    return pageTheme[theme].colors[0];\n  }\n\n   subscribers = new Set\n\n();\n\n    observable = new ObservableImpl(subscriber => {\n    subscriber.next(this.get());\n    this.subscribers.add(subscriber);\n\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n    THEME_MAP = {\n    catalog: 'home',\n    docs: 'documentation',\n  };\n\n   get() {\n    return Array.from(\n      this.storageApi.snapshot('items').value ?? [],\n    ).sort((a, b) => (a.title >= b.title ? 1 : -1));\n  }\n\n   notify() {\n    for (const subscription of this.subscribers) {\n      subscription.next(this.get());\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\nexport const shortcutsApiRef = createApiRef({\n  id: 'plugin.shortcuts.api',\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * {@link @backstage/core-plugin-api#ApiRef} for the {@link TechRadarApi}\n */\nexport const techRadarApiRef = createApiRef(\n  {\n    id: 'plugin.techradar.service',\n  },\n);\n\n/**\n * Tech Radar API responsible for loading data for the plugin\n *\n * @remarks\n *\n * This should be implemented by user, as {@link https://github.com/backstage/backstage/blob/master/plugins/tech-radar/src/sample.ts | default}\n * serves only some static data for example purposes\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Indicates how {@link RadarEntry} moved though {@link RadarRing} on {@link RadarEntry.timeline}\n */\nexport var MovedState; (function (MovedState) {\n  /**\n   * Moved down\n   */\n  const Down = -1; MovedState[MovedState[\"Down\"] = Down] = \"Down\";\n  /**\n   * Didn't move\n   */\n  const NoChange = 0; MovedState[MovedState[\"NoChange\"] = NoChange] = \"NoChange\";\n  /**\n   * Move up\n   */\n  const Up = 1; MovedState[MovedState[\"Up\"] = Up] = \"Up\";\n})(MovedState || (MovedState = {}));\n\n/*\n * Types related to data collection for the Radar.\n */\n\n/**\n * Response from {@link TechRadarApi}\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*\n * Set up the Radar as a Backstage component.\n */\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles, } from '@material-ui/core';\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  ring: {\n    fill: 'none',\n    stroke: '#bbb',\n    strokeWidth: '1px',\n  },\n  axis: {\n    fill: 'none',\n    stroke: '#bbb',\n    strokeWidth: '1px',\n  },\n  text: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    fill: theme.palette.text.primary,\n    fontSize: '25px',\n    fontWeight: 800,\n  },\n}));\n\n// A component for the background grid of the radar, with axes, rings etc.  It will render around the origin, i.e.\n// assume that (0, 0) is in the middle of the drawing.\nconst RadarGrid = (props) => {\n  const { radius, rings } = props;\n  const classes = useStyles(props);\n\n  const makeRingNode = (ringIndex, ringRadius) => [\n    React.createElement('circle', {\n      key: `c${ringIndex}`,\n      cx: 0,\n      cy: 0,\n      r: ringRadius,\n      className: classes.ring,}\n    ),\n    React.createElement('text', {\n      key: `t${ringIndex}`,\n      y: ringRadius !== undefined ? -ringRadius + 42 : undefined,\n      textAnchor: \"middle\",\n      className: classes.text,}\n    \n      , rings[ringIndex].name\n    ),\n  ];\n\n  const axisNodes = [\n    // X axis\n    React.createElement('line', {\n      key: \"x\",\n      x1: 0,\n      y1: -radius,\n      x2: 0,\n      y2: radius,\n      className: classes.axis,\n      'data-testid': \"radar-grid-x-line\",}\n    ),\n    // Y axis\n    React.createElement('line', {\n      key: \"y\",\n      x1: -radius,\n      y1: 0,\n      x2: radius,\n      y2: 0,\n      className: classes.axis,\n      'data-testid': \"radar-grid-y-line\",}\n    ),\n  ];\n\n  const ringNodes = rings\n    .map(r => r.outerRadius)\n    .map((ringRadius, ringIndex) => makeRingNode(ringIndex, ringRadius));\n\n  return React.createElement(React.Fragment, null, axisNodes.concat(...ringNodes));\n};\n\nexport default RadarGrid;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Link } from '@backstage/core-components';\nimport React from 'react';\n\n\n\n\n\n\n\nexport function isValidUrl(url) {\n  return Boolean(url && url !== '#' && url.length > 0);\n}\n\nexport const WithLink = ({\n  url,\n  className,\n  children,\n}) =>\n  isValidUrl(url) ? (\n    React.createElement(Link, { className: className, to: url,}\n      , children\n    )\n  ) : (\n    React.createElement(React.Fragment, null, children)\n  );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Button, DialogActions, DialogContent } from '@material-ui/core';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { Link, MarkdownContent } from '@backstage/core-components';\nimport { isValidUrl } from '../../utils/components';\n\n\n\n\n\n\n\n\n\nconst RadarDescription = (props) => {\n  const { open, onClose, title, description, url } = props;\n\n  return (\n    React.createElement(Dialog, { 'data-testid': \"radar-description\", open: open, onClose: onClose,}\n      , React.createElement(DialogTitle, { 'data-testid': \"radar-description-dialog-title\",}\n        , title\n      )\n      , React.createElement(DialogContent, { dividers: true,}\n        , React.createElement(MarkdownContent, { content: description,} )\n      )\n      , isValidUrl(url) && (\n        React.createElement(DialogActions, null\n          , React.createElement(Button, {\n            component: Link,\n            to: url,\n            onClick: onClose,\n            color: \"primary\",\n            startIcon: React.createElement(LinkIcon, null ),}\n          , \"LEARN MORE\"\n\n          )\n        )\n      )\n    )\n  );\n};\n\nexport { RadarDescription };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles, } from '@material-ui/core';\nimport { WithLink } from '../../utils/components';\nimport { RadarDescription } from '../RadarDescription';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(() => ({\n  text: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    fontSize: '9px',\n    fill: '#fff',\n    textAnchor: 'middle',\n  },\n\n  link: {\n    cursor: 'pointer',\n  },\n}));\n\nconst makeBlip = (color, moved) => {\n  const style = { fill: color };\n\n  let blip = React.createElement('circle', { r: 9, style: style,} );\n  if (moved && moved > 0) {\n    blip = React.createElement('path', { d: \"M -11,5 11,5 0,-13 z\"    , style: style,} ); // triangle pointing up\n  } else if (moved && moved < 0) {\n    blip = React.createElement('path', { d: \"M -11,-5 11,-5 0,13 z\"    , style: style,} ); // triangle pointing down\n  }\n\n  return blip;\n};\n\nconst RadarEntry = (props) => {\n  const classes = useStyles(props);\n  const [open, setOpen] = React.useState(false);\n\n  const {\n    moved,\n    description,\n    title,\n    color,\n    url,\n    value,\n    x,\n    y,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n  } = props;\n\n  const blip = makeBlip(color, moved);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const toggle = () => {\n    setOpen(!open);\n  };\n\n  return (\n    React.createElement('g', {\n      transform: `translate(${x}, ${y})`,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      'data-testid': \"radar-entry\",}\n    \n      , ' '\n      , open && (\n        React.createElement(RadarDescription, {\n          open: open,\n          onClose: handleClose,\n          title: title ? title : 'no title',\n          description: description ? description : 'no description',\n          url: url,}\n        )\n      )\n      , description ? (\n        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n        React.createElement('a', {\n          className: classes.link,\n          onClick: handleClickOpen,\n          role: \"button\",\n          href: \"#\",\n          tabIndex: 0,\n          onKeyPress: toggle,}\n        \n          , blip\n        )\n      ) : (\n        React.createElement(WithLink, { url: url, className: classes.link,}\n          , blip\n        )\n      )\n      , React.createElement('text', { y: 3, className: classes.text,}\n        , value\n      )\n    )\n  );\n};\n\nexport default RadarEntry;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useRef, useLayoutEffect } from 'react';\nimport { makeStyles, } from '@material-ui/core';\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(() => ({\n  bubble: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    opacity: 0,\n  },\n  visibleBubble: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    opacity: 0.8,\n  },\n  background: {\n    fill: '#333',\n  },\n  text: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    fontSize: '10px',\n    fill: '#fff',\n  },\n}));\n\nconst RadarBubble = (props) => {\n  const classes = useStyles(props);\n  const { visible, text } = props;\n\n  const textElem = useRef(null);\n  const svgElem = useRef(null);\n  const rectElem = useRef(null);\n  const pathElem = useRef(null);\n\n  const updatePosition = () => {\n    if (textElem.current) {\n      const { x, y } = props;\n      const bbox = textElem.current.getBBox();\n      const marginX = 5;\n      const marginY = 4;\n\n      if (svgElem.current) {\n        svgElem.current.setAttribute(\n          'transform',\n          `translate(${x - bbox.width / 2}, ${y - bbox.height - marginY})`,\n        );\n      }\n\n      if (rectElem.current) {\n        rectElem.current.setAttribute('x', String(-marginX));\n        rectElem.current.setAttribute('y', String(-bbox.height));\n        rectElem.current.setAttribute(\n          'width',\n          String(bbox.width + 2 * marginX),\n        );\n        rectElem.current.setAttribute('height', String(bbox.height + marginY));\n      }\n\n      if (pathElem.current) {\n        pathElem.current.setAttribute(\n          'transform',\n          `translate(${bbox.width / 2 - marginX}, ${marginY - 1})`,\n        );\n      }\n    }\n  };\n\n  useLayoutEffect(() => {\n    updatePosition();\n  });\n\n  return (\n    React.createElement('g', {\n      ref: svgElem,\n      x: 0,\n      y: 0,\n      className: visible ? classes.visibleBubble : classes.bubble,\n      'data-testid': \"radar-bubble\",}\n    \n      , React.createElement('rect', { ref: rectElem, rx: 4, ry: 4, className: classes.background,} )\n      , React.createElement('text', { ref: textElem, className: classes.text,}\n        , text\n      )\n      , React.createElement('path', {\n        ref: pathElem,\n        d: \"M 0,0 10,0 5,8 z\"    ,\n        className: classes.background,}\n      )\n    )\n  );\n};\n\nexport default RadarBubble;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  text: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    fontSize: '10px',\n    fill: theme.palette.text.secondary,\n  },\n}));\n\nconst RadarFooter = (props) => {\n  const { x, y } = props;\n  const classes = useStyles(props);\n\n  return (\n    React.createElement('text', {\n      'data-testid': \"radar-footer\",\n      transform: `translate(${x}, ${y})`,\n      className: classes.text,}\n    \n      , ' moved up\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0 moved down'\n    )\n  );\n};\n\nexport default RadarFooter;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles, } from '@material-ui/core';\nimport React from 'react';\nimport { WithLink } from '../../utils/components';\n\nimport { RadarDescription } from '../RadarDescription';\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  quadrantLegend: {\n    overflowY: 'auto',\n    scrollbarWidth: 'thin',\n  },\n  quadrant: {\n    height: '100%',\n    width: '100%',\n    scrollbarWidth: 'thin',\n    pointerEvents: 'none',\n  },\n  quadrantHeading: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    marginTop: 0,\n    marginBottom: theme.spacing(2),\n    fontSize: '18px',\n  },\n  rings: {\n    columns: 3,\n  },\n  ring: {\n    breakInside: 'avoid-column',\n    pageBreakInside: 'avoid',\n    '-webkit-column-break-inside': 'avoid',\n    fontSize: '12px',\n    marginBottom: theme.spacing(2),\n  },\n  ringEmpty: {\n    color: theme.palette.text.secondary,\n  },\n  ringHeading: {\n    pointerEvents: 'none',\n    userSelect: 'none',\n    marginTop: 0,\n    marginBottom: theme.spacing(1),\n    fontSize: '12px',\n    fontWeight: 800,\n  },\n  ringList: {\n    listStylePosition: 'inside',\n    marginTop: 0,\n    paddingLeft: 0,\n    fontVariantNumeric: 'proportional-nums',\n    '-moz-font-feature-settings': 'pnum',\n    '-webkit-font-feature-settings': 'pnum',\n    'font-feature-settings': 'pnum',\n  },\n  entry: {\n    pointerEvents: 'visiblePainted',\n    userSelect: 'none',\n    fontSize: '11px',\n  },\n  entryLink: {\n    pointerEvents: 'visiblePainted',\n  },\n}));\n\nconst RadarLegend = (props) => {\n  const classes = useStyles(props);\n\n  const getSegment = (\n    segmented,\n    quadrant,\n    ring,\n    ringOffset = 0,\n  ) => {\n    const quadrantIndex = quadrant.index;\n    const ringIndex = ring.index;\n    const segmentedData =\n      quadrantIndex === undefined ? {} : segmented[quadrantIndex] || {};\n    return ringIndex === undefined\n      ? []\n      : segmentedData[ringIndex + ringOffset] || [];\n  };\n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n  const RadarLegendLink = ({\n    url,\n    description,\n    title,\n  }) => {\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n      setOpen(true);\n    };\n\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const toggle = () => {\n      setOpen(!open);\n    };\n\n    if (description) {\n      return (\n        React.createElement(React.Fragment, null\n          , React.createElement('span', {\n            className: classes.entryLink,\n            onClick: handleClickOpen,\n            role: \"button\",\n            tabIndex: 0,\n            onKeyPress: toggle,}\n          \n            , React.createElement('span', { className: classes.entry,}, title)\n          )\n          , open && (\n            React.createElement(RadarDescription, {\n              open: open,\n              onClose: handleClose,\n              title: title ? title : 'no title',\n              url: url,\n              description: description,}\n            )\n          )\n        )\n      );\n    }\n    return (\n      React.createElement(WithLink, { url: url, className: classes.entryLink,}\n        , React.createElement('span', { className: classes.entry,}, title)\n      )\n    );\n  };\n\n  const RadarLegendRing = ({\n    ring,\n    entries,\n    onEntryMouseEnter,\n    onEntryMouseLeave,\n  }) => {\n    return (\n      React.createElement('div', { 'data-testid': \"radar-ring\", key: ring.id, className: classes.ring,}\n        , React.createElement('h3', { className: classes.ringHeading,}, ring.name)\n        , entries.length === 0 ? (\n          React.createElement('p', { className: classes.ringEmpty,}, \"(empty)\")\n        ) : (\n          React.createElement('ol', { className: classes.ringList,}\n            , entries.map(entry => (\n              React.createElement('li', {\n                key: entry.id,\n                value: (entry.index || 0) + 1,\n                onMouseEnter: \n                  onEntryMouseEnter && (() => onEntryMouseEnter(entry))\n                ,\n                onMouseLeave: \n                  onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n                ,}\n              \n                , React.createElement(RadarLegendLink, {\n                  url: entry.url,\n                  title: entry.title,\n                  description: entry.description,}\n                )\n              )\n            ))\n          )\n        )\n      )\n    );\n  };\n\n  \n\n\n\n\n\n\n\n  const RadarLegendQuadrant = ({\n    segments,\n    quadrant,\n    rings,\n    onEntryMouseEnter,\n    onEntryMouseLeave,\n  }) => {\n    return (\n      React.createElement('foreignObject', {\n        key: quadrant.id,\n        x: quadrant.legendX,\n        y: quadrant.legendY,\n        width: quadrant.legendWidth,\n        height: quadrant.legendHeight,\n        className: classes.quadrantLegend,\n        'data-testid': \"radar-quadrant\",}\n      \n        , React.createElement('div', { className: classes.quadrant,}\n          , React.createElement('h2', { className: classes.quadrantHeading,}, quadrant.name)\n          , React.createElement('div', { className: classes.rings,}\n            , rings.map(ring => (\n              React.createElement(RadarLegendRing, {\n                key: ring.id,\n                ring: ring,\n                entries: getSegment(segments, quadrant, ring),\n                onEntryMouseEnter: onEntryMouseEnter,\n                onEntryMouseLeave: onEntryMouseLeave,}\n              )\n            ))\n          )\n        )\n      )\n    );\n  };\n\n  const setupSegments = (entries) => {\n    const segments = {};\n\n    for (const entry of entries) {\n      const quadrantIndex = entry.quadrant.index;\n      const ringIndex = entry.ring.index;\n      let quadrantData = {};\n      if (quadrantIndex !== undefined) {\n        if (segments[quadrantIndex] === undefined) {\n          segments[quadrantIndex] = {};\n        }\n\n        quadrantData = segments[quadrantIndex];\n      }\n\n      let ringData = [];\n      if (ringIndex !== undefined) {\n        if (quadrantData[ringIndex] === undefined) {\n          quadrantData[ringIndex] = [];\n        }\n\n        ringData = quadrantData[ringIndex];\n      }\n\n      ringData.push(entry);\n    }\n\n    return segments;\n  };\n\n  const { quadrants, rings, entries, onEntryMouseEnter, onEntryMouseLeave } =\n    props;\n\n  const segments = setupSegments(entries);\n\n  return (\n    React.createElement('g', { 'data-testid': \"radar-legend\",}\n      , quadrants.map(quadrant => (\n        React.createElement(RadarLegendQuadrant, {\n          key: quadrant.id,\n          segments: segments,\n          quadrant: quadrant,\n          rings: rings,\n          onEntryMouseEnter: onEntryMouseEnter,\n          onEntryMouseLeave: onEntryMouseLeave,}\n        )\n      ))\n    )\n  );\n};\n\nexport default RadarLegend;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\n\nimport RadarGrid from '../RadarGrid';\nimport RadarEntry from '../RadarEntry';\nimport RadarBubble from '../RadarBubble';\nimport RadarFooter from '../RadarFooter';\nimport RadarLegend from '../RadarLegend';\n\n\n\n\n\n\n\n\n\n\n\n\n\n// A component that draws the radar circle.\nconst RadarPlot = (props) => {\n  const {\n    width,\n    height,\n    radius,\n    quadrants,\n    rings,\n    entries,\n    activeEntry,\n    onEntryMouseEnter,\n    onEntryMouseLeave,\n  } = props;\n\n  return (\n    React.createElement('g', { 'data-testid': \"radar-plot\",}\n      , React.createElement(RadarLegend, {\n        quadrants: quadrants,\n        rings: rings,\n        entries: entries,\n        onEntryMouseEnter: \n          onEntryMouseEnter && (entry => onEntryMouseEnter(entry))\n        ,\n        onEntryMouseLeave: \n          onEntryMouseLeave && (entry => onEntryMouseLeave(entry))\n        ,}\n      )\n      , React.createElement('g', { transform: `translate(${width / 2}, ${height / 2})`,}\n        , React.createElement(RadarGrid, { radius: radius, rings: rings,} )\n        , React.createElement(RadarFooter, { x: -0.5 * width, y: 0.5 * height,} )\n        , entries.map(entry => (\n          React.createElement(RadarEntry, {\n            key: entry.id,\n            x: entry.x || 0,\n            y: entry.y || 0,\n            color: entry.color || '',\n            value: (entry?.index || 0) + 1,\n            url: entry.url,\n            description: entry.description,\n            moved: entry.moved,\n            title: entry.title,\n            onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n            onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry)),}\n          )\n        ))\n        , React.createElement(RadarBubble, {\n          visible: !!activeEntry,\n          text: activeEntry?.title || '',\n          x: activeEntry?.x || 0,\n          y: activeEntry?.y || 0,}\n        )\n      )\n    )\n  );\n};\n\nexport default RadarPlot;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default class Segment {\n  constructor(quadrant, ring, radius, nextSeed) {\n    this.nextSeed = nextSeed;\n    this.polarMin = {\n      t: quadrant.radialMin,\n      r: ring.innerRadius,\n    };\n    this.polarMax = {\n      t: quadrant.radialMax,\n      r: ring.outerRadius,\n    };\n    this.cartesianMin = {\n      x: 15 * quadrant.offsetX,\n      y: 15 * quadrant.offsetY,\n    };\n    this.cartesianMax = {\n      x: radius * quadrant.offsetX,\n      y: radius * quadrant.offsetY,\n    };\n  }\n\n  clipx(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.x = cartesian(p).x;\n    return d.x;\n  }\n\n  clipy(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.y = cartesian(p).y;\n    return d.y;\n  }\n\n  random() {\n    return cartesian({\n      t: this._randomBetween(this.polarMin.t, this.polarMax.t),\n      r: this._normalBetween(this.polarMin.r, this.polarMax.r),\n    });\n  }\n\n  // custom random number generator, to make random sequence reproducible\n  // source: https://stackoverflow.com/questions/521295\n  _random() {\n    const x = Math.sin(this.nextSeed()) * 10000;\n    return x - Math.floor(x);\n  }\n\n  _randomBetween(min, max) {\n    return min + this._random() * (max - min);\n  }\n\n  _normalBetween(min, max) {\n    return min + (this._random() + this._random()) * 0.5 * (max - min);\n  }\n}\n\nfunction polar({ x, y }) {\n  return {\n    t: Math.atan2(y, x),\n    r: Math.sqrt(x * x + y * y),\n  };\n}\n\nfunction cartesian({ r, t }) {\n  return {\n    x: r * Math.cos(t),\n    y: r * Math.sin(t),\n  };\n}\n\nfunction boundedInterval(value, min, max) {\n  const low = Math.min(min, max);\n  const high = Math.max(min, max);\n  return Math.min(Math.max(value, low), high);\n}\n\nfunction boundedRing(polarValue, rMin, rMax) {\n  return {\n    t: polarValue.t,\n    r: boundedInterval(polarValue.r, rMin, rMax),\n  };\n}\n\nfunction boundedBox(point, min, max) {\n  return {\n    x: boundedInterval(point.x, min.x, max.x),\n    y: boundedInterval(point.y, min.y, max.y),\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport color from 'color';\nimport { forceCollide, forceSimulation } from 'd3-force';\nimport Segment from '../../utils/segment';\n\n\nexport const adjustQuadrants = (\n  quadrants,\n  radius,\n  width,\n  height,\n) => {\n  /*\n    0           1                             2           3  x stops index\n                                                         y stops index\n    0\n                       . -- ~~~ -- .                   \n                   .-~               ~-.               \n        <Q3>      /                     \\      <Q2>    \n                 /                       \\             \n    1\n    2\n                |                         |            \n                 \\                       /             \n        <Q1>      \\                     /      <Q0>    \n                   `-.               .-'               \n                       ~- . ___ . -~                   \n    3\n     */\n\n  const margin = 16;\n  const xStops = [\n    margin,\n    width / 2 - radius - margin,\n    width / 2 + radius + margin,\n    width - margin,\n  ];\n  const yStops = [margin, height / 2 - margin, height / 2, height - margin];\n\n  // The quadrant parameters correspond to Q[0..3] above.  They are in this order because of the\n  // original Zalando code; maybe we should refactor them to be in reverse order?\n  const legendParams = [\n    {\n      x: xStops[2],\n      y: yStops[2],\n      width: xStops[3] - xStops[2],\n      height: yStops[3] - yStops[2],\n    },\n    {\n      x: xStops[0],\n      y: yStops[2],\n      width: xStops[1] - xStops[0],\n      height: yStops[3] - yStops[2],\n    },\n    {\n      x: xStops[0],\n      y: yStops[0],\n      width: xStops[1] - xStops[0],\n      height: yStops[1] - yStops[0],\n    },\n    {\n      x: xStops[2],\n      y: yStops[0],\n      width: xStops[3] - xStops[2],\n      height: yStops[1] - yStops[0],\n    },\n  ];\n\n  quadrants.forEach((quadrant, index) => {\n    const legendParam = legendParams[index % 4];\n\n    quadrant.index = index;\n    quadrant.radialMin = (index * Math.PI) / 2;\n    quadrant.radialMax = ((index + 1) * Math.PI) / 2;\n    quadrant.offsetX = index % 4 === 0 || index % 4 === 3 ? 1 : -1;\n    quadrant.offsetY = index % 4 === 0 || index % 4 === 1 ? 1 : -1;\n    quadrant.legendX = legendParam.x;\n    quadrant.legendY = legendParam.y;\n    quadrant.legendWidth = legendParam.width;\n    quadrant.legendHeight = legendParam.height;\n  });\n};\n\nexport const adjustEntries = (\n  entries,\n  quadrants,\n  rings,\n  radius,\n  activeEntry,\n) => {\n  let seed = 42;\n  entries.forEach((entry, index) => {\n    const quadrant = quadrants.find(q => {\n      const match =\n        typeof entry.quadrant === 'object' ? entry.quadrant.id : entry.quadrant;\n      return q.id === match;\n    });\n    const ring = rings.find(r => {\n      const match = typeof entry.ring === 'object' ? entry.ring.id : entry.ring;\n      return r.id === match;\n    });\n\n    if (!quadrant) {\n      throw new Error(\n        `Unknown quadrant ${entry.quadrant} for entry ${entry.id}!`,\n      );\n    }\n    if (!ring) {\n      throw new Error(`Unknown ring ${entry.ring} for entry ${entry.id}!`);\n    }\n\n    entry.index = index;\n    entry.quadrant = quadrant;\n    entry.ring = ring;\n    entry.segment = new Segment(quadrant, ring, radius, () => seed++);\n    const point = entry.segment.random();\n    entry.x = point.x;\n    entry.y = point.y;\n    entry.active = activeEntry ? entry.id === activeEntry.id : false;\n    entry.color = entry.active\n      ? entry.ring.color\n      : color(entry.ring.color).desaturate(0.5).lighten(0.1).string();\n  });\n\n  const simulation = forceSimulation()\n    .nodes(entries)\n    .velocityDecay(0.19)\n    .force('collision', forceCollide().radius(12).strength(0.85))\n    .stop();\n\n  for (\n    let i = 0,\n      n = Math.ceil(\n        Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay()),\n      );\n    i < n;\n    ++i\n  ) {\n    simulation.tick();\n\n    for (const entry of entries) {\n      if (entry.segment) {\n        entry.x = entry.segment.clipx(entry);\n        entry.y = entry.segment.clipy(entry);\n      }\n    }\n  }\n};\n\nexport const adjustRings = (rings, radius) => {\n  rings.forEach((ring, index) => {\n    ring.index = index;\n    ring.outerRadius = ((index + 2) / (rings.length + 1)) * radius;\n    ring.innerRadius =\n      ((index === 0 ? 0 : index + 1) / (rings.length + 1)) * radius;\n  });\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useRef } from 'react';\nimport RadarPlot from '../RadarPlot';\n\nimport { adjustQuadrants, adjustRings, adjustEntries } from './utils';\n\n\n\n\n\n\n\n\n\n\nconst Radar = (props) => {\n  const { width, height, quadrants, rings, entries } = props;\n  const radius = Math.min(width, height) / 2;\n\n  const [activeEntry, setActiveEntry] = useState();\n  const node = useRef(null);\n\n  // TODO(dflemstr): most of this can be heavily memoized if performance becomes a problem\n  adjustQuadrants(quadrants, radius, width, height);\n  adjustRings(rings, radius);\n  adjustEntries(entries, quadrants, rings, radius, activeEntry);\n\n  return (\n    React.createElement('svg', { ref: node, width: width, height: height, ...props.svgProps,}\n      , React.createElement(RadarPlot, {\n        width: width,\n        height: height,\n        radius: radius,\n        entries: entries,\n        quadrants: quadrants,\n        rings: rings,\n        activeEntry: activeEntry,\n        onEntryMouseEnter: entry => setActiveEntry(entry),\n        onEntryMouseLeave: () => setActiveEntry(undefined),}\n      )\n    )\n  );\n};\n\nexport default Radar;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Progress } from '@backstage/core-components';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport React, { useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { techRadarApiRef, } from '../api';\nimport Radar from '../components/Radar';\n\n\nconst useTechRadarLoader = (id) => {\n  const errorApi = useApi(errorApiRef);\n  const techRadarApi = useApi(techRadarApiRef);\n\n  const { error, value, loading } = useAsync(\n    async () => techRadarApi.load(id),\n    [techRadarApi, id],\n  );\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  return { loading, value, error };\n};\n\nfunction matchFilter(filter) {\n  const terms = filter\n    ?.toLocaleLowerCase('en-US')\n    .split(/\\s/)\n    .map(e => e.trim())\n    .filter(Boolean);\n\n  if (!terms?.length) {\n    return () => true;\n  }\n\n  return entry => {\n    const text = `${entry.title} ${\n      entry.timeline[0]?.description || ''\n    }`.toLocaleLowerCase('en-US');\n    return terms.every(term => text.includes(term));\n  };\n}\n\n/**\n * Properties of {@link TechRadarComponent}\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Main React component of Tech Radar\n *\n * @remarks\n *\n * For advanced use cases. Typically, you want to use {@link TechRadarPage}\n */\nexport function RadarComponent(props) {\n  const { loading, error, value: data } = useTechRadarLoader(props.id);\n\n  const mapToEntries = (\n    loaderResponse,\n  ) => {\n    return loaderResponse.entries\n      .filter(matchFilter(props.searchText))\n      .map(entry => ({\n        id: entry.key,\n        quadrant: loaderResponse.quadrants.find(q => q.id === entry.quadrant),\n        title: entry.title,\n        ring: loaderResponse.rings.find(\n          r => r.id === entry.timeline[0].ringId,\n        ),\n        timeline: entry.timeline.map(e => {\n          return {\n            date: e.date,\n            ring: loaderResponse.rings.find(a => a.id === e.ringId),\n            description: e.description,\n            moved: e.moved,\n          };\n        }),\n        moved: entry.timeline[0].moved,\n        description: entry.description || entry.timeline[0].description,\n        url: entry.url,\n      }));\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , loading && React.createElement(Progress, null )\n      , !loading && !error && data && (\n        React.createElement(Radar, {\n          ...props,\n          rings: data.rings,\n          quadrants: data.quadrants,\n          entries: mapToEntries(data),}\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  Page,\n  SupportButton,\n  Link,\n} from '@backstage/core-components';\nimport { Grid, Input, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { RadarComponent, } from './RadarComponent';\n\nconst useStyles = makeStyles(() => ({\n  overflowXScroll: {\n    overflowX: 'scroll',\n  },\n}));\n\n/**\n * Properties for {@link TechRadarPage}\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Main Page of Tech Radar\n */\nexport function RadarPage(props) {\n  const {\n    title = 'Tech Radar',\n    subtitle = 'Pick the recommended technologies for your projects',\n    pageTitle = 'Company Radar',\n    ...componentProps\n  } = props;\n  const classes = useStyles();\n  const [searchText, setSearchText] = React.useState('');\n\n  return (\n    React.createElement(Page, { themeId: \"tool\",}\n      , React.createElement(Header, { title: title, subtitle: subtitle,} )\n      , React.createElement(Content, { className: classes.overflowXScroll,}\n        , React.createElement(ContentHeader, { title: pageTitle,}\n          , React.createElement(Input, {\n            id: \"tech-radar-filter\",\n            type: \"search\",\n            placeholder: \"Filter\",\n            onChange: e => setSearchText(e.target.value),}\n          )\n          , React.createElement(SupportButton, null\n            , React.createElement('p', null, \"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at\"\n\n\n\n               , ' '\n              , React.createElement(Link, { to: \"https://opensource.zalando.com/tech-radar/\",}, \"Zalando Tech Radar\"\n\n              ), \".\"\n\n            )\n          )\n        )\n        , React.createElement(Grid, { container: true, spacing: 3, direction: \"row\",}\n          , React.createElement(Grid, { item: true, xs: 12, sm: 6, md: 4,}\n            , React.createElement(RadarComponent, { searchText: searchText, ...componentProps,} )\n          )\n        )\n      )\n    )\n  );\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback } from 'react';\nimport { useOutlet } from 'react-router-dom';\n\nimport {\n  attachComponentData,\n  createReactExtension,\n\n\n  useElementFilter,\n} from '@backstage/core-plugin-api';\n\n\n\nexport const TECHDOCS_ADDONS_KEY = 'techdocs.addons.addon.v1';\n\n/**\n * Marks the <TechDocsAddons> registry component.\n * @public\n */\nexport const TECHDOCS_ADDONS_WRAPPER_KEY = 'techdocs.addons.wrapper.v1';\n\n/**\n * TechDocs Addon registry.\n * @public\n */\nexport const TechDocsAddons = () => null;\n\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\n\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase('en-US')}`;\n};\n\n/**\n * Create a TechDocs addon overload signature without props.\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Create a TechDocs addon implementation.\n * @public\n */\nexport function createTechDocsAddonExtension(\n  options,\n) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => React.createElement(TechDocsAddon, { ...props,} ),\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true,\n    },\n  });\n}\n\nconst getTechDocsAddonByName = (\n  collection,\n  key,\n) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\n\nconst getAllTechDocsAddons = (collection) => {\n  return collection\n    .selectByComponentData({\n      key: TECHDOCS_ADDONS_WRAPPER_KEY,\n    })\n    .selectByComponentData({\n      key: TECHDOCS_ADDONS_KEY,\n    });\n};\n\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection\n    .selectByComponentData({\n      key: TECHDOCS_ADDONS_WRAPPER_KEY,\n    })\n    .findComponentData({\n      key: TECHDOCS_ADDONS_KEY,\n    });\n};\n\n/**\n * hook to use addons in components\n * @public\n */\nexport const useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n\n  const findAddonByData = useCallback(\n    (data) => {\n      if (!collection || !data) return null;\n      const nameKey = getDataKeyByName(data.name);\n      return getTechDocsAddonByName(collection, nameKey) ?? null;\n    },\n    [collection],\n  );\n\n  const renderComponentByName = useCallback(\n    (name) => {\n      const data = options.find(option => option.name === name);\n      return data ? findAddonByData(data) : null;\n    },\n    [options, findAddonByData],\n  );\n\n  const renderComponentsByLocation = useCallback(\n    (location) => {\n      const data = options.filter(option => option.location === location);\n      return data.length ? data.map(findAddonByData) : null;\n    },\n    [options, findAddonByData],\n  );\n\n  return { renderComponentByName, renderComponentsByLocation };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n\n/**\n * API to talk to techdocs-backend.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Utility API reference for the {@link TechDocsApi}.\n *\n * @public\n */\nexport const techdocsApiRef = createApiRef({\n  id: 'plugin.techdocs.service',\n});\n\n/**\n * The outcome of a docs sync operation.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Utility API reference for the {@link TechDocsStorageApi}.\n *\n * @public\n */\nexport const techdocsStorageApiRef = createApiRef({\n  id: 'plugin.techdocs.storageservice',\n});\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n\n  useContext,\n  useState,\n  memo,\n\n} from 'react';\nimport useAsync, { } from 'react-use/lib/useAsync';\n\nimport {\n\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\n\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { techdocsApiRef } from './api';\n\n\nconst areEntityRefsEqual = (\n  prevEntityRef,\n  nextEntityRef,\n) => {\n  return (\n    stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef)\n  );\n};\n\n/**\n * @public type for the value of the TechDocsReaderPageContext\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultTechDocsReaderPageValue = {\n  title: '',\n  subtitle: '',\n  setTitle: () => {},\n  setSubtitle: () => {},\n  setShadowRoot: () => {},\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: '', name: '', namespace: '' },\n};\n\nconst TechDocsReaderPageContext = createVersionedContext\n\n('techdocs-reader-page-context');\n\n/**\n * render function for {@link TechDocsReaderPageProvider}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A context to store the reader page state\n * @public\n */\nexport const TechDocsReaderPageProvider = memo(\n  ({ entityRef, children }) => {\n    const techdocsApi = useApi(techdocsApiRef);\n\n    const metadata = useAsync(async () => {\n      return techdocsApi.getTechDocsMetadata(entityRef);\n    }, [entityRef]);\n\n    const entityMetadata = useAsync(async () => {\n      return techdocsApi.getEntityMetadata(entityRef);\n    }, [entityRef]);\n\n    const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n    const [subtitle, setSubtitle] = useState(\n      defaultTechDocsReaderPageValue.subtitle,\n    );\n    const [shadowRoot, setShadowRoot] = useState(\n      defaultTechDocsReaderPageValue.shadowRoot,\n    );\n\n    const value = {\n      metadata,\n      entityRef,\n      entityMetadata,\n      shadowRoot,\n      setShadowRoot,\n      title,\n      setTitle,\n      subtitle,\n      setSubtitle,\n    };\n    const versionedValue = createVersionedValueMap({ 1: value });\n\n    return (\n      React.createElement(TechDocsReaderPageContext.Provider, { value: versionedValue,}\n        , children instanceof Function ? children(value) : children\n      )\n    );\n  },\n  (prevProps, nextProps) => {\n    return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n  },\n);\n\n/**\n * Hook used to get access to shared state between reader page components.\n * @public\n */\nexport const useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n\n  if (versionedContext === undefined) {\n    return defaultTechDocsReaderPageValue;\n  }\n\n  const context = versionedContext.atVersion(1);\n  if (context === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return context;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Metadata for TechDocs page\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Locations for which TechDocs addons may be declared and rendered.\n * @public\n */\nexport const TechDocsAddonLocations = Object.freeze({\n  /**\n   * These addons fill up the header from the right, on the same line as the\n   * title.\n   */\n  Header: 'Header',\n\n  /**\n   * These addons appear below the header and above all content; tooling addons\n   * can be inserted for convenience.\n   */\n  Subheader: 'Subheader',\n\n  /**\n   * These addons are items added to the settings menu list and are designed to make\n   * the reader experience customizable, for example accessibility options\n   */\n  Settings: 'Settings',\n\n  /**\n   * These addons appear left of the content and above the navigation.\n   */\n  PrimarySidebar: 'PrimarySidebar',\n\n  /**\n   * These addons appear right of the content and above the table of contents.\n   */\n  SecondarySidebar: 'SecondarySidebar',\n\n  /**\n   * A virtual location which allows mutation of all content within the shadow\n   * root by transforming DOM nodes. These addons should return null on render.\n   */\n  Content: 'Content',\n\n  /**\n   * todo(backstage/community): This is a proposed virtual location which would\n   * help implement a common addon pattern in which many instances of a given\n   * element in markdown would be dynamically replaced at render-time based on\n   * attributes provided on that element, for example:\n   *\n   * ```md\n   * ## For Fun\n   * <TechDocsAddon>CatGif</TechDocsAddon>\n   *\n   * ## Component Metadata\n   * <TechDocsAddon entityRef=\"default:component/some-component-name\">CatalogEntityCard</TechDocsAddon>\n   *\n   * ## System Metadata\n   * <TechDocsAddon entityRef=\"default:system/some-system-name\">CatalogEntityCard</TechDocsAddon>\n   * ```\n   *\n   * Could correspond to a TechDocs addon named `CatalogEntityCard` with\n   * location `TechDocsAddonLocations.COMPONENT`, whose `component` would be\n   * the react component that would be rendered in place of all instances of\n   * the markdown illustrated above.\n   *\n   * The `@backstage/plugin-techdocs-react` package would need to be updated to, in\n   * cases where such addons had been registered, find all instances of the\n   * the `<TechDocsAddon>` tag whose `textContent` corresponded with the name of the\n   * addon, then replace them with component instances of the addon component,\n   * passing any attributes from the tag as props to the component.\n   */\n  // Component: 'Component',\n} );\n\n/**\n * Options for creating a TechDocs addon.\n * @public\n */\n\n\n\n\n\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  useState,\n  useEffect,\n  useCallback,\n} from 'react';\n\nimport { create } from 'jss';\nimport { StylesProvider, jssPreset } from '@material-ui/styles';\n\nimport { Progress } from '@backstage/core-components';\n\n/**\n * Name for the event dispatched when ShadowRoot styles are loaded.\n * @public\n */\nexport const SHADOW_DOM_STYLE_LOAD_EVENT = 'TECH_DOCS_SHADOW_DOM_STYLE_LOAD';\n\n/**\n * Dispatch style load event after all styles are loaded.\n * @param element - the ShadowRoot tree.\n */\nconst useShadowDomStylesEvents = (element) => {\n  useEffect(() => {\n    if (!element) {\n      return () => {};\n    }\n\n    const styles = element.querySelectorAll(\n      'head > link[rel=\"stylesheet\"]',\n    );\n\n    let count = styles?.length ?? 0;\n    const event = new CustomEvent(SHADOW_DOM_STYLE_LOAD_EVENT);\n\n    if (!count) {\n      element.dispatchEvent(event);\n      return () => {};\n    }\n\n    const handleLoad = () => {\n      if (--count === 0) {\n        element.dispatchEvent(event);\n      }\n    };\n\n    styles?.forEach(style => {\n      style.addEventListener('load', handleLoad);\n    });\n\n    return () => {\n      styles?.forEach(style => {\n        style.removeEventListener('load', handleLoad);\n      });\n    };\n  }, [element]);\n};\n\n/**\n * Returns the style's loading state.\n *\n * @example\n * Here's an example that updates the sidebar position only after styles are calculated:\n * ```jsx\n * import {\n *   TechDocsShadowDom,\n *   useShadowDomStylesLoading,\n * } from '@backstage/plugin-techdocs-react';\n *\n * export const TechDocsReaderPageContent = () => {\n *   // ...\n *   const dom = useTechDocsReaderDom(entity);\n *   const isStyleLoading = useShadowDomStylesLoading(dom);\n *\n *   const updateSidebarPosition = useCallback(() => {\n *     //...\n *   }, [dom]);\n *\n *   useEffect(() => {\n *     if (!isStyleLoading) {\n *       updateSidebarPosition();\n *     }\n *   }, [isStyleLoading, updateSidebarPosition]);\n *\n *   const handleDomAppend = useCallback(\n *     (newShadowRoot: ShadowRoot) => {\n *       setShadowRoot(newShadowRoot);\n *     },\n *     [setShadowRoot],\n *   );\n *\n *   return <TechDocsShadowDom element={dom} onAppend={handleDomAppend} />;\n * };\n * ```\n *\n * @param element - which is the ShadowRoot tree.\n * @returns a boolean value, true if styles are being loaded.\n * @public\n */\nexport const useShadowDomStylesLoading = (element) => {\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!element) return () => {};\n\n    setLoading(true);\n\n    const style = (element ).style;\n\n    style.setProperty('opacity', '0');\n\n    const handleLoad = () => {\n      setLoading(false);\n      style.setProperty('opacity', '1');\n    };\n\n    element.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n\n    return () => {\n      element.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    };\n  }, [element]);\n\n  return loading;\n};\n\n/**\n * Props for {@link TechDocsShadowDom}.\n *\n * @remarks\n * If you want to use portals to render Material UI components in the Shadow DOM,\n * you must render these portals as children because this component wraps its children in a Material UI StylesProvider\n * to ensure that Material UI styles are applied.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Renders a tree of elements in a Shadow DOM.\n *\n * @remarks\n * Centers the styles loaded event to avoid having multiple locations setting the opacity style in Shadow DOM causing the screen to flash multiple times,\n * so if you want to know when Shadow DOM styles are computed, you can listen for the \"TECH_DOCS_SHADOW_DOM_STYLE_LOAD\" event dispatched by the element tree.\n *\n * @example\n * Here is an example using this component and also listening for styles loaded event:\n *```jsx\n * import {\n *   TechDocsShadowDom,\n *   SHADOW_DOM_STYLE_LOAD_EVENT,\n * } from '@backstage/plugin-techdocs-react';\n *\n * export const TechDocsReaderPageContent = ({ entity }: TechDocsReaderPageContentProps) => {\n *   // ...\n *   const dom = useTechDocsReaderDom(entity);\n *\n *   useEffect(() => {\n *     const updateSidebarPosition = () => {\n *       // ...\n *     };\n *     dom?.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, updateSidebarPosition);\n *     return () => {\n *       dom?.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, updateSidebarPosition);\n *     };\n *   }, [dom]);\n *\n *   const handleDomAppend = useCallback(\n *     (newShadowRoot: ShadowRoot) => {\n *       setShadowRoot(newShadowRoot);\n *     },\n *     [setShadowRoot],\n *   );\n *\n *   return <TechDocsShadowDom element={dom} onAppend={handleDomAppend} />;\n * };\n * ```\n *\n * @param props - see {@link TechDocsShadowDomProps}.\n * @public\n */\nexport const TechDocsShadowDom = ({\n  element,\n  onAppend,\n  children,\n}) => {\n  const [jss, setJss] = useState(\n    create({\n      ...jssPreset(),\n      insertionPoint: undefined,\n    }),\n  );\n\n  useShadowDomStylesEvents(element);\n  const loading = useShadowDomStylesLoading(element);\n\n  const ref = useCallback(\n    (shadowHost) => {\n      if (!element || !shadowHost) return;\n\n      setJss(\n        create({\n          ...jssPreset(),\n          insertionPoint: element.querySelector('head') || undefined,\n        }),\n      );\n\n      let shadowRoot = shadowHost.shadowRoot;\n\n      if (!shadowRoot) {\n        shadowRoot = shadowHost.attachShadow({ mode: 'open' });\n      }\n\n      shadowRoot.replaceChildren(element);\n\n      if (typeof onAppend === 'function') {\n        onAppend(shadowRoot);\n      }\n    },\n    [element, onAppend],\n  );\n\n  return (\n    React.createElement(React.Fragment, null\n      , loading && React.createElement(Progress, null )\n      /* The sheetsManager={new Map()} is needed in order to deduplicate the injection of CSS in the page. */\n      , React.createElement(StylesProvider, { jss: jss, sheetsManager: new Map(),}\n        , React.createElement('div', { ref: ref, 'data-testid': \"techdocs-native-shadowroot\",} )\n        , children\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState, useEffect, useMemo } from 'react';\nimport debounce from 'lodash/debounce';\nimport { useTechDocsReaderPage } from './context';\n\n/**\n * Hook for use within TechDocs addons that provides access to the underlying\n * shadow root of the current page, allowing the DOM within to be mutated.\n * @public\n */\nexport const useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\n\n/**\n * Convenience hook for use within TechDocs addons that provides access to\n * elements that match a given selector within the shadow root.\n *\n * @public\n */\nexport const useShadowRootElements = \n\n(\n  selectors,\n) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot) return [];\n  return selectors\n    .map(selector => shadowRoot?.querySelectorAll(selector))\n    .filter(nodeList => nodeList.length)\n    .map(nodeList => Array.from(nodeList))\n    .flat();\n};\n\nconst isValidSelection = (newSelection) => {\n  // Safari sets the selection rect to top zero\n  return (\n    newSelection.toString() &&\n    newSelection.rangeCount &&\n    newSelection.getRangeAt(0).getBoundingClientRect().top\n  );\n};\n\n/**\n * Hook for retreiving a selection within the ShadowRoot.\n * @public\n */\nexport const useShadowRootSelection = (wait = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(\n    () =>\n      debounce(() => {\n        const shadowDocument = shadowRoot \n;\n        // Firefox and Safari don't implement getSelection for Shadow DOM\n        const newSelection = shadowDocument.getSelection\n          ? shadowDocument.getSelection()\n          : document.getSelection();\n\n        if (newSelection && isValidSelection(newSelection)) {\n          setSelection(newSelection);\n        } else {\n          setSelection(null);\n        }\n      }, wait),\n    [shadowRoot, setSelection, wait],\n  );\n\n  useEffect(() => {\n    window.document.addEventListener('selectionchange', handleSelectionChange);\n    return () =>\n      window.document.removeEventListener(\n        'selectionchange',\n        handleSelectionChange,\n      );\n  }, [handleSelectionChange]);\n\n  return selection;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\nimport { TechDocsReaderPage } from './plugin';\nimport { TechDocsReaderPageSubheader } from './reader/components/TechDocsReaderPageSubheader';\nimport { TechDocsReaderPageContent } from './reader/components/TechDocsReaderPageContent';\n\n\n\nexport const EntityPageDocs = ({ entity }) => {\n  const entityRef = getCompoundEntityRef(entity);\n\n  return (\n    React.createElement(TechDocsReaderPage, { entityRef: entityRef,}\n      , React.createElement(TechDocsReaderPageSubheader, null )\n      , React.createElement(TechDocsReaderPageContent, { withSearch: false,} )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Route, Routes, useRoutes } from 'react-router-dom';\n\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nimport { EntityPageDocs } from './EntityPageDocs';\nimport { TechDocsIndexPage } from './home/components/TechDocsIndexPage';\nimport { TechDocsReaderPage } from './reader/components/TechDocsReaderPage';\n\nconst TECHDOCS_ANNOTATION = 'backstage.io/techdocs-ref';\n\n/**\n * Helper that takes in entity and returns true/false if TechDocs is available for the entity\n *\n * @public\n */\nexport const isTechDocsAvailable = (entity) =>\n  Boolean(entity?.metadata?.annotations?.[TECHDOCS_ANNOTATION]);\n\n/**\n * Responsible for registering routes for TechDocs, TechDocs Homepage and separate TechDocs page\n *\n * @public\n */\nexport const Router = () => {\n  return (\n    React.createElement(Routes, null\n      , React.createElement(Route, { path: \"/\", element: React.createElement(TechDocsIndexPage, null ),} )\n      , React.createElement(Route, {\n        path: \"/:namespace/:kind/:name/*\",\n        element: React.createElement(TechDocsReaderPage, null ),}\n      )\n    )\n  );\n};\n\n/**\n * Responsible for registering route to view docs on Entity page\n *\n * @public\n */\nexport const EmbeddedDocsRouter = (props) => {\n  const { children } = props;\n  const { entity } = useEntity();\n\n  // Using objects instead of <Route> elements, otherwise \"outlet\" will be null on sub-pages and add-ons won't render\n  const element = useRoutes([\n    {\n      path: '/*',\n      element: React.createElement(EntityPageDocs, { entity: entity,} ),\n      children: [\n        {\n          path: '/*',\n          element: children,\n        },\n      ],\n    },\n  ]);\n\n  const projectId = entity.metadata.annotations?.[TECHDOCS_ANNOTATION];\n\n  if (!projectId) {\n    return React.createElement(MissingAnnotationEmptyState, { annotation: TECHDOCS_ANNOTATION,} );\n  }\n\n  return element;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { NotFoundError, ResponseError } from '@backstage/errors';\n\n\n\n\nimport { EventSourcePolyfill } from 'event-source-polyfill';\n\n\n/**\n * API to talk to `techdocs-backend`.\n *\n * @public\n */\nexport class TechDocsClient  {\n   configApi;\n   discoveryApi;\n   fetchApi;\n\n  constructor(options\n\n\n\n) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl('techdocs');\n  }\n\n  /**\n   * Retrieve TechDocs metadata.\n   *\n   * When docs are built, we generate a techdocs_metadata.json and store it along with the generated\n   * static files. It includes necessary data about the docs site. This method requests techdocs-backend\n   * which retrieves the TechDocs metadata.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getTechDocsMetadata(\n    entityId,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n\n    return await request.json();\n  }\n\n  /**\n   * Retrieve metadata about an entity.\n   *\n   * This method requests techdocs-backend which uses the catalog APIs to respond with filtered\n   * information required here.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getEntityMetadata(\n    entityId,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n\n    return await request.json();\n  }\n}\n\n/**\n * API which talks to TechDocs storage to fetch files to render.\n *\n * @public\n */\nexport class TechDocsStorageClient  {\n   configApi;\n   discoveryApi;\n   identityApi;\n   fetchApi;\n\n  constructor(options\n\n\n\n\n) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl('techdocs');\n  }\n\n  async getStorageUrl() {\n    return (\n      this.configApi.getOptionalString('techdocs.storageUrl') ??\n      `${await this.discoveryApi.getBaseUrl('techdocs')}/static/docs`\n    );\n  }\n\n  async getBuilder() {\n    return this.configApi.getString('techdocs.builder');\n  }\n\n  /**\n   * Fetch HTML content as text for an individual docs page in an entity's docs site.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param path - The unique path to an individual docs page e.g. overview/what-is-new\n   * @returns HTML content of the docs page as string\n   * @throws Throws error when the page is not found.\n   */\n  async getEntityDocs(\n    entityId,\n    path,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n\n    const request = await this.fetchApi.fetch(\n      `${url.endsWith('/') ? url : `${url}/`}index.html`,\n    );\n\n    let errorMessage = '';\n    switch (request.status) {\n      case 404:\n        errorMessage = 'Page not found. ';\n        // path is empty for the home page of an entity's docs site\n        if (!path) {\n          errorMessage +=\n            'This could be because there is no index.md file in the root of the docs directory of this repository.';\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage =\n          'Could not generate documentation or an error in the TechDocs backend. ';\n        throw new Error(errorMessage);\n      default:\n        // Do nothing\n        break;\n    }\n\n    return request.text();\n  }\n\n  /**\n   * Check if docs are on the latest version and trigger rebuild if not\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param logHandler - Callback to receive log messages from the build process\n   * @returns Whether documents are currently synchronized to newest version\n   * @throws Throws error on error from sync endpoint in Techdocs Backend\n   */\n  async syncEntityDocs(\n    entityId,\n    logHandler = () => {},\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n\n    return new Promise((resolve, reject) => {\n      // Polyfill is used to add support for custom headers and auth\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      });\n\n      source.addEventListener('log', (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n\n      source.addEventListener('finish', (e) => {\n        let updated = false;\n\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n\n        resolve(updated ? 'updated' : 'cached');\n      });\n\n      source.onerror = (e) => {\n        source.close();\n\n        switch (e.status) {\n          // the endpoint returned a 404 status\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n\n          // also handles the event-stream close. the reject is ignored if the Promise was already\n          // resolved by a finish event.\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n\n  async getBaseUrl(\n    oldBaseUrl,\n    entityId,\n    path,\n  ) {\n    const { kind, namespace, name } = entityId;\n\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n\n    return new URL(\n      oldBaseUrl,\n      newBaseUrl.endsWith('/') ? newBaseUrl : `${newBaseUrl}/`,\n    ).toString();\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Lower-case entity triplets by default, but allow override.\nexport function toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\n    'techdocs.legacyUseCaseSensitiveTripletPaths',\n  )\n    ? str\n    : str.toLocaleLowerCase('en-US');\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Content,\n  ContentHeader,\n  SupportButton,\n\n\n} from '@backstage/core-components';\nimport {\n  CatalogFilterLayout,\n  EntityListProvider,\n  EntityOwnerPicker,\n  EntityTagPicker,\n\n  UserListPicker,\n} from '@backstage/plugin-catalog-react';\nimport { TechDocsPageWrapper } from './TechDocsPageWrapper';\nimport { TechDocsPicker } from './TechDocsPicker';\nimport { EntityListDocsTable } from './Tables';\n\n/**\n * Props for {@link DefaultTechDocsHome}\n *\n * @public\n */\n\n\n\n\n\n\n/**\n * Component which renders a default documentation landing page.\n *\n * @public\n */\nexport const DefaultTechDocsHome = (props) => {\n  const { initialFilter = 'all', columns, actions } = props;\n  return (\n    React.createElement(TechDocsPageWrapper, null\n      , React.createElement(Content, null\n        , React.createElement(ContentHeader, { title: \"\",}\n          , React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\"\n\n          )\n        )\n        , React.createElement(EntityListProvider, null\n          , React.createElement(CatalogFilterLayout, null\n            , React.createElement(CatalogFilterLayout.Filters, null\n              , React.createElement(TechDocsPicker, null )\n              , React.createElement(UserListPicker, { initialFilter: initialFilter,} )\n              , React.createElement(EntityOwnerPicker, null )\n              , React.createElement(EntityTagPicker, null )\n            )\n            , React.createElement(CatalogFilterLayout.Content, null\n              , React.createElement(EntityListDocsTable, { actions: actions, columns: columns,} )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { rootDocsRouteRef } from '../../../routes';\nimport { toLowerMaybe } from '../../../helpers';\n\nimport { useApi, useRouteRef, configApiRef } from '@backstage/core-plugin-api';\nimport {\n  Button,\n  ItemCardGrid,\n  ItemCardHeader,\n} from '@backstage/core-components';\nimport { Card, CardActions, CardContent, CardMedia } from '@material-ui/core';\nimport React from 'react';\n\n/**\n * Props for {@link DocsCardGrid}\n *\n * @public\n */\n\n\n\n\n/**\n * Component which accepts a list of entities and renders a item card for each entity\n *\n * @public\n */\nexport const DocsCardGrid = (props) => {\n  const { entities } = props;\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities) return null;\n  return (\n    React.createElement(ItemCardGrid, { 'data-testid': \"docs-explore\",}\n      , !entities?.length\n        ? null\n        : entities.map((entity, index) => (\n            React.createElement(Card, { key: index,}\n              , React.createElement(CardMedia, null\n                , React.createElement(ItemCardHeader, {\n                  title: entity.metadata.title ?? entity.metadata.name,}\n                )\n              )\n              , React.createElement(CardContent, null, entity.metadata.description)\n              , React.createElement(CardActions, null\n                , React.createElement(Button, {\n                  to: getRouteToReaderPageFor({\n                    namespace: toLowerMaybe(\n                      entity.metadata.namespace ?? 'default',\n                      config,\n                    ),\n                    kind: toLowerMaybe(entity.kind, config),\n                    name: toLowerMaybe(entity.metadata.name, config),\n                  }),\n                  color: \"primary\",\n                  'data-testid': \"read_docs\",}\n                , \"Read Docs\"\n\n                )\n              )\n            )\n          ))\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DocsCardGrid } from './DocsCardGrid';\nimport {\n  CodeSnippet,\n  Progress,\n  WarningPanel,\n} from '@backstage/core-components';\nimport { useEntityList } from '@backstage/plugin-catalog-react';\nimport React from 'react';\n\n/**\n * Component responsible to get entities from entity list context and pass down to DocsCardGrid\n *\n * @public\n */\nexport const EntityListDocsGrid = () => {\n  const { loading, error, entities } = useEntityList();\n\n  if (error) {\n    return (\n      React.createElement(WarningPanel, {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"    ,}\n      \n        , React.createElement(CodeSnippet, { language: \"text\", text: error.toString(),} )\n      )\n    );\n  }\n\n  if (loading || !entities) {\n    return React.createElement(Progress, null );\n  }\n\n  entities.sort((a, b) =>\n    (a.metadata.title ?? a.metadata.name).localeCompare(\n      b.metadata.title ?? b.metadata.name,\n    ),\n  );\n\n  return React.createElement(DocsCardGrid, { entities: entities,} );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { withStyles } from '@material-ui/styles';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\n\nconst YellowStar = withStyles({\n  root: {\n    color: '#f3ba37',\n  },\n})(Star);\n\n/**\n * Not directly exported, but through DocsTable.actions and EntityListDocsTable.actions\n *\n * @public\n */\nexport const actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => React.createElement(ShareIcon, { fontSize: \"small\",} ),\n        tooltip: 'Click to copy documentation link to clipboard',\n        onClick: () =>\n          copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`),\n      };\n    };\n  },\n  createStarEntityAction(\n    isStarredEntity,\n    toggleStarredEntity,\n  ) {\n    return ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: '1em' },\n        icon: () => (isStarred ? React.createElement(YellowStar, null ) : React.createElement(StarBorder, null )),\n        tooltip: isStarred ? 'Remove from favorites' : 'Add to favorites',\n        onClick: () => toggleStarredEntity(entity),\n      };\n    };\n  },\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Link, SubvalueCell, } from '@backstage/core-components';\nimport { EntityRefLinks } from '@backstage/plugin-catalog-react';\n\n\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\n\n/**\n * Not directly exported, but through DocsTable.columns and EntityListDocsTable.columns\n *\n * @public\n */\nexport const columnFactories = {\n  createNameColumn() {\n    return {\n      title: 'Document',\n      field: 'entity.metadata.name',\n      highlight: true,\n      render: (row) => (\n        React.createElement(SubvalueCell, {\n          value: \n            React.createElement(Link, { to: row.resolved.docsUrl,}, customTitle(row.entity))\n          ,\n          subvalue: row.entity.metadata.description,}\n        )\n      ),\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: 'Owner',\n      field: 'resolved.ownedByRelationsTitle',\n      render: ({ resolved }) => (\n        React.createElement(EntityRefLinks, {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\",}\n        )\n      ),\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: 'Type',\n      field: 'entity.spec.type',\n    };\n  },\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\n\nimport { useRouteRef, useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport {\n  humanizeEntityRef,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { rootDocsRouteRef } from '../../../routes';\nimport {\n  Button,\n  EmptyState,\n  Table,\n\n\n} from '@backstage/core-components';\nimport { actionFactories } from './actions';\nimport { columnFactories } from './columns';\nimport { toLowerMaybe } from '../../../helpers';\n\n\n/**\n * Props for {@link DocsTable}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n/**\n * Component which renders a table documents\n *\n * @public\n */\nexport const DocsTable = (props) => {\n  const { entities, title, loading, columns, actions } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities) return null;\n\n  const documents = entities.map(entity => {\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            entity.metadata.namespace ?? 'default',\n            config,\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config),\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations\n          .map(r => humanizeEntityRef(r, { defaultKind: 'group' }))\n          .join(', '),\n      },\n    };\n  });\n\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createTypeColumn(),\n  ];\n\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n  ];\n\n  return (\n    React.createElement(React.Fragment, null\n      , loading || (documents && documents.length > 0) ? (\n        React.createElement(Table, {\n          isLoading: loading,\n          options: {\n            paging: true,\n            pageSize: 20,\n            search: true,\n            actionsColumnIndex: -1,\n          },\n          data: documents,\n          columns: columns || defaultColumns,\n          actions: actions || defaultActions,\n          title: \n            title\n              ? `${title} (${documents.length})`\n              : `All (${documents.length})`\n          ,}\n        )\n      ) : (\n        React.createElement(EmptyState, {\n          missing: \"data\",\n          title: \"No documents to show\"   ,\n          description: \"Create your own document. Check out our Getting Started Information\"         ,\n          action: \n            React.createElement(Button, {\n              color: \"primary\",\n              to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n              variant: \"contained\",}\n            , \"DOCS\"\n\n            )\n          ,}\n        )\n      )\n    )\n  );\n};\n\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { capitalize } from 'lodash';\nimport {\n  CodeSnippet,\n\n\n  WarningPanel,\n} from '@backstage/core-components';\nimport {\n  useEntityList,\n  useStarredEntities,\n} from '@backstage/plugin-catalog-react';\nimport { DocsTable } from './DocsTable';\nimport { actionFactories } from './actions';\nimport { columnFactories } from './columns';\n\n\n/**\n * Props for {@link EntityListDocsTable}.\n *\n * @public\n */\n\n\n\n\n\n/**\n * Component which renders a table with entities from catalog.\n *\n * @public\n */\nexport const EntityListDocsTable = (props) => {\n  const { columns, actions } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n\n  const title = capitalize(filters.user?.value ?? 'all');\n\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(\n      isStarredEntity,\n      toggleStarredEntity,\n    ),\n  ];\n\n  if (error) {\n    return (\n      React.createElement(WarningPanel, {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"    ,}\n      \n        , React.createElement(CodeSnippet, { language: \"text\", text: error.toString(),} )\n      )\n    );\n  }\n\n  return (\n    React.createElement(DocsTable, {\n      title: title,\n      entities: entities,\n      loading: loading,\n      actions: actions || defaultActions,\n      columns: columns,}\n    )\n  );\n};\n\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useOutlet } from 'react-router';\nimport { DefaultTechDocsHome } from './DefaultTechDocsHome';\n\nexport const TechDocsIndexPage = () => {\n  const outlet = useOutlet();\n\n  return outlet || React.createElement(DefaultTechDocsHome, null );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { PageWithHeader } from '@backstage/core-components';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\n/**\n * Props for {@link TechDocsPageWrapper}\n *\n * @public\n */\n\n\n\n\n/**\n * Component wrapping a techdocs page with Page and Header components\n *\n * @public\n */\nexport const TechDocsPageWrapper = (props) => {\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${\n    configApi.getOptionalString('organization.name') ?? 'Backstage'\n  }`;\n\n  return (\n    React.createElement(PageWithHeader, {\n      title: \"Documentation\",\n      subtitle: generatedSubtitle,\n      themeId: \"documentation\",}\n    \n      , children\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\nimport {\n  CATALOG_FILTER_EXISTS,\n\n\n  useEntityList,\n} from '@backstage/plugin-catalog-react';\n\nclass TechDocsFilter  {\n  getCatalogFilters() {\n    return {\n      'metadata.annotations.backstage.io/techdocs-ref': CATALOG_FILTER_EXISTS,\n    };\n  }\n}\n\n\n\n\n\n/**\n * Component responsible for updating TechDocs filters\n *\n * @public\n */\nexport const TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter(),\n    });\n  }, [updateFilters]);\n\n  return null;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  techdocsApiRef,\n  techdocsStorageApiRef,\n} from '@backstage/plugin-techdocs-react';\nimport { TechDocsClient, TechDocsStorageClient } from './client';\nimport {\n  rootDocsRouteRef,\n  rootRouteRef,\n  rootCatalogDocsRouteRef,\n} from './routes';\nimport {\n  configApiRef,\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\n/**\n * The Backstage plugin that renders technical documentation for your components\n *\n * @public\n */\nexport const techdocsPlugin = createPlugin({\n  id: 'techdocs',\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) =>\n        new TechDocsStorageClient({\n          configApi,\n          discoveryApi,\n          identityApi,\n          fetchApi,\n        }),\n    }),\n    createApiFactory({\n      api: techdocsApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) =>\n        new TechDocsClient({\n          configApi,\n          discoveryApi,\n          fetchApi,\n        }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef,\n  },\n});\n\n/**\n * Routable extension used to render docs\n *\n * @public\n */\nexport const TechdocsPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechdocsPage',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * Routable extension used to render docs on Entity page\n *\n * @public\n */\nexport const EntityTechdocsContent = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityTechdocsContent',\n    component: () => import('./Router').then(m => m.EmbeddedDocsRouter),\n    mountPoint: rootCatalogDocsRouteRef,\n  }),\n);\n\n/**\n * Component which takes a custom tabs config object and renders a documentation landing page.\n *\n * @public\n */\nexport const TechDocsCustomHome = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechDocsCustomHome',\n    component: () =>\n      import('./home/components/TechDocsCustomHome').then(\n        m => m.TechDocsCustomHome,\n      ),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * Responsible for rendering the provided router element\n *\n * @public\n */\nexport const TechDocsIndexPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechDocsIndexPage',\n    component: () =>\n      import('./home/components/TechDocsIndexPage').then(\n        m => m.TechDocsIndexPage,\n      ),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * Component responsible for composing a TechDocs reader page experience\n *\n * @public\n */\nexport const TechDocsReaderPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: 'TechDocsReaderPage',\n    component: () =>\n      import('./reader/components/TechDocsReaderPage').then(\n        m => m.TechDocsReaderPage,\n      ),\n    mountPoint: rootDocsRouteRef,\n  }),\n);\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Children } from 'react';\nimport { useOutlet, useParams } from 'react-router-dom';\n\nimport { Page } from '@backstage/core-components';\n\nimport {\n  TECHDOCS_ADDONS_WRAPPER_KEY,\n  TechDocsReaderPageProvider,\n} from '@backstage/plugin-techdocs-react';\n\n\n\nimport { TechDocsReaderPageContent } from '../TechDocsReaderPageContent';\nimport { TechDocsReaderPageHeader } from '../TechDocsReaderPageHeader';\nimport { TechDocsReaderPageSubheader } from '../TechDocsReaderPageSubheader';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Default TechDocs reader page structure composed with a header and content\n * @public\n */\nexport const TechDocsReaderLayout = ({\n  withSearch,\n  withHeader = true,\n}) => {\n  return (\n    React.createElement(Page, { themeId: \"documentation\",}\n      , withHeader && React.createElement(TechDocsReaderPageHeader, null )\n      , React.createElement(TechDocsReaderPageSubheader, null )\n      , React.createElement(TechDocsReaderPageContent, { withSearch: withSearch,} )\n    )\n  );\n};\n\n/**\n * @public\n */\n\n\n\n\n\n/**\n * An addon-aware implementation of the TechDocsReaderPage.\n * @public\n */\nexport const TechDocsReaderPage = (props) => {\n  const { kind, name, namespace } = useParams();\n  const { children, entityRef = { kind, name, namespace } } = props;\n\n  const outlet = useOutlet();\n\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n\n    const page = childrenList.find(child => {\n      const { type } = child ;\n      return !type?.__backstage_data?.map?.get(TECHDOCS_ADDONS_WRAPPER_KEY);\n    });\n\n    return (\n      React.createElement(TechDocsReaderPageProvider, { entityRef: entityRef,}\n        , (page ) || React.createElement(TechDocsReaderLayout, null )\n      )\n    );\n  }\n\n  return (\n    React.createElement(TechDocsReaderPageProvider, { entityRef: entityRef,}\n      , ({ metadata, entityMetadata, onReady }) => (\n        React.createElement(Page, { themeId: \"documentation\",}\n          , children instanceof Function\n            ? children({\n                entityRef,\n                techdocsMetadataValue: metadata.value,\n                entityMetadataValue: entityMetadata.value,\n                onReady,\n              })\n            : children\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport {\n  Button,\n  createStyles,\n  Drawer,\n  Grid,\n  IconButton,\n  makeStyles,\n\n  Typography,\n} from '@material-ui/core';\nimport Close from '@material-ui/icons/Close';\nimport React, { useState } from 'react';\n\nconst useDrawerStyles = makeStyles((theme) =>\n  createStyles({\n    paper: {\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: '75%',\n      },\n      [theme.breakpoints.up('md')]: {\n        width: '50%',\n      },\n      padding: theme.spacing(2.5),\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n    },\n    logs: {\n      background: theme.palette.background.default,\n    },\n  }),\n);\n\nexport const TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose,\n}\n\n\n) => {\n  const classes = useDrawerStyles();\n  const logText =\n    buildLog.length === 0 ? 'Waiting for logs...' : buildLog.join('\\n');\n  return (\n    React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      className: classes.root,\n      spacing: 0,\n      wrap: \"nowrap\",}\n    \n      , React.createElement(Grid, {\n        item: true,\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        spacing: 0,\n        wrap: \"nowrap\",}\n      \n        , React.createElement(Typography, { variant: \"h5\",}, \"Build Details\" )\n        , React.createElement(IconButton, {\n          key: \"dismiss\",\n          title: \"Close the drawer\"  ,\n          onClick: onClose,\n          color: \"inherit\",}\n        \n          , React.createElement(Close, null )\n        )\n      )\n      , React.createElement(LogViewer, { text: logText, classes: { root: classes.logs },} )\n    )\n  );\n};\n\nexport const TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, { color: \"inherit\", onClick: () => setOpen(true),}, \"Show Build Logs\"\n\n      )\n      , React.createElement(Drawer, {\n        classes: { paper: classes.paper },\n        anchor: \"right\",\n        open: open,\n        onClose: () => setOpen(false),}\n      \n        , React.createElement(TechDocsBuildLogsDrawerContent, {\n          buildLog: buildLog,\n          onClose: () => setOpen(false),}\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { ErrorPage } from '@backstage/core-components';\n\n\n\n\n\nexport const TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder =\n    useApi(configApiRef).getOptionalString('techdocs.builder');\n\n  let additionalInfo = '';\n  if (techdocsBuilder !== 'local') {\n    additionalInfo =\n      \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not \" +\n      \"generate docs if they are not found. Make sure the project's docs are generated and published by some external \" +\n      \"process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage \" +\n      'instance.';\n  }\n\n  return (\n    React.createElement(ErrorPage, {\n      status: \"404\",\n      statusMessage: errorMessage || 'Documentation not found',\n      additionalInfo: additionalInfo,}\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CircularProgress, Button, makeStyles } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\n\nimport { TechDocsBuildLogs } from './TechDocsBuildLogs';\nimport { TechDocsNotFound } from './TechDocsNotFound';\nimport { useTechDocsReader } from './TechDocsReaderProvider';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: theme.spacing(2),\n  },\n  message: {\n    // `word-break: break-word` is deprecated, but gives legacy support to browsers not supporting `overflow-wrap` yet\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/word-break\n    wordBreak: 'break-word',\n    overflowWrap: 'anywhere',\n  },\n}));\n\nexport const TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles();\n\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog,\n  } = useTechDocsReader();\n\n  if (state === 'INITIAL_BUILD') {\n    StateAlert = (\n      React.createElement(Alert, {\n        classes: { root: classes.root },\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: React.createElement(CircularProgress, { size: \"24px\",} ),\n        action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),}\n      , \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\"\n\n\n      )\n    );\n  }\n\n  if (state === 'CONTENT_STALE_REFRESHING') {\n    StateAlert = (\n      React.createElement(Alert, {\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: React.createElement(CircularProgress, { size: \"24px\",} ),\n        action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),\n        classes: { root: classes.root },}\n      , \"A newer version of this documentation is being prepared and will be available shortly.\"\n\n\n      )\n    );\n  }\n\n  if (state === 'CONTENT_STALE_READY') {\n    StateAlert = (\n      React.createElement(Alert, {\n        variant: \"outlined\",\n        severity: \"success\",\n        action: \n          React.createElement(Button, { color: \"inherit\", onClick: () => contentReload(),}, \"Refresh\"\n\n          )\n        ,\n        classes: { root: classes.root },}\n      , \"A newer version of this documentation is now available, please refresh to view.\"\n\n\n      )\n    );\n  }\n\n  if (state === 'CONTENT_STALE_ERROR') {\n    StateAlert = (\n      React.createElement(Alert, {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),\n        classes: { root: classes.root, message: classes.message },}\n      , \"Building a newer version of this documentation failed.\"\n               , ' '\n        , syncErrorMessage\n      )\n    );\n  }\n\n  if (state === 'CONTENT_NOT_FOUND') {\n    StateAlert = (\n      React.createElement(React.Fragment, null\n        , syncErrorMessage && (\n          React.createElement(Alert, {\n            variant: \"outlined\",\n            severity: \"error\",\n            action: React.createElement(TechDocsBuildLogs, { buildLog: buildLog,} ),\n            classes: { root: classes.root, message: classes.message },}\n          , \"Building a newer version of this documentation failed.\"\n                   , ' '\n            , syncErrorMessage\n          )\n        )\n        , React.createElement(TechDocsNotFound, { errorMessage: contentErrorMessage,} )\n      )\n    );\n  }\n\n  return StateAlert;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\n\n/**\n * Checks whether a node is link or not.\n * @param node - can be any element.\n * @returns true when node is link.\n */\nconst isLink = (node) => node.nodeName === 'LINK';\n\n/**\n * Checks whether a link is safe or not.\n * @param node - is an link element.\n * @returns true when link is mkdocs css, google fonts or gstatic fonts.\n */\nconst isSafe = (node) => {\n  const href = node?.getAttribute('href') || '';\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\n\n/**\n * Function that removes unsafe link nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeLinks = (node) => {\n  if (isLink(node) && !isSafe(node)) {\n    node.remove();\n  }\n  return node;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks whether a node is iframe or not.\n * @param node - can be any element.\n * @returns true when node is iframe.\n */\nconst isIframe = (node) => node.nodeName === 'IFRAME';\n\n/**\n * Checks whether a iframe is safe or not.\n * @param node - is an iframe element.\n * @param hosts - list of allowed hosts.\n * @returns true when iframe is included in hosts.\n */\nconst isSafe = (node, hosts) => {\n  const src = node.getAttribute('src') || '';\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Returns a function that removes unsafe iframe nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeIframes = (hosts) => (node) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport DOMPurify from 'dompurify';\nimport { useMemo, useCallback } from 'react';\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\n\nimport { removeUnsafeLinks, removeUnsafeIframes } from './hooks';\n\n/**\n * Returns html sanitizer configuration\n */\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n\n  return useMemo(() => {\n    return configApi.getOptionalConfig('techdocs.sanitizer');\n  }, [configApi]);\n};\n\n/**\n * Returns a transformer that sanitizes the dom's internal html.\n */\nexport const useSanitizerTransformer = () => {\n  const config = useSanitizerConfig();\n\n  return useCallback(\n    async (dom) => {\n      const hosts = config?.getOptionalStringArray('allowedIframeHosts');\n\n      DOMPurify.addHook('beforeSanitizeElements', removeUnsafeLinks);\n      const tags = ['link'];\n\n      if (hosts) {\n        tags.push('iframe');\n        DOMPurify.addHook('beforeSanitizeElements', removeUnsafeIframes(hosts));\n      }\n\n      return DOMPurify.sanitize(dom.innerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: ['style'],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true,\n      });\n    },\n    [config],\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { alpha, lighten } from '@material-ui/core';\n\nexport default ({ theme }) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n    theme.palette.text.secondary,\n    0.3,\n  )};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n    theme.palette.background.paper,\n    0.7,\n  )};\n  --md-default-bg-color--lightest: ${lighten(\n    theme.palette.background.paper,\n    0.3,\n  )};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n    theme.palette.primary.contrastText,\n    0.7,\n  )};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.primary.light\n      : theme.palette.primary.dark\n  };\n  --md-code-hl-function-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.secondary.light\n      : theme.palette.secondary.dark\n  };\n  --md-code-hl-string-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.success.light\n      : theme.palette.success.dark\n  };\n  --md-code-hl-number-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.error.light\n      : theme.palette.error.dark\n  };\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: var(--md-accent-fg-color);\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.error.dark, 0.5)\n      : alpha(theme.palette.error.light, 0.5)\n  };\n  --md-typeset-ins-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.success.dark, 0.5)\n      : alpha(theme.palette.success.light, 0.5)\n  };\n  --md-typeset-mark-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.warning.dark, 0.5)\n      : alpha(theme.palette.warning.light, 0.5)\n  };\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ({ theme }) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ({ theme, sidebar }) => `\n/*==================  Layout  ==================*/\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(16rem - 10px);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n}\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${\n      sidebar.isPinned ? 'calc(-12.1rem + 242px)' : 'calc(-12.1rem + 72px)'\n    } !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst headings = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\nexport default ({ theme }) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce((style, heading) => {\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value) => {\n    let factor = 1;\n    if (typeof value === 'number') {\n      // 60% of the size defined because it is too big\n      factor = (value / 16) * 0.6;\n    }\n    if (typeof value === 'string') {\n      factor = value.replace('rem', '');\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, '')}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ({ theme }) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === 'dark' ? '#ff53a3' : '#ec407a'};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${\n    theme.palette.type === 'dark' ? 'rgba(248,81,73,0.65)' : '#fdd'\n  };\n}\n\n.codehilite .gi {\n  background-color: ${\n    theme.palette.type === 'dark' ? 'rgba(46,160,67,0.65)' : '#dfd'\n  };\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { default as variables } from './variables';\nimport { default as reset } from './reset';\nimport { default as layout } from './layout';\nimport { default as typeset } from './typeset';\nimport { default as animations } from './animations';\nimport { default as extensions } from './extensions';\n\n/**\n * A list of style rules that will be applied to an element in the order they were added.\n *\n * @remarks\n * The order of items is important, which means that a rule can override any other rule previously added to the list,\n * i.e. the rules will be applied from the first added to the last added.\n */\nexport const rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions,\n];\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useMemo } from 'react';\n\nimport { useTheme } from '@material-ui/core';\n\nimport { useSidebarPinState } from '@backstage/core-components';\n\n\n\nimport { rules } from './rules';\n\n/**\n * Sidebar pinned state to be used in computing style injections.\n */\nconst useSidebar = () => useSidebarPinState();\n\n/**\n * Process all rules and concatenate their definitions into a single style.\n * @returns a string containing all processed style definitions.\n */\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce((styles, rule) => styles + rule(options), '');\n  }, [theme, sidebar]);\n};\n\n/**\n * Returns a transformer that inserts all style rules into the given element's head tag.\n */\nexport const useStylesTransformer = () => {\n  const styles = useRuleStyles();\n\n  return useCallback(\n    (dom) => {\n      dom\n        .getElementsByTagName('head')[0]\n        .insertAdjacentHTML('beforeend', `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles],\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * TechDocs backend serves SVGs with text/plain content-type for security. This\n * helper determines if an SVG is being loaded from the backend, and thus needs\n * inlining to be displayed properly.\n */\nconst isSvgNeedingInlining = (\n  attrName,\n  attrVal,\n  apiOrigin,\n) => {\n  const isSrcToSvg = attrName === 'src' && attrVal.endsWith('.svg');\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\n\nexport const addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path,\n}) => {\n  return async dom => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n\n    const updateDom = async ( \n      list,\n      attributeName,\n    ) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute) return;\n\n          // Special handling for SVG images.\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path,\n          );\n\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: 'include' });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent)),\n                )}`,\n              );\n            } catch (e) {\n              elem.setAttribute('alt', `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n\n    await Promise.all([\n      updateDom(dom.querySelectorAll('img'), 'src'),\n      updateDom(dom.querySelectorAll('script'), 'src'),\n      updateDom(dom.querySelectorAll('source'), 'src'),\n      updateDom(dom.querySelectorAll('link'), 'href'),\n      updateDom(dom.querySelectorAll('a[download]'), 'href'),\n    ]);\n\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  replaceGitHubUrlType,\n\n} from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport parseGitUrl from 'git-url-parse';\n\n// requires repo\nexport const addGitFeedbackLink = (\n  scmIntegrationsApi,\n) => {\n  return dom => {\n    // attempting to use selectors that are more likely to be static as MkDocs updates over time\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]',\n    ) ;\n\n    // don't show if edit link not available in raw page\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n\n    // don't show if can't identify edit link hostname as a gitlab/github hosting\n    if (integration?.type !== 'github' && integration?.type !== 'gitlab') {\n      return dom;\n    }\n\n    // topmost h1 only contains title for whole page\n    const title =\n      (dom.querySelector('article>h1') )?.childNodes[0]\n        .textContent || '';\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\\n${sourceAnchor.href}\\n\\nFeedback:`,\n    );\n\n    // Convert GitHub edit url to blob type so it can be parsed by git-url-parse correctly\n    const gitUrl =\n      integration?.type === 'github'\n        ? replaceGitHubUrlType(sourceURL.href, 'blob')\n        : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n\n    const feedbackLink = sourceAnchor.cloneNode() ;\n    switch (integration?.type) {\n      case 'gitlab':\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case 'github':\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    ReactDOM.render(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = '5px';\n    feedbackLink.title = 'Leave feedback for this page';\n    feedbackLink.id = 'git-feedback-link';\n    sourceAnchor?.insertAdjacentElement('beforebegin', feedbackLink);\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport const addSidebarToggle = () => {\n  return dom => {\n    // attempting to use selectors that are more likely to be static as MkDocs updates over time\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]',\n    ) ;\n    const article = dom.querySelector('article') ;\n\n    // Fail gracefully\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode() ;\n    ReactDOM.render(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = 'toggle-sidebar';\n    toggleSidebar.title = 'Toggle Sidebar';\n    toggleSidebar.classList.add('md-content__button');\n    toggleSidebar.style.setProperty('padding', '0 0 0 5px');\n    toggleSidebar.style.setProperty('margin', '0.4rem 0 0.4rem 0.4rem');\n    article?.prepend(toggleSidebar);\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const rewriteDocLinks = () => {\n  return dom => {\n    const updateDom = (\n      list,\n      attributeName,\n    ) => {\n      Array.from(list)\n        .filter(elem => elem.hasAttribute(attributeName))\n        .forEach((elem) => {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (elemAttribute) {\n            // if link is external, add target to open in a new window or tab\n            if (elemAttribute.match(/^https?:\\/\\//i)) {\n              elem.setAttribute('target', '_blank');\n            }\n\n            try {\n              const normalizedWindowLocation = normalizeUrl(\n                window.location.href,\n              );\n              elem.setAttribute(\n                attributeName,\n                new URL(elemAttribute, normalizedWindowLocation).toString(),\n              );\n            } catch (_e) {\n              // Non-parseable links should be re-written as plain text.\n              elem.replaceWith(elem.textContent || elemAttribute);\n            }\n          }\n        });\n    };\n\n    updateDom(Array.from(dom.getElementsByTagName('a')), 'href');\n\n    return dom;\n  };\n};\n\n/** Make sure that the input url always ends with a '/' */\nexport function normalizeUrl(input) {\n  const url = new URL(input);\n\n  if (!url.pathname.endsWith('/') && !url.pathname.endsWith('.html')) {\n    url.pathname += '/';\n  }\n\n  return url.toString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const addLinkClickListener = ({\n  baseUrl,\n  onClick,\n}) => {\n  return dom => {\n    Array.from(dom.getElementsByTagName('a')).forEach(elem => {\n      elem.addEventListener('click', (e) => {\n        const target = elem ;\n        const href = target.getAttribute('href');\n\n        if (!href) return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute('download')) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n\n    return dom;\n  };\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\nimport ReactDom from 'react-dom';\nimport {\n  withStyles,\n\n  ThemeProvider,\n  SvgIcon,\n  Tooltip,\n} from '@material-ui/core';\n\nconst CopyToClipboardTooltip = withStyles(theme => ({\n  tooltip: {\n    fontSize: 'inherit',\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: 'transparent',\n    boxShadow: 'none',\n  },\n}))(Tooltip);\n\nconst CopyToClipboardIcon = () => (\n  React.createElement(SvgIcon, null\n    , React.createElement('path', { d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"                ,} )\n  )\n);\n\n\n\n\n\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n\n  const handleClick = useCallback(() => {\n    navigator.clipboard.writeText(text);\n    setOpen(true);\n  }, [text]);\n\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  return (\n    React.createElement(CopyToClipboardTooltip, {\n      title: \"Copied to clipboard\"  ,\n      placement: \"left\",\n      open: open,\n      onClose: handleClose,\n      leaveDelay: 1000,}\n    \n      , React.createElement('button', { className: \"md-clipboard md-icon\" , onClick: handleClick,}\n        , React.createElement(CopyToClipboardIcon, null )\n      )\n    )\n  );\n};\n\n\n\n/**\n * Recreates copy-to-clipboard functionality attached to <code> snippets that\n * is native to mkdocs-material theme.\n */\nexport const copyToClipboard = (theme) => {\n  return dom => {\n    const codes = dom.querySelectorAll('pre > code');\n    for (const code of codes) {\n      const text = code.textContent || '';\n      const container = document.createElement('div');\n      code?.parentElement?.prepend(container);\n      ReactDom.render(\n        React.createElement(ThemeProvider, { theme: theme,}\n          , React.createElement(CopyToClipboardButton, { text: text,} )\n        ),\n        container,\n      );\n    }\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const removeMkdocsHeader = () => {\n  return dom => {\n    // Remove the header\n    dom.querySelector('.md-header')?.remove();\n\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const simplifyMkdocsFooter = () => {\n  return dom => {\n    // Remove new mkdocs copyright\n    dom.querySelector('.md-footer .md-copyright')?.remove();\n    // Remove old mkdocs copyright\n    dom.querySelector('.md-footer-copyright')?.remove();\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SHADOW_DOM_STYLE_LOAD_EVENT } from '@backstage/plugin-techdocs-react';\n\n\n\n\n\n\n\nexport const onCssReady = ({\n  onLoading,\n  onLoaded,\n}) => {\n  return dom => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad,\n        );\n      },\n    );\n    return dom;\n  };\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const scrollIntoAnchor = () => {\n  return dom => {\n    setTimeout(() => {\n      // Scroll to the desired anchor on initial navigation\n      if (window.location.hash) {\n        const hash = window.location.hash.slice(1);\n        // fix invalid selector error for anchor starting with number\n        dom?.querySelector(`[id=\"${hash}\"]`)?.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nexport const transform = async (\n  html,\n  transformers,\n) => {\n  let dom;\n\n  if (typeof html === 'string') {\n    dom = new DOMParser().parseFromString(html, 'text/html').documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error('dom is not a recognized type');\n  }\n\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n\n  return dom;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useTheme, useMediaQuery } from '@material-ui/core';\n\n\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\n\nimport {\n  techdocsStorageApiRef,\n  useShadowDomStylesLoading,\n} from '@backstage/plugin-techdocs-react';\n\nimport { useTechDocsReader } from '../TechDocsReaderProvider';\n\nimport {\n  addBaseUrl,\n  addGitFeedbackLink,\n  addLinkClickListener,\n  addSidebarToggle,\n  onCssReady,\n  removeMkdocsHeader,\n  rewriteDocLinks,\n  simplifyMkdocsFooter,\n  scrollIntoAnchor,\n  transform as transformer,\n  copyToClipboard,\n  useSanitizerTransformer,\n  useStylesTransformer,\n} from '../../transformers';\n\nconst MOBILE_MEDIA_QUERY = 'screen and (max-width: 76.1875em)';\n\n/**\n * Hook that encapsulates the behavior of getting raw HTML and applying\n * transforms to it in order to make it function at a basic level in the\n * Backstage UI.\n */\nexport const useTechDocsReaderDom = (\n  entityRef,\n) => {\n  const navigate = useNavigate();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n\n  const { state, path, content: rawPage } = useTechDocsReader();\n\n  const [dom, setDom] = useState(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom) return;\n\n    const sidebars = dom.querySelectorAll('.md-sidebar');\n\n    sidebars.forEach(element => {\n      // set sidebar position to render in correct position\n      if (isMobileMedia) {\n        element.style.top = '0px';\n      } else {\n        const domTop = dom.getBoundingClientRect().top ?? 0;\n        const tabs = dom.querySelector('.md-container > .md-tabs');\n        const tabsHeight = tabs?.getBoundingClientRect().height ?? 0;\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n\n      // show the sidebar only after updating its position\n      element.style.setProperty('opacity', '1');\n    });\n  }, [dom, isMobileMedia]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSidebarPosition);\n    window.addEventListener('scroll', updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener('resize', updateSidebarPosition);\n      window.removeEventListener('scroll', updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n\n  // dynamically set width of footer to accommodate for pinning of the sidebar\n  const updateFooterWidth = useCallback(() => {\n    if (!dom) return;\n    const footer = dom.querySelector('.md-footer');\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateFooterWidth);\n    return () => {\n      window.removeEventListener('resize', updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n\n  // an update to \"state\" might lead to an updated UI so we include it as a trigger\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n\n  // a function that performs transformations that are executed prior to adding it to the DOM\n  const preRender = useCallback(\n    (rawContent, contentPath) =>\n      transformer(rawContent, [\n        sanitizerTransformer,\n        addBaseUrl({\n          techdocsStorageApi,\n          entityId: entityRef,\n          path: contentPath,\n        }),\n        rewriteDocLinks(),\n        addSidebarToggle(),\n        removeMkdocsHeader(),\n        simplifyMkdocsFooter(),\n        addGitFeedbackLink(scmIntegrationsApi),\n        stylesTransformer,\n      ]),\n    [\n      // only add dependencies that are in state or memorized variables to avoid unnecessary calls between re-renders\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer,\n    ],\n  );\n\n  // a function that performs transformations that are executed after adding it to the DOM\n  const postRender = useCallback(\n    async (transformedElement) =>\n      transformer(transformedElement, [\n        scrollIntoAnchor(),\n        copyToClipboard(theme),\n        addLinkClickListener({\n          baseUrl: window.location.origin,\n          onClick: (event, url) => {\n            // detect if CTRL or META keys are pressed so that links can be opened in a new tab with `window.open`\n            const modifierActive = event.ctrlKey || event.metaKey;\n            const parsedUrl = new URL(url);\n\n            // hash exists when anchor is clicked on secondary sidebar\n            if (parsedUrl.hash) {\n              if (modifierActive) {\n                window.open(`${parsedUrl.pathname}${parsedUrl.hash}`, '_blank');\n              } else {\n                navigate(`${parsedUrl.pathname}${parsedUrl.hash}`);\n                // Scroll to hash if it's on the current page\n                transformedElement\n                  ?.querySelector(`#${parsedUrl.hash.slice(1)}`)\n                  ?.scrollIntoView();\n              }\n            } else {\n              if (modifierActive) {\n                window.open(parsedUrl.pathname, '_blank');\n              } else {\n                navigate(parsedUrl.pathname);\n              }\n            }\n          },\n        }),\n        // disable MkDocs drawer toggling ('for' attribute => checkbox mechanism)\n        onCssReady({\n          onLoading: () => {},\n          onLoaded: () => {\n            transformedElement\n              .querySelector('.md-nav__title')\n              ?.removeAttribute('for');\n          },\n        }),\n        // hide sidebars until their positions are updated\n        onCssReady({\n          onLoading: () => {\n            const sidebars = Array.from(\n              transformedElement.querySelectorAll('.md-sidebar'),\n            );\n            sidebars.forEach(element => {\n              element.style.setProperty('opacity', '0');\n            });\n          },\n          onLoaded: () => {},\n        }),\n      ]),\n    [theme, navigate],\n  );\n\n  useEffect(() => {\n    if (!rawPage) return () => {};\n\n    // if false, there is already a newer execution of this effect\n    let shouldReplaceContent = true;\n\n    // Pre-render\n    preRender(rawPage, path).then(async preTransformedDomElement => {\n      if (!preTransformedDomElement?.innerHTML) {\n        return; // An unexpected error occurred\n      }\n\n      // don't manipulate the shadow dom if this isn't the latest effect execution\n      if (!shouldReplaceContent) {\n        return;\n      }\n\n      // Scroll to top after render\n      window.scroll({ top: 0 });\n\n      // Post-render\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement,\n      );\n      setDom(postTransformedDomElement );\n    });\n\n    // cancel this execution\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n\n  return dom;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Portal } from '@material-ui/core';\nimport {\n  useTechDocsAddons,\n  TechDocsAddonLocations as locations,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nexport const TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n\n  const { shadowRoot } = useTechDocsReaderPage();\n\n  const contentElement = shadowRoot?.querySelector(\n    '[data-md-component=\"content\"]',\n  );\n\n  const primarySidebarElement = shadowRoot?.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]',\n  );\n  let primarySidebarAddonLocation = primarySidebarElement?.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]',\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement('div');\n    primarySidebarAddonLocation.setAttribute(\n      'data-techdocs-addons-location',\n      'primary sidebar',\n    );\n    primarySidebarElement?.prepend(primarySidebarAddonLocation);\n  }\n\n  const secondarySidebarElement = shadowRoot?.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]',\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement?.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]',\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement('div');\n    secondarySidebarAddonLocation.setAttribute(\n      'data-techdocs-addons-location',\n      'secondary sidebar',\n    );\n    secondarySidebarElement?.prepend(secondarySidebarAddonLocation);\n  }\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Portal, { container: primarySidebarAddonLocation,}\n        , addons.renderComponentsByLocation(locations.PrimarySidebar)\n      )\n      , React.createElement(Portal, { container: contentElement,}\n        , addons.renderComponentsByLocation(locations.Content)\n      )\n      , React.createElement(Portal, { container: secondarySidebarAddonLocation,}\n        , addons.renderComponentsByLocation(locations.SecondarySidebar)\n      )\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback } from 'react';\n\nimport { makeStyles, Grid } from '@material-ui/core';\n\nimport {\n  TechDocsShadowDom,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nimport { Content, ErrorPage } from '@backstage/core-components';\n\nimport { TechDocsSearch } from '../../../search';\nimport { TechDocsStateIndicator } from '../TechDocsStateIndicator';\n\nimport { useTechDocsReaderDom } from './dom';\nimport { withTechDocsReaderProvider } from '../TechDocsReaderProvider';\nimport { TechDocsReaderPageContentAddons } from './TechDocsReaderPageContentAddons';\n\nconst useStyles = makeStyles({\n  search: {\n    width: '100%',\n    '@media (min-width: 76.1875em)': {\n      width: 'calc(100% - 34.4rem)',\n      margin: '0 auto',\n    },\n  },\n});\n\n/**\n * Props for {@link TechDocsReaderPageContent}\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Renders the reader page content\n * @public\n */\nexport const TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props) => {\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles();\n\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot,\n    } = useTechDocsReaderPage();\n\n    const dom = useTechDocsReaderDom(entityRef);\n\n    const handleAppend = useCallback(\n      (newShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady],\n    );\n\n    // No entity metadata = 404. Don't render content at all.\n    if (entityMetadataLoading === false && !entityMetadata)\n      return React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\"  ,} );\n\n    // Do not return content until dom is ready; instead, render a state\n    // indicator, which handles progress and content errors on our behalf.\n    if (!dom) {\n      return (\n        React.createElement(Content, null\n          , React.createElement(Grid, { container: true,}\n            , React.createElement(Grid, { xs: 12, item: true,}\n              , React.createElement(TechDocsStateIndicator, null )\n            )\n          )\n        )\n      );\n    }\n\n    return (\n      React.createElement(Content, null\n        , React.createElement(Grid, { container: true,}\n          , React.createElement(Grid, { xs: 12, item: true,}\n            , React.createElement(TechDocsStateIndicator, null )\n          )\n          , withSearch && (\n            React.createElement(Grid, { className: classes.search, xs: \"auto\", item: true,}\n              , React.createElement(TechDocsSearch, { entityId: entityRef,} )\n            )\n          )\n          , React.createElement(Grid, { xs: 12, item: true,}\n            /* Centers the styles loaded event to avoid having multiple locations setting the opacity style in Shadow Dom causing the screen to flash multiple times */\n            , React.createElement(TechDocsShadowDom, { element: dom, onAppend: handleAppend,}\n              , React.createElement(TechDocsReaderPageContentAddons, null )\n            )\n          )\n        )\n      )\n    );\n  },\n);\n\n/**\n * Props for {@link Reader}\n *\n * @public\n * @deprecated use `TechDocsReaderPageContentProps` instead.\n */\n\n\n/**\n * Component responsible for rendering TechDocs documentation\n * @public\n * @deprecated use `TechDocsReaderPageContent` component instead.\n */\nexport const Reader = TechDocsReaderPageContent;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport Helmet from 'react-helmet';\n\nimport { Skeleton } from '@material-ui/lab';\nimport CodeIcon from '@material-ui/icons/Code';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n\n\n} from '@backstage/plugin-techdocs-react';\nimport {\n  EntityRefLink,\n  EntityRefLinks,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY, } from '@backstage/catalog-model';\nimport { Header, HeaderLabel } from '@backstage/core-components';\nimport { useRouteRef, configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport { rootRouteRef } from '../../../routes';\n\nconst skeleton = React.createElement(Skeleton, { animation: \"wave\", variant: \"text\", height: 40,} );\n\n/**\n * Props for {@link TechDocsReaderPageHeader}\n *\n * @public\n * @deprecated No need to pass down properties anymore. The component consumes data from `TechDocsReaderPageContext` instead. Use the {@link @backstage/plugin-techdocs-react#useTechDocsReaderPage} hook for custom header.\n */\n\n\n\n\n\n\n/**\n * Renders the reader page header.\n * This component does not accept props, please use\n * the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageHeader = (\n  props,\n) => {\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  useEffect(() => {\n    if (!metadata) return;\n    setTitle(prevTitle => {\n      const { site_name } = metadata;\n      return prevTitle || site_name;\n    });\n    setSubtitle(prevSubtitle => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === 'None') {\n        site_description = 'Home';\n      }\n      return prevSubtitle || site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n  const tabTitle = [subtitle, title, appTitle].filter(Boolean).join(' | ');\n\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec?.lifecycle;\n\n  const ownedByRelations = entityMetadata\n    ? getEntityRelations(entityMetadata, RELATION_OWNED_BY)\n    : [];\n\n  const docsRootLink = useRouteRef(rootRouteRef)();\n\n  const labels = (\n    React.createElement(React.Fragment, null\n      , React.createElement(HeaderLabel, {\n        label: \"Component\",\n        value: \n          React.createElement(EntityRefLink, {\n            color: \"inherit\",\n            entityRef: entityRef,\n            defaultKind: \"Component\",}\n          )\n        ,}\n      )\n      , ownedByRelations.length > 0 && (\n        React.createElement(HeaderLabel, {\n          label: \"Owner\",\n          value: \n            React.createElement(EntityRefLinks, {\n              color: \"inherit\",\n              entityRefs: ownedByRelations,\n              defaultKind: \"group\",}\n            )\n          ,}\n        )\n      )\n      , lifecycle ? React.createElement(HeaderLabel, { label: \"Lifecycle\", value: lifecycle,} ) : null\n      , locationMetadata &&\n      locationMetadata.type !== 'dir' &&\n      locationMetadata.type !== 'file' ? (\n        React.createElement(HeaderLabel, {\n          label: \"\",\n          value: \n            React.createElement('a', {\n              href: locationMetadata.target,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\" ,}\n            \n              , React.createElement(CodeIcon, { style: { marginTop: '-25px', fill: '#fff' },} )\n            )\n          ,}\n        )\n      ) : null\n    )\n  );\n\n  // If there is no entity or techdocs metadata, there's no reason to show the\n  // header (hides the header on 404 error pages).\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === undefined;\n  const noTdMetadata = !metadataLoading && metadata === undefined;\n  if (noEntMetadata || noTdMetadata) return null;\n\n  return (\n    React.createElement(Header, {\n      type: \"Documentation\",\n      typeLink: docsRootLink,\n      title: title || skeleton,\n      subtitle: subtitle || skeleton,}\n    \n      , React.createElement(Helmet, { titleTemplate: \"%s\",}\n        , React.createElement('title', null, tabTitle)\n      )\n      , labels\n      , children\n      , addons.renderComponentsByLocation(locations.Header)\n    )\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\n\nimport {\n  Box,\n  makeStyles,\n  Toolbar,\n\n  Menu,\n  Tooltip,\n  IconButton,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageSubheader',\n    flexDirection: 'column',\n    minHeight: 'auto',\n    padding: theme.spacing(3, 3, 0),\n  },\n}));\n\n/**\n * Renders the reader page subheader.\n * Please use the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageSubheader = ({\n  toolbarProps,\n}\n\n) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClick = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  const addons = useTechDocsAddons();\n\n  const subheaderAddons = addons.renderComponentsByLocation(\n    locations.Subheader,\n  );\n\n  const settingsAddons = addons.renderComponentsByLocation(locations.Settings);\n\n  if (!subheaderAddons && !settingsAddons) return null;\n\n  // No entity metadata = 404. Don't render subheader on 404.\n  if (entityMetadataLoading === false && !entityMetadata) return null;\n\n  return (\n    React.createElement(Toolbar, { classes: classes, ...toolbarProps,}\n      , React.createElement(Box, {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        width: \"100%\",\n        flexWrap: \"wrap\",}\n      \n        , subheaderAddons\n        , settingsAddons ? (\n          React.createElement(React.Fragment, null\n            , React.createElement(Tooltip, { title: \"Settings\",}\n              , React.createElement(IconButton, {\n                'aria-controls': \"tech-docs-reader-page-settings\",\n                'aria-haspopup': \"true\",\n                onClick: handleClick,}\n              \n                , React.createElement(SettingsIcon, null )\n              )\n            )\n            , React.createElement(Menu, {\n              id: \"tech-docs-reader-page-settings\",\n              getContentAnchorEl: null,\n              anchorEl: anchorEl,\n              anchorOrigin: { vertical: 'bottom', horizontal: 'right' },\n              open: Boolean(anchorEl),\n              onClose: handleClose,\n              keepMounted: true,}\n            \n              , settingsAddons\n            )\n          )\n        ) : null\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useMemo, useReducer, useRef } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { techdocsStorageApiRef } from '@backstage/plugin-techdocs-react';\n\n/**\n * @public\n * A state representation that is used to configure the UI of <Reader />\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Calculate the state that should be reported to the display component.\n */\nexport function calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState,\n}\n\n\n) {\n  // we have nothing to display yet\n  if (contentLoading) {\n    return 'CHECKING';\n  }\n\n  // the build is ready, but it triggered a content reload and the content variable is not trusted\n  if (activeSyncState === 'BUILD_READY_RELOAD') {\n    return 'CHECKING';\n  }\n\n  // there is no content, but the sync process is still evaluating\n  if (!content && activeSyncState === 'CHECKING') {\n    return 'CHECKING';\n  }\n\n  // there is no content yet so we assume that we are building it for the first time\n  if (!content && activeSyncState === 'BUILDING') {\n    return 'INITIAL_BUILD';\n  }\n\n  // if there is still no content after building, it might just not exist\n  if (!content) {\n    return 'CONTENT_NOT_FOUND';\n  }\n\n  // we are still building, but we already show stale content\n  if (activeSyncState === 'BUILDING') {\n    return 'CONTENT_STALE_REFRESHING';\n  }\n\n  // the build is ready, but the content is still stale\n  if (activeSyncState === 'BUILD_READY') {\n    return 'CONTENT_STALE_READY';\n  }\n\n  // the build failed, but the content is still stale\n  if (activeSyncState === 'ERROR') {\n    return 'CONTENT_STALE_ERROR';\n  }\n\n  // seems like the content is up-to-date (or we don't know yet and the sync process is still evaluating in the background)\n  return 'CONTENT_FRESH';\n}\n\n/**\n * The state of the synchronization task. It checks whether the docs are\n * up-to-date. If they aren't, it triggers a build.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function reducer(\n  oldState,\n  action,\n) {\n  const newState = { ...oldState };\n\n  switch (action.type) {\n    case 'sync':\n      // reset the build log when a new check starts\n      if (action.state === 'CHECKING') {\n        newState.buildLog = [];\n      }\n\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n\n    case 'contentLoading':\n      newState.contentLoading = true;\n\n      // only reset errors but keep the old content until it is replaced by the 'content' action\n      newState.contentError = undefined;\n      break;\n\n    case 'content':\n      // only override the path if it is part of the action\n      if (typeof action.path === 'string') {\n        newState.path = action.path;\n      }\n\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n\n    case 'buildLog':\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n\n    default:\n      throw new Error();\n  }\n\n  // a content update loads fresh content so the build is updated to being up-to-date\n  if (\n    ['BUILD_READY', 'BUILD_READY_RELOAD'].includes(newState.activeSyncState) &&\n    ['contentLoading', 'content'].includes(action.type)\n  ) {\n    newState.activeSyncState = 'UP_TO_DATE';\n    newState.buildLog = [];\n  }\n\n  return newState;\n}\n/**\n * @public shared reader state\n */\n\n\n\n\n\n\n\n\n\n\nexport function useReaderState(\n  kind,\n  namespace,\n  name,\n  path,\n) {\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: 'CHECKING',\n    path,\n    contentLoading: true,\n    buildLog: [],\n  });\n\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n\n  // try to load the content. the function will fire events and we don't care for the return values\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: 'contentLoading' });\n\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path,\n      );\n\n      // update content and path at the same time\n      dispatch({ type: 'content', content: entityDocs, path });\n\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: 'content', contentError: e, path });\n    }\n\n    return undefined;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n\n  // create a ref that holds the latest content. This provides a useAsync hook\n  // with the latest content without restarting the useAsync hook.\n  const contentRef = useRef({\n    content: undefined,\n    reload: () => {},\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n\n  // try to derive the state. the function will fire events and we don't care for the return values\n  useAsync(async () => {\n    dispatch({ type: 'sync', state: 'CHECKING' });\n\n    // should only switch to BUILDING if the request takes more than 1 seconds\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: 'sync', state: 'BUILDING' });\n    }, 1000);\n\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name,\n        },\n        log => {\n          dispatch({ type: 'buildLog', log });\n        },\n      );\n\n      switch (result) {\n        case 'updated':\n          // if there was no content prior to building, retry the loading\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: 'sync', state: 'BUILD_READY_RELOAD' });\n          } else {\n            dispatch({ type: 'sync', state: 'BUILD_READY' });\n          }\n          break;\n        case 'cached':\n          dispatch({ type: 'sync', state: 'UP_TO_DATE' });\n          break;\n\n        default:\n          dispatch({\n            type: 'sync',\n            state: 'ERROR',\n            syncError: new Error('Unexpected return state'),\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: 'sync', state: 'ERROR', syncError: e });\n    } finally {\n      // Cancel the timer that sets the state \"BUILDING\"\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n\n  const displayState = useMemo(\n    () =>\n      calculateDisplayState({\n        activeSyncState: state.activeSyncState,\n        contentLoading: state.contentLoading,\n        content: state.content,\n      }),\n    [state.activeSyncState, state.content, state.contentLoading],\n  );\n\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: state.contentError?.toString(),\n    syncErrorMessage: state.syncError?.toString(),\n    buildLog: state.buildLog,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n\n  createContext,\n  useContext,\n\n} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useTechDocsReaderPage } from '@backstage/plugin-techdocs-react';\n\nimport { useReaderState, } from './useReaderState';\n\nconst TechDocsReaderContext = createContext({} );\n\nexport const useTechDocsReader = () => useContext(TechDocsReaderContext);\n\n/**\n * @public Render function for {@link TechDocsReaderProvider}\n */\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Provides shared building process state to the reader page components.\n *\n * @public\n */\nexport const TechDocsReaderProvider = ({\n  children,\n}) => {\n  const { '*': path = '' } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n\n  return (\n    React.createElement(TechDocsReaderContext.Provider, { value: value,}\n      , children instanceof Function ? children(value) : children\n    )\n  );\n};\n\nexport const withTechDocsReaderProvider =\n  (Component) =>\n  (props) =>\n    (\n      React.createElement(TechDocsReaderProvider, null\n        , React.createElement(Component, { ...props,} )\n      )\n    );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'techdocs:index-page',\n});\n\nexport const rootDocsRouteRef = createRouteRef({\n  id: 'techdocs:reader-page',\n  params: ['namespace', 'kind', 'name'],\n});\n\nexport const rootCatalogDocsRouteRef = createRouteRef({\n  id: 'techdocs:catalog-reader-view',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { } from 'react';\nimport { Divider, ListItem, ListItemText, makeStyles } from '@material-ui/core';\nimport { Link } from '@backstage/core-components';\n\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: 'wrap',\n  },\n  itemText: {\n    width: '100%',\n    marginBottom: '1rem',\n  },\n});\n\n/**\n * Props for {@link TechDocsSearchResultListItem}.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n/**\n * Component which renders documentation and related metadata.\n *\n * @public\n */\nexport const TechDocsSearchResultListItem = (\n  props,\n) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n  } = props;\n  const classes = useStyles();\n  const TextItem = () => {\n    const resultTitle = highlight?.fields.title ? (\n      React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.title,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag,}\n      )\n    ) : (\n      result.title\n    );\n\n    const entityTitle = highlight?.fields.entityTitle ? (\n      React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.entityTitle,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag,}\n      )\n    ) : (\n      result.entityTitle\n    );\n\n    const resultName = highlight?.fields.name ? (\n      React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.name,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag,}\n      )\n    ) : (\n      result.name\n    );\n\n    return (\n      React.createElement(ListItemText, {\n        className: classes.itemText,\n        primaryTypographyProps: { variant: 'h6' },\n        primary: \n          title ? (\n            title\n          ) : (\n            React.createElement(React.Fragment, null\n              , resultTitle, \" | \"  , entityTitle ?? resultName, \" docs\"\n            )\n          )\n        ,\n        secondary: \n          React.createElement('span', {\n            style: {\n              display: '-webkit-box',\n              WebkitBoxOrient: 'vertical',\n              WebkitLineClamp: lineClamp,\n              overflow: 'hidden',\n            },}\n          \n            , highlight?.fields.text ? (\n              React.createElement(HighlightedSearchResultText, {\n                text: highlight.fields.text,\n                preTag: highlight.preTag,\n                postTag: highlight.postTag,}\n              )\n            ) : (\n              result.text\n            )\n          )\n        ,}\n      )\n    );\n  };\n\n  const LinkWrapper = ({ children }) =>\n    asLink ? React.createElement(Link, { to: result.location,}, children) : React.createElement(React.Fragment, null, children);\n\n  const ListItemWrapper = ({ children }) =>\n    asListItem ? (\n      React.createElement(React.Fragment, null\n        , React.createElement(ListItem, { alignItems: \"flex-start\", className: classes.flexContainer,}\n          , children\n        )\n        , React.createElement(Divider, { component: \"li\",} )\n      )\n    ) : (\n      React.createElement(React.Fragment, null, children)\n    );\n\n  return (\n    React.createElement(LinkWrapper, null\n      , React.createElement(ListItemWrapper, null\n        , React.createElement(TextItem, null )\n      )\n    )\n  );\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  SearchContextProvider,\n  useSearch,\n} from '@backstage/plugin-search-react';\nimport {\n  makeStyles,\n  CircularProgress,\n  IconButton,\n  InputAdornment,\n  TextField,\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { TechDocsSearchResultListItem } from './TechDocsSearchResultListItem';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n});\n\n/**\n * Props for {@link TechDocsSearch}\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TechDocsSearchBar = (props) => {\n  const { entityId, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    term,\n    setTerm,\n    setFilters,\n    result: { loading, value: searchVal },\n  } = useSearch();\n  const classes = useStyles();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n\n    if (mounted && searchVal) {\n      // TODO: Change this into getting only subset of search results from the BE in the first place\n      // once pagination is implemented for search engines\n      // See: https://github.com/backstage/backstage/issues/6062\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n\n  const [value, setValue] = useState(term);\n\n  useDebounce(() => setTerm(value), debounceTime, [value]);\n\n  // Update the filter context when the entityId changes, e.g. when the search\n  // bar continues to be rendered, navigating between different TechDocs sites.\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters(prevFilters => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name,\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n\n  const handleQuery = (e) => {\n    if (!open) {\n      setOpen(true);\n    }\n    setValue(e.target.value);\n  };\n\n  const handleSelection = (_, selection) => {\n    if (selection?.document) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n\n  return (\n    React.createElement(Autocomplete, {\n      classes: { root: classes.root },\n      'data-testid': \"techdocs-search-bar\",\n      size: \"small\",\n      open: open,\n      getOptionLabel: () => '',\n      filterOptions: x => {\n        return x; // This is needed to get renderOption to be called after options change. Bug in material-ui?\n      },\n      onClose: () => {\n        setOpen(false);\n      },\n      onFocus: () => {\n        setOpen(true);\n      },\n      onChange: handleSelection,\n      blurOnSelect: true,\n      noOptionsText: \"No results found\"  ,\n      value: null,\n      options: options,\n      renderOption: ({ document, highlight }) => (\n        React.createElement(TechDocsSearchResultListItem, {\n          result: document,\n          lineClamp: 3,\n          asListItem: false,\n          asLink: false,\n          title: document.title,\n          highlight: highlight,}\n        )\n      ),\n      loading: loading,\n      renderInput: params => (\n        React.createElement(TextField, {\n          ...params,\n          'data-testid': \"techdocs-search-bar-input\",\n          variant: \"outlined\",\n          fullWidth: true,\n          placeholder: `Search ${entityId.name} docs`,\n          value: value,\n          onChange: handleQuery,\n          InputProps: {\n            ...params.InputProps,\n            startAdornment: (\n              React.createElement(InputAdornment, { position: \"start\",}\n                , React.createElement(IconButton, { 'aria-label': \"Query\", disabled: true,}\n                  , React.createElement(SearchIcon, null )\n                )\n              )\n            ),\n            endAdornment: (\n              React.createElement(React.Fragment, null\n                , loading ? (\n                  React.createElement(CircularProgress, { color: \"inherit\", size: 20,} )\n                ) : null\n                , params.InputProps.endAdornment\n              )\n            ),\n          },}\n        )\n      ),}\n    )\n  );\n};\n\n/**\n * Component used to render search bar on TechDocs page, scoped to\n *\n * @public\n */\nexport const TechDocsSearch = (props) => {\n  const initialState = {\n    term: '',\n    types: ['techdocs'],\n    pageCursor: '',\n    filters: props.entityId,\n  };\n  return (\n    React.createElement(SearchContextProvider, { initialState: initialState,}\n      , React.createElement(TechDocsSearchBar, { ...props,} )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\n\n\n\n/**\n * Options for creating a todo client.\n *\n * @public\n */\n\n\n\n\n\n/**\n * An implementation of the TodoApi that talks to the todo plugin backend.\n *\n * @public\n */\nexport class TodoClient  {\n    discoveryApi;\n    identityApi;\n\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  async listTodos(options) {\n    const { entity, offset, limit, orderBy, filters } = options;\n    const baseUrl = await this.discoveryApi.getBaseUrl('todo');\n    const { token } = await this.identityApi.getCredentials();\n\n    const query = new URLSearchParams();\n    if (entity) {\n      query.set('entity', stringifyEntityRef(entity));\n    }\n    if (typeof offset === 'number') {\n      query.set('offset', String(offset));\n    }\n    if (typeof limit === 'number') {\n      query.set('limit', String(limit));\n    }\n    if (orderBy) {\n      query.set('orderBy', `${orderBy.field}=${orderBy.direction}`);\n    }\n    if (filters) {\n      for (const filter of filters) {\n        query.append('filter', `${filter.field}=${filter.value}`);\n      }\n    }\n\n    const res = await fetch(`${baseUrl}/v1/todos?${query}`, {\n      headers: token\n        ? {\n            Authorization: `Bearer ${token}`,\n          }\n        : undefined,\n    });\n\n    if (!res.ok) {\n      throw await ResponseError.fromResponse(res);\n    }\n\n    const data = await res.json();\n    return data;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\n/**\n * TodoItem represents a single TODO comment in source code.\n *\n * @public\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * ApiRef for the TodoApi.\n *\n * @public\n */\nexport const todoApiRef = createApiRef({\n  id: 'plugin.todo.api',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Button, Typography } from '@material-ui/core';\nimport { CodeSnippet, EmptyState } from '@backstage/core-components';\n\nconst EXAMPLE = `auth:\n  providers:\n    google:\n      development:\n        clientId: \\${AUTH_GOOGLE_CLIENT_ID}\n        clientSecret: \\${AUTH_GOOGLE_CLIENT_SECRET}\n`;\n\nexport const EmptyProviders = () => (\n  React.createElement(EmptyState, {\n    missing: \"content\",\n    title: \"No Authentication Providers\"  ,\n    description: \"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.\"                ,\n    action: \n      React.createElement(React.Fragment, null\n        , React.createElement(Typography, { variant: \"body1\",}, \"Open \"\n           , React.createElement('code', null, \"app-config.yaml\"), \" and make the changes as highlighted below:\"\n\n        )\n        , React.createElement(CodeSnippet, {\n          text: EXAMPLE,\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: [3, 4, 5, 6, 7, 8],\n          customStyle: { background: 'inherit', fontSize: '115%' },}\n        )\n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          href: \"https://backstage.io/docs/auth/add-auth-provider\",}\n        , \"Read More\"\n\n        )\n      )\n    ,}\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport {\n  Button,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Tooltip,\n} from '@material-ui/core';\nimport {\n\n\n  useApi,\n\n  SessionState,\n} from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\n\nexport const ProviderSettingsItem = ({\n  title,\n  description,\n  icon: Icon,\n  apiRef,\n}) => {\n  const api = useApi(apiRef);\n  const [signedIn, setSignedIn] = useState(false);\n\n  useEffect(() => {\n    let didCancel = false;\n\n    const subscription = api\n      .sessionState$()\n      .subscribe((sessionState) => {\n        if (!didCancel) {\n          setSignedIn(sessionState === SessionState.SignedIn);\n        }\n      });\n\n    return () => {\n      didCancel = true;\n      subscription.unsubscribe();\n    };\n  }, [api]);\n\n  return (\n    React.createElement(ListItem, null\n      , React.createElement(ListItemIcon, null\n        , React.createElement(Icon, null )\n      )\n      , React.createElement(ListItemText, {\n        primary: title,\n        secondary: \n          React.createElement(Tooltip, { placement: \"top\", arrow: true, title: description,}\n            , React.createElement('span', null, description)\n          )\n        ,\n        secondaryTypographyProps: { noWrap: true, style: { width: '80%' } },}\n      )\n      , React.createElement(ListItemSecondaryAction, null\n        , React.createElement(Tooltip, {\n          placement: \"top\",\n          arrow: true,\n          title: signedIn ? `Sign out from ${title}` : `Sign in to ${title}`,}\n        \n          , React.createElement(Button, {\n            variant: \"outlined\",\n            color: \"primary\",\n            onClick: () => (signedIn ? api.signOut() : api.signIn()),}\n          \n            , signedIn ? `Sign out` : `Sign in`\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Star from '@material-ui/icons/Star';\nimport React from 'react';\nimport { ProviderSettingsItem } from './ProviderSettingsItem';\nimport {\n  githubAuthApiRef,\n  gitlabAuthApiRef,\n  googleAuthApiRef,\n  oktaAuthApiRef,\n  microsoftAuthApiRef,\n  bitbucketAuthApiRef,\n  atlassianAuthApiRef,\n  oneloginAuthApiRef,\n} from '@backstage/core-plugin-api';\n\n\n\n\n\nexport const DefaultProviderSettings = ({ configuredProviders }) => (\n  React.createElement(React.Fragment, null\n    , configuredProviders.includes('google') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"Google\",\n        description: \"Provides authentication towards Google APIs and identities\"      ,\n        apiRef: googleAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('microsoft') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"Microsoft\",\n        description: \"Provides authentication towards Microsoft APIs and identities\"      ,\n        apiRef: microsoftAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('github') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"GitHub\",\n        description: \"Provides authentication towards GitHub APIs\"    ,\n        apiRef: githubAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('gitlab') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"GitLab\",\n        description: \"Provides authentication towards GitLab APIs\"    ,\n        apiRef: gitlabAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('okta') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"Okta\",\n        description: \"Provides authentication towards Okta APIs\"    ,\n        apiRef: oktaAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('bitbucket') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"Bitbucket\",\n        description: \"Provides authentication towards Bitbucket APIs\"    ,\n        apiRef: bitbucketAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('onelogin') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"OneLogin\",\n        description: \"Provides authentication towards OneLogin APIs\"    ,\n        apiRef: oneloginAuthApiRef,\n        icon: Star,}\n      )\n    )\n    , configuredProviders.includes('atlassian') && (\n      React.createElement(ProviderSettingsItem, {\n        title: \"Atlassian\",\n        description: \"Provides authentication towards Atlassian APIs\"    ,\n        apiRef: atlassianAuthApiRef,\n        icon: Star,}\n      )\n    )\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { List } from '@material-ui/core';\nimport { EmptyProviders } from './EmptyProviders';\nimport { DefaultProviderSettings } from './DefaultProviderSettings';\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { InfoCard } from '@backstage/core-components';\n\n\n\n\n\nexport const UserSettingsAuthProviders = ({ providerSettings }) => {\n  const configApi = useApi(configApiRef);\n  const providersConfig = configApi.getOptionalConfig('auth.providers');\n  const configuredProviders = providersConfig?.keys() || [];\n  const providers = providerSettings ?? (\n    React.createElement(DefaultProviderSettings, { configuredProviders: configuredProviders,} )\n  );\n\n  if (!providerSettings && !configuredProviders?.length) {\n    return React.createElement(EmptyProviders, null );\n  }\n\n  return (\n    React.createElement(InfoCard, { title: \"Available Providers\" ,}\n      , React.createElement(List, { dense: true,}, providers)\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Button, Typography } from '@material-ui/core';\nimport { CodeSnippet, EmptyState } from '@backstage/core-components';\n\nconst EXAMPLE = `import { createPlugin } from '@backstage/core-plugin-api';\n\nexport default createPlugin({\n  id: 'plugin-name',\n  featureFlags: [{ name: 'enable-example-feature' }],\n});\n`;\n\nexport const EmptyFlags = () => (\n  React.createElement(EmptyState, {\n    missing: \"content\",\n    title: \"No Feature Flags\"  ,\n    description: \"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.\"                                ,\n    action: \n      React.createElement(React.Fragment, null\n        , React.createElement(Typography, { variant: \"body1\",}, \"An example for how to add a feature flag is highlighted below:\"\n\n        )\n        , React.createElement(CodeSnippet, {\n          text: EXAMPLE,\n          language: \"typescript\",\n          showLineNumbers: true,\n          highlightedNumbers: [6],\n          customStyle: { background: 'inherit', fontSize: '115%' },}\n        )\n        , React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          href: \"https://backstage.io/docs/api/utility-apis\",}\n        , \"Read More\"\n\n        )\n      )\n    ,}\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Switch,\n  Tooltip,\n} from '@material-ui/core';\n\n\n\n\n\n\n\n\nexport const FlagItem = ({ flag, enabled, toggleHandler }) => (\n  React.createElement(ListItem, { divider: true, button: true, onClick: () => toggleHandler(flag.name),}\n    , React.createElement(ListItemIcon, null\n      , React.createElement(Tooltip, { placement: \"top\", arrow: true, title: enabled ? 'Disable' : 'Enable',}\n        , React.createElement(Switch, { color: \"primary\", checked: enabled, name: flag.name,} )\n      )\n    )\n    , React.createElement(ListItemText, {\n      primary: flag.name,\n      secondary: `Registered in ${flag.pluginId} plugin`,}\n    )\n  )\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback, useState } from 'react';\nimport {\n  List,\n  TextField,\n  IconButton,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { EmptyFlags } from './EmptyFlags';\nimport { FlagItem } from './FeatureFlagsItem';\n\nimport {\n  featureFlagsApiRef,\n  FeatureFlagState,\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { InfoCard } from '@backstage/core-components';\nimport ClearIcon from '@material-ui/icons/Clear';\n\nexport const UserSettingsFeatureFlags = () => {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const featureFlags = featureFlagsApi.getRegisteredFlags();\n\n  const initialFlagState = Object.fromEntries(\n    featureFlags.map(({ name }) => [name, featureFlagsApi.isActive(name)]),\n  );\n\n  const [state, setState] = useState(initialFlagState);\n  const [filterInput, setFilterInput] = useState('');\n  const inputRef = React.useRef();\n\n  const toggleFlag = useCallback(\n    (flagName) => {\n      const newState = featureFlagsApi.isActive(flagName)\n        ? FeatureFlagState.None\n        : FeatureFlagState.Active;\n\n      featureFlagsApi.save({\n        states: { [flagName]: newState },\n        merge: true,\n      });\n\n      setState(prevState => ({\n        ...prevState,\n        [flagName]: newState === FeatureFlagState.Active,\n      }));\n    },\n    [featureFlagsApi],\n  );\n\n  if (!featureFlags.length) {\n    return React.createElement(EmptyFlags, null );\n  }\n\n  const clearFilterInput = () => {\n    setFilterInput('');\n    inputRef?.current?.focus();\n  };\n\n  let filteredFeatureFlags = Array.from(featureFlags);\n\n  const filterInputParts = filterInput\n    .split(/\\s/)\n    .map(part => part.trim().toLocaleLowerCase('en-US'));\n\n  filterInputParts.forEach(\n    part =>\n      (filteredFeatureFlags = filteredFeatureFlags.filter(featureFlag =>\n        featureFlag.name.toLocaleLowerCase('en-US').includes(part),\n      )),\n  );\n\n  const Header = () => (\n    React.createElement(Grid, { container: true, style: { justifyContent: 'space-between' },}\n      , React.createElement(Grid, { item: true, xs: 6, md: 8,}\n        , React.createElement(Typography, { variant: \"h5\",}, \"Feature Flags\" )\n      )\n      , featureFlags.length >= 10 && (\n        React.createElement(Grid, { item: true, xs: 6, md: 4,}\n          , React.createElement(TextField, {\n            label: \"Filter\",\n            style: { display: 'flex', justifyContent: 'flex-end' },\n            inputRef: ref => ref && ref.focus(),\n            InputProps: {\n              ...(filterInput.length && {\n                endAdornment: (\n                  React.createElement(IconButton, {\n                    'aria-label': \"Clear filter\" ,\n                    onClick: clearFilterInput,\n                    edge: \"end\",}\n                  \n                    , React.createElement(ClearIcon, null )\n                  )\n                ),\n              }),\n            },\n            onChange: e => setFilterInput(e.target.value),\n            value: filterInput,}\n          )\n        )\n      )\n    )\n  );\n\n  return (\n    React.createElement(InfoCard, { title: React.createElement(Header, null ),}\n      , React.createElement(List, { dense: true,}\n        , filteredFeatureFlags.map(featureFlag => {\n          const enabled = Boolean(state[featureFlag.name]);\n\n          return (\n            React.createElement(FlagItem, {\n              key: featureFlag.name,\n              flag: featureFlag,\n              enabled: enabled,\n              toggleHandler: toggleFlag,}\n            )\n          );\n        })\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles, Avatar } from '@material-ui/core';\nimport { useUserProfile } from '../useUserProfileInfo';\nimport { sidebarConfig } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`,\n  },\n}));\n\n\n\nexport const UserSettingsSignInAvatar = ({ size }) => {\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles(size ? { size } : { size: iconSize });\n  const { profile } = useUserProfile();\n\n  return (\n    React.createElement(Avatar, {\n      src: profile.picture,\n      className: classes.avatar,\n      alt: \"Profile picture\" ,}\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { IconButton, ListItemIcon, Menu, MenuItem } from '@material-ui/core';\nimport SignOutIcon from '@material-ui/icons/MeetingRoom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { identityApiRef, useApi } from '@backstage/core-plugin-api';\n\nexport const UserSettingsMenu = () => {\n  const identityApi = useApi(identityApiRef);\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(\n    undefined,\n  );\n\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(undefined);\n    setOpen(false);\n  };\n\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(IconButton, {\n        'data-testid': \"user-settings-menu\",\n        'aria-label': \"more\",\n        onClick: handleOpen,}\n      \n        , React.createElement(MoreVertIcon, null )\n      )\n      , React.createElement(Menu, { anchorEl: anchorEl, open: open, onClose: handleClose,}\n        , React.createElement(MenuItem, { 'data-testid': \"sign-out\", onClick: () => identityApi.signOut(),}\n          , React.createElement(ListItemIcon, null\n            , React.createElement(SignOutIcon, null )\n          ), \"Sign Out\"\n\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Grid, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { UserSettingsSignInAvatar } from './UserSettingsSignInAvatar';\nimport { UserSettingsMenu } from './UserSettingsMenu';\nimport { useUserProfile } from '../useUserProfileInfo';\nimport { InfoCard } from '@backstage/core-components';\n\nexport const UserSettingsProfileCard = () => {\n  const { profile, displayName } = useUserProfile();\n\n  return (\n    React.createElement(InfoCard, { title: \"Profile\", variant: \"gridItem\",}\n      , React.createElement(Grid, { container: true, spacing: 6,}\n        , React.createElement(Grid, { item: true,}\n          , React.createElement(UserSettingsSignInAvatar, { size: 96,} )\n        )\n        , React.createElement(Grid, { item: true, xs: 12, sm: true, container: true,}\n          , React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2,}\n            , React.createElement(Grid, { item: true, xs: true,}\n              , React.createElement(Typography, { variant: \"subtitle1\", gutterBottom: true,}\n                , displayName\n              )\n              , React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\",}\n                , profile.email\n              )\n            )\n          )\n          , React.createElement(Grid, { item: true,}\n            , React.createElement(UserSettingsMenu, null )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  Switch,\n  Tooltip,\n} from '@material-ui/core';\nimport { useSidebarPinState } from '@backstage/core-components';\n\nexport const UserSettingsPinToggle = () => {\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n\n  return (\n    React.createElement(ListItem, null\n      , React.createElement(ListItemText, {\n        primary: \"Pin Sidebar\" ,\n        secondary: \"Prevent the sidebar from collapsing\"    ,}\n      )\n      , React.createElement(ListItemSecondaryAction, null\n        , React.createElement(Tooltip, {\n          placement: \"top\",\n          arrow: true,\n          title: `${isPinned ? 'Unpin' : 'Pin'} Sidebar`,}\n        \n          , React.createElement(Switch, {\n            color: \"primary\",\n            checked: isPinned,\n            onChange: () => toggleSidebarPinState(),\n            name: \"pin\",\n            inputProps: { 'aria-label': 'Pin Sidebar Switch' },}\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { cloneElement } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport {\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core';\nimport { appThemeApiRef, useApi } from '@backstage/core-plugin-api';\n\n\n\n\n\n\n\nconst ThemeIcon = ({ id, activeId, icon }) =>\n  icon ? (\n    cloneElement(icon, {\n      color: activeId === id ? 'primary' : undefined,\n    })\n  ) : (\n    React.createElement(AutoIcon, { color: activeId === id ? 'primary' : undefined,} )\n  );\n\n\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    width: '100%',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingBottom: 8,\n    paddingRight: 16,\n  },\n  list: {\n    width: 'initial',\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      padding: `0 0 12px`,\n    },\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0,\n  },\n  listItemSecondaryAction: {\n    position: 'relative',\n    transform: 'unset',\n    top: 'auto',\n    right: 'auto',\n    paddingLeft: 16,\n    [theme.breakpoints.down('xs')]: {\n      paddingLeft: 0,\n    },\n  },\n}));\n\n// ToggleButtonGroup uses React.children.map instead of context\n// so wrapping with Tooltip breaks ToggleButton functionality.\nconst TooltipToggleButton = ({\n  children,\n  title,\n  value,\n  ...props\n}) => (\n  React.createElement(Tooltip, { placement: \"top\", arrow: true, title: title,}\n    , React.createElement(ToggleButton, { value: value, ...props,}\n      , children\n    )\n  )\n);\n\nexport const UserSettingsThemeToggle = () => {\n  const classes = useStyles();\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId(),\n  );\n\n  const themeIds = appThemeApi.getInstalledThemes();\n\n  const handleSetTheme = (\n    _event,\n    newThemeId,\n  ) => {\n    if (themeIds.some(t => t.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(undefined);\n    }\n  };\n\n  return (\n    React.createElement(ListItem, {\n      className: classes.list,\n      classes: { container: classes.container },}\n    \n      , React.createElement(ListItemText, {\n        className: classes.listItemText,\n        primary: \"Theme\",\n        secondary: \"Change the theme mode\"   ,}\n      )\n      , React.createElement(ListItemSecondaryAction, { className: classes.listItemSecondaryAction,}\n        , React.createElement(ToggleButtonGroup, {\n          exclusive: true,\n          size: \"small\",\n          value: themeId ?? 'auto',\n          onChange: handleSetTheme,}\n        \n          , themeIds.map(theme => {\n            const themeIcon = themeIds.find(t => t.id === theme.id)?.icon;\n            return (\n              React.createElement(TooltipToggleButton, {\n                key: theme.id,\n                title: `Select ${theme.title}`,\n                value: theme.id,}\n              \n                , React.createElement(React.Fragment, null\n                  , theme.title, \"\"\n                  , React.createElement(ThemeIcon, {\n                    id: theme.id,\n                    icon: themeIcon,\n                    activeId: themeId,}\n                  )\n                )\n              )\n            );\n          })\n          , React.createElement(Tooltip, { placement: \"top\", arrow: true, title: \"Select auto theme\"  ,}\n            , React.createElement(ToggleButton, { value: \"auto\", selected: themeId === undefined,}, \"Auto\"\n\n              , React.createElement(AutoIcon, { color: themeId === undefined ? 'primary' : undefined,} )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { InfoCard, useSidebarPinState } from '@backstage/core-components';\nimport { List } from '@material-ui/core';\nimport React from 'react';\nimport { UserSettingsPinToggle } from './UserSettingsPinToggle';\nimport { UserSettingsThemeToggle } from './UserSettingsThemeToggle';\n\nexport const UserSettingsAppearanceCard = () => {\n  const { isMobile } = useSidebarPinState();\n\n  return (\n    React.createElement(InfoCard, { title: \"Appearance\", variant: \"gridItem\",}\n      , React.createElement(List, { dense: true,}\n        , React.createElement(UserSettingsThemeToggle, null )\n        , !isMobile && React.createElement(UserSettingsPinToggle, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Grid } from '@material-ui/core';\nimport React from 'react';\nimport { UserSettingsProfileCard } from './UserSettingsProfileCard';\nimport { UserSettingsAppearanceCard } from './UserSettingsAppearanceCard';\n\nexport const UserSettingsGeneral = () => {\n  return (\n    React.createElement(Grid, { container: true, direction: \"row\", spacing: 3,}\n      , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n        , React.createElement(UserSettingsProfileCard, null )\n      )\n      , React.createElement(Grid, { item: true, xs: 12, md: 6,}\n        , React.createElement(UserSettingsAppearanceCard, null )\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Header,\n  Page,\n  TabbedLayout,\n  useSidebarPinState,\n} from '@backstage/core-components';\nimport React from 'react';\nimport { useOutlet } from 'react-router';\nimport { useElementFilter } from '@backstage/core-plugin-api';\nimport { UserSettingsAuthProviders } from './AuthProviders';\nimport { UserSettingsFeatureFlags } from './FeatureFlags';\nimport { UserSettingsGeneral } from './General';\nimport { USER_SETTINGS_TAB_KEY, } from './UserSettingsTab';\n\n\n\n\n\nexport const SettingsPage = ({ providerSettings }) => {\n  const { isMobile } = useSidebarPinState();\n  const outlet = useOutlet();\n\n  const tabs = useElementFilter(outlet, elements =>\n    elements\n      .selectByComponentData({\n        key: USER_SETTINGS_TAB_KEY,\n      })\n      .getElements(),\n  );\n\n  return (\n    React.createElement(Page, { themeId: \"home\",}\n      , !isMobile && React.createElement(Header, { title: \"Settings\",} )\n      , React.createElement(TabbedLayout, null\n        , React.createElement(TabbedLayout.Route, { path: \"general\", title: \"General\",}\n          , React.createElement(UserSettingsGeneral, null )\n        )\n        , React.createElement(TabbedLayout.Route, {\n          path: \"auth-providers\",\n          title: \"Authentication Providers\" ,}\n        \n          , React.createElement(UserSettingsAuthProviders, { providerSettings: providerSettings,} )\n        )\n        , React.createElement(TabbedLayout.Route, { path: \"feature-flags\", title: \"Feature Flags\" ,}\n          , React.createElement(UserSettingsFeatureFlags, null )\n        )\n\n        , tabs.map((child, i) => (\n          React.createElement(TabbedLayout.Route, { key: i, ...child.props,}\n            , child\n          )\n        ))\n      )\n    )\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { } from 'react';\nimport { attachComponentData } from '@backstage/core-plugin-api';\n\n/** @public */\nexport const USER_SETTINGS_TAB_KEY = 'user-settings.tab';\n\n/** @public */\n\n\n\n\n\n\n\n\n\n\n/**\n * Renders a tab inside the settings page\n * @param props - Component props\n * @public\n */\nexport const UserSettingsTab = (props) => {\n  return React.createElement(React.Fragment, null, props.children);\n};\n\nattachComponentData(UserSettingsTab, USER_SETTINGS_TAB_KEY, 'UserSettingsTab');\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  alertApiRef,\n  identityApiRef,\n\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\nexport const useUserProfile = () => {\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n\n  const { value, loading, error } = useAsync(async () => {\n    return {\n      profile: await identityApi.getProfileInfo(),\n      identity: await identityApi.getBackstageIdentity(),\n    };\n  }, []);\n\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: 'error',\n      });\n    }\n  }, [error, alertApi]);\n\n  if (loading || error) {\n    return {\n      profile: {} ,\n      displayName: '',\n      loading,\n    };\n  }\n\n  return {\n    profile: value.profile,\n    displayName: value.profile.displayName ?? value.identity.userEntityRef,\n    loading,\n  };\n};\n","var map = {\n\t\"./af\": 95191,\n\t\"./af.js\": 95191,\n\t\"./ar\": 54358,\n\t\"./ar-dz\": 71727,\n\t\"./ar-dz.js\": 71727,\n\t\"./ar-kw\": 98279,\n\t\"./ar-kw.js\": 98279,\n\t\"./ar-ly\": 87895,\n\t\"./ar-ly.js\": 87895,\n\t\"./ar-ma\": 72766,\n\t\"./ar-ma.js\": 72766,\n\t\"./ar-sa\": 52796,\n\t\"./ar-sa.js\": 52796,\n\t\"./ar-tn\": 12386,\n\t\"./ar-tn.js\": 12386,\n\t\"./ar.js\": 54358,\n\t\"./az\": 57452,\n\t\"./az.js\": 57452,\n\t\"./be\": 79053,\n\t\"./be.js\": 79053,\n\t\"./bg\": 65428,\n\t\"./bg.js\": 65428,\n\t\"./bm\": 21569,\n\t\"./bm.js\": 21569,\n\t\"./bn\": 56212,\n\t\"./bn-bd\": 24635,\n\t\"./bn-bd.js\": 24635,\n\t\"./bn.js\": 56212,\n\t\"./bo\": 13667,\n\t\"./bo.js\": 13667,\n\t\"./br\": 192,\n\t\"./br.js\": 192,\n\t\"./bs\": 51802,\n\t\"./bs.js\": 51802,\n\t\"./ca\": 19118,\n\t\"./ca.js\": 19118,\n\t\"./cs\": 39990,\n\t\"./cs.js\": 39990,\n\t\"./cv\": 30557,\n\t\"./cv.js\": 30557,\n\t\"./cy\": 4227,\n\t\"./cy.js\": 4227,\n\t\"./da\": 95406,\n\t\"./da.js\": 95406,\n\t\"./de\": 87994,\n\t\"./de-at\": 44139,\n\t\"./de-at.js\": 44139,\n\t\"./de-ch\": 86591,\n\t\"./de-ch.js\": 86591,\n\t\"./de.js\": 87994,\n\t\"./dv\": 94649,\n\t\"./dv.js\": 94649,\n\t\"./el\": 14453,\n\t\"./el.js\": 14453,\n\t\"./en-au\": 48428,\n\t\"./en-au.js\": 48428,\n\t\"./en-ca\": 36972,\n\t\"./en-ca.js\": 36972,\n\t\"./en-gb\": 13224,\n\t\"./en-gb.js\": 13224,\n\t\"./en-ie\": 18843,\n\t\"./en-ie.js\": 18843,\n\t\"./en-il\": 32732,\n\t\"./en-il.js\": 32732,\n\t\"./en-in\": 76579,\n\t\"./en-in.js\": 76579,\n\t\"./en-nz\": 29851,\n\t\"./en-nz.js\": 29851,\n\t\"./en-sg\": 70442,\n\t\"./en-sg.js\": 70442,\n\t\"./eo\": 10654,\n\t\"./eo.js\": 10654,\n\t\"./es\": 63621,\n\t\"./es-do\": 68791,\n\t\"./es-do.js\": 68791,\n\t\"./es-mx\": 67278,\n\t\"./es-mx.js\": 67278,\n\t\"./es-us\": 60717,\n\t\"./es-us.js\": 60717,\n\t\"./es.js\": 63621,\n\t\"./et\": 72404,\n\t\"./et.js\": 72404,\n\t\"./eu\": 62944,\n\t\"./eu.js\": 62944,\n\t\"./fa\": 30496,\n\t\"./fa.js\": 30496,\n\t\"./fi\": 98137,\n\t\"./fi.js\": 98137,\n\t\"./fil\": 32872,\n\t\"./fil.js\": 32872,\n\t\"./fo\": 6545,\n\t\"./fo.js\": 6545,\n\t\"./fr\": 49090,\n\t\"./fr-ca\": 13049,\n\t\"./fr-ca.js\": 13049,\n\t\"./fr-ch\": 12338,\n\t\"./fr-ch.js\": 12338,\n\t\"./fr.js\": 49090,\n\t\"./fy\": 95088,\n\t\"./fy.js\": 95088,\n\t\"./ga\": 77812,\n\t\"./ga.js\": 77812,\n\t\"./gd\": 8374,\n\t\"./gd.js\": 8374,\n\t\"./gl\": 63649,\n\t\"./gl.js\": 63649,\n\t\"./gom-deva\": 52674,\n\t\"./gom-deva.js\": 52674,\n\t\"./gom-latn\": 44948,\n\t\"./gom-latn.js\": 44948,\n\t\"./gu\": 24033,\n\t\"./gu.js\": 24033,\n\t\"./he\": 10175,\n\t\"./he.js\": 10175,\n\t\"./hi\": 58055,\n\t\"./hi.js\": 58055,\n\t\"./hr\": 41678,\n\t\"./hr.js\": 41678,\n\t\"./hu\": 85111,\n\t\"./hu.js\": 85111,\n\t\"./hy-am\": 26530,\n\t\"./hy-am.js\": 26530,\n\t\"./id\": 38928,\n\t\"./id.js\": 38928,\n\t\"./is\": 11696,\n\t\"./is.js\": 11696,\n\t\"./it\": 98710,\n\t\"./it-ch\": 38821,\n\t\"./it-ch.js\": 38821,\n\t\"./it.js\": 98710,\n\t\"./ja\": 93974,\n\t\"./ja.js\": 93974,\n\t\"./jv\": 70648,\n\t\"./jv.js\": 70648,\n\t\"./ka\": 54731,\n\t\"./ka.js\": 54731,\n\t\"./kk\": 43501,\n\t\"./kk.js\": 43501,\n\t\"./km\": 84398,\n\t\"./km.js\": 84398,\n\t\"./kn\": 91825,\n\t\"./kn.js\": 91825,\n\t\"./ko\": 13729,\n\t\"./ko.js\": 13729,\n\t\"./ku\": 19670,\n\t\"./ku.js\": 19670,\n\t\"./ky\": 78797,\n\t\"./ky.js\": 78797,\n\t\"./lb\": 50627,\n\t\"./lb.js\": 50627,\n\t\"./lo\": 65859,\n\t\"./lo.js\": 65859,\n\t\"./lt\": 80355,\n\t\"./lt.js\": 80355,\n\t\"./lv\": 16594,\n\t\"./lv.js\": 16594,\n\t\"./me\": 45324,\n\t\"./me.js\": 45324,\n\t\"./mi\": 11689,\n\t\"./mi.js\": 11689,\n\t\"./mk\": 61308,\n\t\"./mk.js\": 61308,\n\t\"./ml\": 85241,\n\t\"./ml.js\": 85241,\n\t\"./mn\": 76320,\n\t\"./mn.js\": 76320,\n\t\"./mr\": 96771,\n\t\"./mr.js\": 96771,\n\t\"./ms\": 20503,\n\t\"./ms-my\": 77748,\n\t\"./ms-my.js\": 77748,\n\t\"./ms.js\": 20503,\n\t\"./mt\": 55534,\n\t\"./mt.js\": 55534,\n\t\"./my\": 62727,\n\t\"./my.js\": 62727,\n\t\"./nb\": 7550,\n\t\"./nb.js\": 7550,\n\t\"./ne\": 49899,\n\t\"./ne.js\": 49899,\n\t\"./nl\": 41228,\n\t\"./nl-be\": 31225,\n\t\"./nl-be.js\": 31225,\n\t\"./nl.js\": 41228,\n\t\"./nn\": 97130,\n\t\"./nn.js\": 97130,\n\t\"./oc-lnc\": 93130,\n\t\"./oc-lnc.js\": 93130,\n\t\"./pa-in\": 91282,\n\t\"./pa-in.js\": 91282,\n\t\"./pl\": 28190,\n\t\"./pl.js\": 28190,\n\t\"./pt\": 41549,\n\t\"./pt-br\": 78135,\n\t\"./pt-br.js\": 78135,\n\t\"./pt.js\": 41549,\n\t\"./ro\": 307,\n\t\"./ro.js\": 307,\n\t\"./ru\": 89272,\n\t\"./ru.js\": 89272,\n\t\"./sd\": 79248,\n\t\"./sd.js\": 79248,\n\t\"./se\": 74969,\n\t\"./se.js\": 74969,\n\t\"./si\": 65522,\n\t\"./si.js\": 65522,\n\t\"./sk\": 61581,\n\t\"./sk.js\": 61581,\n\t\"./sl\": 56428,\n\t\"./sl.js\": 56428,\n\t\"./sq\": 34611,\n\t\"./sq.js\": 34611,\n\t\"./sr\": 19821,\n\t\"./sr-cyrl\": 20185,\n\t\"./sr-cyrl.js\": 20185,\n\t\"./sr.js\": 19821,\n\t\"./ss\": 35029,\n\t\"./ss.js\": 35029,\n\t\"./sv\": 80939,\n\t\"./sv.js\": 80939,\n\t\"./sw\": 73107,\n\t\"./sw.js\": 73107,\n\t\"./ta\": 72304,\n\t\"./ta.js\": 72304,\n\t\"./te\": 93036,\n\t\"./te.js\": 93036,\n\t\"./tet\": 99717,\n\t\"./tet.js\": 99717,\n\t\"./tg\": 87669,\n\t\"./tg.js\": 87669,\n\t\"./th\": 94959,\n\t\"./th.js\": 94959,\n\t\"./tk\": 92661,\n\t\"./tk.js\": 92661,\n\t\"./tl-ph\": 52234,\n\t\"./tl-ph.js\": 52234,\n\t\"./tlh\": 94120,\n\t\"./tlh.js\": 94120,\n\t\"./tr\": 81111,\n\t\"./tr.js\": 81111,\n\t\"./tzl\": 53080,\n\t\"./tzl.js\": 53080,\n\t\"./tzm\": 88246,\n\t\"./tzm-latn\": 25385,\n\t\"./tzm-latn.js\": 25385,\n\t\"./tzm.js\": 88246,\n\t\"./ug-cn\": 48777,\n\t\"./ug-cn.js\": 48777,\n\t\"./uk\": 2014,\n\t\"./uk.js\": 2014,\n\t\"./ur\": 45953,\n\t\"./ur.js\": 45953,\n\t\"./uz\": 89716,\n\t\"./uz-latn\": 87791,\n\t\"./uz-latn.js\": 87791,\n\t\"./uz.js\": 89716,\n\t\"./vi\": 99816,\n\t\"./vi.js\": 99816,\n\t\"./x-pseudo\": 26064,\n\t\"./x-pseudo.js\": 26064,\n\t\"./yo\": 22556,\n\t\"./yo.js\": 22556,\n\t\"./zh-cn\": 7414,\n\t\"./zh-cn.js\": 7414,\n\t\"./zh-hk\": 50824,\n\t\"./zh-hk.js\": 50824,\n\t\"./zh-mo\": 88589,\n\t\"./zh-mo.js\": 88589,\n\t\"./zh-tw\": 63285,\n\t\"./zh-tw.js\": 63285\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 96616;"],"sourceRoot":""}