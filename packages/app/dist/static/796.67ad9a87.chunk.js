"use strict";(()=>{(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[796],{60796:function(fe,C,u){u.r(C),u.d(C,{RealLogViewer:function(){return he}});var i=u(2784),V=u(10289),x=u(61837),w=u(19353),O=u(7688),P=u(50166);function U({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var W=u(79692),Z=u(41128),k=u(31754),b=u(66054),L=u(81463),E=u(34505),B=u(57186),R=u(32720),I=u(92901),F=u(45410),D=u(72779),M=u.n(D),G=u(74600),N=u.n(G),$=u(86619),Y=u(90436),J=u(48049),Q=u(51209),A=u(36444);function X(e,t){return typeof e=="function"?e(t):e}var q=u(79090);function _(e){var t=(0,i.useState)(e),n=t[0],r=t[1],o=(0,q.t)();return[n,(0,i.useCallback)(function(s){o()&&r(s)},[])]}function ee(e){e===void 0&&(e=!1);var t=_(e),n=t[0],r=t[1];return[n,(0,i.useCallback)(function(o){r(function(s){return typeof o=="undefined"?!s:Boolean(X(o,s))})},[])]}var T=u(99155),te=u(95074);const z=U(),j=/\n\r?/g,H=Object.fromEntries(Object.entries({1:e=>({...e,bold:!0}),3:e=>({...e,italic:!0}),4:e=>({...e,underline:!0}),22:({bold:e,...t})=>t,23:({italic:e,...t})=>t,24:({underline:e,...t})=>t,30:e=>({...e,foreground:"black"}),31:e=>({...e,foreground:"red"}),32:e=>({...e,foreground:"green"}),33:e=>({...e,foreground:"yellow"}),34:e=>({...e,foreground:"blue"}),35:e=>({...e,foreground:"magenta"}),36:e=>({...e,foreground:"cyan"}),37:e=>({...e,foreground:"white"}),39:({foreground:e,...t})=>t,90:e=>({...e,foreground:"grey"}),40:e=>({...e,background:"black"}),41:e=>({...e,background:"red"}),42:e=>({...e,background:"green"}),43:e=>({...e,background:"yellow"}),44:e=>({...e,background:"blue"}),45:e=>({...e,background:"magenta"}),46:e=>({...e,background:"cyan"}),47:e=>({...e,background:"white"}),49:({background:e,...t})=>t}).map(([e,t])=>[`\x1B[${e}m`,t]));class S{constructor(t=1,n=[]){this.lineNumber=t,this.chunks=n,this.text=n.map(r=>r.text).join("").toLocaleLowerCase("en-US")}lastChunk(){return this.chunks[this.chunks.length-1]}replaceLastChunk(t){t&&(this.chunks.splice(this.chunks.length-1,1,...t),this.text=this.chunks.map(n=>n.text).join("").toLocaleLowerCase("en-US"))}}class ne{constructor(){this.text="",this.lines=[],this.processLines=(t,n={},r=1)=>{var o;const s=[];let l=n,c=r,a=0;for(j.lastIndex=0;;){const d=j.exec(t);if(!d){const g=this.processText(t.slice(a),l);return s.push(new S(c,g)),s}const h=t.slice(a,d.index);a=d.index+d[0].length;const f=this.processText(h,l);s.push(new S(c,f)),l=(o=f[f.length-1].modifiers)!=null?o:l,c+=1}},this.processText=(t,n)=>{const r=[];let o=n,s=0;for(z.lastIndex=0;;){const l=z.exec(t);if(!l)return r.push({text:t.slice(s),modifiers:o}),r;const c=t.slice(s,l.index);r.push({text:c,modifiers:o}),s=l.index+l[0].length,o=this.processCode(l[0],o)}},this.processCode=(t,n)=>{var r,o;return(o=(r=H[t])==null?void 0:r.call(H,n))!=null?o:n}}process(t){var n,r,o;if(this.text===t)return this.lines;if(t.startsWith(this.text)){const s=this.lines.length>0?this.lines.length-1:0,l=(n=this.lines[s])!=null?n:new S,c=l.lastChunk(),a=this.processLines(((r=c==null?void 0:c.text)!=null?r:"")+t.slice(this.text.length),c==null?void 0:c.modifiers,l==null?void 0:l.lineNumber);l.replaceLastChunk((o=a[0])==null?void 0:o.chunks),this.lines[s]=l,this.lines.push(...a.slice(1))}else this.lines=this.processLines(t);return this.text=t,this.lines}}const K=40,oe=(0,W.Z)(e=>({root:{background:e.palette.background.paper},header:{height:K,display:"flex",alignItems:"center",justifyContent:"flex-end"},log:{fontFamily:'"Monaco", monospace',fontSize:e.typography.pxToRem(12)},line:{position:"relative",whiteSpace:"pre","&:hover":{background:e.palette.action.hover}},lineSelected:{background:e.palette.action.selected,"&:hover":{background:e.palette.action.selected}},lineCopyButton:{position:"absolute",paddingTop:0,paddingBottom:0},lineNumber:{display:"inline-block",textAlign:"end",width:60,marginRight:e.spacing(1),cursor:"pointer"},textHighlight:{background:(0,Z.Fq)(e.palette.info.main,.15)},textSelectedHighlight:{background:(0,Z.Fq)(e.palette.info.main,.4)},modifierBold:{fontWeight:e.typography.fontWeightBold},modifierItalic:{fontStyle:"italic"},modifierUnderline:{textDecoration:"underline"},modifierForegroundBlack:{color:k.Z.black},modifierForegroundRed:{color:b.Z[500]},modifierForegroundGreen:{color:L.Z[500]},modifierForegroundYellow:{color:E.Z[500]},modifierForegroundBlue:{color:B.Z[500]},modifierForegroundMagenta:{color:R.Z[500]},modifierForegroundCyan:{color:I.Z[500]},modifierForegroundWhite:{color:k.Z.white},modifierForegroundGrey:{color:F.Z[500]},modifierBackgroundBlack:{background:k.Z.black},modifierBackgroundRed:{background:b.Z[500]},modifierBackgroundGreen:{background:L.Z[500]},modifierBackgroundYellow:{background:E.Z[500]},modifierBackgroundBlue:{background:B.Z[500]},modifierBackgroundMagenta:{background:R.Z[500]},modifierBackgroundCyan:{background:I.Z[500]},modifierBackgroundWhite:{background:k.Z.white},modifierBackgroundGrey:{background:F.Z[500]}}),{name:"BackstageLogViewer"});function se(e,t){const n=new Array;if(t.bold&&n.push(e.modifierBold),t.italic&&n.push(e.modifierItalic),t.underline&&n.push(e.modifierUnderline),t.foreground){const r=`modifierForeground${N()(t.foreground)}`;n.push(e[r])}if(t.background){const r=`modifierBackground${N()(t.background)}`;n.push(e[r])}return n.length>0?n.join(" "):void 0}function re(e,t){if(!t||!e.includes(t))return;const n=new Array;let r=0;for(;;){const o=e.indexOf(t,r);if(o===-1)break;const s=o+t.length;n.push({start:o,end:s}),r=s}return n}function le(e,t){const n=re(e.text,t);if(!n)return e.chunks;const r=new Array;let o=0,s=0,l=n[s];for(const c of e.chunks){const{text:a,modifiers:d}=c;if(!l||o+a.length<l.start){r.push(c),o+=a.length;continue}let h=0;for(;l;){const g=Math.max(l.start-o,0);if(g>a.length)break;const p=Math.min(l.end-o,a.length);if(g>h&&r.push({text:a.slice(h,g),modifiers:d}),p>g&&r.push({modifiers:d,highlight:s,text:a.slice(g,p)}),h=p,l.end-o===p)s+=1,l=n[s];else break}h<a.length&&r.push({text:a.slice(h),modifiers:d}),o+=a.length}return r}function ie({line:e,classes:t,searchText:n,highlightResultIndex:r}){const o=(0,i.useMemo)(()=>le(e,n),[e,n]),s=(0,i.useMemo)(()=>o.map(({text:l,modifiers:c,highlight:a},d)=>i.createElement("span",{key:d,className:M()(se(t,c),a!==void 0&&(a===r?t.textSelectedHighlight:t.textHighlight))},l)),[o,r,t]);return i.createElement(i.Fragment,null,s)}function ae(e){var t;const{resultCount:n,resultIndexStep:r,toggleShouldFilter:o}=e,s=(t=e.resultIndex)!=null?t:0,l=c=>{c.key==="Enter"&&(c.metaKey||c.ctrlKey||c.altKey?o():r(c.shiftKey))};return i.createElement(i.Fragment,null,n!==void 0&&i.createElement(i.Fragment,null,i.createElement(x.Z,{size:"small",onClick:()=>r(!0)},i.createElement(J.Z,null)),i.createElement(Y.Z,null,Math.min(s+1,n),"/",n),i.createElement(x.Z,{size:"small",onClick:()=>r()},i.createElement(Q.Z,null))),i.createElement($.Z,{size:"small",variant:"standard",placeholder:"Search",value:e.searchInput,onKeyPress:l,onChange:c=>e.setSearchInput(c.target.value)}),i.createElement(x.Z,{size:"small",onClick:o},e.shouldFilter?i.createElement(A.Z,{color:"primary"}):i.createElement(A.Z,{color:"disabled"})))}function ce(e,t){if(!t)return{lines:e};const n=[],r=[];for(const o of e)if(o.text.includes(t)){n.push(o);let s=0,l=0;for(;;){const c=o.text.indexOf(t,s);if(c===-1)break;r.push({lineNumber:o.lineNumber,lineIndex:l++}),s=c+t.length}}return{lines:n,results:r}}function ue(e){var t;const[n,r]=(0,i.useState)(""),o=n.toLocaleLowerCase("en-US"),[s,l]=(0,i.useState)(0),[c,a]=ee(!1),d=(0,i.useMemo)(()=>ce(e,o),[e,o]),h=d.results?d.results[Math.min(s,d.results.length-1)]:void 0,f=(t=d.results)==null?void 0:t.length,g=p=>{if(p){if(f!==void 0){const m=Math.min(s-1,f-2);l(m<0?f-1:m)}}else if(f!==void 0){const m=s+1;l(m>=f?0:m)}};return{lines:c?d.lines:e,searchText:o,searchInput:n,setSearchInput:r,shouldFilter:c,toggleShouldFilter:a,resultCount:f,resultIndex:s,resultIndexStep:g,resultLine:h==null?void 0:h.lineNumber,resultLineIndex:h==null?void 0:h.lineIndex}}function de(e){const t=(0,T.h_)(T.VE),[n,r]=(0,i.useState)(),o=n?Math.min(n.start,n.end):void 0,s=n?Math.max(n.start,n.end):void 0,[{error:l},c]=(0,te.Z)();return(0,i.useEffect)(()=>{l&&t.post(l)},[l,t]),{shouldShowButton(a){return o===a||s===a},isSelected(a){return n?o<=a&&a<=s:!1},setSelection(a,d){r(d?h=>h?{start:h.start,end:a}:{start:a,end:a}:h=>(h==null?void 0:h.start)===a&&(h==null?void 0:h.end)===a?void 0:{start:a,end:a})},copySelection(){if(n){const a=e.slice(Math.min(n.start,n.end)-1,Math.max(n.start,n.end)).map(d=>d.chunks.map(h=>h.text).join("")).join(`
`);c(a),r(void 0)}}}}function he(e){const t=oe({classes:e.classes}),n=(0,i.useRef)(null),o=(0,i.useMemo)(()=>new ne,[]).process(e.text),s=ue(o),l=de(o),c=(0,V.TH)();(0,i.useEffect)(()=>{s.resultLine!==void 0&&n.current&&n.current.scrollToItem(s.resultLine-1,"center")},[s.resultLine]),(0,i.useEffect)(()=>{if(c.hash){const d=parseInt(c.hash.replace(/\D/g,""),10);l.setSelection(d,!1)}},[]);const a=(d,h)=>{l.setSelection(d,h.shiftKey)};return i.createElement(O.Z,null,({height:d,width:h})=>i.createElement("div",{style:{width:h,height:d},className:t.root},i.createElement("div",{className:t.header},i.createElement(ae,{...s})),i.createElement(P.t7,{ref:n,className:t.log,height:d-K,width:h,itemData:s.lines,itemSize:20,itemCount:s.lines.length},({index:f,style:g,data:p})=>{const m=p[f],{lineNumber:v}=m;return i.createElement("div",{style:{...g},className:M()(t.line,{[t.lineSelected]:l.isSelected(v)})},l.shouldShowButton(v)&&i.createElement(x.Z,{"data-testid":"copy-button",size:"small",className:t.lineCopyButton,onClick:()=>l.copySelection()},i.createElement(w.Z,{fontSize:"inherit"})),i.createElement("a",{role:"row",target:"_self",href:`#line-${v}`,className:t.lineNumber,onClick:y=>a(v,y),onKeyPress:y=>a(v,y)},v),i.createElement(ie,{line:m,classes:t,searchText:s.searchText,highlightResultIndex:s.resultLine===v?s.resultLineIndex:void 0}))})))}}}]);})();

//# sourceMappingURL=796.67ad9a87.chunk.js.map