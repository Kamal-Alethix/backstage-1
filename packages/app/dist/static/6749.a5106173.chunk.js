"use strict";(()=>{(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6749],{36749:function(q,C,a){a.r(C),a.d(C,{GcpProjectsPage:function(){return k}});var e=a(2784),j=a(10289),I=a(60905),b=a(86619),P=a(77277),t=a(23192),S=a(62833),y=a(36964),L=a(79623);const H=()=>{const[l,o]=(0,e.useState)(""),[c,n]=(0,e.useState)(""),[u,s]=(0,e.useState)(!0),r={ProjectName:l,ProjectId:c};return e.createElement(t.Content,null,e.createElement(I.Z,{container:!0,spacing:3},e.createElement(I.Z,{item:!0,xs:12,md:6},e.createElement(t.InfoCard,{title:"Create new GCP Project"},e.createElement(t.SimpleStepper,null,e.createElement(t.SimpleStepperStep,{title:"Project Name"},e.createElement(b.Z,{variant:"outlined",name:"projectName",label:"Project Name",helperText:"The name of the new project.",inputProps:{"aria-label":"Project Name"},onChange:g=>o(g.target.value),value:l,fullWidth:!0})),e.createElement(t.SimpleStepperStep,{title:"Project ID"},e.createElement(b.Z,{variant:"outlined",name:"projectId",label:"projectId",onChange:g=>n(g.target.value),value:c,fullWidth:!0})),e.createElement(t.SimpleStepperStep,{title:"Review",actions:{nextText:"Confirm",onNext:()=>s(!1)}},e.createElement(t.StructuredMetadataTable,{metadata:r}))),e.createElement(P.Z,{component:S.rU,variant:"text","data-testid":"cancel-button",color:"primary",to:"/gcp-projects"},"Cancel"),e.createElement(P.Z,{component:S.rU,variant:"contained",color:"primary",disabled:u,to:`newProject?projectName=${encodeURIComponent(l)},projectId=${encodeURIComponent(c)}`},"Create")))))},G=e.createElement(e.Fragment,null,e.createElement(t.HeaderLabel,{label:"Owner",value:"Spotify"}),e.createElement(t.HeaderLabel,{label:"Lifecycle",value:"Production"})),A=()=>{const l=(0,y.useRouteRef)(L._Z)();return e.createElement(t.Page,{themeId:"tool"},e.createElement(t.Header,{title:"New GCP Project",type:"GCP",typeLink:l},G),e.createElement(t.Content,null,e.createElement(t.ContentHeader,{title:""},e.createElement(t.SupportButton,null,"This plugin allows you to view and interact with your gcp projects.")),e.createElement(H,null)))};var D=a(79692),N=a(67358),T=a(37390),B=a(27556),F=a(97485),f=a(89571),m=a(15584),d=a(90436),O=a(38592),U=a(78887),$=a(77246),p=function(){return p=Object.assign||function(l){for(var o,c=1,n=arguments.length;c<n;c++){o=arguments[c];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(l[u]=o[u])}return l},p.apply(this,arguments)};function R(l,o){var c=(0,U.F)({status:"not-executed",error:void 0,result:o}),n=c[0],u=c[1],s=(0,e.useRef)(),r=(0,e.useRef)(),g=(0,$.x)({execute:function(){for(var v=[],E=0;E<arguments.length;E++)v[E]=arguments[E];r.current=v;var i=l.apply(void 0,v);return s.current=i,u(function(Z){return p(p({},Z),{status:"loading"})}),i.then(function(Z){i===s.current&&u(function(h){return p(p({},h),{status:"success",error:void 0,result:Z})})},function(Z){i===s.current&&u(function(h){return p(p({},h),{status:"error",error:Z})})}),i},reset:function(){u({status:"not-executed",error:void 0,result:o}),s.current=void 0,r.current=void 0}});return[n,(0,e.useMemo)(function(){return{reset:function(){g.current.reset()},execute:function(){for(var v,E=[],i=0;i<arguments.length;i++)E[i]=arguments[i];return(v=g.current).execute.apply(v,E)}}},[]),{promise:s.current,lastArgs:r.current}]}var x=a(52084),W=a(31846);const M=(0,D.Z)(l=>({root:{maxWidth:720,margin:l.spacing(2)},title:{padding:l.spacing(1,0,2,0)},table:{padding:l.spacing(1)}})),z=()=>{const l=(0,y.useApi)(W.gcpApiRef),o=M(),[{status:c,result:n,error:u},{execute:s}]=R(async()=>l.getProject(decodeURIComponent(location.search.split("projectId=")[1])));if((0,x.n)(s),c==="loading")return e.createElement(N.Z,null);if(u)return e.createElement(t.WarningPanel,{title:"Failed to load project"},u.toString());const r="https://console.cloud.google.com";return e.createElement(T.Z,{component:B.Z,className:o.table},e.createElement(T.Z,null,e.createElement(F.Z,null,e.createElement(f.Z,null,e.createElement(m.Z,null,e.createElement(d.Z,{noWrap:!0},"Name")),e.createElement(m.Z,null,n==null?void 0:n.name)),e.createElement(f.Z,null,e.createElement(m.Z,null,e.createElement(d.Z,{noWrap:!0},"Project Number")),e.createElement(m.Z,null,n==null?void 0:n.projectNumber)),e.createElement(f.Z,null,e.createElement(m.Z,null,e.createElement(d.Z,{noWrap:!0},"Project ID")),e.createElement(m.Z,null,n==null?void 0:n.projectId)),e.createElement(f.Z,null,e.createElement(m.Z,null,e.createElement(d.Z,{noWrap:!0},"State")),e.createElement(m.Z,null,n==null?void 0:n.lifecycleState)),e.createElement(f.Z,null,e.createElement(m.Z,null,e.createElement(d.Z,{noWrap:!0},"Creation Time")),e.createElement(m.Z,null,n==null?void 0:n.createTime)),e.createElement(f.Z,null,e.createElement(m.Z,null,e.createElement(d.Z,{noWrap:!0},"Links")),e.createElement(m.Z,null,e.createElement(O.Z,{variant:"text",color:"primary","aria-label":"text primary button group"},(n==null?void 0:n.name)&&e.createElement(P.Z,null,e.createElement("a",{href:`${r}/home/dashboard?project=${n.name}&supportedpurview=project`,target:"_blank",rel:"noreferrer noopener"},"GCP")),(n==null?void 0:n.name)&&e.createElement(P.Z,null,e.createElement("a",{href:`${r}/logs/query?project=${n.name}&supportedpurview=project`,target:"_blank",rel:"noreferrer noopener"},"Logs"))))))))},J=e.createElement(e.Fragment,null,e.createElement(t.HeaderLabel,{label:"Owner",value:"Spotify"}),e.createElement(t.HeaderLabel,{label:"Lifecycle",value:"Production"})),K=()=>{const l=(0,y.useRouteRef)(L._Z)();return e.createElement(t.Page,{themeId:"service"},e.createElement(t.Header,{title:"GCP Project Details",type:"GCP",typeLink:l},J),e.createElement(t.Content,null,e.createElement(t.ContentHeader,{title:""},e.createElement(t.SupportButton,null,"Support Button")),e.createElement(z,null)))};var Q=a(80030);const X=({text:l,max:o})=>l.length<o?e.createElement("span",null,l):e.createElement(Q.ZP,{title:l},e.createElement("span",null,l.slice(0,o),"...")),Y=e.createElement(e.Fragment,null,e.createElement(t.HeaderLabel,{label:"Owner",value:"Spotify"}),e.createElement(t.HeaderLabel,{label:"Lifecycle",value:"Production"})),w=()=>{const l=(0,y.useApi)(W.gcpApiRef),[{status:o,result:c,error:n},{execute:u}]=R(()=>l.listProjects());if((0,x.n)(u),o==="loading")return e.createElement(N.Z,null);if(n)return e.createElement(t.WarningPanel,{title:"Failed to load projects"},n.toString());function s(r){return e.createElement(t.Link,{to:`project?projectId=${encodeURIComponent(r)}`},e.createElement(d.Z,{color:"primary"},e.createElement(X,{text:r,max:60})))}return e.createElement("div",{style:{height:"95%",width:"100%"}},e.createElement(t.Table,{columns:[{field:"name",title:"Name",defaultSort:"asc"},{field:"projectNumber",title:"Project Number"},{field:"projectID",title:"Project ID",render:r=>s(r.id)},{field:"state",title:"State"},{field:"creationTime",title:"Creation Time"}],data:(c==null?void 0:c.map(r=>({id:r.projectId,name:r.name,projectNumber:(r==null?void 0:r.projectNumber)||"Error",projectID:r.projectId,state:(r==null?void 0:r.lifecycleState)||"Error",creationTime:(r==null?void 0:r.createTime)||"Error"})))||[],options:{pageSize:5,pageSizeOptions:[5,10,25,50,100]}}))},V=()=>e.createElement(t.Page,{themeId:"service"},e.createElement(t.Header,{title:"GCP Projects",type:"tool"},Y),e.createElement(t.Content,null,e.createElement(t.ContentHeader,{title:""},e.createElement(P.Z,{component:S.rU,variant:"contained",color:"primary",to:"new"},"New Project"),e.createElement(t.SupportButton,null,"All your software catalog entities")),e.createElement(w,null))),k=()=>e.createElement(j.Z5,null,e.createElement(j.AW,{path:"/",element:e.createElement(V,null)}),e.createElement(j.AW,{path:"/new",element:e.createElement(A,null)}),e.createElement(j.AW,{path:"/project",element:e.createElement(K,null)}))}}]);})();

//# sourceMappingURL=6749.a5106173.chunk.js.map