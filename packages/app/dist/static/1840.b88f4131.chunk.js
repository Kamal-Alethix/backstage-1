"use strict";(()=>{(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[1840],{60008:function(ee,A,o){var R,f=o(14859),C=o(93291);R={value:!0},A.Z=void 0;var Z=C(o(2784)),x=f(o(50175)),O=(0,x.default)(Z.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap");A.Z=O},81840:function(ee,A,o){o.r(A),o.d(A,{CatalogGraphPage:function(){return Ne}});var R=o(48023),f=o(23192),C=o(36964),Z=o(53479),x=o(79692),O=o(60905),te=o(27556),S=o(90436),ne=o(36444),oe=o(60008),se=o(13737),e=o(2784),k=o(10289),E=o(70395),P=o(95544);const ae={[E.Nm.LEFT_RIGHT]:"Left to right",[E.Nm.RIGHT_LEFT]:"Right to left",[E.Nm.TOP_BOTTOM]:"Top to bottom",[E.Nm.BOTTOM_TOP]:"Bottom to top"},re=({value:t,onChange:a})=>{const n=(0,e.useCallback)(l=>a(l),[a]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(f.Select,{label:"Direction",selected:t,items:Object.values(E.Nm).map(l=>({label:ae[l],value:l})),onChange:n}))};var le=o(42494),ce=o(20633),ie=o(50581),me=o(61837),de=o(33375);const ue=(0,x.Z)({formControl:{width:"100%",maxWidth:300}}),pe=({value:t,onChange:a})=>{const n=ue(),l=(0,e.useCallback)(d=>{const c=Number(d.target.value);a(c<=0?Number.POSITIVE_INFINITY:c)},[a]),r=(0,e.useCallback)(()=>{a(Number.POSITIVE_INFINITY)},[a]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(le.Z,{variant:"outlined",className:n.formControl},e.createElement(S.Z,{variant:"button"},"Max Depth"),e.createElement(ce.Z,{type:"number",placeholder:"\u221E Infinite",value:isFinite(t)?t:"",onChange:l,endAdornment:e.createElement(ie.Z,{position:"end"},e.createElement(me.Z,{"aria-label":"clear max depth",onClick:r,edge:"end"},e.createElement(de.Z,null))),inputProps:{"aria-label":"maxp"},labelWidth:0})))};var B=o(5806),G=o(21324),U=o(86619),W=o(19996),V=o(25505),Y=o(38016),Q=o(88013),he=o(64279);const ge=(0,x.Z)({formControl:{maxWidth:300}}),fe=({value:t,onChange:a})=>{const n=ge(),l=(0,C.useApi)(C.alertApiRef),r=(0,C.useApi)(Z.catalogApiRef),{error:d,value:c}=(0,he.default)(async()=>await r.getEntityFacets({facets:["kind"]}).then(m=>{var u;return((u=m.facets.kind)==null?void 0:u.map(h=>h.value).sort())||[]}));(0,e.useEffect)(()=>{d&&l.post({message:"Failed to load entity kinds",severity:"error"})},[d,l]);const i=(0,e.useMemo)(()=>c&&c.map(m=>m.toLocaleLowerCase("en-US")),[c]),p=(0,e.useCallback)((m,u)=>{a(i&&i.every(h=>u.includes(h))?void 0:u)},[i,a]),g=(0,e.useCallback)(()=>{a(t!=null&&t.length?t:void 0)},[t,a]);return!(c!=null&&c.length)||!(i!=null&&i.length)||d?e.createElement(e.Fragment,null):e.createElement(P.Z,{pb:1,pt:1},e.createElement(S.Z,{variant:"button"},"Kinds"),e.createElement(Q.ZP,{className:n.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:i,value:t!=null?t:i,getOptionLabel:m=>{var u;return(u=c[i.indexOf(m)])!=null?u:m},onChange:p,onBlur:g,renderOption:(m,{selected:u})=>{var h;return e.createElement(B.Z,{control:e.createElement(G.Z,{icon:e.createElement(V.Z,{fontSize:"small"}),checkedIcon:e.createElement(W.Z,{fontSize:"small"}),checked:u}),label:(h=c[i.indexOf(m)])!=null?h:m})},size:"small",popupIcon:e.createElement(Y.Z,{"data-testid":"selected-kinds-expand"}),renderInput:m=>e.createElement(U.Z,{...m,variant:"outlined"})}))},Ee=(0,x.Z)({formControl:{maxWidth:300}}),ye=({relationPairs:t,value:a,onChange:n})=>{const l=Ee(),r=(0,e.useMemo)(()=>t.flat(),[t]),d=(0,e.useCallback)((i,p)=>{n(r.every(g=>p.includes(g))?void 0:p)},[r,n]),c=(0,e.useCallback)(()=>{n(a!=null&&a.length?a:void 0)},[a,n]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(S.Z,{variant:"button"},"Relations"),e.createElement(Q.ZP,{className:l.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:r,value:a!=null?a:r,onChange:d,onBlur:c,renderOption:(i,{selected:p})=>e.createElement(B.Z,{control:e.createElement(G.Z,{icon:e.createElement(V.Z,{fontSize:"small"}),checkedIcon:e.createElement(W.Z,{fontSize:"small"}),checked:p}),label:i}),size:"small",popupIcon:e.createElement(Y.Z,{"data-testid":"selected-relations-expand"}),renderInput:i=>e.createElement(U.Z,{...i,variant:"outlined"})}))};var ve=o(82938);const Re=(0,x.Z)({root:{width:"100%",maxWidth:300}}),j=({label:t,value:a,onChange:n})=>{const l=Re(),r=(0,e.useCallback)(d=>{n(d.target.checked)},[n]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(B.Z,{control:e.createElement(ve.Z,{checked:a,onChange:r,name:t,color:"primary"}),label:t,className:l.root}))};var Ce=o(19126),$=o.n(Ce),w=o(1849);function Ze({initialState:t={}}){const a=(0,k.TH)(),n=(0,e.useMemo)(()=>$().parse(a.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[a.search]),[l,r]=(0,e.useState)(()=>{var s;return(Array.isArray(n.rootEntityRefs)?n.rootEntityRefs:(s=t==null?void 0:t.rootEntityRefs)!=null?s:[]).map(I=>(0,R.of)(I))}),[d,c]=(0,e.useState)(()=>{var s;return typeof n.maxDepth=="string"?J(n.maxDepth):(s=t==null?void 0:t.maxDepth)!=null?s:Number.POSITIVE_INFINITY}),[i,p]=(0,e.useState)(()=>Array.isArray(n.selectedRelations)?n.selectedRelations:t==null?void 0:t.selectedRelations),[g,m]=(0,e.useState)(()=>{var s;return(s=Array.isArray(n.selectedKinds)?n.selectedKinds:t==null?void 0:t.selectedKinds)==null?void 0:s.map(I=>I.toLocaleLowerCase("en-US"))}),[u,h]=(0,e.useState)(()=>{var s;return typeof n.unidirectional=="string"?n.unidirectional==="true":(s=t==null?void 0:t.unidirectional)!=null?s:!0}),[D,F]=(0,e.useState)(()=>{var s;return typeof n.mergeRelations=="string"?n.mergeRelations==="true":(s=t==null?void 0:t.mergeRelations)!=null?s:!0}),[L,T]=(0,e.useState)(()=>{var s;return typeof n.direction=="string"?n.direction:(s=t==null?void 0:t.direction)!=null?s:E.Nm.LEFT_RIGHT}),[M,N]=(0,e.useState)(()=>{var s;return typeof n.showFilters=="string"?n.showFilters==="true":(s=t==null?void 0:t.showFilters)!=null?s:!0}),K=(0,e.useCallback)(()=>N(s=>!s),[N]),H=(0,w.Z)(a.search);(0,e.useEffect)(()=>{a.search!==H&&(Array.isArray(n.rootEntityRefs)&&r(n.rootEntityRefs.map(s=>(0,R.of)(s))),typeof n.maxDepth=="string"&&c(J(n.maxDepth)),Array.isArray(n.selectedKinds)&&m(n.selectedKinds),Array.isArray(n.selectedRelations)&&p(n.selectedRelations),typeof n.unidirectional=="string"&&h(n.unidirectional==="true"),typeof n.mergeRelations=="string"&&F(n.mergeRelations==="true"),typeof n.direction=="string"&&T(n.direction),typeof n.showFilters=="string"&&N(n.showFilters==="true"))},[H,a.search,n,r,c,m,p,h,F,T,N]);const b=(0,w.Z)(l.map(s=>(0,R.eE)(s)));return(0,e.useEffect)(()=>{const s=l.map(z=>(0,R.eE)(z)),I=$().stringify({rootEntityRefs:s,maxDepth:isFinite(d)?d:"\u221E",selectedKinds:g,selectedRelations:i,unidirectional:u,mergeRelations:D,direction:L,showFilters:M},{arrayFormat:"brackets",addQueryPrefix:!0}),y=`${window.location.pathname}${I}`;!b||s.length===b.length&&s.every((z,v)=>z===b[v])?window.history.replaceState(null,document.title,y):window.history.pushState(null,document.title,y)},[l,d,g,i,u,D,L,M,b]),{rootEntityNames:l,setRootEntityNames:r,maxDepth:d,setMaxDepth:c,selectedRelations:i,setSelectedRelations:p,selectedKinds:g,setSelectedKinds:m,unidirectional:u,setUnidirectional:h,mergeRelations:D,setMergeRelations:F,direction:L,setDirection:T,showFilters:M,toggleShowFilters:K}}function J(t){return t==="\u221E"?Number.POSITIVE_INFINITY:Number(t)}const xe=(0,x.Z)(t=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:t.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:t.spacing(1),gridAutoRows:"auto",[t.breakpoints.up("lg")]:{display:"block"},[t.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[t.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[t.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}})),Ne=t=>{const{relationPairs:a=E.vw,initialState:n}=t,l=(0,k.s0)(),r=xe(),d=(0,C.useRouteRef)(Z.entityRouteRef),{maxDepth:c,setMaxDepth:i,selectedKinds:p,setSelectedKinds:g,selectedRelations:m,setSelectedRelations:u,unidirectional:h,setUnidirectional:D,mergeRelations:F,setMergeRelations:L,direction:T,setDirection:M,rootEntityNames:N,setRootEntityNames:K,showFilters:H,toggleShowFilters:b}=Ze({initialState:n}),s=(0,C.useAnalytics)(),I=(0,e.useCallback)((y,z)=>{var X,q;const v=(0,R.of)(y.id);if(z.shiftKey){const _=d({kind:v.kind.toLocaleLowerCase("en-US"),namespace:v.namespace.toLocaleLowerCase("en-US"),name:v.name});s.captureEvent("click",(X=y.title)!=null?X:(0,Z.humanizeEntityRef)(v),{attributes:{to:_}}),l(_)}else s.captureEvent("click",(q=y.title)!=null?q:(0,Z.humanizeEntityRef)(v)),K([v])},[d,l,K,s]);return e.createElement(f.Page,{themeId:"home"},e.createElement(f.Header,{title:"Catalog Graph",subtitle:N.map(y=>(0,Z.humanizeEntityRef)(y)).join(", ")}),e.createElement(f.Content,{stretch:!0,className:r.content},e.createElement(f.ContentHeader,{titleComponent:e.createElement(se.Z,{value:"show filters",selected:H,onChange:()=>b()},e.createElement(ne.Z,null)," Filters")},e.createElement(f.SupportButton,null,"Start tracking your component in by adding it to the software catalog.")),e.createElement(O.Z,{container:!0,alignItems:"stretch",className:r.container},H&&e.createElement(O.Z,{item:!0,xs:12,lg:2,className:r.filters},e.createElement(pe,{value:c,onChange:i}),e.createElement(fe,{value:p,onChange:g}),e.createElement(ye,{value:m,onChange:u,relationPairs:a}),e.createElement(re,{value:T,onChange:M}),e.createElement(j,{value:h,onChange:D,label:"Simplified"}),e.createElement(j,{value:F,onChange:L,label:"Merge Relations"})),e.createElement(O.Z,{item:!0,xs:!0,className:r.fullHeight},e.createElement(te.Z,{className:r.graphWrapper},e.createElement(S.Z,{variant:"caption",color:"textSecondary",display:"block",className:r.legend},e.createElement(oe.Z,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."),e.createElement(E._U,{rootEntityNames:N,maxDepth:c,kinds:p&&p.length>0?p:void 0,relations:m&&m.length>0?m:void 0,mergeRelations:F,unidirectional:h,onNodeClick:I,direction:T,relationPairs:a,className:r.graph,zoom:"enabled"}))))))}}}]);})();

//# sourceMappingURL=1840.b88f4131.chunk.js.map