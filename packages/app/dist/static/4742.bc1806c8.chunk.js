"use strict";(()=>{var ge=Object.defineProperty;var me=(v,g,c)=>g in v?ge(v,g,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[g]=c;var k=(v,g,c)=>(me(v,typeof g!="symbol"?g+"":g,c),c);(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[4742],{44742:function(v,g,c){c.r(g),c.d(g,{RealLogViewer:function(){return he}});var a=c(2784),V=c(10289),S=c(61837),w=c(19353),U=c(7688),W=c(50166);function D({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}const b=D(),B=/\n\r?/g,E=Object.fromEntries(Object.entries({1:e=>({...e,bold:!0}),3:e=>({...e,italic:!0}),4:e=>({...e,underline:!0}),22:({bold:e,...t})=>t,23:({italic:e,...t})=>t,24:({underline:e,...t})=>t,30:e=>({...e,foreground:"black"}),31:e=>({...e,foreground:"red"}),32:e=>({...e,foreground:"green"}),33:e=>({...e,foreground:"yellow"}),34:e=>({...e,foreground:"blue"}),35:e=>({...e,foreground:"magenta"}),36:e=>({...e,foreground:"cyan"}),37:e=>({...e,foreground:"white"}),39:({foreground:e,...t})=>t,90:e=>({...e,foreground:"grey"}),40:e=>({...e,background:"black"}),41:e=>({...e,background:"red"}),42:e=>({...e,background:"green"}),43:e=>({...e,background:"yellow"}),44:e=>({...e,background:"blue"}),45:e=>({...e,background:"magenta"}),46:e=>({...e,background:"cyan"}),47:e=>({...e,background:"white"}),49:({background:e,...t})=>t}).map(([e,t])=>[`\x1B[${e}m`,t]));class L{constructor(t=1,n=[]){k(this,"text");this.lineNumber=t,this.chunks=n,this.text=n.map(s=>s.text).join("").toLocaleLowerCase("en-US")}lastChunk(){return this.chunks[this.chunks.length-1]}replaceLastChunk(t){t&&(this.chunks.splice(this.chunks.length-1,1,...t),this.text=this.chunks.map(n=>n.text).join("").toLocaleLowerCase("en-US"))}}class G{constructor(){k(this,"text","");k(this,"lines",[]);k(this,"processLines",(t,n={},s=1)=>{var i;const o=[];let r=n,l=s,u=0;for(B.lastIndex=0;;){const f=B.exec(t);if(!f){const h=this.processText(t.slice(u),r);return o.push(new L(l,h)),o}const d=t.slice(u,f.index);u=f.index+f[0].length;const p=this.processText(d,r);o.push(new L(l,p)),r=(i=p[p.length-1].modifiers)!=null?i:r,l+=1}});k(this,"processText",(t,n)=>{const s=[];let o=n,r=0;for(b.lastIndex=0;;){const l=b.exec(t);if(!l)return s.push({text:t.slice(r),modifiers:o}),s;const u=t.slice(r,l.index);s.push({text:u,modifiers:o}),r=l.index+l[0].length,o=this.processCode(l[0],o)}});k(this,"processCode",(t,n)=>{var s,o;return(o=(s=E[t])==null?void 0:s.call(E,n))!=null?o:n})}process(t){var n,s,o;if(this.text===t)return this.lines;if(t.startsWith(this.text)){const r=this.lines.length>0?this.lines.length-1:0,l=(n=this.lines[r])!=null?n:new L,u=l.lastChunk(),i=this.processLines(((s=u==null?void 0:u.text)!=null?s:"")+t.slice(this.text.length),u==null?void 0:u.modifiers,l==null?void 0:l.lineNumber);l.replaceLastChunk((o=i[0])==null?void 0:o.chunks),this.lines[r]=l,this.lines.push(...i.slice(1))}else this.lines=this.processLines(t);return this.text=t,this.lines}}var $=c(79692),I=c(41128),Z=c(31754),R=c(66054),F=c(81463),M=c(34505),A=c(57186),N=c(32720),T=c(92901),z=c(45410);const j=40,Y=(0,$.Z)(e=>({root:{background:e.palette.background.paper},header:{height:j,display:"flex",alignItems:"center",justifyContent:"flex-end"},log:{fontFamily:'"Monaco", monospace',fontSize:e.typography.pxToRem(12)},line:{position:"relative",whiteSpace:"pre","&:hover":{background:e.palette.action.hover}},lineSelected:{background:e.palette.action.selected,"&:hover":{background:e.palette.action.selected}},lineCopyButton:{position:"absolute",paddingTop:0,paddingBottom:0},lineNumber:{display:"inline-block",textAlign:"end",width:60,marginRight:e.spacing(1),cursor:"pointer"},textHighlight:{background:(0,I.Fq)(e.palette.info.main,.15)},textSelectedHighlight:{background:(0,I.Fq)(e.palette.info.main,.4)},modifierBold:{fontWeight:e.typography.fontWeightBold},modifierItalic:{fontStyle:"italic"},modifierUnderline:{textDecoration:"underline"},modifierForegroundBlack:{color:Z.Z.black},modifierForegroundRed:{color:R.Z[500]},modifierForegroundGreen:{color:F.Z[500]},modifierForegroundYellow:{color:M.Z[500]},modifierForegroundBlue:{color:A.Z[500]},modifierForegroundMagenta:{color:N.Z[500]},modifierForegroundCyan:{color:T.Z[500]},modifierForegroundWhite:{color:Z.Z.white},modifierForegroundGrey:{color:z.Z[500]},modifierBackgroundBlack:{background:Z.Z.black},modifierBackgroundRed:{background:R.Z[500]},modifierBackgroundGreen:{background:F.Z[500]},modifierBackgroundYellow:{background:M.Z[500]},modifierBackgroundBlue:{background:A.Z[500]},modifierBackgroundMagenta:{background:N.Z[500]},modifierBackgroundCyan:{background:T.Z[500]},modifierBackgroundWhite:{background:Z.Z.white},modifierBackgroundGrey:{background:z.Z[500]}}),{name:"BackstageLogViewer"});var J=c(72779),H=c.n(J),Q=c(74600),K=c.n(Q);function X(e,t){const n=new Array;if(t.bold&&n.push(e.modifierBold),t.italic&&n.push(e.modifierItalic),t.underline&&n.push(e.modifierUnderline),t.foreground){const s=`modifierForeground${K()(t.foreground)}`;n.push(e[s])}if(t.background){const s=`modifierBackground${K()(t.background)}`;n.push(e[s])}return n.length>0?n.join(" "):void 0}function q(e,t){if(!t||!e.includes(t))return;const n=new Array;let s=0;for(;;){const o=e.indexOf(t,s);if(o===-1)break;const r=o+t.length;n.push({start:o,end:r}),s=r}return n}function _(e,t){const n=q(e.text,t);if(!n)return e.chunks;const s=new Array;let o=0,r=0,l=n[r];for(const u of e.chunks){const{text:i,modifiers:f}=u;if(!l||o+i.length<l.start){s.push(u),o+=i.length;continue}let d=0;for(;l;){const h=Math.max(l.start-o,0);if(h>i.length)break;const x=Math.min(l.end-o,i.length);if(h>d&&s.push({text:i.slice(d,h),modifiers:f}),x>h&&s.push({modifiers:f,highlight:r,text:i.slice(h,x)}),d=x,l.end-o===x)r+=1,l=n[r];else break}d<i.length&&s.push({text:i.slice(d),modifiers:f}),o+=i.length}return s}function ee({line:e,classes:t,searchText:n,highlightResultIndex:s}){const o=(0,a.useMemo)(()=>_(e,n),[e,n]),r=(0,a.useMemo)(()=>o.map(({text:l,modifiers:u,highlight:i},f)=>a.createElement("span",{key:f,className:H()(X(t,u),i!==void 0&&(i===s?t.textSelectedHighlight:t.textHighlight))},l)),[o,s,t]);return a.createElement(a.Fragment,null,r)}var te=c(86619),ne=c(90436),oe=c(48049),se=c(51209),O=c(36444);function re(e){var l;const{resultCount:t,resultIndexStep:n,toggleShouldFilter:s}=e,o=(l=e.resultIndex)!=null?l:0,r=u=>{u.key==="Enter"&&(u.metaKey||u.ctrlKey||u.altKey?s():n(u.shiftKey))};return a.createElement(a.Fragment,null,t!==void 0&&a.createElement(a.Fragment,null,a.createElement(S.Z,{size:"small",onClick:()=>n(!0)},a.createElement(oe.Z,null)),a.createElement(ne.Z,null,Math.min(o+1,t),"/",t),a.createElement(S.Z,{size:"small",onClick:()=>n()},a.createElement(se.Z,null))),a.createElement(te.Z,{size:"small",variant:"standard",placeholder:"Search",value:e.searchInput,onKeyPress:r,onChange:u=>e.setSearchInput(u.target.value)}),a.createElement(S.Z,{size:"small",onClick:s},e.shouldFilter?a.createElement(O.Z,{color:"primary"}):a.createElement(O.Z,{color:"disabled"})))}var le=c(77804),ie=c(78887);function ae(e){e===void 0&&(e=!1);var t=(0,ie.F)(e),n=t[0],s=t[1];return[n,(0,a.useCallback)(function(o){s(function(r){return typeof o=="undefined"?!r:Boolean((0,le.f)(o,r))})},[])]}function ce(e,t){if(!t)return{lines:e};const n=[],s=[];for(const o of e)if(o.text.includes(t)){n.push(o);let r=0,l=0;for(;;){const u=o.text.indexOf(t,r);if(u===-1)break;s.push({lineNumber:o.lineNumber,lineIndex:l++}),r=u+t.length}}return{lines:n,results:s}}function ue(e){var h;const[t,n]=(0,a.useState)(""),s=t.toLocaleLowerCase("en-US"),[o,r]=(0,a.useState)(0),[l,u]=ae(!1),i=(0,a.useMemo)(()=>ce(e,s),[e,s]),f=i.results?i.results[Math.min(o,i.results.length-1)]:void 0,d=(h=i.results)==null?void 0:h.length,p=x=>{if(x){if(d!==void 0){const m=Math.min(o-1,d-2);r(m<0?d-1:m)}}else if(d!==void 0){const m=o+1;r(m>=d?0:m)}};return{lines:l?i.lines:e,searchText:s,searchInput:t,setSearchInput:n,shouldFilter:l,toggleShouldFilter:u,resultCount:d,resultIndex:o,resultIndexStep:p,resultLine:f==null?void 0:f.lineNumber,resultLineIndex:f==null?void 0:f.lineIndex}}var P=c(36964),de=c(95074);function fe(e){const t=(0,P.useApi)(P.errorApiRef),[n,s]=(0,a.useState)(),o=n?Math.min(n.start,n.end):void 0,r=n?Math.max(n.start,n.end):void 0,[{error:l},u]=(0,de.Z)();return(0,a.useEffect)(()=>{l&&t.post(l)},[l,t]),{shouldShowButton(i){return o===i||r===i},isSelected(i){return n?o<=i&&i<=r:!1},setSelection(i,f){s(f?d=>d?{start:d.start,end:i}:{start:i,end:i}:d=>(d==null?void 0:d.start)===i&&(d==null?void 0:d.end)===i?void 0:{start:i,end:i})},copySelection(){if(n){const i=e.slice(Math.min(n.start,n.end)-1,Math.max(n.start,n.end)).map(f=>f.chunks.map(d=>d.text).join("")).join(`
`);u(i),s(void 0)}}}}function he(e){const t=Y({classes:e.classes}),n=(0,a.useRef)(null),o=(0,a.useMemo)(()=>new G,[]).process(e.text),r=ue(o),l=fe(o),u=(0,V.TH)();(0,a.useEffect)(()=>{r.resultLine!==void 0&&n.current&&n.current.scrollToItem(r.resultLine-1,"center")},[r.resultLine]),(0,a.useEffect)(()=>{if(u.hash){const f=parseInt(u.hash.replace(/\D/g,""),10);l.setSelection(f,!1)}},[]);const i=(f,d)=>{l.setSelection(f,d.shiftKey)};return a.createElement(U.Z,null,({height:f,width:d})=>a.createElement("div",{style:{width:d,height:f},className:t.root},a.createElement("div",{className:t.header},a.createElement(re,{...r})),a.createElement(W.t7,{ref:n,className:t.log,height:f-j,width:d,itemData:r.lines,itemSize:20,itemCount:r.lines.length},({index:p,style:h,data:x})=>{const m=x[p],{lineNumber:y}=m;return a.createElement("div",{style:{...h},className:H()(t.line,{[t.lineSelected]:l.isSelected(y)})},l.shouldShowButton(y)&&a.createElement(S.Z,{"data-testid":"copy-button",size:"small",className:t.lineCopyButton,onClick:()=>l.copySelection()},a.createElement(w.Z,{fontSize:"inherit"})),a.createElement("a",{role:"row",target:"_self",href:`#line-${y}`,className:t.lineNumber,onClick:C=>i(y,C),onKeyPress:C=>i(y,C)},y),a.createElement(ee,{line:m,classes:t,searchText:r.searchText,highlightResultIndex:r.resultLine===y?r.resultLineIndex:void 0}))})))}}}]);})();

//# sourceMappingURL=4742.bc1806c8.chunk.js.map