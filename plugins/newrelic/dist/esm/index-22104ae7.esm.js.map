{"version":3,"file":"index-22104ae7.esm.js","sources":["../../src/components/NewRelicFetchComponent/NewRelicFetchComponent.tsx","../../src/components/NewRelicComponent/NewRelicComponent.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Alert from '@material-ui/lab/Alert';\nimport useAsync from 'react-use/lib/useAsync';\nimport { newRelicApiRef, NewRelicApplications } from '../../api';\n\nimport { Progress, Table, TableColumn } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const NewRelicAPMTable = ({ applications }: NewRelicApplications) => {\n  const columns: TableColumn[] = [\n    { title: 'Application', field: 'name' },\n    { title: 'Response Time', field: 'responseTime' },\n    { title: 'Throughput', field: 'throughput' },\n    { title: 'Error Rate', field: 'errorRate' },\n    { title: 'Instance Count', field: 'instanceCount' },\n    { title: 'Apdex', field: 'apdexScore' },\n  ];\n  const data = applications.map(app => {\n    const { name, application_summary: applicationSummary } = app;\n    const {\n      response_time: responseTime,\n      throughput,\n      error_rate: errorRate,\n      instance_count: instanceCount,\n      apdex_score: apdexScore,\n    } = applicationSummary;\n\n    return {\n      name,\n      responseTime: `${responseTime} ms`,\n      throughput: `${throughput} rpm`,\n      errorRate: `${errorRate}%`,\n      instanceCount,\n      apdexScore,\n    };\n  });\n\n  return (\n    <Table\n      title=\"Application Performance Monitoring\"\n      options={{ search: true, paging: true }}\n      columns={columns}\n      data={data}\n    />\n  );\n};\n\nconst NewRelicFetchComponent = () => {\n  const api = useApi(newRelicApiRef);\n\n  const { value, loading, error } = useAsync(async () => {\n    const data = await api.getApplications();\n    return data.applications.filter(application => {\n      return application.hasOwnProperty('application_summary');\n    });\n  }, []);\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  return <NewRelicAPMTable applications={value || []} />;\n};\n\nexport default NewRelicFetchComponent;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid } from '@material-ui/core';\nimport NewRelicFetchComponent from '../NewRelicFetchComponent';\nimport {\n  Header,\n  Page,\n  Content,\n  ContentHeader,\n  HeaderLabel,\n  SupportButton,\n} from '@backstage/core-components';\n\nconst NewRelicComponent = () => (\n  <Page themeId=\"tool\">\n    <Header title=\"New Relic\">\n      <HeaderLabel label=\"Owner\" value=\"Engineering\" />\n    </Header>\n    <Content>\n      <ContentHeader title=\"New Relic\">\n        <SupportButton>\n          New Relic Application Performance Monitoring\n        </SupportButton>\n      </ContentHeader>\n      <Grid container spacing={3} direction=\"column\">\n        <Grid item>\n          <NewRelicFetchComponent />\n        </Grid>\n      </Grid>\n    </Content>\n  </Page>\n);\n\nexport default NewRelicComponent;\n"],"names":[],"mappings":"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"}