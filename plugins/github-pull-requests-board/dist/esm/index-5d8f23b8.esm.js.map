{"version":3,"file":"index-5d8f23b8.esm.js","sources":["../../src/components/EntityTeamPullRequestsCard/EntityTeamPullRequestsCard.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { FunctionComponent, useState } from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\n\nimport { Progress, InfoCard } from '@backstage/core-components';\n\nimport { InfoCardHeader } from '../InfoCardHeader';\nimport { PullRequestBoardOptions } from '../PullRequestBoardOptions';\nimport { Wrapper } from '../Wrapper';\nimport { PullRequestCard } from '../PullRequestCard';\nimport { usePullRequestsByTeam } from '../../hooks/usePullRequestsByTeam';\nimport { PRCardFormating } from '../../utils/types';\nimport { DraftPrIcon } from '../icons/DraftPr';\nimport { useUserRepositories } from '../../hooks/useUserRepositories';\n\nconst EntityTeamPullRequestsCard: FunctionComponent = () => {\n  const [infoCardFormat, setInfoCardFormat] = useState<PRCardFormating[]>([]);\n  const { repositories } = useUserRepositories();\n  const { loading, pullRequests, refreshPullRequests } =\n    usePullRequestsByTeam(repositories);\n\n  const header = (\n    <InfoCardHeader onRefresh={refreshPullRequests}>\n      <PullRequestBoardOptions\n        onClickOption={newFormats => setInfoCardFormat(newFormats)}\n        value={infoCardFormat}\n        options={[\n          {\n            icon: <DraftPrIcon />,\n            value: 'draft',\n            ariaLabel: 'Show draft PRs',\n          },\n          {\n            icon: <FullscreenIcon />,\n            value: 'fullscreen',\n            ariaLabel: 'Info card is set to fullscreen',\n          },\n        ]}\n      />\n    </InfoCardHeader>\n  );\n\n  const getContent = () => {\n    if (loading) {\n      return <Progress />;\n    }\n\n    return (\n      <Grid container spacing={2}>\n        {pullRequests.length ? (\n          pullRequests.map(({ title: columnTitle, content }) => (\n            <Wrapper\n              key={columnTitle}\n              fullscreen={infoCardFormat.includes('fullscreen')}\n            >\n              <Typography variant=\"overline\">{columnTitle}</Typography>\n              {content.map(\n                (\n                  {\n                    id,\n                    title,\n                    createdAt,\n                    lastEditedAt,\n                    author,\n                    url,\n                    latestReviews,\n                    repository,\n                    isDraft,\n                  },\n                  index,\n                ) =>\n                  infoCardFormat.includes('draft') === isDraft && (\n                    <PullRequestCard\n                      key={`pull-request-${id}-${index}`}\n                      title={title}\n                      createdAt={createdAt}\n                      updatedAt={lastEditedAt}\n                      author={author}\n                      url={url}\n                      reviews={latestReviews.nodes}\n                      repositoryName={repository.name}\n                      isDraft={isDraft}\n                    />\n                  ),\n              )}\n            </Wrapper>\n          ))\n        ) : (\n          <Typography variant=\"overline\">No pull requests found</Typography>\n        )}\n      </Grid>\n    );\n  };\n\n  return <InfoCard title={header}>{getContent()}</InfoCard>;\n};\n\nexport default EntityTeamPullRequestsCard;\n"],"names":["DraftPrIcon"],"mappings":"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"}