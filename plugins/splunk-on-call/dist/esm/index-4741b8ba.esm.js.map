{"version":3,"file":"index-4741b8ba.esm.js","sources":["../../src/api/client.ts","../../src/plugin.ts","../../src/components/Errors/MissingApiKeyOrApiIdError.tsx","../../src/components/Escalation/EscalationUsersEmptyState.tsx","../../src/components/Escalation/EscalationUser.tsx","../../src/components/Escalation/EscalationPolicy.tsx","../../src/components/Incident/IncidentListItem.tsx","../../src/components/Incident/IncidentEmptyState.tsx","../../src/components/Incident/Incidents.tsx","../../src/components/TriggerDialog/TriggerDialog.tsx","../../src/components/EntitySplunkOnCallCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Incident,\n  OnCall,\n  User,\n  EscalationPolicyInfo,\n  RoutingKey,\n  Team,\n} from '../components/types';\nimport {\n  SplunkOnCallApi,\n  TriggerAlarmRequest,\n  IncidentsResponse,\n  OnCallsResponse,\n  ClientApiConfig,\n  RequestOptions,\n  ListUserResponse,\n  EscalationPolicyResponse,\n  ListRoutingKeyResponse,\n} from './types';\nimport {\n  createApiRef,\n  DiscoveryApi,\n  ConfigApi,\n} from '@backstage/core-plugin-api';\n\nexport class UnauthorizedError extends Error {}\n\nexport const splunkOnCallApiRef = createApiRef<SplunkOnCallApi>({\n  id: 'plugin.splunk-on-call.api',\n});\n\nexport class SplunkOnCallClient implements SplunkOnCallApi {\n  static fromConfig(configApi: ConfigApi, discoveryApi: DiscoveryApi) {\n    const eventsRestEndpoint: string | null =\n      configApi.getOptionalString('splunkOnCall.eventsRestEndpoint') || null;\n    return new SplunkOnCallClient({\n      eventsRestEndpoint,\n      discoveryApi,\n    });\n  }\n  constructor(private readonly config: ClientApiConfig) {}\n\n  async getIncidents(): Promise<Incident[]> {\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/splunk-on-call/v1/incidents`;\n\n    const { incidents } = await this.getByUrl<IncidentsResponse>(url);\n\n    return incidents;\n  }\n\n  async getOnCallUsers(): Promise<OnCall[]> {\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/splunk-on-call/v1/oncall/current`;\n    const { teamsOnCall } = await this.getByUrl<OnCallsResponse>(url);\n\n    return teamsOnCall;\n  }\n\n  async getTeams(): Promise<Team[]> {\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/splunk-on-call/v1/team`;\n    const teams = await this.getByUrl<Team[]>(url);\n\n    return teams;\n  }\n\n  async getRoutingKeys(): Promise<RoutingKey[]> {\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/splunk-on-call/v1/org/routing-keys`;\n    const { routingKeys } = await this.getByUrl<ListRoutingKeyResponse>(url);\n\n    return routingKeys;\n  }\n\n  async getUsers(): Promise<User[]> {\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/splunk-on-call/v2/user`;\n    const { users } = await this.getByUrl<ListUserResponse>(url);\n\n    return users;\n  }\n\n  async getEscalationPolicies(): Promise<EscalationPolicyInfo[]> {\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/splunk-on-call/v1/policies`;\n    const { policies } = await this.getByUrl<EscalationPolicyResponse>(url);\n\n    return policies;\n  }\n\n  async incidentAction({\n    routingKey,\n    incidentType,\n    incidentId,\n    incidentDisplayName,\n    incidentMessage,\n    incidentStartTime,\n  }: TriggerAlarmRequest): Promise<Response> {\n    const body = JSON.stringify({\n      message_type: incidentType,\n      ...(incidentId ? { entity_id: incidentId } : {}),\n      ...(incidentDisplayName\n        ? { entity_display_name: incidentDisplayName }\n        : {}),\n      ...(incidentMessage ? { state_message: incidentMessage } : {}),\n      ...(incidentStartTime ? { state_start_time: incidentStartTime } : {}),\n    });\n\n    const options = {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    const url = `${this.config.eventsRestEndpoint}/${routingKey}`;\n\n    return this.request(url, options);\n  }\n\n  private async getByUrl<T>(url: string): Promise<T> {\n    const options = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n    const response = await this.request(url, options);\n\n    return response.json();\n  }\n\n  private async request(\n    url: string,\n    options: RequestOptions,\n  ): Promise<Response> {\n    const response = await fetch(url, options);\n    if (response.status === 403) {\n      throw new UnauthorizedError();\n    }\n    if (!response.ok) {\n      const payload = await response.json();\n      const errors = payload.errors.map((error: string) => error).join(' ');\n      const message = `Request failed with ${response.status}, ${errors}`;\n      throw new Error(message);\n    }\n    return response;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { splunkOnCallApiRef, SplunkOnCallClient } from './api';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  discoveryApiRef,\n  configApiRef,\n  createRoutableExtension,\n  createComponentExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({ id: 'splunk-on-call' });\n\nexport const splunkOnCallPlugin = createPlugin({\n  id: 'splunk-on-call',\n  apis: [\n    createApiFactory({\n      api: splunkOnCallApiRef,\n      deps: { discoveryApi: discoveryApiRef, configApi: configApiRef },\n      factory: ({ configApi, discoveryApi }) =>\n        SplunkOnCallClient.fromConfig(configApi, discoveryApi),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\nexport const SplunkOnCallPage = splunkOnCallPlugin.provide(\n  createRoutableExtension({\n    name: 'SplunkOnCallPage',\n    component: () =>\n      import('./components/SplunkOnCallPage').then(m => m.SplunkOnCallPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const EntitySplunkOnCallCard = splunkOnCallPlugin.provide(\n  createComponentExtension({\n    name: 'EntitySplunkOnCallCard',\n    component: {\n      lazy: () =>\n        import('./components/EntitySplunkOnCallCard').then(\n          m => m.EntitySplunkOnCallCard,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Button } from '@material-ui/core';\nimport { EmptyState } from '@backstage/core-components';\n\nexport const MissingApiKeyOrApiIdError = () => (\n  <EmptyState\n    missing=\"info\"\n    title=\"Missing or invalid Splunk On-Call API key and/or API id\"\n    description=\"The request to fetch data needs a valid api id and a valid api key. See README for more details.\"\n    action={\n      <Button\n        color=\"primary\"\n        variant=\"contained\"\n        href=\"https://github.com/backstage/backstage/blob/master/plugins/splunk-on-call/README.md\"\n      >\n        Read More\n      </Button>\n    }\n  />\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { StatusWarning } from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport const EscalationUsersEmptyState = () => {\n  const classes = useStyles();\n  return (\n    <ListItem>\n      <ListItemIcon>\n        <div className={classes.denseListIcon}>\n          <StatusWarning />\n        </div>\n      </ListItemIcon>\n      <ListItemText primary=\"Empty escalation policy\" />\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { User } from '../types';\n\nconst useStyles = makeStyles({\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n});\n\ntype Props = {\n  user: User;\n};\n\nexport const EscalationUser = ({ user }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <ListItem>\n      <ListItemIcon>\n        <Avatar alt=\"User\" />\n      </ListItemIcon>\n      <ListItemText\n        primary={\n          <Typography className={classes.listItemPrimary}>\n            {user.firstName} {user.lastName}\n          </Typography>\n        }\n        secondary={user.email}\n      />\n      <ListItemSecondaryAction>\n        <Tooltip title=\"Send e-mail to user\" placement=\"top\">\n          <IconButton href={`mailto:${user.email}`}>\n            <EmailIcon color=\"primary\" />\n          </IconButton>\n        </Tooltip>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  createStyles,\n  List,\n  ListSubheader,\n  makeStyles,\n  Theme,\n} from '@material-ui/core';\nimport { EscalationUsersEmptyState } from './EscalationUsersEmptyState';\nimport { EscalationUser } from './EscalationUser';\nimport useAsync from 'react-use/lib/useAsync';\nimport { splunkOnCallApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport { User } from '../types';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxHeight: '400px',\n      overflow: 'auto',\n    },\n    subheader: {\n      backgroundColor: theme.palette.background.paper,\n    },\n    progress: {\n      margin: `0 ${theme.spacing(2)}px`,\n    },\n  }),\n);\n\ntype Props = {\n  users: { [key: string]: User };\n  team: string;\n};\n\nexport const EscalationPolicy = ({ users, team }: Props) => {\n  const classes = useStyles();\n  const api = useApi(splunkOnCallApiRef);\n\n  const {\n    value: userNames,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const oncalls = await api.getOnCallUsers();\n    const teamUsernames = oncalls\n      .filter(oncall => oncall.team?.name === team)\n      .flatMap(oncall => {\n        return oncall.oncallNow?.flatMap(oncallNow => {\n          return oncallNow.users?.flatMap(user => {\n            return user?.onCalluser?.username;\n          });\n        });\n      });\n    return teamUsernames;\n  });\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (!loading && !userNames?.length) {\n    return <EscalationUsersEmptyState />;\n  }\n\n  return (\n    <List\n      className={classes.root}\n      dense\n      subheader={\n        <ListSubheader className={classes.subheader}>ON CALL</ListSubheader>\n      }\n    >\n      {loading ? (\n        <Progress className={classes.progress} />\n      ) : (\n        userNames &&\n        userNames.map(\n          (userName, index) =>\n            userName &&\n            userName in users && (\n              <EscalationUser key={index} user={users[userName]} />\n            ),\n        )\n      )}\n    </List>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport { DateTime, Duration } from 'luxon';\nimport { Incident, IncidentPhase } from '../types';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport { splunkOnCallApiRef } from '../../api/client';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { TriggerAlarmRequest } from '../../api/types';\n\nimport {\n  StatusError,\n  StatusWarning,\n  StatusOK,\n} from '@backstage/core-components';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n  listItemIcon: {\n    minWidth: '1em',\n  },\n  secondaryAction: {\n    paddingRight: 48,\n  },\n});\n\ntype Props = {\n  team: string;\n  incident: Incident;\n  onIncidentAction: () => void;\n  readOnly: boolean;\n};\n\nconst IncidentPhaseStatus = ({\n  currentPhase,\n}: {\n  currentPhase: IncidentPhase;\n}) => {\n  switch (currentPhase) {\n    case 'UNACKED':\n      return <StatusError />;\n    case 'ACKED':\n      return <StatusWarning />;\n    default:\n      return <StatusOK />;\n  }\n};\n\nconst incidentPhaseTooltip = (currentPhase: IncidentPhase) => {\n  switch (currentPhase) {\n    case 'UNACKED':\n      return 'Triggered';\n    case 'ACKED':\n      return 'Acknowledged';\n    default:\n      return 'Resolved';\n  }\n};\n\nconst IncidentAction = ({\n  currentPhase,\n  incidentId,\n  resolveAction,\n  acknowledgeAction,\n}: {\n  currentPhase: string;\n  incidentId: string;\n  resolveAction: (args: TriggerAlarmRequest) => void;\n  acknowledgeAction: (args: TriggerAlarmRequest) => void;\n}) => {\n  switch (currentPhase) {\n    case 'UNACKED':\n      return (\n        <Tooltip title=\"Acknowledge\" placement=\"top\">\n          <IconButton\n            onClick={() =>\n              acknowledgeAction({ incidentId, incidentType: 'ACKNOWLEDGEMENT' })\n            }\n          >\n            <DoneIcon />\n          </IconButton>\n        </Tooltip>\n      );\n    case 'ACKED':\n      return (\n        <Tooltip title=\"Resolve\" placement=\"top\">\n          <IconButton\n            onClick={() =>\n              resolveAction({ incidentId, incidentType: 'RECOVERY' })\n            }\n          >\n            <DoneAllIcon />\n          </IconButton>\n        </Tooltip>\n      );\n    default:\n      return <></>;\n  }\n};\n\nexport const IncidentListItem = ({\n  incident,\n  readOnly,\n  onIncidentAction,\n  team,\n}: Props) => {\n  const classes = useStyles();\n  const duration =\n    new Date().getTime() - new Date(incident.startTime!).getTime();\n  const createdAt = DateTime.local()\n    .minus(Duration.fromMillis(duration))\n    .toRelative({ locale: 'en' });\n  const alertApi = useApi(alertApiRef);\n  const api = useApi(splunkOnCallApiRef);\n\n  const hasBeenManuallyTriggered = incident.monitorName?.includes('vouser-');\n\n  const source = () => {\n    if (hasBeenManuallyTriggered) {\n      return incident.monitorName?.replace('vouser-', '');\n    }\n    if (incident.monitorType === 'API') {\n      return '{ REST }';\n    }\n\n    return incident.monitorName;\n  };\n\n  const [{ value: resolveValue, error: resolveError }, handleResolveIncident] =\n    useAsyncFn(\n      async ({ incidentId, incidentType }: TriggerAlarmRequest) =>\n        await api.incidentAction({\n          routingKey: team,\n          incidentType,\n          incidentId,\n        }),\n    );\n\n  const [\n    { value: acknowledgeValue, error: acknowledgeError },\n    handleAcknowledgeIncident,\n  ] = useAsyncFn(\n    async ({ incidentId, incidentType }: TriggerAlarmRequest) =>\n      await api.incidentAction({\n        routingKey: team,\n        incidentType,\n        incidentId,\n      }),\n  );\n\n  useEffect(() => {\n    if (acknowledgeValue) {\n      alertApi.post({\n        message: `Incident successfully acknowledged`,\n      });\n    }\n\n    if (resolveValue) {\n      alertApi.post({\n        message: `Incident successfully resolved`,\n      });\n    }\n    if (resolveValue || acknowledgeValue) {\n      onIncidentAction();\n    }\n  }, [acknowledgeValue, resolveValue, alertApi, onIncidentAction]);\n\n  if (acknowledgeError) {\n    alertApi.post({\n      message: `Failed to acknowledge incident. ${acknowledgeError.message}`,\n      severity: 'error',\n    });\n  }\n\n  if (resolveError) {\n    alertApi.post({\n      message: `Failed to resolve incident. ${resolveError.message}`,\n      severity: 'error',\n    });\n  }\n\n  return (\n    <ListItem dense key={incident.entityId}>\n      <ListItemIcon className={classes.listItemIcon}>\n        <Tooltip\n          title={incidentPhaseTooltip(incident.currentPhase)}\n          placement=\"top\"\n        >\n          <div className={classes.denseListIcon}>\n            <IncidentPhaseStatus currentPhase={incident.currentPhase} />\n          </div>\n        </Tooltip>\n      </ListItemIcon>\n      <ListItemText\n        primary={incident.entityDisplayName}\n        primaryTypographyProps={{\n          variant: 'body1',\n          className: classes.listItemPrimary,\n        }}\n        secondary={\n          <Typography noWrap variant=\"body2\" color=\"textSecondary\">\n            #{incident.incidentNumber} - Created {createdAt}{' '}\n            {source() && `by ${source()}`}\n          </Typography>\n        }\n      />\n\n      {incident.incidentLink && incident.incidentNumber && (\n        <ListItemSecondaryAction>\n          {!readOnly && (\n            <IncidentAction\n              currentPhase={incident.currentPhase || ''}\n              incidentId={incident.entityId}\n              resolveAction={handleResolveIncident}\n              acknowledgeAction={handleAcknowledgeIncident}\n            />\n          )}\n          <Tooltip title=\"View in Splunk On-Call\" placement=\"top\">\n            <IconButton\n              href={incident.incidentLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              color=\"primary\"\n            >\n              <OpenInBrowserIcon />\n            </IconButton>\n          </Tooltip>\n        </ListItemSecondaryAction>\n      )}\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport EmptyStateImage from '../../assets/emptystate.svg';\n\nexport const IncidentsEmptyState = () => {\n  return (\n    <Grid\n      container\n      justifyContent=\"center\"\n      direction=\"column\"\n      alignItems=\"center\"\n    >\n      <Grid item xs={12}>\n        <Typography variant=\"h5\">Nice! No incidents found!</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <img\n          src={EmptyStateImage}\n          alt=\"EmptyState\"\n          data-testid=\"emptyStateImg\"\n        />\n      </Grid>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport {\n  createStyles,\n  List,\n  ListSubheader,\n  makeStyles,\n  Theme,\n} from '@material-ui/core';\nimport { IncidentListItem } from './IncidentListItem';\nimport { IncidentsEmptyState } from './IncidentEmptyState';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { splunkOnCallApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxHeight: '400px',\n      overflow: 'auto',\n    },\n    subheader: {\n      backgroundColor: theme.palette.background.paper,\n    },\n    progress: {\n      margin: `0 ${theme.spacing(2)}px`,\n    },\n  }),\n);\n\ntype Props = {\n  refreshIncidents: boolean;\n  team: string;\n  readOnly: boolean;\n};\n\nexport const Incidents = ({ readOnly, refreshIncidents, team }: Props) => {\n  const classes = useStyles();\n  const api = useApi(splunkOnCallApiRef);\n\n  const [{ value: incidents, loading, error }, getIncidents] = useAsyncFn(\n    async () => {\n      // For some reason the changes applied to incidents (trigger-resolve-acknowledge)\n      // may take some time to actually be applied after receiving the response from the server.\n      // The timeout compensates for this latency.\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      const allIncidents = await api.getIncidents();\n      const teams = await api.getTeams();\n      const teamSlug = teams.find(teamValue => teamValue.name === team)?.slug;\n      const filteredIncidents = teamSlug\n        ? allIncidents.filter(incident =>\n            incident.pagedTeams?.includes(teamSlug),\n          )\n        : [];\n      return filteredIncidents;\n    },\n  );\n\n  useEffect(() => {\n    getIncidents();\n  }, [refreshIncidents, getIncidents]);\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (!loading && !incidents?.length) {\n    return <IncidentsEmptyState />;\n  }\n\n  return (\n    <List\n      className={classes.root}\n      dense\n      subheader={\n        <ListSubheader className={classes.subheader}>\n          CRITICAL INCIDENTS\n        </ListSubheader>\n      }\n    >\n      {loading ? (\n        <Progress className={classes.progress} />\n      ) : (\n        incidents!.map((incident, index) => (\n          <IncidentListItem\n            onIncidentAction={() => getIncidents()}\n            key={index}\n            team={team}\n            incident={incident}\n            readOnly={readOnly}\n          />\n        ))\n      )}\n    </List>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  TextField,\n  DialogActions,\n  Button,\n  DialogContent,\n  Typography,\n  CircularProgress,\n  Select,\n  MenuItem,\n  createStyles,\n  makeStyles,\n  Theme,\n  FormControl,\n  InputLabel,\n} from '@material-ui/core';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { splunkOnCallApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport { TriggerAlarmRequest } from '../../api/types';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\n\ntype Props = {\n  team: string;\n  showDialog: boolean;\n  handleDialog: () => void;\n  onIncidentCreated: () => void;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    chip: {\n      margin: 2,\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      minWidth: `calc(100% - ${theme.spacing(2)}px)`,\n    },\n    formHeader: {\n      width: '50%',\n    },\n    incidentType: {\n      width: '90%',\n    },\n    targets: {\n      display: 'flex',\n      flexDirection: 'column',\n      width: '100%',\n    },\n  }),\n);\n\nexport const TriggerDialog = ({\n  team,\n  showDialog,\n  handleDialog,\n  onIncidentCreated: onIncidentCreated,\n}: Props) => {\n  const alertApi = useApi(alertApiRef);\n  const api = useApi(splunkOnCallApiRef);\n  const classes = useStyles();\n\n  const [incidentType, setIncidentType] = useState<string>('');\n  const [incidentId, setIncidentId] = useState<string>();\n  const [incidentDisplayName, setIncidentDisplayName] = useState<string>('');\n  const [incidentMessage, setIncidentMessage] = useState<string>('');\n  const [incidentStartTime, setIncidentStartTime] = useState<number>();\n\n  const [\n    { value, loading: triggerLoading, error: triggerError },\n    handleTriggerAlarm,\n  ] = useAsyncFn(\n    async (params: TriggerAlarmRequest) => await api.incidentAction(params),\n  );\n\n  const handleIncidentType = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setIncidentType(event.target.value as string);\n  };\n\n  const handleIncidentId = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setIncidentId(event.target.value as string);\n  };\n\n  const handleIncidentDisplayName = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    setIncidentDisplayName(event.target.value);\n  };\n\n  const handleIncidentMessage = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    setIncidentMessage(event.target.value);\n  };\n\n  const handleIncidentStartTime = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    const dateTime = new Date(event.target.value).getTime();\n    const dateTimeInSeconds = Math.floor(dateTime / 1000);\n    setIncidentStartTime(dateTimeInSeconds);\n  };\n\n  useEffect(() => {\n    if (value) {\n      alertApi.post({\n        message: `Alarm successfully triggered`,\n      });\n      onIncidentCreated();\n      handleDialog();\n    }\n  }, [value, alertApi, handleDialog, onIncidentCreated]);\n\n  if (triggerError) {\n    alertApi.post({\n      message: `Failed to trigger alarm. ${triggerError.message}`,\n      severity: 'error',\n    });\n  }\n\n  return (\n    <Dialog maxWidth=\"md\" open={showDialog} onClose={handleDialog} fullWidth>\n      <DialogTitle>This action will trigger an incident</DialogTitle>\n      <DialogContent>\n        <Typography variant=\"subtitle1\" gutterBottom align=\"justify\">\n          Created by: <b>{`{ REST } Endpoint`}</b>\n        </Typography>\n        <Alert severity=\"info\">\n          <Typography variant=\"body1\" align=\"justify\">\n            If the issue you are seeing does not need urgent attention, please\n            get in touch with the responsible team using their preferred\n            communications channel. You can find information about the owner of\n            this entity in the \"About\" card. If the issue is urgent, please\n            don't hesitate to trigger the alert.\n          </Typography>\n        </Alert>\n        <Typography\n          variant=\"body1\"\n          style={{ marginTop: '1em' }}\n          gutterBottom\n          align=\"justify\"\n        >\n          Please describe the problem you want to report. Be as descriptive as\n          possible. <br />\n          Note that only the <b>Incident type</b>, <b>Incident display name</b>{' '}\n          and the <b>Incident message</b> fields are <b>required</b>.\n        </Typography>\n        <FormControl className={classes.formControl}>\n          <div className={classes.formHeader}>\n            <InputLabel id=\"demo-simple-select-label\">Incident type</InputLabel>\n            <Select\n              id=\"incident-type\"\n              className={classes.incidentType}\n              value={incidentType}\n              onChange={handleIncidentType}\n              inputProps={{ 'data-testid': 'trigger-incident-type' }}\n            >\n              <MenuItem value=\"CRITICAL\">Critical</MenuItem>\n              <MenuItem value=\"WARNING\">Warning</MenuItem>\n              <MenuItem value=\"INFO\">Info</MenuItem>\n            </Select>\n          </div>\n          <TextField\n            className={classes.formHeader}\n            id=\"datetime-local\"\n            label=\"Incident start time\"\n            type=\"datetime-local\"\n            onChange={handleIncidentStartTime}\n            InputLabelProps={{\n              shrink: true,\n            }}\n          />\n        </FormControl>\n        <TextField\n          inputProps={{ 'data-testid': 'trigger-incident-id' }}\n          id=\"summary\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Incident id\"\n          variant=\"outlined\"\n          onChange={handleIncidentId}\n        />\n        <TextField\n          required\n          inputProps={{ 'data-testid': 'trigger-incident-displayName' }}\n          id=\"summary\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Incident display name\"\n          variant=\"outlined\"\n          onChange={handleIncidentDisplayName}\n        />\n        <TextField\n          required\n          inputProps={{ 'data-testid': 'trigger-incident-message' }}\n          id=\"details\"\n          multiline\n          fullWidth\n          rows=\"2\"\n          margin=\"normal\"\n          label=\"Incident message\"\n          variant=\"outlined\"\n          onChange={handleIncidentMessage}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          data-testid=\"trigger-button\"\n          id=\"trigger\"\n          color=\"secondary\"\n          disabled={\n            !incidentType.length ||\n            !incidentDisplayName ||\n            !incidentMessage ||\n            triggerLoading\n          }\n          variant=\"contained\"\n          onClick={() =>\n            handleTriggerAlarm({\n              routingKey: team,\n              incidentType,\n              incidentDisplayName,\n              incidentMessage,\n              ...(incidentId ? { incidentId } : {}),\n              ...(incidentStartTime ? { incidentStartTime } : {}),\n            } as TriggerAlarmRequest)\n          }\n          endIcon={triggerLoading && <CircularProgress size={16} />}\n        >\n          Trigger Incident\n        </Button>\n        <Button id=\"close\" color=\"primary\" onClick={handleDialog}>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useCallback, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Entity } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport AlarmAddIcon from '@material-ui/icons/AlarmAdd';\nimport WebIcon from '@material-ui/icons/Web';\nimport { Alert } from '@material-ui/lab';\nimport { splunkOnCallApiRef, UnauthorizedError } from '../api';\nimport { MissingApiKeyOrApiIdError } from './Errors/MissingApiKeyOrApiIdError';\nimport { EscalationPolicy } from './Escalation';\nimport { Incidents } from './Incident';\nimport { TriggerDialog } from './TriggerDialog';\nimport { Team, User } from './types';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport {\n  EmptyState,\n  HeaderIconLinkRow,\n  IconLinkVerticalProps,\n  MissingAnnotationEmptyState,\n  Progress,\n} from '@backstage/core-components';\n\nexport const SPLUNK_ON_CALL_TEAM = 'splunk.com/on-call-team';\nexport const SPLUNK_ON_CALL_ROUTING_KEY = 'splunk.com/on-call-routing-key';\n\nexport const MissingAnnotation = () => (\n  <div>\n    <Typography>\n      The Splunk On Call plugin requires setting either the{' '}\n      <code>{SPLUNK_ON_CALL_TEAM}</code> or the{' '}\n      <code>{SPLUNK_ON_CALL_ROUTING_KEY}</code> annotation.\n    </Typography>\n    <MissingAnnotationEmptyState annotation={SPLUNK_ON_CALL_TEAM} />\n  </div>\n);\n\nexport const InvalidAnnotation = ({\n  teamName,\n  routingKey,\n}: {\n  teamName: string | undefined;\n  routingKey: string | undefined;\n}) => {\n  let titleSuffix = 'provided annotation';\n\n  if (routingKey) {\n    titleSuffix = `\"${routingKey}\" routing key`;\n  }\n\n  if (teamName) {\n    titleSuffix = `\"${teamName}\" team name`;\n  }\n\n  return (\n    <Card>\n      <CardHeader title=\"Splunk On-Call\" />\n      <CardContent>\n        <EmptyState\n          title={`Splunk On-Call API returned no record of teams associated with the ${titleSuffix}`}\n          missing=\"info\"\n          description=\"Escalation Policy and incident information unavailable. Splunk On-Call requires a valid team name or routing key.\"\n        />\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const MissingEventsRestEndpoint = () => (\n  <CardContent>\n    <EmptyState\n      title=\"No Splunk On-Call REST endpoint available.\"\n      missing=\"info\"\n      description=\"You need to add a valid REST endpoint to your 'app-config.yaml' if you want to enable Splunk On-Call.\"\n    />\n  </CardContent>\n);\n\nexport const isSplunkOnCallAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[SPLUNK_ON_CALL_TEAM]) ||\n  Boolean(entity.metadata.annotations?.[SPLUNK_ON_CALL_ROUTING_KEY]);\n\nconst useStyles = makeStyles({\n  onCallCard: {\n    marginBottom: '1em',\n  },\n});\n\n/** @public */\nexport type EntitySplunkOnCallCardProps = {\n  readOnly?: boolean;\n};\n\n/** @public */\nexport const EntitySplunkOnCallCard = (props: EntitySplunkOnCallCardProps) => {\n  const { readOnly } = props;\n  const classes = useStyles();\n  const config = useApi(configApiRef);\n  const api = useApi(splunkOnCallApiRef);\n  const { entity } = useEntity();\n  const [showDialog, setShowDialog] = useState<boolean>(false);\n  const [refreshIncidents, setRefreshIncidents] = useState<boolean>(false);\n  const teamAnnotation = entity\n    ? entity.metadata.annotations![SPLUNK_ON_CALL_TEAM]\n    : undefined;\n  const routingKeyAnnotation = entity\n    ? entity.metadata.annotations![SPLUNK_ON_CALL_ROUTING_KEY]\n    : undefined;\n\n  const eventsRestEndpoint =\n    config.getOptionalString('splunkOnCall.eventsRestEndpoint') || null;\n\n  const handleRefresh = useCallback(() => {\n    setRefreshIncidents(x => !x);\n  }, []);\n\n  const handleDialog = useCallback(() => {\n    setShowDialog(x => !x);\n  }, []);\n\n  const {\n    value: usersAndTeams,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const allUsers = await api.getUsers();\n    const usersHashMap = allUsers.reduce(\n      (map: Record<string, User>, obj: User) => {\n        if (obj.username) {\n          map[obj.username] = obj;\n        }\n        return map;\n      },\n      {},\n    );\n    const teams = await api.getTeams();\n    let foundTeams = [\n      teams.find(teamValue => teamValue.name === teamAnnotation),\n    ].filter(team => team !== undefined);\n\n    if (!foundTeams.length && routingKeyAnnotation) {\n      const routingKeys = await api.getRoutingKeys();\n      const foundRoutingKey = routingKeys.find(\n        key => key.routingKey === routingKeyAnnotation,\n      );\n      foundTeams = foundRoutingKey\n        ? foundRoutingKey.targets\n            .map(target => {\n              const teamUrlParts = target._teamUrl.split('/');\n              const teamSlug = teamUrlParts[teamUrlParts.length - 1];\n\n              return teams.find(teamValue => teamValue.slug === teamSlug);\n            })\n            .filter(team => team !== undefined)\n        : [];\n    }\n\n    return { usersHashMap, foundTeams };\n  });\n\n  if (!teamAnnotation && !routingKeyAnnotation) {\n    return <MissingAnnotation />;\n  }\n\n  if (!eventsRestEndpoint) {\n    return <MissingEventsRestEndpoint />;\n  }\n\n  if (error instanceof UnauthorizedError) {\n    return <MissingApiKeyOrApiIdError />;\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  if (!usersAndTeams?.foundTeams || !usersAndTeams?.foundTeams.length) {\n    return (\n      <InvalidAnnotation\n        teamName={teamAnnotation}\n        routingKey={routingKeyAnnotation}\n      />\n    );\n  }\n\n  const Content = ({\n    team,\n    usersHashMap,\n  }: {\n    team: Team | undefined;\n    usersHashMap: any;\n  }) => {\n    const teamName = team?.name ?? '';\n\n    return (\n      <>\n        <Incidents\n          readOnly={readOnly || false}\n          team={teamName}\n          refreshIncidents={refreshIncidents}\n        />\n        {usersHashMap && team && (\n          <EscalationPolicy team={teamName} users={usersHashMap} />\n        )}\n        <TriggerDialog\n          team={teamName}\n          showDialog={showDialog}\n          handleDialog={handleDialog}\n          onIncidentCreated={handleRefresh}\n        />\n      </>\n    );\n  };\n\n  const triggerLink: IconLinkVerticalProps = {\n    label: 'Create Incident',\n    onClick: handleDialog,\n    color: 'secondary',\n    icon: <AlarmAddIcon />,\n  };\n\n  const serviceLink = {\n    label: 'Portal',\n    href: 'https://portal.victorops.com/',\n    icon: <WebIcon />,\n  };\n\n  const teams = usersAndTeams?.foundTeams || [];\n\n  return (\n    <>\n      {teams.map((team, i) => (\n        <Card key={i} className={classes.onCallCard}>\n          <CardHeader\n            title=\"Splunk On-Call\"\n            subheader={[\n              <Typography key=\"team_name\">\n                Team: {team && team.name ? team.name : ''}\n              </Typography>,\n              <HeaderIconLinkRow\n                key=\"incident_trigger\"\n                links={!readOnly ? [serviceLink, triggerLink] : [serviceLink]}\n              />,\n            ]}\n          />\n          <Divider />\n          <CardContent>\n            <Content team={team} usersHashMap={usersAndTeams?.usersHashMap} />\n          </CardContent>\n        </Card>\n      ))}\n    </>\n  );\n};\n"],"names":["EntitySplunkOnCallCard","useStyles"],"mappings":"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"}