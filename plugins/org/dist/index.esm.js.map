{"version":3,"file":"index.esm.js","sources":["../src/routes.ts","../src/plugin.ts","../src/components/Cards/Group/MembersList/MembersListCard.tsx","../src/components/Cards/Group/GroupProfile/GroupProfileCard.tsx","../src/components/Cards/User/UserProfileCard/UserProfileCard.tsx","../src/components/Cards/OwnershipCard/useGetEntities.ts","../src/components/Cards/OwnershipCard/ComponentsGrid.tsx","../src/components/Cards/OwnershipCard/OwnershipCard.tsx","../src/components/MyGroupsSidebarItem/MyGroupsSidebarItem.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createExternalRouteRef } from '@backstage/core-plugin-api';\n\nexport const catalogIndexRouteRef = createExternalRouteRef({\n  id: 'catalog-index',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createComponentExtension,\n  createPlugin,\n} from '@backstage/core-plugin-api';\nimport { catalogIndexRouteRef } from './routes';\n\n/** @public */\nexport const orgPlugin = createPlugin({\n  id: 'org',\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef,\n  },\n});\n\n/** @public */\nexport const EntityGroupProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityGroupProfileCard',\n    component: {\n      lazy: () => import('./components').then(m => m.GroupProfileCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityMembersListCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityMembersListCard',\n    component: {\n      lazy: () => import('./components').then(m => m.MembersListCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityOwnershipCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityOwnershipCard',\n    component: {\n      lazy: () => import('./components').then(m => m.OwnershipCard),\n    },\n  }),\n);\n\n/** @public */\nexport const EntityUserProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: 'EntityUserProfileCard',\n    component: {\n      lazy: () => import('./components').then(m => m.UserProfileCard),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DEFAULT_NAMESPACE,\n  GroupEntity,\n  UserEntity,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  catalogApiRef,\n  entityRouteParams,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  createStyles,\n  Grid,\n  makeStyles,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React from 'react';\nimport { generatePath } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\n\nimport {\n  Avatar,\n  InfoCard,\n  Progress,\n  ResponseErrorPanel,\n  Link,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: '4px',\n      overflow: 'visible',\n      position: 'relative',\n      margin: theme.spacing(4, 1, 1),\n      flex: '1',\n      minWidth: '0px',\n    },\n    email: {\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n      display: 'inline-block',\n      maxWidth: '100%',\n      '&:hover': {\n        overflow: 'visible',\n        whiteSpace: 'normal',\n      },\n    },\n  }),\n);\n\nconst MemberComponent = (props: { member: UserEntity }) => {\n  const classes = useStyles();\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile },\n  } = props.member;\n  const displayName = profile?.displayName ?? metaName;\n\n  return (\n    <Grid item container xs={12} sm={6} md={4} xl={2}>\n      <Box className={classes.card}>\n        <Box\n          display=\"flex\"\n          flexDirection=\"column\"\n          m={3}\n          alignItems=\"center\"\n          justifyContent=\"center\"\n        >\n          <Avatar\n            displayName={displayName}\n            picture={profile?.picture}\n            customStyles={{\n              position: 'absolute',\n              top: '-2rem',\n            }}\n          />\n          <Box\n            pt={2}\n            sx={{\n              maxWidth: '100%',\n            }}\n            textAlign=\"center\"\n          >\n            <Typography variant=\"h5\">\n              <Link\n                to={generatePath(\n                  `/catalog/:namespace/user/${metaName}`,\n                  entityRouteParams(props.member),\n                )}\n              >\n                {displayName}\n              </Link>\n            </Typography>\n            {profile?.email && (\n              <Link className={classes.email} to={`mailto:${profile.email}`}>\n                {profile.email}\n              </Link>\n            )}\n            {description && (\n              <Typography variant=\"subtitle2\">{description}</Typography>\n            )}\n          </Box>\n        </Box>\n      </Box>\n    </Grid>\n  );\n};\n\n/** @public */\nexport const MembersListCard = (props: {\n  memberDisplayTitle?: string;\n  pageSize?: number;\n}) => {\n  const { memberDisplayTitle = 'Members', pageSize = 50 } = props;\n\n  const { entity: groupEntity } = useEntity<GroupEntity>();\n  const {\n    metadata: { name: groupName, namespace: grpNamespace },\n    spec: { profile },\n  } = groupEntity;\n  const catalogApi = useApi(catalogApiRef);\n\n  const displayName = profile?.displayName ?? groupName;\n\n  const groupNamespace = grpNamespace || DEFAULT_NAMESPACE;\n\n  const [page, setPage] = React.useState(1);\n  const pageChange = (_: React.ChangeEvent<unknown>, pageIndex: number) => {\n    setPage(pageIndex);\n  };\n\n  const {\n    loading,\n    error,\n    value: members,\n  } = useAsync(async () => {\n    const membersList = await catalogApi.getEntities({\n      filter: {\n        kind: 'User',\n        'relations.memberof': [\n          stringifyEntityRef({\n            kind: 'group',\n            namespace: groupNamespace.toLocaleLowerCase('en-US'),\n            name: groupName.toLocaleLowerCase('en-US'),\n          }),\n        ],\n      },\n    });\n\n    return membersList.items as UserEntity[];\n  }, [catalogApi, groupEntity]);\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n\n  const nbPages = Math.ceil((members?.length || 0) / pageSize);\n  const paginationLabel = nbPages < 2 ? '' : `, page ${page} of ${nbPages}`;\n\n  const pagination = (\n    <Pagination\n      count={nbPages}\n      page={page}\n      onChange={pageChange}\n      showFirstButton\n      showLastButton\n    />\n  );\n\n  return (\n    <Grid item>\n      <InfoCard\n        title={`${memberDisplayTitle} (${\n          members?.length || 0\n        }${paginationLabel})`}\n        subheader={`of ${displayName}`}\n        {...(nbPages <= 1 ? {} : { actions: pagination })}\n      >\n        <Grid container spacing={3}>\n          {members && members.length > 0 ? (\n            members\n              .slice(pageSize * (page - 1), pageSize * page)\n              .map(member => (\n                <MemberComponent member={member} key={member.metadata.uid} />\n              ))\n          ) : (\n            <Box p={2}>\n              <Typography>\n                This group has no {memberDisplayTitle.toLocaleLowerCase()}.\n              </Typography>\n            </Box>\n          )}\n        </Grid>\n      </InfoCard>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  GroupEntity,\n  RELATION_CHILD_OF,\n  RELATION_PARENT_OF,\n  ANNOTATION_LOCATION,\n  stringifyEntityRef,\n  ANNOTATION_EDIT_URL,\n} from '@backstage/catalog-model';\nimport {\n  catalogApiRef,\n  EntityRefLinks,\n  getEntityRelations,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  IconButton,\n} from '@material-ui/core';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { useCallback } from 'react';\nimport {\n  Avatar,\n  InfoCard,\n  InfoCardVariants,\n  Link,\n} from '@backstage/core-components';\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst CardTitle = (props: { title: string }) => (\n  <Box display=\"flex\" alignItems=\"center\">\n    <GroupIcon fontSize=\"inherit\" />\n    <Box ml={1}>{props.title}</Box>\n  </Box>\n);\n\n/** @public */\nexport const GroupProfileCard = (props: { variant?: InfoCardVariants }) => {\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { entity: group } = useEntity<GroupEntity>();\n\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(group));\n    alertApi.post({ message: 'Refresh scheduled', severity: 'info' });\n  }, [catalogApi, alertApi, group]);\n\n  if (!group) {\n    return <Alert severity=\"error\">Group not found</Alert>;\n  }\n\n  const {\n    metadata: { name, description, annotations },\n    spec: { profile },\n  } = group;\n\n  const childRelations = getEntityRelations(group, RELATION_PARENT_OF, {\n    kind: 'Group',\n  });\n  const parentRelations = getEntityRelations(group, RELATION_CHILD_OF, {\n    kind: 'group',\n  });\n\n  const entityLocation = annotations?.[ANNOTATION_LOCATION];\n  const allowRefresh =\n    entityLocation?.startsWith('url:') || entityLocation?.startsWith('file:');\n\n  const entityMetadataEditUrl =\n    group.metadata.annotations?.[ANNOTATION_EDIT_URL];\n\n  const displayName = profile?.displayName ?? name;\n  const emailHref = profile?.email ? `mailto:${profile.email}` : '#';\n  const infoCardAction = entityMetadataEditUrl ? (\n    <IconButton\n      aria-label=\"Edit\"\n      title=\"Edit Metadata\"\n      component={Link}\n      to={entityMetadataEditUrl}\n    >\n      <EditIcon />\n    </IconButton>\n  ) : (\n    <IconButton aria-label=\"Edit\" disabled title=\"Edit Metadata\">\n      <EditIcon />\n    </IconButton>\n  );\n\n  return (\n    <InfoCard\n      title={<CardTitle title={displayName} />}\n      subheader={description}\n      variant={props.variant}\n      action={\n        <>\n          {allowRefresh && (\n            <IconButton\n              aria-label=\"Refresh\"\n              title=\"Schedule entity refresh\"\n              onClick={refreshEntity}\n            >\n              <CachedIcon />\n            </IconButton>\n          )}\n          {infoCardAction}\n        </>\n      }\n    >\n      <Grid container spacing={3}>\n        <Grid item xs={12} sm={2} xl={1}>\n          <Avatar displayName={displayName} picture={profile?.picture} />\n        </Grid>\n        <Grid item md={10} xl={11}>\n          <List>\n            {profile?.email && (\n              <ListItem>\n                <ListItemIcon>\n                  <Tooltip title=\"Email\">\n                    <EmailIcon />\n                  </Tooltip>\n                </ListItemIcon>\n                <ListItemText>\n                  <Link to={emailHref}>{profile.email}</Link>\n                </ListItemText>\n              </ListItem>\n            )}\n\n            {parentRelations.length ? (\n              <ListItem>\n                <ListItemIcon>\n                  <Tooltip title=\"Parent Group\">\n                    <AccountTreeIcon />\n                  </Tooltip>\n                </ListItemIcon>\n                <ListItemText>\n                  <EntityRefLinks\n                    entityRefs={parentRelations}\n                    defaultKind=\"Group\"\n                  />\n                </ListItemText>\n              </ListItem>\n            ) : null}\n\n            {childRelations.length ? (\n              <ListItem>\n                <ListItemIcon>\n                  <Tooltip title=\"Child Groups\">\n                    <GroupIcon />\n                  </Tooltip>\n                </ListItemIcon>\n                <ListItemText>\n                  <EntityRefLinks\n                    entityRefs={childRelations}\n                    defaultKind=\"Group\"\n                  />\n                </ListItemText>\n              </ListItem>\n            ) : null}\n          </List>\n        </Grid>\n      </Grid>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RELATION_MEMBER_OF, UserEntity } from '@backstage/catalog-model';\nimport {\n  EntityRefLinks,\n  getEntityRelations,\n  useEntity,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n} from '@material-ui/core';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport PersonIcon from '@material-ui/icons/Person';\nimport Alert from '@material-ui/lab/Alert';\nimport React from 'react';\nimport {\n  Avatar,\n  InfoCard,\n  InfoCardVariants,\n  Link,\n} from '@backstage/core-components';\n\nconst CardTitle = (props: { title?: string }) =>\n  props.title ? (\n    <Box display=\"flex\" alignItems=\"center\">\n      <PersonIcon fontSize=\"inherit\" />\n      <Box ml={1}>{props.title}</Box>\n    </Box>\n  ) : null;\n\n/** @public */\nexport const UserProfileCard = (props: { variant?: InfoCardVariants }) => {\n  const { entity: user } = useEntity<UserEntity>();\n  if (!user) {\n    return <Alert severity=\"error\">User not found</Alert>;\n  }\n\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile },\n  } = user;\n  const displayName = profile?.displayName ?? metaName;\n  const emailHref = profile?.email ? `mailto:${profile.email}` : undefined;\n  const memberOfRelations = getEntityRelations(user, RELATION_MEMBER_OF, {\n    kind: 'Group',\n  });\n\n  return (\n    <InfoCard\n      title={<CardTitle title={displayName} />}\n      subheader={description}\n      variant={props.variant}\n    >\n      <Grid container spacing={3} alignItems=\"flex-start\">\n        <Grid item xs={12} sm={2} xl={1}>\n          <Avatar displayName={displayName} picture={profile?.picture} />\n        </Grid>\n\n        <Grid item md={10} xl={11}>\n          <List>\n            {profile?.email && (\n              <ListItem>\n                <ListItemIcon>\n                  <Tooltip title=\"Email\">\n                    <EmailIcon />\n                  </Tooltip>\n                </ListItemIcon>\n                <ListItemText>\n                  <Link to={emailHref ?? ''}>{profile.email}</Link>\n                </ListItemText>\n              </ListItem>\n            )}\n\n            <ListItem>\n              <ListItemIcon>\n                <Tooltip title=\"Member of\">\n                  <GroupIcon />\n                </Tooltip>\n              </ListItemIcon>\n              <ListItemText>\n                <EntityRefLinks\n                  entityRefs={memberOfRelations}\n                  defaultKind=\"Group\"\n                />\n              </ListItemText>\n            </ListItem>\n          </List>\n        </Grid>\n      </Grid>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Entity,\n  RELATION_MEMBER_OF,\n  RELATION_PARENT_OF,\n  parseEntityRef,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport {\n  CatalogApi,\n  catalogApiRef,\n  getEntityRelations,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport limiterFactory from 'p-limit';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport qs from 'qs';\n\nconst limiter = limiterFactory(10);\n\ntype EntityTypeProps = {\n  kind: string;\n  type: string;\n  count: number;\n};\n\nconst getQueryParams = (\n  ownersEntityRef: string[],\n  selectedEntity: EntityTypeProps,\n): string => {\n  const { kind, type } = selectedEntity;\n  const owners = ownersEntityRef.map(owner =>\n    humanizeEntityRef(parseEntityRef(owner), { defaultKind: 'group' }),\n  );\n  const filters = {\n    kind,\n    type,\n    owners,\n    user: 'all',\n  };\n  return qs.stringify({ filters }, { arrayFormat: 'repeat' });\n};\n\nconst getOwnersEntityRef = (owner: Entity): string[] => {\n  let owners = [stringifyEntityRef(owner)];\n  if (owner.kind === 'User') {\n    const ownerGroups = getEntityRelations(owner, RELATION_MEMBER_OF, {\n      kind: 'Group',\n    });\n    const ownerGroupsName = ownerGroups.map(ownerGroup =>\n      stringifyEntityRef({\n        kind: ownerGroup.kind,\n        namespace: ownerGroup.namespace,\n        name: ownerGroup.name,\n      }),\n    );\n    owners = [...owners, ...ownerGroupsName];\n  }\n  return owners;\n};\n\nconst getAggregatedOwnersEntityRef = async (\n  parentGroup: Entity,\n  catalogApi: CatalogApi,\n): Promise<string[]> => {\n  const requestedEntities: Entity[] = [];\n  const outstandingEntities = new Map<string, Promise<Entity | undefined>>();\n  const processedEntities = new Set<string>();\n  requestedEntities.push(parentGroup);\n  let currentEntity = parentGroup;\n\n  while (requestedEntities.length > 0) {\n    const childRelations = getEntityRelations(\n      currentEntity,\n      RELATION_PARENT_OF,\n      {\n        kind: 'Group',\n      },\n    );\n\n    await Promise.all(\n      childRelations.map(childGroup =>\n        limiter(async () => {\n          const promise = catalogApi.getEntityByRef(childGroup);\n          outstandingEntities.set(childGroup.name, promise);\n          try {\n            const processedEntity = await promise;\n            if (processedEntity) {\n              requestedEntities.push(processedEntity);\n            }\n          } finally {\n            outstandingEntities.delete(childGroup.name);\n          }\n        }),\n      ),\n    );\n    requestedEntities.shift();\n    processedEntities.add(\n      stringifyEntityRef({\n        kind: currentEntity.kind,\n        namespace: currentEntity.metadata.namespace,\n        name: currentEntity.metadata.name,\n      }),\n    );\n    // always set currentEntity to the first element of array requestedEntities\n    currentEntity = requestedEntities[0];\n  }\n\n  return Array.from(processedEntities);\n};\n\nexport function useGetEntities(\n  entity: Entity,\n  relationsType: string,\n  isGroup: boolean,\n  entityFilterKind?: string[],\n): {\n  componentsWithCounters:\n    | {\n        counter: number;\n        type: string;\n        name: string;\n        queryParams: string;\n      }[]\n    | undefined;\n  loading: boolean;\n  error?: Error;\n} {\n  const catalogApi = useApi(catalogApiRef);\n  const kinds = entityFilterKind ?? ['Component', 'API', 'System'];\n\n  const {\n    loading,\n    error,\n    value: componentsWithCounters,\n  } = useAsync(async () => {\n    const owners =\n      relationsType === 'aggregated' && isGroup\n        ? await getAggregatedOwnersEntityRef(entity, catalogApi)\n        : getOwnersEntityRef(entity);\n    const ownedEntitiesList = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: kinds,\n          'relations.ownedBy': owners,\n        },\n      ],\n      fields: [\n        'kind',\n        'metadata.name',\n        'metadata.namespace',\n        'spec.type',\n        'relations',\n      ],\n    });\n\n    const counts = ownedEntitiesList.items.reduce(\n      (acc: EntityTypeProps[], ownedEntity) => {\n        const match = acc.find(\n          x =>\n            x.kind === ownedEntity.kind &&\n            x.type === (ownedEntity.spec?.type ?? ownedEntity.kind),\n        );\n        if (match) {\n          match.count += 1;\n        } else {\n          acc.push({\n            kind: ownedEntity.kind,\n            type: ownedEntity.spec?.type?.toString() ?? ownedEntity.kind,\n            count: 1,\n          });\n        }\n        return acc;\n      },\n      [],\n    );\n\n    // Return top N (six) entities to be displayed in ownership boxes\n    const topN = counts.sort((a, b) => b.count - a.count).slice(0, 6);\n\n    return topN.map(topOwnedEntity => ({\n      counter: topOwnedEntity.count,\n      type: topOwnedEntity.type,\n      name: topOwnedEntity.type.toLocaleUpperCase('en-US'),\n      queryParams: getQueryParams(owners, topOwnedEntity),\n    })) as Array<{\n      counter: number;\n      type: string;\n      name: string;\n      queryParams: string;\n    }>;\n  }, [catalogApi, entity, relationsType]);\n\n  return {\n    componentsWithCounters,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport { Link, Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  Box,\n  createStyles,\n  Grid,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { catalogIndexRouteRef } from '../../../routes';\nimport { useGetEntities } from './useGetEntities';\n\nconst useStyles = makeStyles((theme: BackstageTheme) =>\n  createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: '4px',\n      padding: theme.spacing(2),\n      color: '#fff',\n      transition: `${theme.transitions.duration.standard}ms`,\n      '&:hover': {\n        boxShadow: theme.shadows[4],\n      },\n    },\n    bold: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    entityTypeBox: {\n      background: (props: { type: string }) =>\n        theme.getPageTheme({ themeId: props.type }).backgroundImage,\n    },\n  }),\n);\n\nconst EntityCountTile = ({\n  counter,\n  type,\n  name,\n  url,\n}: {\n  counter: number;\n  type: string;\n  name: string;\n  url: string;\n}) => {\n  const classes = useStyles({ type });\n\n  return (\n    <Link to={url} variant=\"body2\">\n      <Box\n        className={`${classes.card} ${classes.entityTypeBox}`}\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n      >\n        <Typography className={classes.bold} variant=\"h6\">\n          {counter}\n        </Typography>\n        <Typography className={classes.bold} variant=\"h6\">\n          {pluralize(name, counter)}\n        </Typography>\n      </Box>\n    </Link>\n  );\n};\n\nexport const ComponentsGrid = ({\n  entity,\n  relationsType,\n  isGroup,\n  entityFilterKind,\n}: {\n  entity: Entity;\n  relationsType: string;\n  isGroup: boolean;\n  entityFilterKind?: string[];\n}) => {\n  const catalogLink = useRouteRef(catalogIndexRouteRef);\n  const { componentsWithCounters, loading, error } = useGetEntities(\n    entity,\n    relationsType,\n    isGroup,\n    entityFilterKind,\n  );\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n\n  return (\n    <Grid container>\n      {componentsWithCounters?.map(c => (\n        <Grid item xs={6} md={6} lg={4} key={c.name}>\n          <EntityCountTile\n            counter={c.counter}\n            type={c.type}\n            name={c.name}\n            url={`${catalogLink()}/?${c.queryParams}`}\n          />\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard, InfoCardVariants } from '@backstage/core-components';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  makeStyles,\n  Switch,\n  Tooltip,\n} from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { ComponentsGrid } from './ComponentsGrid';\n\nconst useStyles = makeStyles(theme => ({\n  list: {\n    [theme.breakpoints.down('xs')]: {\n      padding: `0 0 12px`,\n    },\n  },\n  listItemText: {\n    [theme.breakpoints.down('xs')]: {\n      paddingRight: 0,\n      paddingLeft: 0,\n    },\n  },\n  listItemSecondaryAction: {\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      top: 'auto',\n      right: 'auto',\n      position: 'relative',\n      transform: 'unset',\n    },\n  },\n}));\n\n/** @public */\nexport const OwnershipCard = (props: {\n  variant?: InfoCardVariants;\n  entityFilterKind?: string[];\n  hideRelationsToggle?: boolean;\n  relationsType?: string;\n}) => {\n  const { variant, entityFilterKind, hideRelationsToggle, relationsType } =\n    props;\n  const relationsToggle =\n    hideRelationsToggle === undefined ? false : hideRelationsToggle;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const isGroup = entity.kind === 'Group';\n  const [getRelationsType, setRelationsType] = useState(\n    relationsType || 'direct',\n  );\n\n  return (\n    <InfoCard title=\"Ownership\" variant={variant}>\n      {!relationsToggle && (\n        <List dense>\n          <ListItem className={classes.list}>\n            <ListItemText className={classes.listItemText} />\n            <ListItemSecondaryAction\n              className={classes.listItemSecondaryAction}\n            >\n              Direct Relations\n              <Tooltip\n                placement=\"top\"\n                arrow\n                title={`${\n                  getRelationsType === 'direct' ? 'Direct' : 'Aggregated'\n                } Relations`}\n              >\n                <Switch\n                  color=\"primary\"\n                  checked={getRelationsType !== 'direct'}\n                  onChange={() =>\n                    getRelationsType === 'direct'\n                      ? setRelationsType('aggregated')\n                      : setRelationsType('direct')\n                  }\n                  name=\"pin\"\n                  inputProps={{ 'aria-label': 'Ownership Type Switch' }}\n                  disabled={!isGroup}\n                />\n              </Tooltip>\n              Aggregated Relations\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      )}\n      <ComponentsGrid\n        entity={entity}\n        relationsType={getRelationsType}\n        isGroup={isGroup}\n        entityFilterKind={entityFilterKind}\n      />\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport {\n  SidebarItem,\n  SidebarSubmenu,\n  SidebarSubmenuItem,\n} from '@backstage/core-components';\nimport {\n  IconComponent,\n  identityApiRef,\n  useApi,\n  useRouteRef,\n} from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  catalogApiRef,\n  CatalogApi,\n  entityRouteRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\n/**\n * MyGroupsSidebarItem can be added to your sidebar providing quick access to groups the logged in user is a member of\n *\n * @public\n */\nexport const MyGroupsSidebarItem = (props: {\n  singularTitle: string;\n  pluralTitle: string;\n  icon: IconComponent;\n  filter?: Record<string, string | symbol | (string | symbol)[]>;\n}) => {\n  const { singularTitle, pluralTitle, icon, filter } = props;\n\n  const identityApi = useApi(identityApiRef);\n  const catalogApi: CatalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n\n    const response = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: 'group',\n          'relations.hasMember': profile.userEntityRef,\n          ...(filter ?? {}),\n        },\n      ],\n      fields: ['metadata', 'kind'],\n    });\n\n    return response.items;\n  }, []);\n\n  // Not a member of any groups\n  if (!groups?.length) {\n    return null;\n  }\n\n  // Only member of one group\n  if (groups.length === 1) {\n    const group = groups[0];\n    return (\n      <SidebarItem\n        text={singularTitle}\n        to={catalogEntityRoute(getCompoundEntityRef(group))}\n        icon={icon}\n      />\n    );\n  }\n\n  // Member of more than one group\n  return (\n    <SidebarItem icon={icon} text={pluralTitle}>\n      <SidebarSubmenu title={pluralTitle}>\n        {groups?.map(function groupsMap(group) {\n          return (\n            <SidebarSubmenuItem\n              title={\n                group.metadata.title ||\n                humanizeEntityRef(group, { defaultKind: 'group' })\n              }\n              to={catalogEntityRoute(getCompoundEntityRef(group))}\n              icon={icon}\n              key={stringifyEntityRef(group)}\n            />\n          );\n        })}\n      </SidebarSubmenu>\n    </SidebarItem>\n  );\n};\n"],"names":["useStyles","CardTitle"],"mappings":"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"}