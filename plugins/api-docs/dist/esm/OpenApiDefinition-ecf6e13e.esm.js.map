{"version":3,"file":"OpenApiDefinition-ecf6e13e.esm.js","sources":["../../src/components/OpenApiDefinitionWidget/OpenApiDefinition.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState } from 'react';\nimport SwaggerUI from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& .swagger-ui': {\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n\n      [`& .scheme-container`]: {\n        backgroundColor: theme.palette.background.default,\n      },\n      [`& .opblock-tag,\n          .opblock-tag small,\n          table thead tr td,\n          table thead tr th`]: {\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        borderColor: theme.palette.divider,\n      },\n      [`& section.models,\n          section.models.is-open h4`]: {\n        borderColor: theme.palette.divider,\n      },\n      [`& .model-title,\n          .model .renderedMarkdown,\n          .model .description`]: {\n        fontFamily: theme.typography.fontFamily,\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n      [`& h1, h2, h3, h4, h5, h6,\n          .errors h4, .error h4, .opblock h4, section.models h4,\n          .response-control-media-type__accept-message,\n          .opblock-summary-description,\n          .opblock-summary-operation-id,\n          .opblock-summary-path,\n          .opblock-summary-path__deprecated,\n          .opblock-external-docs-wrapper,\n          .opblock-section-header .btn,\n          .opblock-section-header>label,\n          .scheme-container .schemes>label,a.nostyle,\n          .parameter__name,\n          .response-col_status,\n          .response-col_links,\n          .error .btn,\n          .info .title,\n          .info .base-url`]: {\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n      },\n      [`& .opblock .opblock-section-header, \n          .model-box,\n          section.models .model-container`]: {\n        background: theme.palette.background.default,\n      },\n      [`& .prop-format,\n          .parameter__in`]: {\n        color: theme.palette.text.disabled,\n      },\n      [`& table.model, \n          .parameter__type,\n          .model.model-title,\n          .model-title,\n          .model span,\n          .model .brace-open,\n          .model .brace-close,\n          .model .property.primitive,\n          .model .renderedMarkdown,\n          .model .description,\n          .errors small`]: {\n        color: theme.palette.text.secondary,\n      },\n      [`& .parameter__name.required:after`]: {\n        color: theme.palette.warning.dark,\n      },\n      [`& table.model, \n          table.model .model,\n          .opblock-external-docs-wrapper`]: {\n        fontSize: theme.typography.fontSize,\n      },\n      [`& table.headers td`]: {\n        color: theme.palette.text.primary,\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n      [`& .model-hint`]: {\n        color: theme.palette.text.hint,\n        backgroundColor: theme.palette.background.paper,\n      },\n      [`& .opblock-summary-method, \n          .info a`]: {\n        fontFamily: theme.typography.fontFamily,\n      },\n      [`& .info, .opblock, .tab`]: {\n        [`& li, p`]: {\n          fontFamily: theme.typography.fontFamily,\n          color: theme.palette.text.primary,\n        },\n      },\n      [`& a`]: {\n        color: theme.palette.primary.main,\n      },\n      [`& .renderedMarkdown code`]: {\n        color: theme.palette.secondary.light,\n      },\n      [`& .property-row td:first-child`]: {\n        color: theme.palette.text.primary,\n      },\n      [`& span.prop-type`]: {\n        color: theme.palette.success.light,\n      },\n    },\n  },\n}));\n\nexport type OpenApiDefinitionProps = {\n  definition: string;\n};\n\nexport const OpenApiDefinition = ({ definition }: OpenApiDefinitionProps) => {\n  const classes = useStyles();\n\n  // Due to a bug in the swagger-ui-react component, the component needs\n  // to be created without content first.\n  const [def, setDef] = useState('');\n\n  useEffect(() => {\n    const timer = setTimeout(() => setDef(definition), 0);\n    return () => clearTimeout(timer);\n  }, [definition, setDef]);\n\n  return (\n    <div className={classes.root}>\n      <SwaggerUI spec={def} url=\"\" deepLinking />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAIA,MAAM,SAAS,GAAG,UAAU,CAAC,CAAC,KAAK,MAAM;AACzC,EAAE,IAAI,EAAE;AACR,IAAI,eAAe,EAAE;AACrB,MAAM,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;AAC7C,MAAM,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO;AACvC,MAAM,CAAC,CAAC,mBAAmB,CAAC,GAAG;AAC/B,QAAQ,eAAe,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO;AACzD,OAAO;AACP,MAAM,CAAC,CAAC;AACR;AACA;AACA,2BAA2B,CAAC,GAAG;AAC/B,QAAQ,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;AAC/C,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO;AACzC,QAAQ,WAAW,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO;AAC1C,OAAO;AACP,MAAM,CAAC,CAAC;AACR,mCAAmC,CAAC,GAAG;AACvC,QAAQ,WAAW,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO;AAC1C,OAAO;AACP,MAAM,CAAC,CAAC;AACR;AACA,6BAA6B,CAAC,GAAG;AACjC,QAAQ,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;AAC/C,QAAQ,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,iBAAiB;AACtD,OAAO;AACP,MAAM,CAAC,CAAC;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,CAAC,GAAG;AAC7B,QAAQ,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;AAC/C,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO;AACzC,OAAO;AACP,MAAM,CAAC,CAAC;AACR;AACA,yCAAyC,CAAC,GAAG;AAC7C,QAAQ,UAAU,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO;AACpD,OAAO;AACP,MAAM,CAAC,CAAC;AACR,wBAAwB,CAAC,GAAG;AAC5B,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ;AAC1C,OAAO;AACP,MAAM,CAAC,CAAC;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,CAAC,GAAG;AAC3B,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS;AAC3C,OAAO;AACP,MAAM,CAAC,CAAC,iCAAiC,CAAC,GAAG;AAC7C,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI;AACzC,OAAO;AACP,MAAM,CAAC,CAAC;AACR;AACA,wCAAwC,CAAC,GAAG;AAC5C,QAAQ,QAAQ,EAAE,KAAK,CAAC,UAAU,CAAC,QAAQ;AAC3C,OAAO;AACP,MAAM,CAAC,CAAC,kBAAkB,CAAC,GAAG;AAC9B,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO;AACzC,QAAQ,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,iBAAiB;AACtD,OAAO;AACP,MAAM,CAAC,CAAC,aAAa,CAAC,GAAG;AACzB,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI;AACtC,QAAQ,eAAe,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK;AACvD,OAAO;AACP,MAAM,CAAC,CAAC;AACR,iBAAiB,CAAC,GAAG;AACrB,QAAQ,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;AAC/C,OAAO;AACP,MAAM,CAAC,CAAC,uBAAuB,CAAC,GAAG;AACnC,QAAQ,CAAC,CAAC,OAAO,CAAC,GAAG;AACrB,UAAU,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;AACjD,UAAU,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO;AAC3C,SAAS;AACT,OAAO;AACP,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG;AACf,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI;AACzC,OAAO;AACP,MAAM,CAAC,CAAC,wBAAwB,CAAC,GAAG;AACpC,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK;AAC5C,OAAO;AACP,MAAM,CAAC,CAAC,8BAA8B,CAAC,GAAG;AAC1C,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO;AACzC,OAAO;AACP,MAAM,CAAC,CAAC,gBAAgB,CAAC,GAAG;AAC5B,QAAQ,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK;AAC1C,OAAO;AACP,KAAK;AACL,GAAG;AACH,CAAC,CAAC,CAAC,CAAC;AACQ,MAAC,iBAAiB,GAAG,CAAC,EAAE,UAAU,EAAE,KAAK;AACrD,EAAE,MAAM,OAAO,GAAG,SAAS,EAAE,CAAC;AAC9B,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;AACrC,EAAE,SAAS,CAAC,MAAM;AAClB,IAAI,MAAM,KAAK,GAAG,UAAU,CAAC,MAAM,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1D,IAAI,OAAO,MAAM,YAAY,CAAC,KAAK,CAAC,CAAC;AACrC,GAAG,EAAE,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC;AAC3B,EAAE,uBAAuB,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE;AACpD,IAAI,SAAS,EAAE,OAAO,CAAC,IAAI;AAC3B,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,SAAS,EAAE;AACpD,IAAI,IAAI,EAAE,GAAG;AACb,IAAI,GAAG,EAAE,EAAE;AACX,IAAI,WAAW,EAAE,IAAI;AACrB,GAAG,CAAC,CAAC,CAAC;AACN;;;;"}