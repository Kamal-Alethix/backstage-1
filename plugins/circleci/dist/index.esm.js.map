{"version":3,"file":"index.esm.js","sources":["../src/api/CircleCIApi.ts","../src/route-refs.tsx","../src/plugin.ts","../src/util/time.ts","../src/components/BuildWithStepsPage/lib/ActionOutput/ActionOutput.tsx","../src/state/useAsyncPolling.ts","../src/constants.ts","../src/state/useBuilds.ts","../src/state/useBuildWithSteps.ts","../src/components/BuildWithStepsPage/BuildWithStepsPage.tsx","../src/components/BuildsPage/lib/CITable/CITable.tsx","../src/components/BuildsPage/lib/Builds/Builds.tsx","../src/components/BuildsPage/BuildsPage.tsx","../src/components/Router.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CircleCIOptions,\n  getMe,\n  getBuildSummaries,\n  getFullBuild,\n  postBuildActions,\n  BuildAction,\n  BuildWithSteps,\n  BuildStepAction,\n  BuildSummary,\n  GitType,\n} from 'circleci-api';\nimport { createApiRef, DiscoveryApi } from '@backstage/core-plugin-api';\n\nexport { GitType };\nexport type { BuildWithSteps, BuildStepAction, BuildSummary };\n\nexport const circleCIApiRef = createApiRef<CircleCIApi>({\n  id: 'plugin.circleci.service',\n});\n\nconst DEFAULT_PROXY_PATH = '/circleci/api';\n\ntype Options = {\n  discoveryApi: DiscoveryApi;\n  /**\n   * Path to use for requests via the proxy, defaults to /circleci/api\n   */\n  proxyPath?: string;\n};\n\nexport class CircleCIApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly proxyPath: string;\n\n  constructor(options: Options) {\n    this.discoveryApi = options.discoveryApi;\n    this.proxyPath = options.proxyPath ?? DEFAULT_PROXY_PATH;\n  }\n\n  async retry(buildNumber: number, options: Partial<CircleCIOptions>) {\n    return postBuildActions('', buildNumber, BuildAction.RETRY, {\n      circleHost: await this.getApiUrl(),\n      ...options.vcs,\n    });\n  }\n\n  async getBuilds(\n    { limit = 10, offset = 0 }: { limit: number; offset: number },\n    options: Partial<CircleCIOptions>,\n  ) {\n    return getBuildSummaries('', {\n      options: {\n        limit,\n        offset,\n      },\n      vcs: {},\n      circleHost: await this.getApiUrl(),\n      ...options,\n    });\n  }\n\n  async getUser(options: Partial<CircleCIOptions>) {\n    return getMe('', { circleHost: await this.getApiUrl(), ...options });\n  }\n\n  async getBuild(buildNumber: number, options: Partial<CircleCIOptions>) {\n    return getFullBuild('', buildNumber, {\n      circleHost: await this.getApiUrl(),\n      ...options.vcs,\n    });\n  }\n\n  private async getApiUrl() {\n    const proxyUrl = await this.discoveryApi.getBaseUrl('proxy');\n    return proxyUrl + this.proxyPath;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef, createSubRouteRef } from '@backstage/core-plugin-api';\n\nexport const circleCIRouteRef = createRouteRef({\n  id: 'circle-ci',\n});\n\nexport const circleCIBuildRouteRef = createSubRouteRef({\n  id: 'circle-ci/build',\n  parent: circleCIRouteRef,\n  path: '/:buildId',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { circleCIApiRef, CircleCIApi } from './api';\nimport { circleCIRouteRef } from './route-refs';\nimport {\n  createPlugin,\n  createApiFactory,\n  discoveryApiRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const circleCIPlugin = createPlugin({\n  id: 'circleci',\n  apis: [\n    createApiFactory({\n      api: circleCIApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new CircleCIApi({ discoveryApi }),\n    }),\n  ],\n});\n\nexport const EntityCircleCIContent = circleCIPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityCircleCIContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: circleCIRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\n\nexport function relativeTimeTo(dateTimeISOString?: string) {\n  return dateTimeISOString\n    ? DateTime.fromISO(dateTimeISOString).toRelative()\n    : '';\n}\n\nexport function durationHumanized(\n  startDateTimeISOString?: string,\n  endDateTimeISOString?: string,\n): string {\n  if (!startDateTimeISOString || !endDateTimeISOString) {\n    return '';\n  }\n\n  const startDateTime = DateTime.fromISO(startDateTimeISOString);\n  const endDateTime = DateTime.fromISO(endDateTimeISOString);\n  const duration = Interval.fromDateTimes(\n    startDateTime,\n    endDateTime,\n  ).toDuration();\n\n  return humanizeDuration(duration.as('milliseconds'), {\n    largest: 1,\n  });\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { BuildStepAction } from 'circleci-api';\nimport React, { useEffect, useState } from 'react';\nimport { durationHumanized } from '../../../../util';\n\nconst useStyles = makeStyles({\n  accordionDetails: {\n    padding: 0,\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: '-20px',\n  },\n});\n\nexport const ActionOutput = ({\n  url,\n  name,\n  className,\n  action,\n}: {\n  url: string;\n  name: string;\n  className?: string;\n  action: BuildStepAction;\n}) => {\n  const classes = useStyles();\n\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    fetch(url)\n      .then(res => res.json())\n      .then(actionOutput => {\n        if (typeof actionOutput !== 'undefined') {\n          setMessages(\n            actionOutput.map(({ message }: { message: string }) => message),\n          );\n        }\n      });\n  }, [url]);\n\n  const timeElapsed = durationHumanized(action.start_time, action.end_time);\n\n  return (\n    <Accordion TransitionProps={{ unmountOnExit: true }} className={className}>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls={`panel-${name}-content`}\n        id={`panel-${name}-header`}\n        IconButtonProps={{\n          className: classes.button,\n        }}\n      >\n        <Typography variant=\"button\">\n          {name} ({timeElapsed})\n        </Typography>\n      </AccordionSummary>\n      <AccordionDetails className={classes.accordionDetails}>\n        {messages.length === 0 ? (\n          'Nothing here...'\n        ) : (\n          <div style={{ height: '20vh', width: '100%' }}>\n            <LogViewer text={messages.join('\\n')} />\n          </div>\n        )}\n      </AccordionDetails>\n    </Accordion>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef } from 'react';\n\nexport const useAsyncPolling = (\n  pollingFn: () => Promise<any>,\n  interval: number,\n) => {\n  const isPolling = useRef<boolean>(false);\n  const startPolling = async () => {\n    if (isPolling.current === true) return;\n    isPolling.current = true;\n\n    while (isPolling.current === true) {\n      await pollingFn();\n      await new Promise(resolve => setTimeout(resolve, interval));\n    }\n  };\n\n  const stopPolling = () => {\n    isPolling.current = false;\n  };\n  return { startPolling, stopPolling };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const CIRCLECI_ANNOTATION = 'circleci.com/project-slug';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { BuildSummary, GitType } from 'circleci-api';\nimport { getOr } from 'lodash/fp';\nimport { useCallback, useEffect, useState } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { circleCIApiRef } from '../api';\nimport type { CITableBuildInfo } from '../components/BuildsPage/lib/CITable';\nimport { CIRCLECI_ANNOTATION } from '../constants';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst makeReadableStatus = (status: string | undefined) => {\n  if (!status) return '';\n  return (\n    {\n      retried: 'Retried',\n      canceled: 'Canceled',\n      infrastructure_fail: 'Infra fail',\n      timedout: 'Timedout',\n      not_run: 'Not run',\n      running: 'Running',\n      failed: 'Failed',\n      queued: 'Queued',\n      scheduled: 'Scheduled',\n      not_running: 'Not running',\n      no_tests: 'No tests',\n      fixed: 'Fixed',\n      success: 'Success',\n    } as Record<string, string>\n  )[status];\n};\n\nconst mapWorkflowDetails = (buildData: BuildSummary) => {\n  // Workflows should be an object: fixed in https://github.com/worldturtlemedia/circleci-api/pull/787\n  const { workflows } = (buildData as any) ?? {};\n\n  return {\n    id: workflows?.workflow_id,\n    url: `${buildData.build_url}/workflows/${workflows?.workflow_id}`,\n    jobName: workflows?.job_name,\n    name: workflows?.workflow_name,\n  };\n};\n\nconst mapSourceDetails = (buildData: BuildSummary) => {\n  const commitDetails = getOr({}, 'all_commit_details[0]', buildData);\n\n  return {\n    branchName: String(buildData.branch),\n    commit: {\n      hash: String(buildData.vcs_revision),\n      shortHash: String(buildData.vcs_revision).substr(0, 7),\n      committerName: buildData.committer_name,\n      url: commitDetails.commit_url,\n    },\n  };\n};\n\nconst mapUser = (buildData: BuildSummary) => ({\n  isUser: buildData?.user?.is_user || false,\n  login: buildData?.user?.login || 'none',\n  name: (buildData?.user as any)?.name,\n  avatarUrl: (buildData?.user as any)?.avatar_url,\n});\n\nexport const transform = (\n  buildsData: BuildSummary[],\n  restartBuild: { (buildId: number): Promise<void> },\n): CITableBuildInfo[] => {\n  return buildsData.map(buildData => {\n    const tableBuildInfo: CITableBuildInfo = {\n      id: String(buildData.build_num),\n      buildName: buildData.subject\n        ? buildData.subject +\n          (buildData.retry_of ? ` (retry of #${buildData.retry_of})` : '')\n        : '',\n      startTime: buildData.start_time,\n      stopTime: buildData.stop_time,\n      onRestartClick: () =>\n        typeof buildData.build_num !== 'undefined' &&\n        restartBuild(buildData.build_num),\n      source: mapSourceDetails(buildData),\n      workflow: mapWorkflowDetails(buildData),\n      user: mapUser(buildData),\n      status: makeReadableStatus(buildData.status),\n      buildUrl: buildData.build_url,\n    };\n    return tableBuildInfo;\n  });\n};\n\nexport const useProjectSlugFromEntity = () => {\n  const { entity } = useEntity();\n  const [vcs, owner, repo] = (\n    entity.metadata.annotations?.[CIRCLECI_ANNOTATION] ?? ''\n  ).split('/');\n  return { vcs, owner, repo };\n};\n\nexport function mapVcsType(vcs: string): GitType {\n  switch (vcs) {\n    case 'gh':\n    case 'github':\n      return GitType.GITHUB;\n    default:\n      return GitType.BITBUCKET;\n  }\n}\n\nexport function useBuilds() {\n  const { repo, owner, vcs } = useProjectSlugFromEntity();\n  const api = useApi(circleCIApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n\n  const getBuilds = useCallback(\n    async ({ limit, offset }: { limit: number; offset: number }) => {\n      if (owner === '' || repo === '' || vcs === '') {\n        return Promise.reject('No credentials provided');\n      }\n\n      try {\n        return await api.getBuilds(\n          { limit, offset },\n          {\n            vcs: {\n              owner: owner,\n              repo: repo,\n              type: mapVcsType(vcs),\n            },\n          },\n        );\n      } catch (e) {\n        errorApi.post(e);\n        return Promise.reject(e);\n      }\n    },\n    [repo, owner, vcs, api, errorApi],\n  );\n\n  const restartBuild = async (buildId: number) => {\n    try {\n      await api.retry(buildId, {\n        vcs: {\n          owner: owner,\n          repo: repo,\n          type: mapVcsType(vcs),\n        },\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n\n  useEffect(() => {\n    getBuilds({ limit: 1, offset: 0 }).then(b => setTotal(b?.[0].build_num!));\n  }, [repo, getBuilds]);\n\n  const { loading, value, retry } = useAsyncRetry(\n    () =>\n      getBuilds({\n        offset: page * pageSize,\n        limit: pageSize,\n      }).then(builds => transform(builds ?? [], restartBuild)),\n    [page, pageSize, getBuilds],\n  );\n\n  const projectName = `${owner}/${repo}`;\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      value,\n      projectName,\n      total,\n    },\n    {\n      getBuilds,\n      setPage,\n      setPageSize,\n      restartBuild,\n      retry,\n    },\n  ] as const;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useCallback, useMemo } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { circleCIApiRef } from '../api';\nimport { useAsyncPolling } from './useAsyncPolling';\nimport { useProjectSlugFromEntity, mapVcsType } from './useBuilds';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nconst INTERVAL_AMOUNT = 1500;\nexport function useBuildWithSteps(buildId: number) {\n  const { vcs, repo, owner } = useProjectSlugFromEntity();\n  const api = useApi(circleCIApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const vcsOption = useMemo(\n    () => ({\n      owner: owner,\n      repo: repo,\n      type: mapVcsType(vcs),\n    }),\n    [owner, repo, vcs],\n  );\n\n  const getBuildWithSteps = useCallback(async () => {\n    if (owner === '' || repo === '' || vcs === '') {\n      return Promise.reject('No credentials provided');\n    }\n\n    try {\n      const options = {\n        vcs: vcsOption,\n      };\n      const build = await api.getBuild(buildId, options);\n      return Promise.resolve(build);\n    } catch (e) {\n      errorApi.post(e);\n      return Promise.reject(e);\n    }\n  }, [vcsOption, buildId, api, errorApi]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const restartBuild = async () => {\n    try {\n      await api.retry(buildId, {\n        vcs: vcsOption,\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuildWithSteps(),\n    [getBuildWithSteps],\n  );\n\n  const { startPolling, stopPolling } = useAsyncPolling(\n    getBuildWithSteps,\n    INTERVAL_AMOUNT,\n  );\n\n  return [\n    { loading, value, retry },\n    {\n      restartBuild,\n      getBuildWithSteps,\n      startPolling,\n      stopPolling,\n    },\n  ] as const;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { BuildWithSteps, BuildStepAction } from '../../api';\nimport {\n  Grid,\n  Box,\n  IconButton,\n  Typography,\n  Link as MaterialLink,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ActionOutput } from './lib/ActionOutput/ActionOutput';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { useBuildWithSteps } from '../../state/useBuildWithSteps';\nimport {\n  Breadcrumbs,\n  InfoCard,\n  Progress,\n  Link,\n} from '@backstage/core-components';\n\nconst IconLink = IconButton as any as typeof MaterialLink;\n\nconst BuildName = ({ build }: { build?: BuildWithSteps }) => (\n  <Box display=\"flex\" alignItems=\"center\">\n    #{build?.build_num} - {build?.subject}\n    <IconLink href={build?.build_url} target=\"_blank\">\n      <LaunchIcon />\n    </IconLink>\n  </Box>\n);\n\nconst useStyles = makeStyles(theme => ({\n  neutral: {},\n  failed: {\n    position: 'relative',\n    '&:after': {\n      pointerEvents: 'none',\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.error.main}`,\n    },\n  },\n  running: {\n    position: 'relative',\n    '&:after': {\n      pointerEvents: 'none',\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.info.main}`,\n    },\n  },\n  cardContent: {\n    backgroundColor: theme.palette.background.default,\n  },\n  success: {\n    position: 'relative',\n    '&:after': {\n      pointerEvents: 'none',\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.success.main}`,\n    },\n  },\n}));\n\nconst pickClassName = (\n  classes: ReturnType<typeof useStyles>,\n  build: BuildWithSteps = {} as BuildWithSteps,\n) => {\n  if (build.failed) return classes.failed;\n  if (['running', 'queued'].includes(build.status!)) return classes.running;\n  if (build.status === 'success') return classes.success;\n\n  return classes.neutral;\n};\n\nconst ActionsList = ({\n  actions,\n}: {\n  actions: BuildStepAction[];\n  name: string;\n}) => {\n  const classes = useStyles();\n  return (\n    <>\n      {actions.map((action: BuildStepAction) => (\n        <ActionOutput\n          className={action.failed ? classes.failed : classes.success}\n          action={action}\n          name={action.name}\n          url={action.output_url || ''}\n        />\n      ))}\n    </>\n  );\n};\n\nconst BuildsList = ({ build }: { build?: BuildWithSteps }) => (\n  <Box>\n    {build &&\n      build.steps &&\n      build.steps.map(\n        ({ name, actions }: { name: string; actions: BuildStepAction[] }) => (\n          <ActionsList key={name} name={name} actions={actions} />\n        ),\n      )}\n  </Box>\n);\n\nexport const BuildWithStepsPage = () => {\n  const { buildId = '' } = useParams();\n  const classes = useStyles();\n  const [{ loading, value }, { startPolling, stopPolling }] = useBuildWithSteps(\n    parseInt(buildId, 10),\n  );\n\n  useEffect(() => {\n    startPolling();\n    return () => stopPolling();\n  }, [buildId, startPolling, stopPolling]);\n\n  return (\n    <>\n      <Box mb={3}>\n        <Breadcrumbs aria-label=\"breadcrumb\">\n          <Link to=\"..\">All builds</Link>\n          <Typography>Build details</Typography>\n        </Breadcrumbs>\n      </Box>\n      <Grid container spacing={3} direction=\"column\">\n        <Grid item>\n          <InfoCard\n            className={pickClassName(classes, value)}\n            title={<BuildName build={value} />}\n            cardClassName={classes.cardContent}\n          >\n            {loading ? <Progress /> : <BuildsList build={value} />}\n          </InfoCard>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Avatar,\n  Typography,\n  Box,\n  IconButton,\n  makeStyles,\n} from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { durationHumanized, relativeTimeTo } from '../../../../util';\nimport { circleCIBuildRouteRef } from '../../../../route-refs';\nimport {\n  StatusError,\n  StatusWarning,\n  StatusOK,\n  StatusPending,\n  StatusRunning,\n  Table,\n  TableColumn,\n  Link,\n} from '@backstage/core-components';\nimport { useRouteRef } from '@backstage/core-plugin-api';\n\nexport type CITableBuildInfo = {\n  id: string;\n  buildName: string;\n  buildUrl?: string;\n  startTime?: string;\n  stopTime?: string;\n  source: {\n    branchName: string;\n    commit: {\n      hash: string;\n      shortHash: string;\n      url: string;\n      committerName?: string;\n    };\n  };\n  status: string;\n  tests?: {\n    total: number;\n    passed: number;\n    skipped: number;\n    failed: number;\n    testUrl: string; // fixme better name\n  };\n  workflow: {\n    id: string;\n    url: string;\n    name?: string;\n    jobName?: string;\n  };\n  user: {\n    isUser: boolean;\n    login: string;\n    name?: string;\n    avatarUrl?: string;\n  };\n  onRestartClick: () => void;\n};\n\n// retried, canceled, infrastructure_fail, timedout, not_run, running, failed, queued, scheduled, not_running, no_tests, fixed, success\nconst getStatusComponent = (status: string | undefined = '') => {\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n    case 'scheduled':\n      return <StatusPending />;\n    case 'running':\n      return <StatusRunning />;\n    case 'failed':\n      return <StatusError />;\n    case 'success':\n      return <StatusOK />;\n    case 'canceled':\n    default:\n      return <StatusWarning />;\n  }\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    '& > *': {\n      margin: theme.spacing(1),\n      verticalAlign: 'center',\n    },\n  },\n  small: {\n    width: theme.spacing(3),\n    height: theme.spacing(3),\n  },\n}));\n\nconst SourceInfo = ({ build }: { build: CITableBuildInfo }) => {\n  const classes = useStyles();\n  const { user, source } = build;\n\n  return (\n    <Box display=\"flex\" alignItems=\"center\" className={classes.root}>\n      <Avatar alt={user.name} src={user.avatarUrl} className={classes.small} />\n      <Box>\n        <Typography variant=\"button\">{source?.branchName}</Typography>\n        <Typography variant=\"body1\">\n          {source?.commit?.url !== undefined ? (\n            <Link to={source?.commit?.url}>{source?.commit.shortHash}</Link>\n          ) : (\n            source?.commit.shortHash\n          )}\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nconst generatedColumns: TableColumn[] = [\n  {\n    title: 'ID',\n    field: 'id',\n    type: 'numeric',\n    width: '80px',\n  },\n  {\n    title: 'Build',\n    field: 'buildName',\n    highlight: true,\n    width: '20%',\n    render: (row: Partial<CITableBuildInfo>) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(circleCIBuildRouteRef);\n\n        return (\n          <Link\n            component={RouterLink}\n            to={`${routeLink({\n              buildId: row.id!,\n            })}`}\n          >\n            {row.buildName ? row.buildName : row?.workflow?.name}\n          </Link>\n        );\n      };\n\n      return <LinkWrapper />;\n    },\n  },\n  {\n    title: 'Job',\n    field: 'buildName',\n    highlight: true,\n    render: (row: Partial<CITableBuildInfo>) => (\n      <Link to={row?.buildUrl ?? ''}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <LaunchIcon fontSize=\"small\" color=\"disabled\" />\n          <Box mr={1} />\n          {row?.workflow?.jobName}\n        </Box>\n      </Link>\n    ),\n  },\n  {\n    title: 'Source',\n    field: 'source.commit.hash',\n    highlight: true,\n    render: (row: Partial<CITableBuildInfo>) => (\n      <SourceInfo build={row as any} />\n    ),\n  },\n  {\n    title: 'Status',\n    field: 'status',\n    render: (row: Partial<CITableBuildInfo>) => (\n      <Box display=\"flex\" alignItems=\"center\">\n        {getStatusComponent(row.status)}\n        <Box mr={1} />\n        <Typography variant=\"button\">{row.status}</Typography>\n      </Box>\n    ),\n  },\n  {\n    title: 'Time',\n    field: 'startTime',\n    render: (row: Partial<CITableBuildInfo>) => (\n      <>\n        <Typography variant=\"body2\">\n          run {relativeTimeTo(row?.startTime)}\n        </Typography>\n        <Typography variant=\"body2\">\n          took {durationHumanized(row?.startTime, row?.stopTime)}\n        </Typography>\n      </>\n    ),\n  },\n  {\n    title: 'Workflow',\n    field: 'workflow.name',\n  },\n  {\n    title: 'Actions',\n    width: '10%',\n    render: (row: Partial<CITableBuildInfo>) => (\n      <IconButton onClick={row.onRestartClick}>\n        <RetryIcon />\n      </IconButton>\n    ),\n  },\n];\n\ntype Props = {\n  loading: boolean;\n  retry: () => void;\n  builds: CITableBuildInfo[];\n  projectName: string;\n  page: number;\n  onChangePage: (page: number) => void;\n  total: number;\n  pageSize: number;\n  onChangePageSize: (pageSize: number) => void;\n};\n\nexport const CITable = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  builds,\n  onChangePage,\n  onChangePageSize,\n  total,\n}: Props) => {\n  return (\n    <Table\n      isLoading={loading}\n      options={{\n        paging: true,\n        pageSize,\n        padding: 'dense',\n        pageSizeOptions: [10, 20, 50],\n      }}\n      totalCount={total}\n      page={page}\n      actions={[\n        {\n          icon: () => <RetryIcon />,\n          tooltip: 'Refresh Data',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ]}\n      data={builds}\n      onPageChange={onChangePage}\n      onRowsPerPageChange={onChangePageSize}\n      title={\n        <Box display=\"flex\" alignItems=\"center\">\n          <GitHubIcon />\n          <Box mr={1} />\n          <Typography variant=\"h6\">{projectName}</Typography>\n        </Box>\n      }\n      columns={generatedColumns}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { CITable } from '../CITable';\nimport { useBuilds } from '../../../../state';\n\nexport const Builds = () => {\n  const [\n    { total, loading, value, projectName, page, pageSize },\n    { setPage, retry, setPageSize },\n  ] = useBuilds();\n  return (\n    <CITable\n      total={total}\n      loading={loading}\n      retry={retry}\n      builds={value ?? []}\n      projectName={projectName}\n      page={page}\n      onChangePage={setPage}\n      pageSize={pageSize}\n      onChangePageSize={setPageSize}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Builds } from './lib/Builds';\nimport { Grid } from '@material-ui/core';\n\nexport const BuildsPage = () => (\n  <Grid container spacing={3} direction=\"column\">\n    <Grid item>\n      <Builds />\n    </Grid>\n  </Grid>\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Routes, Route } from 'react-router';\nimport { circleCIBuildRouteRef } from '../route-refs';\nimport { BuildWithStepsPage } from './BuildWithStepsPage/';\nimport { BuildsPage } from './BuildsPage';\nimport { CIRCLECI_ANNOTATION } from '../constants';\nimport { Entity } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isCircleCIAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[CIRCLECI_ANNOTATION]);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (!isCircleCIAvailable(entity)) {\n    return <MissingAnnotationEmptyState annotation={CIRCLECI_ANNOTATION} />;\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<BuildsPage />} />\n      <Route\n        path={`${circleCIBuildRouteRef.path}`}\n        element={<BuildWithStepsPage />}\n      />\n    </Routes>\n  );\n};\n"],"names":["useStyles","makeStyles","RouterLink"],"mappings":"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"}