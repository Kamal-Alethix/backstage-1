{"version":3,"file":"index.esm.js","sources":["../src/api/KafkaBackendClient.ts","../src/api/types.ts","../src/plugin.ts","../src/constants.ts","../src/components/ConsumerGroupOffsets/useConsumerGroupsForEntity.ts","../src/components/ConsumerGroupOffsets/useConsumerGroupsOffsetsForEntity.ts","../src/components/ConsumerGroupOffsets/ConsumerGroupOffsets.tsx","../src/Router.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { KafkaApi, ConsumerGroupOffsetsResponse } from './types';\nimport { DiscoveryApi, IdentityApi } from '@backstage/core-plugin-api';\n\nexport class KafkaBackendClient implements KafkaApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly identityApi: IdentityApi;\n\n  constructor(options: {\n    discoveryApi: DiscoveryApi;\n    identityApi: IdentityApi;\n  }) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  private async internalGet(path: string): Promise<any> {\n    const url = `${await this.discoveryApi.getBaseUrl('kafka')}${path}`;\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    if (!response.ok) {\n      const payload = await response.text();\n      const message = `Request failed with ${response.status} ${response.statusText}, ${payload}`;\n      throw new Error(message);\n    }\n\n    return await response.json();\n  }\n\n  async getConsumerGroupOffsets(\n    clusterId: string,\n    consumerGroup: string,\n  ): Promise<ConsumerGroupOffsetsResponse> {\n    return await this.internalGet(\n      `/consumers/${clusterId}/${consumerGroup}/offsets`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const kafkaApiRef = createApiRef<KafkaApi>({\n  id: 'plugin.kafka.service',\n});\n\nexport type ConsumerGroupOffsetsResponse = {\n  consumerId: string;\n  offsets: {\n    topic: string;\n    partitionId: number;\n    topicOffset: string;\n    groupOffset: string;\n  }[];\n};\n\nexport interface KafkaApi {\n  getConsumerGroupOffsets(\n    clusterId: string,\n    consumerGroup: string,\n  ): Promise<ConsumerGroupOffsetsResponse>;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { KafkaBackendClient } from './api/KafkaBackendClient';\nimport { kafkaApiRef } from './api/types';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootCatalogKafkaRouteRef = createRouteRef({\n  id: 'kafka',\n});\n\nexport const kafkaPlugin = createPlugin({\n  id: 'kafka',\n  apis: [\n    createApiFactory({\n      api: kafkaApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new KafkaBackendClient({ discoveryApi, identityApi }),\n    }),\n  ],\n  routes: {\n    entityContent: rootCatalogKafkaRouteRef,\n  },\n});\n\nexport const EntityKafkaContent = kafkaPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityKafkaContent',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: rootCatalogKafkaRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const KAFKA_CONSUMER_GROUP_ANNOTATION =\n  'kafka.apache.org/consumer-groups';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { useMemo } from 'react';\nimport { KAFKA_CONSUMER_GROUP_ANNOTATION } from '../../constants';\n\nexport const useConsumerGroupsForEntity = () => {\n  const { entity } = useEntity();\n  const annotation =\n    entity.metadata.annotations?.[KAFKA_CONSUMER_GROUP_ANNOTATION] ?? '';\n\n  const consumerList = useMemo(() => {\n    return annotation.split(',').map(consumer => {\n      const [clusterId, consumerGroup] = consumer.split('/');\n\n      if (!clusterId || !consumerGroup) {\n        throw new Error(\n          `Failed to parse kafka consumer group annotation: got \"${annotation}\"`,\n        );\n      }\n      return {\n        clusterId: clusterId.trim(),\n        consumerGroup: consumerGroup.trim(),\n      };\n    });\n  }, [annotation]);\n\n  return consumerList;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { kafkaApiRef } from '../../api/types';\nimport { useConsumerGroupsForEntity } from './useConsumerGroupsForEntity';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nexport const useConsumerGroupsOffsetsForEntity = () => {\n  const consumers = useConsumerGroupsForEntity();\n  const api = useApi(kafkaApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const {\n    loading,\n    value: consumerGroupsTopics,\n    retry,\n  } = useAsyncRetry(async () => {\n    try {\n      return await Promise.all(\n        consumers.map(async ({ clusterId, consumerGroup }) => {\n          const response = await api.getConsumerGroupOffsets(\n            clusterId,\n            consumerGroup,\n          );\n          return { clusterId, consumerGroup, topics: response.offsets };\n        }),\n      );\n    } catch (e) {\n      errorApi.post(e);\n      throw e;\n    }\n  }, [consumers, api, errorApi]);\n\n  return [\n    {\n      loading,\n      consumerGroupsTopics,\n    },\n    {\n      retry,\n    },\n  ] as const;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Box, Grid, Typography } from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport React from 'react';\nimport { useConsumerGroupsOffsetsForEntity } from './useConsumerGroupsOffsetsForEntity';\nimport { Table, TableColumn } from '@backstage/core-components';\n\nexport type TopicPartitionInfo = {\n  topic: string;\n  partitionId: number;\n  topicOffset: string;\n  groupOffset: string;\n};\n\nconst generatedColumns: TableColumn[] = [\n  {\n    title: 'Topic',\n    field: 'topic',\n    highlight: true,\n    render: (row: Partial<TopicPartitionInfo>) => {\n      return <>{row.topic ?? ''}</>;\n    },\n  },\n  {\n    title: 'Partition',\n    field: 'partitionId',\n    render: (row: Partial<TopicPartitionInfo>) => {\n      return <>{row.partitionId ?? ''}</>;\n    },\n  },\n  {\n    title: 'Topic Offset',\n    field: 'topicOffset',\n    render: (row: Partial<TopicPartitionInfo>) => {\n      return <>{row.topicOffset ?? ''}</>;\n    },\n  },\n  {\n    title: 'Group Offset',\n    field: 'groupOffset',\n    render: (row: Partial<TopicPartitionInfo>) => {\n      return <>{row.groupOffset ?? ''}</>;\n    },\n  },\n  {\n    title: 'Lag',\n    field: 'lag',\n    render: (row: Partial<TopicPartitionInfo>) => {\n      let lag = undefined;\n      if (row.topicOffset && row.groupOffset) {\n        lag = +row.topicOffset - +row.groupOffset;\n      }\n      return <>{lag ?? ''}</>;\n    },\n  },\n];\n\ntype Props = {\n  loading: boolean;\n  retry: () => void;\n  clusterId: string;\n  consumerGroup: string;\n  topics?: TopicPartitionInfo[];\n};\n\nexport const ConsumerGroupOffsets = ({\n  loading,\n  topics,\n  clusterId,\n  consumerGroup,\n  retry,\n}: Props) => {\n  return (\n    <Table\n      isLoading={loading}\n      actions={[\n        {\n          icon: () => <RetryIcon />,\n          tooltip: 'Refresh Data',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ]}\n      data={topics ?? []}\n      title={\n        <Box display=\"flex\" alignItems=\"center\">\n          <Typography variant=\"h6\">\n            Consumed Topics for {consumerGroup} ({clusterId})\n          </Typography>\n        </Box>\n      }\n      columns={generatedColumns}\n    />\n  );\n};\n\nexport const KafkaTopicsForConsumer = () => {\n  const [tableProps, { retry }] = useConsumerGroupsOffsetsForEntity();\n  return (\n    <Grid>\n      {tableProps.consumerGroupsTopics?.map(consumerGroup => (\n        <ConsumerGroupOffsets\n          {...consumerGroup}\n          loading={tableProps.loading}\n          retry={retry}\n        />\n      ))}\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport React from 'react';\nimport { Route, Routes } from 'react-router';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { KAFKA_CONSUMER_GROUP_ANNOTATION } from './constants';\nimport { KafkaTopicsForConsumer } from './components/ConsumerGroupOffsets/ConsumerGroupOffsets';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isPluginApplicableToEntity = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[KAFKA_CONSUMER_GROUP_ANNOTATION]);\n\ntype Props = {};\n\nexport const Router = (_props: Props) => {\n  const { entity } = useEntity();\n\n  if (!isPluginApplicableToEntity(entity)) {\n    return (\n      <MissingAnnotationEmptyState\n        annotation={KAFKA_CONSUMER_GROUP_ANNOTATION}\n      />\n    );\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<KafkaTopicsForConsumer />} />\n    </Routes>\n  );\n};\n"],"names":[],"mappings":"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"}