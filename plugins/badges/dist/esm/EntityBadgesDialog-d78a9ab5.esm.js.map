{"version":3,"file":"EntityBadgesDialog-d78a9ab5.esm.js","sources":["../../src/components/EntityBadgesDialog.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useAsyncEntity } from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { badgesApiRef } from '../api';\n\nimport {\n  CodeSnippet,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\ntype Props = {\n  open: boolean;\n  onClose?: () => any;\n};\n\nexport const EntityBadgesDialog = ({ open, onClose }: Props) => {\n  const theme = useTheme();\n  const { entity } = useAsyncEntity();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n  const badgesApi = useApi(badgesApiRef);\n\n  const {\n    value: badges,\n    loading,\n    error,\n  } = useAsync(async () => {\n    if (open && entity) {\n      return await badgesApi.getEntityBadgeSpecs(entity);\n    }\n    return [];\n  }, [badgesApi, entity, open]);\n\n  const content = (badges || []).map(\n    ({ badge: { description }, id, url, markdown }) => (\n      <Box marginTop={4} key={id}>\n        <DialogContentText component=\"div\">\n          <img alt={description || id} src={url} />\n          <CodeSnippet language=\"markdown\" text={markdown} showCopyCodeButton />\n        </DialogContentText>\n      </Box>\n    ),\n  );\n\n  return (\n    <Dialog fullScreen={fullScreen} open={open} onClose={onClose}>\n      <DialogTitle>Entity Badges</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Embed badges in other web sites that link back to this entity. Copy\n          the relevant snippet of Markdown code to use the badge.\n        </DialogContentText>\n\n        {loading && <Progress />}\n        {error && <ResponseErrorPanel error={error} />}\n\n        {content}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;AAqBY,MAAC,kBAAkB,GAAG,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK;AACzD,EAAE,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;AAC3B,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,cAAc,EAAE,CAAC;AACtC,EAAE,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACjE,EAAE,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AACzC,EAAE,MAAM;AACR,IAAI,KAAK,EAAE,MAAM;AACjB,IAAI,OAAO;AACX,IAAI,KAAK;AACT,GAAG,GAAG,QAAQ,CAAC,YAAY;AAC3B,IAAI,IAAI,IAAI,IAAI,MAAM,EAAE;AACxB,MAAM,OAAO,MAAM,SAAS,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;AACzD,KAAK;AACL,IAAI,OAAO,EAAE,CAAC;AACd,GAAG,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;AAChC,EAAE,MAAM,OAAO,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,qBAAqB,KAAK,CAAC,aAAa,CAAC,GAAG,EAAE;AACjI,IAAI,SAAS,EAAE,CAAC;AAChB,IAAI,GAAG,EAAE,EAAE;AACX,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,iBAAiB,EAAE;AAC5D,IAAI,SAAS,EAAE,KAAK;AACpB,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE;AAChD,IAAI,GAAG,EAAE,WAAW,IAAI,EAAE;AAC1B,IAAI,GAAG,EAAE,GAAG;AACZ,GAAG,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE;AACvD,IAAI,QAAQ,EAAE,UAAU;AACxB,IAAI,IAAI,EAAE,QAAQ;AAClB,IAAI,kBAAkB,EAAE,IAAI;AAC5B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACR,EAAE,uBAAuB,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE;AACrD,IAAI,UAAU;AACd,IAAI,IAAI;AACR,IAAI,OAAO;AACX,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,IAAI,EAAE,eAAe,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,kBAAkB,KAAK,CAAC,aAAa,CAAC,iBAAiB,EAAE,IAAI,EAAE,6HAA6H,CAAC,EAAE,OAAO,oBAAoB,KAAK,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,KAAK,oBAAoB,KAAK,CAAC,aAAa,CAAC,kBAAkB,EAAE;AACrc,IAAI,KAAK;AACT,GAAG,CAAC,EAAE,OAAO,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,kBAAkB,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE;AACrH,IAAI,OAAO,EAAE,OAAO;AACpB,IAAI,KAAK,EAAE,SAAS;AACpB,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;AAChB;;;;"}