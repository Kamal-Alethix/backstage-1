{"version":3,"file":"index-bdc8477a.esm.js","sources":["../../src/api/api.ts","../../src/routes.ts","../../src/plugin.ts","../../src/assets/codescene.icon.svg","../../src/index.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createApiRef, DiscoveryApi } from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport {\n  FetchProjectsResponse,\n  Project,\n  FetchAnalysesResponse,\n  Analysis,\n} from './types';\n\nexport const codesceneApiRef = createApiRef<CodeSceneApi>({\n  id: 'plugin.codescene.service',\n});\n\nexport interface CodeSceneApi {\n  fetchProjects(): Promise<FetchProjectsResponse>;\n  fetchProject(projectId: number): Promise<Project>;\n  fetchAnalyses(projectId: number): Promise<FetchAnalysesResponse>;\n  fetchLatestAnalysis(projectId: number): Promise<Analysis>;\n}\n\ntype Options = {\n  discoveryApi: DiscoveryApi;\n};\n\nexport class CodeSceneClient implements CodeSceneApi {\n  private readonly discoveryApi: DiscoveryApi;\n\n  constructor(options: Options) {\n    this.discoveryApi = options.discoveryApi;\n  }\n\n  async fetchProjects(): Promise<FetchProjectsResponse> {\n    return this.fetchFromApi('projects');\n  }\n\n  async fetchProject(projectId: number): Promise<Project> {\n    return this.fetchFromApi(`projects/${projectId}`);\n  }\n\n  async fetchAnalyses(projectId: number): Promise<FetchAnalysesResponse> {\n    return this.fetchFromApi(`projects/${projectId}/analyses`);\n  }\n\n  async fetchLatestAnalysis(projectId: number): Promise<Analysis> {\n    return this.fetchFromApi(`projects/${projectId}/analyses/latest`);\n  }\n\n  private async fetchFromApi(path: string): Promise<any> {\n    const apiUrl = await this.getApiUrl();\n    const res = await fetch(`${apiUrl}/${path}`);\n    if (!res.ok) {\n      throw await ResponseError.fromResponse(res);\n    }\n\n    return await res.json();\n  }\n\n  private async getApiUrl() {\n    const proxyUrl = await this.discoveryApi.getBaseUrl('proxy');\n    return `${proxyUrl}/codescene-api`;\n  }\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'codescene',\n});\n\nexport const projectDetailsRouteRef = createRouteRef({\n  id: 'codescene-project-page',\n  params: ['projectId'],\n});\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createPlugin,\n  createRoutableExtension,\n  createApiFactory,\n  discoveryApiRef,\n} from '@backstage/core-plugin-api';\nimport { codesceneApiRef, CodeSceneClient } from './api/api';\nimport { rootRouteRef, projectDetailsRouteRef } from './routes';\n\n/**\n * @public\n */\nexport const codescenePlugin = createPlugin({\n  id: 'codescene',\n  apis: [\n    createApiFactory({\n      api: codesceneApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new CodeSceneClient({ discoveryApi }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n    projectPage: projectDetailsRouteRef,\n  },\n});\n\n/**\n * @public\n */\nexport const CodeScenePage = codescenePlugin.provide(\n  createRoutableExtension({\n    name: 'CodeScenePage',\n    component: () =>\n      import('./components/CodeScenePageComponent').then(\n        m => m.CodeScenePageComponent,\n      ),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * @public\n */\nexport const CodeSceneProjectDetailsPage = codescenePlugin.provide(\n  createRoutableExtension({\n    name: 'CodeSceneProjectDetailsPage',\n    component: () =>\n      import('./components/CodeSceneProjectDetailsPage').then(\n        m => m.CodeSceneProjectDetailsPage,\n      ),\n    mountPoint: projectDetailsRouteRef,\n  }),\n);\n","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 24 21\" version=\"1.1\">\n<g id=\"surface1\">\n<path d=\"M 21.898438 6.167969 C 20.5 2.242188 17.015625 0.00390625 12.003906 0.00390625 C 6.988281 0.00390625 3.5 2.242188 2.101562 6.167969 C 0.894531 6.589844 0 8.871094 0 11.707031 C 0 14.855469 1.101562 17.320312 2.511719 17.320312 C 2.542969 17.320312 2.574219 17.320312 2.605469 17.316406 C 3.089844 18.292969 3.722656 19.042969 4.511719 19.585938 C 6.425781 20.90625 9.085938 20.996094 11.886719 20.996094 L 12.113281 20.996094 C 12.148438 20.996094 12.183594 20.996094 12.21875 20.996094 C 14.988281 20.996094 17.601562 20.886719 19.488281 19.585938 C 20.277344 19.042969 20.914062 18.292969 21.394531 17.316406 C 21.425781 17.320312 21.457031 17.320312 21.488281 17.320312 C 22.898438 17.320312 24 14.855469 24 11.707031 C 24 8.871094 23.105469 6.589844 21.898438 6.167969 Z M 0.46875 11.707031 C 0.46875 9.285156 1.125 7.496094 1.886719 6.847656 C 1.578125 7.9375 1.417969 9.140625 1.417969 10.453125 C 1.417969 13.144531 1.730469 15.242188 2.382812 16.824219 C 1.4375 16.660156 0.46875 14.648438 0.46875 11.707031 Z M 21.132812 16.75 C 21.066406 16.902344 21 17.046875 20.929688 17.183594 C 20.488281 18.039062 19.921875 18.703125 19.222656 19.1875 C 17.453125 20.40625 15.03125 20.535156 12.226562 20.535156 C 12.1875 20.535156 12.148438 20.535156 12.113281 20.535156 L 11.886719 20.535156 C 9.03125 20.535156 6.566406 20.425781 4.777344 19.1875 C 4.078125 18.703125 3.515625 18.039062 3.070312 17.183594 C 3 17.046875 2.933594 16.902344 2.867188 16.75 C 2.207031 15.226562 1.886719 13.15625 1.886719 10.453125 C 1.886719 9.023438 2.085938 7.730469 2.46875 6.582031 C 2.519531 6.417969 2.582031 6.257812 2.640625 6.101562 C 4.035156 2.523438 7.320312 0.484375 12 0.484375 C 16.679688 0.484375 19.964844 2.523438 21.359375 6.101562 C 21.421875 6.257812 21.480469 6.417969 21.53125 6.582031 C 21.914062 7.730469 22.113281 9.023438 22.113281 10.453125 C 22.113281 13.15625 21.792969 15.222656 21.132812 16.75 Z M 21.617188 16.824219 C 22.269531 15.246094 22.582031 13.148438 22.582031 10.453125 C 22.582031 9.140625 22.421875 7.9375 22.113281 6.847656 C 22.875 7.5 23.53125 9.289062 23.53125 11.710938 C 23.53125 14.648438 22.5625 16.660156 21.617188 16.824219 Z M 21.617188 16.824219 \"/>\n<path d=\"M 12 3.476562 C 5.652344 3.476562 2.824219 6.046875 2.824219 11.816406 C 2.824219 17.425781 5.824219 20.152344 12 20.152344 C 18.175781 20.152344 21.175781 17.425781 21.175781 11.816406 C 21.175781 6.046875 18.347656 3.476562 12 3.476562 Z M 12 19.671875 C 6.058594 19.671875 3.292969 17.175781 3.292969 11.8125 C 3.292969 8.152344 4.28125 3.953125 12 3.953125 C 19.71875 3.953125 20.707031 8.152344 20.707031 11.8125 C 20.707031 17.175781 17.941406 19.671875 12 19.671875 Z M 12 19.671875 \"/>\n</g>\n</svg>\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport {\n  codescenePlugin,\n  CodeScenePage,\n  CodeSceneProjectDetailsPage,\n} from './plugin';\nimport CodeSceneIconComponent from './assets/codescene.icon.svg';\nimport { IconComponent } from '@backstage/core-plugin-api';\n\n/**\n * @public\n */\nexport const CodeSceneIcon: IconComponent =\n  CodeSceneIconComponent as IconComponent;\n"],"names":["CodeSceneIconComponent"],"mappings":"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"}