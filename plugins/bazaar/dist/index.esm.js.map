{"version":3,"file":"index.esm.js","sources":["../src/routes.ts","../src/api.ts","../src/plugin.ts","../src/components/InputField/InputField.tsx","../src/components/InputSelector/InputSelector.tsx","../src/components/DateSelector/DateSelector.tsx","../src/components/DoubleDateSelector/DoubleDateSelector.tsx","../src/components/CustomDialogTitle/CustomDialogTitle.tsx","../src/components/ProjectDialog/ProjectDialog.tsx","../src/components/ConfirmationDialog/ConfirmationDialog.tsx","../src/components/EditProjectDialog/EditProjectDialog.tsx","../src/components/StatusTag/StatusTag.tsx","../src/components/CardContentFields/CardContentFields.tsx","../src/util/sortMethods.ts","../src/util/parseMethods.ts","../src/util/fetchMethods.ts","../src/components/EntityBazaarInfoContent/EntityBazaarInfoContent.tsx","../src/components/EntityBazaarInfoCard/EntityBazaarInfoCard.tsx","../src/components/ProjectSelector/ProjectSelector.tsx","../src/components/AddProjectDialog/AddProjectDialog.tsx","../src/components/LinkProjectDialog/LinkProjectDialog.tsx","../src/components/HomePageBazaarInfoCard/HomePageBazaarInfoCard.tsx","../src/components/ProjectCard/ProjectCard.tsx","../src/components/ProjectPreview/ProjectPreview.tsx","../src/components/SortMethodSelector/SortMethodSelector.tsx","../src/components/SortView/SortView.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'bazaar',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiRef,\n  DiscoveryApi,\n  FetchApi,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\n\nexport const bazaarApiRef = createApiRef<BazaarApi>({\n  id: 'bazaar',\n});\n\nexport interface BazaarApi {\n  updateProject(bazaarProject: any): Promise<any>;\n\n  addProject(bazaarProject: any): Promise<any>;\n\n  getProjectById(id: number): Promise<any>;\n\n  getProjectByRef(entityRef: string): Promise<any>;\n\n  getMembers(id: number): Promise<any>;\n\n  deleteMember(id: number, userId: string): Promise<void>;\n\n  addMember(id: number, userId: string): Promise<void>;\n\n  getProjects(): Promise<any>;\n\n  deleteProject(id: number): Promise<void>;\n}\n\nexport class BazaarClient implements BazaarApi {\n  private readonly identityApi: IdentityApi;\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly fetchApi: FetchApi;\n\n  constructor(options: {\n    identityApi: IdentityApi;\n    discoveryApi: DiscoveryApi;\n    fetchApi: FetchApi;\n  }) {\n    this.identityApi = options.identityApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n\n  async updateProject(bazaarProject: any): Promise<any> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    return await this.fetchApi\n      .fetch(`${baseUrl}/projects`, {\n        method: 'PUT',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(bazaarProject),\n      })\n      .then(resp => resp.json());\n  }\n\n  async addProject(bazaarProject: any): Promise<any> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    return await this.fetchApi\n      .fetch(`${baseUrl}/projects`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(bazaarProject),\n      })\n      .then(resp => resp.json());\n  }\n\n  async getProjectById(id: number): Promise<any> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    const response = await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(id)}`,\n    );\n\n    return response.ok ? response : null;\n  }\n\n  async getProjectByRef(entityRef: string): Promise<any> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    const response = await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(entityRef)}`,\n    );\n\n    return response.ok ? response : null;\n  }\n\n  async getMembers(id: number): Promise<any> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    return await this.fetchApi\n      .fetch(`${baseUrl}/projects/${encodeURIComponent(id)}/members`)\n      .then(resp => resp.json());\n  }\n\n  async addMember(id: number, userId: string): Promise<void> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n    const { picture } = await this.identityApi.getProfileInfo();\n\n    await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(\n        id,\n      )}/member/${encodeURIComponent(userId)}`,\n      {\n        method: 'PUT',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ picture }),\n      },\n    );\n  }\n\n  async deleteMember(id: number, userId: string): Promise<void> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(\n        id,\n      )}/member/${encodeURIComponent(userId)}`,\n      { method: 'DELETE' },\n    );\n  }\n\n  async getProjects(): Promise<any> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    return await this.fetchApi\n      .fetch(`${baseUrl}/projects`)\n      .then(resp => resp.json());\n  }\n\n  async deleteProject(id: number): Promise<void> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('bazaar');\n\n    await this.fetchApi.fetch(`${baseUrl}/projects/${encodeURIComponent(id)}`, {\n      method: 'DELETE',\n    });\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { rootRouteRef } from './routes';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  identityApiRef,\n  discoveryApiRef,\n  fetchApiRef,\n} from '@backstage/core-plugin-api';\nimport { bazaarApiRef, BazaarClient } from './api';\n\nexport const bazaarPlugin = createPlugin({\n  id: 'bazaar',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: bazaarApiRef,\n      deps: {\n        identityApi: identityApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ identityApi, discoveryApi, fetchApi }) =>\n        new BazaarClient({ identityApi, discoveryApi, fetchApi }),\n    }),\n  ],\n});\n\nexport const BazaarPage = bazaarPlugin.provide(\n  createRoutableExtension({\n    name: 'BazaarPage',\n    component: () => import('./components/HomePage').then(m => m.HomePage),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Controller,\n  Control,\n  FieldError,\n  ValidationRule,\n} from 'react-hook-form';\nimport { TextField } from '@material-ui/core';\nimport { FormValues } from '../../types';\n\ntype Rules = {\n  required: boolean;\n  pattern?: ValidationRule<RegExp> | undefined;\n};\n\ntype Props = {\n  inputType: 'description' | 'community' | 'responsible' | 'name';\n  error?: FieldError | undefined;\n  control: Control<FormValues, object>;\n  helperText?: string;\n  placeholder?: string;\n  rules?: Rules | undefined;\n};\n\nexport const InputField = ({\n  inputType,\n  error,\n  control,\n  helperText,\n  placeholder,\n  rules,\n}: Props) => {\n  const label =\n    inputType.charAt(0).toLocaleUpperCase('en-US') + inputType.slice(1);\n\n  return (\n    <Controller\n      name={inputType}\n      control={control}\n      rules={rules}\n      render={({ field }) => (\n        <TextField\n          {...field}\n          required={rules?.required}\n          margin=\"dense\"\n          multiline\n          id=\"title\"\n          type=\"text\"\n          fullWidth\n          label={label}\n          placeholder={placeholder}\n          error={!!error}\n          helperText={error && helperText}\n        />\n      )}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { Controller, Control, FieldError } from 'react-hook-form';\nimport { FormValues } from '../../types';\n\ntype Props = {\n  options: string[];\n  control: Control<FormValues, object>;\n  name: 'status' | 'size';\n  error?: FieldError | undefined;\n};\n\nexport const InputSelector = ({ name, options, control, error }: Props) => {\n  const label = name.charAt(0).toLocaleUpperCase('en-US') + name.slice(1);\n\n  return (\n    <Controller\n      name={name}\n      control={control}\n      rules={{\n        required: true,\n      }}\n      render={({ field }) => (\n        <FormControl fullWidth>\n          <InputLabel\n            required\n            htmlFor=\"demo-simple-select-outlined\"\n            id=\"demo-simple-select-outlined-label\"\n            style={{\n              marginTop: '0.25rem',\n            }}\n          >\n            {label}\n          </InputLabel>\n          <Select\n            {...field}\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            label={label}\n            error={!!error}\n          >\n            {options.map(option => {\n              return (\n                <MenuItem button key={option} value={option}>\n                  {option}\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      )}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport { Controller, Control, UseFormSetValue } from 'react-hook-form';\nimport { FormValues } from '../../types';\nimport {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers';\nimport LuxonUtils from '@date-io/luxon';\nimport { IconButton } from '@material-ui/core';\nimport ClearIcon from '@material-ui/icons/Clear';\n\ntype Props = {\n  name: 'startDate' | 'endDate';\n  control: Control<FormValues, object>;\n  setValue: UseFormSetValue<FormValues>;\n};\n\nexport const DateSelector = ({ name, control, setValue }: Props) => {\n  const label = `${\n    name.charAt(0).toLocaleUpperCase('en-US') + name.slice(1, name.indexOf('D'))\n  } date`;\n\n  return (\n    <Controller\n      name={name}\n      control={control}\n      render={({ field }) => (\n        <FormControl>\n          <MuiPickersUtilsProvider utils={LuxonUtils}>\n            <KeyboardDatePicker\n              disableToolbar\n              format=\"dd-MM-yyyy\"\n              label={label}\n              value={field.value}\n              onChange={date => {\n                setValue(name, date?.toISO());\n              }}\n              InputProps={{\n                endAdornment: (\n                  <IconButton onClick={() => setValue(name, null)}>\n                    <ClearIcon />\n                  </IconButton>\n                ),\n              }}\n              InputAdornmentProps={{\n                position: 'start',\n              }}\n            />\n          </MuiPickersUtilsProvider>\n        </FormControl>\n      )}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Control, UseFormSetValue } from 'react-hook-form';\nimport { FormValues } from '../../types';\nimport { DateSelector } from '../DateSelector/DateSelector';\nimport { Typography, makeStyles } from '@material-ui/core';\n\ntype Props = {\n  control: Control<FormValues, object>;\n  setValue: UseFormSetValue<FormValues>;\n};\n\nconst useStyles = makeStyles({\n  container: {\n    marginTop: '0.25rem',\n    textAlign: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  startDate: {\n    float: 'left',\n  },\n  endDate: {\n    float: 'right',\n  },\n  dash: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '1.5rem',\n    margin: '0 1rem',\n  },\n});\n\nexport const DoubleDateSelector = ({ control, setValue }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.startDate}>\n        <DateSelector name=\"startDate\" control={control} setValue={setValue} />\n      </div>\n\n      <Typography className={classes.dash}>-</Typography>\n      <div className={classes.endDate}>\n        <DateSelector name=\"endDate\" control={control} setValue={setValue} />\n      </div>\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport {\n  Theme,\n  WithStyles,\n  withStyles,\n  createStyles,\n} from '@material-ui/core/styles';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\n\n/*\n  DialogTitleProps, DialogTitle, DialogContent and DialogActions \n  are copied from the git-release plugin\n*/\n\nexport interface DialogTitleProps extends WithStyles<typeof styles> {\n  id: string;\n  children: React.ReactNode;\n  onClose: () => void;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      margin: 0,\n      padding: theme.spacing(2),\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n    },\n  });\n\nexport const DialogContent = withStyles((theme: Theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent);\n\nexport const DialogActions = withStyles((theme: Theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nexport const CustomDialogTitle = withStyles(styles)(\n  (props: DialogTitleProps) => {\n    const { children, classes, onClose, ...other } = props;\n    return (\n      <MuiDialogTitle disableTypography className={classes.root} {...other}>\n        <Typography variant=\"h6\">{children}</Typography>\n        {onClose ? (\n          <IconButton\n            aria-label=\"close\"\n            className={classes.closeButton}\n            onClick={onClose}\n          >\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </MuiDialogTitle>\n    );\n  },\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Button, Dialog } from '@material-ui/core';\nimport { useForm, UseFormReset, UseFormGetValues } from 'react-hook-form';\nimport { InputField } from '../InputField/InputField';\nimport { InputSelector } from '../InputSelector/InputSelector';\nimport { FormValues } from '../../types';\nimport { DoubleDateSelector } from '../DoubleDateSelector/DoubleDateSelector';\nimport {\n  CustomDialogTitle,\n  DialogActions,\n  DialogContent,\n} from '../CustomDialogTitle';\n\ntype Props = {\n  handleSave: (\n    getValues: UseFormGetValues<FormValues>,\n    reset: UseFormReset<FormValues>,\n  ) => Promise<void>;\n  isAddForm: boolean;\n  title: string;\n  defaultValues: FormValues;\n  open: boolean;\n  projectSelector?: JSX.Element;\n  deleteButton?: JSX.Element;\n  handleClose: () => void;\n};\n\nexport const ProjectDialog = ({\n  handleSave,\n  isAddForm,\n  title,\n  defaultValues,\n  open,\n  projectSelector,\n  deleteButton,\n  handleClose,\n}: Props) => {\n  const {\n    handleSubmit,\n    reset,\n    control,\n    getValues,\n    formState: { errors },\n    setValue,\n  } = useForm<FormValues>({\n    mode: 'onChange',\n    defaultValues,\n  });\n\n  const handleSaveForm = () => {\n    handleSave(getValues, reset);\n  };\n\n  const handleCloseDialog = () => {\n    handleClose();\n    reset(defaultValues);\n  };\n\n  return (\n    <div>\n      <Dialog\n        fullWidth\n        maxWidth=\"xs\"\n        onClose={handleCloseDialog}\n        aria-labelledby=\"customized-dialog-title\"\n        open={open}\n      >\n        <CustomDialogTitle\n          id=\"customized-dialog-title\"\n          onClose={handleCloseDialog}\n        >\n          {title}\n        </CustomDialogTitle>\n        <DialogContent style={{ padding: '1rem', paddingTop: '0rem' }} dividers>\n          <InputField\n            error={errors.name}\n            control={control}\n            rules={{\n              required: true,\n              pattern: RegExp('^[a-zA-Z0-9_-]*$'),\n            }}\n            inputType=\"name\"\n            helperText=\"please enter a url safe project name\"\n          />\n\n          <InputField\n            error={errors.description}\n            control={control}\n            rules={{\n              required: true,\n            }}\n            inputType=\"description\"\n            helperText=\"please enter a description\"\n          />\n\n          <InputSelector\n            control={control}\n            name=\"status\"\n            options={['proposed', 'ongoing']}\n          />\n\n          <InputSelector\n            control={control}\n            name=\"size\"\n            options={['small', 'medium', 'large']}\n          />\n\n          <InputField\n            error={errors.responsible}\n            control={control}\n            rules={{\n              required: true,\n            }}\n            inputType=\"responsible\"\n            helperText=\"please enter a contact person\"\n            placeholder=\"Contact person of the project\"\n          />\n\n          {isAddForm && projectSelector}\n\n          <InputField\n            error={errors.community}\n            control={control}\n            rules={{\n              required: false,\n              pattern: RegExp('^(https?)://'),\n            }}\n            inputType=\"community\"\n            helperText=\"please enter a link starting with http/https\"\n            placeholder=\"Community link to e.g. Teams or Discord\"\n          />\n\n          <DoubleDateSelector setValue={setValue} control={control} />\n        </DialogContent>\n\n        <DialogActions>\n          {!isAddForm && deleteButton}\n          <Button\n            onClick={handleSubmit(handleSaveForm)}\n            color=\"primary\"\n            type=\"submit\"\n          >\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport {\n  CustomDialogTitle,\n  DialogActions,\n  DialogContent,\n} from '../CustomDialogTitle';\n\ntype Props = {\n  open: boolean;\n  handleClose: () => void;\n  message: (string | JSX.Element)[];\n  type: 'delete' | 'unlink';\n  handleSubmit: () => void;\n};\n\nexport const ConfirmationDialog = ({\n  open,\n  handleClose,\n  message,\n  type,\n  handleSubmit,\n}: Props) => {\n  return (\n    <Dialog\n      fullWidth\n      maxWidth=\"xs\"\n      onClose={handleClose}\n      aria-labelledby=\"customized-dialog-title\"\n      open={open}\n    >\n      <CustomDialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n        {type.charAt(0).toLocaleUpperCase('en-US') + type.slice(1)} project\n      </CustomDialogTitle>\n\n      <DialogContent dividers>{message}</DialogContent>\n\n      <DialogActions>\n        <Button onClick={handleSubmit} color=\"primary\" type=\"submit\">\n          {type}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { ProjectDialog } from '../ProjectDialog';\nimport { BazaarProject, FormValues } from '../../types';\nimport { bazaarApiRef } from '../../api';\nimport { UseFormGetValues } from 'react-hook-form';\nimport { ConfirmationDialog } from '../ConfirmationDialog';\nimport { Button, makeStyles } from '@material-ui/core';\n\ntype Props = {\n  bazaarProject: BazaarProject;\n  openEdit: boolean;\n  handleEditClose: () => void;\n  handleCardClose?: () => void;\n  fetchBazaarProject: () => Promise<BazaarProject | null>;\n};\n\nconst useStyles = makeStyles({\n  button: {\n    marginLeft: '0',\n    marginRight: 'auto',\n  },\n  wordBreak: {\n    wordBreak: 'break-all',\n    whiteSpace: 'normal',\n    margin: '-0.25rem 0',\n  },\n});\n\nexport const EditProjectDialog = ({\n  bazaarProject,\n  openEdit,\n  handleEditClose,\n  handleCardClose,\n  fetchBazaarProject,\n}: Props) => {\n  const classes = useStyles();\n  const bazaarApi = useApi(bazaarApiRef);\n  const [openDelete, setOpenDelete] = useState(false);\n  const [defaultValues, setDefaultValues] = useState<FormValues>({\n    ...bazaarProject,\n    startDate: bazaarProject.startDate ?? null,\n    endDate: bazaarProject.endDate ?? null,\n  });\n\n  const handleDeleteClose = () => {\n    setOpenDelete(false);\n    handleEditClose();\n\n    if (handleCardClose) handleCardClose();\n  };\n\n  const handleDeleteSubmit = async () => {\n    await bazaarApi.deleteProject(bazaarProject.id);\n\n    handleDeleteClose();\n    fetchBazaarProject();\n  };\n\n  useEffect(() => {\n    setDefaultValues({\n      ...bazaarProject,\n      startDate: bazaarProject.startDate ?? null,\n      endDate: bazaarProject.endDate ?? null,\n    });\n  }, [bazaarProject]);\n\n  const handleEditSubmit: (\n    getValues: UseFormGetValues<FormValues>,\n  ) => Promise<void> = async (getValues: UseFormGetValues<FormValues>) => {\n    const formValues = getValues();\n\n    const updateResponse = await bazaarApi.updateProject({\n      ...formValues,\n      id: bazaarProject.id,\n      entityRef: bazaarProject.entityRef,\n      membersCount: bazaarProject.membersCount,\n      startDate: formValues?.startDate ?? null,\n      endDate: formValues?.endDate ?? null,\n    });\n\n    if (updateResponse.status === 'ok') fetchBazaarProject();\n    handleEditClose();\n  };\n\n  return (\n    <div>\n      <ConfirmationDialog\n        open={openDelete}\n        handleClose={handleDeleteClose}\n        message={[\n          'Are you sure you want to delete ',\n          <b key={bazaarProject.name} className={classes.wordBreak}>\n            {bazaarProject.name}\n          </b>,\n          ' from the Bazaar?',\n        ]}\n        type=\"delete\"\n        handleSubmit={handleDeleteSubmit}\n      />\n\n      <ProjectDialog\n        title=\"Edit project\"\n        handleSave={handleEditSubmit}\n        isAddForm={false}\n        defaultValues={defaultValues}\n        open={openEdit}\n        handleClose={handleEditClose}\n        deleteButton={\n          <Button\n            color=\"primary\"\n            type=\"submit\"\n            className={classes.button}\n            onClick={() => {\n              setOpenDelete(true);\n            }}\n          >\n            Delete project\n          </Button>\n        }\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { StatusOK, StatusWarning } from '@backstage/core-components';\nimport { Status } from '../../types';\n\ninterface StatusComponent {\n  [key: string]: JSX.Element | undefined;\n}\n\nconst statuses: StatusComponent = {\n  proposed: <StatusWarning>proposed</StatusWarning>,\n  ongoing: <StatusOK>ongoing</StatusOK>,\n};\n\ntype Props = {\n  status: Status;\n  styles?: string;\n};\n\nexport const StatusTag = ({ status, styles }: Props) => {\n  return <div className={styles}>{statuses[status]}</div>;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Grid,\n  makeStyles,\n  Card,\n  CardContent,\n  Typography,\n  GridSize,\n} from '@material-ui/core';\nimport { Avatar, Link } from '@backstage/core-components';\nimport { AboutField } from '@backstage/plugin-catalog';\nimport { StatusTag } from '../StatusTag';\nimport { Member, BazaarProject } from '../../types';\n\nconst useStyles = makeStyles({\n  break: {\n    wordBreak: 'break-word',\n    textAlign: 'justify',\n  },\n});\n\ntype Props = {\n  bazaarProject: BazaarProject;\n  members: Member[];\n  descriptionSize: GridSize;\n  membersSize: GridSize;\n};\n\nexport const CardContentFields = ({\n  bazaarProject,\n  members,\n  descriptionSize,\n  membersSize,\n}: Props) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <Card>\n        <CardContent>\n          <Grid container>\n            <Grid item xs={descriptionSize}>\n              <AboutField label=\"Description\">\n                {bazaarProject.description\n                  .split('\\n')\n                  .map((str: string, i: number) => (\n                    <Typography\n                      key={i}\n                      variant=\"body2\"\n                      paragraph\n                      className={classes.break}\n                    >\n                      {str}\n                    </Typography>\n                  ))}\n              </AboutField>\n            </Grid>\n\n            <Grid\n              style={{\n                display: 'flex',\n                justifyContent: 'flex-end',\n              }}\n              item\n              xs={membersSize}\n            >\n              <AboutField label=\"Latest members\">\n                {members.length ? (\n                  members.slice(0, 7).map((member: Member) => {\n                    return (\n                      <div\n                        style={{\n                          textAlign: 'left',\n                          backgroundColor: '',\n                          marginBottom: '0.3rem',\n                          marginTop: '0.3rem',\n                          display: 'block',\n                        }}\n                        key={member.userId}\n                      >\n                        <Avatar\n                          displayName={member.userId}\n                          customStyles={{\n                            width: '19px',\n                            height: '19px',\n                            fontSize: '8px',\n                            float: 'left',\n                            marginRight: '0.3rem',\n                            marginTop: '0rem',\n                            marginBottom: '0rem',\n                            alignItems: 'left',\n                            textAlign: 'left',\n                          }}\n                          picture={member.picture}\n                        />\n                        <Link\n                          className={classes.break}\n                          to={`http://github.com/${member.userId}`}\n                          target=\"_blank\"\n                        >\n                          {member?.userId}\n                        </Link>\n                      </div>\n                    );\n                  })\n                ) : (\n                  <div />\n                )}\n              </AboutField>\n            </Grid>\n\n            <Grid item xs={2}>\n              <AboutField label=\"Status\">\n                <StatusTag status={bazaarProject.status} />\n              </AboutField>\n            </Grid>\n\n            <Grid item xs={2}>\n              <AboutField label=\"size\">\n                <Typography variant=\"body2\">{bazaarProject.size}</Typography>\n              </AboutField>\n            </Grid>\n\n            <Grid item xs={2}>\n              <AboutField label=\"Start date\">\n                <Typography variant=\"body2\">\n                  {bazaarProject.startDate?.substring(0, 10) || ''}\n                </Typography>\n              </AboutField>\n            </Grid>\n\n            <Grid item xs={2}>\n              <AboutField label=\"End date\">\n                <Typography variant=\"body2\">\n                  {bazaarProject.endDate?.substring(0, 10) || ''}\n                </Typography>\n              </AboutField>\n            </Grid>\n\n            <Grid item xs={4}>\n              <AboutField label=\"Responsible\">\n                <Typography variant=\"body2\">\n                  {bazaarProject.responsible || ''}\n                </Typography>\n              </AboutField>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BazaarProject, Member } from '../types';\n\nexport const sortMembers = (m1: Member, m2: Member) => {\n  return new Date(m2.joinDate!).getTime() - new Date(m1.joinDate!).getTime();\n};\n\nexport const sortByDate = (a: BazaarProject, b: BazaarProject): number => {\n  const dateA = new Date(a.updatedAt!).getTime();\n  const dateB = new Date(b.updatedAt!).getTime();\n  return dateB - dateA;\n};\n\nexport const sortByName = (a: BazaarProject, b: BazaarProject) => {\n  if (a.name < b.name) {\n    return -1;\n  } else if (a.name > b.name) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const sortByMembers = (a: BazaarProject, b: BazaarProject) => {\n  return b.membersCount - a.membersCount;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BazaarProject, Member } from '../types';\n\nexport const parseBazaarProject = (metadata: any): BazaarProject => {\n  return {\n    id: metadata.id,\n    entityRef: metadata.entity_ref,\n    name: metadata.name,\n    community: metadata.community,\n    description: metadata.description,\n    status: metadata.status,\n    updatedAt: metadata.updated_at,\n    membersCount: metadata.members_count,\n    size: metadata.size,\n    startDate: metadata.start_date,\n    endDate: metadata.end_date,\n    responsible: metadata.responsible,\n  } as BazaarProject;\n};\n\nexport const parseMember = (member: any): Member => {\n  return {\n    itemId: member.item_id,\n    userId: member.user_id,\n    joinDate: member.join_date,\n    picture: member.picture,\n  } as Member;\n};\n\nexport const parseBazaarResponse = async (response: any) => {\n  if (response) {\n    const metadata = await response.json().then((resp: any) => resp.data[0]);\n\n    if (metadata) {\n      return parseBazaarProject(metadata);\n    }\n  }\n  return null;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { sortMembers } from './sortMethods';\nimport { parseMember } from './parseMethods';\nimport { BazaarProject, Member } from '../types';\nimport { BazaarApi } from '../api';\nimport { Entity } from '@backstage/catalog-model';\nimport { CatalogApi } from '@backstage/plugin-catalog-react';\n\nexport const fetchProjectMembers = async (\n  bazaarApi: BazaarApi,\n  project: BazaarProject,\n): Promise<Member[]> => {\n  const response = await bazaarApi.getMembers(project.id);\n\n  if (response.data.length > 0) {\n    const dbMembers = response.data.map((member: any) => {\n      return parseMember(member);\n    });\n\n    dbMembers.sort(sortMembers);\n    return dbMembers;\n  }\n  return [];\n};\n\nexport const fetchCatalogItems = async (\n  catalogApi: CatalogApi,\n): Promise<Entity[]> => {\n  const entities = await catalogApi.getEntities({\n    filter: {\n      kind: ['Component', 'Resource'],\n    },\n    fields: ['kind', 'metadata.name', 'metadata.namespace'],\n  });\n\n  return entities.items;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { CardHeader, Divider, IconButton, makeStyles } from '@material-ui/core';\nimport {\n  HeaderIconLinkRow,\n  IconLinkVerticalProps,\n} from '@backstage/core-components';\nimport EditIcon from '@material-ui/icons/Edit';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\nimport { EditProjectDialog } from '../EditProjectDialog';\nimport { useApi, identityApiRef } from '@backstage/core-plugin-api';\nimport { BazaarProject, Member } from '../../types';\nimport { bazaarApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { ConfirmationDialog } from '../ConfirmationDialog';\nimport { CardContentFields } from '../CardContentFields';\nimport { fetchProjectMembers } from '../../util/fetchMethods';\n\nconst useStyles = makeStyles({\n  wordBreak: {\n    wordBreak: 'break-all',\n    whiteSpace: 'normal',\n    margin: '-0.25rem 0',\n  },\n});\n\ntype Props = {\n  bazaarProject: BazaarProject | null | undefined;\n  fetchBazaarProject: () => Promise<BazaarProject | null>;\n};\n\nexport const EntityBazaarInfoContent = ({\n  bazaarProject,\n  fetchBazaarProject,\n}: Props) => {\n  const classes = useStyles();\n  const bazaarApi = useApi(bazaarApiRef);\n  const identity = useApi(identityApiRef);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [isMember, setIsMember] = useState(false);\n  const [openUnlink, setOpenUnlink] = useState(false);\n  const [members, fetchMembers] = useAsyncFn(async () => {\n    return bazaarProject\n      ? await fetchProjectMembers(bazaarApi, bazaarProject)\n      : [];\n  });\n\n  const [userId, fetchUserId] = useAsyncFn(async () => {\n    return await (\n      await identity.getProfileInfo()\n    ).displayName;\n  });\n\n  useEffect(() => {\n    fetchMembers();\n    fetchUserId();\n  }, [fetchMembers, fetchUserId]);\n\n  useEffect(() => {\n    if (members.value && userId.value) {\n      setIsMember(\n        members.value\n          ?.map((member: Member) => member.userId)\n          .indexOf(userId.value) >= 0,\n      );\n    }\n  }, [bazaarProject, members, identity, userId.value]);\n\n  const handleMembersClick = async () => {\n    if (userId.value) {\n      if (!isMember) {\n        await bazaarApi.addMember(bazaarProject?.id!, userId.value);\n      } else {\n        await bazaarApi.deleteMember(bazaarProject!.id, userId.value);\n      }\n      setIsMember(!isMember);\n      fetchMembers();\n    }\n  };\n\n  const links: IconLinkVerticalProps[] = [\n    {\n      label: 'Entity page',\n      icon: <DashboardIcon />,\n      disabled: true,\n    },\n    {\n      label: 'Unlink project',\n      icon: <LinkOffIcon />,\n      disabled: false,\n      onClick: () => {\n        setOpenUnlink(true);\n      },\n    },\n    {\n      label: isMember ? 'Leave' : 'Join',\n      icon: isMember ? <ExitToAppIcon /> : <PersonAddIcon />,\n      href: '',\n      onClick: async () => {\n        handleMembersClick();\n      },\n    },\n    {\n      label: 'Community',\n      icon: <ChatIcon />,\n      href: bazaarProject?.community,\n      disabled: bazaarProject?.community === '' || !isMember,\n    },\n  ];\n\n  const handleEditClose = () => {\n    setOpenEdit(false);\n  };\n\n  const handleUnlinkClose = () => {\n    setOpenUnlink(false);\n  };\n\n  const handleUnlinkSubmit = async () => {\n    const updateResponse = await bazaarApi.updateProject({\n      ...bazaarProject,\n      entityRef: null,\n    });\n\n    if (updateResponse.status === 'ok') {\n      handleUnlinkClose();\n      fetchBazaarProject();\n    }\n  };\n\n  if (members.error) {\n    return <Alert severity=\"error\">{members?.error?.message}</Alert>;\n  }\n\n  if (bazaarProject) {\n    return (\n      <div>\n        <EditProjectDialog\n          bazaarProject={bazaarProject!}\n          openEdit={openEdit}\n          handleEditClose={handleEditClose}\n          fetchBazaarProject={fetchBazaarProject}\n        />\n\n        {openUnlink && (\n          <ConfirmationDialog\n            open={openUnlink}\n            handleClose={handleUnlinkClose}\n            message={[\n              'Are you sure you want to unlink ',\n              <b className={classes.wordBreak}>\n                {parseEntityRef(bazaarProject.entityRef!).name}\n              </b>,\n              ' from ',\n              <b className={classes.wordBreak}>{bazaarProject.name}</b>,\n              ' ?',\n            ]}\n            type=\"unlink\"\n            handleSubmit={handleUnlinkSubmit}\n          />\n        )}\n\n        <CardHeader\n          title={<p className={classes.wordBreak}>{bazaarProject?.name!}</p>}\n          action={\n            <div>\n              <IconButton\n                onClick={() => {\n                  setOpenEdit(true);\n                }}\n              >\n                <EditIcon />\n              </IconButton>\n            </div>\n          }\n          subheader={<HeaderIconLinkRow links={links} />}\n        />\n        <Divider />\n\n        <CardContentFields\n          bazaarProject={bazaarProject}\n          members={members.value || []}\n          descriptionSize={10}\n          membersSize={2}\n        />\n      </div>\n    );\n  }\n  return null;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { bazaarApiRef } from '../../api';\nimport { EntityBazaarInfoContent } from '../EntityBazaarInfoContent';\nimport { Card } from '@material-ui/core';\nimport { parseBazaarResponse } from '../../util/parseMethods';\n\nexport const EntityBazaarInfoCard = () => {\n  const { entity } = useEntity();\n  const bazaarApi = useApi(bazaarApiRef);\n\n  const [bazaarProject, fetchBazaarProject] = useAsyncFn(async () => {\n    const response = await bazaarApi.getProjectByRef(\n      stringifyEntityRef(entity),\n    );\n\n    return await parseBazaarResponse(response);\n  });\n\n  const [isBazaar, setIsBazaar] = useState(bazaarProject.value ?? false);\n\n  useEffect(() => {\n    fetchBazaarProject();\n  }, [fetchBazaarProject]);\n\n  useEffect(() => {\n    const isBazaarProject = bazaarProject.value !== undefined;\n\n    setIsBazaar(isBazaarProject);\n  }, [bazaarProject.value]);\n\n  if (isBazaar) {\n    return (\n      <Card>\n        <EntityBazaarInfoContent\n          bazaarProject={bazaarProject.value}\n          fetchBazaarProject={fetchBazaarProject}\n        />\n      </Card>\n    );\n  }\n  return null;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Entity } from '@backstage/catalog-model';\nimport { Autocomplete } from '@material-ui/lab';\nimport { TextField, makeStyles } from '@material-ui/core';\n\ntype Props = {\n  catalogEntities: Entity[];\n  onChange: (entity: Entity) => void;\n  disableClearable: boolean;\n  defaultValue: Entity | null | undefined;\n  label: string;\n};\n\nconst useStyles = makeStyles({\n  container: { width: '100%', minWidth: '22rem' },\n  autocomplete: { overflow: 'hidden' },\n});\n\nexport const ProjectSelector = ({\n  catalogEntities,\n  onChange,\n  disableClearable,\n  defaultValue,\n  label,\n}: Props) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container}>\n      <Autocomplete\n        className={classes.autocomplete}\n        fullWidth\n        disableClearable={disableClearable}\n        defaultValue={defaultValue}\n        options={catalogEntities}\n        getOptionLabel={option => option?.metadata?.name}\n        renderOption={option => <span>{option?.metadata?.name}</span>}\n        renderInput={params => <TextField {...params} label={label} />}\n        onChange={(_, data) => {\n          onChange(data!);\n        }}\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Entity, stringifyEntityRef } from '@backstage/catalog-model';\nimport { UseFormReset, UseFormGetValues } from 'react-hook-form';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { ProjectDialog } from '../ProjectDialog';\nimport { ProjectSelector } from '../ProjectSelector';\nimport { BazaarProject, FormValues, Size, Status } from '../../types';\nimport { bazaarApiRef } from '../../api';\n\ntype Props = {\n  catalogEntities: Entity[];\n  open: boolean;\n  handleClose: () => void;\n  fetchBazaarProjects: () => Promise<BazaarProject[]>;\n  fetchCatalogEntities: () => Promise<Entity[]>;\n};\n\nexport const AddProjectDialog = ({\n  catalogEntities,\n  open,\n  handleClose,\n  fetchBazaarProjects,\n  fetchCatalogEntities,\n}: Props) => {\n  const bazaarApi = useApi(bazaarApiRef);\n  const [selectedEntity, setSelectedEntity] = useState<Entity | null>(null);\n\n  const defaultValues = {\n    name: '',\n    title: 'Add project',\n    community: '',\n    description: '',\n    status: 'proposed' as Status,\n    size: 'medium' as Size,\n    responsible: '',\n    startDate: null,\n    endDate: null,\n  };\n\n  const handleEntityClick = (entity: Entity) => {\n    setSelectedEntity(entity);\n  };\n\n  const handleSubmit: (\n    getValues: UseFormGetValues<FormValues>,\n    reset: UseFormReset<FormValues>,\n  ) => Promise<void> = async (\n    getValues: UseFormGetValues<FormValues>,\n    reset: UseFormReset<FormValues>,\n  ) => {\n    const formValues = getValues();\n    const response = await bazaarApi.addProject({\n      ...formValues,\n      entityRef: selectedEntity ? stringifyEntityRef(selectedEntity) : null,\n      startDate: formValues.startDate ?? null,\n      endDate: formValues.endDate ?? null,\n    } as BazaarProject);\n\n    if (response.status === 'ok') {\n      fetchBazaarProjects();\n      fetchCatalogEntities();\n    }\n\n    handleClose();\n    reset(defaultValues);\n  };\n\n  return (\n    <ProjectDialog\n      handleSave={handleSubmit}\n      title=\"Add project\"\n      isAddForm\n      defaultValues={defaultValues}\n      open={open}\n      projectSelector={\n        <ProjectSelector\n          onChange={handleEntityClick}\n          catalogEntities={catalogEntities || []}\n          disableClearable={false}\n          defaultValue={null}\n          label=\"Select a project\"\n        />\n      }\n      handleClose={handleClose}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  Button,\n  DialogContent,\n  makeStyles,\n} from '@material-ui/core';\nimport { ProjectSelector } from '../ProjectSelector';\nimport { CustomDialogTitle } from '../CustomDialogTitle';\nimport { Entity, stringifyEntityRef } from '@backstage/catalog-model';\n\nimport { bazaarApiRef } from '../../api';\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { BazaarProject } from '../../types';\n\ntype Props = {\n  openProjectSelector: boolean;\n  handleProjectSelectorClose: () => void;\n  catalogEntities: Entity[];\n  bazaarProject: BazaarProject;\n  fetchBazaarProject: () => Promise<BazaarProject | null>;\n  initEntity: Entity;\n};\n\nconst useStyles = makeStyles({\n  content: { padding: '0 1rem' },\n});\n\nexport const LinkProjectDialog = ({\n  openProjectSelector,\n  handleProjectSelectorClose,\n  catalogEntities,\n  bazaarProject,\n  fetchBazaarProject,\n  initEntity,\n}: Props) => {\n  const classes = useStyles();\n  const bazaarApi = useApi(bazaarApiRef);\n  const [selectedEntity, setSelectedEntity] = useState(initEntity);\n  const handleEntityClick = (entity: Entity) => {\n    setSelectedEntity(entity);\n  };\n\n  const handleSubmit = async () => {\n    handleProjectSelectorClose();\n\n    const updateResponse = await bazaarApi.updateProject({\n      ...bazaarProject,\n      entityRef: stringifyEntityRef(selectedEntity!),\n    });\n    if (updateResponse.status === 'ok') fetchBazaarProject();\n  };\n\n  return (\n    <Dialog onClose={handleProjectSelectorClose} open={openProjectSelector}>\n      <CustomDialogTitle\n        id=\"customized-dialog-title\"\n        onClose={handleProjectSelectorClose}\n      >\n        Select entity\n      </CustomDialogTitle>\n      <DialogContent className={classes.content} dividers>\n        <ProjectSelector\n          label=\"\"\n          onChange={handleEntityClick}\n          catalogEntities={catalogEntities || []}\n          disableClearable\n          defaultValue={catalogEntities[0] || null}\n        />\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={handleSubmit} color=\"primary\" type=\"submit\">\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  CardHeader,\n  Divider,\n  IconButton,\n  makeStyles,\n} from '@material-ui/core';\nimport {\n  HeaderIconLinkRow,\n  IconLinkVerticalProps,\n} from '@backstage/core-components';\nimport EditIcon from '@material-ui/icons/Edit';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport InsertLinkIcon from '@material-ui/icons/InsertLink';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport CloseIcon from '@material-ui/icons/Close';\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\nimport { EditProjectDialog } from '../EditProjectDialog';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport {\n  useApi,\n  identityApiRef,\n  useRouteRef,\n} from '@backstage/core-plugin-api';\nimport { Member, BazaarProject } from '../../types';\nimport { bazaarApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { catalogApiRef, entityRouteRef } from '@backstage/plugin-catalog-react';\n\nimport {\n  stringifyEntityRef,\n  Entity,\n  parseEntityRef,\n} from '@backstage/catalog-model';\n\nimport { ConfirmationDialog } from '../ConfirmationDialog/ConfirmationDialog';\nimport { CardContentFields } from '../CardContentFields/CardContentFields';\nimport { LinkProjectDialog } from '../LinkProjectDialog';\nimport {\n  fetchCatalogItems,\n  fetchProjectMembers,\n} from '../../util/fetchMethods';\nimport { parseBazaarResponse } from '../../util/parseMethods';\n\nconst useStyles = makeStyles({\n  wordBreak: {\n    wordBreak: 'break-all',\n    whiteSpace: 'normal',\n    margin: '-0.25rem 0',\n  },\n});\n\ntype Props = {\n  initProject: BazaarProject;\n  handleClose: () => void;\n  initEntity: Entity;\n};\n\nexport const HomePageBazaarInfoCard = ({\n  initProject,\n  handleClose,\n  initEntity,\n}: Props) => {\n  const classes = useStyles();\n  const entityLink = useRouteRef(entityRouteRef);\n  const bazaarApi = useApi(bazaarApiRef);\n  const identity = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [openProjectSelector, setOpenProjectSelector] = useState(false);\n  const [openUnlink, setOpenUnlink] = useState(false);\n  const [isMember, setIsMember] = useState(false);\n\n  const [catalogEntities, fetchCatalogEntities] = useAsyncFn(async () => {\n    const entities = await fetchCatalogItems(catalogApi);\n    const bazaarProjects = await bazaarApi.getProjects();\n    const bazaarLinkedRefs: string[] = bazaarProjects.data\n      .filter((entity: any) => entity.entity_ref !== null)\n      .map((entity: any) => entity.entity_ref);\n\n    return entities.filter(\n      (entity: Entity) =>\n        !bazaarLinkedRefs.includes(stringifyEntityRef(entity)),\n    );\n  });\n\n  const [bazaarProject, fetchBazaarProject] = useAsyncFn(async () => {\n    const response = await bazaarApi.getProjectById(initProject.id);\n    return await parseBazaarResponse(response);\n  });\n\n  const [members, fetchMembers] = useAsyncFn(async () => {\n    return fetchProjectMembers(bazaarApi, bazaarProject.value ?? initProject);\n  });\n\n  const [userId, fetchUserId] = useAsyncFn(async () => {\n    return await (\n      await identity.getProfileInfo()\n    ).displayName;\n  });\n\n  useEffect(() => {\n    fetchMembers();\n    fetchBazaarProject();\n    fetchCatalogEntities();\n    fetchUserId();\n  }, [fetchMembers, fetchBazaarProject, fetchCatalogEntities, fetchUserId]);\n\n  useEffect(() => {\n    if (members.value && userId.value) {\n      setIsMember(\n        members.value\n          ?.map((member: Member) => member.userId)\n          .indexOf(userId.value) >= 0,\n      );\n    }\n  }, [bazaarProject.value, members, identity, userId.value]);\n\n  const handleMembersClick = async () => {\n    if (userId.value) {\n      if (!isMember) {\n        await bazaarApi.addMember(bazaarProject.value!.id, userId.value);\n      } else {\n        await bazaarApi.deleteMember(bazaarProject.value!.id, userId.value);\n      }\n      setIsMember(!isMember);\n      fetchMembers();\n    }\n  };\n\n  const getEntityPageLink = () => {\n    if (bazaarProject?.value?.entityRef) {\n      const { name, kind, namespace } = parseEntityRef(\n        bazaarProject.value.entityRef,\n      );\n      return entityLink({ kind, namespace, name });\n    }\n    return '';\n  };\n\n  const handleLink = () => {\n    if (bazaarProject.value?.entityRef) {\n      setOpenUnlink(true);\n    } else {\n      fetchCatalogEntities();\n      setOpenProjectSelector(true);\n    }\n  };\n\n  const links: IconLinkVerticalProps[] = [\n    {\n      label: 'Entity page',\n      icon: <DashboardIcon />,\n      href: bazaarProject.value?.entityRef ? getEntityPageLink() : '',\n      disabled: bazaarProject.value?.entityRef === null,\n    },\n    {\n      label: bazaarProject.value?.entityRef ? 'Unlink project' : 'Link project',\n      icon: bazaarProject.value?.entityRef ? (\n        <LinkOffIcon />\n      ) : (\n        <InsertLinkIcon />\n      ),\n      onClick: handleLink,\n    },\n    {\n      label: isMember ? 'Leave' : 'Join',\n      icon: isMember ? <ExitToAppIcon /> : <PersonAddIcon />,\n      href: '',\n      onClick: async () => {\n        handleMembersClick();\n      },\n    },\n    {\n      label: 'Community',\n      icon: <ChatIcon />,\n      href: bazaarProject.value?.community,\n      disabled: !bazaarProject.value?.community || !isMember,\n    },\n  ];\n\n  const handleUnlinkSubmit = async () => {\n    const updateResponse = await bazaarApi.updateProject({\n      ...bazaarProject.value,\n      entityRef: null,\n    });\n\n    if (updateResponse.status === 'ok') {\n      setOpenUnlink(false);\n      fetchBazaarProject();\n    }\n  };\n\n  if (bazaarProject.error) {\n    return <Alert severity=\"error\">{bazaarProject?.error?.message}</Alert>;\n  } else if (members.error) {\n    return <Alert severity=\"error\">{members?.error?.message}</Alert>;\n  }\n\n  return (\n    <div>\n      <LinkProjectDialog\n        openProjectSelector={openProjectSelector}\n        handleProjectSelectorClose={() => setOpenProjectSelector(false)}\n        catalogEntities={catalogEntities.value || []}\n        bazaarProject={bazaarProject.value || initProject}\n        fetchBazaarProject={fetchBazaarProject}\n        initEntity={initEntity}\n      />\n\n      {openUnlink && (\n        <ConfirmationDialog\n          open={openUnlink}\n          handleClose={() => setOpenUnlink(false)}\n          message={[\n            'Are you sure you want to unlink ',\n            <b className={classes.wordBreak}>\n              {parseEntityRef(bazaarProject.value?.entityRef!).name}\n            </b>,\n            ' from ',\n            <b className={classes.wordBreak}>{bazaarProject.value?.name}</b>,\n            ' ?',\n          ]}\n          type=\"unlink\"\n          handleSubmit={handleUnlinkSubmit}\n        />\n      )}\n\n      <Card>\n        <EditProjectDialog\n          bazaarProject={bazaarProject.value || initProject}\n          openEdit={openEdit}\n          handleEditClose={() => setOpenEdit(false)}\n          handleCardClose={handleClose}\n          fetchBazaarProject={fetchBazaarProject}\n        />\n\n        <CardHeader\n          title={\n            <p className={classes.wordBreak}>\n              {bazaarProject.value?.name || initProject.name}\n            </p>\n          }\n          action={\n            <div>\n              <IconButton onClick={() => setOpenEdit(true)}>\n                <EditIcon />\n              </IconButton>\n              <IconButton onClick={handleClose}>\n                <CloseIcon />\n              </IconButton>\n            </div>\n          }\n          subheader={<HeaderIconLinkRow links={links} />}\n        />\n        <Divider />\n\n        <CardContentFields\n          bazaarProject={bazaarProject.value || initProject}\n          members={members.value || []}\n          descriptionSize={9}\n          membersSize={3}\n        />\n      </Card>\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { ItemCardHeader } from '@backstage/core-components';\nimport {\n  Card,\n  CardActionArea,\n  CardContent,\n  Dialog,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport { StatusTag } from '../StatusTag/StatusTag';\nimport { BazaarProject } from '../../types';\nimport { DateTime } from 'luxon';\nimport { HomePageBazaarInfoCard } from '../HomePageBazaarInfoCard';\nimport { Entity } from '@backstage/catalog-model';\n\nconst useStyles = makeStyles({\n  statusTag: {\n    display: 'inline-block',\n    whiteSpace: 'nowrap',\n    marginBottom: '0.8rem',\n  },\n  description: {\n    display: '-webkit-box',\n    WebkitLineClamp: 7,\n    WebkitBoxOrient: 'vertical',\n    overflow: 'hidden',\n    textAlign: 'justify',\n  },\n  memberCount: {\n    float: 'right',\n  },\n  content: {\n    height: '13rem',\n  },\n  header: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n});\n\ntype Props = {\n  project: BazaarProject;\n  fetchBazaarProjects: () => Promise<BazaarProject[]>;\n  catalogEntities: Entity[];\n};\n\nexport const ProjectCard = ({\n  project,\n  fetchBazaarProjects,\n  catalogEntities,\n}: Props) => {\n  const classes = useStyles();\n  const [openCard, setOpenCard] = useState(false);\n  const { id, name, status, updatedAt, description, membersCount } = project;\n\n  const handleClose = () => {\n    setOpenCard(false);\n    fetchBazaarProjects();\n  };\n\n  return (\n    <div>\n      <Dialog fullWidth onClose={handleClose} open={openCard}>\n        <HomePageBazaarInfoCard\n          initProject={project}\n          handleClose={handleClose}\n          initEntity={catalogEntities[0] || null}\n        />\n      </Dialog>\n\n      <Card key={id}>\n        <CardActionArea onClick={() => setOpenCard(true)}>\n          <ItemCardHeader\n            classes={{ root: classes.header }}\n            title={\n              <Typography noWrap variant=\"h6\" component=\"h4\">\n                {name}\n              </Typography>\n            }\n            subtitle={`updated ${DateTime.fromISO(\n              new Date(updatedAt!).toISOString(),\n            ).toRelative({\n              base: DateTime.now(),\n            })}`}\n          />\n          <CardContent className={classes.content}>\n            <StatusTag styles={classes.statusTag} status={status} />\n            <Typography variant=\"body2\" className={classes.memberCount}>\n              {Number(membersCount) === Number(1)\n                ? `${membersCount} member`\n                : `${membersCount} members`}\n            </Typography>\n            <Typography variant=\"body2\" className={classes.description}>\n              {description}\n            </Typography>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ChangeEvent, useState } from 'react';\nimport { Content } from '@backstage/core-components';\nimport { ProjectCard } from '../ProjectCard/ProjectCard';\nimport { makeStyles, Grid, TablePagination } from '@material-ui/core';\nimport { BazaarProject } from '../../types';\nimport { Entity } from '@backstage/catalog-model';\n\ntype Props = {\n  bazaarProjects: BazaarProject[];\n  fetchBazaarProjects: () => Promise<BazaarProject[]>;\n  catalogEntities: Entity[];\n};\n\nconst useStyles = makeStyles({\n  content: {\n    width: '100%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n  },\n  empty: {\n    height: '10rem',\n    textAlign: 'center',\n    verticalAlign: 'middle',\n    lineHeight: '10rem',\n  },\n  pagination: {\n    marginTop: '1rem',\n    marginLeft: 'auto',\n    marginRight: '0',\n  },\n});\n\nexport const ProjectPreview = ({\n  bazaarProjects,\n  fetchBazaarProjects,\n  catalogEntities,\n}: Props) => {\n  const classes = useStyles();\n  const [page, setPage] = useState(1);\n  const [rows, setRows] = useState(12);\n\n  const handlePageChange = (_: any, newPage: number) => {\n    setPage(newPage + 1);\n  };\n\n  const handleRowChange = (\n    event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    setRows(parseInt(event.target.value, 10));\n    setPage(1);\n  };\n\n  if (!bazaarProjects.length) {\n    return (\n      <div className={classes.empty}>Please add projects to the Bazaar.</div>\n    );\n  }\n\n  return (\n    <Content className={classes.content} noPadding>\n      <Grid wrap=\"wrap\" container spacing={3}>\n        {bazaarProjects\n          .slice((page - 1) * rows, rows * page)\n          .map((bazaarProject: BazaarProject, i: number) => {\n            return (\n              <Grid key={i} item xs={2}>\n                <ProjectCard\n                  project={bazaarProject}\n                  key={i}\n                  fetchBazaarProjects={fetchBazaarProjects}\n                  catalogEntities={catalogEntities}\n                />\n              </Grid>\n            );\n          })}\n      </Grid>\n\n      <TablePagination\n        className={classes.pagination}\n        rowsPerPageOptions={[12, 24, 48, 96]}\n        count={bazaarProjects?.length}\n        page={page - 1}\n        onPageChange={handlePageChange}\n        rowsPerPage={rows}\n        onRowsPerPageChange={handleRowChange}\n        backIconButtonProps={{ disabled: page === 1 }}\n        nextIconButtonProps={{\n          disabled: rows * page >= bazaarProjects.length,\n        }}\n      />\n    </Content>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ChangeEvent, ReactNode } from 'react';\nimport { FormControl, MenuItem, Select, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  select: {\n    fontSize: 'xx-large',\n    fontWeight: 'bold',\n    width: '16rem',\n  },\n});\n\ntype Props = {\n  sortMethodNbr: number;\n  handleSortMethodChange:\n    | ((\n        event: ChangeEvent<{ name?: string | undefined; value: unknown }>,\n        child: ReactNode,\n      ) => void)\n    | undefined;\n};\n\nexport const SortMethodSelector = ({\n  sortMethodNbr,\n  handleSortMethodChange,\n}: Props) => {\n  const classes = useStyles();\n  return (\n    <FormControl fullWidth>\n      <Select\n        className={classes.select}\n        disableUnderline\n        value={sortMethodNbr}\n        onChange={handleSortMethodChange}\n      >\n        <MenuItem value={0}>Latest updated</MenuItem>\n        <MenuItem value={1}>A-Z</MenuItem>\n        <MenuItem value={2}>Most members</MenuItem>\n      </Select>\n    </FormControl>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ChangeEvent, useEffect, useState } from 'react';\nimport { Content, SupportButton } from '@backstage/core-components';\nimport { AddProjectDialog } from '../AddProjectDialog';\nimport { ProjectPreview } from '../ProjectPreview/ProjectPreview';\nimport { Button, makeStyles } from '@material-ui/core';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { Entity, stringifyEntityRef } from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { BazaarProject } from '../../types';\nimport { bazaarApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport SearchBar from 'material-ui-search-bar';\nimport { sortByDate, sortByMembers, sortByName } from '../../util/sortMethods';\nimport { SortMethodSelector } from '../SortMethodSelector';\nimport { fetchCatalogItems } from '../../util/fetchMethods';\nimport { parseBazaarProject } from '../../util/parseMethods';\n\nconst useStyles = makeStyles({\n  button: { minWidth: '11rem' },\n  container: {\n    marginTop: '2rem',\n  },\n  header: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    margin: '0 auto',\n    marginBottom: '1.2rem',\n  },\n  search: {\n    marginRight: '1rem',\n    height: '2.5rem',\n    width: '35rem',\n  },\n});\n\nconst getUnlinkedCatalogEntities = (\n  bazaarProjects: BazaarProject[],\n  catalogEntities: Entity[],\n) => {\n  const bazaarProjectRefs = bazaarProjects.map(\n    (project: BazaarProject) => project.entityRef,\n  );\n\n  return catalogEntities.filter((entity: Entity) => {\n    return !bazaarProjectRefs?.includes(stringifyEntityRef(entity));\n  });\n};\n\nexport const SortView = () => {\n  const bazaarApi = useApi(bazaarApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const classes = useStyles();\n  const sortMethods = [sortByDate, sortByName, sortByMembers];\n  const [sortMethodNbr, setSortMethodNbr] = useState(0);\n  const [openAdd, setOpenAdd] = useState(false);\n  const [searchValue, setSearchValue] = useState('');\n  const [unlinkedCatalogEntities, setUnlinkedCatalogEntities] =\n    useState<Entity[]>();\n\n  const [catalogEntities, fetchCatalogEntities] = useAsyncFn(async () => {\n    return await fetchCatalogItems(catalogApi);\n  });\n\n  const [bazaarProjects, fetchBazaarProjects] = useAsyncFn(async () => {\n    const response = await bazaarApi.getProjects();\n    const dbProjects: BazaarProject[] = [];\n\n    response.data.forEach((project: any) => {\n      dbProjects.push(parseBazaarProject(project));\n    });\n\n    return dbProjects;\n  });\n\n  const catalogEntityRefs = catalogEntities.value?.map((project: Entity) =>\n    stringifyEntityRef(project),\n  );\n\n  const getSearchResults = () => {\n    return bazaarProjects.value\n      ?.filter(project => project.name.includes(searchValue))\n      .sort(sortMethods[sortMethodNbr]);\n  };\n\n  useEffect(() => {\n    const filterBrokenLinks = () => {\n      if (catalogEntityRefs) {\n        bazaarProjects.value?.forEach(async (project: BazaarProject) => {\n          if (project.entityRef) {\n            if (!catalogEntityRefs?.includes(project.entityRef)) {\n              await bazaarApi.updateProject({\n                ...project,\n                entityRef: null,\n              });\n            }\n          }\n        });\n      }\n    };\n    filterBrokenLinks();\n  }, [\n    bazaarApi,\n    bazaarProjects.value,\n    catalogEntityRefs,\n    catalogEntities.value,\n  ]);\n\n  useEffect(() => {\n    fetchCatalogEntities();\n    fetchBazaarProjects();\n  }, [fetchBazaarProjects, fetchCatalogEntities]);\n\n  useEffect(() => {\n    const unlinkedCEntities = getUnlinkedCatalogEntities(\n      bazaarProjects.value || [],\n      catalogEntities.value || [],\n    );\n\n    if (unlinkedCEntities) {\n      setUnlinkedCatalogEntities(unlinkedCEntities);\n    }\n  }, [bazaarProjects, catalogEntities]);\n\n  const handleSortMethodChange = (\n    event: ChangeEvent<{ name?: string | undefined; value: unknown }>,\n  ) => {\n    setSortMethodNbr(\n      typeof event.target.value === 'number' ? event.target.value : 0,\n    );\n  };\n\n  if (catalogEntities.error)\n    return <Alert severity=\"error\">{catalogEntities.error.message}</Alert>;\n\n  if (bazaarProjects.error)\n    return <Alert severity=\"error\">{bazaarProjects.error.message}</Alert>;\n\n  return (\n    <Content noPadding>\n      <div className={classes.header}>\n        <SortMethodSelector\n          sortMethodNbr={sortMethodNbr}\n          handleSortMethodChange={handleSortMethodChange}\n        />\n\n        <SearchBar\n          className={classes.search}\n          value={searchValue}\n          onChange={newSortMethod => {\n            setSearchValue(newSortMethod);\n          }}\n          onCancelSearch={() => {\n            setSearchValue('');\n          }}\n        />\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => {\n            setOpenAdd(true);\n          }}\n        >\n          Add project\n        </Button>\n        <AddProjectDialog\n          catalogEntities={unlinkedCatalogEntities || []}\n          handleClose={() => {\n            setOpenAdd(false);\n          }}\n          open={openAdd}\n          fetchBazaarProjects={fetchBazaarProjects}\n          fetchCatalogEntities={fetchCatalogEntities}\n        />\n        <SupportButton />\n      </div>\n      <ProjectPreview\n        bazaarProjects={getSearchResults() || []}\n        fetchBazaarProjects={fetchBazaarProjects}\n        catalogEntities={unlinkedCatalogEntities || []}\n      />\n      <Content noPadding className={classes.container} />\n    </Content>\n  );\n};\n"],"names":["useStyles","Typography","IconButton","Dialog","Button","DialogContent","DialogActions","FormControl","Select","MenuItem"],"mappings":"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"}