{"version":3,"file":"index.esm.js","sources":["../src/api/client.ts","../src/plugin.ts","../src/components/Incident/IncidentListItem.tsx","../src/components/Incident/IncidentEmptyState.tsx","../src/components/Incident/Incidents.tsx","../src/components/Escalation/EscalationUsersEmptyState.tsx","../src/components/Escalation/EscalationUser.tsx","../src/components/Escalation/EscalationPolicy.tsx","../src/components/Errors/MissingTokenError.tsx","../src/components/constants.ts","../src/hooks/index.ts","../src/components/TriggerDialog/TriggerDialog.tsx","../src/components/ChangeEvents/ChangeEventListItem.tsx","../src/components/ChangeEvents/ChangeEventEmptyState.tsx","../src/components/ChangeEvents/ChangeEvents.tsx","../src/components/PagerDutyCard/index.tsx","../src/components/TriggerButton/index.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Service, Incident, ChangeEvent, OnCall } from '../components/types';\nimport {\n  PagerDutyApi,\n  TriggerAlarmRequest,\n  ServicesResponse,\n  IncidentsResponse,\n  OnCallsResponse,\n  ClientApiConfig,\n  RequestOptions,\n  ChangeEventsResponse,\n} from './types';\nimport {\n  createApiRef,\n  DiscoveryApi,\n  ConfigApi,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\n\nexport class UnauthorizedError extends Error {}\n\nexport const pagerDutyApiRef = createApiRef<PagerDutyApi>({\n  id: 'plugin.pagerduty.api',\n});\n\nexport class PagerDutyClient implements PagerDutyApi {\n  static fromConfig(\n    configApi: ConfigApi,\n    discoveryApi: DiscoveryApi,\n    identityApi: IdentityApi,\n  ) {\n    const eventsBaseUrl: string =\n      configApi.getOptionalString('pagerDuty.eventsBaseUrl') ??\n      'https://events.pagerduty.com/v2';\n    return new PagerDutyClient({\n      eventsBaseUrl,\n      discoveryApi,\n      identityApi,\n    });\n  }\n  constructor(private readonly config: ClientApiConfig) {}\n\n  async getServiceByIntegrationKey(integrationKey: string): Promise<Service[]> {\n    const params = `time_zone=UTC&include[]=integrations&include[]=escalation_policies&query=${integrationKey}`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/services?${params}`;\n    const { services } = await this.getByUrl<ServicesResponse>(url);\n\n    return services;\n  }\n\n  async getIncidentsByServiceId(serviceId: string): Promise<Incident[]> {\n    const params = `time_zone=UTC&sort_by=created_at&statuses[]=triggered&statuses[]=acknowledged&service_ids[]=${serviceId}`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/incidents?${params}`;\n    const { incidents } = await this.getByUrl<IncidentsResponse>(url);\n\n    return incidents;\n  }\n\n  async getChangeEventsByServiceId(serviceId: string): Promise<ChangeEvent[]> {\n    const params = `limit=5&time_zone=UTC&sort_by=timestamp`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/services/${serviceId}/change_events?${params}`;\n\n    const { change_events } = await this.getByUrl<ChangeEventsResponse>(url);\n\n    return change_events;\n  }\n\n  async getOnCallByPolicyId(policyId: string): Promise<OnCall[]> {\n    const params = `time_zone=UTC&include[]=users&escalation_policy_ids[]=${policyId}`;\n    const url = `${await this.config.discoveryApi.getBaseUrl(\n      'proxy',\n    )}/pagerduty/oncalls?${params}`;\n    const { oncalls } = await this.getByUrl<OnCallsResponse>(url);\n\n    return oncalls;\n  }\n\n  triggerAlarm(request: TriggerAlarmRequest): Promise<Response> {\n    const { integrationKey, source, description, userName } = request;\n\n    const body = JSON.stringify({\n      event_action: 'trigger',\n      routing_key: integrationKey,\n      client: 'Backstage',\n      client_url: source,\n      payload: {\n        summary: description,\n        source: source,\n        severity: 'error',\n        class: 'manual trigger',\n        custom_details: {\n          user: userName,\n        },\n      },\n    });\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n        Accept: 'application/json, text/plain, */*',\n      },\n      body,\n    };\n\n    const url = this.config.eventsBaseUrl ?? 'https://events.pagerduty.com/v2';\n\n    return this.request(`${url}/enqueue`, options);\n  }\n\n  private async getByUrl<T>(url: string): Promise<T> {\n    const { token: idToken } = await this.config.identityApi.getCredentials();\n    const options = {\n      method: 'GET',\n      headers: {\n        Accept: 'application/vnd.pagerduty+json;version=2',\n        'Content-Type': 'application/json',\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    };\n    const response = await this.request(url, options);\n    return response.json();\n  }\n\n  private async request(\n    url: string,\n    options: RequestOptions,\n  ): Promise<Response> {\n    const response = await fetch(url, options);\n    if (response.status === 401) {\n      throw new UnauthorizedError();\n    }\n    if (!response.ok) {\n      const payload = await response.json();\n      const errors = payload.errors.map((error: string) => error).join(' ');\n      const message = `Request failed with ${response.status}, ${errors}`;\n      throw new Error(message);\n    }\n    return response;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { pagerDutyApiRef, PagerDutyClient } from './api';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  discoveryApiRef,\n  configApiRef,\n  createComponentExtension,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'pagerduty',\n});\n\nexport const pagerDutyPlugin = createPlugin({\n  id: 'pagerduty',\n  apis: [\n    createApiFactory({\n      api: pagerDutyApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        configApi: configApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ configApi, discoveryApi, identityApi }) =>\n        PagerDutyClient.fromConfig(configApi, discoveryApi, identityApi),\n    }),\n  ],\n});\n\nexport const EntityPagerDutyCard = pagerDutyPlugin.provide(\n  createComponentExtension({\n    name: 'EntityPagerDutyCard',\n    component: {\n      lazy: () =>\n        import('./components/PagerDutyCard').then(m => m.PagerDutyCard),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Link,\n  Typography,\n  Chip,\n} from '@material-ui/core';\nimport Done from '@material-ui/icons/Done';\nimport Warning from '@material-ui/icons/Warning';\nimport { DateTime, Duration } from 'luxon';\nimport { Incident } from '../types';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport { BackstageTheme } from '@backstage/theme';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n  warning: {\n    borderColor: theme.palette.status.warning,\n    color: theme.palette.status.warning,\n    '& *': {\n      color: theme.palette.status.warning,\n    },\n  },\n  error: {\n    borderColor: theme.palette.status.error,\n    color: theme.palette.status.error,\n    '& *': {\n      color: theme.palette.status.error,\n    },\n  },\n}));\n\ntype Props = {\n  incident: Incident;\n};\n\nexport const IncidentListItem = ({ incident }: Props) => {\n  const classes = useStyles();\n  const duration =\n    new Date().getTime() - new Date(incident.created_at).getTime();\n  const createdAt = DateTime.local()\n    .minus(Duration.fromMillis(duration))\n    .toRelative({ locale: 'en' });\n  const user = incident.assignments[0]?.assignee;\n\n  return (\n    <ListItem dense key={incident.id}>\n      <ListItemText\n        primary={\n          <>\n            <Chip\n              data-testid={`chip-${incident.status}`}\n              label={incident.status}\n              size=\"small\"\n              variant=\"outlined\"\n              icon={incident.status === 'acknowledged' ? <Done /> : <Warning />}\n              className={\n                incident.status === 'triggered'\n                  ? classes.error\n                  : classes.warning\n              }\n            />\n            {incident.title}\n          </>\n        }\n        primaryTypographyProps={{\n          variant: 'body1',\n          className: classes.listItemPrimary,\n        }}\n        secondary={\n          <Typography noWrap variant=\"body2\" color=\"textSecondary\">\n            Created {createdAt} and assigned to{' '}\n            <Link\n              href={user?.html_url ?? '#'}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {user?.summary ?? 'nobody'}\n            </Link>\n          </Typography>\n        }\n      />\n      <ListItemSecondaryAction>\n        <Tooltip title=\"View in PagerDuty\" placement=\"top\">\n          <IconButton\n            href={incident.html_url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            color=\"primary\"\n          >\n            <OpenInBrowserIcon />\n          </IconButton>\n        </Tooltip>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport EmptyStateImage from '../../assets/emptystate.svg';\n\nexport const IncidentsEmptyState = () => {\n  return (\n    <Grid\n      container\n      justifyContent=\"center\"\n      direction=\"column\"\n      alignItems=\"center\"\n    >\n      <Grid item xs={12}>\n        <Typography variant=\"h5\">Nice! No incidents found!</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <img\n          src={EmptyStateImage}\n          alt=\"EmptyState\"\n          data-testid=\"emptyStateImg\"\n        />\n      </Grid>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { List, ListSubheader } from '@material-ui/core';\nimport { IncidentListItem } from './IncidentListItem';\nimport { IncidentsEmptyState } from './IncidentEmptyState';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { pagerDutyApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\n\ntype Props = {\n  serviceId: string;\n  refreshIncidents: boolean;\n};\n\nexport const Incidents = ({ serviceId, refreshIncidents }: Props) => {\n  const api = useApi(pagerDutyApiRef);\n\n  const [{ value: incidents, loading, error }, getIncidents] = useAsyncFn(\n    async () => await api.getIncidentsByServiceId(serviceId),\n  );\n\n  useEffect(() => {\n    getIncidents();\n  }, [refreshIncidents, getIncidents]);\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  if (!incidents?.length) {\n    return <IncidentsEmptyState />;\n  }\n\n  return (\n    <List dense subheader={<ListSubheader>INCIDENTS</ListSubheader>}>\n      {incidents!.map((incident, index) => (\n        <IncidentListItem key={incident.id + index} incident={incident} />\n      ))}\n    </List>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { StatusWarning } from '@backstage/core-components';\n\nconst useStyles = makeStyles({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport const EscalationUsersEmptyState = () => {\n  const classes = useStyles();\n  return (\n    <ListItem>\n      <ListItemIcon>\n        <div className={classes.denseListIcon}>\n          <StatusWarning />\n        </div>\n      </ListItemIcon>\n      <ListItemText primary=\"Empty escalation policy\" />\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmailIcon from '@material-ui/icons/Email';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport { User } from '../types';\n\nconst useStyles = makeStyles({\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n});\n\ntype Props = {\n  user: User;\n};\n\nexport const EscalationUser = ({ user }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <ListItem>\n      <ListItemIcon>\n        <Avatar alt=\"User\" />\n      </ListItemIcon>\n      <ListItemText\n        primary={\n          <Typography className={classes.listItemPrimary}>\n            {user.name}\n          </Typography>\n        }\n        secondary={user.email}\n      />\n      <ListItemSecondaryAction>\n        <Tooltip title=\"Send e-mail to user\" placement=\"top\">\n          <IconButton href={`mailto:${user.email}`}>\n            <EmailIcon color=\"primary\" />\n          </IconButton>\n        </Tooltip>\n        <Tooltip title=\"View in PagerDuty\" placement=\"top\">\n          <IconButton\n            href={user.html_url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            color=\"primary\"\n          >\n            <OpenInBrowserIcon />\n          </IconButton>\n        </Tooltip>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { List, ListSubheader } from '@material-ui/core';\nimport { EscalationUsersEmptyState } from './EscalationUsersEmptyState';\nimport { EscalationUser } from './EscalationUser';\nimport useAsync from 'react-use/lib/useAsync';\nimport { pagerDutyApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\n\ntype Props = {\n  policyId: string;\n};\n\nexport const EscalationPolicy = ({ policyId }: Props) => {\n  const api = useApi(pagerDutyApiRef);\n\n  const {\n    value: users,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const oncalls = await api.getOnCallByPolicyId(policyId);\n    const usersItem = oncalls\n      .sort((a, b) => a.escalation_level - b.escalation_level)\n      .map(oncall => oncall.user);\n\n    return usersItem;\n  });\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  if (!users?.length) {\n    return <EscalationUsersEmptyState />;\n  }\n\n  return (\n    <List dense subheader={<ListSubheader>ON CALL</ListSubheader>}>\n      {users!.map((user, index) => (\n        <EscalationUser key={index} user={user} />\n      ))}\n    </List>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Button } from '@material-ui/core';\nimport { EmptyState } from '@backstage/core-components';\n\nexport const MissingTokenError = () => (\n  <EmptyState\n    missing=\"info\"\n    title=\"Missing or invalid PagerDuty Token\"\n    description=\"The request to fetch data needs a valid token. See README for more details.\"\n    action={\n      <Button\n        color=\"primary\"\n        variant=\"contained\"\n        href=\"https://github.com/backstage/backstage/blob/master/plugins/pagerduty/README.md\"\n      >\n        Read More\n      </Button>\n    }\n  />\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const PAGERDUTY_INTEGRATION_KEY = 'pagerduty.com/integration-key';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\n\nimport { PAGERDUTY_INTEGRATION_KEY } from '../components/constants';\n\nexport function usePagerdutyEntity() {\n  const { entity } = useEntity();\n  const integrationKey =\n    entity.metadata.annotations?.[PAGERDUTY_INTEGRATION_KEY];\n  const name = entity.metadata.name;\n\n  return { integrationKey, name };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  TextField,\n  DialogActions,\n  Button,\n  DialogContent,\n  Typography,\n  CircularProgress,\n} from '@material-ui/core';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { pagerDutyApiRef } from '../../api';\nimport { Alert } from '@material-ui/lab';\nimport { usePagerdutyEntity } from '../../hooks';\nimport {\n  useApi,\n  alertApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { DEFAULT_NAMESPACE, parseEntityRef } from '@backstage/catalog-model';\n\ntype Props = {\n  showDialog: boolean;\n  handleDialog: () => void;\n  onIncidentCreated?: () => void;\n};\n\nexport const TriggerDialog = ({\n  showDialog,\n  handleDialog,\n  onIncidentCreated: onIncidentCreated,\n}: Props) => {\n  const { name, integrationKey } = usePagerdutyEntity();\n  const alertApi = useApi(alertApiRef);\n  const identityApi = useApi(identityApiRef);\n  const api = useApi(pagerDutyApiRef);\n  const [description, setDescription] = useState<string>('');\n\n  const [{ value, loading, error }, handleTriggerAlarm] = useAsyncFn(\n    async (descriptions: string) => {\n      const { userEntityRef } = await identityApi.getBackstageIdentity();\n      const { name: userName } = parseEntityRef(userEntityRef, {\n        defaultKind: 'User',\n        defaultNamespace: DEFAULT_NAMESPACE,\n      });\n      return await api.triggerAlarm({\n        integrationKey: integrationKey as string,\n        source: window.location.toString(),\n        description: descriptions,\n        userName,\n      });\n    },\n  );\n\n  const descriptionChanged = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    setDescription(event.target.value);\n  };\n\n  useEffect(() => {\n    if (value) {\n      (async () => {\n        alertApi.post({\n          message: `Alarm successfully triggered`,\n        });\n\n        handleDialog();\n\n        // The pager duty API isn't always returning the newly created alarm immediately\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        onIncidentCreated?.();\n      })();\n    }\n  }, [value, alertApi, handleDialog, onIncidentCreated]);\n\n  if (error) {\n    alertApi.post({\n      message: `Failed to trigger alarm. ${error.message}`,\n      severity: 'error',\n    });\n  }\n\n  return (\n    <Dialog maxWidth=\"md\" open={showDialog} onClose={handleDialog} fullWidth>\n      <DialogTitle>\n        This action will trigger an incident for <strong>\"{name}\"</strong>.\n      </DialogTitle>\n      <DialogContent>\n        <Alert severity=\"info\">\n          <Typography variant=\"body1\" align=\"justify\">\n            If the issue you are seeing does not need urgent attention, please\n            get in touch with the responsible team using their preferred\n            communications channel. You can find information about the owner of\n            this entity in the \"About\" card. If the issue is urgent, please\n            don't hesitate to trigger the alert.\n          </Typography>\n        </Alert>\n        <Typography\n          variant=\"body1\"\n          style={{ marginTop: '1em' }}\n          gutterBottom\n          align=\"justify\"\n        >\n          Please describe the problem you want to report. Be as descriptive as\n          possible. Your signed in user and a reference to the current page will\n          automatically be amended to the alarm so that the receiver can reach\n          out to you if necessary.\n        </Typography>\n        <TextField\n          inputProps={{ 'data-testid': 'trigger-input' }}\n          id=\"description\"\n          multiline\n          fullWidth\n          rows=\"4\"\n          margin=\"normal\"\n          label=\"Problem description\"\n          variant=\"outlined\"\n          onChange={descriptionChanged}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          data-testid=\"trigger-button\"\n          id=\"trigger\"\n          color=\"secondary\"\n          disabled={!description || loading}\n          variant=\"contained\"\n          onClick={() => handleTriggerAlarm(description)}\n          endIcon={loading && <CircularProgress size={16} />}\n        >\n          Trigger Incident\n        </Button>\n        <Button id=\"close\" color=\"primary\" onClick={handleDialog}>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Link } from '@backstage/core-components';\nimport {\n  ListItem,\n  ListItemSecondaryAction,\n  Tooltip,\n  ListItemText,\n  makeStyles,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport { DateTime, Duration } from 'luxon';\nimport { ChangeEvent } from '../types';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport { BackstageTheme } from '@backstage/theme';\n\nconst useStyles = makeStyles<BackstageTheme>({\n  denseListIcon: {\n    marginRight: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  listItemPrimary: {\n    fontWeight: 'bold',\n  },\n});\n\ntype Props = {\n  changeEvent: ChangeEvent;\n};\n\nexport const ChangeEventListItem = ({ changeEvent }: Props) => {\n  const classes = useStyles();\n  const duration =\n    new Date().getTime() - new Date(changeEvent.timestamp).getTime();\n  const changedAt = DateTime.local()\n    .minus(Duration.fromMillis(duration))\n    .toRelative({ locale: 'en' });\n  let externalLinkElem = null;\n  if (changeEvent.links.length > 0) {\n    const text: string = changeEvent.links[0].text;\n    externalLinkElem = (\n      <Tooltip title={text} placement=\"top\">\n        <IconButton\n          component={Link}\n          to={changeEvent.links[0].href}\n          color=\"primary\"\n        >\n          <OpenInBrowserIcon />\n        </IconButton>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <ListItem dense key={changeEvent.id}>\n      <ListItemText\n        primary={<>{changeEvent.summary}</>}\n        primaryTypographyProps={{\n          variant: 'body1',\n          className: classes.listItemPrimary,\n        }}\n        secondary={\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            Triggered from {changeEvent.source} {changedAt}.\n          </Typography>\n        }\n      />\n      <ListItemSecondaryAction>\n        {externalLinkElem}\n        {changeEvent.html_url === undefined ? null : (\n          <Tooltip title=\"View in PagerDuty\" placement=\"top\">\n            <IconButton\n              component={Link}\n              to={changeEvent.html_url}\n              color=\"primary\"\n            >\n              <OpenInBrowserIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport EmptyStateImage from '../../assets/emptystate.svg';\n\nexport const ChangeEventEmptyState = () => {\n  return (\n    <Grid container justify=\"center\" direction=\"column\" alignItems=\"center\">\n      <Grid item xs={12}>\n        <Typography variant=\"h5\">No change events to display yet.</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <img\n          src={EmptyStateImage}\n          alt=\"EmptyState\"\n          data-testid=\"emptyStateImg\"\n        />\n      </Grid>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { List, ListSubheader } from '@material-ui/core';\nimport { ChangeEventListItem } from './ChangeEventListItem';\nimport { ChangeEventEmptyState } from './ChangeEventEmptyState';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { pagerDutyApiRef } from '../../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Progress } from '@backstage/core-components';\nimport { Alert } from '@material-ui/lab';\n\ntype Props = {\n  serviceId: string;\n  refreshEvents: boolean;\n};\n\nexport const ChangeEvents = ({ serviceId, refreshEvents }: Props) => {\n  const api = useApi(pagerDutyApiRef);\n\n  const [{ value: changeEvents, loading, error }, getChangeEvents] = useAsyncFn(\n    async () => await api.getChangeEventsByServiceId(serviceId),\n  );\n\n  useEffect(() => {\n    getChangeEvents();\n  }, [refreshEvents, getChangeEvents]);\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  if (!changeEvents?.length) {\n    return <ChangeEventEmptyState />;\n  }\n\n  return (\n    <List dense subheader={<ListSubheader>CHANGE EVENTS</ListSubheader>}>\n      {changeEvents!.map((changeEvent, index) => (\n        <ChangeEventListItem\n          key={changeEvent.id + index}\n          changeEvent={changeEvent}\n        />\n      ))}\n    </List>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState, useCallback } from 'react';\nimport { Entity } from '@backstage/catalog-model';\nimport { Card, CardHeader, Divider, CardContent } from '@material-ui/core';\nimport { Incidents } from '../Incident';\nimport { EscalationPolicy } from '../Escalation';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Alert } from '@material-ui/lab';\nimport { pagerDutyApiRef, UnauthorizedError } from '../../api';\nimport AlarmAddIcon from '@material-ui/icons/AlarmAdd';\nimport { MissingTokenError } from '../Errors/MissingTokenError';\nimport WebIcon from '@material-ui/icons/Web';\nimport DateRangeIcon from '@material-ui/icons/DateRange';\nimport { usePagerdutyEntity } from '../../hooks';\nimport { PAGERDUTY_INTEGRATION_KEY } from '../constants';\nimport { TriggerDialog } from '../TriggerDialog';\nimport { ChangeEvents } from '../ChangeEvents';\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport {\n  Progress,\n  HeaderIconLinkRow,\n  IconLinkVerticalProps,\n  TabbedCard,\n  CardTab,\n} from '@backstage/core-components';\n\nexport const isPluginApplicableToEntity = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[PAGERDUTY_INTEGRATION_KEY]);\n\nexport const PagerDutyCard = () => {\n  const { integrationKey } = usePagerdutyEntity();\n  const api = useApi(pagerDutyApiRef);\n  const [refreshIncidents, setRefreshIncidents] = useState<boolean>(false);\n  const [refreshChangeEvents, setRefreshChangeEvents] =\n    useState<boolean>(false);\n  const [dialogShown, setDialogShown] = useState<boolean>(false);\n\n  const showDialog = useCallback(() => {\n    setDialogShown(true);\n  }, [setDialogShown]);\n  const hideDialog = useCallback(() => {\n    setDialogShown(false);\n  }, [setDialogShown]);\n\n  const handleRefresh = useCallback(() => {\n    setRefreshIncidents(x => !x);\n    setRefreshChangeEvents(x => !x);\n  }, []);\n\n  const {\n    value: service,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const services = await api.getServiceByIntegrationKey(\n      integrationKey as string,\n    );\n\n    return {\n      id: services[0].id,\n      name: services[0].name,\n      url: services[0].html_url,\n      policyId: services[0].escalation_policy.id,\n      policyLink: services[0].escalation_policy.html_url,\n    };\n  });\n\n  if (error instanceof UnauthorizedError) {\n    return <MissingTokenError />;\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching information. {error.message}\n      </Alert>\n    );\n  }\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  const serviceLink: IconLinkVerticalProps = {\n    label: 'Service Directory',\n    href: service!.url,\n    icon: <WebIcon />,\n  };\n\n  const triggerLink: IconLinkVerticalProps = {\n    label: 'Create Incident',\n    onClick: showDialog,\n    icon: <AlarmAddIcon />,\n    color: 'secondary',\n  };\n\n  const escalationPolicyLink: IconLinkVerticalProps = {\n    label: 'Escalation Policy',\n    href: service!.policyLink,\n    icon: <DateRangeIcon />,\n  };\n\n  return (\n    <>\n      <Card data-testid=\"pagerduty-card\">\n        <CardHeader\n          title=\"PagerDuty\"\n          subheader={\n            <HeaderIconLinkRow\n              links={[serviceLink, triggerLink, escalationPolicyLink]}\n            />\n          }\n        />\n        <Divider />\n        <CardContent>\n          <TabbedCard>\n            <CardTab label=\"Incidents\">\n              <Incidents\n                serviceId={service!.id}\n                refreshIncidents={refreshIncidents}\n              />\n            </CardTab>\n            <CardTab label=\"Change Events\">\n              <ChangeEvents\n                serviceId={service!.id}\n                refreshEvents={refreshChangeEvents}\n              />\n            </CardTab>\n          </TabbedCard>\n          <EscalationPolicy policyId={service!.policyId} />\n        </CardContent>\n      </Card>\n      <TriggerDialog\n        data-testid=\"trigger-dialog\"\n        showDialog={dialogShown}\n        handleDialog={hideDialog}\n        onIncidentCreated={handleRefresh}\n      />\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useCallback, ReactNode, useState } from 'react';\nimport { makeStyles, Button } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\n\nimport { usePagerdutyEntity } from '../../hooks';\nimport { TriggerDialog } from '../TriggerDialog';\n\nexport type TriggerButtonProps = {\n  children?: ReactNode;\n};\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  buttonStyle: {\n    backgroundColor: theme.palette.error.main,\n    color: theme.palette.error.contrastText,\n    '&:hover': {\n      backgroundColor: theme.palette.error.dark,\n    },\n  },\n}));\n\nexport function TriggerButton(props: TriggerButtonProps) {\n  const { buttonStyle } = useStyles();\n  const { integrationKey } = usePagerdutyEntity();\n  const [dialogShown, setDialogShown] = useState<boolean>(false);\n\n  const showDialog = useCallback(() => {\n    setDialogShown(true);\n  }, [setDialogShown]);\n  const hideDialog = useCallback(() => {\n    setDialogShown(false);\n  }, [setDialogShown]);\n\n  const disabled = !integrationKey;\n  return (\n    <>\n      <Button\n        onClick={showDialog}\n        variant=\"contained\"\n        className={disabled ? '' : buttonStyle}\n        disabled={disabled}\n      >\n        {integrationKey\n          ? props.children ?? 'Create Incident'\n          : 'Missing integration key'}\n      </Button>\n      {integrationKey && (\n        <TriggerDialog showDialog={dialogShown} handleDialog={hideDialog} />\n      )}\n    </>\n  );\n}\n"],"names":["useStyles","Link"],"mappings":"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"}