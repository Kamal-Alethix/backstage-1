{"version":3,"file":"index-823b7123.esm.js","sources":["../../src/api/bitriseApi.client.ts","../../src/plugin.ts","../../src/extensions.ts","../../src/hooks/useBitriseBuildWorkflows.ts","../../src/hooks/useBitriseBuilds.ts","../../src/api/bitriseApi.model.ts","../../src/components/useBitriseArtifactDetails.ts","../../src/components/BitriseDownloadArtifactComponent/BitriseDownloadArtifactComponent.tsx","../../src/components/useBitriseArtifacts.ts","../../src/components/BitriseArtifactsComponent/BitriseArtifactsComponent.tsx","../../src/components/BitriseBuildDetailsDialog/BitriseBuildDetailsDialog.tsx","../../src/components/BitriseBuildsTableComponent/BitriseBuildsTableComponent.tsx","../../src/components/Select/Select.tsx","../../src/components/BitriseBuildsComponent/BitriseBuildsComponent.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BitriseApi } from './bitriseApi';\nimport {\n  BitriseBuildResponseItem,\n  BitriseApp,\n  BitriseBuildArtifact,\n  BitriseBuildArtifactDetails,\n  BitriseQueryParams,\n  BitriseBuildListResponse,\n  BitriseBuildResult,\n} from './bitriseApi.model';\nimport qs from 'qs';\nimport { DateTime, Interval } from 'luxon';\nimport { pickBy, identity } from 'lodash';\nimport { DiscoveryApi } from '@backstage/core-plugin-api';\n\nexport class BitriseClientApi implements BitriseApi {\n  constructor(private readonly discoveryApi: DiscoveryApi) {}\n\n  async getArtifactDetails(\n    appSlug: string,\n    buildSlug: string,\n    artifactSlug: string,\n  ): Promise<BitriseBuildArtifactDetails | undefined> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('proxy');\n    const artifactResponse = await fetch(\n      `${baseUrl}/bitrise/apps/${appSlug}/builds/${buildSlug}/artifacts/${artifactSlug}`,\n    );\n\n    const data = await artifactResponse.json();\n\n    return data.data;\n  }\n\n  async getBuildArtifacts(\n    appSlug: string,\n    buildSlug: string,\n  ): Promise<BitriseBuildArtifact[]> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('proxy');\n    const response = await fetch(\n      `${baseUrl}/bitrise/apps/${appSlug}/builds/${buildSlug}/artifacts`,\n    );\n\n    const data = await response.json();\n\n    return data.data;\n  }\n\n  async getAppsPaginated(from: string): Promise<BitriseApp[]> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('proxy');\n    const appsResponse = await fetch(`${baseUrl}/bitrise/apps?next=${from}`);\n\n    const appsData = await appsResponse.json();\n\n    if (appsData.paging?.next) {\n      return appsData.data.concat(\n        await this.getAppsPaginated(appsData.paging.next),\n      );\n    }\n\n    return appsData.data;\n  }\n\n  async getApps(): Promise<BitriseApp[]> {\n    return await this.getAppsPaginated('');\n  }\n\n  async getApp(appName: string): Promise<BitriseApp | undefined> {\n    const apps = await this.getApps();\n\n    return apps.find(app => app.title === appName);\n  }\n\n  async getBuildWorkflows(appSlug: string): Promise<string[]> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('proxy');\n    const response = await fetch(\n      `${baseUrl}/bitrise/apps/${appSlug}/build-workflows`,\n    );\n    const data = await response.json();\n    return data.data;\n  }\n\n  async getBuilds(\n    appSlug: string,\n    params?: BitriseQueryParams,\n  ): Promise<BitriseBuildListResponse> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('proxy');\n    let url = `${baseUrl}/bitrise/apps/${appSlug}/builds`;\n\n    if (params) {\n      url = `${url}?${qs.stringify(pickBy(params, identity))}`;\n    }\n\n    const response = await fetch(url);\n    const data = await response.json();\n    const builds: BitriseBuildResponseItem[] = data.data;\n\n    return {\n      data: builds.map(\n        (build: BitriseBuildResponseItem): BitriseBuildResult => {\n          const duration = String(\n            Math.round(\n              Interval.fromDateTimes(\n                DateTime.fromISO(build.started_on_worker_at),\n                DateTime.fromISO(build.finished_at),\n              ).length('minutes'),\n            ),\n          );\n\n          return {\n            id: build.build_number,\n            source: build.commit_view_url,\n            status: build.status,\n            statusText: build.status_text,\n            buildSlug: build.slug,\n            message: `${build.branch}`,\n            workflow: build.triggered_workflow,\n            commitHash: `${build.commit_hash}`,\n            triggerTime: build.triggered_at,\n            duration: `${duration} minutes`,\n            appSlug,\n          };\n        },\n      ),\n      paging: data.paging,\n    };\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BitriseClientApi } from './api/bitriseApi.client';\n\nimport { BitriseApi } from './api/bitriseApi';\nimport {\n  discoveryApiRef,\n  createApiRef,\n  createApiFactory,\n  createPlugin,\n} from '@backstage/core-plugin-api';\n\nexport const bitriseApiRef = createApiRef<BitriseApi>({\n  id: 'plugin.bitrise.service',\n});\n\nexport const bitrisePlugin = createPlugin({\n  id: 'bitrise',\n  apis: [\n    createApiFactory({\n      api: bitriseApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => {\n        return new BitriseClientApi(discoveryApi);\n      },\n    }),\n  ],\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { bitrisePlugin } from './plugin';\nimport { createComponentExtension } from '@backstage/core-plugin-api';\n\nexport const EntityBitriseContent = bitrisePlugin.provide(\n  createComponentExtension({\n    name: 'EntityBitriseContent',\n    component: {\n      lazy: () =>\n        import('./components/BitriseBuildsComponent').then(\n          m => m.BitriseBuildsComponent,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync, { AsyncState } from 'react-use/lib/useAsync';\nimport { bitriseApiRef } from '../plugin';\nimport { BitriseApp } from '../api/bitriseApi.model';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const useBitriseBuildWorkflows = (\n  appName: string,\n): AsyncState<string[]> => {\n  const bitriseApi = useApi(bitriseApiRef);\n\n  const app = useAsync(\n    async (): Promise<BitriseApp | undefined> => bitriseApi.getApp(appName),\n    [appName],\n  );\n\n  const workflows = useAsync(async (): Promise<string[]> => {\n    if (!app.value?.slug) {\n      return [];\n    }\n\n    return bitriseApi.getBuildWorkflows(app.value.slug);\n  }, [app.value?.slug, bitriseApi]);\n\n  return {\n    loading: app.loading || workflows.loading,\n    error: app.error || workflows.error,\n    value: workflows.value,\n  } as AsyncState<string[]>;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync, { AsyncState } from 'react-use/lib/useAsync';\nimport {\n  BitriseApp,\n  BitriseBuildListResponse,\n  BitriseQueryParams,\n} from '../api/bitriseApi.model';\nimport { bitriseApiRef } from '../plugin';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const useBitriseBuilds = (\n  appName: string,\n  params: BitriseQueryParams,\n): AsyncState<BitriseBuildListResponse> => {\n  const bitriseApi = useApi(bitriseApiRef);\n\n  const app = useAsync(\n    async (): Promise<BitriseApp | undefined> => bitriseApi.getApp(appName),\n    [appName],\n  );\n\n  const builds = useAsync(async (): Promise<BitriseBuildListResponse> => {\n    if (!app.value?.slug) {\n      return { data: [] };\n    }\n\n    return bitriseApi.getBuilds(app.value.slug, params);\n  }, [\n    app.value?.slug,\n    bitriseApi,\n    params.workflow,\n    params.branch,\n    params.limit,\n    params.next,\n  ]);\n\n  return {\n    loading: app.loading || builds.loading,\n    error: app.error || builds.error,\n    value: builds.value,\n  } as AsyncState<BitriseBuildListResponse>;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type BitriseApp = {\n  title: string;\n  slug: string;\n};\n\nexport type BitriseBuildArtifact = {\n  slug: string;\n  title: string;\n  artifact_type: string;\n};\n\nexport type BitriseBuildArtifactDetails = {\n  slug: string;\n  title: string;\n  artifact_type: string;\n  public_install_page_url: string;\n  expiring_download_url: string;\n};\n\nexport interface BitriseBuildResponseItem {\n  abort_reason: string;\n  branch: string;\n  build_number: number;\n  commit_hash: string;\n  commit_message: string;\n  commit_view_url: string;\n  environment_prepare_finished_at: string;\n  finished_at: string;\n  is_on_hold: true;\n  machine_type_id: string;\n  original_build_params: string;\n  pull_request_id: number;\n  pull_request_target_branch: string;\n  pull_request_view_url: string;\n  slug: string;\n  stack_identifier: string;\n  started_on_worker_at: string;\n  status: number;\n  status_text: string;\n  tag: string;\n  triggered_at: string;\n  triggered_by: string;\n  triggered_workflow: string;\n}\n\n// not finished (0), successful (1), failed (2), aborted with failure (3), aborted with success (4)\nexport enum BitriseBuildResultStatus {\n  notFinished,\n  successful,\n  failed,\n  abortedWithFailure,\n  abortedWithSuccess,\n}\n\nexport interface BitriseBuildResult {\n  id: number;\n  source: string;\n  status: BitriseBuildResultStatus;\n  statusText: string;\n  buildSlug: string;\n  message: string;\n  workflow: string;\n  commitHash: string;\n  triggerTime: string;\n  duration: string;\n  appSlug: string;\n}\n\nexport interface BitriseQueryParams {\n  workflow: string;\n  branch?: string;\n  limit?: number;\n  next?: string;\n}\n\nexport interface BitriseBuildListResponse {\n  data: BitriseBuildResult[];\n  paging?: BitrisePagingResponse;\n}\n\nexport interface BitrisePagingResponse {\n  /**\n   * Slug of the first build in the next page, `undefined` if there are no more results.\n   */\n  next: string;\n\n  /**\n   * Max number of elements per page (default: 50)\n   */\n  page_item_limit: number;\n\n  total_item_count: number;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync from 'react-use/lib/useAsync';\nimport { BitriseBuildArtifactDetails } from '../api/bitriseApi.model';\nimport { bitriseApiRef } from '../plugin';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const useBitriseArtifactDetails = (\n  appSlug: string,\n  buildSlug: string,\n  artifactSlug: string,\n) => {\n  const bitriseApi = useApi(bitriseApiRef);\n\n  return useAsync(\n    (): Promise<BitriseBuildArtifactDetails | undefined> =>\n      bitriseApi.getArtifactDetails(appSlug, buildSlug, artifactSlug),\n    [bitriseApi, appSlug, buildSlug, artifactSlug],\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport { CircularProgress, IconButton, Tooltip } from '@material-ui/core';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { useBitriseArtifactDetails } from '../useBitriseArtifactDetails';\nimport { Alert } from '@material-ui/lab';\n\ntype BitriseDownloadArtifactComponentProps = {\n  appSlug: string;\n  buildSlug: string;\n  artifactSlug: string;\n};\n\nexport const BitriseDownloadArtifactComponent = ({\n  appSlug,\n  buildSlug,\n  artifactSlug,\n}: BitriseDownloadArtifactComponentProps) => {\n  const { value, loading, error } = useBitriseArtifactDetails(\n    appSlug,\n    buildSlug,\n    artifactSlug,\n  );\n\n  if (loading) {\n    return <CircularProgress />;\n  }\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  if (!value?.public_install_page_url && !value?.expiring_download_url) {\n    return <Alert severity=\"warning\">Cannot be installed/downloaded.</Alert>;\n  }\n\n  return (\n    <>\n      {!!value.public_install_page_url && (\n        <Tooltip title=\"Install\">\n          <IconButton\n            href={value.public_install_page_url}\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            <LinkIcon />\n          </IconButton>\n        </Tooltip>\n      )}\n\n      {!!value.expiring_download_url && (\n        <Tooltip title=\"Download\">\n          <IconButton\n            href={value.expiring_download_url}\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            <CloudDownload />\n          </IconButton>\n        </Tooltip>\n      )}\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport useAsync from 'react-use/lib/useAsync';\nimport { BitriseBuildArtifact } from '../api/bitriseApi.model';\nimport { bitriseApiRef } from '../plugin';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const useBitriseArtifacts = (appSlug: string, buildSlug: string) => {\n  const bitriseApi = useApi(bitriseApiRef);\n\n  return useAsync(\n    (): Promise<BitriseBuildArtifact[]> =>\n      bitriseApi.getBuildArtifacts(appSlug, buildSlug),\n    [bitriseApi, appSlug, buildSlug],\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BitriseBuildResult } from '../../api/bitriseApi.model';\nimport { Alert } from '@material-ui/lab';\nimport { BitriseDownloadArtifactComponent } from '../BitriseDownloadArtifactComponent';\nimport { useBitriseArtifacts } from '../useBitriseArtifacts';\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n} from '@material-ui/core';\nimport { Progress } from '@backstage/core-components';\n\ntype BitriseArtifactsComponentComponentProps = {\n  build: BitriseBuildResult;\n};\n\nexport const BitriseArtifactsComponent = (\n  props: BitriseArtifactsComponentComponentProps,\n) => {\n  const { value, loading, error } = useBitriseArtifacts(\n    props.build.appSlug,\n    props.build.buildSlug,\n  );\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  } else if (!value || !value.length) {\n    return <Alert severity=\"info\">No artifacts</Alert>;\n  }\n\n  return (\n    <List>\n      {value.map(row => (\n        <ListItem key={row.slug}>\n          <ListItemText primary={row.title} secondary={row.artifact_type} />\n          <ListItemSecondaryAction>\n            <BitriseDownloadArtifactComponent\n              appSlug={props.build.appSlug}\n              buildSlug={props.build.buildSlug}\n              artifactSlug={row.slug}\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n      ))}\n    </List>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { BitriseBuildResult } from '../../api/bitriseApi.model';\nimport { BitriseArtifactsComponent } from '../BitriseArtifactsComponent';\nimport {\n  Chip,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  makeStyles,\n} from '@material-ui/core';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport CloseIcon from '@material-ui/icons/Close';\n\ntype BitriseBuildDetailsDialogProps = {\n  build: BitriseBuildResult;\n};\n\nconst useStyles = makeStyles({\n  dialogContent: {\n    paddingBottom: 16,\n  },\n});\n\nexport const BitriseBuildDetailsDialog = ({\n  build,\n}: BitriseBuildDetailsDialogProps) => {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <IconButton data-testid=\"btn\" onClick={handleOpen}>\n        <CloudDownload />\n      </IconButton>\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">\n          {`Download artifacts for build #${build.id}?`}\n\n          <IconButton aria-label=\"close\" edge=\"end\" onClick={handleClose}>\n            <CloseIcon />\n          </IconButton>\n\n          <br />\n\n          <Chip size=\"small\" label={build.message} />\n        </DialogTitle>\n        <DialogContent className={classes.dialogContent}>\n          <BitriseArtifactsComponent build={build} />\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { Button } from '@material-ui/core';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport { useBitriseBuilds } from '../../hooks/useBitriseBuilds';\nimport {\n  BitriseBuildResult,\n  BitriseBuildResultStatus,\n} from '../../api/bitriseApi.model';\nimport { BitriseBuildDetailsDialog } from '../BitriseBuildDetailsDialog';\nimport { DateTime } from 'luxon';\nimport {\n  Table,\n  TableColumn,\n  Link,\n  SubvalueCell,\n  StatusOK,\n  StatusWarning,\n  StatusAborted,\n  StatusError,\n  StatusRunning,\n} from '@backstage/core-components';\n\ntype BitriseBuildsProps = {\n  appName: string;\n  workflow?: string;\n  error?: Error | undefined;\n};\n\nconst bitriseBaseUrl = `https://app.bitrise.io`;\n\nconst createBitriseBuildUrl = (buildSlug: string) =>\n  `${bitriseBaseUrl}/build/${buildSlug}#?tab=log`;\n\nconst renderBranch = (build: BitriseBuildResult): React.ReactNode => {\n  return <SubvalueCell value={build.message} subvalue={build.workflow} />;\n};\n\nconst renderStatus = (build: BitriseBuildResult): React.ReactNode => {\n  switch (build.status) {\n    case BitriseBuildResultStatus.successful: {\n      return <StatusOK>{build.statusText}</StatusOK>;\n    }\n    case BitriseBuildResultStatus.failed: {\n      return <StatusError>{build.statusText}</StatusError>;\n    }\n    case BitriseBuildResultStatus.notFinished: {\n      return <StatusRunning>{build.statusText}</StatusRunning>;\n    }\n    case BitriseBuildResultStatus.abortedWithSuccess:\n    case BitriseBuildResultStatus.abortedWithFailure: {\n      return <StatusAborted>{build.statusText}</StatusAborted>;\n    }\n    default: {\n      return <StatusWarning>{build.statusText}</StatusWarning>;\n    }\n  }\n};\n\nconst renderSource = (build: BitriseBuildResult): React.ReactNode => {\n  return build.source ? (\n    <Button\n      href={build.source}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      startIcon={<GitHubIcon />}\n    >\n      {build.commitHash.substr(0, 6)}\n    </Button>\n  ) : null;\n};\n\nconst renderId = (build: BitriseBuildResult): React.ReactNode => {\n  return (\n    <Link\n      to={`${createBitriseBuildUrl(build.buildSlug)}`}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n    >\n      {build.id}\n    </Link>\n  );\n};\n\nconst renderDownload = (build: BitriseBuildResult): React.ReactNode => {\n  return (\n    <>\n      {build.status === BitriseBuildResultStatus.successful && (\n        <BitriseBuildDetailsDialog build={build} />\n      )}\n    </>\n  );\n};\n\nconst renderTriggerTime = (build: BitriseBuildResult): React.ReactNode => {\n  return (\n    <SubvalueCell\n      value={DateTime.fromISO(build.triggerTime).toLocaleString(\n        DateTime.DATETIME_MED,\n      )}\n      subvalue={\n        build.status !== BitriseBuildResultStatus.notFinished && build.duration\n      }\n    />\n  );\n};\n\nconst renderErrors = (errors: (Error | undefined)[]) => {\n  return errors.map(err =>\n    err ? <Alert severity=\"error\">{err.message}</Alert> : null,\n  );\n};\n\nexport const BitriseBuildsTable = ({\n  appName,\n  workflow,\n  error,\n}: BitriseBuildsProps) => {\n  let selectedWorkflow = '';\n  const [rowsPerPage, setRowsPerPage] = React.useState<number>(20);\n  const [{ page, next }, setPage] = React.useState<{\n    page: number;\n    next?: string;\n  }>({ page: 0 });\n\n  const [selectedSearchTerm, setSelectedSearchTerm] = useState<string>('');\n  if (workflow) {\n    selectedWorkflow = workflow;\n  }\n\n  const builds = useBitriseBuilds(appName, {\n    workflow: selectedWorkflow.trim(),\n    branch: selectedSearchTerm.trim(),\n    limit: rowsPerPage,\n    next,\n  });\n\n  const columns: TableColumn<BitriseBuildResult>[] = [\n    {\n      title: 'ID',\n      field: 'id',\n      highlight: true,\n      render: build => renderId(build),\n    },\n    {\n      title: 'Branch',\n      customFilterAndSearch: (query, row: any) =>\n        `${row.message} ${row.workflow}`\n          .toLocaleUpperCase('en-US')\n          .includes(query.toLocaleUpperCase('en-US')),\n      field: 'message',\n      width: 'auto',\n      highlight: true,\n      render: build => renderBranch(build),\n    },\n    {\n      title: 'Status',\n      field: 'status',\n      render: build => renderStatus(build),\n    },\n    {\n      title: 'Triggered',\n      field: 'triggered',\n      render: build => renderTriggerTime(build),\n    },\n    {\n      title: 'Source',\n      field: 'source',\n      render: build => renderSource(build),\n    },\n    {\n      title: 'Download',\n      field: 'download',\n      render: build => renderDownload(build),\n    },\n  ];\n\n  const handleChangePage = (newPage: number, nextId: string | undefined) => {\n    if (nextId) {\n      setPage({ page: newPage, next: nextId });\n    }\n  };\n\n  const handleChangeRowsPerPage = (amount: number) => {\n    setRowsPerPage(amount);\n    setPage({ page: 0, next: undefined });\n  };\n\n  return (\n    <>\n      {renderErrors([builds.error, error])}\n      {!builds.error && (\n        <Table\n          isLoading={builds.loading}\n          options={{\n            search: true,\n            searchAutoFocus: true,\n            debounceInterval: 800,\n            paging: true,\n            showFirstLastPageButtons: false,\n            pageSize: rowsPerPage,\n            pageSizeOptions: [5, 10, 20, 50],\n          }}\n          totalCount={builds.value?.paging?.total_item_count || 0}\n          page={page}\n          onPageChange={pageIndex => {\n            handleChangePage(pageIndex, builds.value?.paging?.next);\n          }}\n          onRowsPerPageChange={handleChangeRowsPerPage}\n          columns={columns}\n          data={builds.value?.data || []}\n          onSearchChange={(searchTerm: string) =>\n            setSelectedSearchTerm(searchTerm)\n          }\n        />\n      )}\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport React from 'react';\n\nexport type Item = {\n  label: string;\n  value: string | number;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120,\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\ntype SelectComponentProps = {\n  value: string;\n  items: Item[];\n  label: string;\n  onChange: (value: string) => void;\n};\n\nconst renderItems = (items: Item[]) => {\n  return items.map(item => {\n    return (\n      <MenuItem value={item.value} key={item.label}>\n        {item.label}\n      </MenuItem>\n    );\n  });\n};\n\nexport const SelectComponent = ({\n  value,\n  items,\n  label,\n  onChange,\n}: SelectComponentProps) => {\n  const classes = useStyles();\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const val = event.target.value as string;\n    onChange(val);\n  };\n\n  return (\n    <FormControl\n      variant=\"outlined\"\n      className={classes.formControl}\n      disabled={items.length === 0}\n    >\n      <InputLabel>{label}</InputLabel>\n      <Select label={label} value={value} onChange={handleChange}>\n        {renderItems(items)}\n      </Select>\n    </FormControl>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React, { useState } from 'react';\nimport { useBitriseBuildWorkflows } from '../../hooks/useBitriseBuildWorkflows';\nimport { AsyncState } from 'react-use/lib/useAsync';\nimport { BitriseBuildsTable } from '../BitriseBuildsTableComponent';\nimport { Item, Select } from '../Select';\nimport {\n  Content,\n  ContentHeader,\n  MissingAnnotationEmptyState,\n  Page,\n} from '@backstage/core-components';\n\nexport type Props = {\n  entity: Entity;\n};\n\nexport const BITRISE_APP_ANNOTATION = 'bitrise.io/app';\n\nexport const isBitriseAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[BITRISE_APP_ANNOTATION]);\n\nexport const BitriseBuildsComponent = () => {\n  const { entity } = useEntity();\n  const appName = entity.metadata.annotations?.[\n    BITRISE_APP_ANNOTATION\n  ] as string;\n  const [selectedWorkflow, setSelectedWorkflow] = useState<string>(' ');\n  const workflows = useBitriseBuildWorkflows(appName);\n\n  const onSelectedWorkflowChanged = (workflow: any) => {\n    setSelectedWorkflow(workflow);\n  };\n\n  const getSelectionItems = (items: AsyncState<string[]>): Item[] => {\n    const noWorkflowSpecified: Item = { label: 'All workflows', value: ' ' };\n    return items.value\n      ? [\n          noWorkflowSpecified,\n          ...items.value.map(item => {\n            return { label: item, value: item };\n          }),\n        ]\n      : [];\n  };\n\n  return (\n    <>\n      {!appName ? (\n        <MissingAnnotationEmptyState annotation={BITRISE_APP_ANNOTATION} />\n      ) : (\n        <Page themeId=\"tool\">\n          <Content noPadding>\n            <ContentHeader title={appName}>\n              <Select\n                value={selectedWorkflow}\n                onChange={workflow => onSelectedWorkflowChanged(workflow)}\n                label=\"Workflow\"\n                items={getSelectionItems(workflows)}\n              />\n            </ContentHeader>\n            <BitriseBuildsTable\n              appName={appName}\n              workflow={selectedWorkflow}\n              error={workflows.error}\n            />\n          </Content>\n        </Page>\n      )}\n    </>\n  );\n};\n"],"names":["useStyles","makeStyles","Select"],"mappings":"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"}