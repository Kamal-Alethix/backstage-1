{"version":3,"file":"index-b87461ed.esm.js","sources":["../../src/routes.ts","../../src/api/AirbrakeApi.ts","../../src/api/ProductionApi.ts","../../src/plugin.ts","../../src/extensions.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'airbrake',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Groups } from './airbrakeGroups';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport const airbrakeApiRef = createApiRef<AirbrakeApi>({\n  id: 'plugin.airbrake.service',\n});\n\nexport interface AirbrakeApi {\n  fetchGroups(projectId: string): Promise<Groups>;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Groups } from './airbrakeGroups';\nimport { AirbrakeApi } from './AirbrakeApi';\nimport { DiscoveryApi } from '@backstage/core-plugin-api';\n\nexport class ProductionAirbrakeApi implements AirbrakeApi {\n  constructor(private readonly discoveryApi: DiscoveryApi) {}\n\n  async fetchGroups(projectId: string): Promise<Groups> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('airbrake');\n    const apiUrl = `${baseUrl}/api/v4/projects/${projectId}/groups`;\n\n    const response = await fetch(apiUrl);\n\n    if (response.status >= 400 && response.status < 600) {\n      throw new Error('Failed fetching Airbrake groups');\n    }\n\n    return (await response.json()) as Groups;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createApiFactory,\n  createPlugin,\n  discoveryApiRef,\n} from '@backstage/core-plugin-api';\n\nimport { rootRouteRef } from './routes';\nimport { airbrakeApiRef, ProductionAirbrakeApi } from './api';\n\n/**\n * The Airbrake plugin instance\n *\n * @public\n */\nexport const airbrakePlugin = createPlugin({\n  id: 'airbrake',\n  apis: [\n    createApiFactory({\n      api: airbrakeApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new ProductionAirbrakeApi(discoveryApi),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { airbrakePlugin } from './plugin';\nimport { createRoutableExtension } from '@backstage/core-plugin-api';\nimport { rootRouteRef } from './routes';\n\n/**\n * This is the widget that shows up on a component page\n *\n * @public\n */\nexport const EntityAirbrakeContent = airbrakePlugin.provide(\n  createRoutableExtension({\n    name: 'EntityAirbrakeContent',\n    mountPoint: rootRouteRef,\n    component: () =>\n      import('./components/EntityAirbrakeWidget').then(\n        ({ EntityAirbrakeWidget }) => {\n          return () => {\n            const { entity } = useEntity();\n            return <EntityAirbrakeWidget entity={entity} />;\n          };\n        },\n      ),\n  }),\n);\n"],"names":[],"mappings":";;;;AACO,MAAM,YAAY,GAAG,cAAc,CAAC;AAC3C,EAAE,EAAE,EAAE,UAAU;AAChB,CAAC,CAAC;;ACFU,MAAC,cAAc,GAAG,YAAY,CAAC;AAC3C,EAAE,EAAE,EAAE,yBAAyB;AAC/B,CAAC;;ACHM,MAAM,qBAAqB,CAAC;AACnC,EAAE,WAAW,CAAC,YAAY,EAAE;AAC5B,IAAI,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;AACrC,GAAG;AACH,EAAE,MAAM,WAAW,CAAC,SAAS,EAAE;AAC/B,IAAI,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AACnE,IAAI,MAAM,MAAM,GAAG,CAAC,EAAE,OAAO,CAAC,iBAAiB,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC;AACpE,IAAI,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;AACzC,IAAI,IAAI,QAAQ,CAAC,MAAM,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAM,GAAG,GAAG,EAAE;AACzD,MAAM,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;AACzD,KAAK;AACL,IAAI,OAAO,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;AACjC,GAAG;AACH;;ACNY,MAAC,cAAc,GAAG,YAAY,CAAC;AAC3C,EAAE,EAAE,EAAE,UAAU;AAChB,EAAE,IAAI,EAAE;AACR,IAAI,gBAAgB,CAAC;AACrB,MAAM,GAAG,EAAE,cAAc;AACzB,MAAM,IAAI,EAAE,EAAE,YAAY,EAAE,eAAe,EAAE;AAC7C,MAAM,OAAO,EAAE,CAAC,EAAE,YAAY,EAAE,KAAK,IAAI,qBAAqB,CAAC,YAAY,CAAC;AAC5E,KAAK,CAAC;AACN,GAAG;AACH,EAAE,MAAM,EAAE;AACV,IAAI,IAAI,EAAE,YAAY;AACtB,GAAG;AACH,CAAC;;ACdW,MAAC,qBAAqB,GAAG,cAAc,CAAC,OAAO,CAAC,uBAAuB,CAAC;AACpF,EAAE,IAAI,EAAE,uBAAuB;AAC/B,EAAE,UAAU,EAAE,YAAY;AAC1B,EAAE,SAAS,EAAE,MAAM,OAAO,yBAAmC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,oBAAoB,EAAE,KAAK;AAClG,IAAI,OAAO,MAAM;AACjB,MAAM,MAAM,EAAE,MAAM,EAAE,GAAG,SAAS,EAAE,CAAC;AACrC,MAAM,uBAAuB,KAAK,CAAC,aAAa,CAAC,oBAAoB,EAAE;AACvE,QAAQ,MAAM;AACd,OAAO,CAAC,CAAC;AACT,KAAK,CAAC;AACN,GAAG,CAAC;AACJ,CAAC,CAAC;;;;"}