{"version":3,"file":"index.esm.js","sources":["../src/api/CatalogImportApi.ts","../src/api/GitHub.ts","../src/components/helpers.ts","../src/api/CatalogImportClient.ts","../src/plugin.ts","../src/hooks/useCatalogFilename.ts","../src/components/ImportInfoCard/ImportInfoCard.tsx","../src/components/useImportState.ts","../src/components/Buttons/index.tsx","../src/components/EntityListComponent/EntityListComponent.tsx","../src/components/StepFinishImportLocation/StepFinishImportLocation.tsx","../src/components/StepInitAnalyzeUrl/StepInitAnalyzeUrl.tsx","../src/components/StepPrepareCreatePullRequest/AutocompleteTextField.tsx","../src/components/StepPrepareCreatePullRequest/PreparePullRequestForm.tsx","../src/components/StepPrepareCreatePullRequest/PreviewCatalogInfoComponent.tsx","../src/components/StepPrepareCreatePullRequest/PreviewPullRequestComponent.tsx","../src/components/StepPrepareCreatePullRequest/StepPrepareCreatePullRequest.tsx","../src/components/StepPrepareSelectLocations/StepPrepareSelectLocations.tsx","../src/components/StepReviewLocation/StepReviewLocation.tsx","../src/components/ImportStepper/defaults.tsx","../src/components/ImportStepper/ImportStepper.tsx","../src/components/DefaultImportPage/DefaultImportPage.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport { createApiRef } from '@backstage/core-plugin-api';\nimport { PartialEntity } from '../types';\n\n/**\n * Utility API reference for the {@link CatalogImportApi}.\n *\n * @public\n */\nexport const catalogImportApiRef = createApiRef<CatalogImportApi>({\n  id: 'plugin.catalog-import.service',\n});\n\n/**\n * Result of the analysis.\n *\n * @public\n */\nexport type AnalyzeResult =\n  | {\n      type: 'locations';\n      locations: Array<{\n        target: string;\n        exists?: boolean;\n        entities: CompoundEntityRef[];\n      }>;\n    }\n  | {\n      type: 'repository';\n      url: string;\n      integrationType: string;\n      generatedEntities: PartialEntity[];\n    };\n\n/**\n * API for driving catalog imports.\n *\n * @public\n */\nexport interface CatalogImportApi {\n  analyzeUrl(url: string): Promise<AnalyzeResult>;\n\n  preparePullRequest?(): Promise<{\n    title: string;\n    body: string;\n  }>;\n\n  submitPullRequest(options: {\n    repositoryUrl: string;\n    fileContent: string;\n    title: string;\n    body: string;\n  }): Promise<{ link: string; location: string }>;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ScmIntegrationRegistry } from '@backstage/integration';\nimport parseGitUrl from 'git-url-parse';\n\nexport const getGithubIntegrationConfig = (\n  scmIntegrationsApi: ScmIntegrationRegistry,\n  location: string,\n) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return undefined;\n  }\n\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config,\n  };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Config } from '@backstage/config';\nimport { UseFormRegisterReturn } from 'react-hook-form';\n\n/**\n * A helper that converts the result of a render('name', opts) to make it compatible with material-ui.\n *\n * See also https://github.com/react-hook-form/react-hook-form/issues/4629#issuecomment-815840872\n * TODO: remove when updating to material-ui v5 (https://github.com/mui-org/material-ui/pull/23174)\n *\n * @param renderResult - the result of a render('name', opts)\n */\nexport function asInputRef(renderResult: UseFormRegisterReturn) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest,\n  };\n}\n\nexport function getCatalogFilename(config: Config): string {\n  return (\n    config.getOptionalString('catalog.import.entityFilename') ??\n    'catalog-info.yaml'\n  );\n}\n\nexport function getBranchName(config: Config): string {\n  return (\n    config.getOptionalString('catalog.import.pullRequestBranchName') ??\n    'backstage-integration'\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CatalogApi } from '@backstage/catalog-client';\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport {\n  ConfigApi,\n  DiscoveryApi,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\nimport {\n  GitHubIntegrationConfig,\n  ScmIntegrationRegistry,\n} from '@backstage/integration';\nimport { ScmAuthApi } from '@backstage/integration-react';\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\nimport { PartialEntity } from '../types';\nimport { AnalyzeResult, CatalogImportApi } from './CatalogImportApi';\nimport { getGithubIntegrationConfig } from './GitHub';\nimport { trimEnd } from 'lodash';\nimport { getBranchName, getCatalogFilename } from '../components/helpers';\n\n/**\n * The default implementation of the {@link CatalogImportApi}.\n *\n * @public\n */\nexport class CatalogImportClient implements CatalogImportApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly identityApi: IdentityApi;\n  private readonly scmAuthApi: ScmAuthApi;\n  private readonly scmIntegrationsApi: ScmIntegrationRegistry;\n  private readonly catalogApi: CatalogApi;\n  private readonly configApi: ConfigApi;\n\n  constructor(options: {\n    discoveryApi: DiscoveryApi;\n    scmAuthApi: ScmAuthApi;\n    identityApi: IdentityApi;\n    scmIntegrationsApi: ScmIntegrationRegistry;\n    catalogApi: CatalogApi;\n    configApi: ConfigApi;\n  }) {\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n\n  async analyzeUrl(url: string): Promise<AnalyzeResult> {\n    if (\n      new URL(url).pathname.match(/\\.ya?ml$/) ||\n      new URL(url).searchParams.get('path')?.match(/.ya?ml$/)\n    ) {\n      const location = await this.catalogApi.addLocation({\n        type: 'url',\n        target: url,\n        dryRun: true,\n      });\n\n      return {\n        type: 'locations',\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map(e => ({\n              kind: e.kind,\n              namespace: e.metadata.namespace ?? 'default',\n              name: e.metadata.name,\n            })),\n          },\n        ],\n      };\n    }\n\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n\n      if (other) {\n        throw new Error(\n          `The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`,\n        );\n      }\n      throw new Error(\n        `This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`,\n      );\n    }\n\n    // TODO: this could be part of the analyze-location endpoint\n    const locations = await this.checkGitHubForExistingCatalogInfo({\n      ...ghConfig,\n      url,\n    });\n\n    if (locations.length > 0) {\n      return {\n        type: 'locations',\n        locations,\n      };\n    }\n\n    return {\n      type: 'repository',\n      integrationType: 'github',\n      url: url,\n      generatedEntities: await this.generateEntityDefinitions({\n        repo: url,\n      }),\n    };\n  }\n\n  async preparePullRequest(): Promise<{\n    title: string;\n    body: string;\n  }> {\n    const appTitle =\n      this.configApi.getOptionalString('app.title') ?? 'Backstage';\n    const appBaseUrl = this.configApi.getString('app.baseUrl');\n    const catalogFilename = getCatalogFilename(this.configApi);\n\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** \\\nto this repository so that the component can be added to the \\\n[${appTitle} software catalog](${appBaseUrl}).\\n\\nAfter this pull request is merged, \\\nthe component will become available.\\n\\nFor more information, read an \\\n[overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`,\n    };\n  }\n\n  async submitPullRequest(options: {\n    repositoryUrl: string;\n    fileContent: string;\n    title: string;\n    body: string;\n  }): Promise<{ link: string; location: string }> {\n    const { repositoryUrl, fileContent, title, body } = options;\n\n    const ghConfig = getGithubIntegrationConfig(\n      this.scmIntegrationsApi,\n      repositoryUrl,\n    );\n\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body,\n      });\n    }\n\n    throw new Error('unimplemented!');\n  }\n\n  // TODO: this could be part of the catalog api\n  private async generateEntityDefinitions(options: {\n    repo: string;\n  }): Promise<PartialEntity[]> {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(\n      `${await this.discoveryApi.getBaseUrl('catalog')}/analyze-location`,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token && { Authorization: `Bearer ${token}` }),\n        },\n        method: 'POST',\n        body: JSON.stringify({\n          location: { type: 'url', target: options.repo },\n        }),\n      },\n    ).catch(e => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(\n        `Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`,\n      );\n    }\n\n    const payload = await response.json();\n    return payload.generateEntities.map((x: any) => x.entity);\n  }\n\n  // TODO: this response should better be part of the analyze-locations response and scm-independent / implemented per scm\n  private async checkGitHubForExistingCatalogInfo(options: {\n    url: string;\n    owner: string;\n    repo: string;\n    githubIntegrationConfig: GitHubIntegrationConfig;\n  }): Promise<\n    Array<{\n      target: string;\n      entities: CompoundEntityRef[];\n    }>\n  > {\n    const { url, owner, repo, githubIntegrationConfig } = options;\n\n    const { token } = await this.scmAuthApi.getCredentials({ url });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl,\n    });\n    const catalogFilename = getCatalogFilename(this.configApi);\n    const query = `repo:${owner}/${repo}+filename:${catalogFilename}`;\n\n    const searchResult = await octo.search.code({ q: query }).catch(e => {\n      throw new Error(\n        formatHttpErrorMessage(\n          \"Couldn't search repository for metadata file.\",\n          e,\n        ),\n      );\n    });\n    const exists = searchResult.data.total_count > 0;\n    if (exists) {\n      const repoInformation = await octo.repos.get({ owner, repo }).catch(e => {\n        throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n      });\n      const defaultBranch = repoInformation.data.default_branch;\n\n      return await Promise.all(\n        searchResult.data.items\n          .map(i => `${trimEnd(url, '/')}/blob/${defaultBranch}/${i.path}`)\n          .map(async target => {\n            const result = await this.catalogApi.addLocation({\n              type: 'url',\n              target,\n              dryRun: true,\n            });\n            return {\n              target,\n              exists: result.exists,\n              entities: result.entities.map(e => ({\n                kind: e.kind,\n                namespace: e.metadata.namespace ?? 'default',\n                name: e.metadata.name,\n              })),\n            };\n          }),\n      );\n    }\n\n    return [];\n  }\n\n  // TODO: extract this function and implement for non-github\n  private async submitGitHubPrToRepo(options: {\n    owner: string;\n    repo: string;\n    title: string;\n    body: string;\n    fileContent: string;\n    repositoryUrl: string;\n    githubIntegrationConfig: GitHubIntegrationConfig;\n  }): Promise<{ link: string; location: string }> {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig,\n    } = options;\n\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true,\n      },\n    });\n\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl,\n    });\n\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n\n    const repoData = await octo.repos\n      .get({\n        owner,\n        repo,\n      })\n      .catch(e => {\n        throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n      });\n\n    const parentRef = await octo.git\n      .getRef({\n        owner,\n        repo,\n        ref: `heads/${repoData.data.default_branch}`,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\"Couldn't fetch default branch data\", e),\n        );\n      });\n\n    await octo.git\n      .createRef({\n        owner,\n        repo,\n        ref: `refs/heads/${branchName}`,\n        sha: parentRef.data.object.sha,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\n            `Couldn't create a new branch with name '${branchName}'`,\n            e,\n          ),\n        );\n      });\n\n    await octo.repos\n      .createOrUpdateFileContents({\n        owner,\n        repo,\n        path: fileName,\n        message: title,\n        content: Base64.encode(fileContent),\n        branch: branchName,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\n            `Couldn't create a commit with ${fileName} file added`,\n            e,\n          ),\n        );\n      });\n\n    const pullRequestResponse = await octo.pulls\n      .create({\n        owner,\n        repo,\n        title,\n        head: branchName,\n        body,\n        base: repoData.data.default_branch,\n      })\n      .catch(e => {\n        throw new Error(\n          formatHttpErrorMessage(\n            `Couldn't create a pull request for ${branchName} branch`,\n            e,\n          ),\n        );\n      });\n\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`,\n    };\n  }\n}\n\nfunction formatHttpErrorMessage(\n  message: string,\n  error: { status: number; message: string },\n) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  configApiRef,\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport {\n  scmAuthApiRef,\n  scmIntegrationsApiRef,\n} from '@backstage/integration-react';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { catalogImportApiRef, CatalogImportClient } from './api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'catalog-import',\n});\n\n/**\n * A plugin that helps the user in importing projects and YAML files into the\n * catalog.\n *\n * @public\n */\nexport const catalogImportPlugin = createPlugin({\n  id: 'catalog-import',\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef,\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi,\n      }) =>\n        new CatalogImportClient({\n          discoveryApi,\n          scmAuthApi,\n          scmIntegrationsApi,\n          identityApi,\n          catalogApi,\n          configApi,\n        }),\n    }),\n  ],\n  routes: {\n    importPage: rootRouteRef,\n  },\n});\n\n/**\n * The page for importing projects and YAML files into the catalog.\n *\n * @public\n */\nexport const CatalogImportPage = catalogImportPlugin.provide(\n  createRoutableExtension({\n    name: 'CatalogImportPage',\n    component: () => import('./components/ImportPage').then(m => m.ImportPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { getCatalogFilename } from '../components/helpers';\n\nexport function useCatalogFilename(): string {\n  const config = useApi(configApiRef);\n\n  return getCatalogFilename(config);\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard } from '@backstage/core-components';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Chip, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { catalogImportApiRef } from '../../api';\nimport { useCatalogFilename } from '../../hooks';\n\n/**\n * Props for {@link ImportInfoCard}.\n *\n * @public\n */\nexport interface ImportInfoCardProps {\n  exampleLocationUrl?: string;\n  exampleRepositoryUrl?: string;\n}\n\n/**\n * Shows information about the import process.\n *\n * @public\n */\nexport const ImportInfoCard = (props: ImportInfoCardProps) => {\n  const {\n    exampleLocationUrl = 'https://github.com/backstage/backstage/blob/master/catalog-info.yaml',\n    exampleRepositoryUrl = 'https://github.com/backstage/backstage',\n  } = props;\n\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n  const catalogImportApi = useApi(catalogImportApiRef);\n\n  const integrations = configApi.getConfig('integrations');\n  const hasGithubIntegration = integrations.has('github');\n\n  const catalogFilename = useCatalogFilename();\n\n  return (\n    <InfoCard\n      title=\"Register an existing component\"\n      titleTypographyProps={{ component: 'h3' }}\n      deepLink={{\n        title: 'Learn more about the Software Catalog',\n        link: 'https://backstage.io/docs/features/software-catalog/software-catalog-overview',\n      }}\n    >\n      <Typography variant=\"body2\" paragraph>\n        Enter the URL to your source code repository to add it to {appTitle}.\n      </Typography>\n      <Typography component=\"h4\" variant=\"h6\">\n        Link to an existing entity file\n      </Typography>\n      <Typography variant=\"subtitle2\" color=\"textSecondary\" paragraph>\n        Example: <code>{exampleLocationUrl}</code>\n      </Typography>\n      <Typography variant=\"body2\" paragraph>\n        The wizard analyzes the file, previews the entities, and adds them to\n        the {appTitle} catalog.\n      </Typography>\n      {hasGithubIntegration && (\n        <>\n          <Typography component=\"h4\" variant=\"h6\">\n            Link to a repository{' '}\n            <Chip label=\"GitHub only\" variant=\"outlined\" size=\"small\" />\n          </Typography>\n          <Typography variant=\"subtitle2\" color=\"textSecondary\" paragraph>\n            Example: <code>{exampleRepositoryUrl}</code>\n          </Typography>\n          <Typography variant=\"body2\" paragraph>\n            The wizard discovers all <code>{catalogFilename}</code> files in the\n            repository, previews the entities, and adds them to the {appTitle}{' '}\n            catalog.\n          </Typography>\n          {catalogImportApi.preparePullRequest && (\n            <Typography variant=\"body2\" paragraph>\n              If no entities are found, the wizard will prepare a Pull Request\n              that adds an example <code>{catalogFilename}</code> and prepares\n              the {appTitle} catalog to load all entities as soon as the Pull\n              Request is merged.\n            </Typography>\n          )}\n        </>\n      )}\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity, CompoundEntityRef } from '@backstage/catalog-model';\nimport { useReducer } from 'react';\nimport { AnalyzeResult } from '../api';\n\n/**\n * The configuration of the stepper.\n *\n * @public\n */\nexport type ImportFlows =\n  | 'unknown'\n  | 'single-location'\n  | 'multiple-locations'\n  | 'no-location';\n\n// the available states of the stepper\ntype ImportStateTypes = 'analyze' | 'prepare' | 'review' | 'finish';\n\n/**\n * Result of the prepare state.\n *\n * @public\n */\nexport type PrepareResult =\n  | {\n      type: 'locations';\n      locations: Array<{\n        exists?: boolean;\n        target: string;\n        entities: CompoundEntityRef[];\n      }>;\n    }\n  | {\n      type: 'repository';\n      url: string;\n      integrationType: string;\n      pullRequest: {\n        url: string;\n      };\n      locations: Array<{\n        target: string;\n        entities: CompoundEntityRef[];\n      }>;\n    };\n\n// result of the review result\nexport type ReviewResult =\n  | {\n      type: 'locations';\n      locations: Array<{\n        target: string;\n        entities: Entity[];\n      }>;\n      refreshed: Array<{ target: string }>;\n    }\n  | {\n      type: 'repository';\n      url: string;\n      integrationType: string;\n      pullRequest: {\n        url: string;\n      };\n      locations: Array<{\n        target: string;\n        entities: Entity[];\n      }>;\n    };\n\n// function type for the 'analysis' -> 'prepare'/'review' transition\ntype onAnalysisFn = (\n  flow: ImportFlows,\n  url: string,\n  result: AnalyzeResult,\n  opts?: { prepareResult?: PrepareResult },\n) => void;\n\n// function type for the 'prepare' -> 'review' transition\ntype onPrepareFn = (\n  result: PrepareResult,\n  opts?: { notRepeatable?: boolean },\n) => void;\n\n// function type for the 'review' -> 'finish' transition\ntype onReviewFn = (result: ReviewResult) => void;\n\n// the type interfaces that are available in each state. every state provides\n// already known information and means to go to the next, or the previous step.\ntype State =\n  | {\n      activeState: 'analyze';\n      onAnalysis: onAnalysisFn;\n    }\n  | {\n      activeState: 'prepare';\n      analyzeResult: AnalyzeResult;\n      prepareResult?: PrepareResult;\n      onPrepare: onPrepareFn;\n    }\n  | {\n      activeState: 'review';\n      analyzeResult: AnalyzeResult;\n      prepareResult: PrepareResult;\n      onReview: onReviewFn;\n    }\n  | {\n      activeState: 'finish';\n      analyzeResult: AnalyzeResult;\n      prepareResult: PrepareResult;\n      reviewResult: ReviewResult;\n    };\n\nexport type ImportState = State & {\n  activeFlow: ImportFlows;\n  activeStepNumber: number;\n  analysisUrl?: string;\n\n  onGoBack?: () => void;\n  onReset: () => void;\n};\n\ntype ReducerActions =\n  | { type: 'onAnalysis'; args: Parameters<onAnalysisFn> }\n  | { type: 'onPrepare'; args: Parameters<onPrepareFn> }\n  | { type: 'onReview'; args: Parameters<onReviewFn> }\n  | { type: 'onGoBack' }\n  | { type: 'onReset'; initialUrl?: string };\n\ntype ReducerState = {\n  activeFlow: ImportFlows;\n  activeState: ImportStateTypes;\n  analysisUrl?: string;\n  analyzeResult?: AnalyzeResult;\n  prepareResult?: PrepareResult;\n  reviewResult?: ReviewResult;\n\n  previousStates: ImportStateTypes[];\n};\n\nfunction init(initialUrl?: string): ReducerState {\n  return {\n    activeFlow: 'unknown',\n    activeState: 'analyze',\n    analysisUrl: initialUrl,\n    previousStates: [],\n  };\n}\n\nfunction reducer(state: ReducerState, action: ReducerActions): ReducerState {\n  switch (action.type) {\n    case 'onAnalysis': {\n      if (state.activeState !== 'analyze') {\n        return state;\n      }\n\n      const { activeState, previousStates } = state;\n      const [activeFlow, analysisUrl, analyzeResult, opts] = action.args;\n\n      return {\n        ...state,\n        analysisUrl,\n        activeFlow,\n        analyzeResult,\n        prepareResult: opts?.prepareResult,\n\n        activeState: opts?.prepareResult === undefined ? 'prepare' : 'review',\n        previousStates: previousStates.concat(activeState),\n      };\n    }\n\n    case 'onPrepare': {\n      if (state.activeState !== 'prepare') {\n        return state;\n      }\n\n      const { activeState, previousStates } = state;\n      const [prepareResult, opts] = action.args;\n\n      return {\n        ...state,\n        prepareResult,\n\n        activeState: 'review',\n        previousStates: opts?.notRepeatable\n          ? []\n          : previousStates.concat(activeState),\n      };\n    }\n\n    case 'onReview': {\n      if (state.activeState !== 'review') {\n        return state;\n      }\n\n      const { activeState, previousStates } = state;\n      const [reviewResult] = action.args;\n\n      return {\n        ...state,\n        reviewResult,\n\n        activeState: 'finish',\n        previousStates: previousStates.concat(activeState),\n      };\n    }\n\n    case 'onGoBack': {\n      const { activeState, previousStates } = state;\n\n      return {\n        ...state,\n\n        activeState:\n          previousStates.length > 0\n            ? previousStates[previousStates.length - 1]\n            : activeState,\n        previousStates: previousStates.slice(0, previousStates.length - 1),\n      };\n    }\n\n    case 'onReset':\n      return {\n        ...init(action.initialUrl),\n\n        // we keep the old prepareResult since the form is animated and an\n        // undefined value might crash the last step.\n        prepareResult: state.prepareResult,\n      };\n\n    default:\n      throw new Error();\n  }\n}\n\n/**\n * A hook that manages the state machine of the form. It handles different flows\n * which each can implement up to four states:\n * 1. analyze\n * 2. preview (skippable from analyze->review)\n * 3. review\n * 4. finish\n *\n * @param options - options\n */\nexport const useImportState = (options?: {\n  initialUrl?: string;\n}): ImportState => {\n  const [state, dispatch] = useReducer(reducer, options?.initialUrl, init);\n\n  const { activeFlow, activeState, analysisUrl, previousStates } = state;\n\n  return {\n    activeFlow,\n    activeState,\n    activeStepNumber: ['analyze', 'prepare', 'review', 'finish'].indexOf(\n      activeState,\n    ),\n    analysisUrl: analysisUrl,\n\n    analyzeResult: state.analyzeResult!,\n    prepareResult: state.prepareResult!,\n    reviewResult: state.reviewResult!,\n\n    onAnalysis: (flow, url, result, opts) =>\n      dispatch({\n        type: 'onAnalysis',\n        args: [flow, url, result, opts],\n      }),\n\n    onPrepare: (result, opts) =>\n      dispatch({\n        type: 'onPrepare',\n        args: [result, opts],\n      }),\n\n    onReview: result => dispatch({ type: 'onReview', args: [result] }),\n\n    onGoBack:\n      previousStates.length > 0\n        ? () => dispatch({ type: 'onGoBack' })\n        : undefined,\n\n    onReset: () =>\n      dispatch({ type: 'onReset', initialUrl: options?.initialUrl }),\n  };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Button, CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { ComponentProps } from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    position: 'relative',\n  },\n  buttonProgress: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  },\n}));\n\nexport const NextButton = (\n  props: ComponentProps<typeof Button> & { loading?: boolean },\n) => {\n  const { loading, ...buttonProps } = props;\n  const classes = useStyles();\n\n  return (\n    <div className={classes.wrapper}>\n      <Button\n        color=\"primary\"\n        variant=\"contained\"\n        {...buttonProps}\n        disabled={props.disabled || props.loading}\n      />\n      {props.loading && (\n        <CircularProgress size=\"1.5rem\" className={classes.buttonProgress} />\n      )}\n      {props.loading}\n    </div>\n  );\n};\n\nexport const BackButton = (props: ComponentProps<typeof Button>) => {\n  const classes = useStyles();\n\n  return (\n    <Button variant=\"outlined\" className={classes.button} {...props}>\n      {props.children || 'Back'}\n    </Button>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity, CompoundEntityRef } from '@backstage/catalog-model';\nimport { useApp } from '@backstage/core-plugin-api';\nimport {\n  EntityRefLink,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport {\n  Collapse,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport WorkIcon from '@material-ui/icons/Work';\nimport React, { useState } from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n}));\n\nfunction sortEntities(entities: Array<CompoundEntityRef | Entity>) {\n  return entities.sort((a, b) =>\n    humanizeEntityRef(a).localeCompare(humanizeEntityRef(b)),\n  );\n}\n\n/**\n * Props for {@link EntityListComponent}.\n *\n * @public\n */\nexport interface EntityListComponentProps {\n  locations: Array<{\n    target: string;\n    entities: (Entity | CompoundEntityRef)[];\n  }>;\n  locationListItemIcon: (target: string) => React.ReactElement;\n  collapsed?: boolean;\n  firstListItem?: React.ReactElement;\n  onItemClick?: (target: string) => void;\n  withLinks?: boolean;\n}\n\n/**\n * Shows a result list of entities.\n *\n * @public\n */\nexport const EntityListComponent = (props: EntityListComponentProps) => {\n  const {\n    locations,\n    collapsed = false,\n    locationListItemIcon,\n    onItemClick,\n    firstListItem,\n    withLinks = false,\n  } = props;\n\n  const app = useApp();\n  const classes = useStyles();\n\n  const [expandedUrls, setExpandedUrls] = useState<string[]>([]);\n\n  const handleClick = (url: string) => {\n    setExpandedUrls(urls =>\n      urls.includes(url) ? urls.filter(u => u !== url) : urls.concat(url),\n    );\n  };\n\n  return (\n    <List>\n      {firstListItem}\n      {locations.map(r => (\n        <React.Fragment key={r.target}>\n          <ListItem\n            dense\n            button={Boolean(onItemClick) as any}\n            onClick={() => onItemClick?.call(this, r.target)}\n          >\n            <ListItemIcon>{locationListItemIcon(r.target)}</ListItemIcon>\n\n            <ListItemText\n              primary={r.target}\n              secondary={`Entities: ${r.entities.length}`}\n            />\n\n            {collapsed && (\n              <ListItemSecondaryAction>\n                <IconButton edge=\"end\" onClick={() => handleClick(r.target)}>\n                  {expandedUrls.includes(r.target) ? (\n                    <ExpandLessIcon />\n                  ) : (\n                    <ExpandMoreIcon />\n                  )}\n                </IconButton>\n              </ListItemSecondaryAction>\n            )}\n          </ListItem>\n\n          <Collapse\n            in={!collapsed || expandedUrls.includes(r.target)}\n            timeout=\"auto\"\n            unmountOnExit\n          >\n            <List component=\"div\" disablePadding dense>\n              {sortEntities(r.entities).map(entity => {\n                const Icon =\n                  app.getSystemIcon(\n                    `kind:${entity.kind.toLocaleLowerCase('en-US')}`,\n                  ) ?? WorkIcon;\n                return (\n                  <ListItem\n                    key={humanizeEntityRef(entity)}\n                    className={classes.nested}\n                    {...(withLinks\n                      ? {\n                          component: EntityRefLink,\n                          entityRef: entity,\n                          button: withLinks as any,\n                        }\n                      : {})}\n                  >\n                    <ListItemIcon>\n                      <Icon />\n                    </ListItemIcon>\n                    <ListItemText primary={humanizeEntityRef(entity)} />\n                  </ListItem>\n                );\n              })}\n            </List>\n          </Collapse>\n        </React.Fragment>\n      ))}\n    </List>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Grid, Typography } from '@material-ui/core';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React from 'react';\nimport { BackButton } from '../Buttons';\nimport { EntityListComponent } from '../EntityListComponent';\nimport { PrepareResult } from '../useImportState';\nimport { Link } from '@backstage/core-components';\nimport partition from 'lodash/partition';\n\ntype Props = {\n  prepareResult: PrepareResult;\n  onReset: () => void;\n};\n\nexport const StepFinishImportLocation = ({ prepareResult, onReset }: Props) => {\n  const continueButton = (\n    <Grid container spacing={0}>\n      <BackButton onClick={onReset}>Register another</BackButton>\n    </Grid>\n  );\n\n  if (prepareResult.type === 'repository') {\n    return (\n      <>\n        <Typography paragraph>\n          The following Pull Request has been opened:{' '}\n          <Link\n            to={prepareResult.pullRequest.url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            {prepareResult.pullRequest.url}\n          </Link>\n        </Typography>\n\n        <Typography paragraph>\n          Your entities will be imported as soon as the Pull Request is merged.\n        </Typography>\n\n        {continueButton}\n      </>\n    );\n  }\n\n  const [existingLocations, newLocations] = partition(\n    prepareResult.locations,\n    l => l.exists,\n  );\n\n  return (\n    <>\n      {newLocations.length > 0 && (\n        <>\n          <Typography>\n            The following entities have been added to the catalog:\n          </Typography>\n\n          <EntityListComponent\n            locations={newLocations}\n            locationListItemIcon={() => <LocationOnIcon />}\n            withLinks\n          />\n        </>\n      )}\n      {existingLocations.length > 0 && (\n        <>\n          <Typography>\n            A refresh was triggered for the following locations:\n          </Typography>\n\n          <EntityListComponent\n            locations={existingLocations}\n            locationListItemIcon={() => <LocationOnIcon />}\n            withLinks\n          />\n        </>\n      )}\n      {continueButton}\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { FormHelperText, Grid, TextField } from '@material-ui/core';\nimport React, { useCallback, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { AnalyzeResult, catalogImportApiRef } from '../../api';\nimport { NextButton } from '../Buttons';\nimport { asInputRef } from '../helpers';\nimport { ImportFlows, PrepareResult } from '../useImportState';\n\ntype FormData = {\n  url: string;\n};\n\n/**\n * Props for {@link StepInitAnalyzeUrl}.\n *\n * @public\n */\nexport interface StepInitAnalyzeUrlProps {\n  onAnalysis: (\n    flow: ImportFlows,\n    url: string,\n    result: AnalyzeResult,\n    opts?: { prepareResult?: PrepareResult },\n  ) => void;\n  disablePullRequest?: boolean;\n  analysisUrl?: string;\n  exampleLocationUrl?: string;\n}\n\n/**\n * A form that lets the user input a url and analyze it for existing locations or potential entities.\n *\n * @param onAnalysis - is called when the analysis was successful\n * @param analysisUrl - a url that can be used as a default value\n * @param disablePullRequest - if true, repositories without entities will abort the wizard\n * @public\n */\nexport const StepInitAnalyzeUrl = (props: StepInitAnalyzeUrlProps) => {\n  const {\n    onAnalysis,\n    analysisUrl = '',\n    disablePullRequest = false,\n    exampleLocationUrl = 'https://github.com/backstage/backstage/blob/master/catalog-info.yaml',\n  } = props;\n\n  const errorApi = useApi(errorApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch,\n  } = useForm<FormData>({\n    mode: 'onTouched',\n    defaultValues: {\n      url: analysisUrl,\n    },\n  });\n\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState<string | undefined>(undefined);\n\n  const handleResult = useCallback(\n    async ({ url }: FormData) => {\n      setSubmitted(true);\n\n      try {\n        const analysisResult = await catalogImportApi.analyzeUrl(url);\n\n        switch (analysisResult.type) {\n          case 'repository':\n            if (\n              !disablePullRequest &&\n              analysisResult.generatedEntities.length > 0\n            ) {\n              onAnalysis('no-location', url, analysisResult);\n            } else {\n              setError(\"Couldn't generate entities for your repository\");\n              setSubmitted(false);\n            }\n            break;\n\n          case 'locations': {\n            if (analysisResult.locations.length === 1) {\n              onAnalysis('single-location', url, analysisResult, {\n                prepareResult: analysisResult,\n              });\n            } else if (analysisResult.locations.length > 1) {\n              onAnalysis('multiple-locations', url, analysisResult);\n            } else {\n              setError('There are no entities at this location');\n              setSubmitted(false);\n            }\n            break;\n          }\n\n          default: {\n            const err = `Received unknown analysis result of type ${\n              (analysisResult as any).type\n            }. Please contact the support team.`;\n            setError(err);\n            setSubmitted(false);\n\n            errorApi.post(new Error(err));\n            break;\n          }\n        }\n      } catch (e: any) {\n        setError(e?.data?.error?.message ?? e.message);\n        setSubmitted(false);\n      }\n    },\n    [catalogImportApi, disablePullRequest, errorApi, onAnalysis],\n  );\n\n  return (\n    <form onSubmit={handleSubmit(handleResult)}>\n      <TextField\n        {...asInputRef(\n          register('url', {\n            required: true,\n            validate: {\n              httpsValidator: (value: any) =>\n                (typeof value === 'string' &&\n                  value.match(/^http[s]?:\\/\\//) !== null) ||\n                'Must start with http:// or https://.',\n            },\n          }),\n        )}\n        fullWidth\n        id=\"url\"\n        label=\"Repository URL\"\n        placeholder={exampleLocationUrl}\n        helperText=\"Enter the full path to your entity file to start tracking your component\"\n        margin=\"normal\"\n        variant=\"outlined\"\n        error={Boolean(errors.url)}\n        required\n      />\n\n      {errors.url && (\n        <FormHelperText error>{errors.url.message}</FormHelperText>\n      )}\n\n      {error && <FormHelperText error>{error}</FormHelperText>}\n\n      <Grid container spacing={0}>\n        <NextButton\n          disabled={Boolean(errors.url) || !watch('url')}\n          loading={submitted}\n          type=\"submit\"\n        >\n          Analyze\n        </NextButton>\n      </Grid>\n    </form>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CircularProgress, TextField } from '@material-ui/core';\nimport { TextFieldProps } from '@material-ui/core/TextField/TextField';\nimport { Autocomplete } from '@material-ui/lab';\nimport React from 'react';\nimport { Controller, FieldErrors } from 'react-hook-form';\n\n/**\n * Props for {@link AutocompleteTextField}.\n *\n * @public\n */\nexport interface AutocompleteTextFieldProps<TFieldValue extends string> {\n  name: TFieldValue;\n  options: string[];\n  required?: boolean;\n\n  errors?: FieldErrors;\n  rules?: React.ComponentProps<typeof Controller>['rules'];\n\n  loading?: boolean;\n  loadingText?: string;\n\n  helperText?: React.ReactNode;\n  errorHelperText?: string;\n\n  textFieldProps?: Omit<TextFieldProps, 'required' | 'fullWidth'>;\n}\n\n/**\n * An autocompletion text field for the catalog import flows.\n *\n * @public\n */\nexport const AutocompleteTextField = <TFieldValue extends string>(\n  props: AutocompleteTextFieldProps<TFieldValue>,\n) => {\n  const {\n    name,\n    options,\n    required,\n    errors,\n    rules,\n    loading = false,\n    loadingText,\n    helperText,\n    errorHelperText,\n    textFieldProps = {},\n  } = props;\n\n  return (\n    <Controller\n      name={name}\n      rules={rules}\n      render={({ field: { onChange } }) => (\n        <Autocomplete\n          loading={loading}\n          loadingText={loadingText}\n          options={options || []}\n          autoSelect\n          freeSolo\n          onChange={(_event: React.ChangeEvent<{}>, value: string | null) =>\n            onChange(value)\n          }\n          renderInput={params => (\n            <TextField\n              {...params}\n              helperText={(errors?.[name] && errorHelperText) || helperText}\n              error={Boolean(errors?.[name])}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required={required}\n              InputProps={{\n                ...params.InputProps,\n                endAdornment: (\n                  <React.Fragment>\n                    {loading ? (\n                      <CircularProgress color=\"inherit\" size=\"1em\" />\n                    ) : null}\n                    {params.InputProps.endAdornment}\n                  </React.Fragment>\n                ),\n              }}\n              {...textFieldProps}\n            />\n          )}\n        />\n      )}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  FormProvider,\n  SubmitHandler,\n  UnpackNestedValue,\n  useForm,\n  UseFormProps,\n  UseFormReturn,\n} from 'react-hook-form';\n\n/**\n * Props for {@link PreparePullRequestForm}.\n *\n * @public\n */\nexport type PreparePullRequestFormProps<\n  TFieldValues extends Record<string, any>,\n> = Pick<UseFormProps<TFieldValues>, 'defaultValues'> & {\n  onSubmit: SubmitHandler<TFieldValues>;\n\n  render: (\n    props: Pick<\n      UseFormReturn<TFieldValues>,\n      'formState' | 'register' | 'control' | 'setValue'\n    > & {\n      values: UnpackNestedValue<TFieldValues>;\n    },\n  ) => React.ReactNode;\n};\n\n/**\n * A form wrapper that creates a form that is used to prepare a pull request. It\n * hosts the form logic.\n *\n * @param defaultValues - the default values of the form\n * @param onSubmit - a callback that is executed when the form is submitted\n *   (initiated by a button of type=\"submit\")\n * @param render - render the form elements\n * @public\n */\nexport const PreparePullRequestForm = <\n  TFieldValues extends Record<string, any>,\n>(\n  props: PreparePullRequestFormProps<TFieldValues>,\n) => {\n  const { defaultValues, onSubmit, render } = props;\n\n  const methods = useForm<TFieldValues>({ mode: 'onTouched', defaultValues });\n  const { handleSubmit, watch, control, register, formState, setValue } =\n    methods;\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        {render({ values: watch(), formState, register, control, setValue })}\n      </form>\n    </FormProvider>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\nimport React from 'react';\nimport YAML from 'yaml';\nimport { CodeSnippet } from '@backstage/core-components';\nimport { trimEnd } from 'lodash';\nimport { useCatalogFilename } from '../../hooks';\n\n/**\n * Props for {@link PreviewCatalogInfoComponent}.\n *\n * @public\n */\nexport interface PreviewCatalogInfoComponentProps {\n  repositoryUrl: string;\n  entities: Entity[];\n  classes?: { card?: string; cardContent?: string };\n}\n\n/**\n * Previews information about an entity to create.\n *\n * @public\n */\nexport const PreviewCatalogInfoComponent = (\n  props: PreviewCatalogInfoComponentProps,\n) => {\n  const { repositoryUrl, entities, classes } = props;\n  const catalogFilename = useCatalogFilename();\n\n  return (\n    <Card variant=\"outlined\" className={classes?.card}>\n      <CardHeader\n        title={\n          <code>{`${trimEnd(repositoryUrl, '/')}/${catalogFilename}`}</code>\n        }\n      />\n\n      <CardContent className={classes?.cardContent}>\n        <CodeSnippet\n          text={entities\n            .map(e => YAML.stringify(e))\n            .join('---\\n')\n            .trim()}\n          language=\"yaml\"\n        />\n      </CardContent>\n    </Card>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\nimport React from 'react';\nimport { MarkdownContent } from '@backstage/core-components';\n\n/**\n * Props for {@link PreviewPullRequestComponent}.\n *\n * @public\n */\nexport interface PreviewPullRequestComponentProps {\n  title: string;\n  description: string;\n  classes?: { card?: string; cardContent?: string };\n}\n\n/**\n * Previews a pull request.\n *\n * @public\n */\nexport const PreviewPullRequestComponent = (\n  props: PreviewPullRequestComponentProps,\n) => {\n  const { title, description, classes } = props;\n  return (\n    <Card variant=\"outlined\" className={classes?.card}>\n      <CardHeader title={title} subheader=\"Create a new Pull Request\" />\n      <CardContent className={classes?.cardContent}>\n        <MarkdownContent content={description} />\n      </CardContent>\n    </Card>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { assertError } from '@backstage/errors';\nimport {\n  catalogApiRef,\n  humanizeEntityRef,\n} from '@backstage/plugin-catalog-react';\nimport { Box, FormHelperText, Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { UnpackNestedValue, UseFormReturn } from 'react-hook-form';\nimport useAsync from 'react-use/lib/useAsync';\nimport YAML from 'yaml';\nimport { AnalyzeResult, catalogImportApiRef } from '../../api';\nimport { useCatalogFilename } from '../../hooks';\nimport { PartialEntity } from '../../types';\nimport { BackButton, NextButton } from '../Buttons';\nimport { PrepareResult } from '../useImportState';\nimport { PreparePullRequestForm } from './PreparePullRequestForm';\nimport { PreviewCatalogInfoComponent } from './PreviewCatalogInfoComponent';\nimport { PreviewPullRequestComponent } from './PreviewPullRequestComponent';\n\nconst useStyles = makeStyles(theme => ({\n  previewCard: {\n    marginTop: theme.spacing(1),\n  },\n  previewCardContent: {\n    paddingTop: 0,\n  },\n}));\n\ntype FormData = {\n  title: string;\n  body: string;\n  componentName: string;\n  owner: string;\n  useCodeowners: boolean;\n};\n\n/**\n * Props for {@link StepPrepareCreatePullRequest}.\n *\n * @public\n */\nexport interface StepPrepareCreatePullRequestProps {\n  analyzeResult: Extract<AnalyzeResult, { type: 'repository' }>;\n  onPrepare: (\n    result: PrepareResult,\n    opts?: { notRepeatable?: boolean },\n  ) => void;\n  onGoBack?: () => void;\n\n  renderFormFields: (\n    props: Pick<\n      UseFormReturn<FormData>,\n      'register' | 'setValue' | 'formState'\n    > & {\n      values: UnpackNestedValue<FormData>;\n      groups: string[];\n      groupsLoading: boolean;\n    },\n  ) => React.ReactNode;\n}\n\nexport function generateEntities(\n  entities: PartialEntity[],\n  componentName: string,\n  owner?: string,\n): Entity[] {\n  return entities.map(e => ({\n    ...e,\n    apiVersion: e.apiVersion!,\n    kind: e.kind!,\n    metadata: {\n      ...e.metadata,\n      name: componentName,\n    },\n    spec: {\n      ...e.spec,\n      ...(owner ? { owner } : {}),\n    },\n  }));\n}\n\n/**\n * Prepares a pull request.\n *\n * @public\n */\nexport const StepPrepareCreatePullRequest = (\n  props: StepPrepareCreatePullRequestProps,\n) => {\n  const { analyzeResult, onPrepare, onGoBack, renderFormFields } = props;\n\n  const classes = useStyles();\n  const catalogApi = useApi(catalogApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState<string>();\n\n  const catalogFilename = useCatalogFilename();\n\n  const {\n    loading: prDefaultsLoading,\n    value: prDefaults,\n    error: prDefaultsError,\n  } = useAsync(\n    () => catalogImportApi.preparePullRequest!(),\n    [catalogImportApi.preparePullRequest],\n  );\n\n  useEffect(() => {\n    if (prDefaultsError) {\n      errorApi.post(prDefaultsError);\n    }\n  }, [prDefaultsError, errorApi]);\n\n  const { loading: groupsLoading, value: groups } = useAsync(async () => {\n    const groupEntities = await catalogApi.getEntities({\n      filter: { kind: 'group' },\n    });\n\n    return groupEntities.items\n      .map(e => humanizeEntityRef(e, { defaultKind: 'group' }))\n      .sort();\n  });\n\n  const handleResult = useCallback(\n    async (data: FormData) => {\n      setSubmitted(true);\n\n      try {\n        const pr = await catalogImportApi.submitPullRequest({\n          repositoryUrl: analyzeResult.url,\n          title: data.title,\n          body: data.body,\n          fileContent: generateEntities(\n            analyzeResult.generatedEntities,\n            data.componentName,\n            data.owner,\n          )\n            .map(e => YAML.stringify(e))\n            .join('---\\n'),\n        });\n\n        onPrepare(\n          {\n            type: 'repository',\n            url: analyzeResult.url,\n            integrationType: analyzeResult.integrationType,\n            pullRequest: {\n              url: pr.link,\n            },\n            locations: [\n              {\n                target: pr.location,\n                entities: generateEntities(\n                  analyzeResult.generatedEntities,\n                  data.componentName,\n                  data.owner,\n                ).map(e => ({\n                  kind: e.kind,\n                  namespace: e.metadata.namespace!,\n                  name: e.metadata.name,\n                })),\n              },\n            ],\n          },\n          { notRepeatable: true },\n        );\n      } catch (e) {\n        assertError(e);\n        setError(e.message);\n        setSubmitted(false);\n      }\n    },\n    [\n      analyzeResult.generatedEntities,\n      analyzeResult.integrationType,\n      analyzeResult.url,\n      catalogImportApi,\n      onPrepare,\n    ],\n  );\n\n  return (\n    <>\n      <Typography>\n        You entered a link to a {analyzeResult.integrationType} repository but a{' '}\n        <code>{catalogFilename}</code> could not be found. Use this form to open\n        a Pull Request that creates one.\n      </Typography>\n\n      {!prDefaultsLoading && (\n        <PreparePullRequestForm<FormData>\n          onSubmit={handleResult}\n          defaultValues={{\n            title: prDefaults?.title ?? '',\n            body: prDefaults?.body ?? '',\n            owner:\n              (analyzeResult.generatedEntities[0]?.spec?.owner as string) || '',\n            componentName:\n              analyzeResult.generatedEntities[0]?.metadata?.name || '',\n            useCodeowners: false,\n          }}\n          render={({ values, formState, register, setValue }) => (\n            <>\n              {renderFormFields({\n                values,\n                formState,\n                register,\n                setValue,\n                groups: groups ?? [],\n                groupsLoading,\n              })}\n\n              <Box marginTop={2}>\n                <Typography variant=\"h6\">Preview Pull Request</Typography>\n              </Box>\n\n              <PreviewPullRequestComponent\n                title={values.title}\n                description={values.body}\n                classes={{\n                  card: classes.previewCard,\n                  cardContent: classes.previewCardContent,\n                }}\n              />\n\n              <Box marginTop={2} marginBottom={1}>\n                <Typography variant=\"h6\">Preview Entities</Typography>\n              </Box>\n\n              <PreviewCatalogInfoComponent\n                entities={generateEntities(\n                  analyzeResult.generatedEntities,\n                  values.componentName,\n                  values.owner,\n                )}\n                repositoryUrl={analyzeResult.url}\n                classes={{\n                  card: classes.previewCard,\n                  cardContent: classes.previewCardContent,\n                }}\n              />\n\n              {error && <FormHelperText error>{error}</FormHelperText>}\n\n              <Grid container spacing={0}>\n                {onGoBack && (\n                  <BackButton onClick={onGoBack} disabled={submitted} />\n                )}\n                <NextButton\n                  type=\"submit\"\n                  disabled={Boolean(\n                    formState.errors.title ||\n                      formState.errors.body ||\n                      formState.errors.owner,\n                  )}\n                  loading={submitted}\n                >\n                  Create PR\n                </NextButton>\n              </Grid>\n            </>\n          )}\n        />\n      )}\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Checkbox,\n  Grid,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React, { useCallback, useState } from 'react';\nimport { AnalyzeResult } from '../../api';\nimport { BackButton, NextButton } from '../Buttons';\nimport { EntityListComponent } from '../EntityListComponent';\nimport { PrepareResult } from '../useImportState';\nimport partition from 'lodash/partition';\n\ntype Props = {\n  analyzeResult: Extract<AnalyzeResult, { type: 'locations' }>;\n  prepareResult?: PrepareResult;\n  onPrepare: (result: PrepareResult) => void;\n  onGoBack?: () => void;\n};\n\n/**\n * A form that lets a user select one of a list of locations to import\n *\n * @param analyzeResult - the result of the analysis\n * @param prepareResult - the selectected locations from a previous step\n * @param onPrepare - called after the selection\n * @param onGoBack - called to go back to the previous step\n */\nexport const StepPrepareSelectLocations = ({\n  analyzeResult,\n  prepareResult,\n  onPrepare,\n  onGoBack,\n}: Props) => {\n  const [selectedUrls, setSelectedUrls] = useState<string[]>(\n    prepareResult?.locations.map(l => l.target) || [],\n  );\n\n  const [existingLocations, locations] = partition(\n    analyzeResult?.locations,\n    l => l.exists,\n  );\n\n  const handleResult = useCallback(async () => {\n    onPrepare({\n      type: 'locations',\n      locations: locations.filter((l: any) => selectedUrls.includes(l.target)),\n    });\n  }, [locations, onPrepare, selectedUrls]);\n\n  const onItemClick = (url: string) => {\n    setSelectedUrls(urls =>\n      urls.includes(url) ? urls.filter(u => u !== url) : urls.concat(url),\n    );\n  };\n\n  const onSelectAll = () => {\n    setSelectedUrls(urls =>\n      urls.length < locations.length ? locations.map(l => l.target) : [],\n    );\n  };\n\n  return (\n    <>\n      {locations.length > 0 && (\n        <>\n          <Typography>\n            Select one or more locations that are present in your git\n            repository:\n          </Typography>\n          <EntityListComponent\n            firstListItem={\n              <ListItem dense button onClick={onSelectAll}>\n                <ListItemIcon>\n                  <Checkbox\n                    edge=\"start\"\n                    checked={selectedUrls.length === locations.length}\n                    indeterminate={\n                      selectedUrls.length > 0 &&\n                      selectedUrls.length < locations.length\n                    }\n                    tabIndex={-1}\n                    disableRipple\n                  />\n                </ListItemIcon>\n                <ListItemText primary=\"Select All\" />\n              </ListItem>\n            }\n            onItemClick={onItemClick}\n            locations={locations}\n            locationListItemIcon={target => (\n              <Checkbox\n                edge=\"start\"\n                checked={selectedUrls.includes(target)}\n                tabIndex={-1}\n                disableRipple\n              />\n            )}\n            collapsed\n          />\n        </>\n      )}\n\n      {existingLocations.length > 0 && (\n        <>\n          <Typography>These locations already exist in the catalog:</Typography>\n          <EntityListComponent\n            locations={existingLocations}\n            locationListItemIcon={() => <LocationOnIcon />}\n            withLinks\n            collapsed\n          />\n        </>\n      )}\n\n      <Grid container spacing={0}>\n        {onGoBack && <BackButton onClick={onGoBack} />}\n        <NextButton disabled={selectedUrls.length === 0} onClick={handleResult}>\n          Review\n        </NextButton>\n      </Grid>\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { FormHelperText, Grid, Typography } from '@material-ui/core';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React, { useCallback, useState } from 'react';\nimport { BackButton, NextButton } from '../Buttons';\nimport { EntityListComponent } from '../EntityListComponent';\nimport { PrepareResult, ReviewResult } from '../useImportState';\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Link } from '@backstage/core-components';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { assertError } from '@backstage/errors';\n\ntype Props = {\n  prepareResult: PrepareResult;\n  onReview: (result: ReviewResult) => void;\n  onGoBack?: () => void;\n};\n\nexport const StepReviewLocation = ({\n  prepareResult,\n  onReview,\n  onGoBack,\n}: Props) => {\n  const catalogApi = useApi(catalogApiRef);\n  const configApi = useApi(configApiRef);\n\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState<string>();\n  const exists =\n    prepareResult.type === 'locations' &&\n    prepareResult.locations.some(l => l.exists)\n      ? true\n      : false;\n  const handleClick = useCallback(async () => {\n    setSubmitted(true);\n    try {\n      let refreshed = new Array<{ target: string }>();\n      if (prepareResult.type === 'locations') {\n        refreshed = await Promise.all(\n          prepareResult.locations\n            .filter(l => l.exists)\n            .map(async l => {\n              const ref = stringifyEntityRef(l.entities[0] ?? l);\n              await catalogApi.refreshEntity(ref);\n              return { target: l.target };\n            }),\n        );\n      }\n\n      const locations = await Promise.all(\n        prepareResult.locations\n          .filter((l: unknown) => !(l as { exists?: boolean }).exists)\n          .map(async l => {\n            const result = await catalogApi.addLocation({\n              type: 'url',\n              target: l.target,\n            });\n            return {\n              target: result.location.target,\n              entities: result.entities,\n            };\n          }),\n      );\n\n      onReview({\n        ...prepareResult,\n        ...{ refreshed },\n        locations,\n      });\n    } catch (e) {\n      assertError(e);\n      // TODO: this error should be handled differently. We add it as 'optional' and\n      //       it is not uncommon that a PR has not been merged yet.\n      if (\n        prepareResult.type === 'repository' &&\n        e.message.startsWith(\n          'Location was added but has no entities specified yet',\n        )\n      ) {\n        onReview({\n          ...prepareResult,\n          locations: prepareResult.locations.map(l => ({\n            target: l.target,\n            entities: [],\n          })),\n        });\n      } else {\n        setError(e.message);\n        setSubmitted(false);\n      }\n    }\n  }, [prepareResult, onReview, catalogApi]);\n\n  return (\n    <>\n      {prepareResult.type === 'repository' && (\n        <>\n          <Typography paragraph>\n            The following Pull Request has been opened:{' '}\n            <Link\n              to={prepareResult.pullRequest.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {prepareResult.pullRequest.url}\n            </Link>\n          </Typography>\n\n          <Typography paragraph>\n            You can already import the location and {appTitle} will fetch the\n            entities as soon as the Pull Request is merged.\n          </Typography>\n        </>\n      )}\n\n      <Typography>\n        {exists\n          ? 'The following locations already exist in the catalog:'\n          : 'The following entities will be added to the catalog:'}\n      </Typography>\n\n      <EntityListComponent\n        locations={prepareResult.locations}\n        locationListItemIcon={() => <LocationOnIcon />}\n      />\n\n      {error && <FormHelperText error>{error}</FormHelperText>}\n\n      <Grid container spacing={0}>\n        {onGoBack && <BackButton onClick={onGoBack} disabled={submitted} />}\n        <NextButton\n          disabled={submitted}\n          loading={submitted}\n          onClick={() => handleClick()}\n        >\n          {exists ? 'Refresh' : 'Import'}\n        </NextButton>\n      </Grid>\n    </>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Box,\n  Checkbox,\n  FormControlLabel,\n  FormHelperText,\n  StepLabel,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { BackButton } from '../Buttons';\nimport { asInputRef } from '../helpers';\nimport { StepFinishImportLocation } from '../StepFinishImportLocation';\nimport { StepInitAnalyzeUrl } from '../StepInitAnalyzeUrl';\nimport {\n  AutocompleteTextField,\n  StepPrepareCreatePullRequest,\n} from '../StepPrepareCreatePullRequest';\nimport { StepPrepareSelectLocations } from '../StepPrepareSelectLocations';\nimport { StepReviewLocation } from '../StepReviewLocation';\nimport { StepperApis } from '../types';\nimport { ImportFlows, ImportState } from '../useImportState';\n\nexport type StepConfiguration = {\n  stepLabel: React.ReactElement;\n  content: React.ReactElement;\n};\n\n/**\n * Defines the details of the stepper.\n *\n * @public\n */\nexport interface StepperProvider {\n  analyze: (\n    s: Extract<ImportState, { activeState: 'analyze' }>,\n    opts: { apis: StepperApis },\n  ) => StepConfiguration;\n  prepare: (\n    s: Extract<ImportState, { activeState: 'prepare' }>,\n    opts: { apis: StepperApis },\n  ) => StepConfiguration;\n  review: (\n    s: Extract<ImportState, { activeState: 'review' }>,\n    opts: { apis: StepperApis },\n  ) => StepConfiguration;\n  finish: (\n    s: Extract<ImportState, { activeState: 'finish' }>,\n    opts: { apis: StepperApis },\n  ) => StepConfiguration;\n}\n\n/**\n * The default stepper generation function.\n *\n * Override this function to customize the import flow. Each flow should at\n * least override the prepare operation.\n *\n * @param flow - the name of the active flow\n * @param defaults - the default steps\n * @public\n */\nexport function defaultGenerateStepper(\n  flow: ImportFlows,\n  defaults: StepperProvider,\n): StepperProvider {\n  switch (flow) {\n    // the prepare step is skipped but the label of the step is updated\n    case 'single-location':\n      return {\n        ...defaults,\n        prepare: () => ({\n          stepLabel: (\n            <StepLabel\n              optional={\n                <Typography variant=\"caption\">\n                  Discovered Locations: 1\n                </Typography>\n              }\n            >\n              Select Locations\n            </StepLabel>\n          ),\n          content: <></>,\n        }),\n      };\n\n    // let the user select one or more of the discovered locations in the prepare step\n    case 'multiple-locations':\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== 'locations') {\n            return defaults.prepare(state, opts);\n          }\n\n          return {\n            stepLabel: (\n              <StepLabel\n                optional={\n                  <Typography variant=\"caption\">\n                    Discovered Locations: {state.analyzeResult.locations.length}\n                  </Typography>\n                }\n              >\n                Select Locations\n              </StepLabel>\n            ),\n            content: (\n              <StepPrepareSelectLocations\n                analyzeResult={state.analyzeResult}\n                prepareResult={state.prepareResult}\n                onPrepare={state.onPrepare}\n                onGoBack={state.onGoBack}\n              />\n            ),\n          };\n        },\n      };\n\n    case 'no-location':\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== 'repository') {\n            return defaults.prepare(state, opts);\n          }\n\n          return {\n            stepLabel: <StepLabel>Create Pull Request</StepLabel>,\n            content: (\n              <StepPrepareCreatePullRequest\n                analyzeResult={state.analyzeResult}\n                onPrepare={state.onPrepare}\n                onGoBack={state.onGoBack}\n                renderFormFields={({\n                  values,\n                  setValue,\n                  formState,\n                  groupsLoading,\n                  groups,\n                  register,\n                }) => (\n                  <>\n                    <Box marginTop={2}>\n                      <Typography variant=\"h6\">Pull Request Details</Typography>\n                    </Box>\n\n                    <TextField\n                      {...asInputRef(\n                        register('title', {\n                          required: true,\n                        }),\n                      )}\n                      label=\"Pull Request Title\"\n                      placeholder=\"Add Backstage catalog entity descriptor files\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      fullWidth\n                      error={Boolean(formState.errors.title)}\n                      required\n                    />\n\n                    <TextField\n                      {...asInputRef(\n                        register('body', {\n                          required: true,\n                        }),\n                      )}\n                      label=\"Pull Request Body\"\n                      placeholder=\"A describing text with Markdown support\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      fullWidth\n                      error={Boolean(formState.errors.body)}\n                      multiline\n                      required\n                    />\n\n                    <Box marginTop={2}>\n                      <Typography variant=\"h6\">Entity Configuration</Typography>\n                    </Box>\n\n                    <TextField\n                      {...asInputRef(\n                        register('componentName', { required: true }),\n                      )}\n                      label=\"Name of the created component\"\n                      placeholder=\"my-component\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      fullWidth\n                      error={Boolean(formState.errors.componentName)}\n                      required\n                    />\n\n                    {!values.useCodeowners && (\n                      <AutocompleteTextField\n                        name=\"owner\"\n                        errors={formState.errors}\n                        options={groups || []}\n                        loading={groupsLoading}\n                        loadingText=\"Loading groups…\"\n                        helperText=\"Select an owner from the list or enter a reference to a Group or a User\"\n                        errorHelperText=\"required value\"\n                        textFieldProps={{\n                          label: 'Entity Owner',\n                          placeholder: 'my-group',\n                        }}\n                        rules={{ required: true }}\n                        required\n                      />\n                    )}\n\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          {...asInputRef(register('useCodeowners'))}\n                          onChange={(_, value) => {\n                            if (value) {\n                              setValue('owner', '');\n                            }\n                          }}\n                        />\n                      }\n                      label={\n                        <>\n                          Use <em>CODEOWNERS</em> file as Entity Owner\n                        </>\n                      }\n                    />\n                    <FormHelperText>\n                      WARNING: This may fail if no CODEOWNERS file is found at\n                      the target location.\n                    </FormHelperText>\n                  </>\n                )}\n              />\n            ),\n          };\n        },\n      };\n\n    default:\n      return defaults;\n  }\n}\n\nexport const defaultStepper: StepperProvider = {\n  analyze: (state, { apis }) => ({\n    stepLabel: <StepLabel>Select URL</StepLabel>,\n    content: (\n      <StepInitAnalyzeUrl\n        key=\"analyze\"\n        analysisUrl={state.analysisUrl}\n        onAnalysis={state.onAnalysis}\n        disablePullRequest={!apis.catalogImportApi.preparePullRequest}\n      />\n    ),\n  }),\n\n  prepare: state => ({\n    stepLabel: (\n      <StepLabel optional={<Typography variant=\"caption\">Optional</Typography>}>\n        Import Actions\n      </StepLabel>\n    ),\n    content: <BackButton onClick={state.onGoBack} />,\n  }),\n\n  review: state => ({\n    stepLabel: <StepLabel>Review</StepLabel>,\n    content: (\n      <StepReviewLocation\n        prepareResult={state.prepareResult}\n        onReview={state.onReview}\n        onGoBack={state.onGoBack}\n      />\n    ),\n  }),\n\n  finish: state => ({\n    stepLabel: <StepLabel>Finish</StepLabel>,\n    content: (\n      <StepFinishImportLocation\n        prepareResult={state.prepareResult}\n        onReset={state.onReset}\n      />\n    ),\n  }),\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard, InfoCardVariants } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Step, StepContent, Stepper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useMemo } from 'react';\nimport { catalogImportApiRef } from '../../api';\nimport { ImportFlows, ImportState, useImportState } from '../useImportState';\nimport {\n  defaultGenerateStepper,\n  defaultStepper,\n  StepConfiguration,\n  StepperProvider,\n} from './defaults';\n\nconst useStyles = makeStyles(() => ({\n  stepperRoot: {\n    padding: 0,\n  },\n}));\n\n/**\n * Props for {@link ImportStepper}.\n *\n * @public\n */\nexport interface ImportStepperProps {\n  initialUrl?: string;\n  generateStepper?: (\n    flow: ImportFlows,\n    defaults: StepperProvider,\n  ) => StepperProvider;\n  variant?: InfoCardVariants;\n}\n\n/**\n * The stepper that holds the different import stages.\n *\n * @public\n */\nexport const ImportStepper = (props: ImportStepperProps) => {\n  const {\n    initialUrl,\n    generateStepper = defaultGenerateStepper,\n    variant,\n  } = props;\n\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const classes = useStyles();\n  const state = useImportState({ initialUrl });\n\n  const states = useMemo<StepperProvider>(\n    () => generateStepper(state.activeFlow, defaultStepper),\n    [generateStepper, state.activeFlow],\n  );\n\n  const render = (step: StepConfiguration) => {\n    return (\n      <Step>\n        {step.stepLabel}\n        <StepContent>{step.content}</StepContent>\n      </Step>\n    );\n  };\n\n  return (\n    <InfoCard variant={variant}>\n      <Stepper\n        classes={{ root: classes.stepperRoot }}\n        activeStep={state.activeStepNumber}\n        orientation=\"vertical\"\n      >\n        {render(\n          states.analyze(\n            state as Extract<ImportState, { activeState: 'analyze' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n        {render(\n          states.prepare(\n            state as Extract<ImportState, { activeState: 'prepare' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n        {render(\n          states.review(\n            state as Extract<ImportState, { activeState: 'review' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n        {render(\n          states.finish(\n            state as Extract<ImportState, { activeState: 'finish' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n      </Stepper>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  Page,\n  SupportButton,\n} from '@backstage/core-components';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Grid } from '@material-ui/core';\nimport React from 'react';\nimport { ImportInfoCard } from '../ImportInfoCard';\nimport { ImportStepper } from '../ImportStepper';\n\n/**\n * The default catalog import page.\n *\n * @public\n */\nexport const DefaultImportPage = () => {\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n\n  return (\n    <Page themeId=\"home\">\n      <Header title=\"Register an existing component\" />\n      <Content>\n        <ContentHeader title={`Start tracking your component in ${appTitle}`}>\n          <SupportButton>\n            Start tracking your component in {appTitle} by adding it to the\n            software catalog.\n          </SupportButton>\n        </ContentHeader>\n\n        <Grid container spacing={2} direction=\"row-reverse\">\n          <Grid item xs={12} md={4} lg={6} xl={8}>\n            <ImportInfoCard />\n          </Grid>\n\n          <Grid item xs={12} md={8} lg={6} xl={4}>\n            <ImportStepper />\n          </Grid>\n        </Grid>\n      </Content>\n    </Page>\n  );\n};\n"],"names":["useStyles","this"],"mappings":"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"}