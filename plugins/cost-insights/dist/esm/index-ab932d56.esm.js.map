{"version":3,"file":"index-ab932d56.esm.js","sources":["../../src/plugin.ts","../../src/types/Duration.ts","../../src/types/Alert.ts","../../src/types/ChangeStatistic.ts","../../src/types/Currency.ts","../../src/types/Icon.ts","../../src/utils/navigation.tsx","../../src/utils/config.ts","../../src/utils/assert.ts","../../src/utils/currency.ts","../../src/hooks/useConfig.tsx","../../src/hooks/useCurrency.tsx","../../src/utils/filters.ts","../../src/utils/history.ts","../../src/api/CostInsightsApi.ts","../../src/utils/duration.ts","../../src/utils/loading.ts","../../src/utils/styles.ts","../../src/hooks/useLoading.tsx","../../src/hooks/useGroups.tsx","../../src/hooks/useFilters.tsx","../../src/hooks/useScroll.tsx","../../src/hooks/useLastCompleteBillingDate.tsx","../../src/forms/AlertAcceptForm.tsx","../../src/forms/AlertSnoozeForm.tsx","../../src/forms/AlertDismissForm.tsx","../../src/utils/alerts.tsx","../../src/components/CostInsightsPage/CostInsightsThemeProvider.tsx","../../src/components/AlertInstructionsLayout/AlertInstructionsLayout.tsx","../../src/components/BarChart/BarChartLabel.tsx","../../src/components/BarChart/BarChartTick.tsx","../../src/components/BarChart/BarChartStepperButton.tsx","../../src/components/BarChart/BarChartSteps.tsx","../../src/components/BarChart/BarChartStepper.tsx","../../src/components/BarChart/BarChartTooltip.tsx","../../src/components/BarChart/BarChartTooltipItem.tsx","../../src/utils/formatters.ts","../../src/utils/sort.ts","../../src/utils/graphs.ts","../../src/components/BarChart/BarChart.tsx","../../src/components/LegendItem/LegendItem.tsx","../../src/components/BarChart/BarChartLegend.tsx","../../src/utils/change.ts","../../src/utils/grammar.ts","../../src/components/CostGrowth/CostGrowth.tsx","../../src/components/CostGrowth/CostGrowthIndicator.tsx","../../src/components/CostInsightsTabs/selector.ts","../../src/components/CostInsightsTabs/CostInsightsTabs.tsx","../../src/components/CostInsightsLayout/CostInsightsLayout.tsx","../../src/components/CostInsightsNavigation/CostInsightsNavigation.tsx","../../src/components/ProductInsightsCard/ProductEntityTable.tsx","../../src/components/ProductInsightsCard/ProductEntityDialog.tsx","../../src/components/ProductInsightsCard/ProductInsightsChart.tsx","../../src/components/ProjectGrowthAlertCard/ProjectGrowthAlertChart.tsx","../../src/components/ProjectGrowthAlertCard/ProjectGrowthAlertCard.tsx","../../src/alerts/ProjectGrowthAlert.tsx","../../src/components/UnlabeledDataflowAlertCard/UnlabeledDataflowAlertCard.tsx","../../src/alerts/UnlabeledDataflowAlert.tsx","../../src/components/ProjectGrowthInstructionsPage/ProjectGrowthInstructionsPage.tsx","../../src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationBarChartLegend.tsx","../../src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationBarChart.tsx","../../src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationAlertCard.tsx","../../src/example/forms/KubernetesMigrationDismissForm.tsx","../../src/example/alerts/KubernetesMigrationAlert.tsx","../../src/testUtils/products.ts","../../src/testUtils/filters.ts","../../src/testUtils/loading.ts","../../src/testUtils/mockData.ts","../../src/testUtils/providers.tsx","../../src/testUtils/testUtils.ts","../../src/example/client.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPlugin,\n  createRouteRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'cost-insights',\n});\n\nexport const projectGrowthAlertRef = createRouteRef({\n  id: 'cost-insights:investigating-growth',\n});\n\nexport const unlabeledDataflowAlertRef = createRouteRef({\n  id: 'cost-insights:labeling-jobs',\n});\n\nexport const costInsightsPlugin = createPlugin({\n  id: 'cost-insights',\n  featureFlags: [{ name: 'cost-insights-currencies' }],\n  routes: {\n    root: rootRouteRef,\n    growthAlerts: projectGrowthAlertRef,\n    unlabeledDataflowAlerts: unlabeledDataflowAlertRef,\n  },\n});\n\nexport const CostInsightsPage = costInsightsPlugin.provide(\n  createRoutableExtension({\n    name: 'CostInsightsPage',\n    component: () =>\n      import('./components/CostInsightsPage').then(m => m.CostInsightsPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const CostInsightsProjectGrowthInstructionsPage =\n  costInsightsPlugin.provide(\n    createRoutableExtension({\n      name: 'CostInsightsProjectGrowthInstructionsPage',\n      component: () =>\n        import('./components/ProjectGrowthInstructionsPage').then(\n          m => m.ProjectGrowthInstructionsPage,\n        ),\n      mountPoint: projectGrowthAlertRef,\n    }),\n  );\n\nexport const CostInsightsLabelDataflowInstructionsPage =\n  costInsightsPlugin.provide(\n    createRoutableExtension({\n      name: 'CostInsightsLabelDataflowInstructionsPage',\n      component: () =>\n        import('./components/LabelDataflowInstructionsPage').then(\n          m => m.LabelDataflowInstructionsPage,\n        ),\n      mountPoint: unlabeledDataflowAlertRef,\n    }),\n  );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Time periods for cost comparison; slight abuse of ISO 8601 periods. We take P3M to mean\n * 'last completed quarter', and P30D/P90D to be '[month|quarter] relative to today'. So if\n * it's September 15, P3M represents costs for Q2 and P30D represents August 16 -\n * September 15.\n */\nexport enum Duration {\n  P7D = 'P7D',\n  P30D = 'P30D',\n  P90D = 'P90D',\n  P3M = 'P3M',\n}\n\nexport const DEFAULT_DATE_FORMAT = 'yyyy-LL-dd';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ForwardRefExoticComponent, RefAttributes } from 'react';\nimport { ChangeStatistic } from './ChangeStatistic';\nimport { Duration } from './Duration';\nimport { Maybe } from './Maybe';\n\n/**\n * Generic alert type with required fields for display. The `element` field will be rendered in\n * the Cost Insights \"Action Items\" section. This should use data fetched in the CostInsightsApi\n * implementation to render an InfoCard or other visualization.\n *\n * The alert type exposes hooks which can be used to enable and access various events,\n * such as when a user dismisses or snoozes an alert. Default forms and buttons\n * will be rendered if a hook is defined.\n *\n * Each default form can be overridden with a custom component. It must be implemented using\n * React.forwardRef. See https://reactjs.org/docs/forwarding-refs\n *\n * Errors thrown within hooks will generate a snackbar error notification.\n */\n\nexport type Alert = {\n  title: string | JSX.Element;\n  subtitle: string | JSX.Element;\n  element?: JSX.Element;\n  status?: AlertStatus;\n  url?: string;\n  buttonText?: string; // Default: View Instructions\n  SnoozeForm?: Maybe<AlertForm>;\n  AcceptForm?: Maybe<AlertForm>;\n  DismissForm?: Maybe<AlertForm>;\n  onSnoozed?(options: AlertOptions): Promise<Alert[]>;\n  onAccepted?(options: AlertOptions): Promise<Alert[]>;\n  onDismissed?(options: AlertOptions): Promise<Alert[]>;\n};\n\nexport type AlertForm<\n  A extends Alert = any,\n  Data = any,\n> = ForwardRefExoticComponent<\n  AlertFormProps<A, Data> & RefAttributes<HTMLFormElement>\n>;\n\nexport interface AlertOptions<T = any> {\n  data: T;\n  group: string;\n}\n\n/**\n * Default snooze form intervals are expressed using an ISO 8601 repeating interval string.\n * For example, R1/P7D/2020-09-02 for 1 week or R1/P30D/2020-09-02 for 1 month.\n *\n * For example, if a user dismisses an alert on Monday January 01 for 1 week,\n * it can be re-served on Monday, January 08. 7 calendar days from January 02,\n * inclusive of the last day.\n *\n * https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n */\nexport interface AlertSnoozeFormData {\n  intervals: string;\n}\n\nexport interface AlertDismissFormData {\n  other: Maybe<string>;\n  reason: AlertDismissReason;\n  feedback: Maybe<string>;\n}\n\n// TODO: Convert enum to literal\nexport enum AlertStatus {\n  Snoozed = 'snoozed',\n  Accepted = 'accepted',\n  Dismissed = 'dismissed',\n}\n\nexport type AlertFormProps<A extends Alert, FormData = {}> = {\n  alert: A;\n  onSubmit: (data: FormData) => void;\n  disableSubmit: (isDisabled: boolean) => void;\n};\n\nexport interface AlertDismissOption {\n  label: string;\n  reason: string;\n}\n\nexport enum AlertDismissReason {\n  Other = 'other',\n  Resolved = 'resolved',\n  Expected = 'expected',\n  Seasonal = 'seasonal',\n  Migration = 'migration',\n  NotApplicable = 'not-applicable',\n}\n\nexport const AlertDismissOptions: AlertDismissOption[] = [\n  {\n    reason: AlertDismissReason.Resolved,\n    label: 'This action item is now resolved.',\n  },\n  {\n    reason: AlertDismissReason.Seasonal,\n    label: 'This is an expected increase at this time of year.',\n  },\n  {\n    reason: AlertDismissReason.Migration,\n    label: 'This increase is from a migration in process.',\n  },\n  {\n    reason: AlertDismissReason.Expected,\n    label: 'This is an expected increase due to our team’s priorities.',\n  },\n  {\n    reason: AlertDismissReason.NotApplicable,\n    label: 'This action item doesn’t make sense for my team.',\n  },\n  {\n    reason: AlertDismissReason.Other,\n    label: 'Other (please specify)',\n  },\n];\n\nexport type AlertSnoozeOption = {\n  label: string;\n  duration: Duration;\n};\n\nexport const AlertSnoozeOptions: AlertSnoozeOption[] = [\n  {\n    duration: Duration.P7D,\n    label: '1 Week',\n  },\n  {\n    duration: Duration.P30D,\n    label: '1 Month',\n  },\n  {\n    duration: Duration.P90D,\n    label: '1 Quarter',\n  },\n];\n\nexport interface AlertCost {\n  id: string;\n  aggregation: [number, number];\n}\n\nexport interface ResourceData {\n  previous: number;\n  current: number;\n  name: Maybe<string>;\n}\n\nexport interface BarChartOptions {\n  previousFill: string;\n  currentFill: string;\n  previousName: string;\n  currentName: string;\n}\n\n/** deprecated use BarChartOptions instead */\nexport interface BarChartData extends BarChartOptions {}\n\nexport enum DataKey {\n  Previous = 'previous',\n  Current = 'current',\n  Name = 'name',\n}\n\nexport interface ProjectGrowthData {\n  project: string;\n  periodStart: string;\n  periodEnd: string;\n  aggregation: [number, number];\n  change: ChangeStatistic;\n  products: Array<AlertCost>;\n}\n\nexport interface UnlabeledDataflowData {\n  periodStart: string;\n  periodEnd: string;\n  projects: Array<UnlabeledDataflowAlertProject>;\n  unlabeledCost: number;\n  labeledCost: number;\n}\n\nexport interface UnlabeledDataflowAlertProject {\n  id: string;\n  unlabeledCost: number;\n  labeledCost: number;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface ChangeStatistic {\n  // The ratio of change from one duration to another, expressed as: (newSum - oldSum) / oldSum\n  // If a ratio cannot be calculated - such as when a new or old sum is zero,\n  // the ratio can be omitted and where applicable, ∞ or -∞ will display based on amount.\n  ratio?: number;\n  // The actual USD change between time periods (can be negative if costs decreased)\n  amount: number;\n}\n\nexport const EngineerThreshold = 0.5;\n\nexport enum ChangeThreshold {\n  upper = 0.05,\n  lower = -0.05,\n}\n\nexport enum GrowthType {\n  Negligible,\n  Savings,\n  Excess,\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Currency {\n  kind: string | null;\n  label: string;\n  unit: string;\n  prefix?: string;\n  rate?: number;\n}\n\nexport enum CurrencyType {\n  USD = 'USD',\n  CarbonOffsetTons = 'CARBON_OFFSET_TONS',\n  Beers = 'BEERS',\n  IceCream = 'PINTS_OF_ICE_CREAM',\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type Icon = {\n  kind: string;\n  component: JSX.Element;\n};\n\nexport enum IconType {\n  Compute = 'compute',\n  Data = 'data',\n  Database = 'database',\n  Storage = 'storage',\n  Search = 'search',\n  ML = 'ml',\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport MoneyIcon from '@material-ui/icons/MonetizationOn';\nimport ActionIcon from '@material-ui/icons/Whatshot';\nimport Settings from '@material-ui/icons/Settings';\nimport AccountTree from '@material-ui/icons/AccountTree';\nimport Storage from '@material-ui/icons/Storage';\nimport Search from '@material-ui/icons/Search';\nimport CloudQueue from '@material-ui/icons/CloudQueue';\nimport School from '@material-ui/icons/School';\nimport ViewHeadline from '@material-ui/icons/ViewHeadline';\nimport { IconType } from '../types';\n\nexport enum DefaultNavigation {\n  CostOverviewCard = 'cost-overview-card',\n  AlertInsightsHeader = 'alert-insights-header',\n}\n\nexport type NavigationItem = {\n  navigation: string;\n  icon: JSX.Element;\n  title: string;\n};\n\nexport const getDefaultNavigationItems = (alerts: number): NavigationItem[] => {\n  const items = [\n    {\n      navigation: DefaultNavigation.CostOverviewCard,\n      icon: <MoneyIcon />,\n      title: 'Cost Overview',\n    },\n  ];\n  if (alerts > 0) {\n    items.push({\n      navigation: DefaultNavigation.AlertInsightsHeader,\n      icon: <ActionIcon />,\n      title: 'Action Items',\n    });\n  }\n  return items;\n};\n\nexport function getIcon(icon?: string): JSX.Element {\n  switch (icon) {\n    case IconType.Compute:\n      return <Settings />;\n    case IconType.Data:\n      return <AccountTree />;\n    case IconType.Database:\n      return <ViewHeadline />;\n    case IconType.Storage:\n      return <Storage />;\n    case IconType.Search:\n      return <Search />;\n    case IconType.ML:\n      return <School />;\n    default:\n      return <CloudQueue />;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Metric, Currency } from '../types';\n\nexport function validateMetrics(metrics: Metric[]) {\n  const defaults = metrics.filter(metric => metric.default);\n  if (defaults.length > 1) {\n    throw new Error(\n      `Only one default metric can be set at a time. Found ${defaults.length}`,\n    );\n  }\n}\n\nexport function validateCurrencies(currencies: Currency[]) {\n  const withoutKinds = currencies.filter(currency => currency.kind === null);\n  if (withoutKinds.length > 1) {\n    throw new Error(\n      `Only one currency can be without kind. Found ${withoutKinds.length}`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function notEmpty<TValue>(\n  value: TValue | null | undefined,\n): value is TValue {\n  return !isNull(value) && !isUndefined(value);\n}\n\nexport function isUndefined(value: any): value is undefined {\n  return value === undefined;\n}\n\nexport function isNull(value: any): boolean {\n  return value === null;\n}\n\n// Utility for exhaustiveness checking in switch statements\nexport function assertNever(x: never): never {\n  throw new Error(`Exhaustiveness check failed: ${x}`);\n}\n\nexport function assertAlways<T>(argument: T | undefined): T {\n  if (argument === undefined) {\n    throw new TypeError(\n      'Expected to always find a value but received undefined',\n    );\n  }\n  return argument;\n}\n\n// Utility for working with static lists; asserts a value will always be found or\n// throws an error\nexport function findAlways<T>(\n  collection: T[],\n  callback: (el: T) => boolean,\n): T {\n  return assertAlways(collection.find(callback));\n}\n\nexport function findAnyKey<T>(\n  record: Record<string, T> | undefined,\n): string | undefined {\n  return Object.keys(record ?? {}).find(_ => true);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Currency, CurrencyType, Duration } from '../types';\nimport { assertNever } from '../utils/assert';\n\nexport const rateOf = (cost: number, duration: Duration) => {\n  switch (duration) {\n    case Duration.P30D:\n      return cost / 12;\n    case Duration.P7D:\n    case Duration.P90D:\n    case Duration.P3M:\n      return cost / 4;\n    default:\n      return assertNever(duration);\n  }\n};\n\nexport const defaultCurrencies: Currency[] = [\n  {\n    kind: null,\n    label: 'Engineers 🛠',\n    unit: 'engineer',\n  },\n  {\n    kind: CurrencyType.USD,\n    label: 'US Dollars 💵',\n    unit: 'dollar',\n    prefix: '$',\n    rate: 1,\n  },\n  {\n    kind: CurrencyType.CarbonOffsetTons,\n    label: 'Carbon Offset Tons ♻️⚖️s',\n    unit: 'carbon offset ton',\n    rate: 3.5,\n  },\n  {\n    kind: CurrencyType.Beers,\n    label: 'Beers 🍺',\n    unit: 'beer',\n    rate: 4.5,\n  },\n  {\n    kind: CurrencyType.IceCream,\n    label: 'Pints of Ice Cream 🍦',\n    unit: 'ice cream pint',\n    rate: 5.5,\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Config as BackstageConfig } from '@backstage/config';\nimport { Currency, Icon, Metric, Product } from '../types';\nimport { getIcon } from '../utils/navigation';\nimport { validateCurrencies, validateMetrics } from '../utils/config';\nimport { defaultCurrencies } from '../utils/currency';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\n/*\n * Config schema 2021-08-05\n *\n * costInsights:\n *   engineerCost: 200000\n *   products:\n *     productA:\n *       name: Product A\n *       icon: storage\n *     productB:\n *       name: Product B\n *       icon: data\n *   metrics:\n *     metricA:\n *       name: Metric A\n *       default: true\n *     metricB:\n *       name: Metric B\n *   currencies:\n *     currencyA:\n *       label: Currency A\n *       unit: Unit A\n *     currencyB:\n *       label: Currency B\n *       kind: CURRENCY_B\n *       unit: Unit B\n *       prefix: B\n *       rate: 3.5\n */\n\nexport type ConfigContextProps = {\n  metrics: Metric[];\n  products: Product[];\n  icons: Icon[];\n  engineerCost: number;\n  currencies: Currency[];\n};\n\nexport const ConfigContext = createContext<ConfigContextProps | undefined>(\n  undefined,\n);\n\nconst defaultState: ConfigContextProps = {\n  metrics: [],\n  products: [],\n  icons: [],\n  engineerCost: 0,\n  currencies: defaultCurrencies,\n};\n\nexport const ConfigProvider = ({ children }: PropsWithChildren<{}>) => {\n  const c: BackstageConfig = useApi(configApiRef);\n  const [config, setConfig] = useState(defaultState);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    function getProducts(): Product[] {\n      const products = c.getConfig('costInsights.products');\n      return products.keys().map(key => ({\n        kind: key,\n        name: products.getString(`${key}.name`),\n        aggregation: [0, 0],\n      }));\n    }\n\n    function getMetrics(): Metric[] {\n      const metrics = c.getOptionalConfig('costInsights.metrics');\n      if (metrics) {\n        return metrics.keys().map(key => ({\n          kind: key,\n          name: metrics.getString(`${key}.name`),\n          default: metrics.getOptionalBoolean(`${key}.default`) ?? false,\n        }));\n      }\n\n      return [];\n    }\n\n    function getCurrencies(): Currency[] {\n      const currencies = c.getOptionalConfig('costInsights.currencies');\n      if (currencies) {\n        return currencies.keys().map(key => ({\n          label: currencies.getString(`${key}.label`),\n          unit: currencies.getString(`${key}.unit`),\n          kind: currencies.getOptionalString(`${key}.kind`) || null,\n          prefix: currencies.getOptionalString(`${key}.prefix`),\n          rate: currencies.getOptionalNumber(`${key}.rate`),\n        }));\n      }\n\n      return defaultCurrencies;\n    }\n\n    function getIcons(): Icon[] {\n      const products = c.getConfig('costInsights.products');\n      const keys = products.keys();\n\n      return keys.map(k => ({\n        kind: k,\n        component: getIcon(products.getOptionalString(`${k}.icon`)),\n      }));\n    }\n\n    function getEngineerCost(): number {\n      return c.getNumber('costInsights.engineerCost');\n    }\n\n    function getConfig() {\n      const products = getProducts();\n      const metrics = getMetrics();\n      const engineerCost = getEngineerCost();\n      const icons = getIcons();\n      const currencies = getCurrencies();\n\n      validateMetrics(metrics);\n      validateCurrencies(currencies);\n\n      setConfig(prevState => ({\n        ...prevState,\n        metrics,\n        products,\n        engineerCost,\n        icons,\n        currencies,\n      }));\n\n      setLoading(false);\n    }\n\n    getConfig();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (loading) {\n    return null;\n  }\n\n  return (\n    <ConfigContext.Provider value={config}>{children}</ConfigContext.Provider>\n  );\n};\n\nexport function useConfig(): ConfigContextProps {\n  const config = useContext(ConfigContext);\n  return config ? config : assertNever();\n}\n\nfunction assertNever(): never {\n  throw new Error('Cannot use useConfig outside of ConfigProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Dispatch,\n  SetStateAction,\n  useState,\n  useContext,\n  PropsWithChildren,\n} from 'react';\nimport { Currency } from '../types';\nimport { useConfig } from './useConfig';\n\nexport type CurrencyContextProps = {\n  currency: Currency;\n  setCurrency: Dispatch<SetStateAction<Currency>>;\n};\n\nexport const CurrencyContext = React.createContext<\n  CurrencyContextProps | undefined\n>(undefined);\n\nexport const CurrencyProvider = ({ children }: PropsWithChildren<{}>) => {\n  const config = useConfig();\n  const currencies = config.currencies;\n  const engineers = currencies.find(currency => currency.kind === null);\n  const [currency, setCurrency] = useState<Currency>(\n    engineers || currencies[0],\n  );\n  return (\n    <CurrencyContext.Provider value={{ currency, setCurrency }}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n};\n\nexport function useCurrency(): [Currency, Dispatch<SetStateAction<Currency>>] {\n  const context = useContext(CurrencyContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.currency, context.setCurrency];\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useCurrency outside of CurrencyProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, Group, PageFilters } from '../types';\n\nexport function getDefaultPageFilters(groups: Group[]): PageFilters {\n  return {\n    group: groups.length ? groups[0].id : null,\n    project: null,\n    duration: Duration.P90D,\n    metric: null,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport qs from 'qs';\nimport * as yup from 'yup';\nimport { Duration, Group, PageFilters } from '../types';\nimport { getDefaultPageFilters } from '../utils/filters';\nimport { ConfigContextProps } from '../hooks/useConfig';\n\nconst schema = yup\n  .object()\n  .shape({\n    group: yup.string().nullable(),\n    project: yup.string().nullable(),\n  })\n  .required();\n\nexport const stringify = (queryParams: Partial<PageFilters>) =>\n  qs.stringify(queryParams, { strictNullHandling: true });\n\nexport const parse = (queryString: string): Partial<PageFilters> =>\n  qs.parse(queryString, { ignoreQueryPrefix: true, strictNullHandling: true });\n\nexport const validate = (queryString: string): Promise<PageFilters> => {\n  return schema.validate(parse(queryString), {\n    stripUnknown: true,\n    strict: true,\n  }) as Promise<PageFilters>;\n};\n\nexport const getInitialPageState = (\n  groups: Group[],\n  queryParams: Partial<PageFilters> = {},\n) => {\n  return {\n    ...getDefaultPageFilters(groups),\n    ...(queryParams.project ? { project: queryParams.project } : {}),\n    ...(queryParams.group ? { group: queryParams.group } : {}),\n  };\n};\n\nexport const getInitialProductState = (config: ConfigContextProps) =>\n  config.products.map(product => ({\n    productType: product.kind,\n    duration: Duration.P30D,\n  }));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Alert,\n  Cost,\n  Entity,\n  Group,\n  Project,\n  Maybe,\n  MetricData,\n} from '../types';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport type ProductInsightsOptions = {\n  /**\n   * The product from the cost-insights configuration in app-config.yaml\n   */\n  product: string;\n\n  /**\n   * The group id from getUserGroups or query parameters\n   */\n  group: string;\n\n  /**\n   * An ISO 8601 repeating interval string, such as R2/P3M/2020-09-01\n   */\n  intervals: string;\n\n  /**\n   * (optional) The project id from getGroupProjects or query parameters\n   */\n  project: Maybe<string>;\n};\n\nexport type CostInsightsApi = {\n  /**\n   * Get the most current date for which billing data is complete, in YYYY-MM-DD format. This helps\n   * define the intervals used in other API methods to avoid showing incomplete cost. The costs for\n   * today, for example, will not be complete. This ideally comes from the cloud provider.\n   */\n  getLastCompleteBillingDate(): Promise<string>;\n\n  /**\n   * Get a list of groups the given user belongs to. These may be LDAP groups or similar\n   * organizational groups. Cost Insights is designed to show costs based on group membership;\n   * if a user has multiple groups, they are able to switch between groups to see costs for each.\n   *\n   * This method should be removed once the Backstage identity plugin provides the same concept.\n   *\n   * @param userId - The login id for the current user\n   */\n  getUserGroups(userId: string): Promise<Group[]>;\n\n  /**\n   * Get a list of cloud billing entities that belong to this group (projects in GCP, AWS has a\n   * similar concept in billing accounts). These act as filters for the displayed costs, users can\n   * choose whether they see all costs for a group, or those from a particular owned project.\n   *\n   * @param group - The group id from getUserGroups or query parameters\n   */\n  getGroupProjects(group: string): Promise<Project[]>;\n\n  /**\n   * Get daily cost aggregations for a given group and interval time frame.\n   *\n   * The return type includes an array of daily cost aggregations as well as statistics about the\n   * change in cost over the intervals. Calculating these statistics requires us to bucket costs\n   * into two or more time periods, hence a repeating interval format rather than just a start and\n   * end date.\n   *\n   * The rate of change in this comparison allows teams to reason about their cost growth (or\n   * reduction) and compare it to metrics important to the business.\n   *\n   * @param group - The group id from getUserGroups or query parameters\n   * @param intervals - An ISO 8601 repeating interval string, such as R2/P30D/2020-09-01\n   *   https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n   */\n  getGroupDailyCost(group: string, intervals: string): Promise<Cost>;\n\n  /**\n   * Get daily cost aggregations for a given billing entity (project in GCP, AWS has a similar\n   * concept in billing accounts) and interval time frame.\n   *\n   * The return type includes an array of daily cost aggregations as well as statistics about the\n   * change in cost over the intervals. Calculating these statistics requires us to bucket costs\n   * into two or more time periods, hence a repeating interval format rather than just a start and\n   * end date.\n   *\n   * The rate of change in this comparison allows teams to reason about the project's cost growth\n   * (or reduction) and compare it to metrics important to the business.\n   *\n   * @param project - The project id from getGroupProjects or query parameters\n   * @param intervals - An ISO 8601 repeating interval string, such as R2/P30D/2020-09-01\n   *   https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n   */\n  getProjectDailyCost(project: string, intervals: string): Promise<Cost>;\n\n  /**\n   * Get aggregations for a particular metric and interval time frame. Teams\n   * can see metrics important to their business in comparison to the growth\n   * (or reduction) of a project or group's daily costs.\n   *\n   * @param metric - A metric from the cost-insights configuration in app-config.yaml.\n   * @param intervals - An ISO 8601 repeating interval string, such as R2/P30D/2020-09-01\n   *   https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n   */\n  getDailyMetricData(metric: string, intervals: string): Promise<MetricData>;\n\n  /**\n   * Get cost aggregations for a particular cloud product and interval time frame. This includes\n   * total cost for the product, as well as a breakdown of particular entities that incurred cost\n   * in this product. The type of entity depends on the product - it may be deployed services,\n   * storage buckets, managed database instances, etc.\n   *\n   * If project is supplied, this should only return product costs for the given billing entity\n   * (project in GCP).\n   *\n   * The time period is supplied as a Duration rather than intervals, since this is always expected\n   * to return data for two bucketed time period (e.g. month vs month, or quarter vs quarter).\n   *\n   * @param options - Options to use when fetching insights for a particular cloud product and\n   *                interval time frame.\n   */\n  getProductInsights(options: ProductInsightsOptions): Promise<Entity>;\n\n  /**\n   * Get current cost alerts for a given group. These show up as Action Items for the group on the\n   * Cost Insights page. Alerts may include cost-saving recommendations, such as infrastructure\n   * migrations, or cost-related warnings, such as an unexpected billing anomaly.\n   */\n  getAlerts(group: string): Promise<Alert[]>;\n};\n\nexport const costInsightsApiRef = createApiRef<CostInsightsApi>({\n  id: 'plugin.costinsights.service',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport { Duration, DEFAULT_DATE_FORMAT } from '../types';\nimport { assertNever } from './assert';\n\nexport const DEFAULT_DURATION = Duration.P30D;\n\n/**\n * Derive the start date of a given period, assuming two repeating intervals.\n *\n * @param duration - see comment on Duration enum\n * @param inclusiveEndDate - from CostInsightsApi.getLastCompleteBillingDate\n */\nexport function inclusiveStartDateOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n): string {\n  switch (duration) {\n    case Duration.P7D:\n    case Duration.P30D:\n    case Duration.P90D:\n      return DateTime.fromISO(inclusiveEndDate)\n        .minus(\n          LuxonDuration.fromISO(duration).plus(LuxonDuration.fromISO(duration)),\n        )\n        .toFormat(DEFAULT_DATE_FORMAT);\n    case Duration.P3M:\n      return DateTime.fromISO(inclusiveEndDate)\n        .startOf('quarter')\n        .minus(\n          LuxonDuration.fromISO(duration).plus(LuxonDuration.fromISO(duration)),\n        )\n        .toFormat(DEFAULT_DATE_FORMAT);\n    default:\n      return assertNever(duration);\n  }\n}\n\nexport function exclusiveEndDateOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n): string {\n  switch (duration) {\n    case Duration.P7D:\n    case Duration.P30D:\n    case Duration.P90D:\n      return DateTime.fromISO(inclusiveEndDate)\n        .plus({ days: 1 })\n        .toFormat(DEFAULT_DATE_FORMAT);\n    case Duration.P3M:\n      return DateTime.fromISO(quarterEndDate(inclusiveEndDate))\n        .plus({ days: 1 })\n        .toFormat(DEFAULT_DATE_FORMAT);\n    default:\n      return assertNever(duration);\n  }\n}\n\nexport function inclusiveEndDateOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n): string {\n  return DateTime.fromISO(exclusiveEndDateOf(duration, inclusiveEndDate))\n    .minus({ days: 1 })\n    .toFormat(DEFAULT_DATE_FORMAT);\n}\n\n// https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\nexport function intervalsOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n  repeating: number = 2,\n) {\n  return `R${repeating}/${duration}/${exclusiveEndDateOf(\n    duration,\n    inclusiveEndDate,\n  )}`;\n}\n\nexport function quarterEndDate(inclusiveEndDate: string): string {\n  const endDate = DateTime.fromISO(inclusiveEndDate);\n  const endOfQuarter = endDate.endOf('quarter').toFormat(DEFAULT_DATE_FORMAT);\n  if (endOfQuarter === inclusiveEndDate) {\n    return endDate.toFormat(DEFAULT_DATE_FORMAT);\n  }\n  return endDate\n    .startOf('quarter')\n    .minus({ days: 1 })\n    .toFormat(DEFAULT_DATE_FORMAT);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, Entity, Loading, Maybe, Product } from '../types';\nimport { DEFAULT_DURATION } from './duration';\n\nexport type ProductState = {\n  product: Product;\n  entity: Maybe<Entity>;\n  duration: Duration;\n};\n\nexport enum DefaultLoadingAction {\n  UserGroups = 'user-groups',\n  LastCompleteBillingDate = 'billing-date',\n  CostInsightsInitial = 'cost-insights-initial',\n  CostInsightsPage = 'cost-insights-page',\n  CostInsightsProducts = 'cost-insights-products',\n  CostInsightsAlerts = 'cost-insights-alerts',\n}\n\nexport const INITIAL_LOADING_ACTIONS = [\n  DefaultLoadingAction.UserGroups,\n  DefaultLoadingAction.CostInsightsInitial,\n  DefaultLoadingAction.CostInsightsProducts,\n];\n\nexport const getDefaultState = (loadingActions: string[]): Loading => {\n  return loadingActions.reduce(\n    (defaultState, action) => ({ ...defaultState, [action]: true }),\n    {},\n  );\n};\n\nexport const getResetState = (loadingActions: string[]): Loading => {\n  return loadingActions.reduce(\n    (defaultState, action) => ({ ...defaultState, [action]: false }),\n    {},\n  );\n};\n\nexport const getResetStateWithoutInitial = (\n  loadingActions: string[],\n): Loading => {\n  return loadingActions.reduce((defaultState, action) => {\n    const loadingActionState = (INITIAL_LOADING_ACTIONS as string[]).includes(\n      action,\n    )\n      ? false\n      : true;\n    return { ...defaultState, [action]: loadingActionState };\n  }, {});\n};\n\nexport const settledResponseOf = (\n  responses: PromiseSettledResult<Entity | any>[],\n): Array<Maybe<Entity>> => {\n  return responses.map(response =>\n    response.status === 'fulfilled' ? response.value : null,\n  );\n};\n\nexport const initialStatesOf = (\n  products: Product[],\n  responses: Array<Maybe<Entity>>,\n): ProductState[] => {\n  return products.map((product, index) => ({\n    entity: responses[index],\n    product: product,\n    duration: DEFAULT_DURATION,\n  }));\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createStyles,\n  emphasize,\n  darken,\n  getLuminance,\n  lighten,\n  makeStyles,\n} from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport { CostInsightsTheme, CostInsightsThemeOptions } from '../types';\n\nexport const costInsightsLightTheme = {\n  palette: {\n    blue: '#509AF5',\n    lightBlue: '#9BF0E1',\n    darkBlue: '#4101F5',\n    magenta: '#DC148C',\n    yellow: '#FFC864',\n    tooltip: {\n      background: '#171717',\n      color: '#DDD',\n    },\n    navigationText: '#b5b5b5',\n    alertBackground: 'rgba(219, 219, 219, 0.13)',\n    dataViz: [\n      '#509BF5',\n      '#4B917D',\n      '#FF6437',\n      '#F573A0',\n      '#F59B23',\n      '#B49BC8',\n      '#C39687',\n      '#A0C3D2',\n      '#FFC864',\n      '#BABABA',\n    ],\n  },\n} as CostInsightsThemeOptions;\n\n// Higher tonal values from light theme (Google recommends 600 -> 200)\n// https://material.io/design/color/the-color-system.html#tools-for-picking-colors\nexport const costInsightsDarkTheme = {\n  palette: {\n    blue: '#77b8f9',\n    lightBlue: '#d8f9f4',\n    darkBlue: '#b595fd',\n    magenta: '#ee93cd',\n    yellow: '#fff2da',\n    tooltip: {\n      background: '#EEE',\n      color: '#424242',\n    },\n    navigationText: '#b5b5b5',\n    alertBackground: 'rgba(32, 32, 32, 0.13)',\n    dataViz: [\n      '#8accff',\n      '#7bc2ac',\n      '#ff9664',\n      '#ffa5d1',\n      '#ffcc57',\n      '#e6ccfb',\n      '#f7c7b7',\n      '#d2f6ff',\n      '#fffb94',\n      '#ececec',\n    ],\n  },\n} as CostInsightsThemeOptions;\n\n// The opposite of MUI's emphasize function - darken darks, lighten lights\nexport function brighten(color: string, coefficient = 0.2) {\n  return getLuminance(color) > 0.5\n    ? lighten(color, coefficient)\n    : darken(color, coefficient);\n}\n\nexport const useCostOverviewStyles = (theme: CostInsightsTheme) => ({\n  axis: {\n    fill: theme.palette.text.primary,\n  },\n  container: {\n    height: 450,\n    width: 1200,\n  },\n  cartesianGrid: {\n    stroke: theme.palette.textVerySubtle,\n  },\n  chart: {\n    margin: {\n      right: 30,\n      top: 16,\n    },\n  },\n  yAxis: {\n    width: 75,\n  },\n});\n\nexport const useOverviewTabsStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) => ({\n    default: {\n      padding: theme.spacing(2),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary,\n      textTransform: 'uppercase',\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n  }),\n);\n\nexport const useBarChartStyles = (theme: CostInsightsTheme) => ({\n  axis: {\n    fill: theme.palette.text.primary,\n  },\n  barChart: {\n    margin: {\n      left: 16,\n      right: 16,\n    },\n  },\n  cartesianGrid: {\n    stroke: theme.palette.textVerySubtle,\n  },\n  cursor: {\n    fill: theme.palette.textVerySubtle,\n    fillOpacity: 0.3,\n  },\n  container: {\n    height: 400,\n    width: 1200,\n  },\n  infoIcon: {\n    marginLeft: 2,\n    fontSize: '1.25em',\n  },\n  xAxis: {\n    height: 50,\n  },\n});\n\nexport const useBarChartLayoutStyles = makeStyles<BackstageTheme>(theme =>\n  createStyles({\n    wrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    legend: {\n      paddingBottom: theme.spacing(2),\n    },\n  }),\n);\n\nexport const useBarChartStepperButtonStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      root: {\n        ...theme.typography.button,\n        boxSizing: 'border-box',\n        transition: theme.transitions.create(\n          ['background-color', 'box-shadow', 'border'],\n          {\n            duration: theme.transitions.duration.short,\n          },\n        ),\n        borderRadius: '50%',\n        padding: 0,\n        width: 40,\n        height: 40,\n        boxShadow: theme.shadows[6],\n        '&:active': {\n          boxShadow: theme.shadows[12],\n        },\n        color: theme.palette.text.primary,\n        backgroundColor: lighten(theme.palette.background.default, 0.1),\n        '&:hover': {\n          backgroundColor: lighten(theme.palette.background.default, 0.2),\n          textDecoration: 'none',\n        },\n      },\n    }),\n);\n\nexport const useBarChartLabelStyles = makeStyles<BackstageTheme>(theme =>\n  createStyles({\n    foreignObject: {\n      textAlign: 'center',\n    },\n    label: {\n      fontWeight: theme.typography.fontWeightBold,\n      display: 'block',\n      textDecoration: 'none',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n    },\n    infoIcon: {\n      marginLeft: 2,\n      fontSize: '1.25em',\n    },\n    button: {\n      textTransform: 'none',\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.fontSize,\n    },\n  }),\n);\n\nexport const useCostInsightsStyles = makeStyles<BackstageTheme>(theme => ({\n  h6Subtle: {\n    ...theme.typography.h6,\n    fontWeight: 'normal',\n    color: theme.palette.textSubtle,\n  },\n}));\n\nexport const useCostInsightsTabsStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) => ({\n    tabs: {\n      borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n      backgroundColor: brighten(theme.palette.background.default),\n      padding: theme.spacing(0, 4),\n    },\n    tab: {\n      minHeight: 68,\n      minWidth: 180,\n      padding: theme.spacing(1, 4),\n      '&:hover': {\n        color: 'inherit',\n        backgroundColor: 'inherit',\n      },\n    },\n    indicator: {\n      backgroundColor: theme.palette.navigation.indicator,\n      height: 4,\n    },\n    tabLabel: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    tabLabelText: {\n      fontSize: theme.typography.fontSize,\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    menuItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      minWidth: 180,\n      padding: theme.spacing(2, 2),\n    },\n    menuItemSelected: {\n      backgroundColor: lighten(theme.palette.background.default, 0.3),\n    },\n  }),\n);\n\nexport const useAlertCardActionHeaderStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        paddingBottom: theme.spacing(2),\n        borderRadius: 'unset',\n      },\n      title: {\n        fontSize: theme.typography.fontSize,\n        fontWeight: theme.typography.fontWeightBold,\n        lineHeight: 1.5,\n      },\n      action: {\n        margin: 0,\n      },\n    }),\n);\n\nexport const useCostGrowthStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      excess: {\n        color: theme.palette.status.error,\n      },\n      savings: {\n        color: theme.palette.status.ok,\n      },\n      indicator: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n      },\n    }),\n);\n\nexport const useCostGrowthLegendStyles = makeStyles<BackstageTheme>(theme => ({\n  h5: {\n    ...theme.typography.h5,\n    fontWeight: 500,\n    padding: 0,\n  },\n  marker: {\n    display: 'inherit',\n    marginRight: theme.spacing(1),\n  },\n  helpIcon: {\n    display: 'inherit',\n  },\n  title: {\n    ...theme.typography.overline,\n    fontWeight: 500,\n    lineHeight: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.textSubtle,\n  },\n  tooltip: {\n    display: 'block',\n    padding: theme.spacing(1),\n    backgroundColor: theme.palette.navigation.background,\n  },\n  tooltipText: {\n    color: theme.palette.background.default,\n    fontSize: theme.typography.fontSize,\n    lineHeight: 1.5,\n  },\n}));\n\nexport const useBarChartStepperStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      paper: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-around',\n        alignItems: 'center',\n        background: 'transparent',\n        padding: 8,\n      },\n      step: {\n        backgroundColor: theme.palette.action.disabled,\n        borderRadius: '50%',\n        width: 9,\n        height: 9,\n        margin: '0 2px',\n      },\n      stepActive: {\n        backgroundColor: theme.palette.primary.main,\n      },\n      steps: {\n        display: 'flex',\n        flexDirection: 'row',\n      },\n      backButton: {\n        position: 'absolute',\n        left: 0,\n        top: 'calc(50% - 60px)',\n        zIndex: 100,\n      },\n      nextButton: {\n        position: 'absolute',\n        right: 0,\n        top: 'calc(50% - 60px)',\n        zIndex: 100,\n      },\n    }),\n);\n\nexport const useNavigationStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      menuList: {\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: theme.palette.navigation.background,\n        minWidth: 250,\n      },\n      menuItem: {\n        background: 'transparent',\n        border: 0,\n        textTransform: 'none',\n        width: '100%',\n        minHeight: theme.spacing(6),\n        margin: theme.spacing(0.5, 2, 0.5, 0),\n      },\n      listItemIcon: {\n        minWidth: 40,\n      },\n      navigationIcon: {\n        fill: theme.palette.navigationText,\n      },\n      title: {\n        whiteSpace: 'nowrap',\n        lineHeight: 1,\n        color: theme.palette.navigationText,\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    }),\n);\n\nexport const useTooltipStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      tooltip: {\n        backgroundColor: theme.palette.tooltip.background,\n        borderRadius: theme.shape.borderRadius,\n        boxShadow: theme.shadows[1],\n        color: theme.palette.tooltip.color,\n        fontSize: theme.typography.fontSize,\n        minWidth: 300,\n      },\n      maxWidth: {\n        maxWidth: 300,\n      },\n      actions: {\n        padding: theme.spacing(2),\n      },\n      header: {\n        padding: theme.spacing(2),\n      },\n      content: {\n        padding: theme.spacing(2),\n      },\n      lensIcon: {\n        fontSize: `.75rem`,\n      },\n      divider: {\n        backgroundColor: emphasize(theme.palette.divider, 1),\n      },\n      truncate: {\n        maxWidth: 200,\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n      },\n      subtitle: {\n        fontStyle: 'italic',\n      },\n    }),\n);\n\nexport const useAlertInsightsSectionStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      button: {\n        backgroundColor: theme.palette.textVerySubtle,\n        color: theme.palette.text.primary,\n      },\n    }),\n);\n\nexport const useSelectStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      select: {\n        minWidth: 200,\n        textAlign: 'start',\n        backgroundColor: theme.palette.background.paper,\n      },\n      menuItem: {\n        minWidth: 200,\n        padding: theme.spacing(2),\n        '&.compact': {\n          padding: theme.spacing(1, 2),\n        },\n      },\n    }),\n);\n\nexport const useActionItemCardStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      card: {\n        boxShadow: 'none',\n      },\n      avatar: {\n        backgroundColor: theme.palette.textVerySubtle,\n        color: theme.palette.text.primary,\n      },\n      root: {\n        minHeight: 80,\n        paddingBottom: theme.spacing(2),\n        borderRadius: theme.shape.borderRadius,\n      },\n      activeRoot: {\n        cursor: 'pointer',\n        transition: theme.transitions.create('background', {\n          duration: theme.transitions.duration.short,\n        }),\n        '&:hover': {\n          background: theme.palette.alertBackground,\n        },\n      },\n      action: {\n        margin: 0,\n      },\n      title: {\n        fontSize: theme.typography.fontSize,\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    }),\n);\n\nexport const useProductInsightsCardStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        padding: theme.spacing(2, 2, 2, 2.5), // restore backstage default padding\n      },\n      action: {\n        margin: 0, // unset negative margins\n      },\n    }),\n);\n\nexport const useProductInsightsChartStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      indicator: {\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: '1.25rem',\n      },\n      actions: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      },\n    }),\n);\n\nexport const useBackdropStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        zIndex: theme.zIndex.modal,\n      },\n    }),\n);\n\nexport const useSubtleTypographyStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        color: theme.palette.textSubtle,\n      },\n    }),\n);\n\nexport const useEntityDialogStyles = makeStyles<BackstageTheme>(theme =>\n  createStyles({\n    dialogContent: {\n      padding: 0,\n    },\n    dialogTitle: {\n      padding: 0,\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n      zIndex: 100,\n    },\n    row: {\n      fontSize: theme.typography.fontSize * 1.25,\n    },\n    rowTotal: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    colFirst: {\n      paddingLeft: theme.spacing(2),\n    },\n    colLast: {\n      paddingRight: theme.spacing(2),\n    },\n    column: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    growth: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignContent: 'center',\n      justifyContent: 'flex-end',\n    },\n  }),\n);\n\nexport const useAlertDialogStyles = makeStyles((theme: BackstageTheme) =>\n  createStyles({\n    content: {\n      padding: theme.spacing(0, 5, 2, 5),\n    },\n    actions: {\n      padding: theme.spacing(2, 5),\n    },\n    radio: {\n      margin: theme.spacing(-0.5, 0, -0.5, 0),\n    },\n    icon: {\n      color: theme.palette.primary.dark,\n      margin: theme.spacing(2.5, 2.5, 0, 0),\n      padding: 0,\n    },\n  }),\n);\n\nexport const useAlertStatusSummaryButtonStyles = makeStyles(() => ({\n  icon: {\n    transform: 'transform 5s',\n  },\n  clicked: {\n    transform: 'rotate(180deg)',\n  },\n}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n  Dispatch,\n  PropsWithChildren,\n  SetStateAction,\n  useContext,\n  useEffect,\n  useReducer,\n  useState,\n} from 'react';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\nimport { Loading } from '../types';\nimport {\n  DefaultLoadingAction,\n  getDefaultState,\n  INITIAL_LOADING_ACTIONS,\n} from '../utils/loading';\nimport { useBackdropStyles as useStyles } from '../utils/styles';\n\nexport type LoadingContextProps = {\n  state: Loading;\n  dispatch: Dispatch<Partial<SetStateAction<Loading>>>;\n  actions: Array<string>;\n};\n\nexport type MapLoadingToProps<T> = (props: LoadingContextProps) => T;\n\nexport const LoadingContext = createContext<LoadingContextProps | undefined>(\n  undefined,\n);\n\nfunction reducer(prevState: Loading, action: Partial<Loading>): Loading {\n  return {\n    ...prevState,\n    ...action,\n  } as Record<string, boolean>;\n}\n\nexport const LoadingProvider = ({ children }: PropsWithChildren<{}>) => {\n  const classes = useStyles();\n  const actions = INITIAL_LOADING_ACTIONS;\n  const [state, dispatch] = useReducer(reducer, getDefaultState(actions));\n  const [isBackdropVisible, setBackdropVisible] = useState(false);\n\n  useEffect(() => {\n    function displayLoadingBackdrop() {\n      // Initial page loading is handled by progress bar\n      setBackdropVisible(\n        !state[DefaultLoadingAction.CostInsightsInitial] &&\n          Object.values(state).some(l => l),\n      );\n    }\n    displayLoadingBackdrop();\n  }, [state, setBackdropVisible]);\n\n  return (\n    <LoadingContext.Provider value={{ state, actions, dispatch }}>\n      {children}\n      <Backdrop open={isBackdropVisible} classes={classes}>\n        <CircularProgress />\n      </Backdrop>\n    </LoadingContext.Provider>\n  );\n};\n\nexport function useLoading<T>(mapLoadingToProps: MapLoadingToProps<T>): T {\n  const context = useContext(LoadingContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return mapLoadingToProps({\n    state: context.state,\n    actions: context.actions,\n    dispatch: context.dispatch,\n  });\n}\n\nfunction assertNever(): never {\n  throw Error('useLoading cannot be used outside of LoadingProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { costInsightsApiRef } from '../api';\nimport { MapLoadingToProps, useLoading } from './useLoading';\nimport { Group, Maybe } from '../types';\nimport { DefaultLoadingAction } from '../utils/loading';\nimport { useApi, identityApiRef } from '@backstage/core-plugin-api';\nimport { DEFAULT_NAMESPACE, parseEntityRef } from '@backstage/catalog-model';\n\ntype GroupsProviderLoadingProps = {\n  dispatchLoadingGroups: (isLoading: boolean) => void;\n};\n\nconst mapLoadingToProps: MapLoadingToProps<GroupsProviderLoadingProps> = ({\n  dispatch,\n}) => ({\n  dispatchLoadingGroups: (isLoading: boolean) =>\n    dispatch({ [DefaultLoadingAction.UserGroups]: isLoading }),\n});\n\nexport type GroupsContextProps = {\n  groups: Group[];\n};\n\nexport const GroupsContext = React.createContext<\n  GroupsContextProps | undefined\n>(undefined);\n\nexport const GroupsProvider = ({ children }: PropsWithChildren<{}>) => {\n  const identityApi = useApi(identityApiRef);\n  const client = useApi(costInsightsApiRef);\n  const [error, setError] = useState<Maybe<Error>>(null);\n  const { dispatchLoadingGroups } = useLoading(mapLoadingToProps);\n\n  const [groups, setGroups] = useState<Maybe<Group[]>>(null);\n\n  useEffect(() => {\n    dispatchLoadingGroups(true);\n\n    async function getUserGroups() {\n      try {\n        const { userEntityRef } = await identityApi.getBackstageIdentity();\n        const { name: userId } = parseEntityRef(userEntityRef, {\n          defaultKind: 'User',\n          defaultNamespace: DEFAULT_NAMESPACE,\n        });\n        const g = await client.getUserGroups(userId);\n        setGroups(g);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingGroups(false);\n      }\n    }\n\n    getUserGroups();\n  }, [client]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  if (!groups) return null;\n\n  return (\n    <GroupsContext.Provider value={{ groups: groups }}>\n      {children}\n    </GroupsContext.Provider>\n  );\n};\n\nexport function useGroups(): Group[] {\n  const context = useContext(GroupsContext);\n  return context ? context.groups : assertNever();\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useGroups outside of GroupsProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  Dispatch,\n  PropsWithChildren,\n  SetStateAction,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { Maybe, PageFilters, ProductFilters } from '../types';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  stringify,\n  validate,\n  getInitialPageState,\n  getInitialProductState,\n} from '../utils/history';\nimport { useGroups } from './useGroups';\nimport { useConfig } from './useConfig';\n\nexport type FilterContextProps = {\n  pageFilters: PageFilters;\n  productFilters: ProductFilters;\n  setPageFilters: Dispatch<SetStateAction<Maybe<PageFilters>>>;\n  setProductFilters: Dispatch<SetStateAction<Maybe<ProductFilters>>>;\n};\n\nexport type MapFiltersToProps<T> = (props: FilterContextProps) => T;\n\nexport const FilterContext = React.createContext<\n  FilterContextProps | undefined\n>(undefined);\n\nexport const FilterProvider = ({ children }: PropsWithChildren<{}>) => {\n  const config = useConfig();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const groups = useGroups();\n  const [error, setError] = useState<Maybe<Error>>(null);\n  const [pageFilters, setPageFilters] = useState<Maybe<PageFilters>>(null);\n  const [productFilters, setProductFilters] =\n    useState<Maybe<ProductFilters>>(null);\n\n  useEffect(() => {\n    async function setPageFiltersFromLocation() {\n      try {\n        // strip extraneous parameters, validate and transform\n        const queryParams = await validate(location.search);\n        const defaultMetric = config.metrics.find(m => m.default)?.kind ?? null;\n\n        // Group or project parameters should override defaults\n        const initialPageState = getInitialPageState(groups, queryParams);\n        const initialProductState = getInitialProductState(config);\n\n        setProductFilters(initialProductState);\n        setPageFilters({ ...initialPageState, metric: defaultMetric });\n      } catch (e) {\n        setError(e);\n      }\n    }\n\n    setPageFiltersFromLocation();\n  }, [groups]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    function setLocationFromPageFilters(filters: PageFilters) {\n      const queryString = stringify({\n        group: filters.group,\n        ...(filters.project ? { project: filters.project } : {}),\n      });\n      // TODO Remove workaround once issue is resolved in react-router\n      // (https://github.com/ReactTraining/react-router/issues/7496)\n      // navigate({ ...location, search: queryString });\n      navigate({ ...location, search: `?${queryString}` });\n    }\n\n    if (pageFilters) {\n      setLocationFromPageFilters(pageFilters);\n    }\n  }, [pageFilters]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  // Wait for filters to load\n  if (!pageFilters || !productFilters) {\n    return null;\n  }\n\n  return (\n    <FilterContext.Provider\n      value={{ pageFilters, productFilters, setPageFilters, setProductFilters }}\n    >\n      {children}\n    </FilterContext.Provider>\n  );\n};\n\nexport function useFilters<T>(mapFiltersToProps: MapFiltersToProps<T>): T {\n  const context = useContext(FilterContext);\n  return context ? mapFiltersToProps(context) : assertNever();\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useFilters outside of FilterProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Dispatch,\n  SetStateAction,\n  useState,\n  useContext,\n  PropsWithChildren,\n} from 'react';\nimport { Maybe } from '../types';\n\nexport type ScrollTo = Maybe<string>;\n\nexport type ScrollContextProps = {\n  scroll: ScrollTo;\n  setScroll: Dispatch<SetStateAction<ScrollTo>>;\n};\n\nexport const ScrollContext = React.createContext<\n  ScrollContextProps | undefined\n>(undefined);\n\nexport const ScrollProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [scroll, setScroll] = useState<ScrollTo>(null);\n  return (\n    <ScrollContext.Provider value={{ scroll, setScroll }}>\n      {children}\n    </ScrollContext.Provider>\n  );\n};\n\nexport enum ScrollType {\n  AlertSummary = 'alert-status-summary',\n}\n\nexport function useScroll() {\n  const context = useContext(ScrollContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.scroll, context.setScroll] as const;\n}\n\nfunction assertNever(): never {\n  throw new Error(`Cannot use useScroll outside ScrollProvider`);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport * as yup from 'yup';\nimport { Alert } from '@material-ui/lab';\nimport { costInsightsApiRef } from '../api';\nimport { MapLoadingToProps, useLoading } from './useLoading';\nimport { DefaultLoadingAction } from '../utils/loading';\nimport { Maybe } from '../types';\nimport { useApi } from '@backstage/core-plugin-api';\n\ntype BillingDateProviderLoadingProps = {\n  dispatchLoadingBillingDate: (isLoading: boolean) => void;\n};\n\nconst mapLoadingToProps: MapLoadingToProps<BillingDateProviderLoadingProps> = ({\n  dispatch,\n}) => ({\n  dispatchLoadingBillingDate: (isLoading: boolean) =>\n    dispatch({ [DefaultLoadingAction.LastCompleteBillingDate]: isLoading }),\n});\n\nexport type BillingDateContextProps = {\n  lastCompleteBillingDate: string; // YYYY-MM-DD\n};\n\nexport const BillingDateContext = React.createContext<\n  BillingDateContextProps | undefined\n>(undefined);\n\nexport const dateRegex: RegExp = /^\\d{4}-\\d{2}-\\d{2}$/;\nconst dateFormatSchema = yup.string().matches(dateRegex, {\n  message:\n    'Unsupported billing date format: ${value}. Date should be in YYYY-MM-DD format.',\n  excludeEmptyString: true,\n});\n\nexport const BillingDateProvider = ({ children }: PropsWithChildren<{}>) => {\n  const client = useApi(costInsightsApiRef);\n  const [error, setError] = useState<Maybe<Error>>(null);\n  const { dispatchLoadingBillingDate } = useLoading(mapLoadingToProps);\n\n  const [lastCompleteBillingDate, setLastCompeteBillingDate] =\n    useState<Maybe<string>>(null);\n\n  useEffect(() => {\n    dispatchLoadingBillingDate(true);\n\n    async function getLastCompleteBillingDate() {\n      try {\n        const d = await client.getLastCompleteBillingDate();\n        const validDate = await dateFormatSchema.validate(d);\n        if (validDate) setLastCompeteBillingDate(validDate);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingBillingDate(false);\n      }\n    }\n\n    getLastCompleteBillingDate();\n  }, [client]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  if (!lastCompleteBillingDate) return null;\n\n  return (\n    <BillingDateContext.Provider\n      value={\n        {\n          lastCompleteBillingDate: lastCompleteBillingDate,\n        } as BillingDateContextProps\n      }\n    >\n      {children}\n    </BillingDateContext.Provider>\n  );\n};\n\nexport function useLastCompleteBillingDate(): string {\n  const context = useContext(BillingDateContext);\n  return context ? context.lastCompleteBillingDate : assertNever();\n}\n\nfunction assertNever(): never {\n  throw Error(\n    'Cannot use useLastCompleteBillingDate outside of BillingDateProvider',\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useState,\n  forwardRef,\n  ChangeEvent,\n  FormEventHandler,\n} from 'react';\nimport { Checkbox, FormControl, FormControlLabel } from '@material-ui/core';\nimport { Alert, AlertFormProps } from '../types';\n\nexport type AlertAcceptFormProps = AlertFormProps<Alert, null>;\n\nexport const AlertAcceptForm = forwardRef<\n  HTMLFormElement,\n  AlertAcceptFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const [checked, setChecked] = useState(false);\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    onSubmit(null);\n  };\n\n  const onChecked = (_: ChangeEvent<HTMLInputElement>, isChecked: boolean) => {\n    setChecked(isChecked);\n    disableSubmit(!isChecked);\n  };\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <FormControlLabel\n          label=\"My team can commit to making this change soon, or has already.\"\n          value={checked}\n          control={\n            <Checkbox color=\"primary\" checked={checked} onChange={onChecked} />\n          }\n        />\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n} from 'react';\nimport { DateTime } from 'luxon';\nimport {\n  Box,\n  FormControl,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  Typography,\n} from '@material-ui/core';\nimport {\n  Alert,\n  AlertFormProps,\n  Duration,\n  DEFAULT_DATE_FORMAT,\n  Maybe,\n  AlertSnoozeFormData,\n  AlertSnoozeOptions,\n} from '../types';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\nimport { intervalsOf } from '../utils/duration';\n\nexport type AlertSnoozeFormProps = AlertFormProps<Alert, AlertSnoozeFormData>;\n\nexport const AlertSnoozeForm = forwardRef<\n  HTMLFormElement,\n  AlertSnoozeFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [duration, setDuration] = useState<Maybe<Duration>>(Duration.P7D);\n\n  useEffect(() => disableSubmit(false), [disableSubmit]);\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    if (duration) {\n      const repeatInterval = 1;\n      const today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n      onSubmit({\n        intervals: intervalsOf(duration, today, repeatInterval),\n      });\n    }\n  };\n\n  const onSnoozeDurationChange = (\n    _: ChangeEvent<HTMLInputElement>,\n    value: string,\n  ) => {\n    setDuration(value as Duration);\n  };\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>For how long?</b>\n        </Typography>\n        <Box mb={1}>\n          <RadioGroup\n            name=\"snooze-alert-options\"\n            value={duration}\n            onChange={onSnoozeDurationChange}\n          >\n            {AlertSnoozeOptions.map(option => (\n              <FormControlLabel\n                key={`snooze-alert-option-${option.duration}`}\n                label={option.label}\n                value={option.duration}\n                control={<Radio className={classes.radio} />}\n              />\n            ))}\n          </RadioGroup>\n        </Box>\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n} from 'react';\nimport {\n  Box,\n  Collapse,\n  FormControl,\n  FormControlLabel,\n  TextField,\n  Typography,\n  Radio,\n  RadioGroup,\n} from '@material-ui/core';\nimport {\n  Alert,\n  AlertFormProps,\n  AlertDismissReason,\n  AlertDismissOptions,\n  AlertDismissFormData,\n  Maybe,\n} from '../types';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\n\nexport type AlertDismissFormProps = AlertFormProps<Alert, AlertDismissFormData>;\n\nexport const AlertDismissForm = forwardRef<\n  HTMLFormElement,\n  AlertDismissFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [other, setOther] = useState<Maybe<string>>(null);\n  const [feedback, setFeedback] = useState<Maybe<string>>(null);\n  const [reason, setReason] = useState<AlertDismissReason>(\n    AlertDismissReason.Resolved,\n  );\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    if (reason) {\n      onSubmit({\n        other: other,\n        reason: reason,\n        feedback: feedback,\n      });\n    }\n  };\n\n  const onReasonChange = (_: ChangeEvent<HTMLInputElement>, value: string) => {\n    if (other) {\n      setOther(null);\n    }\n    setReason(value as AlertDismissReason);\n  };\n\n  const onOtherChange = (e: ChangeEvent<HTMLInputElement>) => {\n    return e.target.value\n      ? setOther(e.target.value as AlertDismissReason)\n      : setOther(null);\n  };\n\n  const onFeedbackChange = (e: ChangeEvent<HTMLInputElement>) => {\n    return e.target.value\n      ? setFeedback(e.target.value as AlertDismissReason)\n      : setFeedback(null);\n  };\n\n  useEffect(() => {\n    function validateDismissForm() {\n      if (reason === AlertDismissReason.Other) {\n        if (other) {\n          disableSubmit(false);\n        } else {\n          disableSubmit(true);\n        }\n      } else if (reason) {\n        disableSubmit(false);\n      } else {\n        disableSubmit(true);\n      }\n    }\n\n    validateDismissForm();\n  }, [reason, other, disableSubmit]);\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>Reason for dismissing?</b>\n        </Typography>\n        <Box mb={1}>\n          <RadioGroup\n            name=\"dismiss-alert-reasons\"\n            value={reason}\n            onChange={onReasonChange}\n          >\n            {AlertDismissOptions.map(option => (\n              <FormControlLabel\n                key={`dismiss-alert-option-${option.reason}`}\n                label={option.label}\n                value={option.reason}\n                control={<Radio className={classes.radio} />}\n              />\n            ))}\n          </RadioGroup>\n          <Collapse in={reason === AlertDismissReason.Other}>\n            <Box ml={4}>\n              <TextField\n                id=\"dismiss-alert-option-other\"\n                variant=\"outlined\"\n                multiline\n                fullWidth\n                rows={4}\n                value={other ?? ''}\n                onChange={onOtherChange}\n              />\n            </Box>\n          </Collapse>\n        </Box>\n        <Typography gutterBottom>\n          <b>Any other feedback you can provide?</b>\n        </Typography>\n        <TextField\n          id=\"dismiss-alert-feedback\"\n          variant=\"outlined\"\n          multiline\n          rows={4}\n          fullWidth\n          value={feedback ?? ''}\n          onChange={onFeedbackChange}\n        />\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Alert, AlertForm, AlertStatus, Maybe } from '../types';\nimport { AlertAcceptForm, AlertDismissForm, AlertSnoozeForm } from '../forms';\n\nconst createAlertHandler = (status?: AlertStatus) => (alert: Alert) =>\n  alert.status === status;\nexport const isAlertActive = (alert: Alert) => !hasProperty(alert, 'status');\nexport const isAlertSnoozed = createAlertHandler(AlertStatus.Snoozed);\nexport const isAlertAccepted = createAlertHandler(AlertStatus.Accepted);\nexport const isAlertDismissed = createAlertHandler(AlertStatus.Dismissed);\n\nconst createStatusHandler = (status: AlertStatus) => (s: Maybe<AlertStatus>) =>\n  s === status;\nexport const isStatusSnoozed = createStatusHandler(AlertStatus.Snoozed);\nexport const isStatusAccepted = createStatusHandler(AlertStatus.Accepted);\nexport const isStatusDismissed = createStatusHandler(AlertStatus.Dismissed);\n\nconst createAlertEventHandler =\n  (onEvent: 'onSnoozed' | 'onAccepted' | 'onDismissed') =>\n  (alert: Maybe<Alert>): boolean =>\n    hasProperty(alert, onEvent);\nexport const isSnoozeEnabled = createAlertEventHandler('onSnoozed');\nexport const isAcceptEnabled = createAlertEventHandler('onAccepted');\nexport const isDismissEnabled = createAlertEventHandler('onDismissed');\n\nconst createFormEnabledHandler =\n  (Form: 'SnoozeForm' | 'AcceptForm' | 'DismissForm') =>\n  (alert: Maybe<Alert>): boolean => {\n    if (!alert) return false;\n    if (alert[Form] === null) return false;\n    switch (Form) {\n      case 'SnoozeForm':\n        return isSnoozeEnabled(alert);\n      case 'AcceptForm':\n        return isAcceptEnabled(alert);\n      case 'DismissForm':\n        return isDismissEnabled(alert);\n      default:\n        return false;\n    }\n  };\nexport const isSnoozeFormEnabled = createFormEnabledHandler('SnoozeForm');\nexport const isAcceptFormEnabled = createFormEnabledHandler('AcceptForm');\nexport const isDismissFormEnabled = createFormEnabledHandler('DismissForm');\n\n/**\n * Utility for determining if a form is disabled.\n * When a form is disabled, the dialog button's type should convert from submit to button.\n * @param alert\n * @param status\n */\nexport const isFormDisabled = (\n  alert: Maybe<Alert>,\n  status: Maybe<AlertStatus>,\n): boolean => {\n  switch (status) {\n    case AlertStatus.Snoozed:\n      return alert?.SnoozeForm === null;\n    case AlertStatus.Accepted:\n      return alert?.AcceptForm === null;\n    case AlertStatus.Dismissed:\n      return alert?.DismissForm === null;\n    default:\n      return false;\n  }\n};\n\nexport function formOf(\n  alert: Maybe<Alert>,\n  status: Maybe<AlertStatus>,\n): Maybe<AlertForm> {\n  switch (status) {\n    case AlertStatus.Snoozed: {\n      const SnoozeForm = alert?.SnoozeForm ?? AlertSnoozeForm;\n      return isSnoozeFormEnabled(alert) ? SnoozeForm : null;\n    }\n    case AlertStatus.Accepted: {\n      const AcceptForm = alert?.AcceptForm ?? AlertAcceptForm;\n      return isAcceptFormEnabled(alert) ? AcceptForm : null;\n    }\n    case AlertStatus.Dismissed: {\n      const DismissForm = alert?.DismissForm ?? AlertDismissForm;\n      return isDismissFormEnabled(alert) ? DismissForm : null;\n    }\n    default:\n      return null;\n  }\n}\n\n/**\n * Utility for choosing from a fixed set of values for a given alert status.\n * @param status\n * @param values\n */\nexport function choose<T>(\n  status: Maybe<AlertStatus>,\n  values: [T, T, T],\n  none: T,\n): T {\n  switch (status) {\n    case AlertStatus.Snoozed:\n      return values[0];\n    case AlertStatus.Accepted:\n      return values[1];\n    case AlertStatus.Dismissed:\n      return values[2];\n    default:\n      return none;\n  }\n}\n\nexport function hasProperty(alert: Maybe<Alert>, prop: keyof Alert): boolean {\n  return prop in (alert ?? {});\n}\n\nexport const sumOfAllAlerts = (sum: number, alerts: Alert[]) =>\n  sum + alerts.length;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport {\n  createTheme as createMuiTheme,\n  ThemeProvider,\n} from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  costInsightsDarkTheme,\n  costInsightsLightTheme,\n} from '../../utils/styles';\nimport { CostInsightsTheme } from '../../types';\n\nexport const CostInsightsThemeProvider = ({\n  children,\n}: PropsWithChildren<{}>) => {\n  return (\n    <ThemeProvider\n      theme={(theme: BackstageTheme) =>\n        createMuiTheme({\n          ...theme,\n          palette: {\n            ...theme.palette,\n            ...(theme.palette.type === 'dark'\n              ? costInsightsDarkTheme.palette\n              : costInsightsLightTheme.palette),\n          },\n        }) as CostInsightsTheme\n      }\n    >\n      {children}\n    </ThemeProvider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, Button, Container, makeStyles } from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport { CostInsightsThemeProvider } from '../CostInsightsPage/CostInsightsThemeProvider';\nimport { ConfigProvider, CurrencyProvider } from '../../hooks';\nimport { Header, Page } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n    padding: theme.spacing(4),\n  },\n}));\n\ntype AlertInstructionsLayoutProps = {\n  title: string;\n};\n\nexport const AlertInstructionsLayout = ({\n  title,\n  children,\n}: PropsWithChildren<AlertInstructionsLayoutProps>) => {\n  const classes = useStyles();\n  return (\n    <CostInsightsThemeProvider>\n      <ConfigProvider>\n        <CurrencyProvider>\n          <Page themeId=\"tool\">\n            <Header\n              title=\"Cost Insights\"\n              pageTitleOverride={title}\n              type=\"Tool\"\n            />\n            <Container maxWidth=\"md\" disableGutters className={classes.root}>\n              <Box mb={3}>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<ChevronLeftIcon />}\n                  href=\"/cost-insights\"\n                >\n                  Back to Cost Insights\n                </Button>\n              </Box>\n              {children}\n            </Container>\n          </Page>\n        </CurrencyProvider>\n      </ConfigProvider>\n    </CostInsightsThemeProvider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { useBarChartLabelStyles } from '../../utils/styles';\n\ntype BarChartLabelProps = {\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  details?: JSX.Element;\n};\n\nexport const BarChartLabel = ({\n  x,\n  y,\n  height,\n  width,\n  details,\n  children,\n}: PropsWithChildren<BarChartLabelProps>) => {\n  const classes = useBarChartLabelStyles();\n  const translateX = width * -0.5;\n\n  return (\n    <foreignObject\n      className={classes.foreignObject}\n      style={{ transform: `translateX(${translateX}px)` }}\n      x={x}\n      y={y}\n      height={height}\n      width={width}\n    >\n      <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\n        <Typography className={classes.label} gutterBottom>\n          {children}\n        </Typography>\n        {details}\n      </Box>\n    </foreignObject>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BarChartLabel } from './BarChartLabel';\n\ntype BarChartTickProps = {\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  payload: {\n    value: any;\n  };\n  visibleTicksCount: number;\n  details?: JSX.Element;\n};\n\nexport const BarChartTick = ({\n  x,\n  y,\n  height,\n  width,\n  payload,\n  visibleTicksCount,\n  details,\n}: BarChartTickProps) => {\n  const gutterWidth = 5;\n  const labelWidth = width / visibleTicksCount - gutterWidth * 2;\n  return (\n    <BarChartLabel\n      x={x}\n      y={y}\n      height={height}\n      width={labelWidth}\n      details={details}\n    >\n      {!payload.value ? 'Unlabeled' : payload.value}\n    </BarChartLabel>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { forwardRef, PropsWithChildren, Ref } from 'react';\nimport { ButtonBase, ButtonBaseProps } from '@material-ui/core';\nimport { useBarChartStepperButtonStyles as useStyles } from '../../utils/styles';\n\ninterface BarChartStepperButtonProps extends ButtonBaseProps {\n  name: string;\n}\n\nexport const BarChartStepperButton = forwardRef(\n  (\n    {\n      name,\n      children,\n      ...buttonBaseProps\n    }: PropsWithChildren<BarChartStepperButtonProps>,\n    ref: Ref<HTMLButtonElement>,\n  ) => {\n    const classes = useStyles();\n    return (\n      <ButtonBase\n        ref={ref}\n        classes={classes}\n        disableRipple\n        data-testid={`bar-chart-stepper-button-${name}`}\n        {...buttonBaseProps}\n      >\n        {children}\n      </ButtonBase>\n    );\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ButtonBase } from '@material-ui/core';\nimport { useBarChartStepperStyles as useStyles } from '../../utils/styles';\n\nexport type BarChartStepsProps = {\n  steps: number;\n  activeStep: number;\n  onClick: (index: number) => void;\n};\n\nexport const BarChartSteps = ({\n  steps,\n  activeStep,\n  onClick,\n}: BarChartStepsProps) => {\n  const classes = useStyles();\n  const handleOnClick =\n    (index: number) =>\n    (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      event.preventDefault();\n      onClick(index);\n    };\n\n  return (\n    <div className={classes.steps}>\n      {[...new Array(steps)].map((_, index) => (\n        <ButtonBase key={index} centerRipple onClick={handleOnClick(index)}>\n          <div\n            data-testid=\"bar-chart-step\"\n            className={`${classes.step} ${\n              index === activeStep ? classes.stepActive : ''\n            }`}\n          />\n        </ButtonBase>\n      ))}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Paper, Slide } from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { BarChartStepperButton } from './BarChartStepperButton';\nimport { BarChartSteps } from './BarChartSteps';\nimport { useBarChartStepperStyles } from '../../utils/styles';\n\ntype BarChartStepperProps = {\n  disableScroll: boolean;\n  steps: number;\n  onChange: (activeStep: number) => void;\n};\n\nexport const BarChartStepper = ({\n  steps,\n  disableScroll,\n  onChange,\n}: BarChartStepperProps) => {\n  const classes = useBarChartStepperStyles();\n  const [activeStep, setActiveStep] = useState(0);\n\n  /*\n   * This calc determines how many active steps to display in the stepper.\n   * If the chart is displaying a large amount of resources,\n   * the total dots are truncated to 10. As the user clicks forward,\n   * eventually, there might be resources \"left over\" in excess of the ten dot limit.\n   * Once the user has reached that threshold, the difference should appear constant\n   * as the user clicks through the remaining resources and no extra dots should be displayed.\n   */\n\n  const diff = steps % 10;\n  const stepsRemaining = steps - activeStep <= diff ? diff : steps;\n  const displayedStep = activeStep % 10;\n\n  useEffect(() => {\n    onChange(activeStep);\n  }, [activeStep, onChange]);\n\n  const handleNext = () => {\n    setActiveStep(prevStep => prevStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevStep => prevStep - 1);\n  };\n\n  const handleClick = (index: number) => {\n    setActiveStep(prevStep => {\n      const offset = index - (prevStep % 10);\n      return prevStep + offset;\n    });\n  };\n\n  return (\n    <Paper\n      data-testid=\"bar-chart-stepper\"\n      square\n      elevation={0}\n      className={classes.paper}\n    >\n      <Slide\n        direction=\"right\"\n        in={!disableScroll && activeStep !== 0}\n        mountOnEnter\n        unmountOnExit\n      >\n        <BarChartStepperButton\n          name=\"back\"\n          className={classes.backButton}\n          onClick={handleBack}\n        >\n          <ChevronLeftIcon />\n        </BarChartStepperButton>\n      </Slide>\n      <BarChartSteps\n        steps={Math.min(10, stepsRemaining)}\n        activeStep={displayedStep}\n        onClick={handleClick}\n      />\n      <Slide\n        direction=\"left\"\n        in={!disableScroll && activeStep < steps - 1}\n        mountOnEnter\n        unmountOnExit\n      >\n        <BarChartStepperButton\n          name=\"next\"\n          className={classes.nextButton}\n          onClick={handleNext}\n        >\n          <ChevronRightIcon />\n        </BarChartStepperButton>\n      </Slide>\n    </Paper>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode, PropsWithChildren } from 'react';\nimport classnames from 'classnames';\nimport { Box, Divider, Typography } from '@material-ui/core';\nimport { useTooltipStyles as useStyles } from '../../utils/styles';\n\nexport type BarChartTooltipProps = {\n  title: string;\n  content?: ReactNode | string;\n  subtitle?: ReactNode;\n  topRight?: ReactNode;\n  actions?: ReactNode;\n};\n\nexport const BarChartTooltip = ({\n  title,\n  content,\n  subtitle,\n  topRight,\n  actions,\n  children,\n}: PropsWithChildren<BarChartTooltipProps>) => {\n  const classes = useStyles();\n  const titleClassName = classnames(classes.truncate, {\n    [classes.maxWidth]: topRight === undefined,\n  });\n\n  return (\n    <Box className={classes.tooltip} display=\"flex\" flexDirection=\"column\">\n      <Box\n        display=\"flex\"\n        flexDirection=\"row\"\n        justifyContent=\"space-between\"\n        alignItems=\"baseline\"\n        px={2}\n        pt={2}\n      >\n        <Box display=\"flex\" flexDirection=\"column\">\n          <Typography className={titleClassName} variant=\"h6\">\n            {title}\n          </Typography>\n          {subtitle && (\n            <Typography className={classes.subtitle} variant=\"subtitle1\">\n              {subtitle}\n            </Typography>\n          )}\n        </Box>\n        {topRight && <Box ml={2}>{topRight}</Box>}\n      </Box>\n      {content && (\n        <Box px={2} pt={2} className={classes.maxWidth}>\n          <Typography variant=\"body1\" paragraph>\n            {content}\n          </Typography>\n        </Box>\n      )}\n      <Box display=\"flex\" flexDirection=\"column\" p={2}>\n        {children}\n      </Box>\n      {actions && (\n        <>\n          <Divider className={classes.divider} variant=\"fullWidth\" />\n          <Box display=\"flex\" flexDirection=\"column\" p={2}>\n            {actions}\n          </Box>\n        </>\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { useTooltipStyles as useStyles } from '../../utils/styles';\n\nexport type TooltipItem = {\n  fill: string;\n  label: string;\n  value: string;\n};\n\nexport type BarChartTooltipItemProps = {\n  item: TooltipItem;\n};\n\nexport const BarChartTooltipItem = ({ item }: BarChartTooltipItemProps) => {\n  const classes = useStyles();\n  return (\n    <Box\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      minHeight={25}\n    >\n      <Box display=\"flex\" alignContent=\"center\" marginRight=\".5em\">\n        <Box display=\"flex\" alignItems=\"center\" marginRight=\".5em\">\n          <LensIcon className={classes.lensIcon} style={{ fill: item.fill }} />\n        </Box>\n        <Typography>{item.label}</Typography>\n      </Box>\n      <Typography display=\"block\">{item.value}</Typography>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport pluralize from 'pluralize';\nimport { ChangeStatistic, Duration } from '../types';\nimport { inclusiveEndDateOf, inclusiveStartDateOf } from '../utils/duration';\nimport { notEmpty } from './assert';\n\nexport type Period = {\n  periodStart: string;\n  periodEnd: string;\n};\n\nexport const costFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nexport const currencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n});\n\nexport const lengthyCurrencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0,\n  minimumSignificantDigits: 2,\n  maximumSignificantDigits: 2,\n});\n\nexport const numberFormatter = new Intl.NumberFormat('en-US', {\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n});\n\nexport const monthFormatter = new Intl.DateTimeFormat('en-US', {\n  timeZone: 'UTC',\n  month: 'long',\n  year: 'numeric',\n});\n\nexport const dateFormatter = new Intl.DateTimeFormat('en-US', {\n  timeZone: 'UTC',\n  day: 'numeric',\n  month: 'short',\n});\n\nexport const monthOf = (date: string): string => {\n  return monthFormatter.format(Date.parse(date));\n};\n\nexport const quarterOf = (date: string): string => {\n  // Supports formatting yyyy-LL-dd and yyyy-'Q'q returned in alerts\n  const d = DateTime.fromISO(date).isValid\n    ? DateTime.fromISO(date)\n    : DateTime.fromFormat(date, \"yyyy-'Q'q\");\n  return d.toFormat(\"'Q'q yyyy\");\n};\n\nexport function formatCurrency(amount: number, currency?: string): string {\n  const n = Math.round(amount);\n  const numString = numberFormatter.format(n);\n\n  return currency ? `${numString} ${pluralize(currency, n)}` : numString;\n}\n\nexport function formatChange(change: ChangeStatistic): string {\n  if (notEmpty(change.ratio)) {\n    return formatPercent(Math.abs(change.ratio));\n  }\n  return change.amount >= 0 ? '∞' : '-∞';\n}\n\nexport function formatPercent(n: number): string {\n  // Number.toFixed shows scientific notation for extreme numbers\n  if (isNaN(n) || Math.abs(n) < 0.01) {\n    return '0%';\n  }\n\n  if (Math.abs(n) > 10) {\n    return `>1000%`;\n  }\n\n  return `${(n * 100).toFixed(0)}%`;\n}\n\nexport function formatLastTwoLookaheadQuarters(inclusiveEndDate: string) {\n  const start = DateTime.fromISO(\n    inclusiveStartDateOf(Duration.P3M, inclusiveEndDate),\n  ).toFormat(\"'Q'q yyyy\");\n  const end = DateTime.fromISO(\n    inclusiveEndDateOf(Duration.P3M, inclusiveEndDate),\n  ).toFormat(\"'Q'q yyyy\");\n  return `${start} vs ${end}`;\n}\n\nconst formatRelativePeriod = (\n  duration: Duration,\n  date: string,\n  isEndDate: boolean,\n): string => {\n  const periodStart = isEndDate ? inclusiveStartDateOf(duration, date) : date;\n  const periodEnd = isEndDate ? date : inclusiveEndDateOf(duration, date);\n  const days = LuxonDuration.fromISO(duration).days;\n  if (![periodStart, periodEnd].includes(date)) {\n    throw new Error(`Invalid relative date ${date} for duration ${duration}`);\n  }\n  return date === periodStart ? `First ${days} Days` : `Last ${days} Days`;\n};\n\nexport function formatPeriod(\n  duration: Duration,\n  date: string,\n  isEndDate: boolean,\n) {\n  switch (duration) {\n    case Duration.P3M:\n      return quarterOf(\n        isEndDate\n          ? inclusiveEndDateOf(duration, date)\n          : inclusiveStartDateOf(duration, date),\n      );\n    default:\n      return formatRelativePeriod(duration, date, isEndDate);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DateAggregation, ResourceData } from '../types';\nimport { ProductState } from './loading';\n\nexport const aggregationSort = (\n  a: DateAggregation,\n  b: DateAggregation,\n): number => a.date.localeCompare(b.date);\n\nexport const resourceSort = (a: ResourceData, b: ResourceData) =>\n  b.previous + b.current - (a.previous + a.current);\n\nexport function totalAggregationSort(a: ProductState, b: ProductState): number {\n  const [prevA, currA] = a.entity?.aggregation ?? [0, 0];\n  const [prevB, currB] = b.entity?.aggregation ?? [0, 0];\n  return prevB + currB - (prevA + currA);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TooltipPayload, TooltipProps } from 'recharts';\nimport { AlertCost, DataKey, Entity, ResourceData } from '../types';\nimport {\n  currencyFormatter,\n  dateFormatter,\n  lengthyCurrencyFormatter,\n} from './formatters';\n\nexport function formatGraphValue(value: number, format?: string) {\n  if (format === 'number') {\n    return value.toLocaleString();\n  }\n\n  if (value < 1) {\n    return lengthyCurrencyFormatter.format(value);\n  }\n\n  return currencyFormatter.format(value);\n}\n\nexport const overviewGraphTickFormatter = (millis: string | number) =>\n  typeof millis === 'number' ? dateFormatter.format(millis) : millis;\n\nexport const tooltipItemOf = (payload: TooltipPayload) => {\n  const value =\n    typeof payload.value === 'number'\n      ? currencyFormatter.format(payload.value)\n      : (payload.value as string);\n  const fill = payload.fill as string;\n\n  switch (payload.dataKey) {\n    case DataKey.Current:\n    case DataKey.Previous:\n      return {\n        label: payload.name,\n        value: value,\n        fill: fill,\n      };\n    default:\n      return null;\n  }\n};\n\nexport const resourceOf = (entity: Entity | AlertCost): ResourceData => ({\n  name: entity.id,\n  previous: entity.aggregation[0],\n  current: entity.aggregation[1],\n});\n\nexport const titleOf = (label?: string | number) => {\n  return label ? String(label) : 'Unlabeled';\n};\n\nexport const isInvalid = ({ label, payload }: TooltipProps) => {\n  // null labels are empty strings, which are valid\n  return label === undefined || !payload || !payload.length;\n};\n\nexport const isLabeled = (data?: Record<'activeLabel', string | undefined>) => {\n  return data?.activeLabel && data?.activeLabel !== '';\n};\n\nexport const isUnlabeled = (\n  data?: Record<'activeLabel', string | undefined>,\n) => {\n  return data?.activeLabel === '';\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\nimport {\n  Bar,\n  BarChart as RechartsBarChart,\n  CartesianGrid,\n  ContentRenderer,\n  TooltipProps as RechartsTooltipProps,\n  RechartsFunction,\n  ResponsiveContainer,\n  Tooltip as RechartsTooltip,\n  XAxis,\n  YAxis,\n} from 'recharts';\nimport { Box, useTheme } from '@material-ui/core';\nimport { BarChartTick } from './BarChartTick';\nimport { BarChartStepper } from './BarChartStepper';\nimport { BarChartTooltip } from './BarChartTooltip';\nimport { BarChartTooltipItem } from './BarChartTooltipItem';\nimport { currencyFormatter } from '../../utils/formatters';\nimport {\n  BarChartData,\n  ResourceData,\n  DataKey,\n  CostInsightsTheme,\n} from '../../types';\nimport { notEmpty } from '../../utils/assert';\nimport { useBarChartStyles } from '../../utils/styles';\nimport { resourceSort } from '../../utils/sort';\nimport { isInvalid, titleOf, tooltipItemOf } from '../../utils/graphs';\n\nexport const defaultTooltip: ContentRenderer<RechartsTooltipProps> = ({\n  label,\n  payload = [],\n}) => {\n  if (isInvalid({ label, payload })) return null;\n\n  const title = titleOf(label);\n  const items = payload.map(tooltipItemOf).filter(notEmpty);\n  return (\n    <BarChartTooltip title={title}>\n      {items.map((item, index) => (\n        <BarChartTooltipItem key={`${item.label}-${index}`} item={item} />\n      ))}\n    </BarChartTooltip>\n  );\n};\n\nexport type BarChartProps = {\n  resources: ResourceData[];\n  responsive?: boolean;\n  displayAmount?: number;\n  options?: Partial<BarChartData>;\n  tooltip?: ContentRenderer<RechartsTooltipProps>;\n  onClick?: RechartsFunction;\n  onMouseMove?: RechartsFunction;\n};\n\nexport const BarChart = ({\n  resources,\n  responsive = true,\n  displayAmount = 6,\n  options = {},\n  tooltip = defaultTooltip,\n  onClick,\n  onMouseMove,\n}: BarChartProps) => {\n  const theme = useTheme<CostInsightsTheme>();\n  const styles = useBarChartStyles(theme);\n  const [activeChart, setActiveChart] = useState(false);\n  const [stepWindow, setStepWindow] = useState(() => [0, displayAmount]);\n\n  const data = Object.assign(\n    {\n      previousFill: theme.palette.lightBlue,\n      currentFill: theme.palette.darkBlue,\n      previousName: 'Previous',\n      currentName: 'Current',\n    },\n    options,\n  );\n\n  const [stepStart, stepEnd] = stepWindow;\n  const steps = Math.ceil(resources.length / displayAmount);\n  const disableStepper = resources.length <= displayAmount;\n\n  const sortedResources = resources\n    .sort(resourceSort)\n    .slice(stepStart, stepEnd);\n\n  // Pin the domain to the largest value in the series.\n  // Intentionally redundant - This could simply be derived from the first element in the already sorted list,\n  // but that may not be the case in the future when custom sorting is implemented.\n  const globalResourcesMax = resources.reduce(\n    (max, r: ResourceData) => Math.max(max, r.current, r.previous),\n    0,\n  );\n\n  const onStepChange = useCallback(\n    (activeStep: number) => {\n      const start = activeStep * displayAmount;\n      const end = start + displayAmount;\n      if (end > resources.length) {\n        setStepWindow([start, resources.length]);\n      } else {\n        setStepWindow([start, end]);\n      }\n    },\n    [setStepWindow, resources, displayAmount],\n  );\n\n  return (\n    <Box\n      position=\"relative\"\n      onMouseLeave={() => setActiveChart(false)}\n      onMouseEnter={() => setActiveChart(true)}\n      data-testid=\"bar-chart-wrapper\"\n    >\n      {/* Setting fixed values for height and width generates a console warning in testing but enables ResponsiveContainer to render its children. */}\n      <ResponsiveContainer\n        height={styles.container.height}\n        width={responsive ? '100%' : styles.container.width}\n      >\n        <RechartsBarChart\n          style={{ cursor: onClick ? 'pointer' : null }}\n          onClick={onClick}\n          onMouseMove={onMouseMove}\n          data={sortedResources}\n          margin={styles.barChart.margin}\n          barSize={45}\n          data-testid=\"bar-chart\"\n        >\n          {tooltip && (\n            <RechartsTooltip\n              filterNull\n              cursor={styles.cursor}\n              animationDuration={100}\n              content={tooltip}\n            />\n          )}\n          <CartesianGrid\n            vertical={false}\n            stroke={styles.cartesianGrid.stroke}\n          />\n          <XAxis\n            dataKey={DataKey.Name}\n            tickLine={false}\n            interval={0}\n            height={styles.xAxis.height}\n            tick={BarChartTick}\n          />\n          <YAxis\n            tickFormatter={currencyFormatter.format}\n            domain={[() => 0, globalResourcesMax]}\n            tick={styles.axis}\n          />\n          <Bar\n            dataKey={DataKey.Previous}\n            name={data.previousName}\n            fill={data.previousFill}\n            isAnimationActive={false}\n          />\n          <Bar\n            dataKey={DataKey.Current}\n            name={data.currentName}\n            fill={data.currentFill}\n            isAnimationActive={false}\n          />\n        </RechartsBarChart>\n      </ResponsiveContainer>\n      {!disableStepper && (\n        <BarChartStepper\n          steps={steps}\n          disableScroll={!activeChart}\n          onChange={onStepChange}\n        />\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, Typography, Tooltip } from '@material-ui/core';\nimport LensIcon from '@material-ui/icons/Lens';\nimport HelpOutlineOutlinedIcon from '@material-ui/icons/HelpOutlineOutlined';\nimport { useCostGrowthLegendStyles } from '../../utils/styles';\n\nexport type LegendItemProps = {\n  title: string;\n  tooltipText?: string;\n  markerColor?: string;\n};\n\nexport const LegendItem = ({\n  title,\n  tooltipText,\n  markerColor,\n  children,\n}: PropsWithChildren<LegendItemProps>) => {\n  const classes = useCostGrowthLegendStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Box\n        minHeight={25}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n      >\n        {markerColor && (\n          <div className={classes.marker}>\n            <LensIcon style={{ fontSize: '1em', fill: markerColor }} />\n          </div>\n        )}\n        <Typography className={classes.title} variant=\"overline\">\n          {title}\n        </Typography>\n        {tooltipText && (\n          <Tooltip\n            classes={{ tooltip: classes.tooltip }}\n            title={\n              <Typography className={classes.tooltipText}>\n                {tooltipText}\n              </Typography>\n            }\n            placement=\"top-start\"\n          >\n            <span role=\"img\" aria-label=\"help\" className={classes.helpIcon}>\n              <HelpOutlineOutlinedIcon fontSize=\"small\" />\n            </span>\n          </Tooltip>\n        )}\n      </Box>\n      <Box marginLeft={markerColor ? '1.5em' : 0}>\n        <Typography className={classes.h5} variant=\"h5\">\n          {children}\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { LegendItem } from '../LegendItem';\nimport { currencyFormatter } from '../../utils/formatters';\nimport { CostInsightsTheme } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\n\nexport type BarChartLegendOptions = {\n  previousName: string;\n  previousFill: string;\n  currentName: string;\n  currentFill: string;\n  hideMarker?: boolean;\n};\n\nexport type BarChartLegendProps = {\n  costStart: number;\n  costEnd: number;\n  options?: Partial<BarChartLegendOptions>;\n};\n\nexport const BarChartLegend = ({\n  costStart,\n  costEnd,\n  options = {},\n  children,\n}: PropsWithChildren<BarChartLegendProps>) => {\n  const theme = useTheme<CostInsightsTheme>();\n  const classes = useStyles();\n\n  const data = Object.assign(\n    {\n      previousName: 'Previous',\n      previousFill: theme.palette.lightBlue,\n      currentName: 'Current',\n      currentFill: theme.palette.darkBlue,\n    },\n    options,\n  );\n\n  return (\n    <Box className={classes.legend} display=\"flex\" flexDirection=\"row\">\n      <Box marginRight={2}>\n        <LegendItem\n          title={data.previousName}\n          markerColor={options.hideMarker ? undefined : data.previousFill}\n        >\n          {currencyFormatter.format(costStart)}\n        </LegendItem>\n      </Box>\n      <Box marginRight={2}>\n        <LegendItem\n          title={data.currentName}\n          markerColor={options.hideMarker ? undefined : data.currentFill}\n        >\n          {currencyFormatter.format(costEnd)}\n        </LegendItem>\n      </Box>\n      {children}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Cost,\n  ChangeStatistic,\n  ChangeThreshold,\n  EngineerThreshold,\n  GrowthType,\n  MetricData,\n  Duration,\n  DateAggregation,\n} from '../types';\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport { inclusiveStartDateOf } from './duration';\nimport { notEmpty } from './assert';\n\n// Used for displaying status colors\nexport function growthOf(change: ChangeStatistic): GrowthType {\n  const exceedsEngineerThreshold = Math.abs(change.amount) >= EngineerThreshold;\n\n  if (notEmpty(change.ratio)) {\n    if (exceedsEngineerThreshold && change.ratio >= ChangeThreshold.upper) {\n      return GrowthType.Excess;\n    }\n\n    if (exceedsEngineerThreshold && change.ratio <= ChangeThreshold.lower) {\n      return GrowthType.Savings;\n    }\n  } else {\n    if (exceedsEngineerThreshold && change.amount > 0) return GrowthType.Excess;\n    if (exceedsEngineerThreshold && change.amount < 0)\n      return GrowthType.Savings;\n  }\n\n  return GrowthType.Negligible;\n}\n\n// Used by <CostOverviewCard /> for displaying engineer totals\nexport function getComparedChange(\n  dailyCost: Cost,\n  metricData: MetricData,\n  duration: Duration,\n  lastCompleteBillingDate: string, // YYYY-MM-DD,\n): ChangeStatistic {\n  const dailyCostRatio = dailyCost.change?.ratio;\n  const metricDataRatio = metricData.change?.ratio;\n  const previousPeriodTotal = getPreviousPeriodTotalCost(\n    dailyCost.aggregation,\n    duration,\n    lastCompleteBillingDate,\n  );\n\n  // if either ratio cannot be calculated, no compared ratio can be calculated\n  if (!notEmpty(dailyCostRatio) || !notEmpty(metricDataRatio)) {\n    return {\n      amount: previousPeriodTotal,\n    };\n  }\n\n  return {\n    ratio: dailyCostRatio - metricDataRatio,\n    amount: previousPeriodTotal * (dailyCostRatio - metricDataRatio),\n  };\n}\n\nexport function getPreviousPeriodTotalCost(\n  aggregation: DateAggregation[],\n  duration: Duration,\n  inclusiveEndDate: string,\n): number {\n  const luxonDuration = LuxonDuration.fromISO(duration);\n  const startDate = inclusiveStartDateOf(duration, inclusiveEndDate);\n  const nextPeriodStart = DateTime.fromISO(startDate).plus(luxonDuration);\n  // Add up costs that incurred before the start of the next period.\n  return aggregation.reduce((acc, costByDate) => {\n    return DateTime.fromISO(costByDate.date) < nextPeriodStart\n      ? acc + costByDate.amount\n      : acc;\n  }, 0);\n}\n\nexport function choose<T>(\n  [savings, excess]: [T, T],\n  change: ChangeStatistic,\n): T {\n  const isSavings = (change.ratio ?? change.amount) <= 0;\n  return isSavings ? savings : excess;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst vowels = {\n  a: 'A',\n  e: 'E',\n  i: 'I',\n  o: 'O',\n  u: 'U',\n};\n\nexport const indefiniteArticleOf = (\n  articles: [string, string],\n  word: string,\n) => {\n  const firstChar = word.charAt(0).toLocaleLowerCase('en-US');\n  return firstChar in vowels\n    ? `${articles[1]} ${word}`\n    : `${articles[0]} ${word}`;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport {\n  ChangeStatistic,\n  CurrencyType,\n  Duration,\n  EngineerThreshold,\n  GrowthType,\n} from '../../types';\nimport { rateOf } from '../../utils/currency';\nimport { growthOf } from '../../utils/change';\nimport { useCostGrowthStyles as useStyles } from '../../utils/styles';\nimport { formatPercent, formatCurrency } from '../../utils/formatters';\nimport { indefiniteArticleOf } from '../../utils/grammar';\nimport { useConfig, useCurrency } from '../../hooks';\nimport { notEmpty } from '../../utils/assert';\n\nexport type CostGrowthProps = {\n  change: ChangeStatistic;\n  duration: Duration;\n};\n\nexport const CostGrowth = ({ change, duration }: CostGrowthProps) => {\n  const styles = useStyles();\n  const { engineerCost } = useConfig();\n  const [currency] = useCurrency();\n\n  // Only display costs in absolute values\n  const amount = Math.abs(change.amount);\n  const ratio = Math.abs(change.ratio ?? NaN);\n\n  const rate = rateOf(engineerCost, duration);\n  const engineers = amount / rate;\n  const converted = amount / (currency.rate ?? rate);\n\n  // If a ratio cannot be calculated, don't format.\n  const growth = notEmpty(change.ratio)\n    ? growthOf({ ratio: change.ratio, amount: engineers })\n    : null;\n  // Determine if growth is significant enough to highlight\n  const classes = classnames({\n    [styles.excess]: growth === GrowthType.Excess,\n    [styles.savings]: growth === GrowthType.Savings,\n  });\n\n  if (engineers < EngineerThreshold) {\n    return <span className={classes}>Negligible</span>;\n  }\n\n  if (currency.kind === CurrencyType.USD) {\n    // Do not display percentage if ratio cannot be calculated\n    if (isNaN(ratio)) {\n      return (\n        <span className={classes}>\n          ~{currency.prefix}\n          {formatCurrency(converted)}\n        </span>\n      );\n    }\n\n    return (\n      <span className={classes}>\n        {formatPercent(ratio)} or ~{currency.prefix}\n        {formatCurrency(converted)}\n      </span>\n    );\n  }\n\n  if (amount < 1) {\n    return (\n      <span className={classes}>\n        less than {indefiniteArticleOf(['a', 'an'], currency.unit)}\n      </span>\n    );\n  }\n\n  // Do not display percentage if ratio cannot be calculated\n  if (isNaN(ratio)) {\n    return (\n      <span className={classes}>\n        ~{formatCurrency(converted, currency.unit)}\n      </span>\n    );\n  }\n\n  return (\n    <span className={classes}>\n      {formatPercent(ratio)} or ~{formatCurrency(converted, currency.unit)}\n    </span>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport { Typography, TypographyProps } from '@material-ui/core';\nimport { default as ArrowDropUp } from '@material-ui/icons/ArrowDropUp';\nimport { default as ArrowDropDown } from '@material-ui/icons/ArrowDropDown';\nimport { growthOf } from '../../utils/change';\nimport { ChangeStatistic, GrowthType, Maybe } from '../../types';\nimport { useCostGrowthStyles as useStyles } from '../../utils/styles';\n\nexport type CostGrowthIndicatorProps = TypographyProps & {\n  change: ChangeStatistic;\n  formatter?: (change: ChangeStatistic) => Maybe<string>;\n};\n\nexport const CostGrowthIndicator = ({\n  change,\n  formatter,\n  className,\n  ...props\n}: CostGrowthIndicatorProps) => {\n  const classes = useStyles();\n  const growth = growthOf(change);\n\n  const classNames = classnames(classes.indicator, className, {\n    [classes.excess]: growth === GrowthType.Excess,\n    [classes.savings]: growth === GrowthType.Savings,\n  });\n\n  return (\n    <Typography className={classNames} component=\"span\" {...props}>\n      {formatter ? formatter(change) : change.ratio}\n      {growth === GrowthType.Excess && <ArrowDropUp aria-label=\"excess\" />}\n      {growth === GrowthType.Savings && <ArrowDropDown aria-label=\"savings\" />}\n    </Typography>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MapFiltersToProps } from '../../hooks/useFilters';\nimport { MapLoadingToProps } from '../../hooks/useLoading';\nimport { Group, PageFilters } from '../../types';\nimport { getResetStateWithoutInitial } from '../../utils/loading';\n\ntype CostInsightsTabsFilterProps = PageFilters & {\n  setGroup: (group: Group) => void;\n};\n\ntype CostInsightsTabsLoadingProps = {\n  loadingActions: Array<string>;\n  dispatchReset: (loadingActions: string[]) => void;\n};\n\nexport const mapFiltersToProps: MapFiltersToProps<\n  CostInsightsTabsFilterProps\n> = ({ pageFilters, setPageFilters }) => ({\n  ...pageFilters,\n  setGroup: (group: Group) =>\n    setPageFilters({\n      ...pageFilters,\n      group: group.id,\n      project: null,\n    }),\n});\n\nexport const mapLoadingToProps: MapLoadingToProps<\n  CostInsightsTabsLoadingProps\n> = ({ actions, dispatch }) => ({\n  loadingActions: actions,\n  dispatchReset: (loadingActions: string[]) =>\n    dispatch(getResetStateWithoutInitial(loadingActions)),\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Menu, MenuItem, Tab, Tabs, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { mapLoadingToProps, mapFiltersToProps } from './selector';\nimport { Group } from '../../types';\nimport { useFilters, useLoading } from '../../hooks';\nimport { useCostInsightsTabsStyles as useStyles } from '../../utils/styles';\n\nexport type CostInsightsTabsProps = {\n  groups: Group[];\n};\n\nexport const CostInsightsTabs = ({ groups }: CostInsightsTabsProps) => {\n  const classes = useStyles();\n  const [index] = useState(0); // index is fixed for now until other tabs are added\n  const [groupMenuEl, setGroupMenuEl] = useState<Element | null>(null);\n  const { group, setGroup } = useFilters(mapFiltersToProps);\n  const { loadingActions, dispatchReset } = useLoading(mapLoadingToProps);\n\n  const openGroupMenu = (e: any) => setGroupMenuEl(e.currentTarget as Element);\n\n  const closeGroupMenu = () => setGroupMenuEl(null);\n\n  const updateGroupFilterAndCloseMenu = (g: Group) => () => {\n    dispatchReset(loadingActions);\n    closeGroupMenu();\n    setGroup(g);\n  };\n\n  const renderTabLabel = () => (\n    <div className={classes.tabLabel}>\n      <Typography className={classes.tabLabelText} variant=\"overline\">\n        {`${groups.length} teams`}\n      </Typography>\n      <ExpandMoreIcon fontSize=\"small\" />\n    </div>\n  );\n\n  const hasAtLeastTwoGroups = groups.length >= 2;\n\n  if (!hasAtLeastTwoGroups) return null;\n\n  return (\n    <>\n      <Tabs\n        className={`cost-insights-tabs ${classes.tabs}`}\n        data-testid=\"cost-insights-tabs\"\n        classes={{ indicator: classes.indicator }}\n        value={index}\n      >\n        <Tab\n          className={classes.tab}\n          data-testid=\"cost-insights-groups-tab\"\n          key=\"cost-insights-groups-tab\"\n          label={renderTabLabel()}\n          onClick={openGroupMenu}\n          component=\"button\"\n        />\n      </Tabs>\n      <Menu\n        id=\"group-menu\"\n        data-testid=\"group-menu\"\n        className={classes.menu}\n        getContentAnchorEl={null}\n        anchorEl={groupMenuEl}\n        keepMounted\n        open={Boolean(groupMenuEl)}\n        onClose={closeGroupMenu}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        {groups.map((g: Group) => (\n          <MenuItem\n            className={classes.menuItem}\n            classes={{ selected: classes.menuItemSelected }}\n            selected={g.id === group}\n            key={g.id}\n            data-testid={g.id}\n            onClick={updateGroupFilterAndCloseMenu(g)}\n          >\n            {g.id}\n          </MenuItem>\n        ))}\n      </Menu>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { PropsWithChildren } from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { Group } from '../../types';\nimport { CostInsightsTabs } from '../CostInsightsTabs';\nimport { Header, Page } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n  },\n  header: {\n    boxShadow: 'none',\n  },\n  content: {\n    padding: theme.spacing(4),\n  },\n}));\n\ntype CostInsightsLayoutProps = {\n  title?: string;\n  groups: Group[];\n};\n\nexport const CostInsightsLayout = ({\n  groups,\n  children,\n}: PropsWithChildren<CostInsightsLayoutProps>) => {\n  const classes = useStyles();\n  return (\n    <Page themeId=\"tool\">\n      <Header\n        style={{ boxShadow: 'none' }}\n        title=\"Cost Insights\"\n        pageTitleOverride=\"Cost Insights\"\n        type=\"Tool\"\n      />\n      <div className={classes.root}>\n        <CostInsightsTabs groups={groups} />\n        <div className={classes.content}>{children}</div>\n      </div>\n    </Page>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport {\n  Collapse,\n  MenuList,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Badge,\n} from '@material-ui/core';\nimport { useNavigationStyles as useStyles } from '../../utils/styles';\nimport { useConfig, useScroll } from '../../hooks';\nimport { findAlways } from '../../utils/assert';\nimport {\n  DefaultNavigation,\n  NavigationItem,\n  getDefaultNavigationItems,\n} from '../../utils/navigation';\nimport { Maybe, Product } from '../../types';\n\ntype CostInsightsNavigationProps = {\n  alerts: number;\n  products: Maybe<Product[]>;\n};\n\nconst NavigationMenuItem = ({ navigation, icon, title }: NavigationItem) => {\n  const classes = useStyles();\n  const [, setScroll] = useScroll();\n  return (\n    <MenuItem\n      button\n      data-testid={`menu-item-${navigation}`}\n      className={classes.menuItem}\n      onClick={() => setScroll(navigation)}\n    >\n      <ListItemIcon className={classes.listItemIcon}>{icon}</ListItemIcon>\n      <ListItemText\n        primary={<Typography className={classes.title}>{title}</Typography>}\n      />\n    </MenuItem>\n  );\n};\n\nexport const CostInsightsNavigation = React.memo(\n  ({ alerts, products }: CostInsightsNavigationProps) => {\n    const classes = useStyles();\n    const { icons } = useConfig();\n    const [isOpen, setOpen] = useState(false);\n\n    const defaultNavigationItems = getDefaultNavigationItems(alerts);\n    const productNavigationItems: NavigationItem[] =\n      products?.map(product => ({\n        title: product.name,\n        navigation: product.kind,\n        icon: findAlways(icons, i => i.kind === product.kind).component,\n      })) ?? [];\n\n    useEffect(\n      function toggleProductMenuItems() {\n        if (products?.length) {\n          setOpen(true);\n        } else {\n          setOpen(false);\n        }\n      },\n      [products],\n    );\n\n    return (\n      <MenuList className={classes.menuList}>\n        {defaultNavigationItems.map(item => (\n          <NavigationMenuItem\n            key={`navigation-menu-item-${item.navigation}`}\n            navigation={item.navigation}\n            title={item.title}\n            icon={\n              item.navigation === DefaultNavigation.AlertInsightsHeader ? (\n                <Badge badgeContent={alerts} color=\"secondary\">\n                  {React.cloneElement(item.icon, {\n                    className: classes.navigationIcon,\n                  })}\n                </Badge>\n              ) : (\n                React.cloneElement(item.icon, {\n                  className: classes.navigationIcon,\n                })\n              )\n            }\n          />\n        ))}\n        <Collapse in={isOpen} timeout={850}>\n          {productNavigationItems.map((item: NavigationItem) => (\n            <NavigationMenuItem\n              key={`navigation-menu-item-${item.navigation}`}\n              navigation={item.navigation}\n              icon={React.cloneElement(item.icon, {\n                className: classes.navigationIcon,\n              })}\n              title={item.title}\n            />\n          ))}\n        </Collapse>\n      </MenuList>\n    );\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport { Typography } from '@material-ui/core';\nimport { costFormatter, formatChange } from '../../utils/formatters';\nimport { useEntityDialogStyles as useStyles } from '../../utils/styles';\nimport { CostGrowthIndicator } from '../CostGrowth';\nimport { BarChartOptions, ChangeStatistic, Entity } from '../../types';\nimport { Table, TableColumn } from '@backstage/core-components';\n\nexport type ProductEntityTableOptions = Partial<\n  Pick<BarChartOptions, 'previousName' | 'currentName'>\n>;\n\ntype RowData = {\n  id: string;\n  label: string;\n  previous: number;\n  current: number;\n  change: ChangeStatistic;\n};\n\nfunction createRenderer(col: keyof RowData, classes: Record<string, string>) {\n  return function render(rowData: {}): JSX.Element {\n    const row = rowData as RowData;\n    const rowStyles = classnames(classes.row, {\n      [classes.rowTotal]: row.id === 'total',\n      [classes.colFirst]: col === 'label',\n      [classes.colLast]: col === 'change',\n    });\n\n    switch (col) {\n      case 'previous':\n      case 'current':\n        return (\n          <Typography className={rowStyles}>\n            {costFormatter.format(row[col])}\n          </Typography>\n        );\n      case 'change':\n        return (\n          <CostGrowthIndicator\n            className={rowStyles}\n            change={row.change}\n            formatter={formatChange}\n          />\n        );\n      default:\n        return <Typography className={rowStyles}>{row.label}</Typography>;\n    }\n  };\n}\n\n// material-table does not support fixed rows. Override the sorting algorithm\n// to force Total row to bottom by default or when a user sort toggles a column.\nfunction createSorter(field?: keyof Omit<RowData, 'id'>) {\n  return function rowSort(data1: {}, data2: {}): number {\n    const a = data1 as RowData;\n    const b = data2 as RowData;\n    if (a.id === 'total') return 1;\n    if (b.id === 'total') return 1;\n    if (field === 'label') return a.label.localeCompare(b.label);\n    if (field === 'change') {\n      if (formatChange(a[field]) === '∞' || formatChange(b[field]) === '-∞')\n        return 1;\n      if (formatChange(a[field]) === '-∞' || formatChange(b[field]) === '∞')\n        return -1;\n      return a[field].ratio! - b[field].ratio!;\n    }\n\n    return b.previous + b.current - (a.previous + a.current);\n  };\n}\n\ntype ProductEntityTableProps = {\n  entityLabel: string;\n  entity: Entity;\n  options: ProductEntityTableOptions;\n};\n\nexport const ProductEntityTable = ({\n  entityLabel,\n  entity,\n  options,\n}: ProductEntityTableProps) => {\n  const classes = useStyles();\n  const entities = entity.entities[entityLabel];\n\n  const data = Object.assign(\n    {\n      previousName: 'Previous',\n      currentName: 'Current',\n    },\n    options,\n  );\n\n  const firstColClasses = classnames(classes.column, classes.colFirst);\n  const lastColClasses = classnames(classes.column, classes.colLast);\n\n  const columns: TableColumn[] = [\n    {\n      field: 'label',\n      title: <Typography className={firstColClasses}>{entityLabel}</Typography>,\n      render: createRenderer('label', classes),\n      customSort: createSorter('label'),\n      width: '33.33%',\n    },\n    {\n      field: 'previous',\n      title: (\n        <Typography className={classes.column}>{data.previousName}</Typography>\n      ),\n      align: 'right',\n      render: createRenderer('previous', classes),\n      customSort: createSorter('previous'),\n    },\n    {\n      field: 'current',\n      title: (\n        <Typography className={classes.column}>{data.currentName}</Typography>\n      ),\n      align: 'right',\n      render: createRenderer('current', classes),\n      customSort: createSorter('current'),\n    },\n    {\n      field: 'change',\n      title: <Typography className={lastColClasses}>Change</Typography>,\n      align: 'right',\n      render: createRenderer('change', classes),\n      customSort: createSorter('change'),\n    },\n  ];\n\n  const rowData: RowData[] = entities\n    .map(e => ({\n      id: e.id || 'Unknown',\n      label: e.id || 'Unknown',\n      previous: e.aggregation[0],\n      current: e.aggregation[1],\n      change: e.change,\n    }))\n    .concat({\n      id: 'total',\n      label: 'Total',\n      previous: entity.aggregation[0],\n      current: entity.aggregation[1],\n      change: entity.change,\n    })\n    .sort(createSorter());\n\n  return (\n    <Table\n      columns={columns}\n      data={rowData}\n      title={entity.id || 'Unlabeled'}\n      options={{\n        paging: false,\n        search: false,\n        hideFilterIcons: true,\n      }}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Dialog, IconButton } from '@material-ui/core';\nimport { default as CloseButton } from '@material-ui/icons/Close';\nimport { useEntityDialogStyles as useStyles } from '../../utils/styles';\nimport { Entity } from '../../types';\nimport {\n  ProductEntityTable,\n  ProductEntityTableOptions,\n} from './ProductEntityTable';\nimport { findAlways } from '../../utils/assert';\nimport { HeaderTabs } from '@backstage/core-components';\n\ntype ProductEntityDialogProps = {\n  open: boolean;\n  entity: Entity;\n  options?: ProductEntityTableOptions;\n  onClose: () => void;\n};\n\nexport const ProductEntityDialog = ({\n  open,\n  entity,\n  options = {},\n  onClose,\n}: ProductEntityDialogProps) => {\n  const classes = useStyles();\n  const labels = Object.keys(entity.entities);\n  const [selectedLabel, setSelectedLabel] = useState(\n    findAlways(labels, _ => true),\n  );\n\n  const tabs = labels.map((label, index) => ({\n    id: index.toString(),\n    label: `Breakdown by ${label}`,\n  }));\n\n  return (\n    <Dialog open={open} onClose={onClose} scroll=\"body\" fullWidth maxWidth=\"lg\">\n      <IconButton className={classes.closeButton} onClick={onClose}>\n        <CloseButton />\n      </IconButton>\n      <HeaderTabs\n        tabs={tabs}\n        onChange={index => setSelectedLabel(labels[index])}\n      />\n      <ProductEntityTable\n        entityLabel={selectedLabel}\n        entity={entity}\n        options={options}\n      />\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo, useState } from 'react';\nimport {\n  ContentRenderer,\n  TooltipProps as RechartsTooltipProps,\n  RechartsFunction,\n} from 'recharts';\nimport pluralize from 'pluralize';\nimport { Box, Typography } from '@material-ui/core';\nimport { default as FullScreenIcon } from '@material-ui/icons/Fullscreen';\nimport { LegendItem } from '../LegendItem';\nimport { ProductEntityDialog } from './ProductEntityDialog';\nimport { CostGrowth, CostGrowthIndicator } from '../CostGrowth';\nimport {\n  BarChart,\n  BarChartLegend,\n  BarChartTooltip,\n  BarChartTooltipItem,\n  BarChartLegendOptions,\n} from '../BarChart';\nimport {\n  findAlways,\n  notEmpty,\n  isUndefined,\n  findAnyKey,\n  assertAlways,\n} from '../../utils/assert';\nimport { formatPeriod, formatChange } from '../../utils/formatters';\nimport {\n  titleOf,\n  tooltipItemOf,\n  resourceOf,\n  isInvalid,\n  isLabeled,\n  isUnlabeled,\n} from '../../utils/graphs';\nimport {\n  useProductInsightsChartStyles as useStyles,\n  useBarChartLayoutStyles as useLayoutStyles,\n} from '../../utils/styles';\nimport { Duration, Entity, Maybe } from '../../types';\nimport { choose } from '../../utils/change';\n\nexport type ProductInsightsChartProps = {\n  billingDate: string;\n  entity: Entity;\n  duration: Duration;\n};\n\nexport const ProductInsightsChart = ({\n  billingDate,\n  entity,\n  duration,\n}: ProductInsightsChartProps) => {\n  const classes = useStyles();\n  const layoutClasses = useLayoutStyles();\n\n  // Only a single entities Record for the root product entity is supported\n  const entities = useMemo(() => {\n    const entityLabel = assertAlways(findAnyKey(entity.entities));\n    return entity.entities[entityLabel] ?? [];\n  }, [entity]);\n\n  const [activeLabel, setActive] = useState<Maybe<string>>();\n  const [selectLabel, setSelected] = useState<Maybe<string>>();\n  const isSelected = useMemo(() => !isUndefined(selectLabel), [selectLabel]);\n\n  const isClickable = useMemo(() => {\n    const breakdowns = Object.keys(\n      entities.find(e => e.id === activeLabel)?.entities ?? {},\n    );\n    return breakdowns.length > 0;\n  }, [entities, activeLabel]);\n\n  const costStart = entity.aggregation[0];\n  const costEnd = entity.aggregation[1];\n  const resources = entities.map(resourceOf);\n\n  const options: Partial<BarChartLegendOptions> = {\n    previousName: formatPeriod(duration, billingDate, false),\n    currentName: formatPeriod(duration, billingDate, true),\n  };\n\n  const onMouseMove: RechartsFunction = (\n    data: Record<'activeLabel', string | undefined>,\n  ) => {\n    if (isLabeled(data)) {\n      setActive(data.activeLabel!);\n    } else if (isUnlabeled(data)) {\n      setActive(null);\n    } else {\n      setActive(undefined);\n    }\n  };\n\n  const onClick: RechartsFunction = (data: Record<'activeLabel', string>) => {\n    if (isLabeled(data)) {\n      setSelected(data.activeLabel);\n    } else if (isUnlabeled(data)) {\n      setSelected(null);\n    } else {\n      setSelected(undefined);\n    }\n  };\n\n  const renderProductInsightsTooltip: ContentRenderer<RechartsTooltipProps> = ({\n    label,\n    payload = [],\n  }) => {\n    /* Labels and payloads may be undefined or empty */\n    if (isInvalid({ label, payload })) return null;\n\n    /*\n     *  recharts coerces null values to strings\n     *  entity       -> resource       -> payload\n     *  { id: null } -> { name: null } -> { label: '' }\n     */\n    const id = label === '' ? null : label;\n\n    const title = titleOf(label);\n    const items = payload.map(tooltipItemOf).filter(notEmpty);\n\n    const activeEntity = findAlways(entities, e => e.id === id);\n    const breakdowns = Object.keys(activeEntity.entities);\n\n    if (breakdowns.length) {\n      const subtitle = breakdowns\n        .map(b => pluralize(b, activeEntity.entities[b].length, true))\n        .join(', ');\n      return (\n        <BarChartTooltip\n          title={title}\n          subtitle={subtitle}\n          topRight={\n            !!activeEntity.change.ratio && (\n              <CostGrowthIndicator\n                formatter={formatChange}\n                change={activeEntity.change}\n                className={classes.indicator}\n              />\n            )\n          }\n          actions={\n            <Box className={classes.actions}>\n              <FullScreenIcon />\n              <Typography>Click for breakdown</Typography>\n            </Box>\n          }\n        >\n          {items.map((item, index) => (\n            <BarChartTooltipItem key={`${item.label}-${index}`} item={item} />\n          ))}\n        </BarChartTooltip>\n      );\n    }\n\n    // If an entity doesn't have any sub-entities, there aren't any costs to break down.\n    return (\n      <BarChartTooltip\n        title={title}\n        topRight={\n          !!activeEntity.change.ratio && (\n            <CostGrowthIndicator\n              formatter={formatChange}\n              change={activeEntity.change}\n              className={classes.indicator}\n            />\n          )\n        }\n        content={\n          id\n            ? null\n            : \"This product has costs that are not labeled and therefore can't be attributed to a specific entity.\"\n        }\n      >\n        {items.map((item, index) => (\n          <BarChartTooltipItem key={`${item.label}-${index}`} item={item} />\n        ))}\n      </BarChartTooltip>\n    );\n  };\n\n  const barChartProps = isClickable ? { onClick } : {};\n\n  return (\n    <Box className={layoutClasses.wrapper}>\n      <BarChartLegend costStart={costStart} costEnd={costEnd} options={options}>\n        <LegendItem\n          title={choose(['Cost Savings', 'Cost Excess'], entity.change)}\n        >\n          <CostGrowth change={entity.change} duration={duration} />\n        </LegendItem>\n      </BarChartLegend>\n      <BarChart\n        resources={resources}\n        tooltip={renderProductInsightsTooltip}\n        onMouseMove={onMouseMove}\n        options={options}\n        {...barChartProps}\n      />\n      {isSelected && entities.length && (\n        <ProductEntityDialog\n          open={isSelected}\n          onClose={() => setSelected(undefined)}\n          entity={findAlways(entities, e => e.id === selectLabel)}\n          options={options}\n        />\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Box } from '@material-ui/core';\nimport { BarChart, BarChartLegend, BarChartLegendOptions } from '../BarChart';\nimport { LegendItem } from '../LegendItem';\nimport { CostGrowth } from '../CostGrowth';\nimport { Duration, ProjectGrowthData } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\nimport { resourceOf } from '../../utils/graphs';\n\ntype ProjectGrowthAlertChartProps = {\n  alert: ProjectGrowthData;\n};\n\nexport const ProjectGrowthAlertChart = ({\n  alert,\n}: ProjectGrowthAlertChartProps) => {\n  const classes = useStyles();\n\n  const costStart = alert.aggregation[0];\n  const costEnd = alert.aggregation[1];\n  const resourceData = alert.products.map(resourceOf);\n\n  const options: Partial<BarChartLegendOptions> = {\n    previousName: DateTime.fromFormat(alert.periodStart, \"yyyy-'Q'q\").toFormat(\n      \"'Q'q yyyy\",\n    ),\n    currentName: DateTime.fromFormat(alert.periodEnd, \"yyyy-'Q'q\").toFormat(\n      \"'Q'q yyyy\",\n    ),\n  };\n\n  return (\n    <Box className={classes.wrapper}>\n      <BarChartLegend costStart={costStart} costEnd={costEnd} options={options}>\n        <LegendItem title=\"Cost Growth\">\n          <CostGrowth change={alert.change} duration={Duration.P3M} />\n        </LegendItem>\n      </BarChartLegend>\n      <BarChart resources={resourceData} options={options} />\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { ProjectGrowthAlertChart } from './ProjectGrowthAlertChart';\nimport { ProjectGrowthData } from '../../types';\nimport { InfoCard } from '@backstage/core-components';\n\ntype ProjectGrowthAlertProps = {\n  alert: ProjectGrowthData;\n};\n\nexport const ProjectGrowthAlertCard = ({ alert }: ProjectGrowthAlertProps) => {\n  const subheader = `\n    ${pluralize('product', alert.products.length, true)}${\n    alert.products.length > 1 ? ', sorted by cost' : ''\n  }`;\n\n  return (\n    <InfoCard\n      title={`Project growth for ${alert.project}`}\n      subheader={subheader}\n    >\n      <ProjectGrowthAlertChart alert={alert} />\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ProjectGrowthAlertCard } from '../components/ProjectGrowthAlertCard';\nimport { Alert, ProjectGrowthData } from '../types';\n\n/**\n * The alert below is an example of an Alert implementation; the CostInsightsApi permits returning\n * any implementation of the Alert type, so adopters can create their own. The CostInsightsApi\n * fetches alert data from the backend, then creates Alert classes with the data.\n */\n\nexport class ProjectGrowthAlert implements Alert {\n  data: ProjectGrowthData;\n\n  constructor(data: ProjectGrowthData) {\n    this.data = data;\n  }\n\n  get url() {\n    return '/cost-insights/investigating-growth';\n  }\n\n  get title() {\n    return `Investigate cost growth in project ${this.data.project}`;\n  }\n\n  get subtitle() {\n    return 'Cost growth outpacing business growth is unsustainable long-term.';\n  }\n\n  get element() {\n    return <ProjectGrowthAlertCard alert={this.data} />;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { Box } from '@material-ui/core';\nimport { BarChart, BarChartLegend } from '../BarChart';\nimport { UnlabeledDataflowData, ResourceData } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\nimport { InfoCard } from '@backstage/core-components';\n\ntype UnlabeledDataflowAlertProps = {\n  alert: UnlabeledDataflowData;\n};\n\nexport const UnlabeledDataflowAlertCard = ({\n  alert,\n}: UnlabeledDataflowAlertProps) => {\n  const classes = useStyles();\n  const projects = pluralize('project', alert.projects.length, true);\n  const subheader = `\n    Showing costs from ${projects} with unlabeled Dataflow jobs in the last 30 days.\n  `;\n  const options = {\n    previousName: 'Unlabeled Cost',\n    currentName: 'Labeled Cost',\n  };\n\n  const resources: ResourceData[] = alert.projects.map(project => ({\n    name: project.id,\n    previous: project.unlabeledCost,\n    current: project.labeledCost,\n  }));\n\n  return (\n    <InfoCard title=\"Label Dataflow\" subheader={subheader}>\n      <Box className={classes.wrapper}>\n        <BarChartLegend\n          costStart={alert.unlabeledCost}\n          costEnd={alert.labeledCost}\n          options={options}\n        />\n        <BarChart resources={resources} options={options} />\n      </Box>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { UnlabeledDataflowAlertCard } from '../components/UnlabeledDataflowAlertCard';\nimport { Alert, AlertStatus, UnlabeledDataflowData } from '../types';\n\n/**\n * The alert below is an example of an Alert implementation; the CostInsightsApi permits returning\n * any implementation of the Alert type, so adopters can create their own. The CostInsightsApi\n * fetches alert data from the backend, then creates Alert classes with the data.\n */\n\nexport class UnlabeledDataflowAlert implements Alert {\n  data: UnlabeledDataflowData;\n  status?: AlertStatus;\n\n  constructor(data: UnlabeledDataflowData) {\n    this.data = data;\n  }\n\n  get url() {\n    return '/cost-insights/labeling-jobs';\n  }\n\n  get title() {\n    return 'Add labels to workflows';\n  }\n\n  get subtitle() {\n    return 'Labels show in billing data, enabling cost insights for each workflow.';\n  }\n\n  get element() {\n    return <UnlabeledDataflowAlertCard alert={this.data} />;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Box, Typography } from '@material-ui/core';\nimport { AlertInstructionsLayout } from '../AlertInstructionsLayout';\nimport { ProductInsightsChart } from '../ProductInsightsCard';\nimport {\n  Alert,\n  DEFAULT_DATE_FORMAT,\n  Duration,\n  Entity,\n  Product,\n  ProjectGrowthData,\n} from '../../types';\nimport { ProjectGrowthAlert } from '../../alerts';\nimport { InfoCard } from '@backstage/core-components';\n\nconst today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n\nexport const ProjectGrowthInstructionsPage = () => {\n  const alertData: ProjectGrowthData = {\n    project: 'example-project',\n    periodStart: 'Q1 2020',\n    periodEnd: 'Q2 2020',\n    aggregation: [60000, 120000],\n    change: {\n      ratio: 1,\n      amount: 60000,\n    },\n    products: [\n      {\n        id: 'Compute Engine',\n        aggregation: [58000, 118000],\n      },\n      {\n        id: 'Cloud Dataflow',\n        aggregation: [1200, 1500],\n      },\n      {\n        id: 'Cloud Storage',\n        aggregation: [800, 500],\n      },\n    ],\n  };\n\n  const projectGrowthAlert: Alert = new ProjectGrowthAlert(alertData);\n\n  const product: Product = {\n    kind: 'ComputeEngine',\n    name: 'Compute Engine',\n  };\n\n  const entity: Entity = {\n    id: 'example-id',\n    aggregation: [20_000, 60_000],\n    change: {\n      ratio: 3,\n      amount: 40_000,\n    },\n    entities: {\n      service: [\n        {\n          id: 'service-one',\n          aggregation: [18_200, 58_500],\n          entities: {},\n          change: { ratio: 2.21, amount: 40_300 },\n        },\n        {\n          id: 'service-two',\n          aggregation: [1200, 1300],\n          entities: {},\n          change: { ratio: 0.083, amount: 100 },\n        },\n        {\n          id: 'service-three',\n          aggregation: [600, 200],\n          entities: {},\n          change: { ratio: -0.666, amount: -400 },\n        },\n      ],\n    },\n  };\n\n  return (\n    <AlertInstructionsLayout title=\"Investigating Growth\">\n      <Typography variant=\"h1\">Investigating cloud cost growth</Typography>\n      <Typography paragraph>\n        Cost Insights shows an alert when costs for a particular billing entity,\n        such as a GCP project, have grown at a rate faster than our alerting\n        threshold. The responsible team should follow this guide to decide\n        whether this warrants further investigation.\n      </Typography>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">Is the growth expected?</Typography>\n        <Typography paragraph>\n          The first question to ask is whether growth is expected. Perhaps a new\n          product has been deployed, or additional regions added for\n          reliability.\n        </Typography>\n        <Typography paragraph>\n          Many services increase cost linearly with load. Has the demand\n          increased? This may happen as you open new markets, or run marketing\n          offers. Costs should be compared against a business metric, such as\n          daily users, to normalize natural increases from business growth.\n        </Typography>\n        <Typography paragraph>\n          Seasonal variance may also cause cost growth; yearly campaigns, an\n          increase in demand during certain times of year.\n        </Typography>\n        <Typography paragraph>\n          Cloud costs will often go up before they go down, in the case of\n          migrations. Teams moving to new infrastructure may run in both the old\n          and new environment during the migration.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">Is the growth significant?</Typography>\n        <Typography paragraph>\n          Next, evaluate whether the growth is significant. This helps avoid\n          premature optimization, where cost in engineering time is more than\n          would be saved from the optimization over a reasonable time frame.\n        </Typography>\n        <Typography paragraph>\n          We recommend reframing the cost growth itself in terms of engineering\n          time. How much engineering time, for an <i>average</i> fully-loaded\n          engineer cost at the company, is being overspent each month? Compare\n          this to expected engineering time for optimization to decide whether\n          the optimization is worthwhile.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">\n          Identifying which cloud product contributed most\n        </Typography>\n        <Typography paragraph>\n          For projects meeting the alert threshold, Cost Insights shows a cost\n          comparison of cloud products over the examined time period:\n        </Typography>\n        <Box mt={2} mb={2}>\n          {projectGrowthAlert.element}\n        </Box>\n        <Typography paragraph>\n          This allows you to quickly see which cloud products contributed to the\n          growth in cloud costs.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">\n          Identifying the responsible workload\n        </Typography>\n        <Typography paragraph>\n          After identifying the cloud product, use the corresponding product\n          panel in Cost Insights to find a particular workload (or <i>entity</i>\n          ) that has grown in cost:\n        </Typography>\n        <Box mt={2} mb={2}>\n          <InfoCard title={product.name} subheader=\"3 entities, sorted by cost\">\n            <ProductInsightsChart\n              billingDate={today}\n              duration={Duration.P3M}\n              entity={entity}\n            />\n          </InfoCard>\n        </Box>\n        <Typography paragraph>\n          From here, you can dig into commit history or deployment logs to find\n          probable causes of an unexpected spike in cost.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">Optimizing the workload</Typography>\n        <Typography paragraph>\n          Workload optimization varies between cloud products, but there are a\n          few general optimization areas to consider:\n        </Typography>\n        <Typography variant=\"h5\">Retention</Typography>\n        <Typography paragraph>\n          Is the workload or storage necessary? Truly idle or unused resources\n          can be cleaned up for immediate cost savings. For storage, how long do\n          we need the data? Many cloud products support retention policies to\n          automatically delete data after a certain time period.\n        </Typography>\n        <Typography variant=\"h5\">Efficiency</Typography>\n        <Typography paragraph>\n          Is the workload using cloud resources efficiently? For compute\n          resources, do the utilization metrics look reasonable? Autoscaling\n          infrastructure, such as Kubernetes, can run workloads more efficiently\n          without compromising reliability.\n        </Typography>\n        <Typography variant=\"h5\">Lifecycle</Typography>\n        <Typography paragraph>\n          Is the workload using an optimal pricing model? Some cloud products\n          offer better pricing for data that is accessed less frequently.\n        </Typography>\n      </Box>\n    </AlertInstructionsLayout>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { CostGrowth, LegendItem } from '../../../components';\nimport { ChangeStatistic, CostInsightsTheme, Duration } from '../../../types';\nimport { monthOf } from '../../../utils/formatters';\n\nexport type MigrationBarChartLegendProps = {\n  change: ChangeStatistic;\n  startDate: string;\n  currentProduct: string;\n  comparedProduct: string;\n};\n\nexport const KubernetesMigrationBarChartLegend = ({\n  currentProduct,\n  comparedProduct,\n  change,\n  startDate,\n}: MigrationBarChartLegendProps) => {\n  const theme = useTheme<CostInsightsTheme>();\n  return (\n    <Box display=\"flex\" flexDirection=\"row\">\n      <Box marginRight={2}>\n        <LegendItem\n          title={monthOf(startDate)}\n          markerColor={theme.palette.magenta}\n        >\n          {currentProduct}\n        </LegendItem>\n      </Box>\n      <Box marginRight={2}>\n        <LegendItem title=\"Estimated Cost\" markerColor={theme.palette.yellow}>\n          {comparedProduct}\n        </LegendItem>\n      </Box>\n      <LegendItem title=\"Total Savings\">\n        <CostGrowth change={change} duration={Duration.P30D} />\n      </LegendItem>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BarChart } from '../../../components';\nimport {\n  BarChartOptions,\n  CostInsightsTheme,\n  Entity,\n  ResourceData,\n} from '../../../types';\nimport { useTheme } from '@material-ui/core';\n\ntype MigrationBarChartProps = {\n  currentProduct: string;\n  comparedProduct: string;\n  services: Array<Entity>;\n};\n\nexport const KubernetesMigrationBarChart = ({\n  currentProduct,\n  comparedProduct,\n  services,\n}: MigrationBarChartProps) => {\n  const theme = useTheme<CostInsightsTheme>();\n\n  const options: BarChartOptions = {\n    previousFill: theme.palette.magenta,\n    currentFill: theme.palette.yellow,\n    previousName: comparedProduct,\n    currentName: currentProduct,\n  };\n\n  const resources: ResourceData[] = services.map(service => ({\n    name: service.id,\n    previous: service.aggregation[0],\n    current: service.aggregation[1],\n  }));\n\n  return <BarChart resources={resources} options={options} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box } from '@material-ui/core';\nimport { KubernetesMigrationBarChartLegend } from './KubernetesMigrationBarChartLegend';\nimport { KubernetesMigrationBarChart } from './KubernetesMigrationBarChart';\nimport { KubernetesMigrationData } from '../../alerts';\nimport { InfoCard } from '@backstage/core-components';\n\ntype KubernetesMigrationAlertProps = {\n  data: KubernetesMigrationData;\n  title: string;\n  subheader: string;\n  currentProduct: string;\n  comparedProduct: string;\n};\n\nexport const KubernetesMigrationAlertCard = ({\n  data,\n  title,\n  subheader,\n  currentProduct,\n  comparedProduct,\n}: KubernetesMigrationAlertProps) => {\n  return (\n    <InfoCard title={title} subheader={subheader}>\n      <Box display=\"flex\" flexDirection=\"column\">\n        <Box paddingY={1}>\n          <KubernetesMigrationBarChartLegend\n            startDate={data.startDate}\n            change={data.change}\n            currentProduct={currentProduct}\n            comparedProduct={comparedProduct}\n          />\n        </Box>\n        <Box paddingY={1}>\n          <KubernetesMigrationBarChart\n            services={data.services}\n            currentProduct={currentProduct}\n            comparedProduct={comparedProduct}\n          />\n        </Box>\n      </Box>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n  ChangeEvent,\n} from 'react';\nimport {\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  Typography,\n} from '@material-ui/core';\nimport { AlertFormProps, Entity } from '../../types';\nimport { KubernetesMigrationAlert } from '../alerts';\nimport { findAlways } from '../../utils/assert';\n\nexport type KubernetesMigrationDismissFormData = {\n  services: Entity[];\n};\n\nexport type KubernetesMigrationDismissFormProps = AlertFormProps<\n  KubernetesMigrationAlert,\n  KubernetesMigrationDismissFormData\n>;\n\nexport const KubernetesMigrationDismissForm = forwardRef<\n  HTMLFormElement,\n  KubernetesMigrationDismissFormProps\n>(({ onSubmit, disableSubmit, alert }, ref) => {\n  const [services, setServices] = useState<Entity[]>(alert.data.services);\n\n  const onFormSubmit: FormEventHandler = e => {\n    /* Remember to prevent default form behavior */\n    e.preventDefault();\n    onSubmit({ services: services });\n  };\n\n  const onCheckboxChange = (\n    e: ChangeEvent<HTMLInputElement>,\n    checked: boolean,\n  ) => {\n    if (checked) {\n      const service = findAlways(\n        alert.data.services,\n        s => s.id === e.target.value,\n      );\n      setServices(prevServices => prevServices.concat(service));\n    } else {\n      setServices(prevServices =>\n        prevServices.filter(p => p.id !== e.target.value),\n      );\n    }\n  };\n\n  /* Submit button is disabled by default. Use props.disableSubmit to toggle disabled state. */\n  useEffect(() => {\n    if (services.length) {\n      disableSubmit(false);\n    } else {\n      disableSubmit(true);\n    }\n  }, [services, disableSubmit]);\n\n  return (\n    /* All custom forms must accept a ref and implement an onSubmit handler. */\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>Or choose which services to dismiss this alert for.</b>\n        </Typography>\n        <FormGroup>\n          {alert.data.services.map((service, index) => (\n            <FormControlLabel\n              key={`example-option-${index}`}\n              label={service.id}\n              value={service.id}\n              control={\n                <Checkbox\n                  color=\"primary\"\n                  checked={services.some(p => p.id === service.id)}\n                  onChange={onCheckboxChange}\n                />\n              }\n            />\n          ))}\n        </FormGroup>\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { KubernetesMigrationAlertCard } from '../components';\nimport { CostInsightsApi } from '../../api';\nimport {\n  Alert,\n  AlertForm,\n  AlertOptions,\n  AlertStatus,\n  AlertSnoozeFormData,\n  ChangeStatistic,\n  Entity,\n} from '../../types';\nimport {\n  KubernetesMigrationDismissForm,\n  KubernetesMigrationDismissFormData,\n} from '../forms';\nimport { Lifecycle } from '@backstage/core-components';\n\nexport interface KubernetesMigrationData {\n  startDate: string;\n  endDate: string;\n  change: ChangeStatistic;\n  services: Array<Entity>;\n}\n\nexport interface KubernetesMigrationApi extends Alert {\n  api: CostInsightsApi;\n  data: KubernetesMigrationData;\n}\n\n/**\n * This is an example of an Alert implementation using optional event hooks.\n *\n * Event hooks can be used to enable users to dismiss, snooze, or accept an action item\n * - or any combination thereof. Defining a hook will generate default UI - button, dialog and\n * form. Cost Insights does not preserve client side alert state - each hook is expected to return a new set of alerts.\n *\n * Snoozed, accepted, etc. alerts should define a corresponding status property. Alerts will be aggregated\n * by status in a collapsed view below Alert Insights section and a badge will appear in Action Items\n * showing the total alerts of that status.\n *\n * Customizing Alerts\n * Default forms can be overridden in two ways - by setting a form property to null or defining a custom component.\n *\n * If a form property is set to null, the Dialog will not render a form. This can be useful in scenarios\n * where data isn't needed from the user such as when a user accepts an action item's recommendation.\n *\n * If a form property is set to a React component, the Dialog will render the form component in place of the default form.\n * Form components must return valid form elements, and accept a ref and onSubmit event handler.\n * Custom forms must implement the corresponding event hook. See /forms for example implementations.\n */\n\nexport class KubernetesMigrationAlert implements KubernetesMigrationApi {\n  api: CostInsightsApi;\n  data: KubernetesMigrationData;\n\n  subtitle =\n    'Services running on Kubernetes are estimated to save 50% or more compared to Compute Engine.';\n\n  // Dialog will not render a form if form property set to null.\n  AcceptForm = null;\n  // Overrides default Dismiss form with a custom form component.\n  DismissForm: AlertForm<\n    KubernetesMigrationAlert,\n    KubernetesMigrationDismissFormData\n  > = KubernetesMigrationDismissForm;\n\n  constructor(api: CostInsightsApi, data: KubernetesMigrationData) {\n    this.api = api;\n    this.data = data;\n  }\n\n  get title() {\n    return (\n      <span>\n        Consider migrating{' '}\n        {pluralize('service', this.data.services.length, true)} to Kubernetes{' '}\n        <Lifecycle shorthand />\n      </span>\n    );\n  }\n\n  get element() {\n    const subheader = `${pluralize(\n      'Service',\n      this.data.services.length,\n      true,\n    )}, sorted by cost`;\n    return (\n      <KubernetesMigrationAlertCard\n        data={this.data}\n        title=\"Migrate to Kubernetes\"\n        subheader={subheader}\n        currentProduct=\"Compute Engine\"\n        comparedProduct=\"Kubernetes\"\n      />\n    );\n  }\n\n  /* Fires when the onSubmit event is raised on a Dismiss form. Displays custom dismiss form. */\n  async onDismissed(\n    options: AlertOptions<KubernetesMigrationDismissFormData>,\n  ): Promise<Alert[]> {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Dismissed,\n        },\n      ]),\n    );\n  }\n\n  /* Fires when the onSubmit event is raised on a Snooze form. Displays default snooze form. */\n  async onSnoozed(\n    options: AlertOptions<AlertSnoozeFormData>,\n  ): Promise<Alert[]> {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Snoozed,\n        },\n      ]),\n    );\n  }\n\n  /* Fires when the Accept button is clicked. Dialog does not render a form. See KubernetesMigrationAlert.AcceptForm */\n  async onAccepted(options: AlertOptions<null>): Promise<Alert[]> {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Accepted,\n        },\n      ]),\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity, Product } from '../types';\nimport { findAlways } from '../utils/assert';\n\ntype mockEntityRenderer<T> = (entity: T) => T;\n\nexport const createMockEntity = (\n  callback?: mockEntityRenderer<Entity>,\n): Entity => {\n  const defaultEntity: Entity = {\n    id: 'test-entity',\n    aggregation: [100, 200],\n    entities: {},\n    change: {\n      ratio: 0,\n      amount: 0,\n    },\n  };\n\n  if (typeof callback === 'function') {\n    return callback({ ...defaultEntity });\n  }\n  return { ...defaultEntity };\n};\n\nexport const createMockProduct = (\n  callback?: mockEntityRenderer<Product>,\n): Product => {\n  const defaultProduct: Product = {\n    kind: 'compute-engine',\n    name: 'Compute Engine',\n  };\n  if (typeof callback === 'function') {\n    return callback({ ...defaultProduct });\n  }\n  return { ...defaultProduct };\n};\n\nexport const MockProductTypes: Record<string, string> = {\n  'compute-engine': 'Compute Engine',\n  'cloud-dataflow': 'Cloud Dataflow',\n  'cloud-storage': 'Cloud Storage',\n  'big-query': 'Big Query',\n  'big-table': 'BigTable',\n  'cloud-pub-sub': 'Cloud Pub/Sub',\n};\n\nexport const MockProducts: Product[] = Object.keys(MockProductTypes).map(\n  productType =>\n    createMockProduct(() => ({\n      kind: productType,\n      name: MockProductTypes[productType],\n    })),\n);\n\nexport const MockComputeEngine = findAlways(\n  MockProducts,\n  p => p.kind === 'compute-engine',\n);\nexport const MockCloudDataflow = findAlways(\n  MockProducts,\n  p => p.kind === 'cloud-dataflow',\n);\nexport const MockCloudStorage = findAlways(\n  MockProducts,\n  p => p.kind === 'cloud-storage',\n);\nexport const MockBigQuery = findAlways(\n  MockProducts,\n  p => p.kind === 'big-query',\n);\nexport const MockBigtable = findAlways(\n  MockProducts,\n  p => p.kind === 'big-table',\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, ProductFilters } from '../types';\nimport { MockProductTypes } from './products';\n\nexport const MockProductFilters: ProductFilters = Object.keys(\n  MockProductTypes,\n).map(productType => ({ duration: Duration.P30D, productType }));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { MockProducts } from './products';\nimport {\n  DefaultLoadingAction,\n  getDefaultState as getDefaultLoadingState,\n} from '../utils/loading';\n\nexport const MockDefaultLoadingActions = (\n  [\n    DefaultLoadingAction.UserGroups,\n    DefaultLoadingAction.CostInsightsInitial,\n    DefaultLoadingAction.CostInsightsPage,\n  ] as string[]\n).concat(MockProducts.map(product => product.kind));\n\nexport const mockDefaultLoadingState = getDefaultLoadingState(\n  MockDefaultLoadingActions,\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateAggregation, Entity } from '../types';\n\nexport const MockAggregatedDailyCosts: DateAggregation[] = [\n  {\n    date: '2020-08-07',\n    amount: 3500,\n  },\n  {\n    date: '2020-08-06',\n    amount: 2500,\n  },\n  {\n    date: '2020-08-05',\n    amount: 1400,\n  },\n  {\n    date: '2020-08-04',\n    amount: 3800,\n  },\n  {\n    date: '2020-08-09',\n    amount: 1900,\n  },\n  {\n    date: '2020-08-08',\n    amount: 2400,\n  },\n  {\n    date: '2020-08-03',\n    amount: 4000,\n  },\n  {\n    date: '2020-08-02',\n    amount: 3700,\n  },\n  {\n    date: '2020-08-01',\n    amount: 2500,\n  },\n  {\n    date: '2020-08-18',\n    amount: 4300,\n  },\n  {\n    date: '2020-08-17',\n    amount: 1500,\n  },\n  {\n    date: '2020-08-16',\n    amount: 3600,\n  },\n  {\n    date: '2020-08-15',\n    amount: 2200,\n  },\n  {\n    date: '2020-08-19',\n    amount: 3900,\n  },\n  {\n    date: '2020-08-10',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-14',\n    amount: 3600,\n  },\n  {\n    date: '2020-08-13',\n    amount: 2900,\n  },\n  {\n    date: '2020-08-12',\n    amount: 2700,\n  },\n  {\n    date: '2020-08-11',\n    amount: 5100,\n  },\n  {\n    date: '2020-09-19',\n    amount: 1200,\n  },\n  {\n    date: '2020-09-18',\n    amount: 6500,\n  },\n  {\n    date: '2020-09-17',\n    amount: 2500,\n  },\n  {\n    date: '2020-09-16',\n    amount: 1400,\n  },\n  {\n    date: '2020-09-11',\n    amount: 2300,\n  },\n  {\n    date: '2020-09-10',\n    amount: 1900,\n  },\n  {\n    date: '2020-09-15',\n    amount: 3100,\n  },\n  {\n    date: '2020-09-14',\n    amount: 4500,\n  },\n  {\n    date: '2020-09-13',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-12',\n    amount: 2800,\n  },\n  {\n    date: '2020-09-29',\n    amount: 2600,\n  },\n  {\n    date: '2020-09-28',\n    amount: 4100,\n  },\n  {\n    date: '2020-09-27',\n    amount: 3800,\n  },\n  {\n    date: '2020-09-22',\n    amount: 3700,\n  },\n  {\n    date: '2020-09-21',\n    amount: 2700,\n  },\n  {\n    date: '2020-09-20',\n    amount: 2200,\n  },\n  {\n    date: '2020-09-26',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-25',\n    amount: 4000,\n  },\n  {\n    date: '2020-09-24',\n    amount: 3800,\n  },\n  {\n    date: '2020-09-23',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-29',\n    amount: 4400,\n  },\n  {\n    date: '2020-08-28',\n    amount: 5000,\n  },\n  {\n    date: '2020-08-27',\n    amount: 4900,\n  },\n  {\n    date: '2020-08-26',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-21',\n    amount: 3700,\n  },\n  {\n    date: '2020-08-20',\n    amount: 2200,\n  },\n  {\n    date: '2020-08-25',\n    amount: 1700,\n  },\n  {\n    date: '2020-08-24',\n    amount: 2100,\n  },\n  {\n    date: '2020-08-23',\n    amount: 3100,\n  },\n  {\n    date: '2020-08-22',\n    amount: 1500,\n  },\n  {\n    date: '2020-09-08',\n    amount: 2900,\n  },\n  {\n    date: '2020-09-07',\n    amount: 4100,\n  },\n  {\n    date: '2020-09-06',\n    amount: 3600,\n  },\n  {\n    date: '2020-09-05',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-09',\n    amount: 2800,\n  },\n  {\n    date: '2020-08-31',\n    amount: 3400,\n  },\n  {\n    date: '2020-08-30',\n    amount: 4300,\n  },\n  {\n    date: '2020-09-04',\n    amount: 6100,\n  },\n  {\n    date: '2020-09-03',\n    amount: 2500,\n  },\n  {\n    date: '2020-09-02',\n    amount: 4900,\n  },\n  {\n    date: '2020-09-01',\n    amount: 6100,\n  },\n  {\n    date: '2020-09-30',\n    amount: 5500,\n  },\n];\n\nexport const MockBigQueryInsights: Entity = {\n  id: 'bigQuery',\n  aggregation: [10_000, 30_000],\n  change: {\n    ratio: 3,\n    amount: 20_000,\n  },\n  entities: {\n    dataset: [\n      {\n        id: 'dataset-a',\n        aggregation: [5_000, 10_000],\n        change: {\n          ratio: 1,\n          amount: 5_000,\n        },\n        entities: {},\n      },\n      {\n        id: 'dataset-b',\n        aggregation: [5_000, 10_000],\n        change: {\n          ratio: 1,\n          amount: 5_000,\n        },\n        entities: {},\n      },\n      {\n        id: 'dataset-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockCloudDataflowInsights: Entity = {\n  id: 'cloudDataflow',\n  aggregation: [100_000, 158_000],\n  change: {\n    ratio: 0.58,\n    amount: 58_000,\n  },\n  entities: {\n    pipeline: [\n      {\n        id: null,\n        aggregation: [10_000, 12_000],\n        change: {\n          ratio: 0.2,\n          amount: 2_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [3_000, 4_000],\n              change: {\n                ratio: 0.333333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [7_000, 8_000],\n              change: {\n                ratio: 0.14285714,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-a',\n        aggregation: [60_000, 70_000],\n        change: {\n          ratio: 0.16666666666666666,\n          amount: 10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [20_000, 15_000],\n              change: {\n                ratio: -0.25,\n                amount: -5_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [30_000, 35_000],\n              change: {\n                ratio: -0.16666666666666666,\n                amount: -5_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [10_000, 20_000],\n              change: {\n                ratio: 1,\n                amount: 10_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-b',\n        aggregation: [12_000, 8_000],\n        change: {\n          ratio: -0.33333,\n          amount: -4_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [4_000, 4_000],\n              change: {\n                ratio: 0,\n                amount: 0,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [8_000, 4_000],\n              change: {\n                ratio: -0.5,\n                amount: -4_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockCloudStorageInsights: Entity = {\n  id: 'cloudStorage',\n  aggregation: [45_000, 45_000],\n  change: {\n    ratio: 0,\n    amount: 0,\n  },\n  entities: {\n    bucket: [\n      {\n        id: 'bucket-a',\n        aggregation: [15_000, 20_000],\n        change: {\n          ratio: 0.333,\n          amount: 5_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [10_000, 11_000],\n              change: {\n                ratio: 0.1,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [2_000, 5_000],\n              change: {\n                ratio: 1.5,\n                amount: 3_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [3_000, 4_000],\n              change: {\n                ratio: 0.3333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'bucket-b',\n        aggregation: [30_000, 25_000],\n        change: {\n          ratio: -0.16666,\n          amount: -5_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [12_000, 13_000],\n              change: {\n                ratio: 0.08333333333333333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [16_000, 12_000],\n              change: {\n                ratio: -0.25,\n                amount: -4_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [2_000, 0],\n              change: {\n                amount: -2000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'bucket-c',\n        aggregation: [0, 0],\n        change: {\n          amount: 0,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockComputeEngineInsights: Entity = {\n  id: 'computeEngine',\n  aggregation: [80_000, 90_000],\n  change: {\n    ratio: 0.125,\n    amount: 10_000,\n  },\n  entities: {\n    service: [\n      {\n        id: 'service-a',\n        aggregation: [20_000, 10_000],\n        change: {\n          ratio: -0.5,\n          amount: -10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [9_000, 2_000],\n              change: {\n                ratio: -0.7777777777777778,\n                amount: -7000,\n              },\n              entities: {},\n            },\n          ],\n          deployment: [\n            {\n              id: 'Compute Engine',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Kubernetes',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'service-b',\n        aggregation: [10_000, 20_000],\n        change: {\n          ratio: 1,\n          amount: 10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [1_000, 2_000],\n              change: {\n                ratio: 1,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [4_000, 8_000],\n              change: {\n                ratio: 1,\n                amount: 4_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [5_000, 10_000],\n              change: {\n                ratio: 1,\n                amount: 5_000,\n              },\n              entities: {},\n            },\n          ],\n          deployment: [\n            {\n              id: 'Compute Engine',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Kubernetes',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'service-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockEventsInsights: Entity = {\n  id: 'events',\n  aggregation: [20_000, 10_000],\n  change: {\n    ratio: -0.5,\n    amount: -10_000,\n  },\n  entities: {\n    event: [\n      {\n        id: 'event-a',\n        aggregation: [15_000, 7_000],\n        change: {\n          ratio: -0.53333333333,\n          amount: -8_000,\n        },\n        entities: {\n          product: [\n            {\n              id: 'Mock Product A',\n              aggregation: [5_000, 2_000],\n              change: {\n                ratio: -0.6,\n                amount: -3_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product B',\n              aggregation: [7_000, 2_500],\n              change: {\n                ratio: -0.64285714285,\n                amount: -4_500,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product C',\n              aggregation: [3_000, 2_500],\n              change: {\n                ratio: -0.16666666666,\n                amount: -500,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'event-b',\n        aggregation: [5_000, 3_000],\n        change: {\n          ratio: -0.4,\n          amount: -2_000,\n        },\n        entities: {\n          product: [\n            {\n              id: 'Mock Product A',\n              aggregation: [2_000, 1_000],\n              change: {\n                ratio: -0.5,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product B',\n              aggregation: [1_000, 1_500],\n              change: {\n                ratio: 0.5,\n                amount: 500,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product C',\n              aggregation: [2_000, 500],\n              change: {\n                ratio: -0.75,\n                amount: -1_500,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n    ],\n  },\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { LoadingContext, LoadingContextProps } from '../hooks/useLoading';\nimport { GroupsContext, GroupsContextProps } from '../hooks/useGroups';\nimport { FilterContext, FilterContextProps } from '../hooks/useFilters';\nimport { ConfigContext, ConfigContextProps } from '../hooks/useConfig';\nimport { CurrencyContext, CurrencyContextProps } from '../hooks/useCurrency';\nimport {\n  BillingDateContext,\n  BillingDateContextProps,\n} from '../hooks/useLastCompleteBillingDate';\nimport { ScrollContext, ScrollContextProps } from '../hooks/useScroll';\nimport { Group, Duration } from '../types';\n\ntype PartialPropsWithChildren<T> = PropsWithChildren<Partial<T>>;\n\nexport const MockGroups: Group[] = [{ id: 'tech' }, { id: 'mock-group' }];\n\nexport type MockFilterProviderProps =\n  PartialPropsWithChildren<FilterContextProps>;\n\nexport const MockFilterProvider = ({\n  children,\n  ...context\n}: MockFilterProviderProps) => {\n  const defaultContext: FilterContextProps = {\n    pageFilters: {\n      group: 'tech',\n      project: null,\n      duration: Duration.P90D,\n      metric: null,\n    },\n    productFilters: [],\n    setPageFilters: jest.fn(),\n    setProductFilters: jest.fn(),\n  };\n  return (\n    <FilterContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </FilterContext.Provider>\n  );\n};\n\nexport type MockLoadingProviderProps =\n  PartialPropsWithChildren<LoadingContextProps>;\n\nexport const MockLoadingProvider = ({\n  children,\n  ...context\n}: MockLoadingProviderProps) => {\n  const defaultContext: LoadingContextProps = {\n    state: {},\n    actions: [],\n    dispatch: jest.fn(),\n  };\n  return (\n    <LoadingContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </LoadingContext.Provider>\n  );\n};\n\nexport type MockConfigProviderProps =\n  PartialPropsWithChildren<ConfigContextProps>;\n\nexport const MockConfigProvider = ({\n  children,\n  ...context\n}: MockConfigProviderProps) => {\n  const defaultContext: ConfigContextProps = {\n    metrics: [],\n    products: [],\n    icons: [],\n    engineerCost: 0,\n    currencies: [],\n  };\n  return (\n    <ConfigContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </ConfigContext.Provider>\n  );\n};\n\nexport type MockCurrencyProviderProps =\n  PartialPropsWithChildren<CurrencyContextProps>;\n\nexport const MockCurrencyProvider = ({\n  children,\n  ...context\n}: MockCurrencyProviderProps) => {\n  const defaultContext: CurrencyContextProps = {\n    currency: {\n      kind: null,\n      label: 'Engineers 🛠',\n      unit: 'engineer',\n    },\n    setCurrency: jest.fn(),\n  };\n  return (\n    <CurrencyContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n};\n\nexport type MockBillingDateProviderProps =\n  PartialPropsWithChildren<BillingDateContextProps>;\n\nexport const MockBillingDateProvider = ({\n  children,\n  ...context\n}: MockBillingDateProviderProps) => {\n  const defaultContext: BillingDateContextProps = {\n    lastCompleteBillingDate: '2020-10-01',\n  };\n  return (\n    <BillingDateContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </BillingDateContext.Provider>\n  );\n};\n\nexport type MockScrollProviderProps = PropsWithChildren<{}>;\n\nexport const MockScrollProvider = ({ children }: MockScrollProviderProps) => {\n  const defaultContext: ScrollContextProps = {\n    scroll: null,\n    setScroll: jest.fn(),\n  };\n  return (\n    <ScrollContext.Provider value={defaultContext}>\n      {children}\n    </ScrollContext.Provider>\n  );\n};\n\nexport type MockGroupsProviderProps =\n  PartialPropsWithChildren<GroupsContextProps>;\n\nexport const MockGroupsProvider = ({\n  children,\n  ...context\n}: MockGroupsProviderProps) => {\n  const defaultContext: GroupsContextProps = {\n    groups: [],\n  };\n  return (\n    <GroupsContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </GroupsContext.Provider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime } from 'luxon';\nimport regression, { DataPoint } from 'regression';\nimport {\n  ChangeStatistic,\n  Duration,\n  Entity,\n  Trendline,\n  DateAggregation,\n  DEFAULT_DATE_FORMAT,\n} from '../types';\nimport { inclusiveEndDateOf, inclusiveStartDateOf } from '../utils/duration';\nimport {\n  MockComputeEngineInsights,\n  MockCloudDataflowInsights,\n  MockCloudStorageInsights,\n  MockBigQueryInsights,\n  MockEventsInsights,\n} from './mockData';\n\ntype IntervalFields = {\n  duration: Duration;\n  endDate: string;\n};\n\nfunction parseIntervals(intervals: string): IntervalFields {\n  const match = intervals.match(\n    /\\/(?<duration>P\\d+[DM])\\/(?<date>\\d{4}-\\d{2}-\\d{2})/,\n  );\n  if (Object.keys(match?.groups || {}).length !== 2) {\n    throw new Error(`Invalid intervals: ${intervals}`);\n  }\n  const { duration, date } = match!.groups!;\n  return {\n    duration: duration as Duration,\n    endDate: date,\n  };\n}\n\nexport function aggregationFor(\n  intervals: string,\n  baseline: number,\n): DateAggregation[] {\n  const { duration, endDate } = parseIntervals(intervals);\n  const inclusiveEndDate = inclusiveEndDateOf(duration, endDate);\n  const days = DateTime.fromISO(endDate).diff(\n    DateTime.fromISO(inclusiveStartDateOf(duration, inclusiveEndDate)),\n    'days',\n  ).days;\n\n  function nextDelta(): number {\n    const varianceFromBaseline = 0.15;\n    // Let's give positive vibes in trendlines - higher change for positive delta with >0.5 value\n    const positiveTrendChance = 0.55;\n    const normalization = positiveTrendChance - 1;\n    return baseline * (Math.random() + normalization) * varianceFromBaseline;\n  }\n\n  return [...Array(days).keys()].reduce(\n    (values: DateAggregation[], i: number): DateAggregation[] => {\n      const last = values.length ? values[values.length - 1].amount : baseline;\n      const date = DateTime.fromISO(\n        inclusiveStartDateOf(duration, inclusiveEndDate),\n      )\n        .plus({ days: i })\n        .toFormat(DEFAULT_DATE_FORMAT);\n      const amount = Math.max(0, last + nextDelta());\n      values.push({\n        date: date,\n        amount: amount,\n      });\n      return values;\n    },\n    [],\n  );\n}\n\nexport function changeOf(aggregation: DateAggregation[]): ChangeStatistic {\n  const firstAmount = aggregation.length ? aggregation[0].amount : 0;\n  const lastAmount = aggregation.length\n    ? aggregation[aggregation.length - 1].amount\n    : 0;\n\n  // if either the first or last amounts are zero, the rate of increase/decrease is infinite\n  if (!firstAmount || !lastAmount) {\n    return {\n      amount: lastAmount - firstAmount,\n    };\n  }\n\n  return {\n    ratio: (lastAmount - firstAmount) / firstAmount,\n    amount: lastAmount - firstAmount,\n  };\n}\n\nexport function trendlineOf(aggregation: DateAggregation[]): Trendline {\n  const data: ReadonlyArray<DataPoint> = aggregation.map(a => [\n    Date.parse(a.date) / 1000,\n    a.amount,\n  ]);\n  const result = regression.linear(data, { precision: 5 });\n  return {\n    slope: result.equation[0],\n    intercept: result.equation[1],\n  };\n}\n\nexport function entityOf(product: string): Entity {\n  switch (product) {\n    case 'computeEngine':\n      return MockComputeEngineInsights;\n    case 'cloudDataflow':\n      return MockCloudDataflowInsights;\n    case 'cloudStorage':\n      return MockCloudStorageInsights;\n    case 'bigQuery':\n      return MockBigQueryInsights;\n    case 'events':\n      return MockEventsInsights;\n    default:\n      throw new Error(\n        `Cannot get insights for ${product}. Make sure product matches product property in app-info.yaml`,\n      );\n  }\n}\n\nexport const getGroupedProducts = (intervals: string) => [\n  {\n    id: 'Cloud Dataflow',\n    aggregation: aggregationFor(intervals, 1_700),\n  },\n  {\n    id: 'Compute Engine',\n    aggregation: aggregationFor(intervals, 350),\n  },\n  {\n    id: 'Cloud Storage',\n    aggregation: aggregationFor(intervals, 1_300),\n  },\n  {\n    id: 'BigQuery',\n    aggregation: aggregationFor(intervals, 2_000),\n  },\n  {\n    id: 'Cloud SQL',\n    aggregation: aggregationFor(intervals, 750),\n  },\n  {\n    id: 'Cloud Spanner',\n    aggregation: aggregationFor(intervals, 50),\n  },\n  {\n    id: 'Cloud Pub/Sub',\n    aggregation: aggregationFor(intervals, 1_000),\n  },\n  {\n    id: 'Cloud Bigtable',\n    aggregation: aggregationFor(intervals, 250),\n  },\n];\n\nexport const getGroupedProjects = (intervals: string) => [\n  {\n    id: 'project-a',\n    aggregation: aggregationFor(intervals, 1_700),\n  },\n  {\n    id: 'project-b',\n    aggregation: aggregationFor(intervals, 350),\n  },\n  {\n    id: 'project-c',\n    aggregation: aggregationFor(intervals, 1_300),\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-restricted-imports */\n\nimport { DateTime } from 'luxon';\nimport { CostInsightsApi, ProductInsightsOptions } from '../api';\nimport {\n  Alert,\n  Cost,\n  DEFAULT_DATE_FORMAT,\n  Entity,\n  Group,\n  MetricData,\n  Project,\n  ProjectGrowthData,\n  UnlabeledDataflowData,\n} from '../types';\nimport { KubernetesMigrationAlert } from './alerts';\nimport { ProjectGrowthAlert, UnlabeledDataflowAlert } from '../alerts';\nimport {\n  aggregationFor,\n  changeOf,\n  entityOf,\n  getGroupedProducts,\n  getGroupedProjects,\n  trendlineOf,\n} from '../testUtils';\n\nexport class ExampleCostInsightsClient implements CostInsightsApi {\n  private request(_: any, res: any): Promise<any> {\n    return new Promise(resolve => setTimeout(resolve, 0, res));\n  }\n\n  getLastCompleteBillingDate(): Promise<string> {\n    return Promise.resolve(\n      DateTime.now().minus({ days: 1 }).toFormat(DEFAULT_DATE_FORMAT),\n    );\n  }\n\n  async getUserGroups(userId: string): Promise<Group[]> {\n    const groups: Group[] = await this.request({ userId }, [\n      { id: 'pied-piper' },\n    ]);\n\n    return groups;\n  }\n\n  async getGroupProjects(group: string): Promise<Project[]> {\n    const projects: Project[] = await this.request({ group }, [\n      { id: 'project-a' },\n      { id: 'project-b' },\n      { id: 'project-c' },\n    ]);\n\n    return projects;\n  }\n\n  async getDailyMetricData(\n    metric: string,\n    intervals: string,\n  ): Promise<MetricData> {\n    const aggregation = aggregationFor(intervals, 100_000).map(entry => ({\n      ...entry,\n      amount: Math.round(entry.amount),\n    }));\n\n    const cost: MetricData = await this.request(\n      { metric, intervals },\n      {\n        format: 'number',\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n      },\n    );\n\n    return cost;\n  }\n\n  async getGroupDailyCost(group: string, intervals: string): Promise<Cost> {\n    const aggregation = aggregationFor(intervals, 8_000);\n    const groupDailyCost: Cost = await this.request(\n      { group, intervals },\n      {\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n        // Optional field providing cost groupings / breakdowns keyed by the type. In this example,\n        // daily cost grouped by cloud product OR by project / billing account.\n        groupedCosts: {\n          product: getGroupedProducts(intervals),\n          project: getGroupedProjects(intervals),\n        },\n      },\n    );\n\n    return groupDailyCost;\n  }\n\n  async getProjectDailyCost(project: string, intervals: string): Promise<Cost> {\n    const aggregation = aggregationFor(intervals, 1_500);\n    const projectDailyCost: Cost = await this.request(\n      { project, intervals },\n      {\n        id: 'project-a',\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n        // Optional field providing cost groupings / breakdowns keyed by the type. In this example,\n        // daily project cost grouped by cloud product.\n        groupedCosts: {\n          product: getGroupedProducts(intervals),\n        },\n      },\n    );\n\n    return projectDailyCost;\n  }\n\n  async getProductInsights(options: ProductInsightsOptions): Promise<Entity> {\n    const productInsights: Entity = await this.request(\n      options,\n      entityOf(options.product),\n    );\n\n    return productInsights;\n  }\n\n  async getAlerts(group: string): Promise<Alert[]> {\n    const projectGrowthData: ProjectGrowthData = {\n      project: 'example-project',\n      periodStart: '2020-Q2',\n      periodEnd: '2020-Q3',\n      aggregation: [60_000, 120_000],\n      change: {\n        ratio: 1,\n        amount: 60_000,\n      },\n      products: [\n        { id: 'Compute Engine', aggregation: [58_000, 118_000] },\n        { id: 'Cloud Dataflow', aggregation: [1200, 1500] },\n        { id: 'Cloud Storage', aggregation: [800, 500] },\n      ],\n    };\n\n    const unlabeledDataflowData: UnlabeledDataflowData = {\n      periodStart: '2020-09-01',\n      periodEnd: '2020-09-30',\n      labeledCost: 6_200,\n      unlabeledCost: 7_000,\n      projects: [\n        {\n          id: 'example-project-1',\n          unlabeledCost: 5_000,\n          labeledCost: 3_000,\n        },\n        {\n          id: 'example-project-2',\n          unlabeledCost: 2_000,\n          labeledCost: 3_200,\n        },\n      ],\n    };\n\n    const today = DateTime.now();\n    const alerts: Alert[] = await this.request({ group }, [\n      new ProjectGrowthAlert(projectGrowthData),\n      new UnlabeledDataflowAlert(unlabeledDataflowData),\n      new KubernetesMigrationAlert(this, {\n        startDate: today.minus({ days: 30 }).toFormat(DEFAULT_DATE_FORMAT),\n        endDate: today.toFormat(DEFAULT_DATE_FORMAT),\n        change: {\n          ratio: 0,\n          amount: 0,\n        },\n        services: [\n          {\n            id: 'service-a',\n            aggregation: [20_000, 10_000],\n            change: {\n              ratio: -0.5,\n              amount: -10_000,\n            },\n            entities: {},\n          },\n          {\n            id: 'service-b',\n            aggregation: [30_000, 15_000],\n            change: {\n              ratio: -0.5,\n              amount: -15_000,\n            },\n            entities: {},\n          },\n        ],\n      }),\n    ]);\n\n    return alerts;\n  }\n}\n"],"names":["assertNever","LuxonDuration","useStyles","mapLoadingToProps","choose","createMuiTheme","RechartsBarChart","RechartsTooltip","Tooltip","CloseButton","useLayoutStyles","getDefaultLoadingState"],"mappings":"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"}