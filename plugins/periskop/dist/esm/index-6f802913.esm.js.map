{"version":3,"file":"index-6f802913.esm.js","sources":["../../src/api/index.ts","../../src/plugin.ts","../../src/extensions.ts","../../src/components/EntityPeriskopErrorsCard/EntityPeriskopErrorsCard.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ConfigApi, DiscoveryApi } from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport { AggregatedError, NotFoundInInstance } from '../types';\n\n/** @public */\nexport type PeriskopApiOptions = {\n  discoveryApi: DiscoveryApi;\n  configApi: ConfigApi;\n};\n\ntype PeriskopInstance = {\n  name: string;\n  url: string;\n};\n\n/**\n * API abstraction to interact with Periskop's backends.\n *\n * @public\n */\nexport interface PeriskopApi {\n  /**\n   * Returns the list of registered Periskop instance names.\n   */\n  getInstanceNames(): string[];\n\n  /**\n   * For the given instance and service, returns the URL pointing to the specific error instance occurrence.\n   * Note: This method might point to an external route.\n   */\n  getErrorInstanceUrl(\n    instanceName: string,\n    serviceName: string,\n    error: AggregatedError,\n  ): string;\n\n  /**\n   * Fetches all errors for the given service from the specified Periskop instance, given its name.\n   */\n  getErrors(\n    instanceName: string,\n    serviceName: string,\n  ): Promise<AggregatedError[] | NotFoundInInstance>;\n}\n\n/**\n * API implementation to interact with Periskop's backends.\n *\n * @public\n */\nexport class PeriskopClient implements PeriskopApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly instances: PeriskopInstance[];\n\n  constructor(options: PeriskopApiOptions) {\n    this.discoveryApi = options.discoveryApi;\n    this.instances = options.configApi\n      .getConfigArray('periskop.instances')\n      .flatMap(locConf => {\n        const name = locConf.getString('name');\n        const url = locConf.getString('url');\n        return { name: name, url: url };\n      });\n  }\n\n  private getApiUrl(instanceName: string): string | undefined {\n    return this.instances.find(instance => instance.name === instanceName)?.url;\n  }\n\n  getInstanceNames(): string[] {\n    return this.instances.map(e => e.name);\n  }\n\n  getErrorInstanceUrl(\n    instanceName: string,\n    serviceName: string,\n    error: AggregatedError,\n  ): string {\n    return `${this.getApiUrl(\n      instanceName,\n    )}/#/${serviceName}/errors/${encodeURIComponent(error.aggregation_key)}`;\n  }\n\n  async getErrors(\n    instanceName: string,\n    serviceName: string,\n  ): Promise<AggregatedError[] | NotFoundInInstance> {\n    const apiUrl = `${await this.discoveryApi.getBaseUrl(\n      'periskop',\n    )}/${instanceName}/${serviceName}`;\n    const response = await fetch(apiUrl);\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        return {\n          body: await response.text(),\n        };\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  discoveryApiRef,\n  configApiRef,\n  createApiFactory,\n  createPlugin,\n  createApiRef,\n} from '@backstage/core-plugin-api';\nimport { PeriskopApi, PeriskopClient } from './api';\n\n/**\n * @public\n */\nexport const periskopApiRef = createApiRef<PeriskopApi>({\n  id: 'plugin.periskop.service',\n});\n\n/**\n * @public\n */\nexport const periskopPlugin = createPlugin({\n  id: 'periskop',\n  apis: [\n    createApiFactory({\n      api: periskopApiRef,\n      deps: { configApi: configApiRef, discoveryApi: discoveryApiRef },\n      factory: ({ configApi, discoveryApi }) =>\n        new PeriskopClient({ configApi, discoveryApi }),\n    }),\n  ],\n});\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { periskopPlugin } from './plugin';\nimport { createComponentExtension } from '@backstage/core-plugin-api';\n\n/**\n * @public\n */\nexport const EntityPeriskopErrorsCard = periskopPlugin.provide(\n  createComponentExtension({\n    name: 'EntityPeriskopErrorsCard',\n    component: {\n      lazy: () =>\n        import('./components/EntityPeriskopErrorsCard').then(\n          m => m.EntityPeriskopErrorsCard,\n        ),\n    },\n  }),\n);\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Entity } from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  Content,\n  ContentHeader,\n  Table,\n  TableColumn,\n  Progress,\n  ResponseErrorPanel,\n  StatusWarning,\n  StatusError,\n  StatusPending,\n  Select,\n  EmptyState,\n  Link,\n} from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport { periskopApiRef } from '../..';\nimport { AggregatedError, NotFoundInInstance } from '../../types';\n\n/**\n * Constant storing Periskop project name.\n *\n * @public\n */\nexport const PERISKOP_NAME_ANNOTATION = 'periskop.io/service-name';\n\n/**\n * Returns true if Periskop annotation is present in the given entity.\n *\n * @public\n */\nexport const isPeriskopAvailable = (entity: Entity): boolean =>\n  Boolean(entity.metadata.annotations?.[PERISKOP_NAME_ANNOTATION]);\n\nconst renderKey = (\n  error: AggregatedError,\n  linkTarget: string,\n): React.ReactNode => {\n  return <Link to={linkTarget}>{error.aggregation_key}</Link>;\n};\n\nconst renderSeverity = (severity: string): React.ReactNode => {\n  if (severity.toLocaleLowerCase('en-US') === 'warning') {\n    return <StatusWarning>{severity}</StatusWarning>;\n  } else if (severity.toLocaleLowerCase('en-US') === 'error') {\n    return <StatusError>{severity}</StatusError>;\n  }\n  return <StatusPending>{severity}</StatusPending>;\n};\n\nconst renderLastOccurrence = (error: AggregatedError): React.ReactNode => {\n  return DateTime.fromMillis(\n    error.latest_errors[0].timestamp * 1000,\n  ).toRelative();\n};\n\nfunction isNotFoundInInstance(\n  apiResult: AggregatedError[] | NotFoundInInstance | undefined,\n): apiResult is NotFoundInInstance {\n  return (apiResult as NotFoundInInstance)?.body !== undefined;\n}\n\nexport const EntityPeriskopErrorsCard = () => {\n  const { entity } = useEntity();\n  const entityPeriskopName: string =\n    entity.metadata.annotations?.[PERISKOP_NAME_ANNOTATION] ??\n    entity.metadata.name;\n\n  const periskopApi = useApi(periskopApiRef);\n  const instanceNames = periskopApi.getInstanceNames();\n  const [instanceOption, setInstanceOption] = React.useState<string>(\n    instanceNames[0],\n  );\n  const {\n    value: aggregatedErrors,\n    loading,\n    error,\n  } = useAsync(async (): Promise<AggregatedError[] | NotFoundInInstance> => {\n    return periskopApi.getErrors(instanceOption, entityPeriskopName);\n  }, [instanceOption]);\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n\n  const columns: TableColumn<AggregatedError>[] = [\n    {\n      title: 'Key',\n      field: 'aggregation_key',\n      highlight: true,\n      sorting: false,\n      render: aggregatedError => {\n        const errorUrl = periskopApi.getErrorInstanceUrl(\n          instanceOption,\n          entityPeriskopName,\n          aggregatedError,\n        );\n        return renderKey(aggregatedError, errorUrl);\n      },\n    },\n    { title: 'Occurrences', field: 'total_count', sorting: true },\n    {\n      title: 'Last Occurrence',\n      render: aggregatedError => renderLastOccurrence(aggregatedError),\n      defaultSort: 'asc',\n      customSort: (a, b) =>\n        b.latest_errors[0].timestamp - a.latest_errors[0].timestamp,\n      type: 'datetime',\n    },\n    {\n      title: 'Severity',\n      field: 'severity',\n      render: aggregatedError => renderSeverity(aggregatedError.severity),\n      sorting: false,\n    },\n  ];\n\n  const sortingSelect = (\n    <Select\n      selected={instanceOption}\n      label=\"Instance\"\n      items={instanceNames.map(e => ({\n        label: e,\n        value: e,\n      }))}\n      onChange={el => setInstanceOption(el.toString())}\n    />\n  );\n\n  const contentHeader = (\n    <ContentHeader title=\"Periskop\" description={entityPeriskopName}>\n      {sortingSelect}\n    </ContentHeader>\n  );\n\n  if (isNotFoundInInstance(aggregatedErrors)) {\n    return (\n      <Content noPadding>\n        {contentHeader}\n        <EmptyState\n          title=\"Periskop returned an error\"\n          description={aggregatedErrors.body}\n          missing=\"data\"\n        />\n      </Content>\n    );\n  }\n\n  return (\n    <Content noPadding>\n      {contentHeader}\n      <Table\n        options={{\n          search: false,\n          paging: false,\n          filtering: true,\n          padding: 'dense',\n          toolbar: false,\n        }}\n        columns={columns}\n        data={aggregatedErrors || []}\n      />\n    </Content>\n  );\n};\n"],"names":["EntityPeriskopErrorsCard"],"mappings":"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"}