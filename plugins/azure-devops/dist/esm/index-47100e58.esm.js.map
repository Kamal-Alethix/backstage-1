{"version":3,"file":"index-47100e58.esm.js","sources":["../../src/components/AzureGitTagsIcon/AzureGitTagsIcon.tsx","../../src/hooks/useGitTags.ts","../../src/components/GitTagTable/GitTagTable.tsx","../../src/components/EntityPageAzureGitTags/EntityPageAzureGitTags.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SvgIcon, SvgIconProps } from '@material-ui/core';\n\nimport React from 'react';\n\n// From https://github.com/microsoft/fluentui-system-icons/blob/30a3e3c458883a1d63a43a951407f30e6b32b60c/assets/Tag/SVG/ic_fluent_tag_32_regular.svg\nexport const AzureGitTagsIcon = (props: SvgIconProps) => (\n  <SvgIcon {...props} viewBox=\"0 0 32 32\">\n    <path d=\"M22.5 12C23.8807 12 25 10.8807 25 9.5C25 8.11929 23.8807 7 22.5 7C21.1193 7 20 8.11929 20 9.5C20 10.8807 21.1193 12 22.5 12ZM18.6842 3C17.6695 3 16.6927 3.38568 15.9516 4.07892L3.77041 15.4742C2.01578 17.1157 1.96966 19.8841 3.66863 21.5831L9.99455 27.909C11.6543 29.5687 14.3452 29.5687 16.005 27.909L27.8282 16.0858C28.5783 15.3356 28.9998 14.3182 28.9998 13.2574V6.5C28.9998 4.567 27.4328 3 25.4998 3H18.6842ZM17.3179 5.53946C17.6884 5.19284 18.1769 5 18.6842 5H25.4998C26.3282 5 26.9998 5.67157 26.9998 6.5V13.2574C26.9998 13.7878 26.789 14.2965 26.414 14.6716L14.5907 26.4948C13.7121 27.3735 12.2874 27.3735 11.4088 26.4948L5.08284 20.1689C4.18339 19.2694 4.20781 17.8038 5.13673 16.9348L17.3179 5.53946Z\" />\n  </SvgIcon>\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GitTag } from '@backstage/plugin-azure-devops-common';\n\nimport { Entity } from '@backstage/catalog-model';\nimport { azureDevOpsApiRef } from '../api';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { useProjectRepoFromEntity } from './useProjectRepoFromEntity';\n\nexport function useGitTags(entity: Entity): {\n  items?: GitTag[];\n  loading: boolean;\n  error?: Error;\n} {\n  const api = useApi(azureDevOpsApiRef);\n  const { project, repo } = useProjectRepoFromEntity(entity);\n\n  const { value, loading, error } = useAsync(() => {\n    return api.getGitTags(project, repo);\n  }, [api, project, repo]);\n\n  return {\n    items: value?.items,\n    loading,\n    error,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Box } from '@material-ui/core';\nimport {\n  Link,\n  ResponseErrorPanel,\n  Table,\n  TableColumn,\n} from '@backstage/core-components';\nimport { GitTag } from '@backstage/plugin-azure-devops-common';\nimport React from 'react';\n\nimport { AzureGitTagsIcon } from '../AzureGitTagsIcon';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { useGitTags } from '../../hooks/useGitTags';\n\nconst columns: TableColumn[] = [\n  {\n    title: 'Tag',\n    field: 'name',\n    highlight: false,\n    defaultSort: 'desc',\n    width: 'auto',\n    render: (row: Partial<GitTag>) => (\n      <Box display=\"flex\" alignItems=\"center\">\n        <Link to={row.link ?? ''}>{row.name}</Link>\n      </Box>\n    ),\n  },\n  {\n    title: 'Commit',\n    field: 'peeledObjectId',\n    width: 'auto',\n    render: (row: Partial<GitTag>) => (\n      <Box display=\"flex\" alignItems=\"center\">\n        <Link to={row.commitLink ?? ''}>{row.peeledObjectId}</Link>\n      </Box>\n    ),\n  },\n  {\n    title: 'Created By',\n    field: 'createdBy',\n    width: 'auto',\n  },\n];\n\nexport const GitTagTable = () => {\n  const { entity } = useEntity();\n\n  const { items, loading, error } = useGitTags(entity);\n\n  if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n\n  return (\n    <Table\n      isLoading={loading}\n      columns={columns}\n      options={{\n        search: true,\n        paging: true,\n        pageSize: 5,\n        showEmptyDataSourceMessage: !loading,\n      }}\n      title={\n        <Box display=\"flex\" alignItems=\"center\">\n          <AzureGitTagsIcon style={{ fontSize: 30 }} />\n          <Box mr={1} />\n          Azure Repos - Git Tags ({items ? items.length : 0})\n        </Box>\n      }\n      data={items ?? []}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GitTagTable } from '../GitTagTable/GitTagTable';\nimport React from 'react';\n\nexport const EntityPageAzureGitTags = () => <GitTagTable />;\n"],"names":[],"mappings":"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"}