{"version":3,"file":"index-c9b32493.esm.js","sources":["../../src/home/StackOverflowQuestions/Content.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { Link } from '@backstage/core-components';\nimport {\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n} from '@material-ui/core';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport useAsync from 'react-use/lib/useAsync';\nimport qs from 'qs';\nimport React from 'react';\nimport {\n  StackOverflowQuestion,\n  StackOverflowQuestionsContentProps,\n} from '../../types';\n\n/**\n * A component to display a list of stack overflow questions on the homepage.\n *\n * @public\n */\n\nexport const Content = (props: StackOverflowQuestionsContentProps) => {\n  const { requestParams } = props;\n  const configApi = useApi(configApiRef);\n  const baseUrl =\n    configApi.getOptionalString('stackoverflow.baseUrl') ||\n    'https://api.stackexchange.com/2.2';\n\n  const { value, loading, error } = useAsync(async (): Promise<\n    StackOverflowQuestion[]\n  > => {\n    const params = qs.stringify(requestParams, { addQueryPrefix: true });\n    const response = await fetch(`${baseUrl}/questions${params}`);\n    const data = await response.json();\n    return data.items;\n  }, []);\n\n  if (loading) {\n    return <p>loading...</p>;\n  }\n\n  if (error || !value || !value.length) {\n    return <p>could not load questions</p>;\n  }\n\n  const getSecondaryText = (answer_count: Number) =>\n    answer_count > 1 ? `${answer_count} answers` : `${answer_count} answer`;\n\n  return (\n    <List>\n      {value.map(question => (\n        <ListItem key={question.link}>\n          <Link to={question.link}>\n            <ListItemText\n              primary={question.title}\n              secondary={getSecondaryText(question.answer_count)}\n            />\n            <ListItemSecondaryAction>\n              <IconButton edge=\"end\" aria-label=\"external-link\">\n                <OpenInNewIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </Link>\n        </ListItem>\n      ))}\n    </List>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AAaY,MAAC,OAAO,GAAG,CAAC,KAAK,KAAK;AAClC,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,KAAK,CAAC;AAClC,EAAE,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AACzC,EAAE,MAAM,OAAO,GAAG,SAAS,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,IAAI,mCAAmC,CAAC;AAC9G,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,QAAQ,CAAC,YAAY;AACzD,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC;AACzE,IAAI,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;AAClE,IAAI,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;AACvC,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC;AACtB,GAAG,EAAE,EAAE,CAAC,CAAC;AACT,EAAE,IAAI,OAAO,EAAE;AACf,IAAI,uBAAuB,KAAK,CAAC,aAAa,CAAC,GAAG,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;AACxE,GAAG;AACH,EAAE,IAAI,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AACxC,IAAI,uBAAuB,KAAK,CAAC,aAAa,CAAC,GAAG,EAAE,IAAI,EAAE,0BAA0B,CAAC,CAAC;AACtF,GAAG;AACH,EAAE,MAAM,gBAAgB,GAAG,CAAC,YAAY,KAAK,YAAY,GAAG,CAAC,GAAG,CAAC,EAAE,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC;AACrH,EAAE,uBAAuB,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,qBAAqB,KAAK,CAAC,aAAa,CAAC,QAAQ,EAAE;AAC/H,IAAI,GAAG,EAAE,QAAQ,CAAC,IAAI;AACtB,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE;AAC/C,IAAI,EAAE,EAAE,QAAQ,CAAC,IAAI;AACrB,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,YAAY,EAAE;AACvD,IAAI,OAAO,EAAE,QAAQ,CAAC,KAAK;AAC3B,IAAI,SAAS,EAAE,gBAAgB,CAAC,QAAQ,CAAC,YAAY,CAAC;AACtD,GAAG,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,uBAAuB,EAAE,IAAI,kBAAkB,KAAK,CAAC,aAAa,CAAC,UAAU,EAAE;AACzH,IAAI,IAAI,EAAE,KAAK;AACf,IAAI,YAAY,EAAE,eAAe;AACjC,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpE;;;;"}