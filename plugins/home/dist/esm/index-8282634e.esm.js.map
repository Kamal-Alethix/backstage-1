{"version":3,"file":"index-8282634e.esm.js","sources":["../../src/homePageComponents/StarredEntities/Content.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  catalogApiRef,\n  useStarredEntities,\n  entityRouteParams,\n  entityRouteRef,\n} from '@backstage/plugin-catalog-react';\nimport { parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { Link, Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  IconButton,\n  ListItemText,\n  Tooltip,\n  Typography,\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\n/**\n * A component to display a list of starred entities for the user.\n *\n * @public\n */\nexport const Content = () => {\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { starredEntities, toggleStarredEntity } = useStarredEntities();\n\n  // Grab starred entities from catalog to ensure they still exist and also retrieve display titles\n  const entities = useAsync(async () => {\n    if (!starredEntities.size) {\n      return [];\n    }\n\n    const filter = [...starredEntities]\n      .map(ent => parseEntityRef(ent))\n      .map(ref => ({\n        kind: ref.kind,\n        'metadata.namespace': ref.namespace,\n        'metadata.name': ref.name,\n      }));\n\n    return (\n      await catalogApi.getEntities({\n        filter,\n        fields: [\n          'kind',\n          'metadata.namespace',\n          'metadata.name',\n          'metadata.title',\n        ],\n      })\n    ).items;\n  }, [catalogApi, starredEntities]);\n\n  if (starredEntities.size === 0)\n    return (\n      <Typography variant=\"body1\">\n        You do not have any starred entities yet!\n      </Typography>\n    );\n\n  if (entities.loading) {\n    return <Progress />;\n  }\n\n  return entities.error ? (\n    <ResponseErrorPanel error={entities.error} />\n  ) : (\n    <List>\n      {entities.value\n        ?.sort((a, b) =>\n          (a.metadata.title ?? a.metadata.name).localeCompare(\n            b.metadata.title ?? b.metadata.name,\n          ),\n        )\n        .map(entity => (\n          <ListItem key={stringifyEntityRef(entity)}>\n            <Link to={catalogEntityRoute(entityRouteParams(entity))}>\n              <ListItemText\n                primary={entity.metadata.title ?? entity.metadata.name}\n              />\n            </Link>\n            <ListItemSecondaryAction>\n              <Tooltip title=\"Remove from starred\">\n                <IconButton\n                  edge=\"end\"\n                  aria-label=\"unstar\"\n                  onClick={() => toggleStarredEntity(entity)}\n                >\n                  <StarIcon style={{ color: '#f3ba37' }} />\n                </IconButton>\n              </Tooltip>\n            </ListItemSecondaryAction>\n          </ListItem>\n        ))}\n    </List>\n  );\n};\n"],"names":[],"mappings":"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"}