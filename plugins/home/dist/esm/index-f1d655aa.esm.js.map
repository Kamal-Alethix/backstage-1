{"version":3,"file":"index-f1d655aa.esm.js","sources":["../../src/homePageComponents/WelcomeTitle/timeUtil.ts","../../src/homePageComponents/WelcomeTitle/WelcomeTitle.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport goodMorning from './locales/goodMorning.locales.json';\nimport goodAfternoon from './locales/goodAfternoon.locales.json';\nimport goodEvening from './locales/goodEvening.locales.json';\n\n// Select a large random integer at startup, to prevent the greetings to change\n// every time the user navigates.\nconst greetingRandomSeed = Math.floor(Math.random() * 1000000);\n\nexport function getTimeBasedGreeting(): { language: string; greeting: string } {\n  const random = (array: string[]) => array[greetingRandomSeed % array.length];\n\n  const currentHour = new Date(Date.now()).getHours();\n  if (currentHour >= 23) {\n    return {\n      language: 'Seriously',\n      greeting: 'Get some rest',\n    };\n  }\n  const timeOfDay = (hour: number): { [language: string]: string } => {\n    if (hour < 12) return goodMorning;\n    if (hour < 17) return goodAfternoon;\n    return goodEvening;\n  };\n  const greetings = timeOfDay(currentHour);\n  const greetingsKey = random(Object.keys(greetings));\n  return {\n    language: greetingsKey,\n    greeting: greetings[greetingsKey],\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  alertApiRef,\n  identityApiRef,\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { Tooltip } from '@material-ui/core';\nimport React, { useEffect, useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { getTimeBasedGreeting } from './timeUtil';\n\nexport const WelcomeTitle = () => {\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const greeting = useMemo(() => getTimeBasedGreeting(), []);\n\n  const { value: profile, error } = useAsync(() =>\n    identityApi.getProfileInfo(),\n  );\n\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: 'error',\n      });\n    }\n  }, [error, alertApi]);\n\n  return (\n    <Tooltip title={greeting.language}>\n      <span>{`${greeting.greeting}${\n        profile?.displayName ? `, ${profile?.displayName}` : ''\n      }!`}</span>\n    </Tooltip>\n  );\n};\n"],"names":[],"mappings":"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"}