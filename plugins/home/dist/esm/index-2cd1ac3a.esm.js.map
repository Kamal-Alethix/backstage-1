{"version":3,"file":"index-2cd1ac3a.esm.js","sources":["../../src/homePageComponents/RandomJoke/Context.tsx","../../src/homePageComponents/RandomJoke/Actions.tsx","../../src/homePageComponents/RandomJoke/Content.tsx","../../src/homePageComponents/RandomJoke/Settings.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext } from 'react';\n\nexport type JokeType = 'any' | 'programming';\n\ntype Joke = {\n  setup: string;\n  punchline: string;\n};\n\ntype RandomJokeContextValue = {\n  loading: boolean;\n  joke: Joke;\n  type: JokeType;\n  rerollJoke: Function;\n  handleChangeType: Function;\n};\n\nconst Context = createContext<RandomJokeContextValue | undefined>(undefined);\n\nconst getNewJoke = (type: string): Promise<Joke> =>\n  fetch(\n    `https://official-joke-api.appspot.com/jokes${\n      type !== 'any' ? `/${type}` : ''\n    }/random`,\n  )\n    .then(res => res.json())\n    .then(data => (Array.isArray(data) ? data[0] : data));\n\nexport const ContextProvider = (props: {\n  children: JSX.Element;\n  defaultCategory?: JokeType;\n}) => {\n  const { children, defaultCategory } = props;\n\n  const [loading, setLoading] = React.useState(true);\n  const [joke, setJoke] = React.useState<Joke>({\n    setup: '',\n    punchline: '',\n  });\n  const [type, setType] = React.useState<JokeType>(\n    defaultCategory || ('programming' as JokeType),\n  );\n\n  const rerollJoke = React.useCallback(() => {\n    setLoading(true);\n    getNewJoke(type).then(newJoke => setJoke(newJoke));\n  }, [type]);\n\n  const handleChangeType = (newType: JokeType) => {\n    setType(newType);\n  };\n\n  React.useEffect(() => {\n    setLoading(false);\n  }, [joke]);\n\n  React.useEffect(() => {\n    rerollJoke();\n  }, [rerollJoke]);\n\n  const value: RandomJokeContextValue = {\n    loading,\n    joke,\n    type,\n    rerollJoke,\n    handleChangeType,\n  };\n\n  return <Context.Provider value={value}>{children}</Context.Provider>;\n};\n\nexport const useRandomJoke = () => {\n  const value = React.useContext(Context);\n\n  if (value === undefined) {\n    throw new Error('useRandomJoke must be used within a RandomJokeProvider');\n  }\n\n  return value;\n};\n\nexport default Context;\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { Button } from '@material-ui/core';\nimport { useRandomJoke } from './Context';\n\nexport const Actions = () => {\n  const { rerollJoke } = useRandomJoke();\n  return (\n    <Button variant=\"contained\" color=\"primary\" onClick={() => rerollJoke()}>\n      Reroll\n    </Button>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useRandomJoke } from './Context';\n\nexport const Content = () => {\n  const { joke, loading } = useRandomJoke();\n\n  if (loading) return <p>Loading...</p>;\n\n  return (\n    <div>\n      <p>{joke.setup}</p>\n      <p>{joke.punchline}</p>\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n} from '@material-ui/core';\nimport React from 'react';\nimport { useRandomJoke, JokeType } from './Context';\nimport upperFirst from 'lodash/upperFirst';\n\nexport const Settings = () => {\n  const { type, handleChangeType } = useRandomJoke();\n  const JOKE_TYPES: JokeType[] = ['any' as JokeType, 'programming' as JokeType];\n  return (\n    <FormControl component=\"fieldset\">\n      <FormLabel component=\"legend\">Joke Type</FormLabel>\n      <RadioGroup\n        aria-label=\"joke type\"\n        value={type}\n        onChange={e => handleChangeType(e.target.value)}\n      >\n        {JOKE_TYPES.map(t => (\n          <FormControlLabel\n            key={t}\n            value={t}\n            control={<Radio />}\n            label={upperFirst(t)}\n          />\n        ))}\n      </RadioGroup>\n    </FormControl>\n  );\n};\n"],"names":[],"mappings":"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"}