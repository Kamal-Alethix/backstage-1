{"version":3,"file":"index-04844540.esm.js","sources":["../../src/components/CodeClimateTable/CodeClimateTable.tsx","../../src/components/CodeClimateCardContents/CodeClimateCardContents.tsx","../../src/components/CodeClimateCard/CodeClimateCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CodeClimateData } from '../../api';\nimport { Link } from '@backstage/core-components';\nimport { Box, makeStyles, Typography } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\n\nconst letterStyle = {\n  color: 'white',\n  border: 0,\n  borderRadius: '3px',\n  fontSize: '40px',\n  padding: '5px 20px',\n};\n\nconst fontSize = {\n  fontSize: '25px',\n};\n\nconst letterColor = (letter: string) => {\n  if (letter === 'A') {\n    return '#45d298';\n  } else if (letter === 'B') {\n    return '#a5d86e';\n  } else if (letter === 'C') {\n    return '#f1ce0c';\n  } else if (letter === 'D') {\n    return '#f29141';\n  } else if (letter === 'F') {\n    return '#df5869';\n  }\n\n  return '#45d298';\n};\n\nconst useStyles = makeStyles<\n  BackstageTheme,\n  {\n    maintainabilityLetter: string;\n    testCoverageLetter: string;\n  }\n>({\n  spaceAround: {\n    display: 'flex',\n    justifyContent: 'space-around',\n  },\n  spaceBetween: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  maintainabilityLetterColor: {\n    ...letterStyle,\n    backgroundColor: props => letterColor(props.maintainabilityLetter),\n  },\n  testCoverageLetterColor: {\n    ...letterStyle,\n    backgroundColor: props => letterColor(props.testCoverageLetter),\n  },\n  fontSize: {\n    ...fontSize,\n  },\n  letterDetails: {\n    ...fontSize,\n    paddingLeft: '10px',\n  },\n  paddingSides20: {\n    padding: '0px 20px',\n  },\n});\n\nexport const CodeClimateTable = ({\n  codeClimateData,\n}: {\n  codeClimateData: CodeClimateData;\n}) => {\n  const {\n    repoID,\n    maintainability: {\n      letter: maintainabilityLetter,\n      value: maintainabilityValue,\n    },\n    testCoverage: { letter: testCoverageLetter, value: testCoverageValue },\n    numberOfCodeSmells,\n    numberOfDuplication,\n    numberOfOtherIssues,\n  } = codeClimateData;\n\n  const classes = useStyles({ maintainabilityLetter, testCoverageLetter });\n\n  if (!codeClimateData) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className={classes.spaceAround}>\n        <div>\n          <Typography variant=\"h6\" component=\"p\">\n            Maintainability\n          </Typography>\n          <div className={classes.spaceBetween}>\n            <Typography\n              className={classes.maintainabilityLetterColor}\n              variant=\"body2\"\n              component=\"p\"\n            >\n              {maintainabilityLetter}\n            </Typography>\n            <Link to={`https://codeclimate.com/repos/${repoID}`}>\n              <Typography\n                className={classes.letterDetails}\n                variant=\"body2\"\n                component=\"p\"\n              >\n                {maintainabilityValue}\n              </Typography>\n            </Link>\n          </div>\n        </div>\n        <div>\n          <Typography variant=\"h6\" component=\"p\">\n            Test Coverage\n          </Typography>\n          <div className={classes.spaceBetween}>\n            <Typography\n              className={classes.testCoverageLetterColor}\n              variant=\"body2\"\n              component=\"p\"\n            >\n              {testCoverageLetter}\n            </Typography>\n            <Link to={`https://codeclimate.com/repos/${repoID}`}>\n              <Typography\n                className={classes.letterDetails}\n                variant=\"body2\"\n                component=\"p\"\n              >\n                {testCoverageValue}%\n              </Typography>\n            </Link>\n          </div>\n        </div>\n      </div>\n      <Box className={classes.spaceAround} paddingTop=\"30px\">\n        <div>\n          <Typography variant=\"h6\" component=\"p\">\n            Code Smells:\n          </Typography>\n          <Link\n            to={`https://codeclimate.com/repos/${repoID}/issues?category%5B%5D=complexity&status%5B%5D=&status%5B%5D=open&status%5B%5D=confirmed`}\n          >\n            <Typography\n              className={classes.fontSize}\n              variant=\"body2\"\n              component=\"p\"\n            >\n              {numberOfCodeSmells}\n            </Typography>\n          </Link>\n        </div>\n        <Box paddingLeft=\"20\" paddingRight=\"20\">\n          <Typography variant=\"h6\" component=\"p\">\n            Duplication:\n          </Typography>\n          <Link\n            to={`https://codeclimate.com/repos/${repoID}/issues?category%5B%5D=duplication&status%5B%5D=&status%5B%5D=open&status%5B%5D=confirmed`}\n          >\n            <Typography\n              className={classes.fontSize}\n              variant=\"body2\"\n              component=\"p\"\n            >\n              {numberOfDuplication}\n            </Typography>\n          </Link>\n        </Box>\n        <div>\n          <Typography variant=\"h6\" component=\"p\">\n            Other Issues:\n          </Typography>\n          <Link\n            to={`https://codeclimate.com/repos/${repoID}/issues?category%5B%5D=bugrisk&status%5B%5D=&status%5B%5D=open&status%5B%5D=confirmed`}\n          >\n            <Typography\n              className={classes.fontSize}\n              variant=\"body2\"\n              component=\"p\"\n            >\n              {numberOfOtherIssues}\n            </Typography>\n          </Link>\n        </div>\n      </Box>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { codeClimateApiRef } from '../../api';\nimport { CodeClimateTable } from '../CodeClimateTable';\nimport { CODECLIMATE_REPO_ID_ANNOTATION } from '../../plugin';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  EmptyState,\n  ErrorPanel,\n  MissingAnnotationEmptyState,\n  Progress,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nexport const CodeClimateCardContents = () => {\n  const { entity } = useEntity();\n  const codeClimateApi = useApi(codeClimateApiRef);\n\n  const repoID =\n    entity?.metadata.annotations?.[CODECLIMATE_REPO_ID_ANNOTATION] ?? '';\n\n  const { loading, value, error } = useAsync(\n    () => codeClimateApi.fetchData(repoID),\n    [codeClimateApi, repoID],\n  );\n\n  if (loading) {\n    return <Progress />;\n  } else if (!repoID) {\n    return (\n      <MissingAnnotationEmptyState\n        annotation={CODECLIMATE_REPO_ID_ANNOTATION}\n      />\n    );\n  } else if (error) {\n    return <ErrorPanel error={error} />;\n  } else if (!value) {\n    return (\n      <EmptyState\n        missing=\"info\"\n        title=\"No information to display\"\n        description={`There is no Code Climate repo setup with id '${repoID}'.`}\n      />\n    );\n  }\n\n  return <CodeClimateTable codeClimateData={value} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { InfoCard } from '@backstage/core-components';\nimport { CodeClimateCardContents } from '../CodeClimateCardContents';\n\nexport const CodeClimateCard = () => (\n  <InfoCard title=\"Code Climate Summary\">\n    <CodeClimateCardContents />\n  </InfoCard>\n);\n"],"names":[],"mappings":"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"}