{"version":3,"file":"index.esm.js","sources":["../src/api.ts","../src/routes.ts","../src/plugin.ts","../src/components/CoverageHistoryChart/CoverageHistoryChart.tsx","../src/components/FileExplorer/CodeRow.tsx","../src/components/FileExplorer/Highlighter.ts","../src/components/FileExplorer/FileContent.tsx","../src/components/FileExplorer/FileExplorer.tsx","../src/components/CodeCoveragePage/CodeCoveragePage.tsx","../src/components/Router.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CompoundEntityRef,\n  stringifyEntityRef,\n} from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport { JsonCodeCoverage, JsonCoverageHistory } from './types';\nimport { createApiRef, DiscoveryApi } from '@backstage/core-plugin-api';\n\nexport type CodeCoverageApi = {\n  discovery: DiscoveryApi;\n  getCoverageForEntity: (\n    entity: CompoundEntityRef,\n  ) => Promise<JsonCodeCoverage>;\n  getFileContentFromEntity: (\n    entity: CompoundEntityRef,\n    filePath: string,\n  ) => Promise<string>;\n  getCoverageHistoryForEntity: (\n    entity: CompoundEntityRef,\n    limit?: number,\n  ) => Promise<JsonCoverageHistory>;\n};\n\nexport const codeCoverageApiRef = createApiRef<CodeCoverageApi>({\n  id: 'plugin.code-coverage.service',\n});\n\nexport class CodeCoverageRestApi implements CodeCoverageApi {\n  url: string = '';\n\n  constructor(public discovery: DiscoveryApi) {}\n\n  private async fetch<T = unknown | string | JsonCoverageHistory>(\n    path: string,\n    init?: RequestInit,\n  ): Promise<T | string> {\n    if (!this.url) {\n      this.url = await this.discovery.getBaseUrl('code-coverage');\n    }\n    const resp = await fetch(`${this.url}${path}`, init);\n    if (!resp.ok) {\n      throw await ResponseError.fromResponse(resp);\n    }\n    if (resp.headers.get('content-type')?.includes('application/json')) {\n      return await resp.json();\n    }\n    return await resp.text();\n  }\n\n  async getCoverageForEntity(\n    entityName: CompoundEntityRef,\n  ): Promise<JsonCodeCoverage> {\n    const entity = encodeURIComponent(stringifyEntityRef(entityName));\n    return (await this.fetch<JsonCodeCoverage>(\n      `/report?entity=${entity}`,\n    )) as JsonCodeCoverage;\n  }\n\n  async getFileContentFromEntity(\n    entityName: CompoundEntityRef,\n    filePath: string,\n  ): Promise<string> {\n    const entity = encodeURIComponent(stringifyEntityRef(entityName));\n    return await this.fetch<string>(\n      `/file-content?entity=${entity}&path=${encodeURI(filePath)}`,\n    );\n  }\n\n  async getCoverageHistoryForEntity(\n    entityName: CompoundEntityRef,\n    limit?: number,\n  ): Promise<JsonCoverageHistory> {\n    const entity = encodeURIComponent(stringifyEntityRef(entityName));\n    const hasValidLimit = limit && limit > 0;\n    return (await this.fetch<JsonCoverageHistory>(\n      `/history?entity=${entity}${\n        hasValidLimit ? `&limit=${encodeURIComponent(String(limit))}` : ''\n      }`,\n    )) as JsonCoverageHistory;\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'code-coverage',\n});\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { codeCoverageApiRef, CodeCoverageRestApi } from './api';\nimport { rootRouteRef } from './routes';\n\nimport {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const codeCoveragePlugin = createPlugin({\n  id: 'code-coverage',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: codeCoverageApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new CodeCoverageRestApi(discoveryApi),\n    }),\n  ],\n});\n\nexport const EntityCodeCoverageContent = codeCoveragePlugin.provide(\n  createRoutableExtension({\n    name: 'EntityCodeCoverageContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  Box,\n  Card,\n  CardContent,\n  CardHeader,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport TrendingDownIcon from '@material-ui/icons/TrendingDown';\nimport TrendingFlatIcon from '@material-ui/icons/TrendingFlat';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport { Alert } from '@material-ui/lab';\nimport { ClassNameMap } from '@material-ui/styles';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  CartesianGrid,\n  Legend,\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from 'recharts';\nimport { codeCoverageApiRef } from '../../api';\n\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { DateTime } from 'luxon';\n\ntype Coverage = 'line' | 'branch';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  trendDown: {\n    color: theme.palette.status.warning,\n  },\n  trendUp: {\n    color: theme.palette.status.ok,\n  },\n}));\n\nconst getTrendIcon = (trend: number, classes: ClassNameMap) => {\n  switch (true) {\n    case trend > 0:\n      return <TrendingUpIcon className={classes.trendUp} />;\n    case trend < 0:\n      return <TrendingDownIcon className={classes.trendDown} />;\n    case trend === 0:\n    default:\n      return <TrendingFlatIcon />;\n  }\n};\n\n// convert timestamp to human friendly form\nfunction formatDateToHuman(timeStamp: string | number) {\n  return DateTime.fromMillis(Number(timeStamp)).toLocaleString(\n    DateTime.DATETIME_MED,\n  );\n}\n\nexport const CoverageHistoryChart = () => {\n  const { entity } = useEntity();\n  const codeCoverageApi = useApi(codeCoverageApiRef);\n  const {\n    loading: loadingHistory,\n    error: errorHistory,\n    value: valueHistory,\n  } = useAsync(\n    async () =>\n      await codeCoverageApi.getCoverageHistoryForEntity({\n        kind: entity.kind,\n        namespace: entity.metadata.namespace || 'default',\n        name: entity.metadata.name,\n      }),\n  );\n  const classes = useStyles();\n\n  if (loadingHistory) {\n    return <Progress />;\n  }\n  if (errorHistory) {\n    return <ResponseErrorPanel error={errorHistory} />;\n  } else if (!valueHistory) {\n    return <Alert severity=\"warning\">No history found.</Alert>;\n  }\n\n  if (!valueHistory.history.length) {\n    return (\n      <Card>\n        <CardHeader title=\"History\" />\n        <CardContent>No coverage history found</CardContent>\n      </Card>\n    );\n  }\n\n  const oldestCoverage = valueHistory.history[0];\n  const [latestCoverage] = valueHistory.history.slice(-1);\n\n  const getTrendForCoverage = (type: Coverage) => {\n    if (!oldestCoverage[type].percentage) {\n      return 0;\n    }\n    return (\n      ((latestCoverage[type].percentage - oldestCoverage[type].percentage) /\n        oldestCoverage[type].percentage) *\n      100\n    );\n  };\n\n  const lineTrend = getTrendForCoverage('line');\n  const branchTrend = getTrendForCoverage('branch');\n\n  return (\n    <Card>\n      <CardHeader title=\"History\" />\n      <CardContent>\n        <Box px={6} display=\"flex\">\n          <Box display=\"flex\" mr={4}>\n            {getTrendIcon(lineTrend, classes)}\n            <Typography>\n              Current line: {latestCoverage.line.percentage}%<br />(\n              {Math.floor(lineTrend)}% change over {valueHistory.history.length}{' '}\n              builds)\n            </Typography>\n          </Box>\n          <Box display=\"flex\">\n            {getTrendIcon(branchTrend, classes)}\n            <Typography>\n              Current branch: {latestCoverage.branch.percentage}%<br />(\n              {Math.floor(branchTrend)}% change over{' '}\n              {valueHistory.history.length} builds)\n            </Typography>\n          </Box>\n        </Box>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <LineChart\n            data={valueHistory.history}\n            margin={{ right: 48, top: 32 }}\n          >\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis\n              dataKey=\"timestamp\"\n              tickFormatter={formatDateToHuman}\n              reversed\n            />\n            <YAxis dataKey=\"line.percentage\" />\n            <YAxis dataKey=\"branch.percentage\" />\n            <Tooltip labelFormatter={formatDateToHuman} />\n            <Legend />\n            <Line\n              type=\"monotone\"\n              dataKey=\"branch.percentage\"\n              stroke=\"#8884d8\"\n            />\n            <Line type=\"monotone\" dataKey=\"line.percentage\" stroke=\"#82ca9d\" />\n          </LineChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  lineNumberCell: {\n    color: `${theme.palette.grey[500]}`,\n    fontSize: '90%',\n    borderRight: `1px solid ${theme.palette.grey[500]}`,\n    paddingRight: theme.spacing(1),\n    textAlign: 'right',\n  },\n  hitCountCell: {\n    width: '50px',\n    borderRight: `1px solid ${theme.palette.grey[500]}`,\n    textAlign: 'center',\n    color: 'white', // need to enforce this color since it needs to stand out against colored background\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  countRoundedRectangle: {\n    borderRadius: '45px',\n    fontSize: '90%',\n    padding: '1px 3px 1px 3px',\n    width: '50px',\n  },\n  hitCountRoundedRectangle: {\n    backgroundColor: `${theme.palette.success.main}`,\n  },\n  notHitCountRoundedRectangle: {\n    backgroundColor: `${theme.palette.error.main}`,\n  },\n  codeLine: {\n    paddingLeft: `${theme.spacing(1)}`,\n    whiteSpace: 'pre',\n    fontSize: '90%',\n  },\n  hitCodeLine: {\n    backgroundColor: `${theme.palette.success.main}`,\n  },\n  notHitCodeLine: {\n    backgroundColor: `${theme.palette.error.main}`,\n  },\n}));\n\ntype CodeRowProps = {\n  lineNumber: number;\n  lineContent: string;\n  lineHits?: number | null;\n};\n\nexport const CodeRow = ({\n  lineNumber,\n  lineContent,\n  lineHits = null,\n}: CodeRowProps) => {\n  const classes = useStyles();\n  const hitCountRoundedRectangleClass = [classes.countRoundedRectangle];\n  const lineContentClass = [classes.codeLine];\n\n  let hitRoundedRectangle = null;\n  if (lineHits !== null) {\n    if (lineHits > 0) {\n      hitCountRoundedRectangleClass.push(classes.hitCountRoundedRectangle);\n      lineContentClass.push(classes.hitCodeLine);\n    } else {\n      hitCountRoundedRectangleClass.push(classes.notHitCountRoundedRectangle);\n      lineContentClass.push(classes.notHitCodeLine);\n    }\n    hitRoundedRectangle = (\n      <div className={hitCountRoundedRectangleClass.join(' ')}>{lineHits}</div>\n    );\n  }\n\n  return (\n    <tr>\n      <td className={classes.lineNumberCell}>{lineNumber}</td>\n      <td className={classes.hitCountCell}>{hitRoundedRectangle}</td>\n      <td\n        className={lineContentClass.join(' ')}\n        dangerouslySetInnerHTML={{ __html: lineContent }}\n      />\n    </tr>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport 'highlight.js/styles/atom-one-dark.css';\nimport highlight from 'highlight.js';\n\n/*\n * Given a file extension, repo name, and array of code lines, return a Promise resolving\n * to an array of formatted lines with html/css formatting.\n *\n * @param fileExtension - The extension of the source file\n * @param lines - The source code lines\n *\n * @returns Promise of formatted lines\n *\n * @see http://highlightjs.readthedocs.io/en/latest/api.html#highlight-name-value-ignore-illegals-continuation\n */\nexport const highlightLines = (fileExtension: string, lines: Array<string>) => {\n  const formattedLines: Array<string> = [];\n  let state: CompiledMode | Language | undefined;\n  let fileformat = fileExtension;\n  if (fileExtension === 'm') {\n    fileformat = 'objectivec';\n  }\n  if (fileExtension === 'tsx') {\n    fileformat = 'typescript';\n  }\n  if (fileExtension === 'jsx') {\n    fileformat = 'javascript';\n  }\n  if (fileExtension === 'kt') {\n    fileformat = 'kotlin';\n  }\n\n  lines.forEach(line => {\n    const result = highlight.highlight(fileformat, line, true, state);\n    state = result.top;\n    formattedLines.push(result.value);\n  });\n  return formattedLines;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { makeStyles, Paper } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { codeCoverageApiRef } from '../../api';\nimport { FileEntry } from '../../types';\nimport { CodeRow } from './CodeRow';\nimport { highlightLines } from './Highlighter';\n\nimport { Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\ntype Props = {\n  filename: string;\n  coverage: FileEntry;\n};\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    margin: 'auto',\n    top: '2em',\n    width: '80%',\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: 'scroll',\n  },\n  coverageFileViewTable: {\n    borderSpacing: '0px',\n    width: '80%',\n    marginTop: theme.spacing(2),\n  },\n}));\n\ntype FormattedLinesProps = {\n  highlightedLines: string[];\n  lineHits: Record<number, number>;\n};\nconst FormattedLines = ({\n  highlightedLines,\n  lineHits,\n}: FormattedLinesProps) => {\n  return (\n    <>\n      {highlightedLines.map((lineContent, idx) => {\n        const line = idx + 1;\n        return (\n          <CodeRow\n            key={line}\n            lineNumber={line}\n            lineContent={lineContent}\n            lineHits={lineHits[line]}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport const FileContent = ({ filename, coverage }: Props) => {\n  const { entity } = useEntity();\n  const codeCoverageApi = useApi(codeCoverageApiRef);\n  const { loading, error, value } = useAsync(\n    async () =>\n      await codeCoverageApi.getFileContentFromEntity(\n        {\n          kind: entity.kind,\n          namespace: entity.metadata.namespace || 'default',\n          name: entity.metadata.name,\n        },\n        filename,\n      ),\n    [entity],\n  );\n\n  const classes = useStyles();\n\n  if (loading) {\n    return <Progress />;\n  }\n  if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n  if (!value) {\n    return (\n      <Alert severity=\"warning\">\n        Unable to retrieve file content for {filename}\n      </Alert>\n    );\n  }\n\n  const [language] = filename.split('.').slice(-1);\n  const highlightedLines = highlightLines(language, value.split('\\n'));\n\n  // List of formatted nodes containing highlighted code\n  // lineHits array where lineHits[i] is number of hits for line i + 1\n  const lineHits = Object.entries(coverage.lineHits).reduce(\n    (acc: Record<string, number>, next: [string, number]) => {\n      acc[next[0]] = next[1];\n      return acc;\n    },\n    {},\n  );\n\n  return (\n    <Paper variant=\"outlined\" className={classes.paper}>\n      <table className={classes.coverageFileViewTable}>\n        <tbody>\n          <FormattedLines\n            highlightedLines={highlightedLines}\n            lineHits={lineHits}\n          />\n        </tbody>\n      </table>\n    </Paper>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  CardHeader,\n  Modal,\n  Tooltip,\n} from '@material-ui/core';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport { Alert } from '@material-ui/lab';\nimport React, { Fragment, useEffect, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { codeCoverageApiRef } from '../../api';\nimport { FileEntry } from '../../types';\nimport { FileContent } from './FileContent';\nimport {\n  Progress,\n  ResponseErrorPanel,\n  Table,\n  TableColumn,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\ntype FileStructureObject = Record<string, any>;\n\ntype CoverageTableRow = {\n  filename?: string;\n  files: CoverageTableRow[];\n  coverage: number;\n  missing: number;\n  tracked: number;\n  path: string;\n  tableData?: { id: number };\n};\n\nexport const groupByPath = (files: CoverageTableRow[]) => {\n  const acc: FileStructureObject = {};\n  files.forEach(file => {\n    const filename = file.filename;\n    if (!file.filename) return;\n    const pathArray = filename?.split('/').filter(el => el !== '');\n    if (pathArray) {\n      if (!acc.hasOwnProperty(pathArray[0])) {\n        acc[pathArray[0]] = [];\n      }\n      acc[pathArray[0]].push(file);\n    }\n  });\n  return acc;\n};\n\nconst removeVisitedPathGroup = (\n  files: CoverageTableRow[],\n  pathGroup: string,\n) => {\n  return files.map(file => {\n    return {\n      ...file,\n      filename: file.filename\n        ? file.filename.substring(\n            file.filename?.indexOf(pathGroup) + pathGroup.length + 1,\n          )\n        : file.filename,\n    };\n  });\n};\n\nexport const buildFileStructure = (row: CoverageTableRow) => {\n  const dataGroupedByPath: FileStructureObject = groupByPath(row.files);\n  row.files = Object.keys(dataGroupedByPath).map(pathGroup => {\n    return buildFileStructure({\n      path: pathGroup,\n      files: dataGroupedByPath.hasOwnProperty('files')\n        ? removeVisitedPathGroup(dataGroupedByPath.files, pathGroup)\n        : removeVisitedPathGroup(dataGroupedByPath[pathGroup], pathGroup),\n      coverage:\n        dataGroupedByPath[pathGroup].reduce(\n          (acc: number, cur: CoverageTableRow) => acc + cur.coverage,\n          0,\n        ) / dataGroupedByPath[pathGroup].length,\n      missing: dataGroupedByPath[pathGroup].reduce(\n        (acc: number, cur: CoverageTableRow) => acc + cur.missing,\n        0,\n      ),\n      tracked: dataGroupedByPath[pathGroup].reduce(\n        (acc: number, cur: CoverageTableRow) => acc + cur.tracked,\n        0,\n      ),\n    });\n  });\n  return row;\n};\n\nconst formatInitialData = (value: any) => {\n  return buildFileStructure({\n    path: '',\n    coverage: value.aggregate.line.percentage,\n    missing: value.aggregate.line.missed,\n    tracked: value.aggregate.line.available,\n    files: value.files.map((fc: FileEntry) => {\n      return {\n        path: '',\n        filename: fc.filename,\n        coverage: Math.floor(\n          (Object.values(fc.lineHits).filter((hits: number) => hits > 0)\n            .length /\n            Object.values(fc.lineHits).length) *\n            100,\n        ),\n        missing: Object.values(fc.lineHits).filter(hits => !hits).length,\n        tracked: Object.values(fc.lineHits).length,\n      };\n    }),\n  });\n};\n\nexport const getObjectsAtPath = (\n  curData: CoverageTableRow | undefined,\n  path: string[],\n): CoverageTableRow[] | undefined => {\n  let data = curData?.files;\n  for (const fragment of path) {\n    data = data?.find(d => d.path === fragment)?.files;\n  }\n  return data;\n};\n\nexport const FileExplorer = () => {\n  const { entity } = useEntity();\n  const [curData, setCurData] = useState<CoverageTableRow | undefined>();\n  const [tableData, setTableData] = useState<CoverageTableRow[] | undefined>();\n  const [curPath, setCurPath] = useState('');\n  const [modalOpen, setModalOpen] = useState(false);\n  const [curFile, setCurFile] = useState('');\n  const codeCoverageApi = useApi(codeCoverageApiRef);\n  const { loading, error, value } = useAsync(\n    async () =>\n      await codeCoverageApi.getCoverageForEntity({\n        kind: entity.kind,\n        namespace: entity.metadata.namespace || 'default',\n        name: entity.metadata.name,\n      }),\n  );\n\n  useEffect(() => {\n    if (!value) return;\n    const data = formatInitialData(value);\n    setCurData(data);\n    if (data.files) setTableData(data.files);\n  }, [value]);\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n  if (!value) {\n    return (\n      <Alert severity=\"warning\">No code coverage found for ${entity}</Alert>\n    );\n  }\n\n  const moveDownIntoPath = (path: string) => {\n    const nextPathData = tableData!.find(\n      (d: CoverageTableRow) => d.path === path,\n    );\n    if (nextPathData && nextPathData.files) {\n      setTableData(nextPathData.files);\n    }\n  };\n\n  const moveUpIntoPath = (idx: number) => {\n    const path = curPath.split('/').slice(0, idx + 1);\n    setCurPath(path.join('/'));\n    setTableData(getObjectsAtPath(curData, path.slice(1)));\n  };\n\n  const columns: TableColumn<CoverageTableRow>[] = [\n    {\n      title: 'Path',\n      type: 'string',\n      field: 'path',\n      render: (row: CoverageTableRow) => {\n        if (row.files?.length) {\n          return (\n            <div\n              role=\"button\"\n              tabIndex={row.tableData!.id}\n              style={{ color: 'lightblue', cursor: 'pointer' }}\n              onKeyDown={() => {\n                setCurPath(`${curPath}/${row.path}`);\n                moveDownIntoPath(row.path);\n              }}\n              onClick={() => {\n                setCurPath(`${curPath}/${row.path}`);\n                moveDownIntoPath(row.path);\n              }}\n            >\n              {row.path}\n            </div>\n          );\n        }\n\n        return (\n          <Box display=\"flex\" alignItems=\"center\">\n            {row.path}\n            <Tooltip title=\"View file content\">\n              <DescriptionIcon\n                fontSize=\"small\"\n                style={{ color: 'lightblue', cursor: 'pointer' }}\n                onClick={() => {\n                  setCurFile(`${curPath.slice(1)}/${row.path}`);\n                  setModalOpen(true);\n                }}\n              />\n            </Tooltip>\n          </Box>\n        );\n      },\n    },\n    {\n      title: 'Coverage',\n      type: 'numeric',\n      field: 'coverage',\n      render: (row: CoverageTableRow) => `${row.coverage.toFixed(2)}%`,\n    },\n    {\n      title: 'Missing lines',\n      type: 'numeric',\n      field: 'missing',\n    },\n    {\n      title: 'Tracked lines',\n      type: 'numeric',\n      field: 'tracked',\n    },\n  ];\n\n  const pathArray = curPath.split('/');\n  const lastPathElementIndex = pathArray.length - 1;\n  const fileCoverage = value.files.find((f: FileEntry) =>\n    f.filename.endsWith(curFile),\n  );\n\n  if (!fileCoverage) {\n    return null;\n  }\n\n  return (\n    <Card>\n      <CardHeader title=\"Explore Files\" />\n      <CardContent>\n        <Box mb={2} display=\"flex\">\n          {pathArray.map((pathElement, idx) => (\n            <Fragment key={pathElement || 'root'}>\n              <div\n                role=\"button\"\n                tabIndex={idx}\n                style={{\n                  color: `${idx !== lastPathElementIndex && 'lightblue'}`,\n                  cursor: `${idx !== lastPathElementIndex && 'pointer'}`,\n                }}\n                onKeyDown={() => moveUpIntoPath(idx)}\n                onClick={() => moveUpIntoPath(idx)}\n              >\n                {pathElement || 'root'}\n              </div>\n              <div>{'\\u00A0/\\u00A0'}</div>\n            </Fragment>\n          ))}\n        </Box>\n        <Table\n          emptyContent={<>No files found</>}\n          data={tableData || []}\n          columns={columns}\n        />\n        <Modal\n          open={modalOpen}\n          onClick={event => event.stopPropagation()}\n          onClose={() => setModalOpen(false)}\n          style={{ overflow: 'scroll' }}\n        >\n          <FileContent filename={curFile} coverage={fileCoverage} />\n        </Modal>\n      </CardContent>\n    </Card>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { CoverageHistoryChart } from '../CoverageHistoryChart';\nimport { FileExplorer } from '../FileExplorer';\nimport { Content, ContentHeader, Page } from '@backstage/core-components';\n\nexport const CodeCoveragePage = () => {\n  return (\n    <Page themeId=\"tool\">\n      <Content>\n        <ContentHeader title=\"Code coverage\" />\n        <CoverageHistoryChart />\n        <FileExplorer />\n      </Content>\n    </Page>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Entity } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { CodeCoveragePage } from './CodeCoveragePage';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\n\nexport const isCodeCoverageAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.['backstage.io/code-coverage']);\n\nexport const Router = () => {\n  const { entity } = useEntity();\n\n  if (!isCodeCoverageAvailable(entity)) {\n    return (\n      <MissingAnnotationEmptyState annotation=\"backstage.io/code-coverage\" />\n    );\n  }\n  return <CodeCoveragePage />;\n};\n"],"names":["useStyles","Tooltip"],"mappings":"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"}