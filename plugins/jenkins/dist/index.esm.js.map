{"version":3,"file":"index.esm.js","sources":["../src/api/JenkinsApi.ts","../src/plugin.ts","../src/components/BuildsPage/lib/Status/JenkinsRunStatus.tsx","../src/components/useBuilds.ts","../src/components/Cards/Cards.tsx","../src/constants.ts","../src/components/BuildsPage/lib/CITable/CITable.tsx","../src/components/useAsyncPolling.ts","../src/components/useBuildWithSteps.ts","../src/components/BuildWithStepsPage/BuildWithStepsPage.tsx","../src/components/Router.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiRef,\n  DiscoveryApi,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\nimport type { CompoundEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\n\nexport const jenkinsApiRef = createApiRef<JenkinsApi>({\n  id: 'plugin.jenkins.service2',\n});\n\nexport interface Build {\n  // standard Jenkins\n  timestamp: number;\n  building: boolean;\n  duration: number;\n  result?: string;\n  fullDisplayName: string;\n  displayName: string;\n  url: string;\n  number: number;\n\n  // added by us\n  source?: {\n    branchName: string;\n    displayName: string;\n    url: string;\n    commit: {\n      hash: string;\n    };\n    author: string;\n  };\n  tests: {\n    passed: number;\n    skipped: number;\n    failed: number;\n    total: number;\n    testUrl: string;\n  };\n  status: string; // == building ? 'running' : result,\n}\n\nexport interface Project {\n  // standard Jenkins\n  lastBuild: Build;\n  displayName: string;\n  fullDisplayName: string;\n  fullName: string;\n  inQueue: string;\n  // added by us\n  status: string; // == inQueue ? 'queued' : lastBuild.building ? 'running' : lastBuild.result,\n  onRestartClick: () => Promise<void>; // TODO rename to handle.* ? also, should this be on lastBuild?\n}\n\nexport interface JenkinsApi {\n  /**\n   * Get the projects (jobs which have builds, not folders) including info about their lastBuild.\n   *\n   * Deciding what jobs are for an entity can be configured by the backstage _Integrator_ in the plugin-jenkins-backend setup\n   * and by the _Software Engineer_ using annotations agreed with the _Integrator_.\n   *\n   * Typically, a folder job will be identified and the backend plugin will recursively look for projects (jobs with builds) within that folder.\n   */\n  getProjects(options: {\n    /** the entity whose jobs should be retrieved. */\n    entity: CompoundEntityRef;\n    /** a filter on jobs. Currently this just takes a branch (and assumes certain structures in jenkins) */\n    filter: { branch?: string };\n  }): Promise<Project[]>;\n\n  /**\n   * Get a single build.\n   *\n   * This takes an entity to support selecting between multiple jenkins instances.\n   *\n   * TODO: abstract jobFullName (so we could support differentiating between the same named job on multiple instances).\n   */\n  getBuild(options: {\n    entity: CompoundEntityRef;\n    jobFullName: string;\n    buildNumber: string;\n  }): Promise<Build>;\n\n  retry(options: {\n    entity: CompoundEntityRef;\n    jobFullName: string;\n    buildNumber: string;\n  }): Promise<void>;\n}\n\nexport class JenkinsClient implements JenkinsApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly identityApi: IdentityApi;\n\n  constructor(options: {\n    discoveryApi: DiscoveryApi;\n    identityApi: IdentityApi;\n  }) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  async getProjects(options: {\n    entity: CompoundEntityRef;\n    filter: { branch?: string };\n  }): Promise<Project[]> {\n    const { entity, filter } = options;\n    const url = new URL(\n      `${await this.discoveryApi.getBaseUrl(\n        'jenkins',\n      )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n        entity.kind,\n      )}/${encodeURIComponent(entity.name)}/projects`,\n    );\n\n    if (filter.branch) {\n      url.searchParams.append('branch', filter.branch);\n    }\n\n    const idToken = await this.getToken();\n    const response = await fetch(url.href, {\n      method: 'GET',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    return (\n      (await response.json()).projects?.map((p: Project) => ({\n        ...p,\n        onRestartClick: () => {\n          return this.retry({\n            entity,\n            jobFullName: p.fullName,\n            buildNumber: String(p.lastBuild.number),\n          });\n        },\n      })) || []\n    );\n  }\n\n  async getBuild(options: {\n    entity: CompoundEntityRef;\n    jobFullName: string;\n    buildNumber: string;\n  }): Promise<Build> {\n    const { entity, jobFullName, buildNumber } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\n      'jenkins',\n    )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n      entity.kind,\n    )}/${encodeURIComponent(entity.name)}/job/${encodeURIComponent(\n      jobFullName,\n    )}/${encodeURIComponent(buildNumber)}`;\n\n    const idToken = await this.getToken();\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    return (await response.json()).build;\n  }\n\n  async retry(options: {\n    entity: CompoundEntityRef;\n    jobFullName: string;\n    buildNumber: string;\n  }): Promise<void> {\n    const { entity, jobFullName, buildNumber } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\n      'jenkins',\n    )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n      entity.kind,\n    )}/${encodeURIComponent(entity.name)}/job/${encodeURIComponent(\n      jobFullName,\n    )}/${encodeURIComponent(buildNumber)}:rebuild`;\n\n    const idToken = await this.getToken();\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        ...(idToken && { Authorization: `Bearer ${idToken}` }),\n      },\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n\n  private async getToken() {\n    const { token } = await this.identityApi.getCredentials();\n    return token;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  createSubRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { JenkinsClient, jenkinsApiRef } from './api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'jenkins',\n});\n\nexport const buildRouteRef = createSubRouteRef({\n  id: 'jenkins/builds',\n  path: '/builds/:jobFullName/:buildNumber',\n  parent: rootRouteRef,\n});\n\nexport const jenkinsPlugin = createPlugin({\n  id: 'jenkins',\n  apis: [\n    createApiFactory({\n      api: jenkinsApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) =>\n        new JenkinsClient({ discoveryApi, identityApi }),\n    }),\n  ],\n  routes: {\n    entityContent: rootRouteRef,\n  },\n});\n\nexport const EntityJenkinsContent = jenkinsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityJenkinsContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: rootRouteRef,\n  }),\n);\nexport const EntityLatestJenkinsRunCard = jenkinsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityLatestJenkinsRunCard',\n    component: {\n      lazy: () => import('./components/Cards').then(m => m.LatestRunCard),\n    },\n  }),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  StatusPending,\n  StatusRunning,\n  StatusOK,\n  StatusWarning,\n  StatusAborted,\n  StatusError,\n} from '@backstage/core-components';\n\nexport const JenkinsRunStatus = ({\n  status,\n}: {\n  status: string | undefined;\n}) => {\n  if (status === undefined) return null;\n  switch (status.toLocaleLowerCase('en-US')) {\n    case 'queued':\n    case 'scheduled':\n      return (\n        <>\n          <StatusPending /> Queued\n        </>\n      );\n    case 'running':\n      return (\n        <>\n          <StatusRunning /> In progress\n        </>\n      );\n    case 'unstable':\n      return (\n        <>\n          <StatusWarning /> Unstable\n        </>\n      );\n    case 'failure':\n      return (\n        <>\n          <StatusError /> Failed\n        </>\n      );\n    case 'success':\n      return (\n        <>\n          <StatusOK /> Completed\n        </>\n      );\n    case 'aborted':\n      return (\n        <>\n          <StatusAborted /> Aborted\n        </>\n      );\n    default:\n      return (\n        <>\n          <StatusWarning /> {status}\n        </>\n      );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { jenkinsApiRef } from '../api';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\nexport enum ErrorType {\n  CONNECTION_ERROR,\n  NOT_FOUND,\n}\n\n/**\n * Hook to expose the latest build for all the pipelines/projects for an entity.\n * If `branch` is provided, the latest build for only that branch will be given (but still as a list)\n *\n * TODO: deprecate branch and add a generic filter concept.\n */\nexport function useBuilds({ branch }: { branch?: string } = {}) {\n  const { entity } = useEntity();\n  const entityName = getCompoundEntityRef(entity);\n  const api = useApi(jenkinsApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(5);\n  const [error, setError] = useState<{\n    message: string;\n    errorType: ErrorType;\n  }>();\n\n  const restartBuild = async (jobFullName: string, buildNumber: string) => {\n    try {\n      await api.retry({ entity: entityName, jobFullName, buildNumber });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n\n  const {\n    loading,\n    value: projects,\n    retry,\n  } = useAsyncRetry(async () => {\n    try {\n      const build = await api.getProjects({\n        entity: getCompoundEntityRef(entity),\n        filter: { branch },\n      });\n\n      setTotal(build.length);\n\n      return build;\n    } catch (e) {\n      const errorType = e.notFound\n        ? ErrorType.NOT_FOUND\n        : ErrorType.CONNECTION_ERROR;\n      setError({ message: e.message, errorType });\n      throw e;\n    }\n  }, [api, errorApi, entity, branch]);\n\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      projects,\n      total,\n      error,\n    },\n    {\n      setPage,\n      setPageSize,\n      restartBuild,\n      retry, // fetch data again\n    },\n  ] as const;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { LinearProgress, makeStyles, Theme } from '@material-ui/core';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime, Duration } from 'luxon';\nimport React from 'react';\nimport { JenkinsRunStatus } from '../BuildsPage/lib/Status';\nimport { ErrorType, useBuilds } from '../useBuilds';\nimport {\n  InfoCard,\n  InfoCardVariants,\n  Link,\n  StructuredMetadataTable,\n  WarningPanel,\n} from '@backstage/core-components';\nimport { Project } from '../../api/JenkinsApi';\n\nconst useStyles = makeStyles<Theme>({\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n});\n\nconst WidgetContent = ({\n  loading,\n  latestRun,\n}: {\n  loading?: boolean;\n  latestRun?: Project;\n  branch: string;\n}) => {\n  const classes = useStyles();\n  if (loading || !latestRun) return <LinearProgress />;\n  const displayDate = DateTime.fromMillis(\n    latestRun.lastBuild.timestamp,\n  ).toRelative();\n  const displayDuration =\n    (latestRun.lastBuild.building ? 'Running for ' : '') +\n    DateTime.local()\n      .minus(Duration.fromMillis(latestRun.lastBuild.duration))\n      .toRelative({ locale: 'en' })\n      ?.replace(' ago', '');\n\n  return (\n    <StructuredMetadataTable\n      metadata={{\n        status: (\n          <>\n            <JenkinsRunStatus status={latestRun.lastBuild.status} />\n          </>\n        ),\n        build: latestRun.fullDisplayName,\n        'latest run': displayDate,\n        duration: displayDuration,\n        link: (\n          <Link to={latestRun.lastBuild.url}>\n            See more on Jenkins{' '}\n            <ExternalLinkIcon className={classes.externalLinkIcon} />\n          </Link>\n        ),\n      }}\n    />\n  );\n};\n\nconst JenkinsApiErrorPanel = ({\n  message,\n  errorType,\n}: {\n  message: string;\n  errorType: ErrorType;\n}) => {\n  let title = undefined;\n  if (errorType === ErrorType.CONNECTION_ERROR) {\n    title = \"Can't connect to Jenkins\";\n  } else if (errorType === ErrorType.NOT_FOUND) {\n    title = \"Can't find Jenkins project\";\n  }\n\n  return <WarningPanel severity=\"error\" title={title} message={message} />;\n};\n\nexport const LatestRunCard = ({\n  branch = 'master',\n  variant,\n}: {\n  branch: string;\n  variant?: InfoCardVariants;\n}) => {\n  const [{ projects, loading, error }] = useBuilds({ branch });\n  const latestRun = projects?.[0];\n  return (\n    <InfoCard title={`Latest ${branch} build`} variant={variant}>\n      {!error ? (\n        <WidgetContent\n          loading={loading}\n          branch={branch}\n          latestRun={latestRun}\n        />\n      ) : (\n        <JenkinsApiErrorPanel\n          message={error.message}\n          errorType={error.errorType}\n        />\n      )}\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const JENKINS_ANNOTATION = 'jenkins.io/job-full-name';\n// @deprecated The legacy annotation used for identifying Jenkins jobs, use\n// JENKINS_ANNOTATION instead.\nexport const LEGACY_JENKINS_ANNOTATION = 'jenkins.io/github-folder';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Link, Progress, Table, TableColumn } from '@backstage/core-components';\nimport { alertApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { useEntityPermission } from '@backstage/plugin-catalog-react';\nimport { Box, IconButton, Tooltip, Typography } from '@material-ui/core';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport { default as React, useState } from 'react';\nimport { Project } from '../../../../api/JenkinsApi';\nimport JenkinsLogo from '../../../../assets/JenkinsLogo.svg';\nimport { buildRouteRef } from '../../../../plugin';\nimport { useBuilds } from '../../../useBuilds';\nimport { JenkinsRunStatus } from '../Status';\nimport { jenkinsExecutePermission } from '@backstage/plugin-jenkins-common';\n\nconst FailCount = ({ count }: { count: number }): JSX.Element | null => {\n  if (count !== 0) {\n    return <>{count} failed</>;\n  }\n  return null;\n};\n\nconst SkippedCount = ({ count }: { count: number }): JSX.Element | null => {\n  if (count !== 0) {\n    return <>{count} skipped</>;\n  }\n  return null;\n};\n\nconst FailSkippedWidget = ({\n  skipped,\n  failed,\n}: {\n  skipped: number;\n  failed: number;\n}): JSX.Element | null => {\n  if (skipped === 0 && failed === 0) {\n    return null;\n  }\n\n  if (skipped !== 0 && failed !== 0) {\n    return (\n      <>\n        {' '}\n        (<FailCount count={failed} />, <SkippedCount count={skipped} />)\n      </>\n    );\n  }\n\n  if (failed !== 0) {\n    return (\n      <>\n        {' '}\n        (<FailCount count={failed} />)\n      </>\n    );\n  }\n\n  if (skipped !== 0) {\n    return (\n      <>\n        {' '}\n        (<SkippedCount count={skipped} />)\n      </>\n    );\n  }\n\n  return null;\n};\n\nconst generatedColumns: TableColumn[] = [\n  {\n    title: 'Timestamp',\n    defaultSort: 'desc',\n    hidden: true,\n    field: 'lastBuild.timestamp',\n  },\n  {\n    title: 'Build',\n    field: 'fullName',\n    highlight: true,\n    render: (row: Partial<Project>) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        if (!row.fullName || !row.lastBuild?.number) {\n          return (\n            <>\n              {row.fullName ||\n                row.fullDisplayName ||\n                row.displayName ||\n                'Unknown'}\n            </>\n          );\n        }\n\n        return (\n          <Link\n            to={routeLink({\n              jobFullName: encodeURIComponent(row.fullName),\n              buildNumber: String(row.lastBuild?.number),\n            })}\n          >\n            {row.fullDisplayName}\n          </Link>\n        );\n      };\n\n      return <LinkWrapper />;\n    },\n  },\n  {\n    title: 'Source',\n    field: 'lastBuild.source.branchName',\n    render: (row: Partial<Project>) => (\n      <>\n        <p>\n          <Link to={row.lastBuild?.source?.url ?? ''}>\n            {row.lastBuild?.source?.branchName}\n          </Link>\n        </p>\n        <p>{row.lastBuild?.source?.commit?.hash}</p>\n      </>\n    ),\n  },\n  {\n    title: 'Status',\n    field: 'status',\n    render: (row: Partial<Project>) => {\n      return (\n        <Box display=\"flex\" alignItems=\"center\">\n          <JenkinsRunStatus status={row.status} />\n        </Box>\n      );\n    },\n  },\n  {\n    title: 'Tests',\n    sorting: false,\n    render: (row: Partial<Project>) => {\n      return (\n        <>\n          <p>\n            {row.lastBuild?.tests && (\n              <Link to={row.lastBuild?.tests.testUrl ?? ''}>\n                {row.lastBuild?.tests.passed} / {row.lastBuild?.tests.total}{' '}\n                passed\n                <FailSkippedWidget\n                  skipped={row.lastBuild?.tests.skipped}\n                  failed={row.lastBuild?.tests.failed}\n                />\n              </Link>\n            )}\n\n            {!row.lastBuild?.tests && 'n/a'}\n          </p>\n        </>\n      );\n    },\n  },\n  {\n    title: 'Actions',\n    sorting: false,\n    render: (row: Partial<Project>) => {\n      const ActionWrapper = () => {\n        const [isLoadingRebuild, setIsLoadingRebuild] = useState(false);\n        const { allowed, loading } = useEntityPermission(\n          jenkinsExecutePermission,\n        );\n\n        const alertApi = useApi(alertApiRef);\n\n        const onRebuild = async () => {\n          if (row.onRestartClick) {\n            setIsLoadingRebuild(true);\n            try {\n              await row.onRestartClick();\n              alertApi.post({\n                message: 'Jenkins re-build has successfully executed',\n                severity: 'success',\n              });\n            } catch (e) {\n              alertApi.post({\n                message: `Jenkins re-build has failed. Error: ${e.message}`,\n                severity: 'error',\n              });\n            } finally {\n              setIsLoadingRebuild(false);\n            }\n          }\n        };\n\n        return (\n          <Tooltip title=\"Rerun build\">\n            <>\n              {isLoadingRebuild && <Progress />}\n              {!isLoadingRebuild && (\n                <IconButton onClick={onRebuild} disabled={loading || !allowed}>\n                  <RetryIcon />\n                </IconButton>\n              )}\n            </>\n          </Tooltip>\n        );\n      };\n      return <ActionWrapper />;\n    },\n    width: '10%',\n  },\n];\n\ntype Props = {\n  loading: boolean;\n  retry: () => void;\n  projects?: Project[];\n  page: number;\n  onChangePage: (page: number) => void;\n  total: number;\n  pageSize: number;\n  onChangePageSize: (pageSize: number) => void;\n};\n\nexport const CITableView = ({\n  loading,\n  pageSize,\n  page,\n  retry,\n  projects,\n  onChangePage,\n  onChangePageSize,\n  total,\n}: Props) => {\n  const projectsInPage = projects?.slice(\n    page * pageSize,\n    Math.min(projects.length, (page + 1) * pageSize),\n  );\n  return (\n    <Table\n      isLoading={loading}\n      options={{ paging: true, pageSize, padding: 'dense' }}\n      totalCount={total}\n      page={page}\n      actions={[\n        {\n          icon: () => <RetryIcon />,\n          tooltip: 'Refresh Data',\n          isFreeAction: true,\n          onClick: () => retry(),\n        },\n      ]}\n      data={projectsInPage ?? []}\n      onPageChange={onChangePage}\n      onRowsPerPageChange={onChangePageSize}\n      title={\n        <Box display=\"flex\" alignItems=\"center\">\n          <img src={JenkinsLogo} alt=\"Jenkins logo\" height=\"50px\" />\n          <Box mr={2} />\n          <Typography variant=\"h6\">Projects</Typography>\n        </Box>\n      }\n      columns={generatedColumns}\n    />\n  );\n};\n\nexport const CITable = () => {\n  const [tableProps, { setPage, retry, setPageSize }] = useBuilds();\n\n  return (\n    <CITableView\n      {...tableProps}\n      retry={retry}\n      onChangePageSize={setPageSize}\n      onChangePage={setPage}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef } from 'react';\n\nexport const useAsyncPolling = (\n  pollingFn: () => Promise<any>,\n  interval: number,\n) => {\n  const isPolling = useRef<boolean>(false);\n  const startPolling = async () => {\n    if (isPolling.current === true) return;\n    isPolling.current = true;\n\n    while (isPolling.current === true) {\n      await pollingFn();\n      await new Promise(resolve => setTimeout(resolve, interval));\n    }\n  };\n\n  const stopPolling = () => {\n    isPolling.current = false;\n  };\n  return { startPolling, stopPolling };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useCallback } from 'react';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { jenkinsApiRef } from '../api';\nimport { useAsyncPolling } from './useAsyncPolling';\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\n\nconst INTERVAL_AMOUNT = 1500;\n\n/**\n * Hook to expose a specific build.\n * @param jobFullName - the full name of the project (job with builds, not a folder). e.g. \"department-A/team-1/project-foo/master\"\n * @param buildNumber - the number of the build. e.g. \"13\"\n */\nexport function useBuildWithSteps({\n  jobFullName,\n  buildNumber,\n}: {\n  jobFullName: string;\n  buildNumber: string;\n}) {\n  const api = useApi(jenkinsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const { entity } = useEntity();\n\n  const getBuildWithSteps = useCallback(async () => {\n    try {\n      const entityName = await getCompoundEntityRef(entity);\n      return api.getBuild({ entity: entityName, jobFullName, buildNumber });\n    } catch (e) {\n      errorApi.post(e);\n      return Promise.reject(e);\n    }\n  }, [buildNumber, jobFullName, entity, api, errorApi]);\n\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuildWithSteps(),\n    [getBuildWithSteps],\n  );\n\n  const { startPolling, stopPolling } = useAsyncPolling(\n    getBuildWithSteps,\n    INTERVAL_AMOUNT,\n  );\n\n  return [\n    { loading, value, retry },\n    {\n      getBuildWithSteps,\n      startPolling,\n      stopPolling,\n    },\n  ] as const;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Box,\n  Link as MaterialLink,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport React from 'react';\nimport { buildRouteRef } from '../../plugin';\nimport { JenkinsRunStatus } from '../BuildsPage/lib/Status';\nimport { useBuildWithSteps } from '../useBuildWithSteps';\n\nimport { Breadcrumbs, Content, Link } from '@backstage/core-components';\nimport { useRouteRefParams } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 720,\n  },\n  table: {\n    padding: theme.spacing(1),\n  },\n  externalLinkIcon: {\n    fontSize: 'inherit',\n    verticalAlign: 'bottom',\n  },\n}));\n\nconst BuildWithStepsView = () => {\n  // TODO: Add a test that react-router decodes this (even though `generatePath` doesn't encode it for you!)\n  const { jobFullName, buildNumber } = useRouteRefParams(buildRouteRef);\n  const classes = useStyles();\n\n  const [{ value }] = useBuildWithSteps({ jobFullName, buildNumber });\n\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs aria-label=\"breadcrumb\">\n        {/* TODO: don't hardcode this link */}\n        <Link to=\"../../..\">Projects</Link>\n        <Typography>Run</Typography>\n      </Breadcrumbs>\n      <Box m={2} />\n      <TableContainer component={Paper} className={classes.table}>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>\n                <Typography noWrap>Branch</Typography>\n              </TableCell>\n              <TableCell>{value?.source?.branchName}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                <Typography noWrap>Message</Typography>\n              </TableCell>\n              <TableCell>{value?.source?.displayName}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                <Typography noWrap>Commit ID</Typography>\n              </TableCell>\n              <TableCell>{value?.source?.commit?.hash}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                <Typography noWrap>Status</Typography>\n              </TableCell>\n              <TableCell>\n                <JenkinsRunStatus status={value?.status} />\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                <Typography noWrap>Author</Typography>\n              </TableCell>\n              <TableCell>{value?.source?.author}</TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                <Typography noWrap>Jenkins</Typography>\n              </TableCell>\n              <TableCell>\n                <MaterialLink target=\"_blank\" href={value?.url}>\n                  View on Jenkins{' '}\n                  <ExternalLinkIcon className={classes.externalLinkIcon} />\n                </MaterialLink>\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                {/* TODO: be SCM agnostic */}\n                <Typography noWrap>GitHub</Typography>\n              </TableCell>\n              <TableCell>\n                <MaterialLink target=\"_blank\" href={value?.source?.url}>\n                  View on GitHub{' '}\n                  <ExternalLinkIcon className={classes.externalLinkIcon} />\n                </MaterialLink>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </div>\n  );\n};\nconst Page = () => (\n  <Content>\n    <BuildWithStepsView />\n  </Content>\n);\n\nexport default Page;\nexport { BuildWithStepsView as BuildWithSteps };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Entity } from '@backstage/catalog-model';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport { Route, Routes } from 'react-router';\nimport { JENKINS_ANNOTATION, LEGACY_JENKINS_ANNOTATION } from '../constants';\nimport { buildRouteRef } from '../plugin';\nimport { CITable } from './BuildsPage/lib/CITable';\nimport { DetailedViewPage } from './BuildWithStepsPage/';\n\nexport const isJenkinsAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[JENKINS_ANNOTATION]) ||\n  Boolean(entity.metadata.annotations?.[LEGACY_JENKINS_ANNOTATION]);\n\ntype Props = {};\n\nexport const Router = (_props: Props) => {\n  const { entity } = useEntity();\n\n  if (!isJenkinsAvailable(entity)) {\n    return <MissingAnnotationEmptyState annotation={JENKINS_ANNOTATION} />;\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<CITable />} />\n      <Route path={`/${buildRouteRef.path}`} element={<DetailedViewPage />} />\n    </Routes>\n  );\n};\n"],"names":["useStyles","makeStyles","Table","MaterialLink","DetailedViewPage"],"mappings":"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"}